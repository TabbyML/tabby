[api]
enabled = true
address = "0.0.0.0:8686"

[sources.tabby_server_logs]
type = "file"
include = ["/logs/tabby-server/events.*.log"]

[transforms.process_tabby_server_logs]
type = "remap"
inputs = [ "tabby_server_logs" ]
source = ". = parse_json!(parse_json!(.message).record.message)"

[sinks.write_tabby_server_logs]
type = "file"
inputs = [ "process_tabby_server_logs" ]
encoding = { codec = "json" }
framing = { method = "newline_delimited" }
path = "/logs/tabby-server/events.%Y-%m-%d.json"

id: avoid-unwrap-if-possible
message: Avoid unwrap, consider return Result with meaningful error message.
severity: warning
language: rust
ignores:
- ./crates/aim-downloader/*
- ./crates/tabby/tests/*
rule:
  all:
    - any:
        - kind: field_identifier
          regex: ^unwrap$
        - kind: identifier
          regex: ^unwrap$
    - not:
        inside:
          pattern: mod tests { $$$ }
          stopBy: end
    - not:
        inside:
          pattern: lazy_static! { $$$ }
          stopBy: end
#!/usr/bin/env node
'use strict';

var events = require('events');
var Tq = require('crypto');
var E_ = require('path');
var gP = require('os');
var rO = require('tls');
var wZ = require('readline');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var Tq__default = /*#__PURE__*/_interopDefault(Tq);
var E___default = /*#__PURE__*/_interopDefault(E_);
var gP__default = /*#__PURE__*/_interopDefault(gP);
var rO__default = /*#__PURE__*/_interopDefault(rO);
var wZ__default = /*#__PURE__*/_interopDefault(wZ);

/**
 * Tabby Agent
 * https://github.com/tabbyml/tabby/tree/main/clients/tabby-agent
 * Copyright (c) 2023-2024 TabbyML, Inc.
 * Licensed under the Apache License 2.0.
 */
var vq=Object.create;var Tc=Object.defineProperty;var bq=Object.getOwnPropertyDescriptor;var Sq=Object.getOwnPropertyNames;var Eq=Object.getPrototypeOf,wq=Object.prototype.hasOwnProperty;var he=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),eS=e=>t=>{var r=e[t];if(r)return r();throw new Error("Module not found in bundle: "+t)};var tS=(e,t)=>()=>(e&&(t=e(e=0)),t);var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Cq=(e,t)=>{for(var r in t)Tc(e,r,{get:t[r],enumerable:!0});},rS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Sq(t))!wq.call(e,i)&&i!==r&&Tc(e,i,{get:()=>t[i],enumerable:!(n=bq(t,i))||n.enumerable});return e};var or=(e,t,r)=>(r=e!=null?vq(Eq(e)):{},rS(t||!e||!e.__esModule?Tc(r,"default",{value:e,enumerable:!0}):r,e)),xq=e=>rS(Tc({},"__esModule",{value:!0}),e);var Qh=P((iee,sS)=>{var iS=Object.prototype.toString;sS.exports=function(t){var r=iS.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&iS.call(t.callee)==="[object Function]"),n};});var pS=P((see,hS)=>{var dS;Object.keys||(Uo=Object.prototype.hasOwnProperty,Zh=Object.prototype.toString,aS=Qh(),Xh=Object.prototype.propertyIsEnumerable,oS=!Xh.call({toString:null},"toString"),uS=Xh.call(function(){},"prototype"),$o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ic=function(e){var t=e.constructor;return t&&t.prototype===e},cS={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},lS=function(){if(typeof window>"u")return !1;for(var e in window)try{if(!cS["$"+e]&&Uo.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Ic(window[e]);}catch{return !0}}catch{return !0}return !1}(),fS=function(e){if(typeof window>"u"||!lS)return Ic(e);try{return Ic(e)}catch{return !1}},dS=function(t){var r=t!==null&&typeof t=="object",n=Zh.call(t)==="[object Function]",i=aS(t),s=r&&Zh.call(t)==="[object String]",a=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=uS&&n;if(s&&t.length>0&&!Uo.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(i&&t.length>0)for(var l=0;l<t.length;++l)a.push(String(l));else for(var u in t)!(o&&u==="prototype")&&Uo.call(t,u)&&a.push(String(u));if(oS)for(var f=fS(t),h=0;h<$o.length;++h)!(f&&$o[h]==="constructor")&&Uo.call(t,$o[h])&&a.push($o[h]);return a});var Uo,Zh,aS,Xh,oS,uS,$o,Ic,cS,lS,fS;hS.exports=dS;});var Nc=P((aee,yS)=>{var Iq=Array.prototype.slice,Pq=Qh(),gS=Object.keys,Pc=gS?function(t){return gS(t)}:pS(),mS=Object.keys;Pc.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Pq(n)?mS(Iq.call(n)):mS(n)});}else Object.keys=Pc;return Object.keys||Pc};yS.exports=Pc;});var Dc=P((oee,_S)=>{_S.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return !1;if(typeof Symbol.iterator=="symbol")return !0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return !1;var i=42;t[r]=i;for(r in t)return !1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return !1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return !1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return !1}return !0};});var Jh=P((uee,bS)=>{var vS=typeof Symbol<"u"&&Symbol,Nq=Dc();bS.exports=function(){return typeof vS!="function"||typeof Symbol!="function"||typeof vS("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Nq()};});var wS=P((cee,ES)=>{var SS={foo:{}},Dq=Object;ES.exports=function(){return {__proto__:SS}.foo===SS.foo&&!({__proto__:null}instanceof Dq)};});var TS=P((lee,xS)=>{var kq="Function.prototype.bind called on incompatible ",Oq=Object.prototype.toString,Bq=Math.max,Lq="[object Function]",CS=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var s=0;s<r.length;s+=1)n[s+t.length]=r[s];return n},Fq=function(t,r){for(var n=[],i=r||0,s=0;i<t.length;i+=1,s+=1)n[s]=t[i];return n},Mq=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};xS.exports=function(t){var r=this;if(typeof r!="function"||Oq.apply(r)!==Lq)throw new TypeError(kq+r);for(var n=Fq(arguments,1),i,s=function(){if(this instanceof i){var u=r.apply(this,CS(n,arguments));return Object(u)===u?u:this}return r.apply(t,CS(n,arguments))},a=Bq(0,r.length-n.length),o=[],c=0;c<a;c++)o[c]="$"+c;if(i=Function("binder","return function ("+Mq(o,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null;}return i};});var kc=P((fee,AS)=>{var qq=TS();AS.exports=Function.prototype.bind||qq;});var IS=P((dee,RS)=>{var Uq=Function.prototype.call,$q=Object.prototype.hasOwnProperty,jq=kc();RS.exports=jq.call(Uq,$q);});var qn=P((hee,OS)=>{var ut,Ca=SyntaxError,kS=Function,wa=TypeError,ep=function(e){try{return kS('"use strict"; return ('+e+").constructor;")()}catch{}},Ds=Object.getOwnPropertyDescriptor;var tp=function(){throw new wa},Vq=Ds?function(){try{return tp}catch{try{return Ds(arguments,"callee").get}catch{return tp}}}():tp,Sa=Jh()(),Hq=wS()(),ur=Object.getPrototypeOf||(Hq?function(e){return e.__proto__}:null),Ea={},Wq=typeof Uint8Array>"u"||!ur?ut:ur(Uint8Array),ks={"%AggregateError%":typeof AggregateError>"u"?ut:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ut:ArrayBuffer,"%ArrayIteratorPrototype%":Sa&&ur?ur([][Symbol.iterator]()):ut,"%AsyncFromSyncIteratorPrototype%":ut,"%AsyncFunction%":Ea,"%AsyncGenerator%":Ea,"%AsyncGeneratorFunction%":Ea,"%AsyncIteratorPrototype%":Ea,"%Atomics%":typeof Atomics>"u"?ut:Atomics,"%BigInt%":typeof BigInt>"u"?ut:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ut:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ut:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ut:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ut:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ut:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ut:FinalizationRegistry,"%Function%":kS,"%GeneratorFunction%":Ea,"%Int8Array%":typeof Int8Array>"u"?ut:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ut:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ut:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Sa&&ur?ur(ur([][Symbol.iterator]())):ut,"%JSON%":typeof JSON=="object"?JSON:ut,"%Map%":typeof Map>"u"?ut:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Sa||!ur?ut:ur(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ut:Promise,"%Proxy%":typeof Proxy>"u"?ut:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ut:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ut:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Sa||!ur?ut:ur(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ut:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Sa&&ur?ur(""[Symbol.iterator]()):ut,"%Symbol%":Sa?Symbol:ut,"%SyntaxError%":Ca,"%ThrowTypeError%":Vq,"%TypedArray%":Wq,"%TypeError%":wa,"%Uint8Array%":typeof Uint8Array>"u"?ut:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ut:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ut:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ut:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ut:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ut:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ut:WeakSet};var Kq=function e(t){var r;if(t==="%AsyncFunction%")r=ep("async function () {}");else if(t==="%GeneratorFunction%")r=ep("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=ep("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype);}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&ur&&(r=ur(i.prototype));}return ks[t]=r,r},NS={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jo=kc(),Oc=IS(),zq=jo.call(Function.call,Array.prototype.concat),Gq=jo.call(Function.apply,Array.prototype.splice),DS=jo.call(Function.call,String.prototype.replace),Bc=jo.call(Function.call,String.prototype.slice),Yq=jo.call(Function.call,RegExp.prototype.exec),Qq=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Zq=/\\(\\)?/g,Xq=function(t){var r=Bc(t,0,1),n=Bc(t,-1);if(r==="%"&&n!=="%")throw new Ca("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ca("invalid intrinsic syntax, expected opening `%`");var i=[];return DS(t,Qq,function(s,a,o,c){i[i.length]=o?DS(c,Zq,"$1"):a||s;}),i},Jq=function(t,r){var n=t,i;if(Oc(NS,n)&&(i=NS[n],n="%"+i[0]+"%"),Oc(ks,n)){var s=ks[n];if(s===Ea&&(s=Kq(n)),typeof s>"u"&&!r)throw new wa("intrinsic "+t+" exists, but is not available. Please file an issue!");return {alias:i,name:n,value:s}}throw new Ca("intrinsic "+t+" does not exist!")};OS.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new wa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new wa('"allowMissing" argument must be a boolean');if(Yq(/^%?[^%]*%?$/,t)===null)throw new Ca("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xq(t),i=n.length>0?n[0]:"",s=Jq("%"+i+"%",r),a=s.name,o=s.value,c=!1,l=s.alias;l&&(i=l[0],Gq(n,zq([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=Bc(h,0,1),m=Bc(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Ca("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,a="%"+i+"%",Oc(ks,a))o=ks[a];else if(o!=null){if(!(h in o)){if(!r)throw new wa("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ds&&u+1>=n.length){var v=Ds(o,h);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?o=v.get:o=o[h];}else f=Oc(o,h),o=o[h];f&&!c&&(ks[a]=o);}}return o};});var Vo=P((pee,BS)=>{var e4=qn(),rp=e4("%Object.defineProperty%",!0),np=function(){if(rp)try{return rp({},"a",{value:1}),!0}catch{return !1}return !1};np.hasArrayLengthDefineBug=function(){if(!np())return null;try{return rp([],"length",{value:1}).length!==1}catch{return !0}};BS.exports=np;});var Fc=P((gee,LS)=>{var t4=qn(),Lc=t4("%Object.getOwnPropertyDescriptor%",!0);if(Lc)try{Lc([],"length");}catch{Lc=null;}LS.exports=Lc;});var Mc=P((mee,qS)=>{var r4=Vo()(),ip=qn(),Ho=r4&&ip("%Object.defineProperty%",!0);if(Ho)try{Ho({},"a",{value:1});}catch{Ho=!1;}var n4=ip("%SyntaxError%"),xa=ip("%TypeError%"),MS=Fc();qS.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new xa("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new xa("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new xa("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new xa("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new xa("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new xa("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!MS&&MS(t,r);if(Ho)Ho(t,r,{configurable:a===null&&c?c.configurable:!a,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:s===null&&c?c.writable:!s});else if(o||!i&&!s&&!a)t[r]=n;else throw new n4("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")};});var ji=P((yee,VS)=>{var i4=Nc(),s4=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",a4=Object.prototype.toString,o4=Array.prototype.concat,US=Mc(),u4=function(e){return typeof e=="function"&&a4.call(e)==="[object Function]"},$S=Vo()(),c4=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!u4(n)||!n())return}$S?US(e,t,r,!0):US(e,t,r);},jS=function(e,t){var r=arguments.length>2?arguments[2]:{},n=i4(t);s4&&(n=o4.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)c4(e,n[i],t[n[i]],r[n[i]]);};jS.supportsDescriptors=!!$S;VS.exports=jS;});var YS=P((_ee,GS)=>{var zS=qn(),HS=Mc(),l4=Vo()(),WS=Fc(),KS=zS("%TypeError%"),f4=zS("%Math.floor%");GS.exports=function(t,r){if(typeof t!="function")throw new KS("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||f4(r)!==r)throw new KS("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in t&&WS){var a=WS(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(s=!1);}return (i||s||!n)&&(l4?HS(t,"length",r,!0,!0):HS(t,"length",r)),t};});var Os=P((vee,qc)=>{var sp=kc(),Ta=qn(),d4=YS(),h4=Ta("%TypeError%"),ZS=Ta("%Function.prototype.apply%"),XS=Ta("%Function.prototype.call%"),JS=Ta("%Reflect.apply%",!0)||sp.call(XS,ZS),Wo=Ta("%Object.defineProperty%",!0),p4=Ta("%Math.max%");if(Wo)try{Wo({},"a",{value:1});}catch{Wo=null;}qc.exports=function(t){if(typeof t!="function")throw new h4("a function is required");var r=JS(sp,XS,arguments);return d4(r,1+p4(0,t.length-(arguments.length-1)),!0)};var QS=function(){return JS(sp,ZS,arguments)};Wo?Wo(qc.exports,"apply",{value:QS}):qc.exports.apply=QS;});var En=P((bee,rE)=>{var eE=qn(),tE=Os(),g4=tE(eE("String.prototype.indexOf"));rE.exports=function(t,r){var n=eE(t,!!r);return typeof n=="function"&&g4(t,".prototype.")>-1?tE(n):n};});var ap=P((See,oE)=>{var m4=Nc(),sE=Dc()(),aE=En(),nE=Object,y4=aE("Array.prototype.push"),iE=aE("Object.prototype.propertyIsEnumerable"),_4=sE?Object.getOwnPropertySymbols:null;oE.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var n=nE(t);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var s=nE(arguments[i]),a=m4(s),o=sE&&(Object.getOwnPropertySymbols||_4);if(o)for(var c=o(s),l=0;l<c.length;++l){var u=c[l];iE(s,u)&&y4(a,u);}for(var f=0;f<a.length;++f){var h=a[f];if(iE(s,h)){var p=s[h];n[h]=p;}}}return n};});var up=P((Eee,uE)=>{var op=ap(),v4=function(){if(!Object.assign)return !1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),s="";for(var a in i)s+=a;return e!==s},b4=function(){if(!Object.assign||!Object.preventExtensions)return !1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy");}catch{return e[1]==="y"}return !1};uE.exports=function(){return !Object.assign||v4()||b4()?op:Object.assign};});var lE=P((wee,cE)=>{var S4=ji(),E4=up();cE.exports=function(){var t=E4();return S4(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t};});var pE=P((Cee,hE)=>{var w4=ji(),C4=Os(),x4=ap(),fE=up(),T4=lE(),A4=C4.apply(fE()),dE=function(t,r){return A4(Object,arguments)};w4(dE,{getPolyfill:fE,implementation:x4,shim:T4});hE.exports=dE;});var mE=P((xee,gE)=>{var zo=function(){return typeof function(){}.name=="string"},Ko=Object.getOwnPropertyDescriptor;zo.functionsHaveConfigurableNames=function(){if(!zo()||!Ko)return !1;var t=Ko(function(){},"name");return !!t&&!!t.configurable};var R4=Function.prototype.bind;zo.boundFunctionsHaveNames=function(){return zo()&&typeof R4=="function"&&function(){}.bind().name!==""};gE.exports=zo;});var vE=P((Tee,_E)=>{var yE=Mc(),I4=Vo()(),P4=mE().functionsHaveConfigurableNames(),N4=TypeError;_E.exports=function(t,r){if(typeof t!="function")throw new N4("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return (!n||P4)&&(I4?yE(t,"name",r,!0,!0):yE(t,"name",r)),t};});var cp=P((Aee,bE)=>{var D4=vE(),k4=Object,O4=TypeError;bE.exports=D4(function(){if(this!=null&&this!==k4(this))throw new O4("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0);});var lp=P((Ree,SE)=>{var B4=cp(),L4=ji().supportsDescriptors,F4=Object.getOwnPropertyDescriptor;SE.exports=function(){if(L4&&/a/mig.flags==="gim"){var t=F4(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d";}}),Object.defineProperty(n,"sticky",{get:function(){r+="y";}}),r==="dy")return t.get}}return B4};});var CE=P((Iee,wE)=>{var M4=ji().supportsDescriptors,q4=lp(),U4=Object.getOwnPropertyDescriptor,$4=Object.defineProperty,j4=TypeError,EE=Object.getPrototypeOf,V4=/a/;wE.exports=function(){if(!M4||!EE)throw new j4("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=q4(),r=EE(V4),n=U4(r,"flags");return (!n||n.get!==t)&&$4(r,"flags",{configurable:!0,enumerable:!1,get:t}),t};});var RE=P((Pee,AE)=>{var H4=ji(),W4=Os(),K4=cp(),xE=lp(),z4=CE(),TE=W4(xE());H4(TE,{getPolyfill:xE,implementation:K4,shim:z4});AE.exports=TE;});var NE=P((Nee,PE)=>{var IE=Symbol.iterator;PE.exports=function(t){if(t!=null&&typeof t[IE]<"u")return t[IE]()};});var kE=P((Dee,DE)=>{DE.exports=he("util").inspect;});var JE=P((kee,XE)=>{var bp=typeof Map=="function"&&Map.prototype,fp=Object.getOwnPropertyDescriptor&&bp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,$c=bp&&fp&&typeof fp.get=="function"?fp.get:null,OE=bp&&Map.prototype.forEach,Sp=typeof Set=="function"&&Set.prototype,dp=Object.getOwnPropertyDescriptor&&Sp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,jc=Sp&&dp&&typeof dp.get=="function"?dp.get:null,BE=Sp&&Set.prototype.forEach,G4=typeof WeakMap=="function"&&WeakMap.prototype,Yo=G4?WeakMap.prototype.has:null,Y4=typeof WeakSet=="function"&&WeakSet.prototype,Qo=Y4?WeakSet.prototype.has:null,Q4=typeof WeakRef=="function"&&WeakRef.prototype,LE=Q4?WeakRef.prototype.deref:null,Z4=Boolean.prototype.valueOf,X4=Object.prototype.toString,J4=Function.prototype.toString,e3=String.prototype.match,Ep=String.prototype.slice,Hi=String.prototype.replace,t3=String.prototype.toUpperCase,FE=String.prototype.toLowerCase,KE=RegExp.prototype.test,ME=Array.prototype.concat,Xn=Array.prototype.join,r3=Array.prototype.slice,qE=Math.floor,gp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,hp=Object.getOwnPropertySymbols,mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ar=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Aa||!0)?Symbol.toStringTag:null,zE=Object.prototype.propertyIsEnumerable,UE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function $E(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||KE.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-qE(-e):qE(e);if(n!==e){var i=String(n),s=Ep.call(t,i.length+1);return Hi.call(i,r,"$&_")+"."+Hi.call(Hi.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Hi.call(t,r,"$&_")}var yp=kE(),jE=yp.custom,VE=YE(jE)?jE:null;XE.exports=function e(t,r,n,i){var s=r||{};if(Vi(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Vi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Vi(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Vi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Vi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof t>"u")return "undefined";if(t===null)return "null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return ZE(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return o?$E(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return o?$E(t,l):l}var u=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof t=="object")return _p(t)?"[Array]":"[Object]";var f=b3(s,n);if(typeof i>"u")i=[];else if(QE(i,t)>=0)return "[Circular]";function h(me,Pe,W){if(Pe&&(i=r3.call(i),i.push(Pe)),W){var K={depth:s.depth};return Vi(s,"quoteStyle")&&(K.quoteStyle=s.quoteStyle),e(me,K,n+1,i)}return e(me,s,n+1,i)}if(typeof t=="function"&&!HE(t)){var p=f3(t),m=Uc(t,h);return "[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Xn.call(m,", ")+" }":"")}if(YE(t)){var v=Aa?Hi.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):mp.call(t);return typeof t=="object"&&!Aa?Go(v):v}if(y3(t)){for(var E="<"+FE.call(String(t.nodeName)),w=t.attributes||[],y=0;y<w.length;y++)E+=" "+w[y].name+"="+GE(n3(w[y].value),"double",s);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+FE.call(String(t.nodeName))+">",E}if(_p(t)){if(t.length===0)return "[]";var b=Uc(t,h);return f&&!v3(b)?"["+vp(b,f)+"]":"[ "+Xn.call(b,", ")+" ]"}if(s3(t)){var N=Uc(t,h);return !("cause"in Error.prototype)&&"cause"in t&&!zE.call(t,"cause")?"{ ["+String(t)+"] "+Xn.call(ME.call("[cause]: "+h(t.cause),N),", ")+" }":N.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Xn.call(N,", ")+" }"}if(typeof t=="object"&&a){if(VE&&typeof t[VE]=="function"&&yp)return yp(t,{depth:u-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(d3(t)){var B=[];return OE&&OE.call(t,function(me,Pe){B.push(h(Pe,t,!0)+" => "+h(me,t));}),WE("Map",$c.call(t),B,f)}if(g3(t)){var V=[];return BE&&BE.call(t,function(me){V.push(h(me,t));}),WE("Set",jc.call(t),V,f)}if(h3(t))return pp("WeakMap");if(m3(t))return pp("WeakSet");if(p3(t))return pp("WeakRef");if(o3(t))return Go(h(Number(t)));if(c3(t))return Go(h(gp.call(t)));if(u3(t))return Go(Z4.call(t));if(a3(t))return Go(h(String(t)));if(typeof window<"u"&&t===window)return "{ [object Window] }";if(t===global)return "{ [object globalThis] }";if(!i3(t)&&!HE(t)){var X=Uc(t,h),z=UE?UE(t)===Object.prototype:t instanceof Object||t.constructor===Object,G=t instanceof Object?"":"null prototype",ee=!z&&Ar&&Object(t)===t&&Ar in t?Ep.call(Wi(t),8,-1):G?"Object":"",U=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",ie=U+(ee||G?"["+Xn.call(ME.call([],ee||[],G||[]),": ")+"] ":"");return X.length===0?ie+"{}":f?ie+"{"+vp(X,f)+"}":ie+"{ "+Xn.call(X,", ")+" }"}return String(t)};function GE(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function n3(e){return Hi.call(String(e),/"/g,"&quot;")}function _p(e){return Wi(e)==="[object Array]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function i3(e){return Wi(e)==="[object Date]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function HE(e){return Wi(e)==="[object RegExp]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function s3(e){return Wi(e)==="[object Error]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function a3(e){return Wi(e)==="[object String]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function o3(e){return Wi(e)==="[object Number]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function u3(e){return Wi(e)==="[object Boolean]"&&(!Ar||!(typeof e=="object"&&Ar in e))}function YE(e){if(Aa)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return !0;if(!e||typeof e!="object"||!mp)return !1;try{return mp.call(e),!0}catch{}return !1}function c3(e){if(!e||typeof e!="object"||!gp)return !1;try{return gp.call(e),!0}catch{}return !1}var l3=Object.prototype.hasOwnProperty||function(e){return e in this};function Vi(e,t){return l3.call(e,t)}function Wi(e){return X4.call(e)}function f3(e){if(e.name)return e.name;var t=e3.call(J4.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function QE(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function d3(e){if(!$c||!e||typeof e!="object")return !1;try{$c.call(e);try{jc.call(e);}catch{return !0}return e instanceof Map}catch{}return !1}function h3(e){if(!Yo||!e||typeof e!="object")return !1;try{Yo.call(e,Yo);try{Qo.call(e,Qo);}catch{return !0}return e instanceof WeakMap}catch{}return !1}function p3(e){if(!LE||!e||typeof e!="object")return !1;try{return LE.call(e),!0}catch{}return !1}function g3(e){if(!jc||!e||typeof e!="object")return !1;try{jc.call(e);try{$c.call(e);}catch{return !0}return e instanceof Set}catch{}return !1}function m3(e){if(!Qo||!e||typeof e!="object")return !1;try{Qo.call(e,Qo);try{Yo.call(e,Yo);}catch{return !0}return e instanceof WeakSet}catch{}return !1}function y3(e){return !e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function ZE(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return ZE(Ep.call(e,0,t.maxStringLength),t)+n}var i=Hi.call(Hi.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,_3);return GE(i,"single",t)}function _3(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t3.call(t.toString(16))}function Go(e){return "Object("+e+")"}function pp(e){return e+" { ? }"}function WE(e,t,r,n){var i=n?vp(r,n):Xn.call(r,", ");return e+" ("+t+") {"+i+"}"}function v3(e){for(var t=0;t<e.length;t++)if(QE(e[t],`
`)>=0)return !1;return !0}function b3(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Xn.call(Array(e.indent+1)," ");else return null;return {base:r,prev:Xn.call(Array(t+1),r)}}function vp(e,t){if(e.length===0)return "";var r=`
`+t.prev+t.base;return r+Xn.call(e,","+r)+`
`+t.prev}function Uc(e,t){var r=_p(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Vi(e,i)?t(e[i],e):"";}var s=typeof hp=="function"?hp(e):[],a;if(Aa){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o];}for(var c in e)Vi(e,c)&&(r&&String(Number(c))===c&&c<e.length||Aa&&a["$"+c]instanceof Symbol||(KE.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if(typeof hp=="function")for(var l=0;l<s.length;l++)zE.call(e,s[l])&&n.push("["+t(s[l])+"]: "+t(e[s[l]],e));return n}});var tw=P((Oee,ew)=>{var wp=qn(),Ra=En(),S3=JE(),E3=wp("%TypeError%"),Vc=wp("%WeakMap%",!0),Hc=wp("%Map%",!0),w3=Ra("WeakMap.prototype.get",!0),C3=Ra("WeakMap.prototype.set",!0),x3=Ra("WeakMap.prototype.has",!0),T3=Ra("Map.prototype.get",!0),A3=Ra("Map.prototype.set",!0),R3=Ra("Map.prototype.has",!0),Cp=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},I3=function(e,t){var r=Cp(e,t);return r&&r.value},P3=function(e,t,r){var n=Cp(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r};},N3=function(e,t){return !!Cp(e,t)};ew.exports=function(){var t,r,n,i={assert:function(s){if(!i.has(s))throw new E3("Side channel does not contain "+S3(s))},get:function(s){if(Vc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return w3(t,s)}else if(Hc){if(r)return T3(r,s)}else if(n)return I3(n,s)},has:function(s){if(Vc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return x3(t,s)}else if(Hc){if(r)return R3(r,s)}else if(n)return N3(n,s);return !1},set:function(s,a){Vc&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Vc),C3(t,s,a)):Hc?(r||(r=new Hc),A3(r,s,a)):(n||(n={key:{},next:null}),P3(n,s,a));}};return i};});var xp=P((Bee,nw)=>{var rw=function(e){return e!==e};nw.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||rw(t)&&rw(r))};});var Tp=P((Lee,iw)=>{var D3=xp();iw.exports=function(){return typeof Object.is=="function"?Object.is:D3};});var aw=P((Fee,sw)=>{var k3=Tp(),O3=ji();sw.exports=function(){var t=k3();return O3(Object,{is:t},{is:function(){return Object.is!==t}}),t};});var lw=P((Mee,cw)=>{var B3=ji(),L3=Os(),F3=xp(),ow=Tp(),M3=aw(),uw=L3(ow(),Object);B3(uw,{getPolyfill:ow,implementation:F3,shim:M3});cw.exports=uw;});var Ki=P((qee,fw)=>{var q3=Dc();fw.exports=function(){return q3()&&!!Symbol.toStringTag};});var pw=P((Uee,hw)=>{var U3=Ki()(),$3=En(),Ap=$3("Object.prototype.toString"),Wc=function(t){return U3&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Ap(t)==="[object Arguments]"},dw=function(t){return Wc(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Ap(t)!=="[object Array]"&&Ap(t.callee)==="[object Function]"},j3=function(){return Wc(arguments)}();Wc.isLegacyArguments=dw;hw.exports=j3?Wc:dw;});var mw=P(($ee,gw)=>{var V3={}.toString;gw.exports=Array.isArray||function(e){return V3.call(e)=="[object Array]"};});var bw=P((jee,vw)=>{var _w=Function.prototype.toString,Ia=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Ip,Kc;if(typeof Ia=="function"&&typeof Object.defineProperty=="function")try{Ip=Object.defineProperty({},"length",{get:function(){throw Kc}}),Kc={},Ia(function(){throw 42},null,Ip);}catch(e){e!==Kc&&(Ia=null);}else Ia=null;var H3=/^\s*class\b/,Pp=function(t){try{var r=_w.call(t);return H3.test(r)}catch{return !1}},Rp=function(t){try{return Pp(t)?!1:(_w.call(t),!0)}catch{return !1}},zc=Object.prototype.toString,W3="[object Object]",K3="[object Function]",z3="[object GeneratorFunction]",G3="[object HTMLAllCollection]",Y3="[object HTML document.all class]",Q3="[object HTMLCollection]",Z3=typeof Symbol=="function"&&!!Symbol.toStringTag,X3=!(0 in[,]),Np=function(){return !1};typeof document=="object"&&(yw=document.all,zc.call(yw)===zc.call(document.all)&&(Np=function(t){if((X3||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=zc.call(t);return (r===G3||r===Y3||r===Q3||r===W3)&&t("")==null}catch{}return !1}));var yw;vw.exports=Ia?function(t){if(Np(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;try{Ia(t,null,Ip);}catch(r){if(r!==Kc)return !1}return !Pp(t)&&Rp(t)}:function(t){if(Np(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;if(Z3)return Rp(t);if(Pp(t))return !1;var r=zc.call(t);return r!==K3&&r!==z3&&!/^\[object HTML/.test(r)?!1:Rp(t)};});var ww=P((Vee,Ew)=>{var J3=bw(),e8=Object.prototype.toString,Sw=Object.prototype.hasOwnProperty,t8=function(t,r,n){for(var i=0,s=t.length;i<s;i++)Sw.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},r8=function(t,r,n){for(var i=0,s=t.length;i<s;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t);},n8=function(t,r,n){for(var i in t)Sw.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},i8=function(t,r,n){if(!J3(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),e8.call(t)==="[object Array]"?t8(t,r,i):typeof t=="string"?r8(t,r,i):n8(t,r,i);};Ew.exports=i8;});var xw=P((Hee,Cw)=>{var Dp=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],s8=typeof globalThis>"u"?global:globalThis;Cw.exports=function(){for(var t=[],r=0;r<Dp.length;r++)typeof s8[Dp[r]]=="function"&&(t[t.length]=Dp[r]);return t};});var Fp=P((Wee,Iw)=>{var Yc=ww(),a8=xw(),Tw=Os(),Bp=En(),Gc=Fc(),o8=Bp("Object.prototype.toString"),Rw=Ki()(),Aw=typeof globalThis>"u"?global:globalThis,Op=a8(),Lp=Bp("String.prototype.slice"),kp=Object.getPrototypeOf,u8=Bp("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return -1},Qc={__proto__:null};Rw&&Gc&&kp?Yc(Op,function(e){var t=new Aw[e];if(Symbol.toStringTag in t){var r=kp(t),n=Gc(r,Symbol.toStringTag);if(!n){var i=kp(r);n=Gc(i,Symbol.toStringTag);}Qc["$"+e]=Tw(n.get);}}):Yc(Op,function(e){var t=new Aw[e],r=t.slice||t.set;r&&(Qc["$"+e]=Tw(r));});var c8=function(t){var r=!1;return Yc(Qc,function(n,i){if(!r)try{"$"+n(t)===i&&(r=Lp(i,1));}catch{}}),r},l8=function(t){var r=!1;return Yc(Qc,function(n,i){if(!r)try{n(t),r=Lp(i,1);}catch{}}),r};Iw.exports=function(t){if(!t||typeof t!="object")return !1;if(!Rw){var r=Lp(o8(t),8,-1);return u8(Op,r)>-1?r:r!=="Object"?!1:l8(t)}return Gc?c8(t):null};});var Nw=P((Kee,Pw)=>{var f8=Fp();Pw.exports=function(t){return !!f8(t)};});var Mp=P((zee,Fw)=>{var d8=Os(),h8=En(),Lw=qn(),p8=Nw(),Dw=Lw("ArrayBuffer",!0),kw=Lw("Float32Array",!0),Zc=h8("ArrayBuffer.prototype.byteLength",!0),Ow=Dw&&!Zc&&new Dw().slice,Bw=Ow&&d8(Ow);Fw.exports=Zc||Bw?function(t){if(!t||typeof t!="object")return !1;try{return Zc?Zc(t):Bw(t,0),!0}catch{return !1}}:kw?function(t){try{return new kw(t).buffer===t&&!p8(t)}catch(r){return typeof t=="object"&&r.name==="RangeError"}}:function(t){return !1};});var qw=P((Gee,Mw)=>{var g8=Date.prototype.getDay,m8=function(t){try{return g8.call(t),!0}catch{return !1}},y8=Object.prototype.toString,_8="[object Date]",v8=Ki()();Mw.exports=function(t){return typeof t!="object"||t===null?!1:v8?m8(t):y8.call(t)===_8};});var Hw=P((Yee,Vw)=>{var qp=En(),Uw=Ki()(),$w,jw,Up,$p;Uw&&($w=qp("Object.prototype.hasOwnProperty"),jw=qp("RegExp.prototype.exec"),Up={},Xc=function(){throw Up},$p={toString:Xc,valueOf:Xc},typeof Symbol.toPrimitive=="symbol"&&($p[Symbol.toPrimitive]=Xc));var Xc,b8=qp("Object.prototype.toString"),S8=Object.getOwnPropertyDescriptor,E8="[object RegExp]";Vw.exports=Uw?function(t){if(!t||typeof t!="object")return !1;var r=S8(t,"lastIndex"),n=r&&$w(r,"value");if(!n)return !1;try{jw(t,$p);}catch(i){return i===Up}}:function(t){return !t||typeof t!="object"&&typeof t!="function"?!1:b8(t)===E8};});var zw=P((Qee,Kw)=>{var w8=En(),Ww=w8("SharedArrayBuffer.prototype.byteLength",!0);Kw.exports=Ww?function(t){if(!t||typeof t!="object")return !1;try{return Ww(t),!0}catch{return !1}}:function(t){return !1};});var Yw=P((Zee,Gw)=>{var C8=String.prototype.valueOf,x8=function(t){try{return C8.call(t),!0}catch{return !1}},T8=Object.prototype.toString,A8="[object String]",R8=Ki()();Gw.exports=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:R8?x8(t):T8.call(t)===A8};});var Zw=P((Xee,Qw)=>{var I8=Number.prototype.toString,P8=function(t){try{return I8.call(t),!0}catch{return !1}},N8=Object.prototype.toString,D8="[object Number]",k8=Ki()();Qw.exports=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:k8?P8(t):N8.call(t)===D8};});var eC=P((Jee,Jw)=>{var Xw=En(),O8=Xw("Boolean.prototype.toString"),B8=Xw("Object.prototype.toString"),L8=function(t){try{return O8(t),!0}catch{return !1}},F8="[object Boolean]",M8=Ki()();Jw.exports=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:M8&&Symbol.toStringTag in t?L8(t):B8(t)===F8};});var iC=P((ete,jp)=>{var q8=Object.prototype.toString,U8=Jh()();U8?(tC=Symbol.prototype.toString,rC=/^Symbol\(.*\)$/,nC=function(t){return typeof t.valueOf()!="symbol"?!1:rC.test(tC.call(t))},jp.exports=function(t){if(typeof t=="symbol")return !0;if(q8.call(t)!=="[object Symbol]")return !1;try{return nC(t)}catch{return !1}}):jp.exports=function(t){return !1};var tC,rC,nC;});var oC=P((tte,aC)=>{var sC=typeof BigInt<"u"&&BigInt;aC.exports=function(){return typeof sC=="function"&&typeof BigInt=="function"&&typeof sC(42)=="bigint"&&typeof BigInt(42)=="bigint"};});var lC=P((rte,Vp)=>{var $8=oC()();$8?(uC=BigInt.prototype.valueOf,cC=function(t){try{return uC.call(t),!0}catch{}return !1},Vp.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:cC(t)}):Vp.exports=function(t){return !1};var uC,cC;});var dC=P((nte,fC)=>{var j8=Yw(),V8=Zw(),H8=eC(),W8=iC(),K8=lC();fC.exports=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(j8(t))return "String";if(V8(t))return "Number";if(H8(t))return "Boolean";if(W8(t))return "Symbol";if(K8(t))return "BigInt"};});var mC=P((ite,gC)=>{var Hp=typeof Map=="function"&&Map.prototype?Map:null,z8=typeof Set=="function"&&Set.prototype?Set:null,Jc;Hp||(Jc=function(t){return !1});var pC=Hp?Map.prototype.has:null,hC=z8?Set.prototype.has:null;!Jc&&!pC&&(Jc=function(t){return !1});gC.exports=Jc||function(t){if(!t||typeof t!="object")return !1;try{if(pC.call(t),hC)try{hC.call(t);}catch{return !0}return t instanceof Hp}catch{}return !1};});var bC=P((ste,vC)=>{var G8=typeof Map=="function"&&Map.prototype?Map:null,Wp=typeof Set=="function"&&Set.prototype?Set:null,el;Wp||(el=function(t){return !1});var yC=G8?Map.prototype.has:null,_C=Wp?Set.prototype.has:null;!el&&!_C&&(el=function(t){return !1});vC.exports=el||function(t){if(!t||typeof t!="object")return !1;try{if(_C.call(t),yC)try{yC.call(t);}catch{return !0}return t instanceof Wp}catch{}return !1};});var wC=P((ate,EC)=>{var tl=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,SC=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,rl;tl||(rl=function(t){return !1});var zp=tl?tl.prototype.has:null,Kp=SC?SC.prototype.has:null;!rl&&!zp&&(rl=function(t){return !1});EC.exports=rl||function(t){if(!t||typeof t!="object")return !1;try{if(zp.call(t,zp),Kp)try{Kp.call(t,Kp);}catch{return !0}return t instanceof tl}catch{}return !1};});var xC=P((ote,Yp)=>{var Y8=qn(),CC=En(),Q8=Y8("%WeakSet%",!0),Gp=CC("WeakSet.prototype.has",!0);Gp?(nl=CC("WeakMap.prototype.has",!0),Yp.exports=function(t){if(!t||typeof t!="object")return !1;try{if(Gp(t,Gp),nl)try{nl(t,nl);}catch{return !0}return t instanceof Q8}catch{}return !1}):Yp.exports=function(t){return !1};var nl;});var AC=P((ute,TC)=>{var Z8=mC(),X8=bC(),J8=wC(),eU=xC();TC.exports=function(t){if(t&&typeof t=="object"){if(Z8(t))return "Map";if(X8(t))return "Set";if(J8(t))return "WeakMap";if(eU(t))return "WeakSet"}return !1};});var PC=P((cte,IC)=>{var tU=En(),RC=tU("ArrayBuffer.prototype.byteLength",!0),rU=Mp();IC.exports=function(t){return rU(t)?RC?RC(t):t.byteLength:NaN};});var cl=P((lte,e1)=>{var ZC=pE(),Jn=En(),NC=RE(),nU=qn(),Pa=NE(),iU=tw(),DC=lw(),kC=pw(),OC=mw(),BC=Mp(),LC=qw(),FC=Hw(),MC=zw(),qC=Nc(),UC=dC(),$C=AC(),jC=Fp(),VC=PC(),HC=Jn("SharedArrayBuffer.prototype.byteLength",!0),WC=Jn("Date.prototype.getTime"),Qp=Object.getPrototypeOf,KC=Jn("Object.prototype.toString"),sl=nU("%Set%",!0),Zp=Jn("Map.prototype.has",!0),al=Jn("Map.prototype.get",!0),zC=Jn("Map.prototype.size",!0),ol=Jn("Set.prototype.add",!0),XC=Jn("Set.prototype.delete",!0),ul=Jn("Set.prototype.has",!0),il=Jn("Set.prototype.size",!0);function GC(e,t,r,n){for(var i=Pa(e),s;(s=i.next())&&!s.done;)if(Un(t,s.value,r,n))return XC(e,s.value),!0;return !1}function JC(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function sU(e,t,r,n,i,s){var a=JC(r);if(a!=null)return a;var o=al(t,a),c=ZC({},i,{strict:!1});return typeof o>"u"&&!Zp(t,a)||!Un(n,o,c,s)?!1:!Zp(e,a)&&Un(n,o,c,s)}function aU(e,t,r){var n=JC(r);return n??(ul(t,n)&&!ul(e,n))}function YC(e,t,r,n,i,s){for(var a=Pa(e),o,c;(o=a.next())&&!o.done;)if(c=o.value,Un(r,c,i,s)&&Un(n,al(t,c),i,s))return XC(e,c),!0;return !1}function Un(e,t,r,n){var i=r||{};if(i.strict?DC(e,t):e===t)return !0;var s=UC(e),a=UC(t);if(s!==a)return !1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?DC(e,t):e==t;var o=n.has(e),c=n.has(t),l;if(o&&c){if(n.get(e)===n.get(t))return !0}else l={};return o||n.set(e,l),c||n.set(t,l),cU(e,t,i,n)}function QC(e){return !e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function oU(e,t,r,n){if(il(e)!==il(t))return !1;for(var i=Pa(e),s=Pa(t),a,o,c;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object")c||(c=new sl),ol(c,a.value);else if(!ul(t,a.value)){if(r.strict||!aU(e,t,a.value))return !1;c||(c=new sl),ol(c,a.value);}if(c){for(;(o=s.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!GC(c,o.value,r.strict,n))return !1}else if(!r.strict&&!ul(e,o.value)&&!GC(c,o.value,r.strict,n))return !1;return il(c)===0}return !0}function uU(e,t,r,n){if(zC(e)!==zC(t))return !1;for(var i=Pa(e),s=Pa(t),a,o,c,l,u,f;(a=i.next())&&!a.done;)if(l=a.value[0],u=a.value[1],l&&typeof l=="object")c||(c=new sl),ol(c,l);else if(f=al(t,l),typeof f>"u"&&!Zp(t,l)||!Un(u,f,r,n)){if(r.strict||!sU(e,t,l,u,r,n))return !1;c||(c=new sl),ol(c,l);}if(c){for(;(o=s.next())&&!o.done;)if(l=o.value[0],f=o.value[1],l&&typeof l=="object"){if(!YC(c,e,l,f,r,n))return !1}else if(!r.strict&&(!e.has(l)||!Un(al(e,l),f,r,n))&&!YC(c,e,l,f,ZC({},r,{strict:!1}),n))return !1;return il(c)===0}return !0}function cU(e,t,r,n){var i,s;if(typeof e!=typeof t||e==null||t==null||KC(e)!==KC(t)||kC(e)!==kC(t))return !1;var a=OC(e),o=OC(t);if(a!==o)return !1;var c=e instanceof Error,l=t instanceof Error;if(c!==l||(c||l)&&(e.name!==t.name||e.message!==t.message))return !1;var u=FC(e),f=FC(t);if(u!==f||(u||f)&&(e.source!==t.source||NC(e)!==NC(t)))return !1;var h=LC(e),p=LC(t);if(h!==p||(h||p)&&WC(e)!==WC(t)||r.strict&&Qp&&Qp(e)!==Qp(t))return !1;var m=jC(e),v=jC(t);if(m!==v)return !1;if(m||v){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var E=QC(e),w=QC(t);if(E!==w)return !1;if(E||w){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var y=BC(e),b=BC(t);if(y!==b)return !1;if(y||b)return VC(e)!==VC(t)?!1:typeof Uint8Array=="function"&&Un(new Uint8Array(e),new Uint8Array(t),r,n);var N=MC(e),B=MC(t);if(N!==B)return !1;if(N||B)return HC(e)!==HC(t)?!1:typeof Uint8Array=="function"&&Un(new Uint8Array(e),new Uint8Array(t),r,n);if(typeof e!=typeof t)return !1;var V=qC(e),X=qC(t);if(V.length!==X.length)return !1;for(V.sort(),X.sort(),i=V.length-1;i>=0;i--)if(V[i]!=X[i])return !1;for(i=V.length-1;i>=0;i--)if(s=V[i],!Un(e[s],t[s],r,n))return !1;var z=$C(e),G=$C(t);return z!==G?!1:z==="Set"||G==="Set"?oU(e,t,r,n):z==="Map"?uU(e,t,r,n):!0}e1.exports=function(t,r,n){return Un(t,r,n,iU())};});var l1={};Cq(l1,{closest:()=>DU,distance:()=>c1});var Ei,PU,NU,c1,DU,f1=tS(()=>{Ei=new Uint32Array(65536),PU=(e,t)=>{let r=e.length,n=t.length,i=1<<r-1,s=-1,a=0,o=r,c=r;for(;c--;)Ei[e.charCodeAt(c)]|=1<<c;for(c=0;c<n;c++){let l=Ei[t.charCodeAt(c)],u=l|a;l|=(l&s)+s^s,a|=~(l|s),s&=l,a&i&&o++,s&i&&o--,a=a<<1|1,s=s<<1|~(u|a),a&=u;}for(c=r;c--;)Ei[e.charCodeAt(c)]=0;return o},NU=(e,t)=>{let r=t.length,n=e.length,i=[],s=[],a=Math.ceil(r/32),o=Math.ceil(n/32);for(let m=0;m<a;m++)s[m]=-1,i[m]=0;let c=0;for(;c<o-1;c++){let m=0,v=-1,E=c*32,w=Math.min(32,n)+E;for(let y=E;y<w;y++)Ei[e.charCodeAt(y)]|=1<<y;for(let y=0;y<r;y++){let b=Ei[t.charCodeAt(y)],N=s[y/32|0]>>>y&1,B=i[y/32|0]>>>y&1,V=b|m,X=((b|B)&v)+v^v|b|B,z=m|~(X|v),G=v&X;z>>>31^N&&(s[y/32|0]^=1<<y),G>>>31^B&&(i[y/32|0]^=1<<y),z=z<<1|N,G=G<<1|B,v=G|~(V|z),m=z&V;}for(let y=E;y<w;y++)Ei[e.charCodeAt(y)]=0;}let l=0,u=-1,f=c*32,h=Math.min(32,n-f)+f;for(let m=f;m<h;m++)Ei[e.charCodeAt(m)]|=1<<m;let p=n;for(let m=0;m<r;m++){let v=Ei[t.charCodeAt(m)],E=s[m/32|0]>>>m&1,w=i[m/32|0]>>>m&1,y=v|l,b=((v|w)&u)+u^u|v|w,N=l|~(b|u),B=u&b;p+=N>>>n-1&1,p-=B>>>n-1&1,N>>>31^E&&(s[m/32|0]^=1<<m),B>>>31^w&&(i[m/32|0]^=1<<m),N=N<<1|E,B=B<<1|w,u=B|~(y|N),l=N&y;}for(let m=f;m<h;m++)Ei[e.charCodeAt(m)]=0;return p},c1=(e,t)=>{if(e.length<t.length){let r=t;t=e,e=r;}return t.length===0?e.length:e.length<=32?PU(e,t):NU(e,t)},DU=(e,t)=>{let r=1/0,n=0;for(let i=0;i<t.length;i++){let s=c1(e,t[i]);s<r&&(r=s,n=i);}return t[n]};});var d1=P((rg,Xo)=>{(function(){var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null;}catch{console.log("Collator could not be initialized and wouldn't be used");}var t=(f1(),xq(l1)),r=[],n=[],i={get:function(s,a,o){var c=o&&e&&o.useCollator;if(c){var l=s.length,u=a.length;if(l===0)return u;if(u===0)return l;var f,h,p,m,v;for(p=0;p<u;++p)r[p]=p,n[p]=a.charCodeAt(p);r[u]=u;var E;for(p=0;p<l;++p){for(h=p+1,m=0;m<u;++m)f=h,E=e.compare(s.charAt(p),String.fromCharCode(n[m]))===0,h=r[m]+(E?0:1),v=f+1,h>v&&(h=v),v=r[m+1]+1,h>v&&(h=v),r[m]=f;r[m]=h;}return h}return t.distance(s,a)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return i}):typeof Xo<"u"&&Xo!==null&&typeof rg<"u"&&Xo.exports===rg?Xo.exports=i:typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"?self.Levenshtein=i:typeof window<"u"&&window!==null&&(window.Levenshtein=i);})();});var cr=P(og=>{og.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,s)=>i!=null?n(i):r(s)),e.apply(this,t);})},"name",{value:e.name})};og.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r);},"name",{value:e.name})};});var y1=P((_te,m1)=>{var Gi=he("constants"),BU=process.cwd,ml=null,LU=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ml||(ml=BU.call(process)),ml};try{process.cwd();}catch{}typeof process.chdir=="function"&&(ug=process.chdir,process.chdir=function(e){ml=null,ug.call(process,e);},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ug));var ug;m1.exports=FU;function FU(e){Gi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=o(e.stat),e.fstat=o(e.fstat),e.lstat=o(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(u,f,h){h&&process.nextTick(h);},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(u,f,h,p){p&&process.nextTick(p);},e.lchownSync=function(){}),LU==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(u){function f(h,p,m){var v=Date.now(),E=0;u(h,p,function w(y){if(y&&(y.code==="EACCES"||y.code==="EPERM"||y.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){e.stat(p,function(b,N){b&&b.code==="ENOENT"?u(h,p,w):m(y);});},E),E<100&&(E+=10);return}m&&m(y);});}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(u){function f(h,p,m,v,E,w){var y;if(w&&typeof w=="function"){var b=0;y=function(N,B,V){if(N&&N.code==="EAGAIN"&&b<10)return b++,u.call(e,h,p,m,v,E,y);w.apply(this,arguments);};}return u.call(e,h,p,m,v,E,y)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(u){return function(f,h,p,m,v){for(var E=0;;)try{return u.call(e,f,h,p,m,v)}catch(w){if(w.code==="EAGAIN"&&E<10){E++;continue}throw w}}}(e.readSync);function t(u){u.lchmod=function(f,h,p){u.open(f,Gi.O_WRONLY|Gi.O_SYMLINK,h,function(m,v){if(m){p&&p(m);return}u.fchmod(v,h,function(E){u.close(v,function(w){p&&p(E||w);});});});},u.lchmodSync=function(f,h){var p=u.openSync(f,Gi.O_WRONLY|Gi.O_SYMLINK,h),m=!0,v;try{v=u.fchmodSync(p,h),m=!1;}finally{if(m)try{u.closeSync(p);}catch{}else u.closeSync(p);}return v};}function r(u){Gi.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,h,p,m){u.open(f,Gi.O_SYMLINK,function(v,E){if(v){m&&m(v);return}u.futimes(E,h,p,function(w){u.close(E,function(y){m&&m(w||y);});});});},u.lutimesSync=function(f,h,p){var m=u.openSync(f,Gi.O_SYMLINK),v,E=!0;try{v=u.futimesSync(m,h,p),E=!1;}finally{if(E)try{u.closeSync(m);}catch{}else u.closeSync(m);}return v}):u.futimes&&(u.lutimes=function(f,h,p,m){m&&process.nextTick(m);},u.lutimesSync=function(){});}function n(u){return u&&function(f,h,p){return u.call(e,f,h,function(m){l(m)&&(m=null),p&&p.apply(this,arguments);})}}function i(u){return u&&function(f,h){try{return u.call(e,f,h)}catch(p){if(!l(p))throw p}}}function s(u){return u&&function(f,h,p,m){return u.call(e,f,h,p,function(v){l(v)&&(v=null),m&&m.apply(this,arguments);})}}function a(u){return u&&function(f,h,p){try{return u.call(e,f,h,p)}catch(m){if(!l(m))throw m}}}function o(u){return u&&function(f,h,p){typeof h=="function"&&(p=h,h=null);function m(v,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),p&&p.apply(this,arguments);}return h?u.call(e,f,h,m):u.call(e,f,m)}}function c(u){return u&&function(f,h){var p=h?u.call(e,f,h):u.call(e,f);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function l(u){if(!u||u.code==="ENOSYS")return !0;var f=!process.getuid||process.getuid()!==0;return !!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var b1=P((vte,v1)=>{var _1=he("stream").Stream;v1.exports=MU;function MU(e){return {ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);_1.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),o=0,c=a.length;o<c;o++){var l=a[o];this[l]=i[l];}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start;}if(this.fd!==null){process.nextTick(function(){s._read();});return}e.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read();});}function r(n,i){if(!(this instanceof r))return new r(n,i);_1.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),a=0,o=s.length;a<o;a++){var c=s[a];this[c]=i[c];}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start;}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush());}}});var E1=P((bte,S1)=>{S1.exports=UU;var qU=Object.getPrototypeOf||function(e){return e.__proto__};function UU(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:qU(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));}),t}});var ka=P((Ste,fg)=>{var Gt=he("fs"),$U=y1(),jU=b1(),VU=E1(),yl=he("util"),Er,vl;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Er=Symbol.for("graceful-fs.queue"),vl=Symbol.for("graceful-fs.previous")):(Er="___graceful-fs.queue",vl="___graceful-fs.previous");function HU(){}function x1(e,t){Object.defineProperty(e,Er,{get:function(){return t}});}var Fs=HU;yl.debuglog?Fs=yl.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Fs=function(){var e=yl.format.apply(yl,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e);});Gt[Er]||(w1=global[Er]||[],x1(Gt,w1),Gt.close=function(e){function t(r,n){return e.call(Gt,r,function(i){i||C1(),typeof n=="function"&&n.apply(this,arguments);})}return Object.defineProperty(t,vl,{value:e}),t}(Gt.close),Gt.closeSync=function(e){function t(r){e.apply(Gt,arguments),C1();}return Object.defineProperty(t,vl,{value:e}),t}(Gt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Fs(Gt[Er]),he("assert").equal(Gt[Er].length,0);}));var w1;global[Er]||x1(global,Gt[Er]);fg.exports=cg(VU(Gt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Gt.__patched&&(fg.exports=cg(Gt),Gt.__patched=!0);function cg(e){$U(e),e.gracefulify=cg,e.createReadStream=B,e.createWriteStream=V;var t=e.readFile;e.readFile=r;function r(G,ee,U){return typeof ee=="function"&&(U=ee,ee=null),ie(G,ee,U);function ie(me,Pe,W,K){return t(me,Pe,function(se){se&&(se.code==="EMFILE"||se.code==="ENFILE")?Da([ie,[me,Pe,W],se,K||Date.now(),Date.now()]):typeof W=="function"&&W.apply(this,arguments);})}}var n=e.writeFile;e.writeFile=i;function i(G,ee,U,ie){return typeof U=="function"&&(ie=U,U=null),me(G,ee,U,ie);function me(Pe,W,K,se,Ae){return n(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var s=e.appendFile;s&&(e.appendFile=a);function a(G,ee,U,ie){return typeof U=="function"&&(ie=U,U=null),me(G,ee,U,ie);function me(Pe,W,K,se,Ae){return s(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var o=e.copyFile;o&&(e.copyFile=c);function c(G,ee,U,ie){return typeof U=="function"&&(ie=U,U=0),me(G,ee,U,ie);function me(Pe,W,K,se,Ae){return o(Pe,W,K,function(Fe){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}var l=e.readdir;e.readdir=f;var u=/^v[0-5]\./;function f(G,ee,U){typeof ee=="function"&&(U=ee,ee=null);var ie=u.test(process.version)?function(W,K,se,Ae){return l(W,me(W,K,se,Ae))}:function(W,K,se,Ae){return l(W,K,me(W,K,se,Ae))};return ie(G,ee,U);function me(Pe,W,K,se){return function(Ae,Fe){Ae&&(Ae.code==="EMFILE"||Ae.code==="ENFILE")?Da([ie,[Pe,W,K],Ae,se||Date.now(),Date.now()]):(Fe&&Fe.sort&&Fe.sort(),typeof K=="function"&&K.call(this,Ae,Fe));}}}if(process.version.substr(0,4)==="v0.8"){var h=jU(e);w=h.ReadStream,b=h.WriteStream;}var p=e.ReadStream;p&&(w.prototype=Object.create(p.prototype),w.prototype.open=y);var m=e.WriteStream;m&&(b.prototype=Object.create(m.prototype),b.prototype.open=N),Object.defineProperty(e,"ReadStream",{get:function(){return w},set:function(G){w=G;},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return b},set:function(G){b=G;},enumerable:!0,configurable:!0});var v=w;Object.defineProperty(e,"FileReadStream",{get:function(){return v},set:function(G){v=G;},enumerable:!0,configurable:!0});var E=b;Object.defineProperty(e,"FileWriteStream",{get:function(){return E},set:function(G){E=G;},enumerable:!0,configurable:!0});function w(G,ee){return this instanceof w?(p.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function y(){var G=this;z(G.path,G.flags,G.mode,function(ee,U){ee?(G.autoClose&&G.destroy(),G.emit("error",ee)):(G.fd=U,G.emit("open",U),G.read());});}function b(G,ee){return this instanceof b?(m.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function N(){var G=this;z(G.path,G.flags,G.mode,function(ee,U){ee?(G.destroy(),G.emit("error",ee)):(G.fd=U,G.emit("open",U));});}function B(G,ee){return new e.ReadStream(G,ee)}function V(G,ee){return new e.WriteStream(G,ee)}var X=e.open;e.open=z;function z(G,ee,U,ie){return typeof U=="function"&&(ie=U,U=null),me(G,ee,U,ie);function me(Pe,W,K,se,Ae){return X(Pe,W,K,function(Fe,Ke){Fe&&(Fe.code==="EMFILE"||Fe.code==="ENFILE")?Da([me,[Pe,W,K,se],Fe,Ae||Date.now(),Date.now()]):typeof se=="function"&&se.apply(this,arguments);})}}return e}function Da(e){Fs("ENQUEUE",e[0].name,e[1]),Gt[Er].push(e),lg();}var _l;function C1(){for(var e=Date.now(),t=0;t<Gt[Er].length;++t)Gt[Er][t].length>2&&(Gt[Er][t][3]=e,Gt[Er][t][4]=e);lg();}function lg(){if(clearTimeout(_l),_l=void 0,Gt[Er].length!==0){var e=Gt[Er].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)Fs("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Fs("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n);}else {var o=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);o>=l?(Fs("RETRY",t.name,r),t.apply(null,r.concat([i]))):Gt[Er].push(e);}_l===void 0&&(_l=setTimeout(lg,0));}}});var Mr=P(Ci=>{var T1=cr().fromCallback,Fr=ka(),WU=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Fr[e]=="function");Object.assign(Ci,Fr);WU.forEach(e=>{Ci[e]=T1(Fr[e]);});Ci.exists=function(e,t){return typeof t=="function"?Fr.exists(e,t):new Promise(r=>Fr.exists(e,r))};Ci.read=function(e,t,r,n,i,s){return typeof s=="function"?Fr.read(e,t,r,n,i,s):new Promise((a,o)=>{Fr.read(e,t,r,n,i,(c,l,u)=>{if(c)return o(c);a({bytesRead:l,buffer:u});});})};Ci.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Fr.write(e,t,...r):new Promise((n,i)=>{Fr.write(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesWritten:a,buffer:o});});})};Ci.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?Fr.readv(e,t,...r):new Promise((n,i)=>{Fr.readv(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesRead:a,buffers:o});});})};Ci.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Fr.writev(e,t,...r):new Promise((n,i)=>{Fr.writev(e,t,...r,(s,a,o)=>{if(s)return i(s);n({bytesWritten:a,buffers:o});});})};typeof Fr.realpath.native=="function"?Ci.realpath.native=T1(Fr.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003");});var R1=P((wte,A1)=>{var KU=he("path");A1.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(KU.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}};});var D1=P((Cte,dg)=>{var I1=Mr(),{checkPath:P1}=R1(),N1=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};dg.exports.makeDir=async(e,t)=>(P1(e),I1.mkdir(e,{mode:N1(t),recursive:!0}));dg.exports.makeDirSync=(e,t)=>(P1(e),I1.mkdirSync(e,{mode:N1(t),recursive:!0}));});var $n=P((xte,k1)=>{var zU=cr().fromPromise,{makeDir:GU,makeDirSync:hg}=D1(),pg=zU(GU);k1.exports={mkdirs:pg,mkdirsSync:hg,mkdirp:pg,mkdirpSync:hg,ensureDir:pg,ensureDirSync:hg};});var Yi=P((Tte,B1)=>{var YU=cr().fromPromise,O1=Mr();function QU(e){return O1.access(e).then(()=>!0).catch(()=>!1)}B1.exports={pathExists:YU(QU),pathExistsSync:O1.existsSync};});var gg=P((Ate,L1)=>{var Oa=Mr(),ZU=cr().fromPromise;async function XU(e,t,r){let n=await Oa.open(e,"r+"),i=null;try{await Oa.futimes(n,t,r);}finally{try{await Oa.close(n);}catch(s){i=s;}}if(i)throw i}function JU(e,t,r){let n=Oa.openSync(e,"r+");return Oa.futimesSync(n,t,r),Oa.closeSync(n)}L1.exports={utimesMillis:ZU(XU),utimesMillisSync:JU};});var Ms=P((Rte,U1)=>{var Ba=Mr(),lr=he("path"),F1=cr().fromPromise;function e6(e,t,r){let n=r.dereference?i=>Ba.stat(i,{bigint:!0}):i=>Ba.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function t6(e,t,r){let n,i=r.dereference?a=>Ba.statSync(a,{bigint:!0}):a=>Ba.lstatSync(a,{bigint:!0}),s=i(e);try{n=i(t);}catch(a){if(a.code==="ENOENT")return {srcStat:s,destStat:null};throw a}return {srcStat:s,destStat:n}}async function r6(e,t,r,n){let{srcStat:i,destStat:s}=await e6(e,t,n);if(s){if(tu(i,s)){let a=lr.basename(e),o=lr.basename(t);if(r==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return {srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&mg(e,t))throw new Error(bl(e,t,r));return {srcStat:i,destStat:s}}function n6(e,t,r,n){let{srcStat:i,destStat:s}=t6(e,t,n);if(s){if(tu(i,s)){let a=lr.basename(e),o=lr.basename(t);if(r==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return {srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&mg(e,t))throw new Error(bl(e,t,r));return {srcStat:i,destStat:s}}async function M1(e,t,r,n){let i=lr.resolve(lr.dirname(e)),s=lr.resolve(lr.dirname(r));if(s===i||s===lr.parse(s).root)return;let a;try{a=await Ba.stat(s,{bigint:!0});}catch(o){if(o.code==="ENOENT")return;throw o}if(tu(t,a))throw new Error(bl(e,r,n));return M1(e,t,s,n)}function q1(e,t,r,n){let i=lr.resolve(lr.dirname(e)),s=lr.resolve(lr.dirname(r));if(s===i||s===lr.parse(s).root)return;let a;try{a=Ba.statSync(s,{bigint:!0});}catch(o){if(o.code==="ENOENT")return;throw o}if(tu(t,a))throw new Error(bl(e,r,n));return q1(e,t,s,n)}function tu(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function mg(e,t){let r=lr.resolve(e).split(lr.sep).filter(i=>i),n=lr.resolve(t).split(lr.sep).filter(i=>i);return r.every((i,s)=>n[s]===i)}function bl(e,t,r){return `Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}U1.exports={checkPaths:F1(r6),checkPathsSync:n6,checkParentPaths:F1(M1),checkParentPathsSync:q1,isSrcSubdir:mg,areIdentical:tu};});var W1=P((Ite,H1)=>{var Rr=Mr(),ru=he("path"),{mkdirs:i6}=$n(),{pathExists:s6}=Yi(),{utimesMillis:a6}=gg(),nu=Ms();async function o6(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await nu.checkPaths(e,t,"copy",r);if(await nu.checkParentPaths(e,n,t,"copy"),!await j1(e,t,r))return;let a=ru.dirname(t);await s6(a)||await i6(a),await V1(i,e,t,r);}async function j1(e,t,r){return r.filter?r.filter(e,t):!0}async function V1(e,t,r,n){let s=await(n.dereference?Rr.stat:Rr.lstat)(t);if(s.isDirectory())return f6(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return u6(s,e,t,r,n);if(s.isSymbolicLink())return d6(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function u6(e,t,r,n,i){if(!t)return $1(e,r,n,i);if(i.overwrite)return await Rr.unlink(n),$1(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function $1(e,t,r,n){if(await Rr.copyFile(t,r),n.preserveTimestamps){c6(e.mode)&&await l6(r,e.mode);let i=await Rr.stat(t);await a6(r,i.atime,i.mtime);}return Rr.chmod(r,e.mode)}function c6(e){return (e&128)===0}function l6(e,t){return Rr.chmod(e,t|128)}async function f6(e,t,r,n,i){t||await Rr.mkdir(n);let s=await Rr.readdir(r);await Promise.all(s.map(async a=>{let o=ru.join(r,a),c=ru.join(n,a);if(!await j1(o,c,i))return;let{destStat:u}=await nu.checkPaths(o,c,"copy",i);return V1(u,o,c,i)})),t||await Rr.chmod(n,e.mode);}async function d6(e,t,r,n){let i=await Rr.readlink(t);if(n.dereference&&(i=ru.resolve(process.cwd(),i)),!e)return Rr.symlink(i,r);let s=null;try{s=await Rr.readlink(r);}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Rr.symlink(i,r);throw a}if(n.dereference&&(s=ru.resolve(process.cwd(),s)),nu.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(nu.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await Rr.unlink(r),Rr.symlink(i,r)}H1.exports=o6;});var Q1=P((Pte,Y1)=>{var qr=ka(),iu=he("path"),h6=$n().mkdirsSync,p6=gg().utimesMillisSync,su=Ms();function g6(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=su.checkPathsSync(e,t,"copy",r);if(su.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let s=iu.dirname(t);return qr.existsSync(s)||h6(s),K1(i,e,t,r)}function K1(e,t,r,n){let s=(n.dereference?qr.statSync:qr.lstatSync)(t);if(s.isDirectory())return E6(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return m6(s,e,t,r,n);if(s.isSymbolicLink())return x6(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function m6(e,t,r,n,i){return t?y6(e,r,n,i):z1(e,r,n,i)}function y6(e,t,r,n){if(n.overwrite)return qr.unlinkSync(r),z1(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function z1(e,t,r,n){return qr.copyFileSync(t,r),n.preserveTimestamps&&_6(e.mode,t,r),yg(r,e.mode)}function _6(e,t,r){return v6(e)&&b6(r,e),S6(t,r)}function v6(e){return (e&128)===0}function b6(e,t){return yg(e,t|128)}function yg(e,t){return qr.chmodSync(e,t)}function S6(e,t){let r=qr.statSync(e);return p6(t,r.atime,r.mtime)}function E6(e,t,r,n,i){return t?G1(r,n,i):w6(e.mode,r,n,i)}function w6(e,t,r,n){return qr.mkdirSync(r),G1(t,r,n),yg(r,e)}function G1(e,t,r){qr.readdirSync(e).forEach(n=>C6(n,e,t,r));}function C6(e,t,r,n){let i=iu.join(t,e),s=iu.join(r,e);if(n.filter&&!n.filter(i,s))return;let{destStat:a}=su.checkPathsSync(i,s,"copy",n);return K1(a,i,s,n)}function x6(e,t,r,n){let i=qr.readlinkSync(t);if(n.dereference&&(i=iu.resolve(process.cwd(),i)),e){let s;try{s=qr.readlinkSync(r);}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return qr.symlinkSync(i,r);throw a}if(n.dereference&&(s=iu.resolve(process.cwd(),s)),su.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(su.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return T6(i,r)}else return qr.symlinkSync(i,r)}function T6(e,t){return qr.unlinkSync(t),qr.symlinkSync(e,t)}Y1.exports=g6;});var Sl=P((Nte,Z1)=>{var A6=cr().fromPromise;Z1.exports={copy:A6(W1()),copySync:Q1()};});var au=P((Dte,J1)=>{var X1=ka(),R6=cr().fromCallback;function I6(e,t){X1.rm(e,{recursive:!0,force:!0},t);}function P6(e){X1.rmSync(e,{recursive:!0,force:!0});}J1.exports={remove:R6(I6),removeSync:P6};});var ox=P((kte,ax)=>{var N6=cr().fromPromise,rx=Mr(),nx=he("path"),ix=$n(),sx=au(),ex=N6(async function(t){let r;try{r=await rx.readdir(t);}catch{return ix.mkdirs(t)}return Promise.all(r.map(n=>sx.remove(nx.join(t,n))))});function tx(e){let t;try{t=rx.readdirSync(e);}catch{return ix.mkdirsSync(e)}t.forEach(r=>{r=nx.join(e,r),sx.removeSync(r);});}ax.exports={emptyDirSync:tx,emptydirSync:tx,emptyDir:ex,emptydir:ex};});var fx=P((Ote,lx)=>{var D6=cr().fromPromise,ux=he("path"),xi=Mr(),cx=$n();async function k6(e){let t;try{t=await xi.stat(e);}catch{}if(t&&t.isFile())return;let r=ux.dirname(e),n=null;try{n=await xi.stat(r);}catch(i){if(i.code==="ENOENT"){await cx.mkdirs(r),await xi.writeFile(e,"");return}else throw i}n.isDirectory()?await xi.writeFile(e,""):await xi.readdir(r);}function O6(e){let t;try{t=xi.statSync(e);}catch{}if(t&&t.isFile())return;let r=ux.dirname(e);try{xi.statSync(r).isDirectory()||xi.readdirSync(r);}catch(n){if(n&&n.code==="ENOENT")cx.mkdirsSync(r);else throw n}xi.writeFileSync(e,"");}lx.exports={createFile:D6(k6),createFileSync:O6};});var mx=P((Bte,gx)=>{var B6=cr().fromPromise,dx=he("path"),Qi=Mr(),hx=$n(),{pathExists:L6}=Yi(),{areIdentical:px}=Ms();async function F6(e,t){let r;try{r=await Qi.lstat(t);}catch{}let n;try{n=await Qi.lstat(e);}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(r&&px(n,r))return;let i=dx.dirname(t);await L6(i)||await hx.mkdirs(i),await Qi.link(e,t);}function M6(e,t){let r;try{r=Qi.lstatSync(t);}catch{}try{let s=Qi.lstatSync(e);if(r&&px(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=dx.dirname(t);return Qi.existsSync(n)||hx.mkdirsSync(n),Qi.linkSync(e,t)}gx.exports={createLink:B6(F6),createLinkSync:M6};});var _x=P((Lte,yx)=>{var Zi=he("path"),ou=Mr(),{pathExists:q6}=Yi(),U6=cr().fromPromise;async function $6(e,t){if(Zi.isAbsolute(e)){try{await ou.lstat(e);}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return {toCwd:e,toDst:e}}let r=Zi.dirname(t),n=Zi.join(r,e);if(await q6(n))return {toCwd:n,toDst:e};try{await ou.lstat(e);}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return {toCwd:e,toDst:Zi.relative(r,e)}}function j6(e,t){if(Zi.isAbsolute(e)){if(!ou.existsSync(e))throw new Error("absolute srcpath does not exist");return {toCwd:e,toDst:e}}let r=Zi.dirname(t),n=Zi.join(r,e);if(ou.existsSync(n))return {toCwd:n,toDst:e};if(!ou.existsSync(e))throw new Error("relative srcpath does not exist");return {toCwd:e,toDst:Zi.relative(r,e)}}yx.exports={symlinkPaths:U6($6),symlinkPathsSync:j6};});var Sx=P((Fte,bx)=>{var vx=Mr(),V6=cr().fromPromise;async function H6(e,t){if(t)return t;let r;try{r=await vx.lstat(e);}catch{return "file"}return r&&r.isDirectory()?"dir":"file"}function W6(e,t){if(t)return t;let r;try{r=vx.lstatSync(e);}catch{return "file"}return r&&r.isDirectory()?"dir":"file"}bx.exports={symlinkType:V6(H6),symlinkTypeSync:W6};});var xx=P((Mte,Cx)=>{var K6=cr().fromPromise,Ex=he("path"),ti=Mr(),{mkdirs:z6,mkdirsSync:G6}=$n(),{symlinkPaths:Y6,symlinkPathsSync:Q6}=_x(),{symlinkType:Z6,symlinkTypeSync:X6}=Sx(),{pathExists:J6}=Yi(),{areIdentical:wx}=Ms();async function e5(e,t,r){let n;try{n=await ti.lstat(t);}catch{}if(n&&n.isSymbolicLink()){let[o,c]=await Promise.all([ti.stat(e),ti.stat(t)]);if(wx(o,c))return}let i=await Y6(e,t);e=i.toDst;let s=await Z6(i.toCwd,r),a=Ex.dirname(t);return await J6(a)||await z6(a),ti.symlink(e,t,s)}function t5(e,t,r){let n;try{n=ti.lstatSync(t);}catch{}if(n&&n.isSymbolicLink()){let o=ti.statSync(e),c=ti.statSync(t);if(wx(o,c))return}let i=Q6(e,t);e=i.toDst,r=X6(i.toCwd,r);let s=Ex.dirname(t);return ti.existsSync(s)||G6(s),ti.symlinkSync(e,t,r)}Cx.exports={createSymlink:K6(e5),createSymlinkSync:t5};});var kx=P((qte,Dx)=>{var{createFile:Tx,createFileSync:Ax}=fx(),{createLink:Rx,createLinkSync:Ix}=mx(),{createSymlink:Px,createSymlinkSync:Nx}=xx();Dx.exports={createFile:Tx,createFileSync:Ax,ensureFile:Tx,ensureFileSync:Ax,createLink:Rx,createLinkSync:Ix,ensureLink:Rx,ensureLinkSync:Ix,createSymlink:Px,createSymlinkSync:Nx,ensureSymlink:Px,ensureSymlinkSync:Nx};});var El=P((Ute,Ox)=>{function r5(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let s=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+s}function n5(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Ox.exports={stringify:r5,stripBom:n5};});var Mx=P(($te,Fx)=>{var La;try{La=ka();}catch{La=he("fs");}var wl=cr(),{stringify:Bx,stripBom:Lx}=El();async function i5(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||La,n="throws"in t?t.throws:!0,i=await wl.fromCallback(r.readFile)(e,t);i=Lx(i);let s;try{s=JSON.parse(i,t?t.reviver:null);}catch(a){if(n)throw a.message=`${e}: ${a.message}`,a;return null}return s}var s5=wl.fromPromise(i5);function a5(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||La,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Lx(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function o5(e,t,r={}){let n=r.fs||La,i=Bx(t,r);await wl.fromCallback(n.writeFile)(e,i,r);}var u5=wl.fromPromise(o5);function c5(e,t,r={}){let n=r.fs||La,i=Bx(t,r);return n.writeFileSync(e,i,r)}var l5={readFile:s5,readFileSync:a5,writeFile:u5,writeFileSync:c5};Fx.exports=l5;});var Ux=P((jte,qx)=>{var Cl=Mx();qx.exports={readJson:Cl.readFile,readJsonSync:Cl.readFileSync,writeJson:Cl.writeFile,writeJsonSync:Cl.writeFileSync};});var xl=P((Vte,Vx)=>{var f5=cr().fromPromise,_g=Mr(),$x=he("path"),jx=$n(),d5=Yi().pathExists;async function h5(e,t,r="utf-8"){let n=$x.dirname(e);return await d5(n)||await jx.mkdirs(n),_g.writeFile(e,t,r)}function p5(e,...t){let r=$x.dirname(e);_g.existsSync(r)||jx.mkdirsSync(r),_g.writeFileSync(e,...t);}Vx.exports={outputFile:f5(h5),outputFileSync:p5};});var Wx=P((Hte,Hx)=>{var{stringify:g5}=El(),{outputFile:m5}=xl();async function y5(e,t,r={}){let n=g5(t,r);await m5(e,n,r);}Hx.exports=y5;});var zx=P((Wte,Kx)=>{var{stringify:_5}=El(),{outputFileSync:v5}=xl();function b5(e,t,r){let n=_5(t,r);v5(e,n,r);}Kx.exports=b5;});var Yx=P((Kte,Gx)=>{var S5=cr().fromPromise,Ur=Ux();Ur.outputJson=S5(Wx());Ur.outputJsonSync=zx();Ur.outputJSON=Ur.outputJson;Ur.outputJSONSync=Ur.outputJsonSync;Ur.writeJSON=Ur.writeJson;Ur.writeJSONSync=Ur.writeJsonSync;Ur.readJSON=Ur.readJson;Ur.readJSONSync=Ur.readJsonSync;Gx.exports=Ur;});var eT=P((zte,Jx)=>{var E5=Mr(),Qx=he("path"),{copy:w5}=Sl(),{remove:Xx}=au(),{mkdirp:C5}=$n(),{pathExists:x5}=Yi(),Zx=Ms();async function T5(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await Zx.checkPaths(e,t,"move",r);await Zx.checkParentPaths(e,i,t,"move");let a=Qx.dirname(t);return Qx.parse(a).root!==a&&await C5(a),A5(e,t,n,s)}async function A5(e,t,r,n){if(!n){if(r)await Xx(t);else if(await x5(t))throw new Error("dest already exists.")}try{await E5.rename(e,t);}catch(i){if(i.code!=="EXDEV")throw i;await R5(e,t,r);}}async function R5(e,t,r){return await w5(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Xx(e)}Jx.exports=T5;});var sT=P((Gte,iT)=>{var rT=ka(),bg=he("path"),I5=Sl().copySync,nT=au().removeSync,P5=$n().mkdirpSync,tT=Ms();function N5(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=tT.checkPathsSync(e,t,"move",r);return tT.checkParentPathsSync(e,i,t,"move"),D5(t)||P5(bg.dirname(t)),k5(e,t,n,s)}function D5(e){let t=bg.dirname(e);return bg.parse(t).root===t}function k5(e,t,r,n){if(n)return vg(e,t,r);if(r)return nT(t),vg(e,t,r);if(rT.existsSync(t))throw new Error("dest already exists.");return vg(e,t,r)}function vg(e,t,r){try{rT.renameSync(e,t);}catch(n){if(n.code!=="EXDEV")throw n;return O5(e,t,r)}}function O5(e,t,r){return I5(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),nT(e)}iT.exports=N5;});var oT=P((Yte,aT)=>{var B5=cr().fromPromise;aT.exports={move:B5(eT()),moveSync:sT()};});var Tl=P((Qte,uT)=>{uT.exports={...Mr(),...Sl(),...ox(),...kx(),...Yx(),...$n(),...oT(),...xl(),...Yi(),...au()};});var uu=P((Zte,hT)=>{var L5=he("path"),ri="\\\\/",cT=`[^${ri}]`,Ti="\\.",F5="\\+",M5="\\?",Al="\\/",q5="(?=.)",lT="[^/]",Sg=`(?:${Al}|$)`,fT=`(?:^|${Al})`,Eg=`${Ti}{1,2}${Sg}`,U5=`(?!${Ti})`,$5=`(?!${fT}${Eg})`,j5=`(?!${Ti}{0,1}${Sg})`,V5=`(?!${Eg})`,H5=`[^.${Al}]`,W5=`${lT}*?`,dT={DOT_LITERAL:Ti,PLUS_LITERAL:F5,QMARK_LITERAL:M5,SLASH_LITERAL:Al,ONE_CHAR:q5,QMARK:lT,END_ANCHOR:Sg,DOTS_SLASH:Eg,NO_DOT:U5,NO_DOTS:$5,NO_DOT_SLASH:j5,NO_DOTS_SLASH:V5,QMARK_NO_DOT:H5,STAR:W5,START_ANCHOR:fT},K5={...dT,SLASH_LITERAL:`[${ri}]`,QMARK:cT,STAR:`${cT}*?`,DOTS_SLASH:`${Ti}{1,2}(?:[${ri}]|$)`,NO_DOT:`(?!${Ti})`,NO_DOTS:`(?!(?:^|[${ri}])${Ti}{1,2}(?:[${ri}]|$))`,NO_DOT_SLASH:`(?!${Ti}{0,1}(?:[${ri}]|$))`,NO_DOTS_SLASH:`(?!${Ti}{1,2}(?:[${ri}]|$))`,QMARK_NO_DOT:`[^.${ri}]`,START_ANCHOR:`(?:^|[${ri}])`,END_ANCHOR:`(?:[${ri}]|$)`},z5={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};hT.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:z5,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:L5.sep,extglobChars(e){return {"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?K5:dT}};});var Rl=P(zr=>{var G5=he("path"),Y5=process.platform==="win32",{REGEX_BACKSLASH:Q5,REGEX_REMOVE_BACKSLASH:Z5,REGEX_SPECIAL_CHARS:X5,REGEX_SPECIAL_CHARS_GLOBAL:J5}=uu();zr.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);zr.hasRegexChars=e=>X5.test(e);zr.isRegexChar=e=>e.length===1&&zr.hasRegexChars(e);zr.escapeRegex=e=>e.replace(J5,"\\$1");zr.toPosixSlashes=e=>e.replace(Q5,"/");zr.removeBackslashes=e=>e.replace(Z5,t=>t==="\\"?"":t);zr.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};zr.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:Y5===!0||G5.sep==="\\";zr.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?zr.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};zr.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};zr.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",s=`${n}(?:${e})${i}`;return t.negated===!0&&(s=`(?:^(?!${s}).*$)`),s};});var ST=P((Jte,bT)=>{var pT=Rl(),{CHAR_ASTERISK:wg,CHAR_AT:e$,CHAR_BACKWARD_SLASH:cu,CHAR_COMMA:t$,CHAR_DOT:Cg,CHAR_EXCLAMATION_MARK:xg,CHAR_FORWARD_SLASH:vT,CHAR_LEFT_CURLY_BRACE:Tg,CHAR_LEFT_PARENTHESES:Ag,CHAR_LEFT_SQUARE_BRACKET:r$,CHAR_PLUS:n$,CHAR_QUESTION_MARK:gT,CHAR_RIGHT_CURLY_BRACE:i$,CHAR_RIGHT_PARENTHESES:mT,CHAR_RIGHT_SQUARE_BRACKET:s$}=uu(),yT=e=>e===vT||e===cu,_T=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1);},a$=(e,t)=>{let r=t||{},n=e.length-1,i=r.parts===!0||r.scanToEnd===!0,s=[],a=[],o=[],c=e,l=-1,u=0,f=0,h=!1,p=!1,m=!1,v=!1,E=!1,w=!1,y=!1,b=!1,N=!1,B=!1,V=0,X,z,G={value:"",depth:0,isGlob:!1},ee=()=>l>=n,U=()=>c.charCodeAt(l+1),ie=()=>(X=z,c.charCodeAt(++l));for(;l<n;){z=ie();let se;if(z===cu){y=G.backslashes=!0,z=ie(),z===Tg&&(w=!0);continue}if(w===!0||z===Tg){for(V++;ee()!==!0&&(z=ie());){if(z===cu){y=G.backslashes=!0,ie();continue}if(z===Tg){V++;continue}if(w!==!0&&z===Cg&&(z=ie())===Cg){if(h=G.isBrace=!0,m=G.isGlob=!0,B=!0,i===!0)continue;break}if(w!==!0&&z===t$){if(h=G.isBrace=!0,m=G.isGlob=!0,B=!0,i===!0)continue;break}if(z===i$&&(V--,V===0)){w=!1,h=G.isBrace=!0,B=!0;break}}if(i===!0)continue;break}if(z===vT){if(s.push(l),a.push(G),G={value:"",depth:0,isGlob:!1},B===!0)continue;if(X===Cg&&l===u+1){u+=2;continue}f=l+1;continue}if(r.noext!==!0&&(z===n$||z===e$||z===wg||z===gT||z===xg)===!0&&U()===Ag){if(m=G.isGlob=!0,v=G.isExtglob=!0,B=!0,z===xg&&l===u&&(N=!0),i===!0){for(;ee()!==!0&&(z=ie());){if(z===cu){y=G.backslashes=!0,z=ie();continue}if(z===mT){m=G.isGlob=!0,B=!0;break}}continue}break}if(z===wg){if(X===wg&&(E=G.isGlobstar=!0),m=G.isGlob=!0,B=!0,i===!0)continue;break}if(z===gT){if(m=G.isGlob=!0,B=!0,i===!0)continue;break}if(z===r$){for(;ee()!==!0&&(se=ie());){if(se===cu){y=G.backslashes=!0,ie();continue}if(se===s$){p=G.isBracket=!0,m=G.isGlob=!0,B=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&z===xg&&l===u){b=G.negated=!0,u++;continue}if(r.noparen!==!0&&z===Ag){if(m=G.isGlob=!0,i===!0){for(;ee()!==!0&&(z=ie());){if(z===Ag){y=G.backslashes=!0,z=ie();continue}if(z===mT){B=!0;break}}continue}break}if(m===!0){if(B=!0,i===!0)continue;break}}r.noext===!0&&(v=!1,m=!1);let me=c,Pe="",W="";u>0&&(Pe=c.slice(0,u),c=c.slice(u),f-=u),me&&m===!0&&f>0?(me=c.slice(0,f),W=c.slice(f)):m===!0?(me="",W=c):me=c,me&&me!==""&&me!=="/"&&me!==c&&yT(me.charCodeAt(me.length-1))&&(me=me.slice(0,-1)),r.unescape===!0&&(W&&(W=pT.removeBackslashes(W)),me&&y===!0&&(me=pT.removeBackslashes(me)));let K={prefix:Pe,input:e,start:u,base:me,glob:W,isBrace:h,isBracket:p,isGlob:m,isExtglob:v,isGlobstar:E,negated:b,negatedExtglob:N};if(r.tokens===!0&&(K.maxDepth=0,yT(z)||a.push(G),K.tokens=a),r.parts===!0||r.tokens===!0){let se;for(let Ae=0;Ae<s.length;Ae++){let Fe=se?se+1:u,Ke=s[Ae],Ve=e.slice(Fe,Ke);r.tokens&&(Ae===0&&u!==0?(a[Ae].isPrefix=!0,a[Ae].value=Pe):a[Ae].value=Ve,_T(a[Ae]),K.maxDepth+=a[Ae].depth),(Ae!==0||Ve!=="")&&o.push(Ve),se=Ke;}if(se&&se+1<e.length){let Ae=e.slice(se+1);o.push(Ae),r.tokens&&(a[a.length-1].value=Ae,_T(a[a.length-1]),K.maxDepth+=a[a.length-1].depth);}K.slashes=s,K.parts=o;}return K};bT.exports=a$;});var CT=P((ere,wT)=>{var Il=uu(),fn=Rl(),{MAX_LENGTH:Pl,POSIX_REGEX_SOURCE:o$,REGEX_NON_SPECIAL_CHARS:u$,REGEX_SPECIAL_CHARS_BACKREF:c$,REPLACEMENTS:ET}=Il,l$=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;return r},Fa=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Rg=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=ET[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Pl,r.maxLength):Pl,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let s={type:"bos",value:"",output:r.prepend||""},a=[s],o=r.capture?"":"?:",c=fn.isWindows(t),l=Il.globChars(c),u=Il.extglobChars(l),{DOT_LITERAL:f,PLUS_LITERAL:h,SLASH_LITERAL:p,ONE_CHAR:m,DOTS_SLASH:v,NO_DOT:E,NO_DOT_SLASH:w,NO_DOTS_SLASH:y,QMARK:b,QMARK_NO_DOT:N,STAR:B,START_ANCHOR:V}=l,X=ye=>`(${o}(?:(?!${V}${ye.dot?v:f}).)*?)`,z=r.dot?"":E,G=r.dot?b:N,ee=r.bash===!0?X(r):B;r.capture&&(ee=`(${ee})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let U={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=fn.removePrefix(e,U),i=e.length;let ie=[],me=[],Pe=[],W=s,K,se=()=>U.index===i-1,Ae=U.peek=(ye=1)=>e[U.index+ye],Fe=U.advance=()=>e[++U.index]||"",Ke=()=>e.slice(U.index+1),Ve=(ye="",$e=0)=>{U.consumed+=ye,U.index+=$e;},ot=ye=>{U.output+=ye.output!=null?ye.output:ye.value,Ve(ye.value);},Dt=()=>{let ye=1;for(;Ae()==="!"&&(Ae(2)!=="("||Ae(3)==="?");)Fe(),U.start++,ye++;return ye%2===0?!1:(U.negated=!0,U.start++,!0)},bt=ye=>{U[ye]++,Pe.push(ye);},ft=ye=>{U[ye]--,Pe.pop();},Oe=ye=>{if(W.type==="globstar"){let $e=U.braces>0&&(ye.type==="comma"||ye.type==="brace"),le=ye.extglob===!0||ie.length&&(ye.type==="pipe"||ye.type==="paren");ye.type!=="slash"&&ye.type!=="paren"&&!$e&&!le&&(U.output=U.output.slice(0,-W.output.length),W.type="star",W.value="*",W.output=ee,U.output+=W.output);}if(ie.length&&ye.type!=="paren"&&(ie[ie.length-1].inner+=ye.value),(ye.value||ye.output)&&ot(ye),W&&W.type==="text"&&ye.type==="text"){W.value+=ye.value,W.output=(W.output||"")+ye.value;return}ye.prev=W,a.push(ye),W=ye;},Rt=(ye,$e)=>{let le={...u[$e],conditions:1,inner:""};le.prev=W,le.parens=U.parens,le.output=U.output;let Ie=(r.capture?"(":"")+le.open;bt("parens"),Oe({type:ye,value:$e,output:U.output?"":m}),Oe({type:"paren",extglob:!0,value:Fe(),output:Ie}),ie.push(le);},qt=ye=>{let $e=ye.close+(r.capture?")":""),le;if(ye.type==="negate"){let Ie=ee;if(ye.inner&&ye.inner.length>1&&ye.inner.includes("/")&&(Ie=X(r)),(Ie!==ee||se()||/^\)+$/.test(Ke()))&&($e=ye.close=`)$))${Ie}`),ye.inner.includes("*")&&(le=Ke())&&/^\.[^\\/.]+$/.test(le)){let He=Rg(le,{...t,fastpaths:!1}).output;$e=ye.close=`)${He})${Ie})`;}ye.prev.type==="bos"&&(U.negatedExtglob=!0);}Oe({type:"paren",extglob:!0,value:K,output:$e}),ft("parens");};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let ye=!1,$e=e.replace(c$,(le,Ie,He,et,ze,_n)=>et==="\\"?(ye=!0,le):et==="?"?Ie?Ie+et+(ze?b.repeat(ze.length):""):_n===0?G+(ze?b.repeat(ze.length):""):b.repeat(He.length):et==="."?f.repeat(He.length):et==="*"?Ie?Ie+et+(ze?ee:""):ee:Ie?le:`\\${le}`);return ye===!0&&(r.unescape===!0?$e=$e.replace(/\\/g,""):$e=$e.replace(/\\+/g,le=>le.length%2===0?"\\\\":le?"\\":"")),$e===e&&r.contains===!0?(U.output=e,U):(U.output=fn.wrapOutput($e,U,t),U)}for(;!se();){if(K=Fe(),K==="\0")continue;if(K==="\\"){let le=Ae();if(le==="/"&&r.bash!==!0||le==="."||le===";")continue;if(!le){K+="\\",Oe({type:"text",value:K});continue}let Ie=/^\\+/.exec(Ke()),He=0;if(Ie&&Ie[0].length>2&&(He=Ie[0].length,U.index+=He,He%2!==0&&(K+="\\")),r.unescape===!0?K=Fe():K+=Fe(),U.brackets===0){Oe({type:"text",value:K});continue}}if(U.brackets>0&&(K!=="]"||W.value==="["||W.value==="[^")){if(r.posix!==!1&&K===":"){let le=W.value.slice(1);if(le.includes("[")&&(W.posix=!0,le.includes(":"))){let Ie=W.value.lastIndexOf("["),He=W.value.slice(0,Ie),et=W.value.slice(Ie+2),ze=o$[et];if(ze){W.value=He+ze,U.backtrack=!0,Fe(),!s.output&&a.indexOf(W)===1&&(s.output=m);continue}}}(K==="["&&Ae()!==":"||K==="-"&&Ae()==="]")&&(K=`\\${K}`),K==="]"&&(W.value==="["||W.value==="[^")&&(K=`\\${K}`),r.posix===!0&&K==="!"&&W.value==="["&&(K="^"),W.value+=K,ot({value:K});continue}if(U.quotes===1&&K!=='"'){K=fn.escapeRegex(K),W.value+=K,ot({value:K});continue}if(K==='"'){U.quotes=U.quotes===1?0:1,r.keepQuotes===!0&&Oe({type:"text",value:K});continue}if(K==="("){bt("parens"),Oe({type:"paren",value:K});continue}if(K===")"){if(U.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Fa("opening","("));let le=ie[ie.length-1];if(le&&U.parens===le.parens+1){qt(ie.pop());continue}Oe({type:"paren",value:K,output:U.parens?")":"\\)"}),ft("parens");continue}if(K==="["){if(r.nobracket===!0||!Ke().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Fa("closing","]"));K=`\\${K}`;}else bt("brackets");Oe({type:"bracket",value:K});continue}if(K==="]"){if(r.nobracket===!0||W&&W.type==="bracket"&&W.value.length===1){Oe({type:"text",value:K,output:`\\${K}`});continue}if(U.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Fa("opening","["));Oe({type:"text",value:K,output:`\\${K}`});continue}ft("brackets");let le=W.value.slice(1);if(W.posix!==!0&&le[0]==="^"&&!le.includes("/")&&(K=`/${K}`),W.value+=K,ot({value:K}),r.literalBrackets===!1||fn.hasRegexChars(le))continue;let Ie=fn.escapeRegex(W.value);if(U.output=U.output.slice(0,-W.value.length),r.literalBrackets===!0){U.output+=Ie,W.value=Ie;continue}W.value=`(${o}${Ie}|${W.value})`,U.output+=W.value;continue}if(K==="{"&&r.nobrace!==!0){bt("braces");let le={type:"brace",value:K,output:"(",outputIndex:U.output.length,tokensIndex:U.tokens.length};me.push(le),Oe(le);continue}if(K==="}"){let le=me[me.length-1];if(r.nobrace===!0||!le){Oe({type:"text",value:K,output:K});continue}let Ie=")";if(le.dots===!0){let He=a.slice(),et=[];for(let ze=He.length-1;ze>=0&&(a.pop(),He[ze].type!=="brace");ze--)He[ze].type!=="dots"&&et.unshift(He[ze].value);Ie=l$(et,r),U.backtrack=!0;}if(le.comma!==!0&&le.dots!==!0){let He=U.output.slice(0,le.outputIndex),et=U.tokens.slice(le.tokensIndex);le.value=le.output="\\{",K=Ie="\\}",U.output=He;for(let ze of et)U.output+=ze.output||ze.value;}Oe({type:"brace",value:K,output:Ie}),ft("braces"),me.pop();continue}if(K==="|"){ie.length>0&&ie[ie.length-1].conditions++,Oe({type:"text",value:K});continue}if(K===","){let le=K,Ie=me[me.length-1];Ie&&Pe[Pe.length-1]==="braces"&&(Ie.comma=!0,le="|"),Oe({type:"comma",value:K,output:le});continue}if(K==="/"){if(W.type==="dot"&&U.index===U.start+1){U.start=U.index+1,U.consumed="",U.output="",a.pop(),W=s;continue}Oe({type:"slash",value:K,output:p});continue}if(K==="."){if(U.braces>0&&W.type==="dot"){W.value==="."&&(W.output=f);let le=me[me.length-1];W.type="dots",W.output+=K,W.value+=K,le.dots=!0;continue}if(U.braces+U.parens===0&&W.type!=="bos"&&W.type!=="slash"){Oe({type:"text",value:K,output:f});continue}Oe({type:"dot",value:K,output:f});continue}if(K==="?"){if(!(W&&W.value==="(")&&r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){Rt("qmark",K);continue}if(W&&W.type==="paren"){let Ie=Ae(),He=K;if(Ie==="<"&&!fn.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(W.value==="("&&!/[!=<:]/.test(Ie)||Ie==="<"&&!/<([!=]|\w+>)/.test(Ke()))&&(He=`\\${K}`),Oe({type:"text",value:K,output:He});continue}if(r.dot!==!0&&(W.type==="slash"||W.type==="bos")){Oe({type:"qmark",value:K,output:N});continue}Oe({type:"qmark",value:K,output:b});continue}if(K==="!"){if(r.noextglob!==!0&&Ae()==="("&&(Ae(2)!=="?"||!/[!=<:]/.test(Ae(3)))){Rt("negate",K);continue}if(r.nonegate!==!0&&U.index===0){Dt();continue}}if(K==="+"){if(r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){Rt("plus",K);continue}if(W&&W.value==="("||r.regex===!1){Oe({type:"plus",value:K,output:h});continue}if(W&&(W.type==="bracket"||W.type==="paren"||W.type==="brace")||U.parens>0){Oe({type:"plus",value:K});continue}Oe({type:"plus",value:h});continue}if(K==="@"){if(r.noextglob!==!0&&Ae()==="("&&Ae(2)!=="?"){Oe({type:"at",extglob:!0,value:K,output:""});continue}Oe({type:"text",value:K});continue}if(K!=="*"){(K==="$"||K==="^")&&(K=`\\${K}`);let le=u$.exec(Ke());le&&(K+=le[0],U.index+=le[0].length),Oe({type:"text",value:K});continue}if(W&&(W.type==="globstar"||W.star===!0)){W.type="star",W.star=!0,W.value+=K,W.output=ee,U.backtrack=!0,U.globstar=!0,Ve(K);continue}let ye=Ke();if(r.noextglob!==!0&&/^\([^?]/.test(ye)){Rt("star",K);continue}if(W.type==="star"){if(r.noglobstar===!0){Ve(K);continue}let le=W.prev,Ie=le.prev,He=le.type==="slash"||le.type==="bos",et=Ie&&(Ie.type==="star"||Ie.type==="globstar");if(r.bash===!0&&(!He||ye[0]&&ye[0]!=="/")){Oe({type:"star",value:K,output:""});continue}let ze=U.braces>0&&(le.type==="comma"||le.type==="brace"),_n=ie.length&&(le.type==="pipe"||le.type==="paren");if(!He&&le.type!=="paren"&&!ze&&!_n){Oe({type:"star",value:K,output:""});continue}for(;ye.slice(0,3)==="/**";){let kr=e[U.index+4];if(kr&&kr!=="/")break;ye=ye.slice(3),Ve("/**",3);}if(le.type==="bos"&&se()){W.type="globstar",W.value+=K,W.output=X(r),U.output=W.output,U.globstar=!0,Ve(K);continue}if(le.type==="slash"&&le.prev.type!=="bos"&&!et&&se()){U.output=U.output.slice(0,-(le.output+W.output).length),le.output=`(?:${le.output}`,W.type="globstar",W.output=X(r)+(r.strictSlashes?")":"|$)"),W.value+=K,U.globstar=!0,U.output+=le.output+W.output,Ve(K);continue}if(le.type==="slash"&&le.prev.type!=="bos"&&ye[0]==="/"){let kr=ye[1]!==void 0?"|$":"";U.output=U.output.slice(0,-(le.output+W.output).length),le.output=`(?:${le.output}`,W.type="globstar",W.output=`${X(r)}${p}|${p}${kr})`,W.value+=K,U.output+=le.output+W.output,U.globstar=!0,Ve(K+Fe()),Oe({type:"slash",value:"/",output:""});continue}if(le.type==="bos"&&ye[0]==="/"){W.type="globstar",W.value+=K,W.output=`(?:^|${p}|${X(r)}${p})`,U.output=W.output,U.globstar=!0,Ve(K+Fe()),Oe({type:"slash",value:"/",output:""});continue}U.output=U.output.slice(0,-W.output.length),W.type="globstar",W.output=X(r),W.value+=K,U.output+=W.output,U.globstar=!0,Ve(K);continue}let $e={type:"star",value:K,output:ee};if(r.bash===!0){$e.output=".*?",(W.type==="bos"||W.type==="slash")&&($e.output=z+$e.output),Oe($e);continue}if(W&&(W.type==="bracket"||W.type==="paren")&&r.regex===!0){$e.output=K,Oe($e);continue}(U.index===U.start||W.type==="slash"||W.type==="dot")&&(W.type==="dot"?(U.output+=w,W.output+=w):r.dot===!0?(U.output+=y,W.output+=y):(U.output+=z,W.output+=z),Ae()!=="*"&&(U.output+=m,W.output+=m)),Oe($e);}for(;U.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Fa("closing","]"));U.output=fn.escapeLast(U.output,"["),ft("brackets");}for(;U.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Fa("closing",")"));U.output=fn.escapeLast(U.output,"("),ft("parens");}for(;U.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Fa("closing","}"));U.output=fn.escapeLast(U.output,"{"),ft("braces");}if(r.strictSlashes!==!0&&(W.type==="star"||W.type==="bracket")&&Oe({type:"maybe_slash",value:"",output:`${p}?`}),U.backtrack===!0){U.output="";for(let ye of U.tokens)U.output+=ye.output!=null?ye.output:ye.value,ye.suffix&&(U.output+=ye.suffix);}return U};Rg.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Pl,r.maxLength):Pl,i=e.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);e=ET[e]||e;let s=fn.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:c,DOTS_SLASH:l,NO_DOT:u,NO_DOTS:f,NO_DOTS_SLASH:h,STAR:p,START_ANCHOR:m}=Il.globChars(s),v=r.dot?f:u,E=r.dot?h:u,w=r.capture?"":"?:",y={negated:!1,prefix:""},b=r.bash===!0?".*?":p;r.capture&&(b=`(${b})`);let N=z=>z.noglobstar===!0?b:`(${w}(?:(?!${m}${z.dot?l:a}).)*?)`,B=z=>{switch(z){case"*":return `${v}${c}${b}`;case".*":return `${a}${c}${b}`;case"*.*":return `${v}${b}${a}${c}${b}`;case"*/*":return `${v}${b}${o}${c}${E}${b}`;case"**":return v+N(r);case"**/*":return `(?:${v}${N(r)}${o})?${E}${c}${b}`;case"**/*.*":return `(?:${v}${N(r)}${o})?${E}${b}${a}${c}${b}`;case"**/.*":return `(?:${v}${N(r)}${o})?${a}${c}${b}`;default:{let G=/^(.*?)\.(\w+)$/.exec(z);if(!G)return;let ee=B(G[1]);return ee?ee+a+G[2]:void 0}}},V=fn.removePrefix(e,y),X=B(V);return X&&r.strictSlashes!==!0&&(X+=`${o}?`),X};wT.exports=Rg;});var TT=P((tre,xT)=>{var f$=he("path"),d$=ST(),Ig=CT(),Pg=Rl(),h$=uu(),p$=e=>e&&typeof e=="object"&&!Array.isArray(e),tr=(e,t,r=!1)=>{if(Array.isArray(e)){let u=e.map(h=>tr(h,t,r));return h=>{for(let p of u){let m=p(h);if(m)return m}return !1}}let n=p$(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=t||{},s=Pg.isWindows(t),a=n?tr.compileRe(e,t):tr.makeRe(e,t,!1,!0),o=a.state;delete a.state;let c=()=>!1;if(i.ignore){let u={...t,ignore:null,onMatch:null,onResult:null};c=tr(i.ignore,u,r);}let l=(u,f=!1)=>{let{isMatch:h,match:p,output:m}=tr.test(u,a,t,{glob:e,posix:s}),v={glob:e,state:o,regex:a,posix:s,input:u,output:m,match:p,isMatch:h};return typeof i.onResult=="function"&&i.onResult(v),h===!1?(v.isMatch=!1,f?v:!1):c(u)?(typeof i.onIgnore=="function"&&i.onIgnore(v),v.isMatch=!1,f?v:!1):(typeof i.onMatch=="function"&&i.onMatch(v),f?v:!0)};return r&&(l.state=o),l};tr.test=(e,t,r,{glob:n,posix:i}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return {isMatch:!1,output:""};let s=r||{},a=s.format||(i?Pg.toPosixSlashes:null),o=e===n,c=o&&a?a(e):e;return o===!1&&(c=a?a(e):e,o=c===n),(o===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?o=tr.matchBase(e,t,r,i):o=t.exec(c)),{isMatch:!!o,match:o,output:c}};tr.matchBase=(e,t,r,n=Pg.isWindows(r))=>(t instanceof RegExp?t:tr.makeRe(t,r)).test(f$.basename(e));tr.isMatch=(e,t,r)=>tr(t,r)(e);tr.parse=(e,t)=>Array.isArray(e)?e.map(r=>tr.parse(r,t)):Ig(e,{...t,fastpaths:!1});tr.scan=(e,t)=>d$(e,t);tr.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let i=t||{},s=i.contains?"":"^",a=i.contains?"":"$",o=`${s}(?:${e.output})${a}`;e&&e.negated===!0&&(o=`^(?!${o}).*$`);let c=tr.toRegex(o,t);return n===!0&&(c.state=e),c};tr.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(i.output=Ig.fastpaths(e,t)),i.output||(i=Ig(e,t)),tr.compileRe(i,t,r,n)};tr.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return /$^/}};tr.constants=h$;xT.exports=tr;});var Ng=P((rre,AT)=>{AT.exports=TT();});var BT=P((nre,OT)=>{var fu=he("fs"),{Readable:g$}=he("stream"),lu=he("path"),{promisify:Ol}=he("util"),Dg=Ng(),m$=Ol(fu.readdir),y$=Ol(fu.stat),RT=Ol(fu.lstat),_$=Ol(fu.realpath),v$="!",DT="READDIRP_RECURSIVE_ERROR",b$=new Set(["ENOENT","EPERM","EACCES","ELOOP",DT]),kg="files",kT="directories",Dl="files_directories",Nl="all",IT=[kg,kT,Dl,Nl],S$=e=>b$.has(e.code),[PT,E$]=process.versions.node.split(".").slice(0,2).map(e=>Number.parseInt(e,10)),w$=process.platform==="win32"&&(PT>10||PT===10&&E$>=5),NT=e=>{if(e!==void 0){if(typeof e=="function")return e;if(typeof e=="string"){let t=Dg(e.trim());return r=>t(r.basename)}if(Array.isArray(e)){let t=[],r=[];for(let n of e){let i=n.trim();i.charAt(0)===v$?r.push(Dg(i.slice(1))):t.push(Dg(i));}return r.length>0?t.length>0?n=>t.some(i=>i(n.basename))&&!r.some(i=>i(n.basename)):n=>!r.some(i=>i(n.basename)):n=>t.some(i=>i(n.basename))}}},kl=class e extends g${static get defaultOptions(){return {root:".",fileFilter:t=>!0,directoryFilter:t=>!0,type:kg,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(t={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:t.highWaterMark||4096});let r={...e.defaultOptions,...t},{root:n,type:i}=r;this._fileFilter=NT(r.fileFilter),this._directoryFilter=NT(r.directoryFilter);let s=r.lstat?RT:y$;w$?this._stat=a=>s(a,{bigint:!0}):this._stat=s,this._maxDepth=r.depth,this._wantsDir=[kT,Dl,Nl].includes(i),this._wantsFile=[kg,Dl,Nl].includes(i),this._wantsEverything=i===Nl,this._root=lu.resolve(n),this._isDirent="Dirent"in fu&&!r.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0;}async _read(t){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&t>0;){let{path:r,depth:n,files:i=[]}=this.parent||{};if(i.length>0){let s=i.splice(0,t).map(a=>this._formatEntry(a,r));for(let a of await Promise.all(s)){if(this.destroyed)return;let o=await this._getEntryType(a);o==="directory"&&this._directoryFilter(a)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(a.fullPath,n+1)),this._wantsDir&&(this.push(a),t--)):(o==="file"||this._includeAsFile(a))&&this._fileFilter(a)&&this._wantsFile&&(this.push(a),t--);}}else {let s=this.parents.pop();if(!s){this.push(null);break}if(this.parent=await s,this.destroyed)return}}}catch(r){this.destroy(r);}finally{this.reading=!1;}}}async _exploreDir(t,r){let n;try{n=await m$(t,this._rdOptions);}catch(i){this._onError(i);}return {files:n,depth:r,path:t}}async _formatEntry(t,r){let n;try{let i=this._isDirent?t.name:t,s=lu.resolve(lu.join(r,i));n={path:lu.relative(this._root,s),fullPath:s,basename:i},n[this._statsProp]=this._isDirent?t:await this._stat(s);}catch(i){this._onError(i);}return n}_onError(t){S$(t)&&!this.destroyed?this.emit("warn",t):this.destroy(t);}async _getEntryType(t){let r=t&&t[this._statsProp];if(r){if(r.isFile())return "file";if(r.isDirectory())return "directory";if(r&&r.isSymbolicLink()){let n=t.fullPath;try{let i=await _$(n),s=await RT(i);if(s.isFile())return "file";if(s.isDirectory()){let a=i.length;if(n.startsWith(i)&&n.substr(a,1)===lu.sep){let o=new Error(`Circular symlink detected: "${n}" points to "${i}"`);return o.code=DT,this._onError(o)}return "directory"}}catch(i){this._onError(i);}}}}_includeAsFile(t){let r=t&&t[this._statsProp];return r&&this._wantsEverything&&!r.isDirectory()}},Ma=(e,t={})=>{let r=t.entryType||t.type;if(r==="both"&&(r=Dl),r&&(t.type=r),e){if(typeof e!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(r&&!IT.includes(r))throw new Error(`readdirp: Invalid type passed. Use one of ${IT.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return t.root=e,new kl(t)},C$=(e,t={})=>new Promise((r,n)=>{let i=[];Ma(e,t).on("data",s=>i.push(s)).on("end",()=>r(i)).on("error",s=>n(s));});Ma.promise=C$;Ma.ReaddirpStream=kl;Ma.default=Ma;OT.exports=Ma;});var Og=P((ire,LT)=>{LT.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return "/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var i=e[2];(i==="?"||i===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//");}var s=e.split(/[/\\]+/);return t!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")};});var jT=P((UT,$T)=>{Object.defineProperty(UT,"__esModule",{value:!0});var qT=Ng(),x$=Og(),FT="!",T$={returnIndex:!1},A$=e=>Array.isArray(e)?e:[e],R$=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=qT(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},MT=(e,t,r,n)=>{let i=Array.isArray(r),s=i?r[0]:r;if(!i&&typeof s!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(s));let a=x$(s,!1);for(let c=0;c<t.length;c++){let l=t[c];if(l(a))return n?-1:!1}let o=i&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let l=e[c];if(i?l(...o):l(a))return n?c:!0}return n?-1:!1},Bg=(e,t,r=T$)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,i=n.returnIndex||!1,s=A$(e),a=s.filter(c=>typeof c=="string"&&c.charAt(0)===FT).map(c=>c.slice(1)).map(c=>qT(c,n)),o=s.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==FT).map(c=>R$(c,n));return t==null?(c,l=!1)=>MT(o,a,c,typeof l=="boolean"?l:!1):MT(o,a,t,i)};Bg.default=Bg;$T.exports=Bg;});var HT=P((sre,VT)=>{VT.exports=function(t){if(typeof t!="string"||t==="")return !1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return !0;t=t.slice(r.index+r[0].length);}return !1};});var Lg=P((are,KT)=>{var I$=HT(),WT={"{":"}","(":")","[":"]"},P$=function(e){if(e[0]==="!")return !0;for(var t=0,r=-2,n=-2,i=-2,s=-2,a=-2;t<e.length;){if(e[t]==="*"||e[t+1]==="?"&&/[\].+)]/.test(e[t])||n!==-1&&e[t]==="["&&e[t+1]!=="]"&&(n<t&&(n=e.indexOf("]",t)),n>t&&(a===-1||a>n||(a=e.indexOf("\\",t),a===-1||a>n)))||i!==-1&&e[t]==="{"&&e[t+1]!=="}"&&(i=e.indexOf("}",t),i>t&&(a=e.indexOf("\\",t),a===-1||a>i))||s!==-1&&e[t]==="("&&e[t+1]==="?"&&/[:!=]/.test(e[t+2])&&e[t+3]!==")"&&(s=e.indexOf(")",t),s>t&&(a=e.indexOf("\\",t),a===-1||a>s))||r!==-1&&e[t]==="("&&e[t+1]!=="|"&&(r<t&&(r=e.indexOf("|",t)),r!==-1&&e[r+1]!==")"&&(s=e.indexOf(")",r),s>r&&(a=e.indexOf("\\",r),a===-1||a>s))))return !0;if(e[t]==="\\"){var o=e[t+1];t+=2;var c=WT[o];if(c){var l=e.indexOf(c,t);l!==-1&&(t=l+1);}if(e[t]==="!")return !0}else t++;}return !1},N$=function(e){if(e[0]==="!")return !0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return !0;if(e[t]==="\\"){var r=e[t+1];t+=2;var n=WT[r];if(n){var i=e.indexOf(n,t);i!==-1&&(t=i+1);}if(e[t]==="!")return !0}else t++;}return !1};KT.exports=function(t,r){if(typeof t!="string"||t==="")return !1;if(I$(t))return !0;var n=P$;return r&&r.strict===!1&&(n=N$),n(t)};});var GT=P((ore,zT)=>{var D$=Lg(),k$=he("path").posix.dirname,O$=he("os").platform()==="win32",Fg="/",B$=/\\/g,L$=/[\{\[].*[\}\]]$/,F$=/(^|[^\\])([\{\[]|\([^\)]+$)/,M$=/\\([\!\*\?\|\[\]\(\)\{\}])/g;zT.exports=function(t,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&O$&&t.indexOf(Fg)<0&&(t=t.replace(B$,Fg)),L$.test(t)&&(t+=Fg),t+="a";do t=k$(t);while(D$(t)||F$.test(t));return t.replace(M$,"$1")};});var Bl=P(wn=>{wn.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1;wn.find=(e,t)=>e.nodes.find(r=>r.type===t);wn.exceedsLimit=(e,t,r=1,n)=>n===!1||!wn.isInteger(e)||!wn.isInteger(t)?!1:(Number(t)-Number(e))/Number(r)>=n;wn.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0);};wn.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0);wn.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1;wn.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0;wn.reduce=e=>e.reduce((t,r)=>(r.type==="text"&&t.push(r.value),r.type==="range"&&(r.type="text"),t),[]);wn.flatten=(...e)=>{let t=[],r=n=>{for(let i=0;i<n.length;i++){let s=n[i];Array.isArray(s)?r(s):s!==void 0&&t.push(s);}return t};return r(e),t};});var Ll=P((cre,QT)=>{var YT=Bl();QT.exports=(e,t={})=>{let r=(n,i={})=>{let s=t.escapeInvalid&&YT.isInvalidBrace(i),a=n.invalid===!0&&t.escapeInvalid===!0,o="";if(n.value)return (s||a)&&YT.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let c of n.nodes)o+=r(c);return o};return r(e)};});var XT=P((lre,ZT)=>{ZT.exports=function(e){return typeof e=="number"?e-e===0:typeof e=="string"&&e.trim()!==""?Number.isFinite?Number.isFinite(+e):isFinite(+e):!1};});var oA=P((fre,aA)=>{var JT=XT(),qs=(e,t,r)=>{if(JT(e)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(t===void 0||e===t)return String(e);if(JT(t)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),s=String(n.shorthand),a=String(n.capture),o=String(n.wrap),c=e+":"+t+"="+i+s+a+o;if(qs.cache.hasOwnProperty(c))return qs.cache[c].result;let l=Math.min(e,t),u=Math.max(e,t);if(Math.abs(l-u)===1){let v=e+"|"+t;return n.capture?`(${v})`:n.wrap===!1?v:`(?:${v})`}let f=sA(e)||sA(t),h={min:e,max:t,a:l,b:u},p=[],m=[];if(f&&(h.isPadded=f,h.maxLen=String(h.max).length),l<0){let v=u<0?Math.abs(u):1;m=eA(v,Math.abs(l),h,n),l=h.a=0;}return u>=0&&(p=eA(l,u,h,n)),h.negatives=m,h.positives=p,h.result=q$(m,p),n.capture===!0?h.result=`(${h.result})`:n.wrap!==!1&&p.length+m.length>1&&(h.result=`(?:${h.result})`),qs.cache[c]=h,h.result};function q$(e,t,r){let n=Mg(e,t,"-",!1)||[],i=Mg(t,e,"",!1)||[],s=Mg(e,t,"-?",!0)||[];return n.concat(s).concat(i).join("|")}function U$(e,t){let r=1,n=1,i=rA(e,r),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),r+=1,i=rA(e,r);for(i=nA(t+1,n)-1;e<i&&i<=t;)s.add(i),n+=1,i=nA(t+1,n)-1;return s=[...s],s.sort(V$),s}function $$(e,t,r){if(e===t)return {pattern:e,count:[],digits:0};let n=j$(e,t),i=n.length,s="",a=0;for(let o=0;o<i;o++){let[c,l]=n[o];c===l?s+=c:c!=="0"||l!=="9"?s+=H$(c,l):a++;}return a&&(s+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:s,count:[a],digits:i}}function eA(e,t,r,n){let i=U$(e,t),s=[],a=e,o;for(let c=0;c<i.length;c++){let l=i[c],u=$$(String(a),String(l),n),f="";if(!r.isPadded&&o&&o.pattern===u.pattern){o.count.length>1&&o.count.pop(),o.count.push(u.count[0]),o.string=o.pattern+iA(o.count),a=l+1;continue}r.isPadded&&(f=W$(l,r,n)),u.string=f+u.pattern+iA(u.count),s.push(u),a=l+1,o=u;}return s}function Mg(e,t,r,n,i){let s=[];for(let a of e){let{string:o}=a;!n&&!tA(t,"string",o)&&s.push(r+o),n&&tA(t,"string",o)&&s.push(r+o);}return s}function j$(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}function V$(e,t){return e>t?1:t>e?-1:0}function tA(e,t,r){return e.some(n=>n[t]===r)}function rA(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function nA(e,t){return e-e%Math.pow(10,t)}function iA(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function H$(e,t,r){return `[${e}${t-e===1?"":"-"}${t}]`}function sA(e){return /^-?(0+)\d/.test(e)}function W$(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=r.relaxZeros!==!1;switch(n){case 0:return "";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}qs.cache={};qs.clearCache=()=>qs.cache={};aA.exports=qs;});var $g=P((dre,gA)=>{var K$=he("util"),lA=oA(),uA=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),z$=e=>t=>e===!0?Number(t):String(t),qg=e=>typeof e=="number"||typeof e=="string"&&e!=="",du=e=>Number.isInteger(+e),Ug=e=>{let t=`${e}`,r=-1;if(t[0]==="-"&&(t=t.slice(1)),t==="0")return !1;for(;t[++r]==="0";);return r>0},G$=(e,t,r)=>typeof e=="string"||typeof t=="string"?!0:r.stringify===!0,Y$=(e,t,r)=>{if(t>0){let n=e[0]==="-"?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0");}return r===!1?String(e):e},cA=(e,t)=>{let r=e[0]==="-"?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},Q$=(e,t)=>{e.negatives.sort((a,o)=>a<o?-1:a>o?1:0),e.positives.sort((a,o)=>a<o?-1:a>o?1:0);let r=t.capture?"":"?:",n="",i="",s;return e.positives.length&&(n=e.positives.join("|")),e.negatives.length&&(i=`-(${r}${e.negatives.join("|")})`),n&&i?s=`${n}|${i}`:s=n||i,t.wrap?`(${r}${s})`:s},fA=(e,t,r,n)=>{if(r)return lA(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);if(e===t)return i;let s=String.fromCharCode(t);return `[${i}-${s}]`},dA=(e,t,r)=>{if(Array.isArray(e)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${e.join("|")})`:e.join("|")}return lA(e,t,r)},hA=(...e)=>new RangeError("Invalid range arguments: "+K$.inspect(...e)),pA=(e,t,r)=>{if(r.strictRanges===!0)throw hA([e,t]);return []},Z$=(e,t)=>{if(t.strictRanges===!0)throw new TypeError(`Expected step "${e}" to be a number`);return []},X$=(e,t,r=1,n={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(n.strictRanges===!0)throw hA([e,t]);return []}i===0&&(i=0),s===0&&(s=0);let a=i>s,o=String(e),c=String(t),l=String(r);r=Math.max(Math.abs(r),1);let u=Ug(o)||Ug(c)||Ug(l),f=u?Math.max(o.length,c.length,l.length):0,h=u===!1&&G$(e,t,n)===!1,p=n.transform||z$(h);if(n.toRegex&&r===1)return fA(cA(e,f),cA(t,f),!0,n);let m={negatives:[],positives:[]},v=y=>m[y<0?"negatives":"positives"].push(Math.abs(y)),E=[],w=0;for(;a?i>=s:i<=s;)n.toRegex===!0&&r>1?v(i):E.push(Y$(p(i,w),f,h)),i=a?i-r:i+r,w++;return n.toRegex===!0?r>1?Q$(m,n):dA(E,null,{wrap:!1,...n}):E},J$=(e,t,r=1,n={})=>{if(!du(e)&&e.length>1||!du(t)&&t.length>1)return pA(e,t,n);let i=n.transform||(h=>String.fromCharCode(h)),s=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),o=s>a,c=Math.min(s,a),l=Math.max(s,a);if(n.toRegex&&r===1)return fA(c,l,!1,n);let u=[],f=0;for(;o?s>=a:s<=a;)u.push(i(s,f)),s=o?s-r:s+r,f++;return n.toRegex===!0?dA(u,null,{wrap:!1,options:n}):u},Fl=(e,t,r,n={})=>{if(t==null&&qg(e))return [e];if(!qg(e)||!qg(t))return pA(e,t,n);if(typeof r=="function")return Fl(e,t,1,{transform:r});if(uA(r))return Fl(e,t,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,du(r)?du(e)&&du(t)?X$(e,t,r,i):J$(e,t,Math.max(Math.abs(r),1),i):r!=null&&!uA(r)?Z$(r,i):Fl(e,t,1,r)};gA.exports=Fl;});var _A=P((hre,yA)=>{var ej=$g(),mA=Bl(),tj=(e,t={})=>{let r=(n,i={})=>{let s=mA.isInvalidBrace(i),a=n.invalid===!0&&t.escapeInvalid===!0,o=s===!0||a===!0,c=t.escapeInvalid===!0?"\\":"",l="";if(n.isOpen===!0||n.isClose===!0)return c+n.value;if(n.type==="open")return o?c+n.value:"(";if(n.type==="close")return o?c+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":o?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let u=mA.reduce(n.nodes),f=ej(...u,{...t,wrap:!1,toRegex:!0});if(f.length!==0)return u.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let u of n.nodes)l+=r(u,n);return l};return r(e)};yA.exports=tj;});var SA=P((pre,bA)=>{var rj=$g(),vA=Ll(),qa=Bl(),Us=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),t=[].concat(t),!t.length)return e;if(!e.length)return r?qa.flatten(t).map(i=>`{${i}}`):t;for(let i of e)if(Array.isArray(i))for(let s of i)n.push(Us(s,t,r));else for(let s of t)r===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?Us(i,s,r):i+s);return qa.flatten(n)},nj=(e,t={})=>{let r=t.rangeLimit===void 0?1e3:t.rangeLimit,n=(i,s={})=>{i.queue=[];let a=s,o=s.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(i.invalid||i.dollar){o.push(Us(o.pop(),vA(i,t)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){o.push(Us(o.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=qa.reduce(i.nodes);if(qa.exceedsLimit(...f,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let h=rj(...f,t);h.length===0&&(h=vA(i,t)),o.push(Us(o.pop(),h)),i.nodes=[];return}let c=qa.encloseBrace(i),l=i.queue,u=i;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,l=u.queue;for(let f=0;f<i.nodes.length;f++){let h=i.nodes[f];if(h.type==="comma"&&i.type==="brace"){f===1&&l.push(""),l.push("");continue}if(h.type==="close"){o.push(Us(o.pop(),l,c));continue}if(h.value&&h.type!=="open"){l.push(Us(l.pop(),h.value));continue}h.nodes&&n(h,i);}return l};return qa.flatten(n(e))};bA.exports=nj;});var wA=P((gre,EA)=>{EA.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};});var RA=P((mre,AA)=>{var ij=Ll(),{MAX_LENGTH:CA,CHAR_BACKSLASH:jg,CHAR_BACKTICK:sj,CHAR_COMMA:aj,CHAR_DOT:oj,CHAR_LEFT_PARENTHESES:uj,CHAR_RIGHT_PARENTHESES:cj,CHAR_LEFT_CURLY_BRACE:lj,CHAR_RIGHT_CURLY_BRACE:fj,CHAR_LEFT_SQUARE_BRACKET:xA,CHAR_RIGHT_SQUARE_BRACKET:TA,CHAR_DOUBLE_QUOTE:dj,CHAR_SINGLE_QUOTE:hj,CHAR_NO_BREAK_SPACE:pj,CHAR_ZERO_WIDTH_NOBREAK_SPACE:gj}=wA(),mj=(e,t={})=>{if(typeof e!="string")throw new TypeError("Expected a string");let r=t||{},n=typeof r.maxLength=="number"?Math.min(CA,r.maxLength):CA;if(e.length>n)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${n})`);let i={type:"root",input:e,nodes:[]},s=[i],a=i,o=i,c=0,l=e.length,u=0,f=0,h,m=()=>e[u++],v=E=>{if(E.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&E.type==="text"){o.value+=E.value;return}return a.nodes.push(E),E.parent=a,E.prev=o,o=E,E};for(v({type:"bos"});u<l;)if(a=s[s.length-1],h=m(),!(h===gj||h===pj)){if(h===jg){v({type:"text",value:(t.keepEscaping?h:"")+m()});continue}if(h===TA){v({type:"text",value:"\\"+h});continue}if(h===xA){c++;let w;for(;u<l&&(w=m());){if(h+=w,w===xA){c++;continue}if(w===jg){h+=m();continue}if(w===TA&&(c--,c===0))break}v({type:"text",value:h});continue}if(h===uj){a=v({type:"paren",nodes:[]}),s.push(a),v({type:"text",value:h});continue}if(h===cj){if(a.type!=="paren"){v({type:"text",value:h});continue}a=s.pop(),v({type:"text",value:h}),a=s[s.length-1];continue}if(h===dj||h===hj||h===sj){let E=h,w;for(t.keepQuotes!==!0&&(h="");u<l&&(w=m());){if(w===jg){h+=w+m();continue}if(w===E){t.keepQuotes===!0&&(h+=w);break}h+=w;}v({type:"text",value:h});continue}if(h===lj){f++;let w={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};a=v(w),s.push(a),v({type:"open",value:h});continue}if(h===fj){if(a.type!=="brace"){v({type:"text",value:h});continue}let E="close";a=s.pop(),a.close=!0,v({type:E,value:h}),f--,a=s[s.length-1];continue}if(h===aj&&f>0){if(a.ranges>0){a.ranges=0;let E=a.nodes.shift();a.nodes=[E,{type:"text",value:ij(a)}];}v({type:"comma",value:h}),a.commas++;continue}if(h===oj&&f>0&&a.commas===0){let E=a.nodes;if(f===0||E.length===0){v({type:"text",value:h});continue}if(o.type==="dot"){if(a.range=[],o.value+=h,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){E.pop();let w=E[E.length-1];w.value+=o.value+h,o=w,a.ranges--;continue}v({type:"dot",value:h});continue}v({type:"text",value:h});}do if(a=s.pop(),a.type!=="root"){a.nodes.forEach(y=>{y.nodes||(y.type==="open"&&(y.isOpen=!0),y.type==="close"&&(y.isClose=!0),y.nodes||(y.type="text"),y.invalid=!0);});let E=s[s.length-1],w=E.nodes.indexOf(a);E.nodes.splice(w,1,...a.nodes);}while(s.length>0);return v({type:"eos"}),i};AA.exports=mj;});var NA=P((yre,PA)=>{var IA=Ll(),yj=_A(),_j=SA(),vj=RA(),dn=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let i=dn.create(n,t);Array.isArray(i)?r.push(...i):r.push(i);}else r=[].concat(dn.create(e,t));return t&&t.expand===!0&&t.nodupes===!0&&(r=[...new Set(r)]),r};dn.parse=(e,t={})=>vj(e,t);dn.stringify=(e,t={})=>IA(typeof e=="string"?dn.parse(e,t):e,t);dn.compile=(e,t={})=>(typeof e=="string"&&(e=dn.parse(e,t)),yj(e,t));dn.expand=(e,t={})=>{typeof e=="string"&&(e=dn.parse(e,t));let r=_j(e,t);return t.noempty===!0&&(r=r.filter(Boolean)),t.nodupes===!0&&(r=[...new Set(r)]),r};dn.create=(e,t={})=>e===""||e.length<3?[e]:t.expand!==!0?dn.compile(e,t):dn.expand(e,t);PA.exports=dn;});var DA=P((_re,bj)=>{bj.exports=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];});var OA=P((vre,kA)=>{kA.exports=DA();});var LA=P((bre,BA)=>{var Sj=he("path"),Ej=OA(),wj=new Set(Ej);BA.exports=e=>wj.has(Sj.extname(e).slice(1).toLowerCase());});var Ml=P(Be=>{var{sep:Cj}=he("path"),{platform:Vg}=process,xj=he("os");Be.EV_ALL="all";Be.EV_READY="ready";Be.EV_ADD="add";Be.EV_CHANGE="change";Be.EV_ADD_DIR="addDir";Be.EV_UNLINK="unlink";Be.EV_UNLINK_DIR="unlinkDir";Be.EV_RAW="raw";Be.EV_ERROR="error";Be.STR_DATA="data";Be.STR_END="end";Be.STR_CLOSE="close";Be.FSEVENT_CREATED="created";Be.FSEVENT_MODIFIED="modified";Be.FSEVENT_DELETED="deleted";Be.FSEVENT_MOVED="moved";Be.FSEVENT_CLONED="cloned";Be.FSEVENT_UNKNOWN="unknown";Be.FSEVENT_TYPE_FILE="file";Be.FSEVENT_TYPE_DIRECTORY="directory";Be.FSEVENT_TYPE_SYMLINK="symlink";Be.KEY_LISTENERS="listeners";Be.KEY_ERR="errHandlers";Be.KEY_RAW="rawEmitters";Be.HANDLER_KEYS=[Be.KEY_LISTENERS,Be.KEY_ERR,Be.KEY_RAW];Be.DOT_SLASH=`.${Cj}`;Be.BACK_SLASH_RE=/\\/g;Be.DOUBLE_SLASH_RE=/\/\//;Be.SLASH_OR_BACK_SLASH_RE=/[/\\]/;Be.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;Be.REPLACER_RE=/^\.[/\\]/;Be.SLASH="/";Be.SLASH_SLASH="//";Be.BRACE_START="{";Be.BANG="!";Be.ONE_DOT=".";Be.TWO_DOTS="..";Be.STAR="*";Be.GLOBSTAR="**";Be.ROOT_GLOBSTAR="/**/*";Be.SLASH_GLOBSTAR="/**";Be.DIR_SUFFIX="Dir";Be.ANYMATCH_OPTS={dot:!0};Be.STRING_TYPE="string";Be.FUNCTION_TYPE="function";Be.EMPTY_STR="";Be.EMPTY_FN=()=>{};Be.IDENTITY_FN=e=>e;Be.isWindows=Vg==="win32";Be.isMacos=Vg==="darwin";Be.isLinux=Vg==="linux";Be.isIBMi=xj.type()==="OS400";});var jA=P((Ere,$A)=>{var Ai=he("fs"),fr=he("path"),{promisify:mu}=he("util"),Tj=LA(),{isWindows:Aj,isLinux:Rj,EMPTY_FN:Ij,EMPTY_STR:Pj,KEY_LISTENERS:Ua,KEY_ERR:Hg,KEY_RAW:hu,HANDLER_KEYS:Nj,EV_CHANGE:Ul,EV_ADD:ql,EV_ADD_DIR:Dj,EV_ERROR:MA,STR_DATA:kj,STR_END:Oj,BRACE_START:Bj,STAR:Lj}=Ml(),Fj="watch",Mj=mu(Ai.open),qA=mu(Ai.stat),qj=mu(Ai.lstat),Uj=mu(Ai.close),Wg=mu(Ai.realpath),$j={lstat:qj,stat:qA},zg=(e,t)=>{e instanceof Set?e.forEach(t):t(e);},pu=(e,t,r)=>{let n=e[t];n instanceof Set||(e[t]=n=new Set([n])),n.add(r);},jj=e=>t=>{let r=e[t];r instanceof Set?r.clear():delete e[t];},gu=(e,t,r)=>{let n=e[t];n instanceof Set?n.delete(r):n===r&&delete e[t];},UA=e=>e instanceof Set?e.size===0:!e,$l=new Map;function FA(e,t,r,n,i){let s=(a,o)=>{r(e),i(a,o,{watchedPath:e}),o&&e!==o&&jl(fr.resolve(e,o),Ua,fr.join(e,o));};try{return Ai.watch(e,t,s)}catch(a){n(a);}}var jl=(e,t,r,n,i)=>{let s=$l.get(e);s&&zg(s[t],a=>{a(r,n,i);});},Vj=(e,t,r,n)=>{let{listener:i,errHandler:s,rawEmitter:a}=n,o=$l.get(t),c;if(!r.persistent)return c=FA(e,r,i,s,a),c.close.bind(c);if(o)pu(o,Ua,i),pu(o,Hg,s),pu(o,hu,a);else {if(c=FA(e,r,jl.bind(null,t,Ua),s,jl.bind(null,t,hu)),!c)return;c.on(MA,async l=>{let u=jl.bind(null,t,Hg);if(o.watcherUnusable=!0,Aj&&l.code==="EPERM")try{let f=await Mj(e,"r");await Uj(f),u(l);}catch{}else u(l);}),o={listeners:i,errHandlers:s,rawEmitters:a,watcher:c},$l.set(t,o);}return ()=>{gu(o,Ua,i),gu(o,Hg,s),gu(o,hu,a),UA(o.listeners)&&(o.watcher.close(),$l.delete(t),Nj.forEach(jj(o)),o.watcher=void 0,Object.freeze(o));}},Kg=new Map,Hj=(e,t,r,n)=>{let {listener:i,rawEmitter:s}=n,a=Kg.get(t),l=a&&a.options;return l&&(l.persistent<r.persistent||l.interval>r.interval)&&(Ai.unwatchFile(t),a=void 0),a?(pu(a,Ua,i),pu(a,hu,s)):(a={listeners:i,rawEmitters:s,options:r,watcher:Ai.watchFile(t,r,(u,f)=>{zg(a.rawEmitters,p=>{p(Ul,t,{curr:u,prev:f});});let h=u.mtimeMs;(u.size!==f.size||h>f.mtimeMs||h===0)&&zg(a.listeners,p=>p(e,u));})},Kg.set(t,a)),()=>{gu(a,Ua,i),gu(a,hu,s),UA(a.listeners)&&(Kg.delete(t),Ai.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a));}},Gg=class{constructor(t){this.fsw=t,this._boundHandleError=r=>t._handleError(r);}_watchWithNodeFs(t,r){let n=this.fsw.options,i=fr.dirname(t),s=fr.basename(t);this.fsw._getWatchedDir(i).add(s);let o=fr.resolve(t),c={persistent:n.persistent};r||(r=Ij);let l;return n.usePolling?(c.interval=n.enableBinaryInterval&&Tj(s)?n.binaryInterval:n.interval,l=Hj(t,o,c,{listener:r,rawEmitter:this.fsw._emitRaw})):l=Vj(t,o,c,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),l}_handleFile(t,r,n){if(this.fsw.closed)return;let i=fr.dirname(t),s=fr.basename(t),a=this.fsw._getWatchedDir(i),o=r;if(a.has(s))return;let c=async(u,f)=>{if(this.fsw._throttle(Fj,t,5)){if(!f||f.mtimeMs===0)try{let h=await qA(t);if(this.fsw.closed)return;let p=h.atimeMs,m=h.mtimeMs;(!p||p<=m||m!==o.mtimeMs)&&this.fsw._emit(Ul,t,h),Rj&&o.ino!==h.ino?(this.fsw._closeFile(u),o=h,this.fsw._addPathCloser(u,this._watchWithNodeFs(t,c))):o=h;}catch{this.fsw._remove(i,s);}else if(a.has(s)){let h=f.atimeMs,p=f.mtimeMs;(!h||h<=p||p!==o.mtimeMs)&&this.fsw._emit(Ul,t,f),o=f;}}},l=this._watchWithNodeFs(t,c);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(t)){if(!this.fsw._throttle(ql,t,0))return;this.fsw._emit(ql,t,r);}return l}async _handleSymlink(t,r,n,i){if(this.fsw.closed)return;let s=t.fullPath,a=this.fsw._getWatchedDir(r);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let o;try{o=await Wg(n);}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(a.has(i)?this.fsw._symlinkPaths.get(s)!==o&&(this.fsw._symlinkPaths.set(s,o),this.fsw._emit(Ul,n,t.stats)):(a.add(i),this.fsw._symlinkPaths.set(s,o),this.fsw._emit(ql,n,t.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return !0;this.fsw._symlinkPaths.set(s,!0);}_handleRead(t,r,n,i,s,a,o){if(t=fr.join(t,Pj),!n.hasGlob&&(o=this.fsw._throttle("readdir",t,1e3),!o))return;let c=this.fsw._getWatchedDir(n.path),l=new Set,u=this.fsw._readdirp(t,{fileFilter:f=>n.filterPath(f),directoryFilter:f=>n.filterDir(f),depth:0}).on(kj,async f=>{if(this.fsw.closed){u=void 0;return}let h=f.path,p=fr.join(t,h);if(l.add(h),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,t,p,h))){if(this.fsw.closed){u=void 0;return}(h===i||!i&&!c.has(h))&&(this.fsw._incrReadyCount(),p=fr.join(s,fr.relative(s,p)),this._addToNodeFs(p,r,n,a+1));}}).on(MA,this._boundHandleError);return new Promise(f=>u.once(Oj,()=>{if(this.fsw.closed){u=void 0;return}let h=o?o.clear():!1;f(),c.getChildren().filter(p=>p!==t&&!l.has(p)&&(!n.hasGlob||n.filterPath({fullPath:fr.resolve(t,p)}))).forEach(p=>{this.fsw._remove(t,p);}),u=void 0,h&&this._handleRead(t,!1,n,i,s,a,o);}))}async _handleDir(t,r,n,i,s,a,o){let c=this.fsw._getWatchedDir(fr.dirname(t)),l=c.has(fr.basename(t));!(n&&this.fsw.options.ignoreInitial)&&!s&&!l&&(!a.hasGlob||a.globFilter(t))&&this.fsw._emit(Dj,t,r),c.add(fr.basename(t)),this.fsw._getWatchedDir(t);let u,f,h=this.fsw.options.depth;if((h==null||i<=h)&&!this.fsw._symlinkPaths.has(o)){if(!s&&(await this._handleRead(t,n,a,s,t,i,u),this.fsw.closed))return;f=this._watchWithNodeFs(t,(p,m)=>{m&&m.mtimeMs===0||this._handleRead(p,!1,a,s,t,i,u);});}return f}async _addToNodeFs(t,r,n,i,s){let a=this.fsw._emitReady;if(this.fsw._isIgnored(t)||this.fsw.closed)return a(),!1;let o=this.fsw._getWatchHelpers(t,i);!o.hasGlob&&n&&(o.hasGlob=n.hasGlob,o.globFilter=n.globFilter,o.filterPath=c=>n.filterPath(c),o.filterDir=c=>n.filterDir(c));try{let c=await $j[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))return a(),!1;let l=this.fsw.options.followSymlinks&&!t.includes(Lj)&&!t.includes(Bj),u;if(c.isDirectory()){let f=fr.resolve(t),h=l?await Wg(t):t;if(this.fsw.closed||(u=await this._handleDir(o.watchPath,c,r,i,s,o,h),this.fsw.closed))return;f!==h&&h!==void 0&&this.fsw._symlinkPaths.set(f,h);}else if(c.isSymbolicLink()){let f=l?await Wg(t):t;if(this.fsw.closed)return;let h=fr.dirname(o.watchPath);if(this.fsw._getWatchedDir(h).add(o.watchPath),this.fsw._emit(ql,o.watchPath,c),u=await this._handleDir(h,c,r,i,t,o,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(fr.resolve(t),f);}else u=this._handleFile(o.watchPath,c,r);return a(),this.fsw._addPathCloser(t,u),!1}catch(c){if(this.fsw._handleError(c))return a(),t}}};$A.exports=Gg;});var YA=P((wre,rm)=>{var em=he("fs"),dr=he("path"),{promisify:tm}=he("util"),$a;try{$a=he("fsevents");}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e);}if($a){let e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){let t=Number.parseInt(e[1],10),r=Number.parseInt(e[2],10);t===8&&r<16&&($a=void 0);}}var{EV_ADD:Yg,EV_CHANGE:Wj,EV_ADD_DIR:VA,EV_UNLINK:Vl,EV_ERROR:Kj,STR_DATA:zj,STR_END:Gj,FSEVENT_CREATED:Yj,FSEVENT_MODIFIED:Qj,FSEVENT_DELETED:Zj,FSEVENT_MOVED:Xj,FSEVENT_UNKNOWN:Jj,FSEVENT_TYPE_FILE:eV,FSEVENT_TYPE_DIRECTORY:yu,FSEVENT_TYPE_SYMLINK:GA,ROOT_GLOBSTAR:HA,DIR_SUFFIX:tV,DOT_SLASH:WA,FUNCTION_TYPE:Qg,EMPTY_FN:rV,IDENTITY_FN:nV}=Ml(),iV=e=>isNaN(e)?{}:{depth:e},Xg=tm(em.stat),sV=tm(em.lstat),KA=tm(em.realpath),aV={stat:Xg,lstat:sV},$s=new Map,oV=10,uV=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),cV=(e,t)=>({stop:$a.watch(e,t)});function lV(e,t,r,n){let i=dr.extname(t)?dr.dirname(t):t,s=dr.dirname(i),a=$s.get(i);fV(s)&&(i=s);let o=dr.resolve(e),c=o!==t,l=(f,h,p)=>{c&&(f=f.replace(t,o)),(f===o||!f.indexOf(o+dr.sep))&&r(f,h,p);},u=!1;for(let f of $s.keys())if(t.indexOf(dr.resolve(f)+dr.sep)===0){i=f,a=$s.get(i),u=!0;break}return a||u?a.listeners.add(l):(a={listeners:new Set([l]),rawEmitter:n,watcher:cV(i,(f,h)=>{if(!a.listeners.size)return;let p=$a.getInfo(f,h);a.listeners.forEach(m=>{m(f,h,p);}),a.rawEmitter(p.event,f,p);})},$s.set(i,a)),()=>{let f=a.listeners;if(f.delete(l),!f.size&&($s.delete(i),a.watcher))return a.watcher.stop().then(()=>{a.rawEmitter=a.watcher=void 0,Object.freeze(a);})}}var fV=e=>{let t=0;for(let r of $s.keys())if(r.indexOf(e)===0&&(t++,t>=oV))return !0;return !1},dV=()=>$a&&$s.size<128,Zg=(e,t)=>{let r=0;for(;!e.indexOf(t)&&(e=dr.dirname(e))!==t;)r++;return r},zA=(e,t)=>e.type===yu&&t.isDirectory()||e.type===GA&&t.isSymbolicLink()||e.type===eV&&t.isFile(),Jg=class{constructor(t){this.fsw=t;}checkIgnored(t,r){let n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(t,r))return n.add(t),r&&r.isDirectory()&&n.add(t+HA),!0;n.delete(t),n.delete(t+HA);}addOrChange(t,r,n,i,s,a,o,c){let l=s.has(a)?Wj:Yg;this.handleEvent(l,t,r,n,i,s,a,o,c);}async checkExists(t,r,n,i,s,a,o,c){try{let l=await Xg(t);if(this.fsw.closed)return;zA(o,l)?this.addOrChange(t,r,n,i,s,a,o,c):this.handleEvent(Vl,t,r,n,i,s,a,o,c);}catch(l){l.code==="EACCES"?this.addOrChange(t,r,n,i,s,a,o,c):this.handleEvent(Vl,t,r,n,i,s,a,o,c);}}handleEvent(t,r,n,i,s,a,o,c,l){if(!(this.fsw.closed||this.checkIgnored(r)))if(t===Vl){let u=c.type===yu;(u||a.has(o))&&this.fsw._remove(s,o,u);}else {if(t===Yg){if(c.type===yu&&this.fsw._getWatchedDir(r),c.type===GA&&l.followSymlinks){let f=l.depth===void 0?void 0:Zg(n,i)+1;return this._addToFsEvents(r,!1,!0,f)}this.fsw._getWatchedDir(s).add(o);}let u=c.type===yu?t+tV:t;this.fsw._emit(u,r),u===VA&&this._addToFsEvents(r,!1,!0);}}_watchWithFsEvents(t,r,n,i){if(this.fsw.closed||this.fsw._isIgnored(t))return;let s=this.fsw.options,o=lV(t,r,async(c,l,u)=>{if(this.fsw.closed||s.depth!==void 0&&Zg(c,r)>s.depth)return;let f=n(dr.join(t,dr.relative(t,c)));if(i&&!i(f))return;let h=dr.dirname(f),p=dr.basename(f),m=this.fsw._getWatchedDir(u.type===yu?f:h);if(uV.has(l)||u.event===Jj)if(typeof s.ignored===Qg){let v;try{v=await Xg(f);}catch{}if(this.fsw.closed||this.checkIgnored(f,v))return;zA(u,v)?this.addOrChange(f,c,r,h,m,p,u,s):this.handleEvent(Vl,f,c,r,h,m,p,u,s);}else this.checkExists(f,c,r,h,m,p,u,s);else switch(u.event){case Yj:case Qj:return this.addOrChange(f,c,r,h,m,p,u,s);case Zj:case Xj:return this.checkExists(f,c,r,h,m,p,u,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),o}async _handleFsEventsSymlink(t,r,n,i){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(r))){this.fsw._symlinkPaths.set(r,!0),this.fsw._incrReadyCount();try{let s=await KA(t);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||t,a=>{let o=t;return s&&s!==WA?o=a.replace(s,t):a!==WA&&(o=dr.join(t,a)),n(o)},!1,i);}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(t,r,n,i,s){let a=n(t),o=r.isDirectory(),c=this.fsw._getWatchedDir(dr.dirname(a)),l=dr.basename(a);o&&this.fsw._getWatchedDir(a),!c.has(l)&&(c.add(l),(!i.ignoreInitial||s===!0)&&this.fsw._emit(o?VA:Yg,a,r));}initWatch(t,r,n,i){if(this.fsw.closed)return;let s=this._watchWithFsEvents(n.watchPath,dr.resolve(t||n.watchPath),i,n.globFilter);this.fsw._addPathCloser(r,s);}async _addToFsEvents(t,r,n,i){if(this.fsw.closed)return;let s=this.fsw.options,a=typeof r===Qg?r:nV,o=this.fsw._getWatchHelpers(t);try{let c=await aV[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))throw null;if(c.isDirectory()){if(o.globFilter||this.emitAdd(a(t),c,a,s,n),i&&i>s.depth)return;this.fsw._readdirp(o.watchPath,{fileFilter:l=>o.filterPath(l),directoryFilter:l=>o.filterDir(l),...iV(s.depth-(i||0))}).on(zj,l=>{if(this.fsw.closed||l.stats.isDirectory()&&!o.filterPath(l))return;let u=dr.join(o.watchPath,l.path),{fullPath:f}=l;if(o.followSymlinks&&l.stats.isSymbolicLink()){let h=s.depth===void 0?void 0:Zg(u,dr.resolve(o.watchPath))+1;this._handleFsEventsSymlink(u,f,a,h);}else this.emitAdd(u,l.stats,a,s,n);}).on(Kj,rV).on(Gj,()=>{this.fsw._emitReady();});}else this.emitAdd(o.watchPath,c,a,s,n),this.fsw._emitReady();}catch(c){(!c||this.fsw._handleError(c))&&(this.fsw._emitReady(),this.fsw._emitReady());}if(s.persistent&&n!==!0)if(typeof r===Qg)this.initWatch(void 0,t,o,a);else {let c;try{c=await KA(o.watchPath);}catch{}this.initWatch(c,t,o,a);}}};rm.exports=Jg;rm.exports.canUse=dV;});var _m=P(ym=>{var{EventEmitter:hV}=he("events"),gm=he("fs"),At=he("path"),{promisify:rR}=he("util"),pV=BT(),um=jT().default,gV=GT(),nm=Lg(),mV=NA(),yV=Og(),_V=jA(),QA=YA(),{EV_ALL:im,EV_READY:vV,EV_ADD:Hl,EV_CHANGE:_u,EV_UNLINK:ZA,EV_ADD_DIR:bV,EV_UNLINK_DIR:SV,EV_RAW:EV,EV_ERROR:sm,STR_CLOSE:wV,STR_END:CV,BACK_SLASH_RE:xV,DOUBLE_SLASH_RE:XA,SLASH_OR_BACK_SLASH_RE:TV,DOT_RE:AV,REPLACER_RE:RV,SLASH:am,SLASH_SLASH:IV,BRACE_START:PV,BANG:cm,ONE_DOT:nR,TWO_DOTS:NV,GLOBSTAR:DV,SLASH_GLOBSTAR:om,ANYMATCH_OPTS:lm,STRING_TYPE:mm,FUNCTION_TYPE:kV,EMPTY_STR:fm,EMPTY_FN:OV,isWindows:BV,isMacos:LV,isIBMi:FV}=Ml(),MV=rR(gm.stat),qV=rR(gm.readdir),dm=(e=[])=>Array.isArray(e)?e:[e],iR=(e,t=[])=>(e.forEach(r=>{Array.isArray(r)?iR(r,t):t.push(r);}),t),JA=e=>{let t=iR(dm(e));if(!t.every(r=>typeof r===mm))throw new TypeError(`Non-string provided as watch path: ${t}`);return t.map(sR)},eR=e=>{let t=e.replace(xV,am),r=!1;for(t.startsWith(IV)&&(r=!0);t.match(XA);)t=t.replace(XA,am);return r&&(t=am+t),t},sR=e=>eR(At.normalize(eR(e))),tR=(e=fm)=>t=>typeof t!==mm?t:sR(At.isAbsolute(t)?t:At.join(e,t)),UV=(e,t)=>At.isAbsolute(e)?e:e.startsWith(cm)?cm+At.join(t,e.slice(1)):At.join(t,e),jn=(e,t)=>e[t]===void 0,hm=class{constructor(t,r){this.path=t,this._removeWatcher=r,this.items=new Set;}add(t){let{items:r}=this;r&&t!==nR&&t!==NV&&r.add(t);}async remove(t){let{items:r}=this;if(!r||(r.delete(t),r.size>0))return;let n=this.path;try{await qV(n);}catch{this._removeWatcher&&this._removeWatcher(At.dirname(n),At.basename(n));}}has(t){let{items:r}=this;if(r)return r.has(t)}getChildren(){let{items:t}=this;if(t)return [...t.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this);}},$V="stat",jV="lstat",pm=class{constructor(t,r,n,i){this.fsw=i,this.path=t=t.replace(RV,fm),this.watchPath=r,this.fullWatchPath=At.resolve(r),this.hasGlob=r!==t,t===fm&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&n?void 0:!1,this.globFilter=this.hasGlob?um(t,void 0,lm):!1,this.dirParts=this.getDirParts(t),this.dirParts.forEach(s=>{s.length>1&&s.pop();}),this.followSymlinks=n,this.statMethod=n?$V:jV;}checkGlobSymlink(t){return this.globSymlink===void 0&&(this.globSymlink=t.fullParentDir===this.fullWatchPath?!1:{realPath:t.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?t.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):t.fullPath}entryPath(t){return At.join(this.watchPath,At.relative(this.watchPath,this.checkGlobSymlink(t)))}filterPath(t){let{stats:r}=t;if(r&&r.isSymbolicLink())return this.filterDir(t);let n=this.entryPath(t);return (this.hasGlob&&typeof this.globFilter===kV?this.globFilter(n):!0)&&this.fsw._isntIgnored(n,r)&&this.fsw._hasReadPermissions(r)}getDirParts(t){if(!this.hasGlob)return [];let r=[];return (t.includes(PV)?mV.expand(t):[t]).forEach(i=>{r.push(At.relative(this.watchPath,i).split(TV));}),r}filterDir(t){if(this.hasGlob){let r=this.getDirParts(this.checkGlobSymlink(t)),n=!1;this.unmatchedGlob=!this.dirParts.some(i=>i.every((s,a)=>(s===DV&&(n=!0),n||!r[0][a]||um(s,r[0][a],lm))));}return !this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(t),t.stats)}},Wl=class extends hV{constructor(t){super();let r={};t&&Object.assign(r,t),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,jn(r,"persistent")&&(r.persistent=!0),jn(r,"ignoreInitial")&&(r.ignoreInitial=!1),jn(r,"ignorePermissionErrors")&&(r.ignorePermissionErrors=!1),jn(r,"interval")&&(r.interval=100),jn(r,"binaryInterval")&&(r.binaryInterval=300),jn(r,"disableGlobbing")&&(r.disableGlobbing=!1),r.enableBinaryInterval=r.binaryInterval!==r.interval,jn(r,"useFsEvents")&&(r.useFsEvents=!r.usePolling),QA.canUse()||(r.useFsEvents=!1),jn(r,"usePolling")&&!r.useFsEvents&&(r.usePolling=LV),FV&&(r.usePolling=!0);let i=process.env.CHOKIDAR_USEPOLLING;if(i!==void 0){let c=i.toLowerCase();c==="false"||c==="0"?r.usePolling=!1:c==="true"||c==="1"?r.usePolling=!0:r.usePolling=!!c;}let s=process.env.CHOKIDAR_INTERVAL;s&&(r.interval=Number.parseInt(s,10)),jn(r,"atomic")&&(r.atomic=!r.usePolling&&!r.useFsEvents),r.atomic&&(this._pendingUnlinks=new Map),jn(r,"followSymlinks")&&(r.followSymlinks=!0),jn(r,"awaitWriteFinish")&&(r.awaitWriteFinish=!1),r.awaitWriteFinish===!0&&(r.awaitWriteFinish={});let a=r.awaitWriteFinish;a&&(a.stabilityThreshold||(a.stabilityThreshold=2e3),a.pollInterval||(a.pollInterval=100),this._pendingWrites=new Map),r.ignored&&(r.ignored=dm(r.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=OV,this._readyEmitted=!0,process.nextTick(()=>this.emit(vV)));},this._emitRaw=(...c)=>this.emit(EV,...c),this._readyEmitted=!1,this.options=r,r.useFsEvents?this._fsEventsHandler=new QA(this):this._nodeFsHandler=new _V(this),Object.freeze(r);}add(t,r,n){let{cwd:i,disableGlobbing:s}=this.options;this.closed=!1;let a=JA(t);return i&&(a=a.map(o=>{let c=UV(o,i);return s||!nm(o)?c:yV(c)})),a=a.filter(o=>o.startsWith(cm)?(this._ignoredPaths.add(o.slice(1)),!1):(this._ignoredPaths.delete(o),this._ignoredPaths.delete(o+om),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=a.length),this.options.persistent&&(this._readyCount*=2),a.forEach(o=>this._fsEventsHandler._addToFsEvents(o))):(this._readyCount||(this._readyCount=0),this._readyCount+=a.length,Promise.all(a.map(async o=>{let c=await this._nodeFsHandler._addToNodeFs(o,!n,0,0,r);return c&&this._emitReady(),c})).then(o=>{this.closed||o.filter(c=>c).forEach(c=>{this.add(At.dirname(c),At.basename(r||c));});})),this}unwatch(t){if(this.closed)return this;let r=JA(t),{cwd:n}=this.options;return r.forEach(i=>{!At.isAbsolute(i)&&!this._closers.has(i)&&(n&&(i=At.join(n,i)),i=At.resolve(i)),this._closePath(i),this._ignoredPaths.add(i),this._watched.has(i)&&this._ignoredPaths.add(i+om),this._userIgnored=void 0;}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();let t=[];return this._closers.forEach(r=>r.forEach(n=>{let i=n();i instanceof Promise&&t.push(i);})),this._streams.forEach(r=>r.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(r=>r.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(r=>{this[`_${r}`].clear();}),this._closePromise=t.length?Promise.all(t).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){let t={};return this._watched.forEach((r,n)=>{let i=this.options.cwd?At.relative(this.options.cwd,n):n;t[i||nR]=r.getChildren().sort();}),t}emitWithAll(t,r){this.emit(...r),t!==sm&&this.emit(im,...r);}async _emit(t,r,n,i,s){if(this.closed)return;let a=this.options;BV&&(r=At.normalize(r)),a.cwd&&(r=At.relative(a.cwd,r));let o=[t,r];s!==void 0?o.push(n,i,s):i!==void 0?o.push(n,i):n!==void 0&&o.push(n);let c=a.awaitWriteFinish,l;if(c&&(l=this._pendingWrites.get(r)))return l.lastChange=new Date,this;if(a.atomic){if(t===ZA)return this._pendingUnlinks.set(r,o),setTimeout(()=>{this._pendingUnlinks.forEach((u,f)=>{this.emit(...u),this.emit(im,...u),this._pendingUnlinks.delete(f);});},typeof a.atomic=="number"?a.atomic:100),this;t===Hl&&this._pendingUnlinks.has(r)&&(t=o[0]=_u,this._pendingUnlinks.delete(r));}if(c&&(t===Hl||t===_u)&&this._readyEmitted){let u=(f,h)=>{f?(t=o[0]=sm,o[1]=f,this.emitWithAll(t,o)):h&&(o.length>2?o[2]=h:o.push(h),this.emitWithAll(t,o));};return this._awaitWriteFinish(r,c.stabilityThreshold,t,u),this}if(t===_u&&!this._throttle(_u,r,50))return this;if(a.alwaysStat&&n===void 0&&(t===Hl||t===bV||t===_u)){let u=a.cwd?At.join(a.cwd,r):r,f;try{f=await MV(u);}catch{}if(!f||this.closed)return;o.push(f);}return this.emitWithAll(t,o),this}_handleError(t){let r=t&&t.code;return t&&r!=="ENOENT"&&r!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||r!=="EPERM"&&r!=="EACCES")&&this.emit(sm,t),t||this.closed}_throttle(t,r,n){this._throttled.has(t)||this._throttled.set(t,new Map);let i=this._throttled.get(t),s=i.get(r);if(s)return s.count++,!1;let a,o=()=>{let l=i.get(r),u=l?l.count:0;return i.delete(r),clearTimeout(a),l&&clearTimeout(l.timeoutObject),u};a=setTimeout(o,n);let c={timeoutObject:a,clear:o,count:0};return i.set(r,c),c}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(t,r,n,i){let s,a=t;this.options.cwd&&!At.isAbsolute(t)&&(a=At.join(this.options.cwd,t));let o=new Date,c=l=>{gm.stat(a,(u,f)=>{if(u||!this._pendingWrites.has(t)){u&&u.code!=="ENOENT"&&i(u);return}let h=Number(new Date);l&&f.size!==l.size&&(this._pendingWrites.get(t).lastChange=h);let p=this._pendingWrites.get(t);h-p.lastChange>=r?(this._pendingWrites.delete(t),i(void 0,f)):s=setTimeout(c,this.options.awaitWriteFinish.pollInterval,f);});};this._pendingWrites.has(t)||(this._pendingWrites.set(t,{lastChange:o,cancelWait:()=>(this._pendingWrites.delete(t),clearTimeout(s),n)}),s=setTimeout(c,this.options.awaitWriteFinish.pollInterval));}_getGlobIgnored(){return [...this._ignoredPaths.values()]}_isIgnored(t,r){if(this.options.atomic&&AV.test(t))return !0;if(!this._userIgnored){let{cwd:n}=this.options,i=this.options.ignored,s=i&&i.map(tR(n)),a=dm(s).filter(c=>typeof c===mm&&!nm(c)).map(c=>c+om),o=this._getGlobIgnored().map(tR(n)).concat(s,a);this._userIgnored=um(o,void 0,lm);}return this._userIgnored([t,r])}_isntIgnored(t,r){return !this._isIgnored(t,r)}_getWatchHelpers(t,r){let n=r||this.options.disableGlobbing||!nm(t)?t:gV(t),i=this.options.followSymlinks;return new pm(t,n,i,this)}_getWatchedDir(t){this._boundRemove||(this._boundRemove=this._remove.bind(this));let r=At.resolve(t);return this._watched.has(r)||this._watched.set(r,new hm(r,this._boundRemove)),this._watched.get(r)}_hasReadPermissions(t){if(this.options.ignorePermissionErrors)return !0;let n=(t&&Number.parseInt(t.mode,10))&511;return !!(4&Number.parseInt(n.toString(8)[0],10))}_remove(t,r,n){let i=At.join(t,r),s=At.resolve(i);if(n=n??(this._watched.has(i)||this._watched.has(s)),!this._throttle("remove",i,100))return;!n&&!this.options.useFsEvents&&this._watched.size===1&&this.add(t,r,!0),this._getWatchedDir(i).getChildren().forEach(h=>this._remove(i,h));let c=this._getWatchedDir(t),l=c.has(r);c.remove(r),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let u=i;if(this.options.cwd&&(u=At.relative(this.options.cwd,i)),this.options.awaitWriteFinish&&this._pendingWrites.has(u)&&this._pendingWrites.get(u).cancelWait()===Hl)return;this._watched.delete(i),this._watched.delete(s);let f=n?SV:ZA;l&&!this._isIgnored(i)&&this._emit(f,i),this.options.useFsEvents||this._closePath(i);}_closePath(t){this._closeFile(t);let r=At.dirname(t);this._getWatchedDir(r).remove(At.basename(t));}_closeFile(t){let r=this._closers.get(t);r&&(r.forEach(n=>n()),this._closers.delete(t));}_addPathCloser(t,r){if(!r)return;let n=this._closers.get(t);n||(n=[],this._closers.set(t,n)),n.push(r);}_readdirp(t,r){if(this.closed)return;let n={type:im,alwaysStat:!0,lstat:!0,...r},i=pV(t,n);return this._streams.add(i),i.once(wV,()=>{i=void 0;}),i.once(CV,()=>{i&&(this._streams.delete(i),i=void 0);}),i}};ym.FSWatcher=Wl;var VV=(e,t)=>{let r=new Wl(t);return r.add(e),r};ym.watch=VV;});var wm=P((Nre,fR)=>{var vu=e=>e&&typeof e.message=="string",Em=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return vu(r)?r:void 0}else return vu(t)?t:void 0},cR=(e,t)=>{if(!vu(e))return "";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=Em(e);return n?(t.add(e),r+`
caused by: `+cR(n,t)):r},zV=e=>cR(e,new Set),lR=(e,t,r)=>{if(!vu(e))return "";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=Em(e);if(i){t.add(e);let s=typeof e.cause=="function";return n+(s?"":": ")+lR(i,t,s)}else return n},GV=e=>lR(e,new Set);fR.exports={isErrorLike:vu,getErrorCause:Em,stackWithCauses:zV,messageWithCauses:GV};});var Cm=P((Dre,hR)=>{var YV=Symbol("circular-ref-tag"),Kl=Symbol("pino-raw-err-ref"),dR=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Kl]},set:function(e){this[Kl]=e;}}});Object.defineProperty(dR,Kl,{writable:!0,value:{}});hR.exports={pinoErrProto:dR,pinoErrorSymbols:{seen:YV,rawSymbol:Kl}};});var mR=P((kre,gR)=>{gR.exports=Tm;var{messageWithCauses:QV,stackWithCauses:ZV,isErrorLike:pR}=wm(),{pinoErrProto:XV,pinoErrorSymbols:JV}=Cm(),{seen:xm}=JV,{toString:eH}=Object.prototype;function Tm(e){if(!pR(e))return e;e[xm]=void 0;let t=Object.create(XV);t.type=eH.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=QV(e),t.stack=ZV(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Tm(r)));for(let r in e)if(t[r]===void 0){let n=e[r];pR(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,xm)&&(t[r]=Tm(n)):t[r]=n;}return delete e[xm],t.raw=e,t}});var _R=P((Ore,yR)=>{yR.exports=Gl;var{isErrorLike:Am}=wm(),{pinoErrProto:tH,pinoErrorSymbols:rH}=Cm(),{seen:zl}=rH,{toString:nH}=Object.prototype;function Gl(e){if(!Am(e))return e;e[zl]=void 0;let t=Object.create(tH);t.type=nH.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Gl(r))),Am(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,zl)&&(t.cause=Gl(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Am(n)?Object.prototype.hasOwnProperty.call(n,zl)||(t[r]=Gl(n)):t[r]=n;}return delete e[zl],t.raw=e,t}});var ER=P((Bre,SR)=>{SR.exports={mapHttpRequest:iH,reqSerializer:bR};var Rm=Symbol("pino-raw-req-ref"),vR=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Rm]},set:function(e){this[Rm]=e;}}});Object.defineProperty(vR,Rm,{writable:!0,value:{}});function bR(e){let t=e.info||e.socket,r=Object.create(vR);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else {let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0;}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function iH(e){return {req:bR(e)}}});var TR=P((Lre,xR)=>{xR.exports={mapHttpResponse:sH,resSerializer:CR};var Im=Symbol("pino-raw-res-ref"),wR=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Im]},set:function(e){this[Im]=e;}}});Object.defineProperty(wR,Im,{writable:!0,value:{}});function CR(e){let t=Object.create(wR);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function sH(e){return {res:CR(e)}}});var Nm=P((Fre,AR)=>{var Pm=mR(),aH=_R(),Yl=ER(),Ql=TR();AR.exports={err:Pm,errWithCause:aH,mapHttpRequest:Yl.mapHttpRequest,mapHttpResponse:Ql.mapHttpResponse,req:Yl.reqSerializer,res:Ql.resSerializer,wrapErrorSerializer:function(t){return t===Pm?t:function(n){return t(Pm(n))}},wrapRequestSerializer:function(t){return t===Yl.reqSerializer?t:function(n){return t(Yl.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===Ql.resSerializer?t:function(n){return t(Ql.resSerializer(n))}}};});var Dm=P((Mre,RR)=>{function oH(e,t){return t}RR.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=oH;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)s&&i.push(s.getFileName());return i};});var PR=P((qre,IR)=>{IR.exports=uH;function uH(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(t());try{if(//.test(s))throw Error();let a=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${a}
            if ([o${a}].length !== 1) throw Error()`)();}catch{throw Error(r(s))}});}}});var Zl=P((Ure,NR)=>{NR.exports=/[^.[\]]+|\[((?:.)*?)\]/g;});var kR=P(($re,DR)=>{var cH=Zl();DR.exports=lH;function lH({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,s,a){var o=s.match(cH).map(u=>u.replace(/'|"|`/g,""));let c=s[0]==="[";o=o.map(u=>u[0]==="["?u.substr(1,u.length-2):u);let l=o.indexOf("*");if(l>-1){let u=o.slice(0,l),f=u.join("."),h=o.slice(l+1,o.length),p=h.length>0;r++,t.push({before:u,beforeStr:f,after:h,nested:p});}else i[s]={path:o,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:c};return i},{});return {wildcards:t,wcLen:r,secret:n}}});var BR=P((jre,OR)=>{var fH=Zl();OR.exports=dH;function dH({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},a){let o=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${mH(n,t)}
    }
    const { censor, secret } = this
    ${hH(e,i,s)}
    this.compileRestore()
    ${pH(r>0,i,s)}
    ${gH(t)}
  `).bind(a);return t===!1&&(o.restore=c=>a.restore(c)),o}function hH(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:s,path:a}=e[n],o=s?1:0,c=s?"":".",l=[];for(var u;(u=fH.exec(n))!==null;){let[,m]=u,{index:v,input:E}=u;v>o&&l.push(E.substring(0,v-(m?0:1)));}var f=l.map(m=>`o${c}${m}`).join(" && ");f.length===0?f+=`o${c}${n} != null`:f+=` && o${c}${n} != null`;let h=`
      switch (true) {
        ${l.reverse().map(m=>`
          case o${c}${m} === censor:
            secret[${i}].circle = ${JSON.stringify(m)}
            break
        `).join(`
`)}
      }
    `,p=r?`val, ${JSON.stringify(a)}`:"val";return `
      if (${f}) {
        const val = o${c}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${c}${n} = ${t?`censor(${p})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function pH(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function gH(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function mH(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Om=P((Vre,MR)=>{MR.exports={groupRedact:_H,groupRestore:yH,nestedRedact:bH,nestedRestore:vH};function yH({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let s=e[i];r[s]=t[i];}}function _H(e,t,r,n,i){let s=LR(e,t);if(s==null)return {keys:null,values:null,target:null,flat:!0};let a=Object.keys(s),o=a.length,c=t.length,l=i?[...t]:void 0,u=new Array(o);for(var f=0;f<o;f++){let h=a[f];u[f]=s[h],i?(l[c]=h,s[h]=r(s[h],l)):n?s[h]=r(s[h]):s[h]=r;}return {keys:a,values:u,target:s,flat:!0}}function vH(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],s=r;for(let a=n.length-1;a>0;a--)s=s[n[a]];s[n[0]]=i;}}function bH(e,t,r,n,i,s,a){let o=LR(t,r);if(o==null)return;let c=Object.keys(o),l=c.length;for(var u=0;u<l;u++){let f=c[u];SH(e,o,f,r,n,i,s,a);}return e}function km(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function SH(e,t,r,n,i,s,a,o){let c=i.length,l=c-1,u=r;var f=-1,h,p,m,E=null,w,y,b=!1,N=0,B=0,V=EH();if(m=h=t[r],typeof h=="object"){for(;h!=null&&++f<c&&(B+=1,r=i[f],!(r!=="*"&&!E&&!(typeof h=="object"&&r in h)));)if(!(r==="*"&&(E==="*"&&(b=!0),E=r,f!==l))){if(E){let z=Object.keys(h);for(var X=0;X<z.length;X++){let G=z[X];if(y=h[G],w=r==="*",b)V=Ri(V,G,B),N=f,m=FR(y,N-1,r,n,i,s,a,o,u,h,p,m,w,G,f,l,V,e,t[u],B+1);else if(w||typeof y=="object"&&y!==null&&r in y){if(w?m=y:m=y[r],p=f!==l?m:a?o?s(m,[...n,u,...i]):s(m):s,w){let ee=bu(Ri(V,G,B),m,t[u]);e.push(ee),h[G]=p;}else if(y[r]!==p)if(p===void 0&&s!==void 0||km(y,r)&&p===m)V=Ri(V,G,B);else {V=Ri(V,G,B);let ee=bu(Ri(V,r,B+1),m,t[u]);e.push(ee),y[r]=p;}}}E=null;}else {if(m=h[r],V=Ri(V,r,B),p=f!==l?m:a?o?s(m,[...n,u,...i]):s(m):s,!(km(h,r)&&p===m||p===void 0&&s!==void 0)){let z=bu(V,m,t[u]);e.push(z),h[r]=p;}h=h[r];}if(typeof h!="object")break}}}function LR(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}function FR(e,t,r,n,i,s,a,o,c,l,u,f,h,p,m,v,E,w,y,b){if(t===0&&(h||typeof e=="object"&&e!==null&&r in e)){if(h?f=e:f=e[r],u=m!==v?f:a?o?s(f,[...n,c,...i]):s(f):s,h){let N=bu(E,f,y);w.push(N),l[p]=u;}else if(e[r]!==u){if(!(u===void 0&&s!==void 0||km(e,r)&&u===f)){let N=bu(Ri(E,r,b+1),f,y);w.push(N),e[r]=u;}}}for(let N in e)typeof e[N]=="object"&&(E=Ri(E,N,b),FR(e[N],t-1,r,n,i,s,a,o,c,l,u,f,h,p,m,v,E,w,y,b+1));}function EH(){return {parent:null,key:null,children:[],depth:0}}function Ri(e,t,r){if(e.depth===r)return Ri(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function bu(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return {path:i,value:t,target:r}}});var UR=P((Hre,qR)=>{var{groupRestore:wH,nestedRestore:CH}=Om();qR.exports=xH;function xH({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=TH(e,n),s=t>0,a=s?{secret:e,groupRestore:wH,nestedRestore:CH}:{secret:e};this.restore=Function("o",AH(i,n,s)).bind(a);}}function TH(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=e[r],o=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,c=`secret[${i}].val = undefined`;return `
      if (secret[${i}].val !== undefined) {
        try { ${o} } catch (e) {}
        ${c}
      }
    `}).join("")}function AH(e,t,r){return `
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var jR=P((Wre,$R)=>{$R.exports=RH;function RH(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:a,wildcards:o,wcLen:c}=e,l=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&l.push({serialize:i}),c>0&&l.push({groupRedact:s,nestedRedact:a,wildcards:o,wcLen:c}),Object.assign(...l)}});var WR=P((Kre,HR)=>{var VR=PR(),IH=kR(),PH=BR(),NH=UR(),{groupRedact:DH,nestedRedact:kH}=Om(),OH=jR(),BH=Zl(),LH=VR(),Bm=e=>e;Bm.restore=Bm;var FH="[REDACTED]";Lm.rx=BH;Lm.validator=VR;HR.exports=Lm;function Lm(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:FH,s=typeof i=="function",a=s&&i.length>1;if(t.length===0)return r||Bm;LH({paths:t,serialize:r,censor:i});let{wildcards:o,wcLen:c,secret:l}=IH({paths:t,censor:i}),u=NH({secret:l,wcLen:c}),f="strict"in e?e.strict:!0;return PH({secret:l,wcLen:c,serialize:r,strict:f,isCensorFct:s,censorFctTakesPath:a},OH({secret:l,censor:i,compileRestore:u,serialize:r,groupRedact:DH,nestedRedact:kH,wildcards:o,wcLen:c}))}});var ja=P((zre,KR)=>{var MH=Symbol("pino.setLevel"),qH=Symbol("pino.getLevel"),UH=Symbol("pino.levelVal"),$H=Symbol("pino.useLevelLabels"),jH=Symbol("pino.useOnlyCustomLevels"),VH=Symbol("pino.mixin"),HH=Symbol("pino.lsCache"),WH=Symbol("pino.chindings"),KH=Symbol("pino.asJson"),zH=Symbol("pino.write"),GH=Symbol("pino.redactFmt"),YH=Symbol("pino.time"),QH=Symbol("pino.timeSliceIndex"),ZH=Symbol("pino.stream"),XH=Symbol("pino.stringify"),JH=Symbol("pino.stringifySafe"),e9=Symbol("pino.stringifiers"),t9=Symbol("pino.end"),r9=Symbol("pino.formatOpts"),n9=Symbol("pino.messageKey"),i9=Symbol("pino.errorKey"),s9=Symbol("pino.nestedKey"),a9=Symbol("pino.nestedKeyStr"),o9=Symbol("pino.mixinMergeStrategy"),u9=Symbol("pino.msgPrefix"),c9=Symbol("pino.wildcardFirst"),l9=Symbol.for("pino.serializers"),f9=Symbol.for("pino.formatters"),d9=Symbol.for("pino.hooks"),h9=Symbol.for("pino.metadata");KR.exports={setLevelSym:MH,getLevelSym:qH,levelValSym:UH,useLevelLabelsSym:$H,mixinSym:VH,lsCacheSym:HH,chindingsSym:WH,asJsonSym:KH,writeSym:zH,serializersSym:l9,redactFmtSym:GH,timeSym:YH,timeSliceIndexSym:QH,streamSym:ZH,stringifySym:XH,stringifySafeSym:JH,stringifiersSym:e9,endSym:t9,formatOptsSym:r9,messageKeySym:n9,errorKeySym:i9,nestedKeySym:s9,wildcardFirstSym:c9,needsMetadataGsym:h9,useOnlyCustomLevelsSym:jH,formattersSym:f9,hooksSym:d9,nestedKeyStrSym:a9,mixinMergeStrategySym:o9,msgPrefixSym:u9};});var qm=P((Gre,QR)=>{var Mm=WR(),{redactFmtSym:p9,wildcardFirstSym:Xl}=ja(),{rx:Fm,validator:g9}=Mm,zR=g9({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),GR="[Redacted]",YR=!1;function m9(e,t){let{paths:r,censor:n}=y9(e),i=r.reduce((o,c)=>{Fm.lastIndex=0;let l=Fm.exec(c),u=Fm.exec(c),f=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(f==="*"&&(f=Xl),u===null)return o[f]=null,o;if(o[f]===null)return o;let{index:h}=u,p=`${c.substr(h,c.length-1)}`;return o[f]=o[f]||[],f!==Xl&&o[f].length===0&&o[f].push(...o[Xl]||[]),f===Xl&&Object.keys(o).forEach(function(m){o[m]&&o[m].push(p);}),o[f].push(p),o},{}),s={[p9]:Mm({paths:r,censor:n,serialize:t,strict:YR})},a=(...o)=>t(typeof n=="function"?n(...o):n);return [...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((o,c)=>{if(i[c]===null)o[c]=l=>a(l,[c]);else {let l=typeof n=="function"?(u,f)=>n(u,[c,...f]):n;o[c]=Mm({paths:i[c],censor:l,serialize:t,strict:YR});}return o},s)}function y9(e){if(Array.isArray(e))return e={paths:e,censor:GR},zR(e),e;let{paths:t,censor:r=GR,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),zR({paths:t,censor:r}),{paths:t,censor:r}}QR.exports=m9;});var XR=P((Yre,ZR)=>{var _9=()=>"",v9=()=>`,"time":${Date.now()}`,b9=()=>`,"time":${Math.round(Date.now()/1e3)}`,S9=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;ZR.exports={nullTime:_9,epochTime:v9,unixTime:b9,isoTime:S9};});var eI=P((Qre,JR)=>{function E9(e){try{return JSON.stringify(e)}catch{return '"[Circular]"'}}JR.exports=w9;function w9(e,t,r){var n=r&&r.stringify||E9,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var a=new Array(s);a[0]=n(e);for(var o=1;o<s;o++)a[o]=n(t[o]);return a.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",u=1-i,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=c||t[u]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[u]),f=p+2,p++;break;case 105:if(u>=c||t[u]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[u])),f=p+2,p++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;f<p&&(l+=e.slice(f,p));var m=typeof t[u];if(m==="string"){l+="'"+t[u]+"'",f=p+2,p++;break}if(m==="function"){l+=t[u].name||"<anonymous>",f=p+2,p++;break}l+=n(t[u]),f=p+2,p++;break;case 115:if(u>=c)break;f<p&&(l+=e.slice(f,p)),l+=String(t[u]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,u--;break}++u;}++p;}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}});var $m=P((Zre,Um)=>{if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r));},e=new Int32Array(new SharedArrayBuffer(4));Um.exports=t;}else {let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");};Um.exports=e;}});var uI=P((Xre,oI)=>{var rr=he("fs"),C9=he("events"),x9=he("util").inherits,tI=he("path"),jm=$m(),Jl=100,ef=Buffer.allocUnsafe(0),T9=16*1024,rI="buffer",nI="utf8";function iI(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(s,a){if(s){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",s);}):t.emit("error",s);return}t.fd=a,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!(t._reopening||t.destroyed)&&(!t._writing&&t._len>t.minLength||t._flushPending)&&t._actualWrite();}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&rr.mkdirSync(tI.dirname(e),{recursive:!0});let s=rr.openSync(e,n,i);r(null,s);}catch(s){throw r(s),s}else t.mkdir?rr.mkdir(tI.dirname(e),{recursive:!0},s=>{if(s)return r(s);rr.open(e,n,i,r);}):rr.open(e,n,i,r);}function Vn(e){if(!(this instanceof Vn))return new Vn(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:s,sync:a,append:o=!0,mkdir:c,retryEAGAIN:l,fsync:u,contentMode:f,mode:h}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||T9,this.sync=a||!1,this.writable=!0,this._fsync=u||!1,this.append=o||!1,this.mode=h,this.retryEAGAIN=l||(()=>!0),this.mkdir=c||!1;let p,m;if(f===rI)this._writingBuf=ef,this.write=I9,this.flush=N9,this.flushSync=k9,this._actualWrite=B9,p=()=>rr.writeSync(this.fd,this._writingBuf),m=()=>rr.write(this.fd,this._writingBuf,this.release);else if(f===void 0||f===nI)this._writingBuf="",this.write=R9,this.flush=P9,this.flushSync=D9,this._actualWrite=O9,p=()=>rr.writeSync(this.fd,this._writingBuf,"utf8"),m=()=>rr.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${nI}" and "${rI}", but passed ${f}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")iI(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(v,E)=>{if(v){if((v.code==="EAGAIN"||v.code==="EBUSY")&&this.retryEAGAIN(v,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{jm(Jl),this.release(void 0,0);}catch(y){this.release(y);}else setTimeout(m,Jl);else this._writing=!1,this.emit("error",v);return}if(this.emit("write",E),this._len-=E,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(E),this._writingBuf.length){if(!this.sync){m();return}try{do{let y=p();this._len-=y,this._writingBuf=this._writingBuf.slice(y);}while(this._writingBuf.length)}catch(y){this.release(y);return}}this._fsync&&rr.fsyncSync(this.fd);let w=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):w>this.minLength?this._actualWrite():this._ending?w>0?this._actualWrite():(this._writing=!1,tf(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(A9,this)):this.emit("drain"));},this.on("newListener",function(v){v==="drain"&&(this._asyncDrainScheduled=!1);});}function A9(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"));}x9(Vn,C9);function sI(e,t){return e.length===0?ef:e.length===1?e[0]:Buffer.concat(e,t)}function R9(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function I9(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function aI(e){this._flushPending=!0;let t=()=>{this._fsync?(this._flushPending=!1,e()):rr.fsync(this.fd,n=>{this._flushPending=!1,e(n);}),this.off("error",r);},r=n=>{this._flushPending=!1,e(n),this.off("drain",t);};this.once("drain",t),this.once("error",r);}function P9(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&aI.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite());}function N9(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&aI.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite());}Vn.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e);});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&rr.close(t,r=>{if(r)return this.emit("error",r)});}),iI(e||this.file,this);};Vn.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end();});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():tf(this)));};function D9(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=rr.writeSync(this.fd,e,"utf8");e=e.slice(t),this._len=Math.max(this._len-t,0),e.length<=0&&this._bufs.shift();}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;jm(Jl);}}try{rr.fsyncSync(this.fd);}catch{}}function k9(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ef);let e=ef;for(;this._bufs.length||e.length;){e.length<=0&&(e=sI(this._bufs[0],this._lens[0]));try{let t=rr.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift());}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;jm(Jl);}}}Vn.prototype.destroy=function(){this.destroyed||tf(this);};function O9(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=rr.writeSync(this.fd,this._writingBuf,"utf8");e(null,t);}catch(t){e(t);}else rr.write(this.fd,this._writingBuf,"utf8",e);}function B9(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:sI(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=rr.writeSync(this.fd,this._writingBuf);e(null,t);}catch(t){e(t);}else rr.write(this.fd,this._writingBuf,e);}function tf(e){if(e.fd===-1){e.once("ready",tf.bind(null,e));return}e.destroyed=!0,e._bufs=[],e._lens=[],rr.fsync(e.fd,t);function t(){e.fd!==1&&e.fd!==2?rr.close(e.fd,r):r();}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close");}}Vn.SonicBoom=Vn;Vn.default=Vn;oI.exports=Vn;});var Vm=P((Jre,hI)=>{var Hn={exit:[],beforeExit:[]},cI={exit:M9,beforeExit:q9},Va;function L9(){Va===void 0&&(Va=new FinalizationRegistry(U9));}function F9(e){Hn[e].length>0||process.on(e,cI[e]);}function lI(e){Hn[e].length>0||(process.removeListener(e,cI[e]),Hn.exit.length===0&&Hn.beforeExit.length===0&&(Va=void 0));}function M9(){fI("exit");}function q9(){fI("beforeExit");}function fI(e){for(let t of Hn[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e);}Hn[e]=[];}function U9(e){for(let t of ["exit","beforeExit"]){let r=Hn[t].indexOf(e);Hn[t].splice(r,r+1),lI(t);}}function dI(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");F9(e);let n=new WeakRef(t);n.fn=r,L9(),Va.register(t,n),Hn[e].push(n);}function $9(e,t){dI("exit",e,t);}function j9(e,t){dI("beforeExit",e,t);}function V9(e){if(Va!==void 0){Va.unregister(e);for(let t of ["exit","beforeExit"])Hn[t]=Hn[t].filter(r=>{let n=r.deref();return n&&n!==e}),lI(t);}}hI.exports={register:$9,registerBeforeExit:j9,unregister:V9};});var pI=P((ene,H9)=>{H9.exports={name:"thread-stream",version:"2.4.1",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","pino-elasticsearch":"^6.0.0","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"};});var mI=P((tne,gI)=>{function W9(e,t,r,n,i){let s=Date.now()+n,a=Atomics.load(e,t);if(a===r){i(null,"ok");return}let o=a,c=l=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{o=a,a=Atomics.load(e,t),a===o?c(l>=1e3?1e3:l*2):a===r?i(null,"ok"):i(null,"not-equal");},l);};c(1);}function K9(e,t,r,n,i){let s=Date.now()+n,a=Atomics.load(e,t);if(a!==r){i(null,"ok");return}let o=c=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{a=Atomics.load(e,t),a!==r?i(null,"ok"):o(c>=1e3?1e3:c*2);},c);};o(1);}gI.exports={wait:W9,waitDiff:K9};});var _I=P((rne,yI)=>{yI.exports={WRITE_INDEX:4,READ_INDEX:8};});var wI=P((nne,EI)=>{var{version:z9}=pI(),{EventEmitter:G9}=he("events"),{Worker:Y9}=he("worker_threads"),{join:Q9}=he("path"),{pathToFileURL:Z9}=he("url"),{wait:X9}=mI(),{WRITE_INDEX:Yr,READ_INDEX:ni}=_I(),J9=he("buffer"),eW=he("assert"),ue=Symbol("kImpl"),tW=J9.constants.MAX_STRING_LENGTH,Su=class{constructor(t){this._value=t;}deref(){return this._value}},nf=class{register(){}unregister(){}},rW=process.env.NODE_V8_COVERAGE?nf:global.FinalizationRegistry||nf,nW=process.env.NODE_V8_COVERAGE?Su:global.WeakRef||Su,vI=new rW(e=>{e.exited||e.terminate();});function iW(e,t){let{filename:r,workerData:n}=t,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Q9(__dirname,"lib","worker.js"),a=new Y9(s,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:Z9(r).href,dataBuf:e[ue].dataBuf,stateBuf:e[ue].stateBuf,workerData:{$context:{threadStreamVersion:z9},...n}}});return a.stream=new Su(e),a.on("message",sW),a.on("exit",SI),vI.register(e,a),a}function bI(e){eW(!e[ue].sync),e[ue].needDrain&&(e[ue].needDrain=!1,e.emit("drain"));}function rf(e){let t=Atomics.load(e[ue].state,Yr),r=e[ue].data.length-t;if(r>0){if(e[ue].buf.length===0){e[ue].flushing=!1,e[ue].ending?Gm(e):e[ue].needDrain&&process.nextTick(bI,e);return}let n=e[ue].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[ue].buf=e[ue].buf.slice(r),sf(e,n,rf.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Yr,0);i>e[ue].data.length;)r=r/2,n=e[ue].buf.slice(0,r),i=Buffer.byteLength(n);e[ue].buf=e[ue].buf.slice(r),sf(e,n,rf.bind(null,e));}});}else if(r===0){if(t===0&&e[ue].buf.length===0)return;e.flush(()=>{Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Yr,0),rf(e);});}else ii(e,new Error("overwritten"));}function sW(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new nW(t),t.flush(()=>{t[ue].ready=!0,t.emit("ready");});break;case"ERROR":ii(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:ii(t,new Error("this should not happen: "+e.code));}}function SI(e){let t=this.stream.deref();t!==void 0&&(vI.unregister(t),t.worker.exited=!0,t.worker.off("exit",SI),ii(t,e!==0?new Error("the worker thread exited"):null));}var Wm=class extends G9{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[ue]={},this[ue].stateBuf=new SharedArrayBuffer(128),this[ue].state=new Int32Array(this[ue].stateBuf),this[ue].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[ue].data=Buffer.from(this[ue].dataBuf),this[ue].sync=t.sync||!1,this[ue].ending=!1,this[ue].ended=!1,this[ue].needDrain=!1,this[ue].destroyed=!1,this[ue].flushing=!1,this[ue].ready=!1,this[ue].finished=!1,this[ue].errored=null,this[ue].closed=!1,this[ue].buf="",this.worker=iW(this,t);}write(t){if(this[ue].destroyed)return Km(this,new Error("the worker has exited")),!1;if(this[ue].ending)return Km(this,new Error("the worker is ending")),!1;if(this[ue].flushing&&this[ue].buf.length+t.length>=tW)try{Hm(this),this[ue].flushing=!0;}catch(r){return ii(this,r),!1}if(this[ue].buf+=t,this[ue].sync)try{return Hm(this),!0}catch(r){return ii(this,r),!1}return this[ue].flushing||(this[ue].flushing=!0,setImmediate(rf,this)),this[ue].needDrain=this[ue].data.length-this[ue].buf.length-Atomics.load(this[ue].state,Yr)<=0,!this[ue].needDrain}end(){this[ue].destroyed||(this[ue].ending=!0,Gm(this));}flush(t){if(this[ue].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[ue].state,Yr);X9(this[ue].state,ni,r,1/0,(n,i)=>{if(n){ii(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t);});}flushSync(){this[ue].destroyed||(Hm(this),zm(this));}unref(){this.worker.unref();}ref(){this.worker.ref();}get ready(){return this[ue].ready}get destroyed(){return this[ue].destroyed}get closed(){return this[ue].closed}get writable(){return !this[ue].destroyed&&!this[ue].ending}get writableEnded(){return this[ue].ending}get writableFinished(){return this[ue].finished}get writableNeedDrain(){return this[ue].needDrain}get writableObjectMode(){return !1}get writableErrored(){return this[ue].errored}};function Km(e,t){setImmediate(()=>{e.emit("error",t);});}function ii(e,t){e[ue].destroyed||(e[ue].destroyed=!0,t&&(e[ue].errored=t,Km(e,t)),e.worker.exited?setImmediate(()=>{e[ue].closed=!0,e.emit("close");}):e.worker.terminate().catch(()=>{}).then(()=>{e[ue].closed=!0,e.emit("close");}));}function sf(e,t,r){let n=Atomics.load(e[ue].state,Yr),i=Buffer.byteLength(t);return e[ue].data.write(t,n),Atomics.store(e[ue].state,Yr,n+i),Atomics.notify(e[ue].state,Yr),r(),!0}function Gm(e){if(!(e[ue].ended||!e[ue].ending||e[ue].flushing)){e[ue].ended=!0;try{e.flushSync();let t=Atomics.load(e[ue].state,ni);Atomics.store(e[ue].state,Yr,-1),Atomics.notify(e[ue].state,Yr);let r=0;for(;t!==-1;){if(Atomics.wait(e[ue].state,ni,t,1e3),t=Atomics.load(e[ue].state,ni),t===-2){ii(e,new Error("end() failed"));return}if(++r===10){ii(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[ue].finished=!0,e.emit("finish");});}catch(t){ii(e,t);}}}function Hm(e){let t=()=>{e[ue].ending?Gm(e):e[ue].needDrain&&process.nextTick(bI,e);};for(e[ue].flushing=!1;e[ue].buf.length!==0;){let r=Atomics.load(e[ue].state,Yr),n=e[ue].data.length-r;if(n===0){zm(e),Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Yr,0);continue}else if(n<0)throw new Error("overwritten");let i=e[ue].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)e[ue].buf=e[ue].buf.slice(n),sf(e,i,t);else {for(zm(e),Atomics.store(e[ue].state,ni,0),Atomics.store(e[ue].state,Yr,0);s>e[ue].buf.length;)n=n/2,i=e[ue].buf.slice(0,n),s=Buffer.byteLength(i);e[ue].buf=e[ue].buf.slice(n),sf(e,i,t);}}}function zm(e){if(e[ue].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[ue].state,Yr),r=0;for(;;){let n=Atomics.load(e[ue].state,ni);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[ue].state,ni,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}EI.exports=Wm;});var Zm=P((ine,CI)=>{var{createRequire:aW}=he("module"),oW=Dm(),{join:Ym,isAbsolute:uW,sep:cW}=he("path"),lW=$m(),Qm=Vm(),fW=wI();function dW(e){Qm.register(e,pW),Qm.registerBeforeExit(e,gW),e.on("close",function(){Qm.unregister(e);});}function hW(e,t,r){let n=new fW({filename:e,workerData:t,workerOpts:r});n.on("ready",i),n.on("close",function(){process.removeListener("exit",s);}),process.on("exit",s);function i(){process.removeListener("exit",s),n.unref(),r.autoEnd!==!1&&dW(n);}function s(){n.closed||(n.flushSync(),lW(100),n.end());}return n}function pW(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref();});}function gW(e){e.flushSync();}function mW(e){let{pipeline:t,targets:r,levels:n,dedupe:i,options:s={},worker:a={},caller:o=oW()}=e,c=typeof o=="string"?[o]:o,l="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},u=e.target;if(u&&r)throw new Error("only one of target or targets can be specified");return r?(u=l["pino-worker"]||Ym(__dirname,"worker.js"),s.targets=r.map(h=>({...h,target:f(h.target)}))):t&&(u=l["pino-pipeline-worker"]||Ym(__dirname,"worker-pipeline.js"),s.targets=t.map(h=>({...h,target:f(h.target)}))),n&&(s.levels=n),i&&(s.dedupe=i),hW(f(u),s,a);function f(h){if(h=l[h]||h,uW(h)||h.indexOf("file://")===0)return h;if(h==="pino/file")return Ym(__dirname,"..","file.js");let p;for(let m of c)try{let v=m==="node:repl"?process.cwd()+cW:m;p=aW(v).resolve(h);break}catch{continue}if(!p)throw new Error(`unable to determine transport target for "${h}"`);return p}}CI.exports=mW;});var uf=P((sne,BI)=>{var xI=eI(),{mapHttpRequest:yW,mapHttpResponse:_W}=Nm(),Jm=uI(),TI=Vm(),{lsCacheSym:vW,chindingsSym:II,writeSym:AI,serializersSym:PI,formatOptsSym:RI,endSym:bW,stringifiersSym:NI,stringifySym:DI,stringifySafeSym:e0,wildcardFirstSym:kI,nestedKeySym:SW,formattersSym:OI,messageKeySym:EW,errorKeySym:wW,nestedKeyStrSym:CW,msgPrefixSym:af}=ja(),{isMainThread:xW}=he("worker_threads"),TW=Zm();function Ha(){}function AW(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e);};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=yW(n):typeof n.setHeader=="function"&&(n=_W(n)));let a;s===null&&i.length===0?a=[null]:(s=i.shift(),a=i),typeof this[af]=="string"&&s!==void 0&&s!==null&&(s=this[af]+s),this[AI](n,xI(s,a,this[RI]),e);}else {let s=n===void 0?i.shift():n;typeof this[af]=="string"&&s!==void 0&&s!==null&&(s=this[af]+s),this[AI](null,xI(s,i,this[RI]),e);}}}function Xm(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var a=0;a<s&&i>=32;a++)i=e.charCodeAt(a),(i===34||i===92)&&(t+=e.slice(r,a)+"\\",r=a,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function RW(e,t,r,n){let i=this[DI],s=this[e0],a=this[NI],o=this[bW],c=this[II],l=this[PI],u=this[OI],f=this[EW],h=this[wW],p=this[vW][r]+n;p=p+c;let m;u.log&&(e=u.log(e));let v=a[kI],E="";for(let y in e)if(m=e[y],Object.prototype.hasOwnProperty.call(e,y)&&m!==void 0){l[y]?m=l[y](m):y===h&&l.err&&(m=l.err(m));let b=a[y]||v;switch(typeof m){case"undefined":case"function":continue;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":b&&(m=b(m));break;case"string":m=(b||Xm)(m);break;default:m=(b||i)(m,s);}if(m===void 0)continue;let N=Xm(y);E+=","+N+":"+m;}let w="";if(t!==void 0){m=l[f]?l[f](t):t;let y=a[f]||v;switch(typeof m){case"function":break;case"number":Number.isFinite(m)===!1&&(m=null);case"boolean":y&&(m=y(m)),w=',"'+f+'":'+m;break;case"string":m=(y||Xm)(m),w=',"'+f+'":'+m;break;default:m=(y||i)(m,s),w=',"'+f+'":'+m;}}return this[SW]&&E?p+this[CW]+E.slice(1)+"}"+w+o:p+E+w+o}function IW(e,t){let r,n=e[II],i=e[DI],s=e[e0],a=e[NI],o=a[kI],c=e[PI],l=e[OI].bindings;t=l(t);for(let u in t)if(r=t[u],(u!=="level"&&u!=="serializers"&&u!=="formatters"&&u!=="customLevels"&&t.hasOwnProperty(u)&&r!==void 0)===!0){if(r=c[u]?c[u](r):r,r=(a[u]||o||i)(r,s),r===void 0)continue;n+=',"'+u+'":'+r;}return n}function PW(e){return e.write!==e.constructor.prototype.write}var NW=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function of(e){let t=new Jm(e);return t.on("error",r),!NW&&!e.sync&&xW&&(TI.register(t,DW),t.on("close",function(){TI.unregister(t);})),t;function r(n){if(n.code==="EPIPE"){t.write=Ha,t.end=Ha,t.flushSync=Ha,t.destroy=Ha;return}t.removeListener("error",r),t.emit("error",n);}}function DW(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end();})):e.flushSync());}function kW(e){return function(r,n,i={},s){if(typeof i=="string")s=of({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=of({dest:s});}else if(i instanceof Jm||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof Jm||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let c;i.customLevels&&(c=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=TW({caller:n,...i.transport,levels:c});}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:a,onChild:o}=i;return a===!1&&(i.level="silent"),o||(i.onChild=Ha),s||(PW(process.stdout)?s=process.stdout:s=of({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function OW(e,t){try{return JSON.stringify(e)}catch{try{return (t||this[e0])(e)}catch{return '"[unable to serialize, circular reference is too complex to analyze]"'}}}function BW(e,t,r){return {level:e,bindings:t,log:r}}function LW(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}BI.exports={noop:Ha,buildSafeSonicBoom:of,asChindings:IW,asJson:RW,genLog:AW,createArgsNormalizer:kW,stringify:OW,buildFormatters:BW,normalizeDestFileDescriptor:LW};});var cf=P((ane,FI)=>{var{lsCacheSym:FW,levelValSym:t0,useOnlyCustomLevelsSym:MW,streamSym:qW,formattersSym:UW,hooksSym:$W}=ja(),{noop:jW,genLog:Vs}=uf(),Wn={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},LI={fatal:e=>{let t=Vs(Wn.fatal,e);return function(...r){let n=this[qW];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync();}catch{}}},error:e=>Vs(Wn.error,e),warn:e=>Vs(Wn.warn,e),info:e=>Vs(Wn.info,e),debug:e=>Vs(Wn.debug,e),trace:e=>Vs(Wn.trace,e)},r0=Object.keys(Wn).reduce((e,t)=>(e[Wn[t]]=t,e),{}),VW=Object.keys(r0).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function HW(e){let t=e[UW].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1);}return e[FW]=n,e}function WW(e,t){if(t)return !1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return !0;default:return !1}}function KW(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e];}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[t0],i=this[t0]=r[e],s=this[MW],a=this[$W].logMethod;for(let o in r){if(i>r[o]){this[o]=jW;continue}this[o]=WW(o,s)?LI[o](a):Vs(r[o],a);}this.emit("level-change",e,i,t[n],n,this);}function zW(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function GW(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[t0]}function YW(e=null,t=!1){let r=e?Object.keys(e).reduce((s,a)=>(s[e[a]]=a,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:r0,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:Wn,e);return {labels:n,values:i}}function QW(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(r0).map(s=>+s),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:Wn,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function ZW(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}FI.exports={initialLsCache:VW,genLsCache:HW,levelMethods:LI,getLevel:zW,setLevel:KW,isLevelEnabled:GW,mappings:YW,levels:Wn,assertNoLevelCollisions:ZW,assertDefaultLevelFound:QW};});var n0=P((one,MI)=>{MI.exports={version:"8.17.1"};});var YI=P((cne,GI)=>{var{EventEmitter:XW}=he("events"),{lsCacheSym:JW,levelValSym:eK,setLevelSym:s0,getLevelSym:qI,chindingsSym:a0,parsedChindingsSym:tK,mixinSym:rK,asJsonSym:HI,writeSym:nK,mixinMergeStrategySym:iK,timeSym:sK,timeSliceIndexSym:aK,streamSym:WI,serializersSym:Hs,formattersSym:i0,errorKeySym:oK,messageKeySym:uK,useOnlyCustomLevelsSym:cK,needsMetadataGsym:lK,redactFmtSym:fK,stringifySym:dK,formatOptsSym:hK,stringifiersSym:pK,msgPrefixSym:UI}=ja(),{getLevel:gK,setLevel:mK,isLevelEnabled:yK,mappings:_K,initialLsCache:vK,genLsCache:bK,assertNoLevelCollisions:SK}=cf(),{asChindings:KI,asJson:EK,buildFormatters:$I,stringify:jI}=uf(),{version:wK}=n0(),CK=qm(),xK=class{},zI={constructor:xK,child:TK,bindings:AK,setBindings:RK,flush:DK,isLevelEnabled:yK,version:wK,get level(){return this[qI]()},set level(e){this[s0](e);},get levelVal(){return this[eK]},set levelVal(e){throw Error("levelVal is read-only")},[JW]:vK,[nK]:PK,[HI]:EK,[qI]:gK,[s0]:mK};Object.setPrototypeOf(zI,XW.prototype);GI.exports=function(){return Object.create(zI)};var VI=e=>e;function TK(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Hs],n=this[i0],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[Hs]=Object.create(null);for(let u in r)i[Hs][u]=r[u];let c=Object.getOwnPropertySymbols(r);for(var s=0;s<c.length;s++){let u=c[s];i[Hs][u]=r[u];}for(let u in t.serializers)i[Hs][u]=t.serializers[u];let l=Object.getOwnPropertySymbols(t.serializers);for(var a=0;a<l.length;a++){let u=l[a];i[Hs][u]=t.serializers[u];}}else i[Hs]=r;if(t.hasOwnProperty("formatters")){let{level:c,bindings:l,log:u}=t.formatters;i[i0]=$I(c||n.level,l||VI,u||n.log);}else i[i0]=$I(n.level,VI,n.log);if(t.hasOwnProperty("customLevels")===!0&&(SK(this.levels,t.customLevels),i.levels=_K(t.customLevels,i[cK]),bK(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let c=CK(i.redact,jI),l={stringify:c[fK]};i[dK]=jI,i[pK]=c,i[hK]=l;}typeof t.msgPrefix=="string"&&(i[UI]=(this[UI]||"")+t.msgPrefix),i[a0]=KI(i,e);let o=t.level||this.level;return i[s0](o),this.onChild(i),i}function AK(){let t=`{${this[a0].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function RK(e){let t=KI(this,e);this[a0]=t,delete this[tK];}function IK(e,t){return Object.assign(t,e)}function PK(e,t,r){let n=this[sK](),i=this[rK],s=this[oK],a=this[uK],o=this[iK]||IK,c;e==null?c={}:e instanceof Error?(c={[s]:e},t===void 0&&(t=e.message)):(c=e,t===void 0&&e[a]===void 0&&e[s]&&(t=e[s].message)),i&&(c=o(c,i(c,r,this)));let l=this[HI](c,t,r,n),u=this[WI];u[lK]===!0&&(u.lastLevel=r,u.lastObj=c,u.lastMsg=t,u.lastTime=n.slice(this[aK]),u.lastLogger=this),u.write(l);}function NK(){}function DK(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[WI];typeof t.flush=="function"?t.flush(e||NK):e&&e();}});var e2=P((l0,JI)=>{var{hasOwnProperty:lf}=Object.prototype,Ks=c0();Ks.configure=c0;Ks.stringify=Ks;Ks.default=Ks;l0.stringify=Ks;l0.configure=c0;JI.exports=Ks;var kK=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function Xi(e){return e.length<5e3&&!kK.test(e)?`"${e}"`:JSON.stringify(e)}function o0(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r;}return e}var OK=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function u0(e){return OK.call(e)!==void 0&&e.length!==0}function QI(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function BK(e){if(lf.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return `"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return {toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return '"[Circular]"'}function ZI(e,t){let r;if(lf.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function XI(e,t){let r;if(lf.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Ws(e){return e===1?"1 item":`${e} items`}function LK(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function FK(e){if(lf.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function c0(e){e={...e};let t=FK(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=BK(e),n=ZI(e,"bigint"),i=ZI(e,"deterministic"),s=XI(e,"maximumDepth"),a=XI(e,"maximumBreadth");function o(h,p,m,v,E,w){let y=p[h];switch(typeof y=="object"&&y!==null&&typeof y.toJSON=="function"&&(y=y.toJSON(h)),y=v.call(p,h,y),typeof y){case"string":return Xi(y);case"object":{if(y===null)return "null";if(m.indexOf(y)!==-1)return r;let b="",N=",",B=w;if(Array.isArray(y)){if(y.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(y),E!==""&&(w+=E,b+=`
${w}`,N=`,
${w}`);let U=Math.min(y.length,a),ie=0;for(;ie<U-1;ie++){let Pe=o(String(ie),y,m,v,E,w);b+=Pe!==void 0?Pe:"null",b+=N;}let me=o(String(ie),y,m,v,E,w);if(b+=me!==void 0?me:"null",y.length-1>a){let Pe=y.length-a-1;b+=`${N}"... ${Ws(Pe)} not stringified"`;}return E!==""&&(b+=`
${B}`),m.pop(),`[${b}]`}let V=Object.keys(y),X=V.length;if(X===0)return "{}";if(s<m.length+1)return '"[Object]"';let z="",G="";E!==""&&(w+=E,N=`,
${w}`,z=" ");let ee=Math.min(X,a);i&&!u0(y)&&(V=o0(V)),m.push(y);for(let U=0;U<ee;U++){let ie=V[U],me=o(ie,y,m,v,E,w);me!==void 0&&(b+=`${G}${Xi(ie)}:${z}${me}`,G=N);}if(X>a){let U=X-a;b+=`${G}"...":${z}"${Ws(U)} not stringified"`,G=N;}return E!==""&&G.length>1&&(b=`
${w}${b}
${B}`),m.pop(),`{${b}}`}case"number":return isFinite(y)?String(y):t?t(y):"null";case"boolean":return y===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(y);default:return t?t(y):void 0}}function c(h,p,m,v,E,w){switch(typeof p=="object"&&p!==null&&typeof p.toJSON=="function"&&(p=p.toJSON(h)),typeof p){case"string":return Xi(p);case"object":{if(p===null)return "null";if(m.indexOf(p)!==-1)return r;let y=w,b="",N=",";if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p),E!==""&&(w+=E,b+=`
${w}`,N=`,
${w}`);let X=Math.min(p.length,a),z=0;for(;z<X-1;z++){let ee=c(String(z),p[z],m,v,E,w);b+=ee!==void 0?ee:"null",b+=N;}let G=c(String(z),p[z],m,v,E,w);if(b+=G!==void 0?G:"null",p.length-1>a){let ee=p.length-a-1;b+=`${N}"... ${Ws(ee)} not stringified"`;}return E!==""&&(b+=`
${y}`),m.pop(),`[${b}]`}m.push(p);let B="";E!==""&&(w+=E,N=`,
${w}`,B=" ");let V="";for(let X of v){let z=c(X,p[X],m,v,E,w);z!==void 0&&(b+=`${V}${Xi(X)}:${B}${z}`,V=N);}return E!==""&&V.length>1&&(b=`
${w}${b}
${y}`),m.pop(),`{${b}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function l(h,p,m,v,E){switch(typeof p){case"string":return Xi(p);case"object":{if(p===null)return "null";if(typeof p.toJSON=="function"){if(p=p.toJSON(h),typeof p!="object")return l(h,p,m,v,E);if(p===null)return "null"}if(m.indexOf(p)!==-1)return r;let w=E;if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p),E+=v;let z=`
${E}`,G=`,
${E}`,ee=Math.min(p.length,a),U=0;for(;U<ee-1;U++){let me=l(String(U),p[U],m,v,E);z+=me!==void 0?me:"null",z+=G;}let ie=l(String(U),p[U],m,v,E);if(z+=ie!==void 0?ie:"null",p.length-1>a){let me=p.length-a-1;z+=`${G}"... ${Ws(me)} not stringified"`;}return z+=`
${w}`,m.pop(),`[${z}]`}let y=Object.keys(p),b=y.length;if(b===0)return "{}";if(s<m.length+1)return '"[Object]"';E+=v;let N=`,
${E}`,B="",V="",X=Math.min(b,a);u0(p)&&(B+=QI(p,N,a),y=y.slice(p.length),X-=p.length,V=N),i&&(y=o0(y)),m.push(p);for(let z=0;z<X;z++){let G=y[z],ee=l(G,p[G],m,v,E);ee!==void 0&&(B+=`${V}${Xi(G)}: ${ee}`,V=N);}if(b>a){let z=b-a;B+=`${V}"...": "${Ws(z)} not stringified"`,V=N;}return V!==""&&(B=`
${E}${B}
${w}`),m.pop(),`{${B}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function u(h,p,m){switch(typeof p){case"string":return Xi(p);case"object":{if(p===null)return "null";if(typeof p.toJSON=="function"){if(p=p.toJSON(h),typeof p!="object")return u(h,p,m);if(p===null)return "null"}if(m.indexOf(p)!==-1)return r;let v="";if(Array.isArray(p)){if(p.length===0)return "[]";if(s<m.length+1)return '"[Array]"';m.push(p);let N=Math.min(p.length,a),B=0;for(;B<N-1;B++){let X=u(String(B),p[B],m);v+=X!==void 0?X:"null",v+=",";}let V=u(String(B),p[B],m);if(v+=V!==void 0?V:"null",p.length-1>a){let X=p.length-a-1;v+=`,"... ${Ws(X)} not stringified"`;}return m.pop(),`[${v}]`}let E=Object.keys(p),w=E.length;if(w===0)return "{}";if(s<m.length+1)return '"[Object]"';let y="",b=Math.min(w,a);u0(p)&&(v+=QI(p,",",a),E=E.slice(p.length),b-=p.length,y=","),i&&(E=o0(E)),m.push(p);for(let N=0;N<b;N++){let B=E[N],V=u(B,p[B],m);V!==void 0&&(v+=`${y}${Xi(B)}:${V}`,y=",");}if(w>a){let N=w-a;v+=`${y}"...":"${Ws(N)} not stringified"`;}return m.pop(),`{${v}}`}case"number":return isFinite(p)?String(p):t?t(p):"null";case"boolean":return p===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(p);default:return t?t(p):void 0}}function f(h,p,m){if(arguments.length>1){let v="";if(typeof m=="number"?v=" ".repeat(Math.min(m,10)):typeof m=="string"&&(v=m.slice(0,10)),p!=null){if(typeof p=="function")return o("",{"":h},[],p,v,"");if(Array.isArray(p))return c("",h,[],LK(p),v,"")}if(v.length!==0)return l("",h,[],v,"")}return u("",h,[])}return f}});var n2=P((lne,r2)=>{var f0=Symbol.for("pino.metadata"),{levels:t2}=cf(),MK=t2.info;function qK(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(t2);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(u=>{n[u]=t.levels[u];});let i={write:s,add:o,flushSync:a,end:c,minLevel:0,streams:[],clone:l,[f0]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(o,i):o.call(i,e),e=null,i;function s(u){let f,h=this.lastLevel,{streams:p}=this,m=0,v;for(let E=$K(p.length,t.dedupe);VK(E,p.length,t.dedupe);E=jK(E,t.dedupe))if(f=p[E],f.level<=h){if(m!==0&&m!==f.level)break;if(v=f.stream,v[f0]){let{lastTime:w,lastMsg:y,lastObj:b,lastLogger:N}=this;v.lastLevel=h,v.lastTime=w,v.lastMsg=y,v.lastObj=b,v.lastLogger=N;}v.write(u),t.dedupe&&(m=f.level);}else if(!t.dedupe)break}function a(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync();}function o(u){if(!u)return i;let f=typeof u.write=="function"||u.stream,h=u.write?u:u.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:p,streamLevels:m}=this,v;typeof u.levelVal=="number"?v=u.levelVal:typeof u.level=="string"?v=m[u.level]:typeof u.level=="number"?v=u.level:v=MK;let E={stream:h,level:v,levelVal:void 0,id:r++};return p.unshift(E),p.sort(UK),this.minLevel=p[0].level,i}function c(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync(),u.end();}function l(u){let f=new Array(this.streams.length);for(let h=0;h<f.length;h++)f[h]={level:u,stream:this.streams[h].stream};return {write:s,add:o,minLevel:u,streams:f,clone:l,flushSync:a,[f0]:!0}}}function UK(e,t){return e.level-t.level}function $K(e,t){return t?e-1:0}function jK(e,t){return t?e-1:e+1}function VK(e,t,r){return r?e>=0:e<t}r2.exports=qK;});var m2=P((fne,Cn)=>{var HK=he("os"),f2=Nm(),WK=Dm(),KK=qm(),d2=XR(),zK=YI(),h2=ja(),{configure:GK}=e2(),{assertDefaultLevelFound:YK,mappings:p2,genLsCache:QK,levels:ZK}=cf(),{createArgsNormalizer:XK,asChindings:JK,buildSafeSonicBoom:i2,buildFormatters:e7,stringify:d0,normalizeDestFileDescriptor:s2,noop:t7}=uf(),{version:r7}=n0(),{chindingsSym:a2,redactFmtSym:n7,serializersSym:o2,timeSym:i7,timeSliceIndexSym:s7,streamSym:a7,stringifySym:u2,stringifySafeSym:h0,stringifiersSym:c2,setLevelSym:o7,endSym:u7,formatOptsSym:c7,messageKeySym:l7,errorKeySym:f7,nestedKeySym:d7,mixinSym:h7,useOnlyCustomLevelsSym:p7,formattersSym:l2,hooksSym:g7,nestedKeyStrSym:m7,mixinMergeStrategySym:y7,msgPrefixSym:_7}=h2,{epochTime:g2,nullTime:v7}=d2,{pid:b7}=process,S7=HK.hostname(),E7=f2.err,w7={level:"info",levels:ZK,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:b7,hostname:S7},serializers:Object.assign(Object.create(null),{err:E7}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return {level:t}}}),hooks:{logMethod:void 0},timestamp:g2,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},C7=XK(w7),x7=Object.assign(Object.create(null),f2);function p0(...e){let t={},{opts:r,stream:n}=C7(t,WK(),...e),{redact:i,crlf:s,serializers:a,timestamp:o,messageKey:c,errorKey:l,nestedKey:u,base:f,name:h,level:p,customLevels:m,mixin:v,mixinMergeStrategy:E,useOnlyCustomLevels:w,formatters:y,hooks:b,depthLimit:N,edgeLimit:B,onChild:V,msgPrefix:X}=r,z=GK({maximumDepth:N,maximumBreadth:B}),G=e7(y.level,y.bindings,y.log),ee=d0.bind({[h0]:z}),U=i?KK(i,ee):{},ie=i?{stringify:U[n7]}:{stringify:ee},me="}"+(s?`\r
`:`
`),Pe=JK.bind(null,{[a2]:"",[o2]:a,[c2]:U,[u2]:d0,[h0]:z,[l2]:G}),W="";f!==null&&(h===void 0?W=Pe(f):W=Pe(Object.assign({},f,{name:h})));let K=o instanceof Function?o:o?g2:v7,se=K().indexOf(":")+1;if(w&&!m)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(v&&typeof v!="function")throw Error(`Unknown mixin type "${typeof v}" - expected "function"`);if(X&&typeof X!="string")throw Error(`Unknown msgPrefix type "${typeof X}" - expected "string"`);YK(p,m,w);let Ae=p2(m,w);return Object.assign(t,{levels:Ae,[p7]:w,[a7]:n,[i7]:K,[s7]:se,[u2]:d0,[h0]:z,[c2]:U,[u7]:me,[c7]:ie,[l7]:c,[f7]:l,[d7]:u,[m7]:u?`,${JSON.stringify(u)}:{`:"",[o2]:a,[h7]:v,[y7]:E,[a2]:W,[l2]:G,[g7]:b,silent:t7,onChild:V,[_7]:X}),Object.setPrototypeOf(t,zK()),QK(t),t[o7](p),t}Cn.exports=p0;Cn.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=s2(e.dest||process.stdout.fd),i2(e)):i2({dest:s2(e),minLength:0});Cn.exports.transport=Zm();Cn.exports.multistream=n2();Cn.exports.levels=p2();Cn.exports.stdSerializers=x7;Cn.exports.stdTimeFunctions=Object.assign({},d2);Cn.exports.symbols=h2;Cn.exports.version=r7;Cn.exports.default=p0;Cn.exports.pino=p0;});var Eu=P(Ji=>{Object.defineProperty(Ji,"__esModule",{value:!0});Ji.Frequency=Ji.KeepLogFiles=void 0;(function(e){e[e.days=1]="days",e[e.fileCount=2]="fileCount";})(Ji.KeepLogFiles||(Ji.KeepLogFiles={}));(function(e){e[e.daily=1]="daily",e[e.minutes=2]="minutes",e[e.hours=3]="hours",e[e.date=4]="date",e[e.none=5]="none";})(Ji.Frequency||(Ji.Frequency={}));});var _2=P(m0=>{Object.defineProperty(m0,"__esModule",{value:!0});var y2=Eu(),g0=class{static fileStreamRotatorOptions(t){return Object.assign(Object.assign({},{filename:"",verbose:!1,end_stream:!1,utc:!1,create_symlink:!1,symlink_name:"current.log"}),t)}static fileOptions(t){return Object.assign(Object.assign({},{flags:"a"}),t)}static auditSettings(t){let r={keepSettings:{type:y2.KeepLogFiles.fileCount,amount:10},auditFilename:"audit.json",hashType:"md5",extension:"",files:[]};return Object.assign(Object.assign({},r),t)}static rotationSettings(t){let r={filename:"",frequency:y2.Frequency.none,utc:!1};return Object.assign(Object.assign({},r),t)}static extractParam(t,r=!0){let n=t.toString().match(/(\w)$/),i={number:0};n?.length==2&&(i.letter=n[1].toLowerCase());let s=t.toString().match(/^(\d+)/);return s?.length==2&&(i.number=Number(s[1])),i}};m0.default=g0;});var ff=P(Wa=>{Object.defineProperty(Wa,"__esModule",{value:!0});Wa.Logger=Wa.makeDirectory=void 0;var R7=he("fs"),I7=he("path");function P7(e){if(e.trim()!==""){var t=I7.dirname(e);try{R7.mkdirSync(t,{recursive:!0});}catch(r){if(r.code!=="EEXIST")throw r}}}Wa.makeDirectory=P7;var y0=class e{constructor(){this.isVerbose=!1,this.allowDebug=!1;}static getInstance(t,r){return e.instance||(e.instance=new e,e.instance.isVerbose=t??!1,e.instance.allowDebug=r??!1),e.instance}static verbose(...t){e.getInstance().isVerbose&&console.log.apply(null,[new Date,"[FileStreamRotator:VERBOSE]",...t]);}static log(...t){console.log.apply(null,[new Date,"[FileStreamRotator]",...t]);}static debug(...t){e.getInstance().allowDebug&&console.debug.apply(null,[new Date,"[FileStreamRotator:DEBUG]",...t]);}};Wa.Logger=y0;});var b2=P(v0=>{Object.defineProperty(v0,"__esModule",{value:!0});var v2=he("fs"),hn=Eu(),zs=ff(),_0=class e{constructor(t,r){var n;switch(this.currentSize=0,this.lastDate="",this.fileIndx=0,this.settings=t,this.settings.frequency){case hn.Frequency.hours:this.settings.amount&&this.settings.amount<13?this.settings.amount&&this.settings.amount>0||(this.settings.amount=1):this.settings.amount=12,this.isFormatValidForHour()||(zs.Logger.log("Date format not suitable for X hours rotation. Changing date format to 'YMDHm'"),this.settings.format="YMDHm");break;case hn.Frequency.minutes:this.settings.amount&&this.settings.amount<31?this.settings.amount&&this.settings.amount>0||(this.settings.amount=1):this.settings.amount=30,this.isFormatValidForMinutes()||(this.settings.format="YMDHm",zs.Logger.log("Date format not suitable for X minutes rotation. Changing date format to 'YMDHm'"));break;case hn.Frequency.daily:this.isFormatValidForDaily()||(this.settings.format="YMD",zs.Logger.log("Date format not suitable for daily rotation. Changing date format to 'YMD'"));break}if(this.settings.frequency!==hn.Frequency.none&&!this.settings.filename.match("%DATE%")&&(this.settings.filename+=".%DATE%",zs.Logger.log("Appending date to the end of the filename")),this.lastDate=this.getDateString(),this.settings.maxSize&&r){let s=new Date(r.date),a=(n=this.settings.extension)!==null&&n!==void 0?n:"";if(zs.Logger.debug(this.getDateString(s)==this.getDateString(new Date),this.getDateString(s),this.getDateString(new Date)),this.getDateString(s)==this.getDateString(new Date)){let o=r.name.match(RegExp("(\\d+)"+a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));o&&(this.fileIndx=Number(o[1]));var i=this.getSizeForFile(this.getNewFilename());i&&(this.currentSize=i),this.lastDate=this.getDateString(s),zs.Logger.debug("LOADED LAST ENTRY",this.currentSize,this.lastDate,this.fileIndx);}else {var i=this.getSizeForFile(this.getNewFilename());i&&(this.currentSize=i),zs.Logger.debug("CURRENT FILE:",this.getNewFilename(),this.currentSize);}}}getSizeForFile(t){try{if(v2.existsSync(t)){var r=v2.statSync(this.getNewFilename());if(r)return r.size}}catch{return}}hasMaxSizeReached(){return this.settings.maxSize?this.currentSize>this.settings.maxSize:!1}shouldRotate(){let t=this.hasMaxSizeReached();switch(this.settings.frequency){case hn.Frequency.none:return t;case hn.Frequency.hours:case hn.Frequency.minutes:case hn.Frequency.date:case hn.Frequency.daily:default:let r=this.getDateString();return this.lastDate!=r?!0:t}}isFormatValidForDaily(){let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,23,55,45),n=new Date(2022,2,21,2,55,45);return this.getDateString(t)===this.getDateString(r)&&this.getDateString(t)!==this.getDateString(n)}isFormatValidForHour(){if(!this.settings.amount||this.settings.frequency!=hn.Frequency.hours)return !1;let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,2+this.settings.amount,55,45);return this.getDateString(t)!==this.getDateString(r)}isFormatValidForMinutes(){if(!this.settings.amount||this.settings.frequency!=hn.Frequency.minutes)return !1;let t=new Date(2022,2,20,1,2,3),r=new Date(2022,2,20,1,2+this.settings.amount,45);return this.getDateString(t)!==this.getDateString(r)}getDateString(t){let r=t||new Date,n=e.getDateComponents(r,this.settings.utc),i=this.settings.format;if(i){switch(this.settings.frequency){case hn.Frequency.hours:if(this.settings.amount){var s=Math.floor(n.hour/this.settings.amount)*this.settings.amount;n.hour=s,n.minute=0,n.second=0;}case hn.Frequency.minutes:if(this.settings.amount){var a=Math.floor(n.minute/this.settings.amount)*this.settings.amount;n.minute=a,n.second=0;}}return i?.replace(/D+/,n.day.toString().padStart(2,"0")).replace(/M+/,n.month.toString().padStart(2,"0")).replace(/Y+/,n.year.toString()).replace(/H+/,n.hour.toString().padStart(2,"0")).replace(/m+/,n.minute.toString().padStart(2,"0")).replace(/s+/,n.second.toString().padStart(2,"0")).replace(/A+/,n.hour>11?"PM":"AM")}return ""}getFilename(t,r){return t.replace("%DATE%",this.lastDate)+(this.settings.maxSize||this.fileIndx>0?"."+this.fileIndx:"")+(r||"")}getNewFilename(){return this.getFilename(this.settings.filename,this.settings.extension)}addBytes(t){this.currentSize+=t;}rotate(t=!1){return t?(this.fileIndx+=1,this.currentSize=0,this.lastDate=this.getDateString()):this.shouldRotate()&&(this.hasMaxSizeReached()?this.fileIndx+=1:this.fileIndx=0,this.currentSize=0,this.lastDate=this.getDateString()),this.getNewFilename()}static getDateComponents(t,r){return r?{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),utc:r,source:t}:{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),utc:r,source:t}}static createDate(t,r){return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second)}};v0.default=_0;});var S2=P(E0=>{Object.defineProperty(E0,"__esModule",{value:!0});var df=he("fs"),N7=he("path"),D7=Eu(),si=ff(),b0=he("crypto"),S0=class{constructor(t,r){this.config=t,this.emitter=r,this.loadLog();}loadLog(){var t;if(!this.config.keepSettings||((t=this.config.keepSettings)===null||t===void 0?void 0:t.amount)==0||!this.config.auditFilename||this.config.auditFilename==""){si.Logger.verbose("no existing audit settings found",this.config);return}try{let r=N7.resolve(this.config.auditFilename),n=JSON.parse(df.readFileSync(r,{encoding:"utf-8"}));this.config.files=n.files;}catch(r){if(r.code!=="ENOENT"){si.Logger.log("Failed to load config file",r);return}}}writeLog(){if(this.config.auditFilename)try{(0, si.makeDirectory)(this.config.auditFilename),df.writeFileSync(this.config.auditFilename,JSON.stringify(this.config,null,4));}catch(t){si.Logger.verbose("ERROR: Failed to store log audit",t);}}addLog(t){var r;if(!this.config.keepSettings||((r=this.config.keepSettings)===null||r===void 0?void 0:r.amount)==0||!this.config.auditFilename||this.config.auditFilename==""){si.Logger.verbose("audit log missing");return}if(this.config.files.findIndex(s=>s.name===t)!==-1){si.Logger.debug("file already in the log",t);return}var n=Date.now();if(this.config.files.push({date:n,name:t,hash:b0.createHash(this.config.hashType).update(t+"LOG_FILE"+n).digest("hex")}),si.Logger.debug(`added file ${t} to log`),this.config.keepSettings&&this.config.keepSettings.amount){if(this.config.keepSettings.type==D7.KeepLogFiles.days){let s=Date.now()-86400*this.config.keepSettings.amount*1e3,a=this.config.files.filter(o=>{if(o.date>=s)return !0;this.removeLog(o);});this.config.files=a;}else if(this.config.files.length>this.config.keepSettings.amount){var i=this.config.files.splice(-this.config.keepSettings.amount);this.config.files.length>0&&this.config.files.filter(s=>(this.removeLog(s),!1)),this.config.files=i;}}this.writeLog();}removeLog(t){if(t.hash===b0.createHash(this.config.hashType).update(t.name+"LOG_FILE"+t.date).digest("hex"))try{df.existsSync(t.name)&&(si.Logger.debug("removing log file",t.name),df.unlinkSync(t.name),this.emitter.emit("logRemoved",t.name));}catch{si.Logger.verbose("Could not remove old log file: ",t.name);}else si.Logger.debug("incorrect hash",t.name,t.hash,b0.createHash(this.config.hashType).update(t.name+"LOG_FILE"+t.date).digest("hex"));}};E0.default=S0;});var w2=P(x0=>{Object.defineProperty(x0,"__esModule",{value:!0});var k7=he("stream"),Ka=he("fs"),w0=he("path"),Ii=Eu(),Pi=_2(),E2=b2(),O7=S2(),wu=ff(),C0=class e extends k7.EventEmitter{constructor(t,r=!1){var n,i;super(),this.config={},this.config=this.parseOptions(t),wu.Logger.getInstance(t.verbose,r),this.auditManager=new O7.default((n=this.config.auditSettings)!==null&&n!==void 0?n:Pi.default.auditSettings({}),this);let s=this.auditManager.config.files.slice(-1).shift();this.rotator=new E2.default((i=this.config.rotationSettings)!==null&&i!==void 0?i:Pi.default.rotationSettings({}),s),this.rotate();}static getStream(t){return new e(t)}parseOptions(t){var r,n,i,s;let a={};a.options=Pi.default.fileStreamRotatorOptions(t),a.fileOptions=Pi.default.fileOptions((r=t.file_options)!==null&&r!==void 0?r:{});let o=Pi.default.auditSettings({});if(t.audit_file&&(o.auditFilename=t.audit_file),t.audit_hash_type&&(o.hashType=t.audit_hash_type),t.extension&&(o.extension=t.extension),t.max_logs){let l=Pi.default.extractParam(t.max_logs);o.keepSettings={type:((n=l.letter)===null||n===void 0?void 0:n.toLowerCase())=="d"?Ii.KeepLogFiles.days:Ii.KeepLogFiles.fileCount,amount:l.number};}switch(a.auditSettings=o,a.rotationSettings=Pi.default.rotationSettings({filename:t.filename,extension:t.extension}),t.date_format&&!t.frequency?a.rotationSettings.frequency=Ii.Frequency.date:a.rotationSettings.frequency=Ii.Frequency.none,t.date_format&&(a.rotationSettings.format=t.date_format),a.rotationSettings.utc=(i=t.utc)!==null&&i!==void 0?i:!1,t.frequency){case"daily":a.rotationSettings.frequency=Ii.Frequency.daily;break;case"custom":case"date":a.rotationSettings.frequency=Ii.Frequency.date;break;case"test":a.rotationSettings.frequency=Ii.Frequency.minutes,a.rotationSettings.amount=1;break;default:if(t.frequency){let l=Pi.default.extractParam(t.frequency);!((s=l.letter)===null||s===void 0)&&s.match(/^([mh])$/)&&(a.rotationSettings.frequency=l.letter=="h"?Ii.Frequency.hours:Ii.Frequency.minutes,a.rotationSettings.amount=l.number);}}if(t.size){let l=Pi.default.extractParam(t.size);switch(l.letter){case"k":a.rotationSettings.maxSize=l.number*1024;break;case"m":a.rotationSettings.maxSize=l.number*1024*1024;break;case"g":a.rotationSettings.maxSize=l.number*1024*1024*1024;break}}this.rotator=new E2.default(a.rotationSettings);this.rotator.getNewFilename();return a}rotate(t=!1){var r;let n=this.currentFile;this.rotator.rotate(t),this.currentFile=this.rotator.getNewFilename(),this.currentFile!=n&&(this.fs&&(((r=this.config.options)===null||r===void 0?void 0:r.end_stream)===!0?this.fs.end():this.fs.destroy()),n&&this.auditManager.addLog(n),this.createNewLog(this.currentFile),this.emit("new",this.currentFile),this.emit("rotate",n,this.currentFile,t));}createNewLog(t){var r;(0, wu.makeDirectory)(t),this.auditManager.addLog(t);let n={};this.config.fileOptions&&(n=this.config.fileOptions),this.fs=Ka.createWriteStream(t,n),this.bubbleEvents(this.fs,t),!((r=this.config.options)===null||r===void 0)&&r.create_symlink&&this.createCurrentSymLink(t);}write(t,r){this.fs&&(this.rotator.shouldRotate()&&this.rotate(),this.fs.write(t,r??"utf8"),this.rotator.addBytes(Buffer.byteLength(t,r)),this.rotator.hasMaxSizeReached()&&this.rotate());}end(t){this.fs&&(this.fs.end(t),this.fs=void 0);}bubbleEvents(t,r){t.on("close",()=>{this.emit("close");}),t.on("finish",()=>{this.emit("finish");}),t.on("error",n=>{this.emit("error",n);}),t.on("open",n=>{this.emit("open",r);});}createCurrentSymLink(t){var r,n;if(!t)return;let i=(n=(r=this.config.options)===null||r===void 0?void 0:r.symlink_name)!==null&&n!==void 0?n:"current.log",s=w0.dirname(t),a=w0.basename(t),o=s+w0.sep+i;try{if(Ka.existsSync(o)){if(Ka.lstatSync(o).isSymbolicLink()){Ka.unlinkSync(o),Ka.symlinkSync(a,o);return}wu.Logger.verbose("Could not create symlink file as file with the same name exists: ",o);}else Ka.symlinkSync(a,o);}catch(c){wu.Logger.verbose("[Could not create symlink file: ",o," -> ",a),wu.Logger.debug("error creating sym link",o,c);}}test(){return {config:this.config,rotator:this.rotator}}};x0.default=C0;});var C2=P(hf=>{Object.defineProperty(hf,"__esModule",{value:!0});hf.getStream=void 0;var B7=w2();function L7(e){return new B7.default(e)}hf.getStream=L7;});var I2=P((Dne,R2)=>{R2.exports=function(){function e(n,i){function s(){this.constructor=n;}s.prototype=i.prototype,n.prototype=new s;}function t(n,i,s,a,o,c){this.message=n,this.expected=i,this.found=s,this.offset=a,this.line=o,this.column=c,this.name="SyntaxError";}e(t,Error);function r(n){var i=arguments.length>1?arguments[1]:{},s={},a={start:kb},o=kb,l=function(){return Xb},u=s,f="#",h={type:"literal",value:"#",description:'"#"'},p=void 0,m={type:"any",description:"any character"},v="[",E={type:"literal",value:"[",description:'"["'},w="]",y={type:"literal",value:"]",description:'"]"'},b=function(d){Kh(br("ObjectPath",d,_r,vr));},N=function(d){Kh(br("ArrayPath",d,_r,vr));},B=function(d,_){return d.concat(_)},V=function(d){return [d]},X=function(d){return d},z=".",G={type:"literal",value:".",description:'"."'},ee="=",U={type:"literal",value:"=",description:'"="'},ie=function(d,_){Kh(br("Assign",_,_r,vr,d));},me=function(d){return d.join("")},Pe=function(d){return d.value},W='"""',K={type:"literal",value:'"""',description:'"\\"\\"\\""'},se=null,Ae=function(d){return br("String",d.join(""),_r,vr)},Fe='"',Ke={type:"literal",value:'"',description:'"\\""'},Ve="'''",ot={type:"literal",value:"'''",description:`"'''"`},Dt="'",bt={type:"literal",value:"'",description:`"'"`},ft=function(d){return d},Oe=function(d){return d},Rt="\\",qt={type:"literal",value:"\\",description:'"\\\\"'},ye=function(){return ""},$e="e",le={type:"literal",value:"e",description:'"e"'},Ie="E",He={type:"literal",value:"E",description:'"E"'},et=function(d,_){return br("Float",parseFloat(d+"e"+_),_r,vr)},ze=function(d){return br("Float",parseFloat(d),_r,vr)},_n="+",kr={type:"literal",value:"+",description:'"+"'},As=function(d){return d.join("")},Or="-",Kr={type:"literal",value:"-",description:'"-"'},Rs=function(d){return "-"+d.join("")},ma=function(d){return br("Integer",parseInt(d,10),_r,vr)},an="true",Is={type:"literal",value:"true",description:'"true"'},Ps=function(){return br("Boolean",!0,_r,vr)},bi="false",Ns={type:"literal",value:"false",description:'"false"'},Fn=function(){return br("Boolean",!1,_r,vr)},M=function(){return br("Array",[],_r,vr)},ae=function(d){return br("Array",d?[d]:[],_r,vr)},Se=function(d){return br("Array",d,_r,vr)},Ne=function(d,_){return br("Array",d.concat(_),_r,vr)},St=function(d){return d},gt=",",It={type:"literal",value:",",description:'","'},Ot="{",tt={type:"literal",value:"{",description:'"{"'},xt="}",dt={type:"literal",value:"}",description:'"}"'},Vt=function(d){return br("InlineTable",d,_r,vr)},Jt=function(d,_){return br("InlineTableValue",_,_r,vr,d)},Br=function(d){return "."+d},ya=function(d){return d.join("")},Mi=":",qi={type:"literal",value:":",description:'":"'},Bo=function(d){return d.join("")},Lo="T",vc={type:"literal",value:"T",description:'"T"'},Z="Z",A={type:"literal",value:"Z",description:'"Z"'},q=function(d,_){return br("Date",new Date(d+"T"+_+"Z"),_r,vr)},$=function(d,_){return br("Date",new Date(d+"T"+_),_r,vr)},D=/^[ \t]/,S={type:"class",value:"[ \\t]",description:"[ \\t]"},Y=`
`,oe={type:"literal",value:`
`,description:'"\\n"'},Ge="\r",Ht={type:"literal",value:"\r",description:'"\\r"'},Pt=/^[0-9a-f]/i,on={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},un=/^[0-9]/,Mn={type:"class",value:"[0-9]",description:"[0-9]"},nt="_",Ui={type:"literal",value:"_",description:'"_"'},_a=function(){return ""},bc=/^[A-Za-z0-9_\-]/,BM={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},LM=function(d){return d.join("")},wb='\\"',FM={type:"literal",value:'\\"',description:'"\\\\\\""'},MM=function(){return '"'},Cb="\\\\",qM={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},UM=function(){return "\\"},xb="\\b",$M={type:"literal",value:"\\b",description:'"\\\\b"'},jM=function(){return "\b"},Tb="\\t",VM={type:"literal",value:"\\t",description:'"\\\\t"'},HM=function(){return "	"},Ab="\\n",WM={type:"literal",value:"\\n",description:'"\\\\n"'},KM=function(){return `
`},Rb="\\f",zM={type:"literal",value:"\\f",description:'"\\\\f"'},GM=function(){return "\f"},Ib="\\r",YM={type:"literal",value:"\\r",description:'"\\\\r"'},QM=function(){return "\r"},Pb="\\U",ZM={type:"literal",value:"\\U",description:'"\\\\U"'},Nb=function(d){return yq(d.join(""))},Db="\\u",XM={type:"literal",value:"\\u",description:'"\\\\u"'},g=0,De=0,Fo=0,Uh={line:1,column:1,seenCR:!1},Sc=0,$h=[],ce=0,pe={},Ec;if("startRule"in i){if(!(i.startRule in a))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');o=a[i.startRule];}function _r(){return jh(De).line}function vr(){return jh(De).column}function jh(d){function _(x,k,L){var J,ne;for(J=k;J<L;J++)ne=n.charAt(J),ne===`
`?(x.seenCR||x.line++,x.column=1,x.seenCR=!1):ne==="\r"||ne==="\u2028"||ne==="\u2029"?(x.line++,x.column=1,x.seenCR=!0):(x.column++,x.seenCR=!1);}return Fo!==d&&(Fo>d&&(Fo=0,Uh={line:1,column:1,seenCR:!1}),_(Uh,Fo,d),Fo=d),Uh}function _e(d){g<Sc||(g>Sc&&(Sc=g,$h=[]),$h.push(d));}function Vh(d,_,x){function k(Te){var We=1;for(Te.sort(function(Tt,_t){return Tt.description<_t.description?-1:Tt.description>_t.description?1:0});We<Te.length;)Te[We-1]===Te[We]?Te.splice(We,1):We++;}function L(Te,We){function Tt(ba){function $i(ln){return ln.charCodeAt(0).toString(16).toUpperCase()}return ba.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ln){return "\\x0"+$i(ln)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ln){return "\\x"+$i(ln)}).replace(/[\u0180-\u0FFF]/g,function(ln){return "\\u0"+$i(ln)}).replace(/[\u1080-\uFFFF]/g,function(ln){return "\\u"+$i(ln)})}var _t=new Array(Te.length),zt,er,cn;for(cn=0;cn<Te.length;cn++)_t[cn]=Te[cn].description;return zt=Te.length>1?_t.slice(0,-1).join(", ")+" or "+_t[Te.length-1]:_t[0],er=We?'"'+Tt(We)+'"':"end of input","Expected "+zt+" but "+er+" found."}var J=jh(x),ne=x<n.length?n.charAt(x):null;return _!==null&&k(_),new t(d!==null?d:L(_,ne),_,ne,x,J.line,J.column)}function kb(){var d,_,x,k=g*49+0,L=pe[k];if(L)return g=L.nextPos,L.result;for(d=g,_=[],x=Ob();x!==s;)_.push(x),x=Ob();return _!==s&&(De=d,_=l()),d=_,pe[k]={nextPos:g,result:d},d}function Ob(){var d,_,x,k,L,J,ne,Te=g*49+1,We=pe[Te];if(We)return g=We.nextPos,We.result;for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=JM(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s){for(L=[],J=wc();J!==s;)L.push(J),J=wc();if(L!==s){if(J=[],ne=bn(),ne!==s)for(;ne!==s;)J.push(ne),ne=bn();else J=u;J===s&&(J=xc()),J!==s?(_=[_,x,k,L,J],d=_):(g=d,d=u);}else g=d,d=u;}else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){if(d=g,_=[],x=ke(),x!==s)for(;x!==s;)_.push(x),x=ke();else _=u;if(_!==s){if(x=[],k=bn(),k!==s)for(;k!==s;)x.push(k),k=bn();else x=u;x===s&&(x=xc()),x!==s?(_=[_,x],d=_):(g=d,d=u);}else g=d,d=u;d===s&&(d=bn());}return pe[Te]={nextPos:g,result:d},d}function JM(){var d,_=g*49+2,x=pe[_];return x?(g=x.nextPos,x.result):(d=wc(),d===s&&(d=eq(),d===s&&(d=tq(),d===s&&(d=rq()))),pe[_]={nextPos:g,result:d},d)}function wc(){var d,_,x,k,L,J,ne=g*49+3,Te=pe[ne];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===35?(_=f,g++):(_=s,ce===0&&_e(h)),_!==s){for(x=[],k=g,L=g,ce++,J=bn(),J===s&&(J=xc()),ce--,J===s?L=p:(g=L,L=u),L!==s?(n.length>g?(J=n.charAt(g),g++):(J=s,ce===0&&_e(m)),J!==s?(L=[L,J],k=L):(g=k,k=u)):(g=k,k=u);k!==s;)x.push(k),k=g,L=g,ce++,J=bn(),J===s&&(J=xc()),ce--,J===s?L=p:(g=L,L=u),L!==s?(n.length>g?(J=n.charAt(g),g++):(J=s,ce===0&&_e(m)),J!==s?(L=[L,J],k=L):(g=k,k=u)):(g=k,k=u);x!==s?(_=[_,x],d=_):(g=d,d=u);}else g=d,d=u;return pe[ne]={nextPos:g,result:d},d}function eq(){var d,_,x,k,L,J,ne=g*49+4,Te=pe[ne];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){for(x=[],k=ke();k!==s;)x.push(k),k=ke();if(x!==s)if(k=Bb(),k!==s){for(L=[],J=ke();J!==s;)L.push(J),J=ke();L!==s?(n.charCodeAt(g)===93?(J=w,g++):(J=s,ce===0&&_e(y)),J!==s?(De=d,_=b(k),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;return pe[ne]={nextPos:g,result:d},d}function tq(){var d,_,x,k,L,J,ne,Te,We=g*49+5,Tt=pe[We];if(Tt)return g=Tt.nextPos,Tt.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s)if(n.charCodeAt(g)===91?(x=v,g++):(x=s,ce===0&&_e(E)),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s)if(L=Bb(),L!==s){for(J=[],ne=ke();ne!==s;)J.push(ne),ne=ke();J!==s?(n.charCodeAt(g)===93?(ne=w,g++):(ne=s,ce===0&&_e(y)),ne!==s?(n.charCodeAt(g)===93?(Te=w,g++):(Te=s,ce===0&&_e(y)),Te!==s?(De=d,_=N(L),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;return pe[We]={nextPos:g,result:d},d}function Bb(){var d,_,x,k=g*49+6,L=pe[k];if(L)return g=L.nextPos,L.result;if(d=g,_=[],x=Fb(),x!==s)for(;x!==s;)_.push(x),x=Fb();else _=u;return _!==s?(x=Lb(),x!==s?(De=d,_=B(_,x),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=Lb(),_!==s&&(De=d,_=V(_)),d=_),pe[k]={nextPos:g,result:d},d}function Lb(){var d,_,x,k,L,J=g*49+7,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Mo(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();k!==s?(De=d,_=X(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Hh(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();k!==s?(De=d,_=X(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}return pe[J]={nextPos:g,result:d},d}function Fb(){var d,_,x,k,L,J,ne,Te=g*49+8,We=pe[Te];if(We)return g=We.nextPos,We.result;for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Mo(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s)if(n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),L!==s){for(J=[],ne=ke();ne!==s;)J.push(ne),ne=ke();J!==s?(De=d,_=X(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Hh(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s)if(n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),L!==s){for(J=[],ne=ke();ne!==s;)J.push(ne),ne=ke();J!==s?(De=d,_=X(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}return pe[Te]={nextPos:g,result:d},d}function rq(){var d,_,x,k,L,J,ne=g*49+9,Te=pe[ne];if(Te)return g=Te.nextPos,Te.result;if(d=g,_=Mo(),_!==s){for(x=[],k=ke();k!==s;)x.push(k),k=ke();if(x!==s)if(n.charCodeAt(g)===61?(k=ee,g++):(k=s,ce===0&&_e(U)),k!==s){for(L=[],J=ke();J!==s;)L.push(J),J=ke();L!==s?(J=va(),J!==s?(De=d,_=ie(_,J),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;if(d===s)if(d=g,_=Hh(),_!==s){for(x=[],k=ke();k!==s;)x.push(k),k=ke();if(x!==s)if(n.charCodeAt(g)===61?(k=ee,g++):(k=s,ce===0&&_e(U)),k!==s){for(L=[],J=ke();J!==s;)L.push(J),J=ke();L!==s?(J=va(),J!==s?(De=d,_=ie(_,J),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;return pe[ne]={nextPos:g,result:d},d}function Mo(){var d,_,x,k=g*49+10,L=pe[k];if(L)return g=L.nextPos,L.result;if(d=g,_=[],x=Qb(),x!==s)for(;x!==s;)_.push(x),x=Qb();else _=u;return _!==s&&(De=d,_=me(_)),d=_,pe[k]={nextPos:g,result:d},d}function Hh(){var d,_,x=g*49+11,k=pe[x];return k?(g=k.nextPos,k.result):(d=g,_=Mb(),_!==s&&(De=d,_=Pe(_)),d=_,d===s&&(d=g,_=qb(),_!==s&&(De=d,_=Pe(_)),d=_),pe[x]={nextPos:g,result:d},d)}function va(){var d,_=g*49+12,x=pe[_];return x?(g=x.nextPos,x.result):(d=nq(),d===s&&(d=pq(),d===s&&(d=oq(),d===s&&(d=uq(),d===s&&(d=cq(),d===s&&(d=lq(),d===s&&(d=fq())))))),pe[_]={nextPos:g,result:d},d)}function nq(){var d,_=g*49+13,x=pe[_];return x?(g=x.nextPos,x.result):(d=iq(),d===s&&(d=Mb(),d===s&&(d=sq(),d===s&&(d=qb()))),pe[_]={nextPos:g,result:d},d)}function iq(){var d,_,x,k,L,J=g*49+14,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;if(d=g,n.substr(g,3)===W?(_=W,g+=3):(_=s,ce===0&&_e(K)),_!==s)if(x=bn(),x===s&&(x=se),x!==s){for(k=[],L=jb();L!==s;)k.push(L),L=jb();k!==s?(n.substr(g,3)===W?(L=W,g+=3):(L=s,ce===0&&_e(K)),L!==s?(De=d,_=Ae(k),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[J]={nextPos:g,result:d},d}function Mb(){var d,_,x,k,L=g*49+15,J=pe[L];if(J)return g=J.nextPos,J.result;if(d=g,n.charCodeAt(g)===34?(_=Fe,g++):(_=s,ce===0&&_e(Ke)),_!==s){for(x=[],k=Ub();k!==s;)x.push(k),k=Ub();x!==s?(n.charCodeAt(g)===34?(k=Fe,g++):(k=s,ce===0&&_e(Ke)),k!==s?(De=d,_=Ae(x),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[L]={nextPos:g,result:d},d}function sq(){var d,_,x,k,L,J=g*49+16,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;if(d=g,n.substr(g,3)===Ve?(_=Ve,g+=3):(_=s,ce===0&&_e(ot)),_!==s)if(x=bn(),x===s&&(x=se),x!==s){for(k=[],L=Vb();L!==s;)k.push(L),L=Vb();k!==s?(n.substr(g,3)===Ve?(L=Ve,g+=3):(L=s,ce===0&&_e(ot)),L!==s?(De=d,_=Ae(k),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[J]={nextPos:g,result:d},d}function qb(){var d,_,x,k,L=g*49+17,J=pe[L];if(J)return g=J.nextPos,J.result;if(d=g,n.charCodeAt(g)===39?(_=Dt,g++):(_=s,ce===0&&_e(bt)),_!==s){for(x=[],k=$b();k!==s;)x.push(k),k=$b();x!==s?(n.charCodeAt(g)===39?(k=Dt,g++):(k=s,ce===0&&_e(bt)),k!==s?(De=d,_=Ae(x),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[L]={nextPos:g,result:d},d}function Ub(){var d,_,x,k=g*49+18,L=pe[k];return L?(g=L.nextPos,L.result):(d=Zb(),d===s&&(d=g,_=g,ce++,n.charCodeAt(g)===34?(x=Fe,g++):(x=s,ce===0&&_e(Ke)),ce--,x===s?_=p:(g=_,_=u),_!==s?(n.length>g?(x=n.charAt(g),g++):(x=s,ce===0&&_e(m)),x!==s?(De=d,_=ft(x),d=_):(g=d,d=u)):(g=d,d=u)),pe[k]={nextPos:g,result:d},d)}function $b(){var d,_,x,k=g*49+19,L=pe[k];return L?(g=L.nextPos,L.result):(d=g,_=g,ce++,n.charCodeAt(g)===39?(x=Dt,g++):(x=s,ce===0&&_e(bt)),ce--,x===s?_=p:(g=_,_=u),_!==s?(n.length>g?(x=n.charAt(g),g++):(x=s,ce===0&&_e(m)),x!==s?(De=d,_=ft(x),d=_):(g=d,d=u)):(g=d,d=u),pe[k]={nextPos:g,result:d},d)}function jb(){var d,_,x,k=g*49+20,L=pe[k];return L?(g=L.nextPos,L.result):(d=Zb(),d===s&&(d=aq(),d===s&&(d=g,_=g,ce++,n.substr(g,3)===W?(x=W,g+=3):(x=s,ce===0&&_e(K)),ce--,x===s?_=p:(g=_,_=u),_!==s?(n.length>g?(x=n.charAt(g),g++):(x=s,ce===0&&_e(m)),x!==s?(De=d,_=Oe(x),d=_):(g=d,d=u)):(g=d,d=u))),pe[k]={nextPos:g,result:d},d)}function aq(){var d,_,x,k,L,J=g*49+21,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;if(d=g,n.charCodeAt(g)===92?(_=Rt,g++):(_=s,ce===0&&_e(qt)),_!==s)if(x=bn(),x!==s){for(k=[],L=Yb();L!==s;)k.push(L),L=Yb();k!==s?(De=d,_=ye(),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[J]={nextPos:g,result:d},d}function Vb(){var d,_,x,k=g*49+22,L=pe[k];return L?(g=L.nextPos,L.result):(d=g,_=g,ce++,n.substr(g,3)===Ve?(x=Ve,g+=3):(x=s,ce===0&&_e(ot)),ce--,x===s?_=p:(g=_,_=u),_!==s?(n.length>g?(x=n.charAt(g),g++):(x=s,ce===0&&_e(m)),x!==s?(De=d,_=ft(x),d=_):(g=d,d=u)):(g=d,d=u),pe[k]={nextPos:g,result:d},d)}function oq(){var d,_,x,k,L=g*49+23,J=pe[L];return J?(g=J.nextPos,J.result):(d=g,_=Hb(),_===s&&(_=Wh()),_!==s?(n.charCodeAt(g)===101?(x=$e,g++):(x=s,ce===0&&_e(le)),x===s&&(n.charCodeAt(g)===69?(x=Ie,g++):(x=s,ce===0&&_e(He))),x!==s?(k=Wh(),k!==s?(De=d,_=et(_,k),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=Hb(),_!==s&&(De=d,_=ze(_)),d=_),pe[L]={nextPos:g,result:d},d)}function Hb(){var d,_,x,k,L,J,ne=g*49+24,Te=pe[ne];return Te?(g=Te.nextPos,Te.result):(d=g,n.charCodeAt(g)===43?(_=_n,g++):(_=s,ce===0&&_e(kr)),_===s&&(_=se),_!==s?(x=g,k=qo(),k!==s?(n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),L!==s?(J=qo(),J!==s?(k=[k,L,J],x=k):(g=x,x=u)):(g=x,x=u)):(g=x,x=u),x!==s?(De=d,_=As(x),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,n.charCodeAt(g)===45?(_=Or,g++):(_=s,ce===0&&_e(Kr)),_!==s?(x=g,k=qo(),k!==s?(n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),L!==s?(J=qo(),J!==s?(k=[k,L,J],x=k):(g=x,x=u)):(g=x,x=u)):(g=x,x=u),x!==s?(De=d,_=Rs(x),d=_):(g=d,d=u)):(g=d,d=u)),pe[ne]={nextPos:g,result:d},d)}function uq(){var d,_,x=g*49+25,k=pe[x];return k?(g=k.nextPos,k.result):(d=g,_=Wh(),_!==s&&(De=d,_=ma(_)),d=_,pe[x]={nextPos:g,result:d},d)}function Wh(){var d,_,x,k,L,J=g*49+26,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;if(d=g,n.charCodeAt(g)===43?(_=_n,g++):(_=s,ce===0&&_e(kr)),_===s&&(_=se),_!==s){if(x=[],k=wt(),k!==s)for(;k!==s;)x.push(k),k=wt();else x=u;x!==s?(k=g,ce++,n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),ce--,L===s?k=p:(g=k,k=u),k!==s?(De=d,_=As(x),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s)if(d=g,n.charCodeAt(g)===45?(_=Or,g++):(_=s,ce===0&&_e(Kr)),_!==s){if(x=[],k=wt(),k!==s)for(;k!==s;)x.push(k),k=wt();else x=u;x!==s?(k=g,ce++,n.charCodeAt(g)===46?(L=z,g++):(L=s,ce===0&&_e(G)),ce--,L===s?k=p:(g=k,k=u),k!==s?(De=d,_=Rs(x),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;return pe[J]={nextPos:g,result:d},d}function cq(){var d,_,x=g*49+27,k=pe[x];return k?(g=k.nextPos,k.result):(d=g,n.substr(g,4)===an?(_=an,g+=4):(_=s,ce===0&&_e(Is)),_!==s&&(De=d,_=Ps()),d=_,d===s&&(d=g,n.substr(g,5)===bi?(_=bi,g+=5):(_=s,ce===0&&_e(Ns)),_!==s&&(De=d,_=Fn()),d=_),pe[x]={nextPos:g,result:d},d)}function lq(){var d,_,x,k,L,J=g*49+28,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){for(x=[],k=vn();k!==s;)x.push(k),k=vn();x!==s?(n.charCodeAt(g)===93?(k=w,g++):(k=s,ce===0&&_e(y)),k!==s?(De=d,_=M(),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s&&(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s?(x=Wb(),x===s&&(x=se),x!==s?(n.charCodeAt(g)===93?(k=w,g++):(k=s,ce===0&&_e(y)),k!==s?(De=d,_=ae(x),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s)){if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){if(x=[],k=Cc(),k!==s)for(;k!==s;)x.push(k),k=Cc();else x=u;x!==s?(n.charCodeAt(g)===93?(k=w,g++):(k=s,ce===0&&_e(y)),k!==s?(De=d,_=Se(x),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;if(d===s)if(d=g,n.charCodeAt(g)===91?(_=v,g++):(_=s,ce===0&&_e(E)),_!==s){if(x=[],k=Cc(),k!==s)for(;k!==s;)x.push(k),k=Cc();else x=u;x!==s?(k=Wb(),k!==s?(n.charCodeAt(g)===93?(L=w,g++):(L=s,ce===0&&_e(y)),L!==s?(De=d,_=Ne(x,k),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;}return pe[J]={nextPos:g,result:d},d}function Wb(){var d,_,x,k,L,J=g*49+29,ne=pe[J];if(ne)return g=ne.nextPos,ne.result;for(d=g,_=[],x=vn();x!==s;)_.push(x),x=vn();if(_!==s)if(x=va(),x!==s){for(k=[],L=vn();L!==s;)k.push(L),L=vn();k!==s?(De=d,_=St(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;return pe[J]={nextPos:g,result:d},d}function Cc(){var d,_,x,k,L,J,ne,Te=g*49+30,We=pe[Te];if(We)return g=We.nextPos,We.result;for(d=g,_=[],x=vn();x!==s;)_.push(x),x=vn();if(_!==s)if(x=va(),x!==s){for(k=[],L=vn();L!==s;)k.push(L),L=vn();if(k!==s)if(n.charCodeAt(g)===44?(L=gt,g++):(L=s,ce===0&&_e(It)),L!==s){for(J=[],ne=vn();ne!==s;)J.push(ne),ne=vn();J!==s?(De=d,_=St(x),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;return pe[Te]={nextPos:g,result:d},d}function vn(){var d,_=g*49+31,x=pe[_];return x?(g=x.nextPos,x.result):(d=ke(),d===s&&(d=bn(),d===s&&(d=wc())),pe[_]={nextPos:g,result:d},d)}function fq(){var d,_,x,k,L,J,ne=g*49+32,Te=pe[ne];if(Te)return g=Te.nextPos,Te.result;if(d=g,n.charCodeAt(g)===123?(_=Ot,g++):(_=s,ce===0&&_e(tt)),_!==s){for(x=[],k=ke();k!==s;)x.push(k),k=ke();if(x!==s){for(k=[],L=Kb();L!==s;)k.push(L),L=Kb();if(k!==s){for(L=[],J=ke();J!==s;)L.push(J),J=ke();L!==s?(n.charCodeAt(g)===125?(J=xt,g++):(J=s,ce===0&&_e(dt)),J!==s?(De=d,_=Vt(k),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;}else g=d,d=u;}else g=d,d=u;return pe[ne]={nextPos:g,result:d},d}function Kb(){var d,_,x,k,L,J,ne,Te,We,Tt,_t,zt=g*49+33,er=pe[zt];if(er)return g=er.nextPos,er.result;for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Mo(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s)if(n.charCodeAt(g)===61?(L=ee,g++):(L=s,ce===0&&_e(U)),L!==s){for(J=[],ne=ke();ne!==s;)J.push(ne),ne=ke();if(J!==s)if(ne=va(),ne!==s){for(Te=[],We=ke();We!==s;)Te.push(We),We=ke();if(Te!==s)if(n.charCodeAt(g)===44?(We=gt,g++):(We=s,ce===0&&_e(It)),We!==s){for(Tt=[],_t=ke();_t!==s;)Tt.push(_t),_t=ke();Tt!==s?(De=d,_=Jt(x,ne),d=_):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;if(d===s){for(d=g,_=[],x=ke();x!==s;)_.push(x),x=ke();if(_!==s)if(x=Mo(),x!==s){for(k=[],L=ke();L!==s;)k.push(L),L=ke();if(k!==s)if(n.charCodeAt(g)===61?(L=ee,g++):(L=s,ce===0&&_e(U)),L!==s){for(J=[],ne=ke();ne!==s;)J.push(ne),ne=ke();J!==s?(ne=va(),ne!==s?(De=d,_=Jt(x,ne),d=_):(g=d,d=u)):(g=d,d=u);}else g=d,d=u;else g=d,d=u;}else g=d,d=u;else g=d,d=u;}return pe[zt]={nextPos:g,result:d},d}function zb(){var d,_,x,k=g*49+34,L=pe[k];return L?(g=L.nextPos,L.result):(d=g,n.charCodeAt(g)===46?(_=z,g++):(_=s,ce===0&&_e(G)),_!==s?(x=qo(),x!==s?(De=d,_=Br(x),d=_):(g=d,d=u)):(g=d,d=u),pe[k]={nextPos:g,result:d},d)}function Gb(){var d,_,x,k,L,J,ne,Te,We,Tt,_t,zt,er=g*49+35,cn=pe[er];return cn?(g=cn.nextPos,cn.result):(d=g,_=g,x=wt(),x!==s?(k=wt(),k!==s?(L=wt(),L!==s?(J=wt(),J!==s?(n.charCodeAt(g)===45?(ne=Or,g++):(ne=s,ce===0&&_e(Kr)),ne!==s?(Te=wt(),Te!==s?(We=wt(),We!==s?(n.charCodeAt(g)===45?(Tt=Or,g++):(Tt=s,ce===0&&_e(Kr)),Tt!==s?(_t=wt(),_t!==s?(zt=wt(),zt!==s?(x=[x,k,L,J,ne,Te,We,Tt,_t,zt],_=x):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(De=d,_=ya(_)),d=_,pe[er]={nextPos:g,result:d},d)}function dq(){var d,_,x,k,L,J,ne,Te,We,Tt,_t,zt=g*49+36,er=pe[zt];return er?(g=er.nextPos,er.result):(d=g,_=g,x=wt(),x!==s?(k=wt(),k!==s?(n.charCodeAt(g)===58?(L=Mi,g++):(L=s,ce===0&&_e(qi)),L!==s?(J=wt(),J!==s?(ne=wt(),ne!==s?(n.charCodeAt(g)===58?(Te=Mi,g++):(Te=s,ce===0&&_e(qi)),Te!==s?(We=wt(),We!==s?(Tt=wt(),Tt!==s?(_t=zb(),_t===s&&(_t=se),_t!==s?(x=[x,k,L,J,ne,Te,We,Tt,_t],_=x):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(De=d,_=Bo(_)),d=_,pe[zt]={nextPos:g,result:d},d)}function hq(){var d,_,x,k,L,J,ne,Te,We,Tt,_t,zt,er,cn,ba,$i,ln,Jb=g*49+37,zh=pe[Jb];return zh?(g=zh.nextPos,zh.result):(d=g,_=g,x=wt(),x!==s?(k=wt(),k!==s?(n.charCodeAt(g)===58?(L=Mi,g++):(L=s,ce===0&&_e(qi)),L!==s?(J=wt(),J!==s?(ne=wt(),ne!==s?(n.charCodeAt(g)===58?(Te=Mi,g++):(Te=s,ce===0&&_e(qi)),Te!==s?(We=wt(),We!==s?(Tt=wt(),Tt!==s?(_t=zb(),_t===s&&(_t=se),_t!==s?(n.charCodeAt(g)===45?(zt=Or,g++):(zt=s,ce===0&&_e(Kr)),zt===s&&(n.charCodeAt(g)===43?(zt=_n,g++):(zt=s,ce===0&&_e(kr))),zt!==s?(er=wt(),er!==s?(cn=wt(),cn!==s?(n.charCodeAt(g)===58?(ba=Mi,g++):(ba=s,ce===0&&_e(qi)),ba!==s?($i=wt(),$i!==s?(ln=wt(),ln!==s?(x=[x,k,L,J,ne,Te,We,Tt,_t,zt,er,cn,ba,$i,ln],_=x):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u)):(g=_,_=u),_!==s&&(De=d,_=Bo(_)),d=_,pe[Jb]={nextPos:g,result:d},d)}function pq(){var d,_,x,k,L,J=g*49+38,ne=pe[J];return ne?(g=ne.nextPos,ne.result):(d=g,_=Gb(),_!==s?(n.charCodeAt(g)===84?(x=Lo,g++):(x=s,ce===0&&_e(vc)),x!==s?(k=dq(),k!==s?(n.charCodeAt(g)===90?(L=Z,g++):(L=s,ce===0&&_e(A)),L!==s?(De=d,_=q(_,k),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,_=Gb(),_!==s?(n.charCodeAt(g)===84?(x=Lo,g++):(x=s,ce===0&&_e(vc)),x!==s?(k=hq(),k!==s?(De=d,_=$(_,k),d=_):(g=d,d=u)):(g=d,d=u)):(g=d,d=u)),pe[J]={nextPos:g,result:d},d)}function ke(){var d,_=g*49+39,x=pe[_];return x?(g=x.nextPos,x.result):(D.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(S)),pe[_]={nextPos:g,result:d},d)}function bn(){var d,_,x,k=g*49+40,L=pe[k];return L?(g=L.nextPos,L.result):(n.charCodeAt(g)===10?(d=Y,g++):(d=s,ce===0&&_e(oe)),d===s&&(d=g,n.charCodeAt(g)===13?(_=Ge,g++):(_=s,ce===0&&_e(Ht)),_!==s?(n.charCodeAt(g)===10?(x=Y,g++):(x=s,ce===0&&_e(oe)),x!==s?(_=[_,x],d=_):(g=d,d=u)):(g=d,d=u)),pe[k]={nextPos:g,result:d},d)}function Yb(){var d,_=g*49+41,x=pe[_];return x?(g=x.nextPos,x.result):(d=bn(),d===s&&(d=ke()),pe[_]={nextPos:g,result:d},d)}function xc(){var d,_,x=g*49+42,k=pe[x];return k?(g=k.nextPos,k.result):(d=g,ce++,n.length>g?(_=n.charAt(g),g++):(_=s,ce===0&&_e(m)),ce--,_===s?d=p:(g=d,d=u),pe[x]={nextPos:g,result:d},d)}function Sn(){var d,_=g*49+43,x=pe[_];return x?(g=x.nextPos,x.result):(Pt.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(on)),pe[_]={nextPos:g,result:d},d)}function wt(){var d,_,x=g*49+44,k=pe[x];return k?(g=k.nextPos,k.result):(un.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(Mn)),d===s&&(d=g,n.charCodeAt(g)===95?(_=nt,g++):(_=s,ce===0&&_e(Ui)),_!==s&&(De=d,_=_a()),d=_),pe[x]={nextPos:g,result:d},d)}function Qb(){var d,_=g*49+45,x=pe[_];return x?(g=x.nextPos,x.result):(bc.test(n.charAt(g))?(d=n.charAt(g),g++):(d=s,ce===0&&_e(BM)),pe[_]={nextPos:g,result:d},d)}function qo(){var d,_,x,k=g*49+46,L=pe[k];if(L)return g=L.nextPos,L.result;if(d=g,_=[],x=wt(),x!==s)for(;x!==s;)_.push(x),x=wt();else _=u;return _!==s&&(De=d,_=LM(_)),d=_,pe[k]={nextPos:g,result:d},d}function Zb(){var d,_,x=g*49+47,k=pe[x];return k?(g=k.nextPos,k.result):(d=g,n.substr(g,2)===wb?(_=wb,g+=2):(_=s,ce===0&&_e(FM)),_!==s&&(De=d,_=MM()),d=_,d===s&&(d=g,n.substr(g,2)===Cb?(_=Cb,g+=2):(_=s,ce===0&&_e(qM)),_!==s&&(De=d,_=UM()),d=_,d===s&&(d=g,n.substr(g,2)===xb?(_=xb,g+=2):(_=s,ce===0&&_e($M)),_!==s&&(De=d,_=jM()),d=_,d===s&&(d=g,n.substr(g,2)===Tb?(_=Tb,g+=2):(_=s,ce===0&&_e(VM)),_!==s&&(De=d,_=HM()),d=_,d===s&&(d=g,n.substr(g,2)===Ab?(_=Ab,g+=2):(_=s,ce===0&&_e(WM)),_!==s&&(De=d,_=KM()),d=_,d===s&&(d=g,n.substr(g,2)===Rb?(_=Rb,g+=2):(_=s,ce===0&&_e(zM)),_!==s&&(De=d,_=GM()),d=_,d===s&&(d=g,n.substr(g,2)===Ib?(_=Ib,g+=2):(_=s,ce===0&&_e(YM)),_!==s&&(De=d,_=QM()),d=_,d===s&&(d=gq()))))))),pe[x]={nextPos:g,result:d},d)}function gq(){var d,_,x,k,L,J,ne,Te,We,Tt,_t,zt=g*49+48,er=pe[zt];return er?(g=er.nextPos,er.result):(d=g,n.substr(g,2)===Pb?(_=Pb,g+=2):(_=s,ce===0&&_e(ZM)),_!==s?(x=g,k=Sn(),k!==s?(L=Sn(),L!==s?(J=Sn(),J!==s?(ne=Sn(),ne!==s?(Te=Sn(),Te!==s?(We=Sn(),We!==s?(Tt=Sn(),Tt!==s?(_t=Sn(),_t!==s?(k=[k,L,J,ne,Te,We,Tt,_t],x=k):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u),x!==s?(De=d,_=Nb(x),d=_):(g=d,d=u)):(g=d,d=u),d===s&&(d=g,n.substr(g,2)===Db?(_=Db,g+=2):(_=s,ce===0&&_e(XM)),_!==s?(x=g,k=Sn(),k!==s?(L=Sn(),L!==s?(J=Sn(),J!==s?(ne=Sn(),ne!==s?(k=[k,L,J,ne],x=k):(g=x,x=u)):(g=x,x=u)):(g=x,x=u)):(g=x,x=u),x!==s?(De=d,_=Nb(x),d=_):(g=d,d=u)):(g=d,d=u)),pe[zt]={nextPos:g,result:d},d)}var Xb=[];function mq(d,_,x){var k=new Error(d);throw k.line=_,k.column=x,k}function Kh(d){Xb.push(d);}function br(d,_,x,k,L){var J={type:d,value:_,line:x(),column:k()};return L&&(J.key=L),J}function yq(d,_,x){var k=parseInt("0x"+d);if(!isFinite(k)||Math.floor(k)!=k||k<0||k>1114111||k>55295&&k<57344)mq("Invalid Unicode escape code: "+d,_,x);else return _q(k)}function _q(){var d=16384,_=[],x,k,L=-1,J=arguments.length;if(!J)return "";for(var ne="";++L<J;){var Te=Number(arguments[L]);Te<=65535?_.push(Te):(Te-=65536,x=(Te>>10)+55296,k=Te%1024+56320,_.push(x,k)),(L+1==J||_.length>d)&&(ne+=String.fromCharCode.apply(null,_),_.length=0);}return ne}if(Ec=o(),Ec!==s&&g===n.length)return Ec;throw Ec!==s&&g<n.length&&_e({type:"end",description:"end of input"}),Vh(null,$h,Sc)}return {SyntaxError:t,parse:r}}();});var N2=P((kne,P2)=>{function U7(e){var t=[],r=[],n="",i=Object.create(null),s=i;return o(e);function o(y){for(var b,N=0;N<y.length;N++)switch(b=y[N],b.type){case"Assign":l(b);break;case"ObjectPath":p(b);break;case"ArrayPath":m(b);break}return i}function c(y,b,N){var B=new Error(y);throw B.line=b,B.column=N,B}function l(y){var b=y.key,N=y.value,B=y.line,V=y.column,X;n?X=n+"."+b:X=b,typeof s[b]<"u"&&c("Cannot redefine existing key '"+X+"'.",B,V),s[b]=f(N),u(X)||(t.push(X),r.push(X));}function u(y){return t.indexOf(y)!==-1}function f(y){return y.type==="Array"?E(y.value):y.type==="InlineTable"?h(y.value):y.value}function h(y){for(var b=Object.create(null),N=0;N<y.length;N++){var B=y[N];B.value.type==="InlineTable"?b[B.key]=h(B.value.value):B.type==="InlineTableValue"&&(b[B.key]=f(B.value));}return b}function p(y){var b=y.value,N=b.map(w).join("."),B=y.line,V=y.column;u(N)&&c("Cannot redefine existing key '"+b+"'.",B,V),t.push(N),s=v(i,b,Object.create(null),B,V),n=b;}function m(y){var b=y.value,N=b.map(w).join("."),B=y.line,V=y.column;if(u(N)||t.push(N),t=t.filter(function(z){return z.indexOf(N)!==0}),t.push(N),s=v(i,b,[],B,V),n=N,s instanceof Array){var X=Object.create(null);s.push(X),s=X;}else c("Cannot redefine existing key '"+b+"'.",B,V);}function v(y,b,N,B,V){for(var X=[],z="",G=b.join("."),ee=y,U=0;U<b.length;U++){var ie=b[U];X.push(ie),z=X.join("."),typeof ee[ie]>"u"?U===b.length-1?ee[ie]=N:ee[ie]=Object.create(null):U!==b.length-1&&r.indexOf(z)>-1&&c("Cannot redefine existing key '"+z+"'.",B,V),ee=ee[ie],ee instanceof Array&&ee.length&&U<b.length-1&&(ee=ee[ee.length-1]);}return ee}function E(y){for(var b=null,N=0;N<y.length;N++){var B=y[N];b===null?b=B.type:B.type!==b&&c("Cannot add value of type "+B.type+" to array of type "+b+".",B.line,B.column);}return y.map(f)}function w(y){return y.indexOf(".")>-1?'"'+y+'"':y}}P2.exports={compile:U7};});var k2=P((One,D2)=>{var $7=I2(),j7=N2();D2.exports={parse:function(e){var t=$7.parse(e.toString());return j7.compile(t)}};});var z2=P((Gs,K2)=>{var k0=he("crypto");Gs=K2.exports=Au;function Au(e,t){return t=H2(e,t),Q7(e,t)}Gs.sha1=function(e){return Au(e)};Gs.keys=function(e){return Au(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})};Gs.MD5=function(e){return Au(e,{algorithm:"md5",encoding:"hex"})};Gs.keysMD5=function(e){return Au(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var Ya=k0.getHashes?k0.getHashes().slice():["sha1","md5"];Ya.push("passthrough");var j2=["buffer","hex","binary","base64"];function H2(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=t.ignoreUnknown===!0,r.respectType=t.respectType!==!1,r.respectFunctionNames=t.respectFunctionNames!==!1,r.respectFunctionProperties=t.respectFunctionProperties!==!1,r.unorderedArrays=t.unorderedArrays===!0,r.unorderedSets=t.unorderedSets!==!1,r.unorderedObjects=t.unorderedObjects!==!1,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,typeof e>"u")throw new Error("Object argument required.");for(var n=0;n<Ya.length;++n)Ya[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=Ya[n]);if(Ya.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+Ya.join(", "));if(j2.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+j2.join(", "));return r}function V2(e){if(typeof e!="function")return !1;var t=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i;return t.exec(Function.prototype.toString.call(e))!=null}function Q7(e,t){var r;t.algorithm!=="passthrough"?r=k0.createHash(t.algorithm):r=new W2,typeof r.write>"u"&&(r.write=r.update,r.end=r.update);var n=O0(t,r);if(n.dispatch(e),r.update||r.end(""),r.digest)return r.digest(t.encoding==="buffer"?void 0:t.encoding);var i=r.read();return t.encoding==="buffer"?i:i.toString(t.encoding)}Gs.writeToStream=function(e,t,r){return typeof r>"u"&&(r=t,t={}),t=H2(e,t),O0(t,r).dispatch(e)};function O0(e,t,r){r=r||[];var n=function(i){return t.update?t.update(i,"utf8"):t.write(i,"utf8")};return {dispatch:function(i){e.replacer&&(i=e.replacer(i));var s=typeof i;return i===null&&(s="null"),this["_"+s](i)},_object:function(i){var s=/\[object (.*)\]/i,a=Object.prototype.toString.call(i),o=s.exec(a);o?o=o[1]:o="unknown:["+a+"]",o=o.toLowerCase();var c=null;if((c=r.indexOf(i))>=0)return this.dispatch("[CIRCULAR:"+c+"]");if(r.push(i),typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(i))return n("buffer:"),n(i);if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](i);else {if(e.ignoreUnknown)return n("["+o+"]");throw new Error('Unknown object type "'+o+'"')}else {var l=Object.keys(i);e.unorderedObjects&&(l=l.sort()),e.respectType!==!1&&!V2(i)&&l.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(l=l.filter(function(f){return !e.excludeKeys(f)})),n("object:"+l.length+":");var u=this;return l.forEach(function(f){u.dispatch(f),n(":"),e.excludeValues||u.dispatch(i[f]),n(",");})}},_array:function(i,s){s=typeof s<"u"?s:e.unorderedArrays!==!1;var a=this;if(n("array:"+i.length+":"),!s||i.length<=1)return i.forEach(function(l){return a.dispatch(l)});var o=[],c=i.map(function(l){var u=new W2,f=r.slice(),h=O0(e,u,f);return h.dispatch(l),o=o.concat(f.slice(r.length)),u.read().toString()});return r=r.concat(o),c.sort(),this._array(c,!1)},_date:function(i){return n("date:"+i.toJSON())},_symbol:function(i){return n("symbol:"+i.toString())},_error:function(i){return n("error:"+i.toString())},_boolean:function(i){return n("bool:"+i.toString())},_string:function(i){n("string:"+i.length+":"),n(i.toString());},_function:function(i){n("fn:"),V2(i)?this.dispatch("[native]"):this.dispatch(i.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(i.name)),e.respectFunctionProperties&&this._object(i);},_number:function(i){return n("number:"+i.toString())},_xml:function(i){return n("xml:"+i.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(i){return n("regex:"+i.toString())},_uint8array:function(i){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint8clampedarray:function(i){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(i))},_int8array:function(i){return n("int8array:"),this.dispatch(Array.prototype.slice.call(i))},_uint16array:function(i){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(i))},_int16array:function(i){return n("int16array:"),this.dispatch(Array.prototype.slice.call(i))},_uint32array:function(i){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(i))},_int32array:function(i){return n("int32array:"),this.dispatch(Array.prototype.slice.call(i))},_float32array:function(i){return n("float32array:"),this.dispatch(Array.prototype.slice.call(i))},_float64array:function(i){return n("float64array:"),this.dispatch(Array.prototype.slice.call(i))},_arraybuffer:function(i){return n("arraybuffer:"),this.dispatch(new Uint8Array(i))},_url:function(i){return n("url:"+i.toString())},_map:function(i){n("map:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_set:function(i){n("set:");var s=Array.from(i);return this._array(s,e.unorderedSets!==!1)},_file:function(i){return n("file:"),this.dispatch([i.name,i.size,i.type,i.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return n("domwindow")},_bigint:function(i){return n("bigint:"+i.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function W2(){return {buf:"",write:function(e){this.buf+=e;},end:function(e){this.buf+=e;},read:function(){return this.buf}}}});var eP=P((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize();}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(e,t)=>{throw t},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}function logExceptionOnExit(e){e instanceof ExitStatus||err("exiting due to exception: "+e);}if(ENVIRONMENT_IS_NODE){var fs=he("fs"),nodePath=he("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=(e,t)=>(e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFileSync(e,t?void 0:"utf8")),readBinary=e=>{var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),t},readAsync=(e,t,r)=>{e=isFileURI(e)?new URL(e):nodePath.normalize(e),fs.readFile(e,function(n,i){n?r(n):t(i.buffer);});},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(e,t)=>{if(keepRuntimeAlive())throw process.exitCode=e,t;logExceptionOnExit(t),process.exit(e);},Module.inspect=function(){return "[Emscripten Module object]"};}else (ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?t(n.response):r();},n.onerror=r,n.send(null);},e=>document.title=e);Module.print||console.log.bind(console);var err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i));for(var s="";t<i;){var a=e[t++];if(128&a){var o=63&e[t++];if((224&a)!=192){var c=63&e[t++];if((a=(240&a)==224?(15&a)<<12|o<<6|c:(7&a)<<18|o<<12|c<<6|63&e[t++])<65536)s+=String.fromCharCode(a);else {var l=a-65536;s+=String.fromCharCode(55296|l>>10,56320|1023&l);}}else s+=String.fromCharCode((31&a)<<6|o);}else s+=String.fromCharCode(a);}return s}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var i=r,s=r+n-1,a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++a)),o<=127){if(r>=s)break;t[r++]=o;}else if(o<=2047){if(r+1>=s)break;t[r++]=192|o>>6,t[r++]=128|63&o;}else if(o<=65535){if(r+2>=s)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o;}else {if(r+3>=s)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o;}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3;}return t}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e);}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__);}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__);}function preMain(){callRuntimeCallbacks(__ATMAIN__);}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__);}function addOnPreRun(e){__ATPRERUN__.unshift(e);}function addOnInit(e){__ATINIT__.unshift(e);}function addOnPostRun(e){__ATPOSTRUN__.unshift(e);}var runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies);}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t();}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e="Aborted("+e+")"),ABORT=!0,EXITSTATUS=1,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function isFileURI(e){return e.startsWith("file://")}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw "both async and sync fetching of the wasm failed"}catch(t){abort(t);}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw "failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(e,t){readAsync(wasmBinaryFile,function(r){e(new Uint8Array(r));},t);})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var e={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function t(i,s){var a=i.exports;a=relocateExports(a,1024);var o=getDylinkMetadata(s);o.neededDynlibs&&(dynamicLibraries=o.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency();}function r(i){t(i.instance,i.module);}function n(i){return getBinaryPromise().then(function(s){return WebAssembly.instantiate(s,e)}).then(function(s){return s}).then(i,function(s){err("failed to asynchronously prepare wasm: "+s),abort(s);})}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,e).then(r,function(s){return err("wasm streaming compile failed: "+s),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e;}var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:function(e,t){var r=GOT[t];return r||(r=GOT[t]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(t)||(r.required=!0),r}};function callRuntimeCallbacks(e){for(;e.length>0;)e.shift()(Module);}function getDylinkMetadata(e){var t=0,r=0;function n(){for(var w=0,y=1;;){var b=e[t++];if(w+=(127&b)*y,y*=128,!(128&b))break}return w}function i(){var w=n();return UTF8ArrayToString(e,(t+=w)-w,w)}function s(w,y){if(w)throw new Error(y)}var a="dylink.0";if(e instanceof WebAssembly.Module){var o=WebAssembly.Module.customSections(e,a);o.length===0&&(a="dylink",o=WebAssembly.Module.customSections(e,a)),s(o.length===0,"need dylink section"),r=(e=new Uint8Array(o[0])).length;}else {s(new Uint32Array(new Uint8Array(e.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),s(e[8]!==0,"need the dylink section to be first"),t=9;var c=n();r=t+c,a=i();}var l={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){l.memorySize=n(),l.memoryAlign=n(),l.tableSize=n(),l.tableAlign=n();for(var u=n(),f=0;f<u;++f){var h=i();l.neededDynlibs.push(h);}}else for(s(a!=="dylink.0");t<r;){var p=e[t++],m=n();if(p===1)l.memorySize=n(),l.memoryAlign=n(),l.tableSize=n(),l.tableAlign=n();else if(p===2)for(u=n(),f=0;f<u;++f)h=i(),l.neededDynlibs.push(h);else if(p===3)for(var v=n();v--;){var E=i();256&n()&&l.tlsExports.add(E);}else if(p===4)for(v=n();v--;)i(),E=i(),(3&n())==1&&l.weakImports.add(E);else t+=m;}return l}function getValue(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];case"*":return HEAPU32[e>>2];default:abort("invalid type for getValue: "+t);}return null}function asmjsMangle(e){return e.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(e)?e:"_"+e}function mergeLibSymbols(e,t){for(var r in e)if(e.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=e[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=e[r]),r=="__main_argc_argv"&&(Module._main=e[r]);}}var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(e,t,r){var n=Module["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}var wasmTableMirror=[];function getWasmTableEntry(e){var t=wasmTableMirror[e];return t||(e>=wasmTableMirror.length&&(wasmTableMirror.length=e+1),wasmTableMirror[e]=t=wasmTable.get(e)),t}function dynCall(e,t,r){return e.includes("j")?dynCallLegacy(e,t,r):getWasmTableEntry(t).apply(null,r)}function createInvokeFunction(e){return function(){var t=stackSave();try{return dynCall(e,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(t),r!==r+0)throw r;_setThrew(1,0);}}}var ___heap_base=78144;function zeroMemory(e,t){return HEAPU8.fill(0,e,e+t),e}function getMemory(e){if(runtimeInitialized)return zeroMemory(_malloc(e),e);var t=___heap_base,r=t+e+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,t}function isInternalSym(e){return ["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(e)}function uleb128Encode(e,t){e<128?t.push(e):t.push(e%128|128,e>>7);}function sigToWasmTypes(e){for(var t={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:e[0]=="v"?[]:[t[e[0]]]},n=1;n<e.length;++n)r.parameters.push(t[e[n]]),e[n]==="j"&&r.parameters.push("i32");return r}function generateFuncType(e,t){var r=e.slice(0,1),n=e.slice(1),i={i:127,p:127,j:126,f:125,d:124};t.push(96),uleb128Encode(n.length,t);for(var s=0;s<n.length;++s)t.push(i[n[s]]);r=="v"?t.push(0):t.push(1,i[r]);}function convertJsFunctionToWasm(e,t){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(t),e);var r=[1];generateFuncType(t,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:e}}).exports.f}function updateTableMap(e,t){if(functionsInTableMap)for(var r=e;r<e+t;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r);}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1);}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return wasmTable.length-1}function setWasmTableEntry(e,t){wasmTable.set(e,t),wasmTableMirror[e]=wasmTable.get(e);}function addFunction(e,t){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(e))return functionsInTableMap.get(e);var r=getEmptyTableSlot();try{setWasmTableEntry(r,e);}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(e,t));}return functionsInTableMap.set(e,r),r}function updateGOT(e,t){for(var r in e)if(!isInternalSym(r)){var n=e[r];r.startsWith("orig$")&&(r=r.split("$")[1],t=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(t||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n));}}function relocateExports(e,t,r){var n={};for(var i in e){var s=e[i];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=t),n[i]=s;}return updateGOT(n,r),n}function resolveGlobalSymbol(e,t){var r;return t&&(r=asmLibraryArg["orig$"+e]),r||(r=asmLibraryArg[e])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(e)]),!r&&e.startsWith("invoke_")&&(r=createInvokeFunction(e.split("_")[1])),r}function alignMemory(e,t){return Math.ceil(e/t)*t}function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize);}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(e){var t=resolveGlobalSymbol(e,!1);return t||(t=moduleExports[e]),t}tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:function(e,t){switch(t){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(t in asmLibraryArg)return asmLibraryArg[t];var r;return t in e||(e[t]=function(){return r||(r=resolveSymbol(t)),r.apply(null,arguments)}),e[t]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";eval(func);}if(updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1;}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(e){return postInstantiation(e.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(e,t){return e.then(function(){return loadDynamicLibrary(t,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(e){loadDynamicLibrary(e,flags);}),loadModule())}function loadDynamicLibrary(e,t,r){t=t||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[e];if(n)return t.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module)),t.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!t.loadAsync||Promise.resolve(!0);function i(o){if(t.fs&&t.fs.findObject(o)){var c=t.fs.readFile(o,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),t.loadAsync?Promise.resolve(c):c}if(o=locateFile(o),t.loadAsync)return new Promise(function(l,u){readAsync(o,f=>l(new Uint8Array(f)),u);});if(!readBinary)throw new Error(o+": file not found, and synchronous loading of external files is not available");return readBinary(o)}function s(){if(typeof preloadedWasm<"u"&&preloadedWasm[e]){var o=preloadedWasm[e];return t.loadAsync?Promise.resolve(o):o}return t.loadAsync?i(e).then(function(c){return loadWebAssemblyModule(c,t,r)}):loadWebAssemblyModule(i(e),t,r)}function a(o){n.global&&mergeLibSymbols(o),n.module=o;}return n={refcount:t.nodelete?1/0:1,name:e,module:"loading",global:t.global},LDSO.loadedLibsByName[e]=n,r&&(LDSO.loadedLibsByHandle[r]=n),t.loadAsync?s().then(function(o){return a(o),!0}):(a(s()),!0)}function reportUndefinedSymbols(){for(var e in GOT)if(GOT[e].value==0){var t=resolveGlobalSymbol(e,!0);if(!t&&!GOT[e].required)continue;if(typeof t=="function")GOT[e].value=addFunction(t,t.sig);else {if(typeof t!="number")throw new Error("bad export type for `"+e+"`: "+typeof t);GOT[e].value=t;}}}function preloadDylibs(){dynamicLibraries.length?(addRunDependency(),dynamicLibraries.reduce(function(e,t){return e.then(function(){return loadDynamicLibrary(t,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency();})):reportUndefinedSymbols();}function setValue(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;case"*":HEAPU32[e>>2]=t;break;default:abort("invalid type for setValue: "+r);}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function _abort(){abort("");}function _emscripten_memcpy_big(e,t,r){HEAPU8.copyWithin(e,t,t+r);}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}function _emscripten_resize_heap(e){var t=HEAPU8.length;e>>>=0;var r=getHeapMax();if(e>r)return !1;for(var n=1;n<=4;n*=2){var i=t*(1+.2/n);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(r,(s=Math.max(e,i))+((a=65536)-s%a)%a)))return !0}var s,a;return !1}__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(PATH.isAbs(t))return t;var n;if(e===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(e).path,t.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,t)},doStat:function(e,t,r){try{var n=e(t);}catch(o){if(o&&o.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(o.node)))return -54;throw o}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),s=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(s/1e3)>>>0,(tempDouble=Math.floor(s/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=s%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},doMsync:function(e,t,r,n,i){if(!FS.isFile(t.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var s=HEAPU8.slice(e,e+r);FS.msync(t,s,i,r,n);},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t}};function _proc_exit(e){EXITSTATUS=e,keepRuntimeAlive()||(Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e));}function exitJS(e,t){EXITSTATUS=e,_proc_exit(e);}_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}function convertI32PairToI53Checked(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN}function _fd_seek(e,t,r,n,i){try{var s=convertI32PairToI53Checked(t,r);if(isNaN(s))return 61;var a=SYSCALLS.getStreamFromFD(e);return FS.llseek(a,s,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&s===0&&n===0&&(a.getdents=null),0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}function doWritev(e,t,r,n){for(var i=0,s=0;s<r;s++){var a=HEAPU32[t>>2],o=HEAPU32[t+4>>2];t+=8;var c=FS.write(e,HEAP8,a,o,n);if(c<0)return -1;i+=c,n!==void 0&&(n+=c);}return i}function _fd_write(e,t,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(e),t,r);return HEAPU32[n>>2]=i,0}catch(s){if(typeof FS>"u"||!(s instanceof FS.ErrnoError))throw s;return s.errno}}function _tree_sitter_log_callback(e,t){if(currentLogCallback){let r=UTF8ToString(t);currentLogCallback(r,e!==0);}}function _tree_sitter_parse_callback(e,t,r,n,i){var s=currentParseCallback(t,{row:r,column:n});typeof s=="string"?(setValue(i,s.length,"i32"),stringToUTF16(s,e,10240)):setValue(i,0,"i32");}function handleException(e){if(e instanceof ExitStatus||e=="unwind")return EXITSTATUS;quit_(1,e);}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,r=stackAlloc(t);return stringToUTF8Array(e,HEAP8,r,t),r}function stringToUTF16(e,t,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=t,i=(r-=2)<2*e.length?r/2:e.length,s=0;s<i;++s){var a=e.charCodeAt(s);HEAP16[t>>1]=a,t+=2;}return HEAP16[t>>1]=0,t-n}function AsciiToString(e){for(var t="";;){var r=HEAPU8[e++>>0];if(!r)return t;t+=String.fromCharCode(r);}}_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback};createWasm();Module.___wasm_call_ctors=function(){return (Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)};Module.___wasm_apply_data_relocs=function(){return (Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)};var _malloc=Module._malloc=function(){return (_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)};Module._calloc=function(){return (Module._calloc=Module.asm.calloc).apply(null,arguments)};Module._realloc=function(){return (Module._realloc=Module.asm.realloc).apply(null,arguments)};Module._free=function(){return (Module._free=Module.asm.free).apply(null,arguments)};Module._ts_language_symbol_count=function(){return (Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)};Module._ts_language_version=function(){return (Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)};Module._ts_language_field_count=function(){return (Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)};Module._ts_language_symbol_name=function(){return (Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)};Module._ts_language_symbol_for_name=function(){return (Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)};Module._ts_language_symbol_type=function(){return (Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)};Module._ts_language_field_name_for_id=function(){return (Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)};Module._memset=function(){return (Module._memset=Module.asm.memset).apply(null,arguments)};Module._memcpy=function(){return (Module._memcpy=Module.asm.memcpy).apply(null,arguments)};Module._ts_parser_delete=function(){return (Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)};Module._ts_parser_reset=function(){return (Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)};Module._ts_parser_set_language=function(){return (Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)};Module._ts_parser_timeout_micros=function(){return (Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)};Module._ts_parser_set_timeout_micros=function(){return (Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)};Module._memmove=function(){return (Module._memmove=Module.asm.memmove).apply(null,arguments)};Module._memcmp=function(){return (Module._memcmp=Module.asm.memcmp).apply(null,arguments)};Module._ts_query_new=function(){return (Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)};Module._ts_query_delete=function(){return (Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)};Module._iswspace=function(){return (Module._iswspace=Module.asm.iswspace).apply(null,arguments)};Module._iswalnum=function(){return (Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)};Module._ts_query_pattern_count=function(){return (Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)};Module._ts_query_capture_count=function(){return (Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)};Module._ts_query_string_count=function(){return (Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)};Module._ts_query_capture_name_for_id=function(){return (Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)};Module._ts_query_string_value_for_id=function(){return (Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)};Module._ts_query_predicates_for_pattern=function(){return (Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)};Module._ts_tree_copy=function(){return (Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)};Module._ts_tree_delete=function(){return (Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)};Module._ts_init=function(){return (Module._ts_init=Module.asm.ts_init).apply(null,arguments)};Module._ts_parser_new_wasm=function(){return (Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)};Module._ts_parser_enable_logger_wasm=function(){return (Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)};Module._ts_parser_parse_wasm=function(){return (Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)};Module._ts_language_type_is_named_wasm=function(){return (Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)};Module._ts_language_type_is_visible_wasm=function(){return (Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)};Module._ts_tree_root_node_wasm=function(){return (Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)};Module._ts_tree_edit_wasm=function(){return (Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)};Module._ts_tree_get_changed_ranges_wasm=function(){return (Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)};Module._ts_tree_cursor_new_wasm=function(){return (Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)};Module._ts_tree_cursor_delete_wasm=function(){return (Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)};Module._ts_tree_cursor_reset_wasm=function(){return (Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_first_child_wasm=function(){return (Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return (Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)};Module._ts_tree_cursor_goto_parent_wasm=function(){return (Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_type_id_wasm=function(){return (Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_is_named_wasm=function(){return (Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return (Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_id_wasm=function(){return (Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_start_position_wasm=function(){return (Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)};Module._ts_tree_cursor_end_position_wasm=function(){return (Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)};Module._ts_tree_cursor_start_index_wasm=function(){return (Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)};Module._ts_tree_cursor_end_index_wasm=function(){return (Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_field_id_wasm=function(){return (Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)};Module._ts_tree_cursor_current_node_wasm=function(){return (Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)};Module._ts_node_symbol_wasm=function(){return (Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)};Module._ts_node_child_count_wasm=function(){return (Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)};Module._ts_node_named_child_count_wasm=function(){return (Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)};Module._ts_node_child_wasm=function(){return (Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)};Module._ts_node_named_child_wasm=function(){return (Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)};Module._ts_node_child_by_field_id_wasm=function(){return (Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)};Module._ts_node_next_sibling_wasm=function(){return (Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)};Module._ts_node_prev_sibling_wasm=function(){return (Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)};Module._ts_node_next_named_sibling_wasm=function(){return (Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)};Module._ts_node_prev_named_sibling_wasm=function(){return (Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)};Module._ts_node_parent_wasm=function(){return (Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)};Module._ts_node_descendant_for_index_wasm=function(){return (Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)};Module._ts_node_named_descendant_for_index_wasm=function(){return (Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)};Module._ts_node_descendant_for_position_wasm=function(){return (Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)};Module._ts_node_named_descendant_for_position_wasm=function(){return (Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)};Module._ts_node_start_point_wasm=function(){return (Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)};Module._ts_node_end_point_wasm=function(){return (Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)};Module._ts_node_start_index_wasm=function(){return (Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)};Module._ts_node_end_index_wasm=function(){return (Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)};Module._ts_node_to_string_wasm=function(){return (Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)};Module._ts_node_children_wasm=function(){return (Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)};Module._ts_node_named_children_wasm=function(){return (Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)};Module._ts_node_descendants_of_type_wasm=function(){return (Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)};Module._ts_node_is_named_wasm=function(){return (Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)};Module._ts_node_has_changes_wasm=function(){return (Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)};Module._ts_node_has_error_wasm=function(){return (Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)};Module._ts_node_is_missing_wasm=function(){return (Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)};Module._ts_query_matches_wasm=function(){return (Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)};Module._ts_query_captures_wasm=function(){return (Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)};Module.___cxa_atexit=function(){return (Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)};Module._iswdigit=function(){return (Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)};Module._iswalpha=function(){return (Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)};Module._iswlower=function(){return (Module._iswlower=Module.asm.iswlower).apply(null,arguments)};Module._memchr=function(){return (Module._memchr=Module.asm.memchr).apply(null,arguments)};Module._strlen=function(){return (Module._strlen=Module.asm.strlen).apply(null,arguments)};Module._towupper=function(){return (Module._towupper=Module.asm.towupper).apply(null,arguments)};var _setThrew=Module._setThrew=function(){return (_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return (stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return (stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return (stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)};Module.__Znwm=function(){return (Module.__Znwm=Module.asm._Znwm).apply(null,arguments)};Module.__ZdlPv=function(){return (Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)};Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return (Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)};Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return (Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)};Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return (Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)};Module.dynCall_jiji=function(){return (Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)};Module._orig$ts_parser_timeout_micros=function(){return (Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)};Module._orig$ts_parser_set_timeout_micros=function(){return (Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)};var calledRun;function callMain(e){var t=Module._main;if(t){(e=e||[]).unshift(thisProgram);var r=e.length,n=stackAlloc(4*(r+1)),i=n>>2;e.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a);}),HEAP32[i]=0;try{var s=t(r,n);return exitJS(s),s}catch(a){return handleException(a)}}}Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e);};var dylibsLoaded=!1;function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()));}e=e||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("");},1),t();},1)):t()));}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0;}setLanguage(t){let r;if(t){if(t.constructor!==Language)throw new Error("Argument must be a Language");{r=t[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,t=null;return this.language=t,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(t,r,n){if(typeof t=="string")currentParseCallback=(c,l,u)=>t.slice(c,u);else {if(typeof t!="function")throw new Error("Argument must be a string or a function");currentParseCallback=t;}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,s=0;if(n&&n.includedRanges){i=n.includedRanges.length,s=C._calloc(i,SIZE_OF_RANGE);let c=s;for(let l=0;l<i;l++)marshalRange(c,n.includedRanges[l]),c+=SIZE_OF_RANGE;}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,s,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let o=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,o}reset(){C._ts_parser_reset(this[0]);}setTimeoutMicros(t){C._ts_parser_set_timeout_micros(this[0],t);}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(t){if(t){if(typeof t!="function")throw new Error("Logger callback must be a function")}else t=null;return this.logCallback=t,this}getLogger(){return this.logCallback}}class Tree{constructor(t,r,n,i){assertInternal(t),this[0]=r,this.language=n,this.textCallback=i;}copy(){let t=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,t,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0;}edit(t){marshalEdit(t),C._ts_tree_edit_wasm(this[0]);}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(t){if(t.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],t[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let s=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n);}return i}}class Node{constructor(t,r){assertInternal(t),this.tree=r;}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(t){return this.id===t.id}child(t){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}namedChild(t){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldId(t){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],t),unmarshalNode(this.tree)}childForFieldName(t){let r=this.tree.language.fields.indexOf(t);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(t),t>0){let n=r;for(let i=0;i<t;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r);}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let t=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(t),t>0){let n=r;for(let i=0;i<t;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r);}}return this._namedChildren}descendantsOfType(t,r,n){Array.isArray(t)||(t=[t]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],s=this.tree.language.types;for(let u=0,f=s.length;u<f;u++)t.includes(s[u])&&i.push(u);let a=C._malloc(SIZE_OF_INT*i.length);for(let u=0,f=i.length;u<f;u++)setValue(a+u*SIZE_OF_INT,i[u],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let o=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=new Array(o);if(o>0){let u=c;for(let f=0;f<o;f++)l[f]=unmarshalNode(this.tree,u),u+=SIZE_OF_NODE;}return C._free(c),C._free(a),l}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,t,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(t,r=t){if(typeof t!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,t,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,t),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(t,r=t){if(!isPoint(t)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,t),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let t=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(t);return C._free(t),r}}class TreeCursor{constructor(t,r){assertInternal(t),this.tree=r,unmarshalTreeCursor(this);}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0;}reset(t){marshalNode(t),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this);}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let t=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,t,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoNextSibling(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}gotoParent(){marshalTreeCursor(this);let t=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),t===1}}class Language{constructor(t,r){assertInternal(t),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let s=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=s!==0?UTF8ToString(s):null;}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(t){let r=this.fields.indexOf(t);return r!==-1?r:null}fieldNameForId(t){return this.fields[t]||null}idForNodeType(t,r){let n=lengthBytesUTF8(t),i=C._malloc(n+1);stringToUTF8(t,i,n+1);let s=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(t){let r=C._ts_language_symbol_name(this[0],t);return r?UTF8ToString(r):null}nodeTypeIsNamed(t){return !!C._ts_language_type_is_named_wasm(this[0],t)}nodeTypeIsVisible(t){return !!C._ts_language_type_is_visible_wasm(this[0],t)}query(t){let r=lengthBytesUTF8(t),n=C._malloc(r+1);stringToUTF8(t,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let v=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,w=t.substr(E,100).split(`
`)[0],y,b=w.match(QUERY_WORD_REGEX)[0];switch(v){case 2:y=new RangeError(`Bad node name '${b}'`);break;case 3:y=new RangeError(`Bad field name '${b}'`);break;case 4:y=new RangeError(`Bad capture name @${b}`);break;case 5:y=new TypeError(`Bad pattern structure at offset ${E}: '${w}'...`),b="";break;default:y=new SyntaxError(`Bad syntax at offset ${E}: '${w}'...`),b="";}throw y.index=E,y.length=b.length,C._free(n),y}let s=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),o=C._ts_query_pattern_count(i),c=new Array(a),l=new Array(s);for(let v=0;v<a;v++){let E=C._ts_query_capture_name_for_id(i,v,TRANSFER_BUFFER),w=getValue(TRANSFER_BUFFER,"i32");c[v]=UTF8ToString(E,w);}for(let v=0;v<s;v++){let E=C._ts_query_string_value_for_id(i,v,TRANSFER_BUFFER),w=getValue(TRANSFER_BUFFER,"i32");l[v]=UTF8ToString(E,w);}let u=new Array(o),f=new Array(o),h=new Array(o),p=new Array(o),m=new Array(o);for(let v=0;v<o;v++){let E=C._ts_query_predicates_for_pattern(i,v,TRANSFER_BUFFER),w=getValue(TRANSFER_BUFFER,"i32");p[v]=[],m[v]=[];let y=[],b=E;for(let N=0;N<w;N++){let B=getValue(b,"i32");b+=SIZE_OF_INT;let V=getValue(b,"i32");if(b+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:c[V]});else if(B===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:l[V]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let X=y[0].value,z=!0;switch(X){case"not-eq?":z=!1;case"eq?":if(y.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(y.length-1));if(y[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${y[1].value}"`);if(y[2].type==="capture"){let ie=y[1].name,me=y[2].name;m[v].push(function(Pe){let W,K;for(let se of Pe)se.name===ie&&(W=se.node),se.name===me&&(K=se.node);return W===void 0||K===void 0||W.text===K.text===z});}else {let ie=y[1].name,me=y[2].value;m[v].push(function(Pe){for(let W of Pe)if(W.name===ie)return W.node.text===me===z;return !0});}break;case"not-match?":z=!1;case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${y[2].value}.`);let G=y[1].name,ee=new RegExp(y[2].value);m[v].push(function(ie){for(let me of ie)if(me.name===G)return ee.test(me.node.text)===z;return !0});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ie=>ie.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');u[v]||(u[v]={}),u[v][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${X}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ie=>ie.type!=="string"))throw new Error(`Arguments to \`#${X}\` predicate must be a strings.".`);let U=X==="is?"?f:h;U[v]||(U[v]={}),U[v][y[1].value]=y[2]?y[2].value:null;break;default:p[v].push({operator:X,operands:y.slice(1)});}y.length=0;}}Object.freeze(u[v]),Object.freeze(f[v]),Object.freeze(h[v]);}return C._free(n),new Query(INTERNAL,i,c,m,p,Object.freeze(u),Object.freeze(f),Object.freeze(h))}static load(t){let r;if(t instanceof Uint8Array)r=Promise.resolve(t);else {let i=t;if(typeof process<"u"&&process.versions&&process.versions.node){let s=he("fs");r=Promise.resolve(s.readFileSync(i));}else r=fetch(i).then(s=>s.arrayBuffer().then(a=>{if(s.ok)return new Uint8Array(a);{let o=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${s.status}.

${o}`)}}));}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let s=Object.keys(i),a=s.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(s,null,2)}`);let o=i[a]();return new Language(INTERNAL,o)})}}class Query{constructor(t,r,n,i,s,a,o,c){assertInternal(t),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=s,this.setProperties=a,this.assertedProperties=o,this.refutedProperties=c,this.exceededMatchLimit=!1;}delete(){C._ts_query_delete(this[0]),this[0]=0;}matches(t,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let s=i.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_matches_wasm(this[0],t.tree[0],r.row,r.column,n.row,n.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=new Array(a);this.exceededMatchLimit=!!c;let u=0,f=o;for(let h=0;h<a;h++){let p=getValue(f,"i32");f+=SIZE_OF_INT;let m=getValue(f,"i32");f+=SIZE_OF_INT;let v=new Array(m);if(f=unmarshalCaptures(this,t.tree,f,v),this.textPredicates[p].every(E=>E(v))){l[u++]={pattern:p,captures:v};let E=this.setProperties[p];E&&(l[h].setProperties=E);let w=this.assertedProperties[p];w&&(l[h].assertedProperties=w);let y=this.refutedProperties[p];y&&(l[h].refutedProperties=y);}}return l.length=u,C._free(o),l}captures(t,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let s=i.matchLimit;if(s===void 0)s=0;else if(typeof s!="number")throw new Error("Arguments must be numbers");marshalNode(t),C._ts_query_captures_wasm(this[0],t.tree[0],r.row,r.column,n.row,n.column,s);let a=getValue(TRANSFER_BUFFER,"i32"),o=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),l=[];this.exceededMatchLimit=!!c;let u=[],f=o;for(let h=0;h<a;h++){let p=getValue(f,"i32");f+=SIZE_OF_INT;let m=getValue(f,"i32");f+=SIZE_OF_INT;let v=getValue(f,"i32");if(f+=SIZE_OF_INT,u.length=m,f=unmarshalCaptures(this,t.tree,f,u),this.textPredicates[p].every(E=>E(u))){let E=u[v],w=this.setProperties[p];w&&(E.setProperties=w);let y=this.assertedProperties[p];y&&(E.assertedProperties=y);let b=this.refutedProperties[p];b&&(E.refutedProperties=b),l.push(E);}}return C._free(o),l}predicatesForPattern(t){return this.predicates[t]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(e,t,r){let n=r-t,i=e.textCallback(t,null,r);for(t+=i.length;t<r;){let s=e.textCallback(t,null,r);if(!(s&&s.length>0))break;t+=s.length,i+=s;}return t>r&&(i=i.slice(0,n)),i}function unmarshalCaptures(e,t,r,n){for(let i=0,s=n.length;i<s;i++){let a=getValue(r,"i32"),o=unmarshalNode(t,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:e.captureNames[a],node:o};}return r}function assertInternal(e){if(e!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(e){return e&&typeof e.row=="number"&&typeof e.column=="number"}function marshalNode(e){let t=TRANSFER_BUFFER;setValue(t,e.id,"i32"),t+=SIZE_OF_INT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.row,"i32"),t+=SIZE_OF_INT,setValue(t,e.startPosition.column,"i32"),t+=SIZE_OF_INT,setValue(t,e[0],"i32");}function unmarshalNode(e,t=TRANSFER_BUFFER){let r=getValue(t,"i32");if(r===0)return null;let n=getValue(t+=SIZE_OF_INT,"i32"),i=getValue(t+=SIZE_OF_INT,"i32"),s=getValue(t+=SIZE_OF_INT,"i32"),a=getValue(t+=SIZE_OF_INT,"i32"),o=new Node(INTERNAL,e);return o.id=r,o.startIndex=n,o.startPosition={row:i,column:s},o[0]=a,o}function marshalTreeCursor(e,t=TRANSFER_BUFFER){setValue(t+0*SIZE_OF_INT,e[0],"i32"),setValue(t+1*SIZE_OF_INT,e[1],"i32"),setValue(t+2*SIZE_OF_INT,e[2],"i32");}function unmarshalTreeCursor(e){e[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),e[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),e[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32");}function marshalPoint(e,t){setValue(e,t.row,"i32"),setValue(e+SIZE_OF_INT,t.column,"i32");}function unmarshalPoint(e){return {row:getValue(e,"i32"),column:getValue(e+SIZE_OF_INT,"i32")}}function marshalRange(e,t){marshalPoint(e,t.startPosition),marshalPoint(e+=SIZE_OF_POINT,t.endPosition),setValue(e+=SIZE_OF_POINT,t.startIndex,"i32"),setValue(e+=SIZE_OF_INT,t.endIndex,"i32"),e+=SIZE_OF_INT;}function unmarshalRange(e){let t={};return t.startPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.endPosition=unmarshalPoint(e),e+=SIZE_OF_POINT,t.startIndex=getValue(e,"i32"),e+=SIZE_OF_INT,t.endIndex=getValue(e,"i32"),t}function marshalEdit(e){let t=TRANSFER_BUFFER;marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.oldEndPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.newEndPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.oldEndIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.newEndIndex,"i32"),t+=SIZE_OF_INT;}for(let e of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,e,{value:ParserImpl.prototype[e],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise();};}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter);});var j0=P((Use,mP)=>{var $0=class{constructor(t={}){let r=t.base||1.001,n=t.precision||1e-9;if(!(r>1)||!(r<1.5))throw new Error("base must be a number between 1 and 1.5");if(r+=1e-9,r=2**(1/Math.ceil(Math.log(2)/Math.log(r))),r===1)throw new Error("base too close to 1");n=Number.parseFloat(""+n);let i=Math.ceil(1/(r-1)),s=n*i;this._thresh=s,this._precision=n,this._base=r;}getBase(){return this._base}getPrecision(){return this._precision}round(t){if(typeof t!="number"&&(t=Number.parseFloat(t)),Number.isNaN(t))throw new Error("Attempt to round a non-numeric value: "+t);return t<0?-this.round(-t):t<this._thresh?Math.round(t/this._precision)*this._precision:this._thresh*this._base**Math.round(Math.log(t/this._thresh)/Math.log(this._base))}upper(t){return t<0?-this.lower(-t):(t=this.round(t),t<this._thresh?t+this._precision/2:t*Math.sqrt(this._base))}lower(t){return t<0?-this.upper(-t):(t=this.round(t),t<=this._thresh?t-this._precision/2:t/Math.sqrt(this._base))}shorten(t,r){return t===void 0?t:r===void 0?Pu(this.lower(t),this.upper(t)):Pu(t,r)}};function Pu(e,t,r=10){if(e===t)return e;if(e*t<=0)return 0;if(t<0)return -Pu(-t,-e,r);if(e>t)return Pu(t,e,r);let n=-Math.floor(Math.log(t-e)/Math.log(r));for(;Math.ceil(e*r**n)<=Math.floor(t*r**n);)n--;return n++,n>=0?Math.ceil(e*r**n)/r**n:Math.ceil(e/r**-n)*r**-n}mP.exports={Binning:$0,shorten:Pu};});var _P=P(($se,yP)=>{var{Binning:uz}=j0(),cz="stats-logscale/univariate@1.0",Nu=class e extends uz{constructor(t={}){super(t),this.storage=new Map,this._count=0,this._cache={},this.neat=new Du(this),t.bins&&this.addWeighted(t.bins);}add(...t){return this._cache={},t.forEach(r=>{let n=this.round(r),i=this.storage.get(n)??0;this.storage.set(n,i+1),this._count++;}),this}addWeighted(t){return this._cache={},t.forEach(r=>{let n=r[0],i=Number.parseFloat(r[1]);if(Number.isNaN(i))throw new Error("Attempt to provide a non-numeric weight");let s=this.round(n),a=(this.storage.get(s)??0)+i;a<=0?(this.storage.delete(s),this._count+=i-a):(this.storage.set(s,a),this._count+=i);}),this}toJSON(){return {version:cz,precision:this.getPrecision(),base:this.getBase(),bins:this.getBins()}}clone(t={}){let r=this.getBins(t);return t.transform&&(r=r.map(n=>[t.transform(n[0]),n[1]])),new e({precision:t.precision??this.getPrecision(),base:t.base??this.getBase(),bins:r})}getBins(t){if(this._cache.data||(this._cache.data=[...this.storage].sort((o,c)=>o[0]-c[0])),!t)return this._cache.data;let r=Math.max(t.min??-1/0,this.percentile(t.ltrim??0)),n=Math.min(t.max??1/0,this.percentile(100-(t.rtrim??0)));if(!t.winsorize)return this._cache.data.filter(o=>o[0]>=r&&o[0]<=n);let i=[this.round(r),0],s=[this.round(n),0],a=[i];for(let[o,c]of this._cache.data)o<=i[0]?i[1]+=c:o>=s[0]?s[1]+=c:a.push([o,c]);return s[1]>0&&a.push(s),a}count(){return this._count}min(){let t=this.getBins();return this.lower(t[0][0])}max(){let t=this.getBins();return this.upper(t[t.length-1][0])}sumOf(t){let r=0;return [...this.storage].forEach(n=>{r+=n[1]*t(n[0]);}),r}E(t){return this._count?this.sumOf(t)/this._count:void 0}mean(){return this._count?this.sumOf(t=>t)/this._count:void 0}stdev(){if(this._count<2)return;let t=this.mean();return Math.sqrt(this.sumOf(r=>(r-t)*(r-t))/(this._count-1))}skewness(){let t=this.count();return t<3?void 0:t*t/((t-1)*(t-2))*this.momentStd(3)}kurtosis(){let t=this.count();if(t<4)return;let r=t*t*(t+1)/((t-1)*(t-2)*(t-3)),n=(t-1)*(t-1)/((t-2)*(t-3));return this.momentStd(4)*r-3*n}moment(t,r){if(!Number.isInteger(t))throw new Error("Cannot calculate non-integer moment (did you mean momentAbs?)");return r===void 0&&(r=this.mean()),this.E(n=>(n-r)**t)}momentAbs(t=1,r){return r===void 0&&(r=this.mean()),this.E(n=>Math.abs(n-r)**t)}momentStd(t){return this.moment(t)/this.stdev()**t}quantile(t){let r=t*this._count,n=this._cumulative(),i=0,s=n.length;for(;i+1<s;){let c=Math.floor((s+i)/2);n[c][1]>=r?s=c:i=c;}let a=this.lower(n[i][0]),o=this.upper(n[i][0])-a;return a+o*(r-n[i][1])/(n[i][2]-n[i][1])}percentile(t){return this.quantile(t/100)}median(){return this.quantile(.5)}cdf(t){return this._rawCdf(t)/this._count}_rawCdf(t){let r=this._cumulative(),n=this.round(t),i=0,s=r.length;for(;i<s;){let c=Math.floor((s+i)/2);r[c][0]<n?i=c+1:s=c;}if(i>=r.length)return this._count;let a=i>0?r[i-1][2]:0,o=n!==r[i][0]?0:(r[i][2]-r[i][1])*(t-this.lower(t))/(this.upper(t)-this.lower(t));return a+o}histogram(t={}){if(!this._count)return [];let r=this.min(),n=this.max(),i=t.count||10,s=[],a=r,o=(n-r)/i;for(let c=0;c<i;c++)s.push([this._rawCdf(a+o),a,a+=o]);for(let c=s.length;c-- >1;)s[c][0]-=s[c-1][0];if(s[0][0]-=this._rawCdf(r),t.scale){let c=0;for(let l=0;l<s.length;l++)c<s[l][0]&&(c=s[l][0]);for(let l=0;l<s.length;l++)s[l][0]=s[l][0]*t.scale/c;}return s}_cumulative(){if(!this._cache.cumulative){let t=this.getBins(),r=[],n=0;for(let i=0;i<t.length;i++)r.push([t[i][0],n,n+=t[i][1]]);this._cache.cumulative=r;}return this._cache.cumulative}};["cdf+","kurtosis","max","mean","min","moment+","momentAbs+","momentStd+","quantile+","skewness","stdev"].forEach(e=>{let t=!!e.match(/\+/);t&&(e=e.replace("+",""));let r=Nu.prototype[e];if(typeof r!="function")throw new Error('method "'+e+'" is cached but never defined');Nu.prototype[e]=t?function(...n){if(this._count===0)return;this._cache[e]===void 0&&(this._cache[e]={});let i=n.join(":");return this._cache[e][i]===void 0&&(this._cache[e][i]=r.apply(this,n)),this._cache[e][i]}:function(){if(this._count!==0)return this._cache[e]===void 0&&(this._cache[e]=r.apply(this)),this._cache[e]};});var Du=class{constructor(t){this._main=t;}min(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[0][0])}max(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[t.length-1][0])}};["E","kurtosis","mean","median","moment","momentAbs","momentStd","percentile","quantile","skewness","stdev","sumOf"].forEach(e=>{Du.prototype[e]=function(t){return this._main.shorten(this._main[e](t))};});["cdf","count"].forEach(e=>{Du.prototype[e]=function(t){return this._main[e](t)};});yP.exports={Univariate:Nu};});var vP=P((jse,V0)=>{(()=>{let{Binning:e}=j0(),{Univariate:t}=_P(),r={Binning:e,Univariate:t};typeof window<"u"&&(window.logstat=r),typeof V0=="object"&&(V0.exports=r);})();});var SP=P((Hse,bP)=>{bP.exports=ku();});var wP=P((Wse,EP)=>{function lz(){return !!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}EP.exports=lz;});var Je=P((Kse,CP)=>{CP.exports={options:{usePureJavaScript:!1}};});var AP=P((zse,TP)=>{var W0={};TP.exports=W0;var xP={};W0.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=fz(e,t);else {var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var c=0,l=e[i];c<o.length;++c)l+=o[c]<<8,o[c]=l%s,l=l/s|0;for(;l>0;)o.push(l%s),l=l/s|0;}for(i=0;e[i]===0&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]];}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`);}return n};W0.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=xP[t];if(!r){r=xP[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n;}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var c=0,l=o;c<a.length;++c)l+=a[c]*i,a[c]=l&255,l>>=8;for(;l>0;)a.push(l&255),l>>=8;}for(var u=0;e[u]===s&&u<e.length-1;++u)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function fz(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0;}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}});var mt=P((Gse,NP)=>{var RP=Je(),IP=AP(),H=NP.exports=RP.util=RP.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){H.nextTick=process.nextTick,typeof setImmediate=="function"?H.setImmediate=setImmediate:H.setImmediate=H.nextTick;return}if(typeof setImmediate=="function"){H.setImmediate=function(){return setImmediate.apply(void 0,arguments)},H.nextTick=function(o){return setImmediate(o)};return}if(H.setImmediate=function(o){setTimeout(o,0);},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(u){u();});}};var e="forge.setImmediate",t=[];H.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*");},window.addEventListener("message",o,!0);}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(l){l();});}).observe(i,{attributes:!0});var s=H.setImmediate;H.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n));};}H.nextTick=H.setImmediate;})();H.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;H.globalScope=function(){return H.isNodejs?global:typeof self>"u"?window:self}();H.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};H.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};H.isArrayBufferView=function(e){return e&&H.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Ou(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}H.ByteBuffer=K0;function K0(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(H.isArrayBuffer(e)||H.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else {var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t);}catch{for(var r=0;r<t.length;++r)this.putByte(t[r]);}}else (e instanceof K0||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0;}H.ByteStringBuffer=K0;var dz=4096;H.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>dz&&(this.data.substr(0,1),this._constructedStringLength=0);};H.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};H.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};H.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};H.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};H.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};H.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(H.encodeUtf8(e))};H.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};H.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};H.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};H.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};H.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};H.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};H.ByteStringBuffer.prototype.putInt=function(e,t){Ou(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};H.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};H.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};H.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};H.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};H.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};H.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};H.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};H.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};H.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};H.ByteStringBuffer.prototype.getInt=function(e){Ou(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};H.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};H.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};H.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};H.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};H.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};H.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};H.ByteStringBuffer.prototype.copy=function(){var e=H.createBuffer(this.data);return e.read=this.read,e};H.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};H.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};H.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};H.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16);}return e};H.ByteStringBuffer.prototype.toString=function(){return H.decodeUtf8(this.bytes())};function hz(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=H.isArrayBuffer(e),n=H.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset);}H.DataBuffer=hz;H.DataBuffer.prototype.length=function(){return this.write-this.read};H.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};H.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};H.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};H.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};H.DataBuffer.prototype.putBytes=function(e,t){if(H.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(H.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof H.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&H.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof H.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=H.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=H.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=H.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};H.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};H.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};H.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};H.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};H.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};H.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};H.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};H.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};H.DataBuffer.prototype.putInt=function(e,t){Ou(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};H.DataBuffer.prototype.putSignedInt=function(e,t){return Ou(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};H.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};H.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};H.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};H.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};H.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};H.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};H.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};H.DataBuffer.prototype.getInt=function(e){Ou(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};H.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};H.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};H.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};H.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};H.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};H.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};H.DataBuffer.prototype.copy=function(){return new H.DataBuffer(this)};H.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0;}return this};H.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};H.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};H.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16);}return e};H.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return H.binary.raw.encode(t);if(e==="hex")return H.binary.hex.encode(t);if(e==="base64")return H.binary.base64.encode(t);if(e==="utf8")return H.text.utf8.decode(t);if(e==="utf16")return H.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};H.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=H.encodeUtf8(e)),new H.ByteBuffer(e)};H.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};H.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s,n};H.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};H.bytesToHex=function(e){return H.createBuffer(e).toHex()};H.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var ts="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",rs=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],PP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";H.encode64=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),r+=ts.charAt(i>>2),r+=ts.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ts.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":ts.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};H.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,a=0;a<e.length;)r=rs[e.charCodeAt(a++)-43],n=rs[e.charCodeAt(a++)-43],i=rs[e.charCodeAt(a++)-43],s=rs[e.charCodeAt(a++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};H.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};H.decodeUtf8=function(e){return decodeURIComponent(escape(e))};H.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:IP.encode,decode:IP.decode}};H.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};H.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};H.binary.hex.encode=H.bytesToHex;H.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};H.binary.base64.encode=function(e,t){for(var r="",n="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],r+=ts.charAt(i>>2),r+=ts.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=ts.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":ts.charAt(a&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};H.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,a,o,c=0,l=r;c<e.length;)i=rs[e.charCodeAt(c++)-43],s=rs[e.charCodeAt(c++)-43],a=rs[e.charCodeAt(c++)-43],o=rs[e.charCodeAt(c++)-43],n[l++]=i<<2|s>>4,a!==64&&(n[l++]=(s&15)<<4|a>>2,o!==64&&(n[l++]=(a&3)<<6|o));return t?l-r:n.subarray(0,l)};H.binary.base58.encode=function(e,t){return H.binary.baseN.encode(e,PP,t)};H.binary.base58.decode=function(e,t){return H.binary.baseN.decode(e,PP,t)};H.text={utf8:{},utf16:{}};H.text.utf8.encode=function(e,t,r){e=H.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};H.text.utf8.decode=function(e){return H.decodeUtf8(String.fromCharCode.apply(null,e))};H.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n};H.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};H.deflate=function(e,t,r){if(t=H.decode64(e.deflate(H.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4);}return t};H.inflate=function(e,t,r){var n=e.inflate(H.encode64(t)).rval;return n===null?null:H.decode64(n)};var z0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=H.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},G0=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null;}else r=r.rval;return r!==null&&(r=JSON.parse(H.decode64(r))),r},pz=function(e,t,r,n){var i=G0(e,t);i===null&&(i={}),i[r]=n,z0(e,t,i);},gz=function(e,t,r){var n=G0(e,t);return n!==null&&(n=r in n?n[r]:null),n},mz=function(e,t,r){var n=G0(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),z0(e,t,n);}},yz=function(e,t){z0(e,t,null);},Tf=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,a=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash";}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0);}catch(c){a=c;}if(s)break}if(!s)throw a;return n};H.setItem=function(e,t,r,n,i){Tf(pz,arguments,i);};H.getItem=function(e,t,r,n){return Tf(gz,arguments,n)};H.removeItem=function(e,t,r,n){Tf(mz,arguments,n);};H.clearItems=function(e,t,r){Tf(yz,arguments,r);};H.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return !1;return !0};H.format=function(e){for(var t=/%./g,r,n,i=0,s=[],a=0;r=t.exec(e);){n=e.substring(a,t.lastIndex-2),n.length>0&&s.push(n),a=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>");}}return s.push(e.substring(a)),s.join("")};H.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=r===void 0?",":r,o=n===void 0?".":n,c=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+o:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-l).toFixed(s).slice(2):"")};H.formatSize=function(e){return e>=1073741824?e=H.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=H.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=H.formatNumber(e/1024,0)+" KiB":e=H.formatNumber(e,0)+" bytes",e};H.bytesFromIP=function(e){return e.indexOf(".")!==-1?H.bytesFromIPv4(e):e.indexOf(":")!==-1?H.bytesFromIPv6(e):null};H.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=H.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n);}return t.getBytes()};H.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=H.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=H.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s);}return n.getBytes()};H.bytesToIP=function(e){return e.length===4?H.bytesToIPv4(e):e.length===16?H.bytesToIPv6(e):null};H.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};H.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=H.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=t.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1));}t.push(s);}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""));}return t.join(":")};H.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in H&&!e.update)return t(null,H.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return H.cores=navigator.hardwareConcurrency,t(null,H.cores);if(typeof Worker>"u")return H.cores=1,t(null,H.cores);if(typeof Blob>"u")return H.cores=2,t(null,H.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),c=o+4;Date.now()<c;);self.postMessage({st:o,et:c});});}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,o,c){if(o===0){var l=Math.floor(a.reduce(function(u,f){return u+f},0)/a.length);return H.cores=Math.max(1,l),URL.revokeObjectURL(r),t(null,H.cores)}i(c,function(u,f){a.push(s(c,f)),n(a,o-1,c);});}function i(a,o){for(var c=[],l=[],u=0;u<a;++u){var f=new Worker(r);f.addEventListener("message",function(h){if(l.push(h.data),l.length===a){for(var p=0;p<a;++p)c[p].terminate();o(null,l);}}),c.push(f);}for(var u=0;u<a;++u)c[u].postMessage(u);}function s(a,o){for(var c=[],l=0;l<a;++l)for(var u=o[l],f=c[l]=[],h=0;h<a;++h)if(l!==h){var p=o[h];(u.st>p.st&&u.st<p.et||p.st>u.st&&p.st<u.et)&&f.push(h);}return c.reduce(function(m,v){return Math.max(m,v.length)},0)}};});var Af=P((Yse,DP)=>{var hr=Je();mt();DP.exports=hr.cipher=hr.cipher||{};hr.cipher.algorithms=hr.cipher.algorithms||{};hr.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=hr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new hr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};hr.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=hr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new hr.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};hr.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),hr.cipher.algorithms[e]=t;};hr.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in hr.cipher.algorithms?hr.cipher.algorithms[e]:null};var Y0=hr.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e);};Y0.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=hr.util.createBuffer(),this.output=e.output||hr.util.createBuffer(),this.mode.start(t);};Y0.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact();};Y0.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};});var Z0=P((Qse,kP)=>{var pr=Je();mt();pr.cipher=pr.cipher||{};var it=kP.exports=pr.cipher.modes=pr.cipher.modes||{};it.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints);};it.ecb.prototype.start=function(e){};it.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);};it.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);};it.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};it.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return !1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};it.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints);};it.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0);}else if("iv"in e)this._iv=Rf(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};it.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock;};it.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return !0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0);};it.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};it.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return !1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};it.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Rf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Rf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;};it.ofb.prototype.decrypt=it.ofb.prototype.encrypt;it.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0;};it.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Rf(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0;};it.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else {var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;}If(this._inBlock);};it.ctr.prototype.decrypt=it.ctr.prototype.encrypt;it.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=pr.util.createBuffer(),this._partialBytes=0,this._R=3774873600;};it.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=pr.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=pr.util.createBuffer(e.additionalData):r=pr.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=pr.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else {for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Q0(n*8)));}this._inBlock=this._j0.slice(0),If(this._inBlock),this._partialBytes=0,r=pr.util.createBuffer(r),this._aDataLength=Q0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);};it.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return !0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize;}else {var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a);}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize;}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0;}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),If(this._inBlock);};it.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return !0;this.cipher.encrypt(this._inBlock,this._outBlock),If(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize;};it.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=pr.util.createBuffer();var n=this._aDataLength.concat(Q0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};it.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);}return r};it.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R);};it.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3];}return t};it.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};it.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],c=a/n|0,l=(n-1-a%n)*t;o[c]=1<<t-1<<l,s[a]=this.generateSubHashTable(this.multiply(o,e),t);}return s};it.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],c=i[a];i[s+a]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]];}s*=2;}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]];}return i};function Rf(e,t){if(typeof e=="string"&&(e=pr.util.createBuffer(e)),pr.util.isArray(e)&&e.length>4){var r=e;e=pr.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n]);}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!pr.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i;}return e}function If(e){e[e.length-1]=e[e.length-1]+1&4294967295;}function Q0(e){return [e/4294967296|0,e&4294967295]}});var ns=P((Zse,FP)=>{var Lt=Je();Af();Z0();mt();FP.exports=Lt.aes=Lt.aes||{};Lt.aes.startEncrypting=function(e,t,r,n){var i=Pf({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Lt.aes.createEncryptionCipher=function(e,t){return Pf({key:e,output:null,decrypt:!1,mode:t})};Lt.aes.startDecrypting=function(e,t,r,n){var i=Pf({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Lt.aes.createDecryptionCipher=function(e,t){return Pf({key:e,output:null,decrypt:!0,mode:t})};Lt.aes.Algorithm=function(e,t){ey||BP();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return J0(r._w,n,i,!1)},decrypt:function(n,i){return J0(r._w,n,i,!0)}}}),r._init=!1;};Lt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Lt.util.createBuffer(t);else if(Lt.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Lt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n]);}if(!Lt.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32());}}if(!Lt.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=LP(t,e.decrypt&&!a),this._init=!0;}};Lt.aes._expandKey=function(e,t){return ey||BP(),LP(e,t)};Lt.aes._updateBlock=J0;Xa("AES-ECB",Lt.cipher.modes.ecb);Xa("AES-CBC",Lt.cipher.modes.cbc);Xa("AES-CFB",Lt.cipher.modes.cfb);Xa("AES-OFB",Lt.cipher.modes.ofb);Xa("AES-CTR",Lt.cipher.modes.ctr);Xa("AES-GCM",Lt.cipher.modes.gcm);function Xa(e,t){var r=function(){return new Lt.aes.Algorithm(e,t)};Lt.cipher.registerAlgorithm(e,r);}var ey=!1,Za=4,$r,X0,OP,Qs,Kn;function BP(){ey=!0,OP=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;$r=new Array(256),X0=new Array(256),Qs=new Array(4),Kn=new Array(4);for(var t=0;t<4;++t)Qs[t]=new Array(256),Kn[t]=new Array(256);for(var r=0,n=0,i,s,a,o,c,l,u,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,$r[r]=o,X0[o]=r,c=e[o],i=e[r],s=e[i],a=e[s],l=c<<24^o<<16^o<<8^(o^c),u=(i^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^i^a);for(var f=0;f<4;++f)Qs[f][r]=l,Kn[f][o]=u,l=l<<24|l>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^e[e[e[i^a]]],n^=e[e[n]]);}}function LP(e,t){for(var r=e.slice(0),n,i=1,s=r.length,a=s+6+1,o=Za*a,c=s;c<o;++c)n=r[c-1],c%s===0?(n=$r[n>>>16&255]<<24^$r[n>>>8&255]<<16^$r[n&255]<<8^$r[n>>>24]^OP[i]<<24,i++):s>6&&c%s===4&&(n=$r[n>>>24]<<24^$r[n>>>16&255]<<16^$r[n>>>8&255]<<8^$r[n&255]),r[c]=r[c-s]^n;if(t){var l,u=Kn[0],f=Kn[1],h=Kn[2],p=Kn[3],m=r.slice(0);o=r.length;for(var c=0,v=o-Za;c<o;c+=Za,v-=Za)if(c===0||c===o-Za)m[c]=r[v],m[c+1]=r[v+3],m[c+2]=r[v+2],m[c+3]=r[v+1];else for(var E=0;E<Za;++E)l=r[v+E],m[c+(3&-E)]=u[$r[l>>>24]]^f[$r[l>>>16&255]]^h[$r[l>>>8&255]]^p[$r[l&255]];r=m;}return r}function J0(e,t,r,n){var i=e.length/4-1,s,a,o,c,l;n?(s=Kn[0],a=Kn[1],o=Kn[2],c=Kn[3],l=X0):(s=Qs[0],a=Qs[1],o=Qs[2],c=Qs[3],l=$r);var u,f,h,p,m,v,E;u=t[0]^e[0],f=t[n?3:1]^e[1],h=t[2]^e[2],p=t[n?1:3]^e[3];for(var w=3,y=1;y<i;++y)m=s[u>>>24]^a[f>>>16&255]^o[h>>>8&255]^c[p&255]^e[++w],v=s[f>>>24]^a[h>>>16&255]^o[p>>>8&255]^c[u&255]^e[++w],E=s[h>>>24]^a[p>>>16&255]^o[u>>>8&255]^c[f&255]^e[++w],p=s[p>>>24]^a[u>>>16&255]^o[f>>>8&255]^c[h&255]^e[++w],u=m,f=v,h=E;r[0]=l[u>>>24]<<24^l[f>>>16&255]<<16^l[h>>>8&255]<<8^l[p&255]^e[++w],r[n?3:1]=l[f>>>24]<<24^l[h>>>16&255]<<16^l[p>>>8&255]<<8^l[u&255]^e[++w],r[2]=l[h>>>24]<<24^l[p>>>16&255]<<16^l[u>>>8&255]<<8^l[f&255]^e[++w],r[n?1:3]=l[p>>>24]<<24^l[u>>>16&255]<<16^l[f>>>8&255]<<8^l[h&255]^e[++w];}function Pf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Lt.cipher.createDecipher(r,e.key):n=Lt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Lt.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a);},n}});var is=P((Xse,MP)=>{var Bu=Je();Bu.pki=Bu.pki||{};var ty=MP.exports=Bu.pki.oids=Bu.oids=Bu.oids||{};function ge(e,t){ty[e]=t,ty[t]=e;}function Ct(e,t){ty[e]=t;}ge("1.2.840.113549.1.1.1","rsaEncryption");ge("1.2.840.113549.1.1.4","md5WithRSAEncryption");ge("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ge("1.2.840.113549.1.1.7","RSAES-OAEP");ge("1.2.840.113549.1.1.8","mgf1");ge("1.2.840.113549.1.1.9","pSpecified");ge("1.2.840.113549.1.1.10","RSASSA-PSS");ge("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ge("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ge("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ge("1.3.101.112","EdDSA25519");ge("1.2.840.10040.4.3","dsa-with-sha1");ge("1.3.14.3.2.7","desCBC");ge("1.3.14.3.2.26","sha1");ge("1.3.14.3.2.29","sha1WithRSASignature");ge("2.16.840.1.101.3.4.2.1","sha256");ge("2.16.840.1.101.3.4.2.2","sha384");ge("2.16.840.1.101.3.4.2.3","sha512");ge("2.16.840.1.101.3.4.2.4","sha224");ge("2.16.840.1.101.3.4.2.5","sha512-224");ge("2.16.840.1.101.3.4.2.6","sha512-256");ge("1.2.840.113549.2.2","md2");ge("1.2.840.113549.2.5","md5");ge("1.2.840.113549.1.7.1","data");ge("1.2.840.113549.1.7.2","signedData");ge("1.2.840.113549.1.7.3","envelopedData");ge("1.2.840.113549.1.7.4","signedAndEnvelopedData");ge("1.2.840.113549.1.7.5","digestedData");ge("1.2.840.113549.1.7.6","encryptedData");ge("1.2.840.113549.1.9.1","emailAddress");ge("1.2.840.113549.1.9.2","unstructuredName");ge("1.2.840.113549.1.9.3","contentType");ge("1.2.840.113549.1.9.4","messageDigest");ge("1.2.840.113549.1.9.5","signingTime");ge("1.2.840.113549.1.9.6","counterSignature");ge("1.2.840.113549.1.9.7","challengePassword");ge("1.2.840.113549.1.9.8","unstructuredAddress");ge("1.2.840.113549.1.9.14","extensionRequest");ge("1.2.840.113549.1.9.20","friendlyName");ge("1.2.840.113549.1.9.21","localKeyId");ge("1.2.840.113549.1.9.22.1","x509Certificate");ge("1.2.840.113549.1.12.10.1.1","keyBag");ge("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ge("1.2.840.113549.1.12.10.1.3","certBag");ge("1.2.840.113549.1.12.10.1.4","crlBag");ge("1.2.840.113549.1.12.10.1.5","secretBag");ge("1.2.840.113549.1.12.10.1.6","safeContentsBag");ge("1.2.840.113549.1.5.13","pkcs5PBES2");ge("1.2.840.113549.1.5.12","pkcs5PBKDF2");ge("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ge("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ge("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ge("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ge("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ge("1.2.840.113549.2.7","hmacWithSHA1");ge("1.2.840.113549.2.8","hmacWithSHA224");ge("1.2.840.113549.2.9","hmacWithSHA256");ge("1.2.840.113549.2.10","hmacWithSHA384");ge("1.2.840.113549.2.11","hmacWithSHA512");ge("1.2.840.113549.3.7","des-EDE3-CBC");ge("2.16.840.1.101.3.4.1.2","aes128-CBC");ge("2.16.840.1.101.3.4.1.22","aes192-CBC");ge("2.16.840.1.101.3.4.1.42","aes256-CBC");ge("2.5.4.3","commonName");ge("2.5.4.4","surname");ge("2.5.4.5","serialNumber");ge("2.5.4.6","countryName");ge("2.5.4.7","localityName");ge("2.5.4.8","stateOrProvinceName");ge("2.5.4.9","streetAddress");ge("2.5.4.10","organizationName");ge("2.5.4.11","organizationalUnitName");ge("2.5.4.12","title");ge("2.5.4.13","description");ge("2.5.4.15","businessCategory");ge("2.5.4.17","postalCode");ge("2.5.4.42","givenName");ge("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ge("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ge("2.16.840.1.113730.1.1","nsCertType");ge("2.16.840.1.113730.1.13","nsComment");Ct("2.5.29.1","authorityKeyIdentifier");Ct("2.5.29.2","keyAttributes");Ct("2.5.29.3","certificatePolicies");Ct("2.5.29.4","keyUsageRestriction");Ct("2.5.29.5","policyMapping");Ct("2.5.29.6","subtreesConstraint");Ct("2.5.29.7","subjectAltName");Ct("2.5.29.8","issuerAltName");Ct("2.5.29.9","subjectDirectoryAttributes");Ct("2.5.29.10","basicConstraints");Ct("2.5.29.11","nameConstraints");Ct("2.5.29.12","policyConstraints");Ct("2.5.29.13","basicConstraints");ge("2.5.29.14","subjectKeyIdentifier");ge("2.5.29.15","keyUsage");Ct("2.5.29.16","privateKeyUsagePeriod");ge("2.5.29.17","subjectAltName");ge("2.5.29.18","issuerAltName");ge("2.5.29.19","basicConstraints");Ct("2.5.29.20","cRLNumber");Ct("2.5.29.21","cRLReason");Ct("2.5.29.22","expirationDate");Ct("2.5.29.23","instructionCode");Ct("2.5.29.24","invalidityDate");Ct("2.5.29.25","cRLDistributionPoints");Ct("2.5.29.26","issuingDistributionPoint");Ct("2.5.29.27","deltaCRLIndicator");Ct("2.5.29.28","issuingDistributionPoint");Ct("2.5.29.29","certificateIssuer");Ct("2.5.29.30","nameConstraints");ge("2.5.29.31","cRLDistributionPoints");ge("2.5.29.32","certificatePolicies");Ct("2.5.29.33","policyMappings");Ct("2.5.29.34","policyConstraints");ge("2.5.29.35","authorityKeyIdentifier");Ct("2.5.29.36","policyConstraints");ge("2.5.29.37","extKeyUsage");Ct("2.5.29.46","freshestCRL");Ct("2.5.29.54","inhibitAnyPolicy");ge("1.3.6.1.4.1.11129.2.4.2","timestampList");ge("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ge("1.3.6.1.5.5.7.3.1","serverAuth");ge("1.3.6.1.5.5.7.3.2","clientAuth");ge("1.3.6.1.5.5.7.3.3","codeSigning");ge("1.3.6.1.5.5.7.3.4","emailProtection");ge("1.3.6.1.5.5.7.3.8","timeStamping");});var zn=P((Jse,UP)=>{var Ut=Je();mt();is();var Ce=UP.exports=Ut.asn1=Ut.asn1||{};Ce.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Ce.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Ce.create=function(e,t,r,n,i){if(Ut.util.isArray(n)){for(var s=[],a=0;a<n.length;++a)n[a]!==void 0&&s.push(n[a]);n=s;}var o={tagClass:e,type:t,constructed:r,composed:r||Ut.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=Ce.copy(o)),o};Ce.copy=function(e,t){var r;if(Ut.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(Ce.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:Ce.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};Ce.equals=function(e,t,r){if(Ut.util.isArray(e)){if(!Ut.util.isArray(t)||e.length!==t.length)return !1;for(var n=0;n<e.length;++n)if(!Ce.equals(e[n],t[n]))return !1;return !0}if(typeof e!=typeof t)return !1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&Ce.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};Ce.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Lu(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var _z=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else {var s=r&127;Lu(e,t,s),n=e.getInt(s<<3);}if(n<0)throw new Error("Negative length: "+n);return n}};Ce.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Ut.util.createBuffer(e));var r=e.length(),n=Nf(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Nf(e,t,r,n){var i;Lu(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var c=_z(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var l=new Error("Too few bytes to read ASN.1 value.");throw l.available=e.length(),l.remaining=t,l.requested=c,l}c=t;}var u,f,h=(s&32)===32;if(h)if(u=[],c===void 0)for(;;){if(Lu(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(Nf(e,t,r+1,n)),t-=i-e.length();}else for(;c>0;)i=e.length(),u.push(Nf(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(u===void 0&&a===Ce.Class.UNIVERSAL&&o===Ce.Type.BITSTRING&&(f=e.bytes(c)),u===void 0&&n.decodeBitStrings&&a===Ce.Class.UNIVERSAL&&o===Ce.Type.BITSTRING&&c>1){var p=e.read,m=t,v=0;if(o===Ce.Type.BITSTRING&&(Lu(e,t,1),v=e.getByte(),t--),v===0)try{i=e.length();var E={strict:!0,decodeBitStrings:!0},w=Nf(e,t,r+1,E),y=i-e.length();t-=y,o==Ce.Type.BITSTRING&&y++;var b=w.tagClass;y===c&&(b===Ce.Class.UNIVERSAL||b===Ce.Class.CONTEXT_SPECIFIC)&&(u=[w]);}catch{}u===void 0&&(e.read=p,t=m);}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t;}if(o===Ce.Type.BMPSTRING)for(u="";c>0;c-=2)Lu(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(c),t-=c;}var N=f===void 0?null:{bitStringContents:f};return Ce.create(a,o,h,u,N)}Ce.toDer=function(e){var t=Ut.util.createBuffer(),r=e.tagClass|e.type,n=Ut.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=Ce.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(Ce.toDer(e.value[s]));}else if(e.type===Ce.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===Ce.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else {var a=n.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s));}return t.putBuffer(n),t};Ce.oidToDer=function(e){var t=e.split("."),r=Ut.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,a,o=2;o<t.length;++o){n=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,n||(a|=128),i.push(a),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c]);}return r};Ce.derToOid=function(e){var t;typeof e=="string"&&(e=Ut.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};Ce.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),l=10;c!=="+"&&c!=="-"&&(o=parseInt(e.substr(10,2),10),l+=2);}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),l&&(c=e.charAt(l),c==="+"||c==="-")){var u=parseInt(e.substr(l+1,2),10),f=parseInt(e.substr(l+4,2),10),h=u*60+f;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h);}return t};Ce.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,l=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var p=parseInt(e.substr(f+1,2),10),m=parseInt(e.substr(f+4,2),10);l=p*60+m,l*=6e4,h==="+"&&(l*=-1),u=!0;}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,c),t.setTime(+t+l)):(t.setFullYear(r,n,i),t.setHours(s,a,o,c)),t};Ce.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Ce.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};Ce.integerToDer=function(e){var t=Ut.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};Ce.derToInteger=function(e){typeof e=="string"&&(e=Ut.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};Ce.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Ut.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=Ce.validate(e.value[s],t.value[a],r,n),i?++s:t.value[a].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else {var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1);}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var qP=/[^\\u0000-\\u00ff]/;Ce.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case Ce.Class.UNIVERSAL:n+="Universal:";break;case Ce.Class.APPLICATION:n+="Application:";break;case Ce.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Ce.Class.PRIVATE:n+="Private:";break}if(e.tagClass===Ce.Class.UNIVERSAL)switch(n+=e.type,e.type){case Ce.Type.NONE:n+=" (None)";break;case Ce.Type.BOOLEAN:n+=" (Boolean)";break;case Ce.Type.INTEGER:n+=" (Integer)";break;case Ce.Type.BITSTRING:n+=" (Bit string)";break;case Ce.Type.OCTETSTRING:n+=" (Octet string)";break;case Ce.Type.NULL:n+=" (Null)";break;case Ce.Type.OID:n+=" (Object Identifier)";break;case Ce.Type.ODESC:n+=" (Object Descriptor)";break;case Ce.Type.EXTERNAL:n+=" (External or Instance of)";break;case Ce.Type.REAL:n+=" (Real)";break;case Ce.Type.ENUMERATED:n+=" (Enumerated)";break;case Ce.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Ce.Type.UTF8:n+=" (UTF8)";break;case Ce.Type.ROID:n+=" (Relative Object Identifier)";break;case Ce.Type.SEQUENCE:n+=" (Sequence)";break;case Ce.Type.SET:n+=" (Set)";break;case Ce.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Ce.Type.IA5String:n+=" (IA5String (ASCII))";break;case Ce.Type.UTCTIME:n+=" (UTC time)";break;case Ce.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Ce.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=Ce.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(o+=","));n+=i+"Sub values: "+a+o;}else {if(n+=i+"Value: ",e.type===Ce.Type.OID){var c=Ce.derToOid(e.value);n+=c,Ut.pki&&Ut.pki.oids&&c in Ut.pki.oids&&(n+=" ("+Ut.pki.oids[c]+") ");}if(e.type===Ce.Type.INTEGER)try{n+=Ce.derToInteger(e.value);}catch{n+="0x"+Ut.util.bytesToHex(e.value);}else if(e.type===Ce.Type.BITSTRING){if(e.value.length>1?n+="0x"+Ut.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var l=e.value.charCodeAt(0);l==1?n+=" (1 unused bit shown)":l>1&&(n+=" ("+l+" unused bits shown)");}}else if(e.type===Ce.Type.OCTETSTRING)qP.test(e.value)||(n+="("+e.value+") "),n+="0x"+Ut.util.bytesToHex(e.value);else if(e.type===Ce.Type.UTF8)try{n+=Ut.util.decodeUtf8(e.value);}catch(u){if(u.message==="URI malformed")n+="0x"+Ut.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===Ce.Type.PRINTABLESTRING||e.type===Ce.Type.IA5String?n+=e.value:qP.test(e.value)?n+="0x"+Ut.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value;}return n};});var ai=P((eae,$P)=>{var Df=Je();$P.exports=Df.md=Df.md||{};Df.md.algorithms=Df.md.algorithms||{};});var Ja=P((tae,jP)=>{var Ni=Je();ai();mt();var vz=jP.exports=Ni.hmac=Ni.hmac||{};vz.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Ni.md.algorithms)t=Ni.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else {if(typeof a=="string")a=Ni.util.createBuffer(a);else if(Ni.util.isArray(a)){var o=a;a=Ni.util.createBuffer();for(var c=0;c<o.length;++c)a.putByte(o[c]);}var l=a.length();l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=Ni.util.createBuffer(),n=Ni.util.createBuffer(),l=a.length();for(var c=0;c<l;++c){var o=a.at(c);r.putByte(54^o),n.putByte(92^o);}if(l<t.blockLength)for(var o=t.blockLength-l,c=0;c<o;++c)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes();}t.start(),t.update(r);},i.update=function(s){t.update(s);},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i};});var Of=P((rae,KP)=>{var oi=Je();ai();mt();var HP=KP.exports=oi.md5=oi.md5||{};oi.md.md5=oi.md.algorithms.md5=HP;HP.create=function(){WP||bz();var e=null,t=oi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=oi.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=oi.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),VP(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=oi.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(ry.substr(0,n.blockLength-a));for(var o,c=0,l=n.fullMessageLength.length-1;l>=0;--l)o=n.fullMessageLength[l]*8+c,c=o/4294967296>>>0,i.putInt32Le(o>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};VP(u,r,i);var f=oi.util.createBuffer();return f.putInt32Le(u.h0),f.putInt32Le(u.h1),f.putInt32Le(u.h2),f.putInt32Le(u.h3),f},n};var ry=null,kf=null,Fu=null,eo=null,WP=!1;function bz(){ry="\x80",ry+=oi.util.fillString("\0",64),kf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Fu=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],eo=new Array(64);for(var e=0;e<64;++e)eo[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);WP=!0;}function VP(e,t,r){for(var n,i,s,a,o,c,l,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,u=0;u<16;++u)t[u]=r.getInt32Le(),c=o^s&(a^o),n=i+c+eo[u]+t[u],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<32;++u)c=a^o&(s^a),n=i+c+eo[u]+t[kf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<48;++u)c=s^a^o,n=i+c+eo[u]+t[kf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;for(;u<64;++u)c=a^(s|~o),n=i+c+eo[u]+t[kf[u]],l=Fu[u],i=o,o=a,a=s,s+=n<<l|n>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,f-=64;}}});var Zs=P((nae,GP)=>{var Lf=Je();mt();var zP=GP.exports=Lf.pem=Lf.pem||{};zP.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Bf(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Bf(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Bf(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Bf(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Lf.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};zP.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Lf.util.decode64(s[3])};if(t.push(o),!!s[2]){for(var c=s[2].split(i),l=0;s&&l<c.length;){for(var u=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;u+=h,l=f;}if(s=u.match(n),s){for(var p={name:s[1],values:[]},m=s[2].split(","),v=0;v<m.length;++v)p.values.push(Sz(m[v]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=m[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:m[0],parameters:m[1]||null};}else o.headers.push(p);else {if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:m[0],type:m[1]};}}++l;}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Bf(e){for(var t=e.name+": ",r=[],n=function(c,l){return " "+l},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i;}else (t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function Sz(e){return e.replace(/^\s+/,"")}});var Mu=P((iae,QP)=>{var Wt=Je();Af();Z0();mt();QP.exports=Wt.des=Wt.des||{};Wt.des.startEncrypting=function(e,t,r,n){var i=Ff({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Wt.des.createEncryptionCipher=function(e,t){return Ff({key:e,output:null,decrypt:!1,mode:t})};Wt.des.startDecrypting=function(e,t,r,n){var i=Ff({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Wt.des.createDecryptionCipher=function(e,t){return Ff({key:e,output:null,decrypt:!0,mode:t})};Wt.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return YP(r._keys,n,i,!1)},decrypt:function(n,i){return YP(r._keys,n,i,!0)}}}),r._init=!1;};Wt.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Wt.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Pz(t),this._init=!0;}};ui("DES-ECB",Wt.cipher.modes.ecb);ui("DES-CBC",Wt.cipher.modes.cbc);ui("DES-CFB",Wt.cipher.modes.cfb);ui("DES-OFB",Wt.cipher.modes.ofb);ui("DES-CTR",Wt.cipher.modes.ctr);ui("3DES-ECB",Wt.cipher.modes.ecb);ui("3DES-CBC",Wt.cipher.modes.cbc);ui("3DES-CFB",Wt.cipher.modes.cfb);ui("3DES-OFB",Wt.cipher.modes.ofb);ui("3DES-CTR",Wt.cipher.modes.ctr);function ui(e,t){var r=function(){return new Wt.des.Algorithm(e,t)};Wt.cipher.registerAlgorithm(e,r);}var Ez=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],wz=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Cz=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],xz=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Tz=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Az=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Rz=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Iz=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Pz(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=e.length()>8?3:1,E=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,b,N=0;N<v;N++){var B=e.getInt32(),V=e.getInt32();b=(B>>>4^V)&252645135,V^=b,B^=b<<4,b=(V>>>-16^B)&65535,B^=b,V^=b<<-16,b=(B>>>2^V)&858993459,V^=b,B^=b<<2,b=(V>>>-16^B)&65535,B^=b,V^=b<<-16,b=(B>>>1^V)&1431655765,V^=b,B^=b<<1,b=(V>>>8^B)&16711935,B^=b,V^=b<<8,b=(B>>>1^V)&1431655765,V^=b,B^=b<<1,b=B<<8|V>>>20&240,B=V<<24|V<<8&16711680|V>>>8&65280|V>>>24&240,V=b;for(var X=0;X<w.length;++X){w[X]?(B=B<<2|B>>>26,V=V<<2|V>>>26):(B=B<<1|B>>>27,V=V<<1|V>>>27),B&=-15,V&=-15;var z=t[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|s[B>>>12&15]|a[B>>>8&15]|o[B>>>4&15],G=c[V>>>28]|l[V>>>24&15]|u[V>>>20&15]|f[V>>>16&15]|h[V>>>12&15]|p[V>>>8&15]|m[V>>>4&15];b=(G>>>16^z)&65535,E[y++]=z^b,E[y++]=G^b<<16;}}return E}function YP(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],c=t[1];a=(o>>>4^c)&252645135,c^=a,o^=a<<4,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var l=0;l<i;l+=3){for(var u=s[l+1],f=s[l+2],h=s[l];h!=u;h+=f){var p=c^e[h],m=(c>>>4|c<<28)^e[h+1];a=o,o=c,c=a^(wz[p>>>24&63]|xz[p>>>16&63]|Az[p>>>8&63]|Iz[p&63]|Ez[m>>>24&63]|Cz[m>>>16&63]|Tz[m>>>8&63]|Rz[m&63]);}a=o,o=c,c=a;}o=o>>>1|o<<31,c=c>>>1|c<<31,a=(o>>>1^c)&1431655765,c^=a,o^=a<<1,a=(c>>>8^o)&16711935,o^=a,c^=a<<8,a=(c>>>2^o)&858993459,o^=a,c^=a<<2,a=(o>>>16^c)&65535,c^=a,o^=a<<16,a=(o>>>4^c)&252645135,c^=a,o^=a<<4,r[0]=o,r[1]=c;}function Ff(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=Wt.cipher.createDecipher(r,e.key):n=Wt.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,a){var o=null;a instanceof Wt.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(n,a);},n}});var Mf=P((sae,ZP)=>{var jr=Je();Ja();ai();mt();var Nz=jr.pkcs5=jr.pkcs5||{},Di;jr.util.isNodejs&&!jr.options.usePureJavaScript&&(Di=he("crypto"));ZP.exports=jr.pbkdf2=Nz.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),jr.util.isNodejs&&!jr.options.usePureJavaScript&&Di.pbkdf2&&(i===null||typeof i!="object")&&(Di.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?Di.pbkdf2Sync.length===4?Di.pbkdf2(e,t,r,n,function(b,N){if(b)return s(b);s(null,N.toString("binary"));}):Di.pbkdf2(e,t,r,n,i,function(b,N){if(b)return s(b);s(null,N.toString("binary"));}):Di.pbkdf2Sync.length===4?Di.pbkdf2Sync(e,t,r,n).toString("binary"):Di.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in jr.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=jr.md[i].create();}var a=i.digestLength;if(n>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var c=Math.ceil(n/a),l=n-(c-1)*a,u=jr.hmac.create();u.start(i,e);var f="",h,p,m;if(!s){for(var v=1;v<=c;++v){u.start(null,null),u.update(t),u.update(jr.util.int32ToBytes(v)),h=m=u.digest().getBytes();for(var E=2;E<=r;++E)u.start(null,null),u.update(m),p=u.digest().getBytes(),h=jr.util.xorBytes(h,p,a),m=p;f+=v<c?h:h.substr(0,l);}return f}var v=1,E;function w(){if(v>c)return s(null,f);u.start(null,null),u.update(t),u.update(jr.util.int32ToBytes(v)),h=m=u.digest().getBytes(),E=2,y();}function y(){if(E<=r)return u.start(null,null),u.update(m),p=u.digest().getBytes(),h=jr.util.xorBytes(h,p,a),m=p,++E,jr.util.setImmediate(y);f+=v<c?h:h.substr(0,l),++v,w();}w();};});var iy=P((aae,rN)=>{var ci=Je();ai();mt();var JP=rN.exports=ci.sha256=ci.sha256||{};ci.md.sha256=ci.md.algorithms.sha256=JP;JP.create=function(){eN||Dz();var e=null,t=ci.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=ci.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=ci.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),XP(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=ci.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(ny.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};XP(f,r,i);var h=ci.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var ny=null,eN=!1,tN=null;function Dz(){ny="\x80",ny+=ci.util.fillString("\0",64),tN=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],eN=!0;}function XP(e,t,r){for(var n,i,s,a,o,c,l,u,f,h,p,m,v,E,w,y=r.length();y>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=n+t[l-7]+i+t[l-16]|0;for(u=e.h0,f=e.h1,h=e.h2,p=e.h3,m=e.h4,v=e.h5,E=e.h6,w=e.h7,l=0;l<64;++l)a=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),o=E^m&(v^E),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&f|h&(u^f),n=w+a+o+tN[l]+t[l],i=s+c,w=E,E=v,v=m,m=p+n>>>0,p=h,h=f,f=u,u=n+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+m|0,e.h5=e.h5+v|0,e.h6=e.h6+E|0,e.h7=e.h7+w|0,y-=64;}}});var sy=P((oae,nN)=>{var li=Je();mt();var qf=null;li.util.isNodejs&&!li.options.usePureJavaScript&&!process.versions["node-webkit"]&&(qf=he("crypto"));var kz=nN.exports=li.prng=li.prng||{};kz.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(l,u){if(!u)return t.generateSync(l);var f=t.plugin.cipher,h=t.plugin.increment,p=t.plugin.formatKey,m=t.plugin.formatSeed,v=li.util.createBuffer();t.key=null,E();function E(w){if(w)return u(w);if(v.length()>=l)return u(null,v.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return li.util.nextTick(function(){s(E);});var y=f(t.key,t.seed);t.generated+=y.length,v.putBytes(y),t.key=p(f(t.key,h(t.seed))),t.seed=m(f(t.key,t.seed)),li.util.setImmediate(E);}},t.generateSync=function(l){var u=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var m=li.util.createBuffer();m.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&a();var v=u(t.key,t.seed);t.generated+=v.length,m.putBytes(v),t.key=h(u(t.key,f(t.seed))),t.seed=p(u(t.key,t.seed));}return m.getBytes(l)};function s(l){if(t.pools[0].messageLength>=32)return o(),l();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(f,h){if(f)return l(f);t.collect(h),o(),l();});}function a(){if(t.pools[0].messageLength>=32)return o();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),o();}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var u=1,f=0;f<32;++f)t.reseeds%u===0&&(l.update(t.pools[f].digest().getBytes()),t.pools[f].start()),u=u<<1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var h=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0;}function c(l){var u=null,f=li.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(u=function(B){return h.getRandomValues(B)});var p=li.util.createBuffer();if(u)for(;p.length()<l;){var m=Math.max(1,Math.min(l-p.length(),65536)/4),v=new Uint32Array(Math.floor(m));try{u(v);for(var E=0;E<v.length;++E)p.putInt32(v[E]);}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(p.length()<l)for(var w,y,b,N=Math.floor(Math.random()*65536);p.length()<l;){y=16807*(N&65535),w=16807*(N>>16),y+=(w&32767)<<16,y+=w>>15,y=(y&2147483647)+(y>>31),N=y&4294967295;for(var E=0;E<3;++E)b=N>>>(E<<3),b^=Math.floor(Math.random()*256),p.putByte(b&255);}return p.getBytes(l)}return qf?(t.seedFile=function(l,u){qf.randomBytes(l,function(f,h){if(f)return u(f);u(null,h.toString());});},t.seedFileSync=function(l){return qf.randomBytes(l).toString()}):(t.seedFile=function(l,u){try{u(null,c(l));}catch(f){u(f);}},t.seedFileSync=c),t.collect=function(l){for(var u=l.length,f=0;f<u;++f)t.pools[t.pool].update(l.substr(f,1)),t.pool=t.pool===31?0:t.pool+1;},t.collectInt=function(l,u){for(var f="",h=0;h<u;h+=8)f+=String.fromCharCode(l>>h&255);t.collect(f);},t.registerWorker=function(l){if(l===self)t.seedFile=function(f,h){function p(m){var v=m.data;v.forge&&v.forge.prng&&(self.removeEventListener("message",p),h(v.forge.prng.err,v.forge.prng.bytes));}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}});};else {var u=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(p,m){l.postMessage({forge:{prng:{err:p,bytes:m}}});});};l.addEventListener("message",u);}},t};});var xn=P((uae,ay)=>{var gr=Je();ns();iy();sy();mt();(function(){if(gr.random&&gr.random.getBytes){ay.exports=gr.random;return}(function(e){var t={},r=new Array(4),n=gr.util.createBuffer();t.formatKey=function(f){var h=gr.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),gr.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=gr.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return gr.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return ++f[3],f},t.md=gr.md.sha256;function i(){var f=gr.prng.create(t);return f.getBytes=function(h,p){return f.generate(h,p)},f.getBytesSync=function(h){return f.generate(h)},f}var s=i(),a=null,o=gr.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(a=function(f){return c.getRandomValues(f)}),gr.options.usePureJavaScript||!gr.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator<"u"){var l="";for(var u in navigator)try{typeof navigator[u]=="string"&&(l+=navigator[u]);}catch{}s.collect(l),l=null;}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16);}),e().keypress(function(f){s.collectInt(f.charCode,8);}));}if(!gr.random)gr.random=s;else for(var u in s)gr.random[u]=s[u];gr.random.createInstance=i,ay.exports=gr.random;})(typeof jQuery<"u"?jQuery:null);})();});var uy=P((cae,aN)=>{var Zr=Je();mt();var oy=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],iN=[1,2,3,5],Oz=function(e,t){return e<<t&65535|(e&65535)>>16-t},Bz=function(e,t){return (e&65535)>>t|e<<16-t&65535};aN.exports=Zr.rc2=Zr.rc2||{};Zr.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Zr.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(oy[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-s,oy[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,oy[r.at(o+1)^r.at(o+s)]);return r};var sN=function(e,t,r){var n=!1,i=null,s=null,a=null,o,c,l,u,f=[];for(e=Zr.rc2.expandKey(e,t),l=0;l<64;l++)f.push(e.getInt16Le());r?(o=function(m){for(l=0;l<4;l++)m[l]+=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),m[l]=Oz(m[l],iN[l]),u++;},c=function(m){for(l=0;l<4;l++)m[l]+=f[m[(l+3)%4]&63];}):(o=function(m){for(l=3;l>=0;l--)m[l]=Bz(m[l],iN[l]),m[l]-=f[u]+(m[(l+3)%4]&m[(l+2)%4])+(~m[(l+3)%4]&m[(l+1)%4]),u--;},c=function(m){for(l=3;l>=0;l--)m[l]-=f[m[(l+3)%4]&63];});var h=function(m){var v=[];for(l=0;l<4;l++){var E=i.getInt16Le();a!==null&&(r?E^=a.getInt16Le():a.putInt16Le(E)),v.push(E&65535);}u=r?0:63;for(var w=0;w<m.length;w++)for(var y=0;y<m[w][0];y++)m[w][1](v);for(l=0;l<4;l++)a!==null&&(r?a.putInt16Le(v[l]):v[l]^=a.getInt16Le()),s.putInt16Le(v[l]);},p=null;return p={start:function(m,v){m&&typeof m=="string"&&(m=Zr.util.createBuffer(m)),n=!1,i=Zr.util.createBuffer(),s=v||new Zr.util.createBuffer,a=m,p.output=s;},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]]);},finish:function(m){var v=!0;if(r)if(m)v=m(8,i,!r);else {var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E);}if(v&&(n=!0,p.update()),!r&&(v=i.length()===0,v))if(m)v=m(8,s,!r);else {var w=s.length(),y=s.at(w-1);y>w?v=!1:s.truncate(y);}return v}},p};Zr.rc2.startEncrypting=function(e,t,r){var n=Zr.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Zr.rc2.createEncryptionCipher=function(e,t){return sN(e,t,!0)};Zr.rc2.startDecrypting=function(e,t,r){var n=Zr.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Zr.rc2.createDecryptionCipher=function(e,t){return sN(e,t,!1)};});var Uu=P((lae,pN)=>{var cy=Je();pN.exports=cy.jsbn=cy.jsbn||{};var ki;function fe(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t));}cy.jsbn.BigInteger=fe;function yt(){return new fe(null)}function Fz(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863;}return i}function Mz(e,t,r,n,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var c=this.data[e]&32767,l=this.data[e++]>>15,u=o*c+l*a;c=a*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+o*l+(i>>>30),r.data[n++]=c&1073741823;}return i}function uN(e,t,r,n,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var c=this.data[e]&16383,l=this.data[e++]>>14,u=o*c+l*a;c=a*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+o*l,r.data[n++]=c&268435455;}return i}typeof navigator>"u"?(fe.prototype.am=uN,ki=28):navigator.appName=="Microsoft Internet Explorer"?(fe.prototype.am=Mz,ki=30):navigator.appName!="Netscape"?(fe.prototype.am=Fz,ki=26):(fe.prototype.am=uN,ki=28);fe.prototype.DB=ki;fe.prototype.DM=(1<<ki)-1;fe.prototype.DV=1<<ki;var ly=52;fe.prototype.FV=Math.pow(2,ly);fe.prototype.F1=ly-ki;fe.prototype.F2=2*ki-ly;var qz="0123456789abcdefghijklmnopqrstuvwxyz",Uf=new Array,to,Tn;to=48;for(Tn=0;Tn<=9;++Tn)Uf[to++]=Tn;to=97;for(Tn=10;Tn<36;++Tn)Uf[to++]=Tn;to=65;for(Tn=10;Tn<36;++Tn)Uf[to++]=Tn;function cN(e){return qz.charAt(e)}function lN(e,t){var r=Uf[e.charCodeAt(t)];return r??-1}function Uz(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s;}function $z(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0;}function ss(e){var t=yt();return t.fromInt(e),t}function jz(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else {this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=r==8?e[n]&255:lN(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB);}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&fe.ZERO.subTo(this,this);}function Vz(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t;}function Hz(e){if(this.s<0)return "-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this.data[a]>>o)>0&&(i=!0,s=cN(n));a>=0;)o<t?(n=(this.data[a]&(1<<o)-1)<<t-o,n|=this.data[--a]>>(o+=this.DB-t)):(n=this.data[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),n>0&&(i=!0),i&&(s+=cN(n));return i?s:"0"}function Wz(){var e=yt();return fe.ZERO.subTo(this,e),e}function Kz(){return this.s<0?this.negate():this}function zz(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function $f(e){var t=1,r;return (r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Gz(){return this.t<=0?0:this.DB*(this.t-1)+$f(this.data[this.t-1]^this.s&this.DM)}function Yz(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s;}function Qz(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s;}function Zz(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>n|a,a=(this.data[o]&i)<<r;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp();}function Xz(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp();}function Jz(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else {for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s;}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp();}function eG(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&fe.ZERO.subTo(t,t);}function tG(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1);}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp();}function rG(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=yt());var s=yt(),a=this.s,o=e.s,c=this.DB-$f(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var l=s.t,u=s.data[l-1];if(u!=0){var f=u*(1<<this.F1)+(l>1?s.data[l-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,m=1<<this.F2,v=r.t,E=v-l,w=t??yt();for(s.dlShiftTo(E,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),fe.ONE.dlShiftTo(l,w),w.subTo(s,s);s.t<l;)s.data[s.t++]=0;for(;--E>=0;){var y=r.data[--v]==u?this.DM:Math.floor(r.data[v]*h+(r.data[v-1]+m)*p);if((r.data[v]+=s.am(0,y,r,E,0,l))<y)for(s.dlShiftTo(E,w),r.subTo(w,r);r.data[v]<--y;)r.subTo(w,r);}t!=null&&(r.drShiftTo(l,t),a!=o&&fe.ZERO.subTo(t,t)),r.t=l,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&fe.ZERO.subTo(r,r);}}}function nG(e){var t=yt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(fe.ZERO)>0&&e.subTo(t,t),t}function Xs(e){this.m=e;}function iG(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function sG(e){return e}function aG(e){e.divRemTo(this.m,null,e);}function oG(e,t,r){e.multiplyTo(t,r),this.reduce(r);}function uG(e,t){e.squareTo(t),this.reduce(t);}Xs.prototype.convert=iG;Xs.prototype.revert=sG;Xs.prototype.reduce=aG;Xs.prototype.mulTo=oG;Xs.prototype.sqrTo=uG;function cG(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Js(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t;}function lG(e){var t=yt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(fe.ZERO)>0&&this.m.subTo(t,t),t}function fG(e){var t=yt();return e.copyTo(t),this.reduce(t),t}function dG(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++;}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e);}function hG(e,t){e.squareTo(t),this.reduce(t);}function pG(e,t,r){e.multiplyTo(t,r),this.reduce(r);}Js.prototype.convert=lG;Js.prototype.revert=fG;Js.prototype.reduce=dG;Js.prototype.mulTo=pG;Js.prototype.sqrTo=hG;function gG(){return (this.t>0?this.data[0]&1:this.s)==0}function mG(e,t){if(e>4294967295||e<1)return fe.ONE;var r=yt(),n=yt(),i=t.convert(this),s=$f(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else {var a=r;r=n,n=a;}return t.revert(r)}function yG(e,t){var r;return e<256||t.isEven()?r=new Xs(t):r=new Js(t),this.exp(e,r)}fe.prototype.copyTo=Uz;fe.prototype.fromInt=$z;fe.prototype.fromString=jz;fe.prototype.clamp=Vz;fe.prototype.dlShiftTo=Yz;fe.prototype.drShiftTo=Qz;fe.prototype.lShiftTo=Zz;fe.prototype.rShiftTo=Xz;fe.prototype.subTo=Jz;fe.prototype.multiplyTo=eG;fe.prototype.squareTo=tG;fe.prototype.divRemTo=rG;fe.prototype.invDigit=cG;fe.prototype.isEven=gG;fe.prototype.exp=mG;fe.prototype.toString=Hz;fe.prototype.negate=Wz;fe.prototype.abs=Kz;fe.prototype.compareTo=zz;fe.prototype.bitLength=Gz;fe.prototype.mod=nG;fe.prototype.modPowInt=yG;fe.ZERO=ss(0);fe.ONE=ss(1);function _G(){var e=yt();return this.copyTo(e),e}function vG(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return -1}else {if(this.t==1)return this.data[0];if(this.t==0)return 0}return (this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bG(){return this.t==0?this.s:this.data[0]<<24>>24}function SG(){return this.t==0?this.s:this.data[0]<<16>>16}function EG(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function wG(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function CG(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return "0";var t=this.chunkSize(e),r=Math.pow(e,t),n=ss(r),i=yt(),s=yt(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a}function xG(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var c=lN(e,o);if(c<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0);}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&fe.ZERO.subTo(this,this);}function TG(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(fe.ONE.shiftLeft(e-1),fy,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(fe.ONE.shiftLeft(e-1),this);else {var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256);}}function AG(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function RG(e){return this.compareTo(e)==0}function IG(e){return this.compareTo(e)<0?this:e}function PG(e){return this.compareTo(e)>0?this:e}function NG(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t;}else {for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t;}r.s=t(this.s,e.s),r.clamp();}function DG(e,t){return e&t}function kG(e){var t=yt();return this.bitwiseTo(e,DG,t),t}function fy(e,t){return e|t}function OG(e){var t=yt();return this.bitwiseTo(e,fy,t),t}function fN(e,t){return e^t}function BG(e){var t=yt();return this.bitwiseTo(e,fN,t),t}function dN(e,t){return e&~t}function LG(e){var t=yt();return this.bitwiseTo(e,dN,t),t}function FG(){for(var e=yt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function MG(e){var t=yt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function qG(e){var t=yt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function UG(e){if(e==0)return -1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function $G(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+UG(this.data[e]);return this.s<0?this.t*this.DB:-1}function jG(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function VG(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=jG(this.data[r]^t);return e}function HG(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function WG(e,t){var r=fe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function KG(e){return this.changeBit(e,fy)}function zG(e){return this.changeBit(e,dN)}function GG(e){return this.changeBit(e,fN)}function YG(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s;}else {for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s;}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp();}function QG(e){var t=yt();return this.addTo(e,t),t}function ZG(e){var t=yt();return this.subTo(e,t),t}function XG(e){var t=yt();return this.multiplyTo(e,t),t}function JG(e){var t=yt();return this.divRemTo(e,t,null),t}function eY(e){var t=yt();return this.divRemTo(e,null,t),t}function tY(e){var t=yt(),r=yt();return this.divRemTo(e,t,r),new Array(t,r)}function rY(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp();}function nY(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t];}}function qu(){}function hN(e){return e}function iY(e,t,r){e.multiplyTo(t,r);}function sY(e,t){e.squareTo(t);}qu.prototype.convert=hN;qu.prototype.revert=hN;qu.prototype.mulTo=iY;qu.prototype.sqrTo=sY;function aY(e){return this.exp(e,new qu)}function oY(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp();}function uY(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r);}function ro(e){this.r2=yt(),this.q3=yt(),fe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e;}function cY(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=yt();return e.copyTo(t),this.reduce(t),t}function lY(e){return e}function fY(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e);}function dY(e,t){e.squareTo(t),this.reduce(t);}function hY(e,t,r){e.multiplyTo(t,r),this.reduce(r);}ro.prototype.convert=cY;ro.prototype.revert=lY;ro.prototype.reduce=fY;ro.prototype.mulTo=hY;ro.prototype.sqrTo=dY;function pY(e,t){var r=e.bitLength(),n,i=ss(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Xs(t):t.isEven()?s=new ro(t):s=new Js(t);var a=new Array,o=3,c=n-1,l=(1<<n)-1;if(a[1]=s.convert(this),n>1){var u=yt();for(s.sqrTo(a[1],u);o<=l;)a[o]=yt(),s.mulTo(u,a[o-2],a[o]),o+=2;}var f=e.t-1,h,p=!0,m=yt(),v;for(r=$f(e.data[f])-1;f>=0;){for(r>=c?h=e.data[f]>>r-c&l:(h=(e.data[f]&(1<<r+1)-1)<<c-r,f>0&&(h|=e.data[f-1]>>this.DB+r-c)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)a[h].copyTo(i),p=!1;else {for(;o>1;)s.sqrTo(i,m),s.sqrTo(m,i),o-=2;o>0?s.sqrTo(i,m):(v=i,i=m,m=v),s.mulTo(m,a[h],i);}for(;f>=0&&!(e.data[f]&1<<r);)s.sqrTo(i,m),v=i,i=m,m=v,--r<0&&(r=this.DB-1,--f);}return s.revert(i)}function gY(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n;}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function mY(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function yY(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return fe.ZERO;for(var r=e.clone(),n=this.clone(),i=ss(1),s=ss(0),a=ss(0),o=ss(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o));}if(n.compareTo(fe.ONE)!=0)return fe.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var Gn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],_Y=(1<<26)/Gn[Gn.length-1];function vY(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Gn[Gn.length-1]){for(t=0;t<Gn.length;++t)if(r.data[0]==Gn[t])return !0;return !1}if(r.isEven())return !1;for(t=1;t<Gn.length;){for(var n=Gn[t],i=t+1;i<Gn.length&&n<_Y;)n*=Gn[i++];for(n=r.modInt(n);t<i;)if(n%Gn[t++]==0)return !1}return r.millerRabin(e)}function bY(e){var t=this.subtract(fe.ONE),r=t.getLowestSetBit();if(r<=0)return !1;for(var n=t.shiftRight(r),i=SY(),s,a=0;a<e;++a){do s=new fe(this.bitLength(),i);while(s.compareTo(fe.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(n,this);if(o.compareTo(fe.ONE)!=0&&o.compareTo(t)!=0){for(var c=1;c++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(fe.ONE)==0)return !1;if(o.compareTo(t)!=0)return !1}}return !0}function SY(){return {nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256);}}}fe.prototype.chunkSize=EG;fe.prototype.toRadix=CG;fe.prototype.fromRadix=xG;fe.prototype.fromNumber=TG;fe.prototype.bitwiseTo=NG;fe.prototype.changeBit=WG;fe.prototype.addTo=YG;fe.prototype.dMultiply=rY;fe.prototype.dAddOffset=nY;fe.prototype.multiplyLowerTo=oY;fe.prototype.multiplyUpperTo=uY;fe.prototype.modInt=mY;fe.prototype.millerRabin=bY;fe.prototype.clone=_G;fe.prototype.intValue=vG;fe.prototype.byteValue=bG;fe.prototype.shortValue=SG;fe.prototype.signum=wG;fe.prototype.toByteArray=AG;fe.prototype.equals=RG;fe.prototype.min=IG;fe.prototype.max=PG;fe.prototype.and=kG;fe.prototype.or=OG;fe.prototype.xor=BG;fe.prototype.andNot=LG;fe.prototype.not=FG;fe.prototype.shiftLeft=MG;fe.prototype.shiftRight=qG;fe.prototype.getLowestSetBit=$G;fe.prototype.bitCount=VG;fe.prototype.testBit=HG;fe.prototype.setBit=KG;fe.prototype.clearBit=zG;fe.prototype.flipBit=GG;fe.prototype.add=QG;fe.prototype.subtract=ZG;fe.prototype.multiply=XG;fe.prototype.divide=JG;fe.prototype.remainder=eY;fe.prototype.divideAndRemainder=tY;fe.prototype.modPow=pY;fe.prototype.modInverse=yY;fe.prototype.pow=aY;fe.prototype.gcd=gY;fe.prototype.isProbablePrime=vY;});var no=P((fae,_N)=>{var fi=Je();ai();mt();var mN=_N.exports=fi.sha1=fi.sha1||{};fi.md.sha1=fi.md.algorithms.sha1=mN;mN.create=function(){yN||EY();var e=null,t=fi.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=fi.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=fi.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=a[1],a[1]=a[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),gN(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=fi.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=s&n.blockLength-1;i.putBytes(dy.substr(0,n.blockLength-a));for(var o,c,l=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)o=n.fullMessageLength[u+1]*8,c=o/4294967296>>>0,l+=c,i.putInt32(l>>>0),l=o>>>0;i.putInt32(l);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};gN(f,r,i);var h=fi.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var dy=null,yN=!1;function EY(){dy="\x80",dy+=fi.util.fillString("\0",64),yN=!0;}function gN(e,t,r){for(var n,i,s,a,o,c,l,u,f=r.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,l=o^s&(a^o),n=(i<<5|i>>>27)+l+c+1518500249+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+1859775393+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s&a|o&(s^a),n=(i<<5|i>>>27)+l+c+2400959708+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,l=s^a^o,n=(i<<5|i>>>27)+l+c+3395469782+n,c=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,f-=64;}}});var hy=P((dae,bN)=>{var di=Je();mt();xn();no();var vN=bN.exports=di.pkcs1=di.pkcs1||{};vN.encode_rsa_oaep=function(e,t,r){var n,i,s,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=di.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),c=o-2*s.digestLength-2;if(t.length>c){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=t.length,l.maxLength=c,l}n||(n=""),s.update(n,"raw");for(var u=s.digest(),f="",h=c-t.length,p=0;p<h;p++)f+="\0";var m=u.getBytes()+f+""+t;if(!i)i=di.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=i.length,l.digestLength=s.digestLength,l}var v=jf(i,o-s.digestLength-1,a),E=di.util.xorBytes(m,v,m.length),w=jf(E,s.digestLength,a),y=di.util.xorBytes(i,w,i.length);return "\0"+y+E};vN.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=a,E}if(i===void 0?i=di.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),c=t.charAt(0),l=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),f=jf(u,i.digestLength,s),h=di.util.xorBytes(l,f,l.length),p=jf(h,a-i.digestLength-1,s),m=di.util.xorBytes(u,p,u.length),v=m.substring(0,i.digestLength),E=c!=="\0",w=0;w<i.digestLength;++w)E|=o.charAt(w)!==v.charAt(w);for(var y=1,b=i.digestLength,N=i.digestLength;N<m.length;N++){var B=m.charCodeAt(N),V=B&1^1,X=y?65534:0;E|=B&X,y=y&V,b+=y;}if(E||m.charCodeAt(b)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(b+1)};function jf(e,t,r){r||(r=di.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+a),n+=r.digest().getBytes();}return n.substring(0,t)}});var gy=P((hae,py)=>{var as=Je();mt();Uu();xn();(function(){if(as.prime){py.exports=as.prime;return}var e=py.exports=as.prime=as.prime||{},t=as.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var m=h.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var v=h.prng||as.random,E={nextBytes:function(w){for(var y=v.getBytesSync(w.length),b=0;b<w.length;++b)w[b]=y.charCodeAt(b);}};if(m.name==="PRIMEINC")return s(f,E,m.options,p);throw new Error("Invalid prime generation algorithm: "+m.name)};function s(f,h,p,m){return "workers"in p?c(f,h,p,m):a(f,h,p,m)}function a(f,h,p,m){var v=l(f,h),E=0,w=u(v.bitLength());"millerRabinTests"in p&&(w=p.millerRabinTests);var y=10;"maxBlockTime"in p&&(y=p.maxBlockTime),o(v,f,h,E,w,y,m);}function o(f,h,p,m,v,E,w){var y=+new Date;do{if(f.bitLength()>h&&(f=l(h,p)),f.isProbablePrime(v))return w(null,f);f.dAddOffset(r[m++%8],0);}while(E<0||+new Date-y<E);as.util.setImmediate(function(){o(f,h,p,m,v,E,w);});}function c(f,h,p,m){if(typeof Worker>"u")return a(f,h,p,m);var v=l(f,h),E=p.workers,w=p.workLoad||100,y=w*30/8,b=p.workerScript||"forge/prime.worker.js";if(E===-1)return as.util.estimateCores(function(B,V){B&&(V=2),E=V-1,N();});N();function N(){E=Math.max(1,E);for(var B=[],V=0;V<E;++V)B[V]=new Worker(b);for(var X=E,V=0;V<E;++V)B[V].addEventListener("message",G);var z=!1;function G(ee){if(!z){--X;var U=ee.data;if(U.found){for(var ie=0;ie<B.length;++ie)B[ie].terminate();return z=!0,m(null,new t(U.prime,16))}v.bitLength()>f&&(v=l(f,h));var me=v.toString(16);ee.target.postMessage({hex:me,workLoad:w}),v.dAddOffset(y,0);}}}}function l(f,h){var p=new t(f,h),m=f-1;return p.testBit(m)||p.bitwiseTo(t.ONE.shiftLeft(m),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function u(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();});var $u=P((pae,AN)=>{var Me=Je();zn();Uu();is();hy();gy();xn();mt();typeof ht>"u"&&(ht=Me.jsbn.BigInteger);var ht,my=Me.util.isNodejs?he("crypto"):null,Q=Me.asn1,An=Me.util;Me.pki=Me.pki||{};AN.exports=Me.pki.rsa=Me.rsa=Me.rsa||{};var Qe=Me.pki,wY=[6,4,2,4,2,4,6,2],CY={name:"PrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},xY={name:"RSAPrivateKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},TY={name:"RSAPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},AY=Me.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},RY={name:"DigestInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},IY=function(e){var t;if(e.algorithm in Qe.oids)t=Qe.oids[e.algorithm];else {var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=Q.oidToDer(t).getBytes(),i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[]),s=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[]);s.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,n)),s.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,""));var a=Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),Q.toDer(i).getBytes()},xN=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(ht.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(ht.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new ht(Me.util.bytesToHex(Me.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(ht.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(n.modInverse(t.n)).mod(t.n),a};Qe.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=TN(e,t,r)):(i=Me.util.createBuffer(),i.putBytes(e));for(var a=new ht(i.toHex(),16),o=xN(a,t,n),c=o.toString(16),l=Me.util.createBuffer(),u=s-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Me.util.hexToBytes(c)),l.getBytes()};Qe.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new ht(Me.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=xN(a,t,r),c=o.toString(16),l=Me.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)l.putByte(0),--u;return l.putBytes(Me.util.hexToBytes(c)),n!==!1?Vf(l.getBytes(),t,r):l.getBytes()};Qe.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||Me.random,i={nextBytes:function(o){for(var c=n.getBytesSync(o.length),l=0;l<o.length;++l)o[l]=c.charCodeAt(l);}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new ht(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Qe.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new ht(null);r.fromInt(30);for(var n=0,i=function(f,h){return f|h},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,l=c-1;e.pqState===0?(e.num=new ht(c,e.rng),e.num.testBit(l)||e.num.bitwiseTo(ht.ONE.shiftLeft(l),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(NY(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(wY[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null);}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(ht.ONE),e.q1=e.q.subtract(ht.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(ht.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Qe.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Qe.rsa.setPublicKey(e.n,e.e)};}a=+new Date,o+=a-s,s=a;}return e.keys!==null};Qe.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!Me.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(SN("generateKeyPair"))return my.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,l){if(o)return n(o);n(null,{privateKey:Qe.privateKeyFromPem(l),publicKey:Qe.publicKeyFromPem(c)});});if(EN("generateKey")&&EN("exportKey"))return An.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:CN(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return An.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o);}).then(function(o){if(o){var c=Qe.privateKeyFromAsn1(Q.fromDer(Me.util.createBuffer(o)));n(null,{privateKey:c,publicKey:Qe.setRsaPublicKey(c.n,c.e)});}});if(wN("generateKey")&&wN("exportKey")){var i=An.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:CN(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,l=An.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);l.oncomplete=function(u){var f=u.target.result,h=Qe.privateKeyFromAsn1(Q.fromDer(Me.util.createBuffer(f)));n(null,{privateKey:h,publicKey:Qe.setRsaPublicKey(h.n,h.e)});},l.onerror=function(u){n(u);};},i.onerror=function(o){n(o);};return}}else if(SN("generateKeyPairSync")){var s=my.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return {privateKey:Qe.privateKeyFromPem(s.privateKey),publicKey:Qe.publicKeyFromPem(s.publicKey)}}}var a=Qe.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Qe.rsa.stepKeyPairGenerationState(a,0),a.keys;PY(a,r,n);};Qe.setRsaPublicKey=Qe.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,l){return TN(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return Me.pkcs1.encode_rsa_oaep(c,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return Qe.rsa.encrypt(a,r,!0)},r.verify=function(n,i,s,a){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,l){l=Vf(l,r,!0);var u=Q.fromDer(l,{parseAllBytes:a._parseAllDigestBytes}),f={},h=[];if(!Q.validate(u,RY,f,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var m=Q.derToOid(f.algorithmIdentifier);if(!(m===Me.oids.md2||m===Me.oids.md5||m===Me.oids.sha1||m===Me.oids.sha224||m===Me.oids.sha256||m===Me.oids.sha384||m===Me.oids.sha512||m===Me.oids["sha512-224"]||m===Me.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=m,p}if((m===Me.oids.md2||m===Me.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,l){return l=Vf(l,r,!0),c===l}});var o=Qe.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};Qe.setRsaPrivateKey=Qe.rsa.setPrivateKey=function(e,t,r,n,i,s,a,o){var c={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:a,qInv:o};return c.decrypt=function(l,u,f){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var h=Qe.rsa.decrypt(l,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:Vf};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(p,m){return Me.pkcs1.decode_rsa_oaep(m,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(h,c,!1)},c.sign=function(l,u){var f=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:IY},f=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return l}},f=1);var h=u.encode(l,c.n.bitLength());return Qe.rsa.encrypt(h,c,f)},c};Qe.wrapRsaPrivateKey=function(e){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,Q.integerToDer(0).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Qe.oids.rsaEncryption).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")]),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,Q.toDer(e).getBytes())])};Qe.privateKeyFromAsn1=function(e){var t={},r=[];if(Q.validate(e,CY,t,r)&&(e=Q.fromDer(Me.util.createBuffer(t.privateKey))),t={},r=[],!Q.validate(e,xY,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,a,o,c,l,u,f;return i=Me.util.createBuffer(t.privateKeyModulus).toHex(),s=Me.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=Me.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=Me.util.createBuffer(t.privateKeyPrime1).toHex(),c=Me.util.createBuffer(t.privateKeyPrime2).toHex(),l=Me.util.createBuffer(t.privateKeyExponent1).toHex(),u=Me.util.createBuffer(t.privateKeyExponent2).toHex(),f=Me.util.createBuffer(t.privateKeyCoefficient).toHex(),Qe.setRsaPrivateKey(new ht(i,16),new ht(s,16),new ht(a,16),new ht(o,16),new ht(c,16),new ht(l,16),new ht(u,16),new ht(f,16))};Qe.privateKeyToAsn1=Qe.privateKeyToRSAPrivateKey=function(e){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,Q.integerToDer(0).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.n)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.e)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.d)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.p)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.q)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.dP)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.dQ)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.qInv))])};Qe.publicKeyFromAsn1=function(e){var t={},r=[];if(Q.validate(e,AY,t,r)){var n=Q.derToOid(t.publicKeyOid);if(n!==Qe.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey;}if(r=[],!Q.validate(e,TY,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=Me.util.createBuffer(t.publicKeyModulus).toHex(),a=Me.util.createBuffer(t.publicKeyExponent).toHex();return Qe.setRsaPublicKey(new ht(s,16),new ht(a,16))};Qe.publicKeyToAsn1=Qe.publicKeyToSubjectPublicKeyInfo=function(e){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Qe.oids.rsaEncryption).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")]),Q.create(Q.Class.UNIVERSAL,Q.Type.BITSTRING,!1,[Qe.publicKeyToRSAPublicKey(e)])])};Qe.publicKeyToRSAPublicKey=function(e){return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.n)),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,hi(e.e))])};function TN(e,t,r){var n=Me.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var a=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<a;++c)n.putByte(o);}else for(;a>0;){for(var l=0,u=Me.random.getBytes(a),c=0;c<a;++c)o=u.charCodeAt(c),o===0?++l:n.putByte(o);a=l;}return n.putByte(0),n.putBytes(e),n}function Vf(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=Me.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-n;for(var l=0;l<c;++l)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c;}else if(o===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c;}var u=s.getByte();if(u!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function PY(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(o,c){if(o)return r(o);if(e.p=c,e.q!==null)return a(o,e.q);s(e.qBits,a);});}function s(o,c){Me.prime.generateProbablePrime(o,n,c);}function a(o,c){if(o)return r(o);if(e.q=c,e.p.compareTo(e.q)<0){var l=e.p;e.p=e.q,e.q=l;}if(e.p.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)!==0){e.p=null,i();return}if(e.q.subtract(ht.ONE).gcd(e.e).compareTo(ht.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(ht.ONE),e.q1=e.q.subtract(ht.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(ht.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:Qe.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Qe.rsa.setPublicKey(e.n,e.e)},r(null,e.keys);}}function hi(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=Me.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function NY(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function SN(e){return Me.util.isNodejs&&typeof my[e]=="function"}function EN(e){return typeof An.globalScope<"u"&&typeof An.globalScope.crypto=="object"&&typeof An.globalScope.crypto.subtle=="object"&&typeof An.globalScope.crypto.subtle[e]=="function"}function wN(e){return typeof An.globalScope<"u"&&typeof An.globalScope.msCrypto=="object"&&typeof An.globalScope.msCrypto.subtle=="object"&&typeof An.globalScope.msCrypto.subtle[e]=="function"}function CN(e){for(var t=Me.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var yy=P((gae,DN)=>{var Re=Je();ns();zn();Mu();ai();is();Mf();Zs();xn();uy();$u();mt();var te=Re.asn1,Xe=Re.pki=Re.pki||{};DN.exports=Xe.pbe=Re.pbe=Re.pbe||{};var ea=Xe.oids,DY={name:"EncryptedPrivateKeyInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},kY={name:"PBES2Algorithms",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},OY={name:"pkcs-12PbeParams",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"iterations"}]};Xe.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Re.random.getBytesSync(r.saltSize),i=r.count,s=te.integerToDer(i),a,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var l,u,f;switch(r.algorithm){case"aes128":a=16,l=16,u=ea["aes128-CBC"],f=Re.aes.createEncryptionCipher;break;case"aes192":a=24,l=16,u=ea["aes192-CBC"],f=Re.aes.createEncryptionCipher;break;case"aes256":a=32,l=16,u=ea["aes256-CBC"],f=Re.aes.createEncryptionCipher;break;case"des":a=8,l=8,u=ea.desCBC,f=Re.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),m=NN(p),v=Re.pkcs5.pbkdf2(t,n,i,a,m),E=Re.random.getBytesSync(l),w=f(v);w.start(E),w.update(te.toDer(e)),w.finish(),c=w.output.getBytes();var y=BY(n,s,a,p);o=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ea.pkcs5PBES2).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ea.pkcs5PBKDF2).getBytes()),y]),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(u).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,E)])])]);}else if(r.algorithm==="3des"){a=24;var b=new Re.util.ByteBuffer(n),v=Xe.pbe.generatePkcs12Key(t,b,1,i,a),E=Xe.pbe.generatePkcs12Key(t,b,2,i,a),w=Re.des.createEncryptionCipher(v);w.start(E),w.update(te.toDer(e)),w.finish(),c=w.output.getBytes(),o=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(ea["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,n),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,s.getBytes())])]);}else {var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var N=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[o,te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,c)]);return N};Xe.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!te.validate(e,DY,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=te.derToOid(n.encryptionOid),o=Xe.pbe.getCipher(a,n.encryptionParams,t),c=Re.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=te.fromDer(o.output)),r};Xe.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:te.toDer(e).getBytes()};return Re.pem.encode(r,{maxline:t})};Xe.encryptedPrivateKeyFromPem=function(e){var t=Re.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return te.fromDer(t.body)};Xe.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Xe.wrapRsaPrivateKey(Xe.privateKeyToAsn1(e));return n=Xe.encryptPrivateKeyInfo(n,t,r),Xe.encryptedPrivateKeyToPem(n)}var i,s,a,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,s=Re.random.getBytesSync(16),o=Re.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=Re.random.getBytesSync(16),o=Re.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=Re.random.getBytesSync(16),o=Re.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=Re.random.getBytesSync(8),o=Re.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=Re.random.getBytesSync(8),o=Re.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var l=Re.pbe.opensslDeriveBytes(t,s.substr(0,8),a),u=o(l);u.start(s),u.update(te.toDer(Xe.privateKeyToAsn1(e))),u.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Re.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Re.pem.encode(f)};Xe.decryptRsaPrivateKey=function(e,t){var r=null,n=Re.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,a;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,a=Re.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=Re.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=Re.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=Re.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=Re.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return Re.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return Re.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return Re.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=Re.util.hexToBytes(n.dekInfo.parameters),c=Re.pbe.opensslDeriveBytes(t,o.substr(0,8),s),l=a(c);if(l.start(o),l.update(Re.util.createBuffer(n.body)),l.finish())r=l.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Xe.decryptPrivateKeyInfo(te.fromDer(r),t):r=te.fromDer(r),r!==null&&(r=Xe.privateKeyFromAsn1(r)),r};Xe.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var a,o;if(typeof s>"u"||s===null){if(!("sha1"in Re.md))throw new Error('"sha1" hash algorithm unavailable.');s=Re.md.sha1.create();}var c=s.digestLength,l=s.blockLength,u=new Re.util.ByteBuffer,f=new Re.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0);}var h=f.length(),p=t.length(),m=new Re.util.ByteBuffer;m.fillWithByte(r,l);var v=l*Math.ceil(p/l),E=new Re.util.ByteBuffer;for(o=0;o<v;o++)E.putByte(t.at(o%p));var w=l*Math.ceil(h/l),y=new Re.util.ByteBuffer;for(o=0;o<w;o++)y.putByte(f.at(o%h));var b=E;b.putBuffer(y);for(var N=Math.ceil(i/c),B=1;B<=N;B++){var V=new Re.util.ByteBuffer;V.putBytes(m.bytes()),V.putBytes(b.bytes());for(var X=0;X<n;X++)s.start(),s.update(V.getBytes()),V=s.digest();var z=new Re.util.ByteBuffer;for(o=0;o<l;o++)z.putByte(V.at(o%c));var G=Math.ceil(p/l)+Math.ceil(h/l),ee=new Re.util.ByteBuffer;for(a=0;a<G;a++){var U=new Re.util.ByteBuffer(b.getBytes(l)),ie=511;for(o=z.length()-1;o>=0;o--)ie=ie>>8,ie+=z.at(o)+U.at(o),U.setAt(o,ie&255);ee.putBuffer(U);}b=ee,u.putBuffer(V);}return u.truncate(u.length()-i),u};Xe.pbe.getCipher=function(e,t,r){switch(e){case Xe.oids.pkcs5PBES2:return Xe.pbe.getCipherForPBES2(e,t,r);case Xe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Xe.oids["pbewithSHAAnd40BitRC2-CBC"]:return Xe.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Xe.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!te.validate(t,kY,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=te.derToOid(n.kdfOid),e!==Xe.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=te.derToOid(n.encOid),e!==Xe.oids["aes128-CBC"]&&e!==Xe.oids["aes192-CBC"]&&e!==Xe.oids["aes256-CBC"]&&e!==Xe.oids["des-EDE3-CBC"]&&e!==Xe.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=n.kdfSalt,o=Re.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,l;switch(Xe.oids[e]){case"aes128-CBC":c=16,l=Re.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,l=Re.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,l=Re.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,l=Re.des.createDecryptionCipher;break;case"desCBC":c=8,l=Re.des.createDecryptionCipher;break}var u=PN(n.prfOid),f=Re.pkcs5.pbkdf2(r,a,o,c,u),h=n.encIv,p=l(f);return p.start(h),p};Xe.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!te.validate(t,OY,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=Re.util.createBuffer(n.salt),o=Re.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,l,u;switch(e){case Xe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,u=Re.des.startDecrypting;break;case Xe.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,u=function(v,E){var w=Re.rc2.createDecryptionCipher(v,40);return w.start(E,null),w};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=PN(n.prfOid),h=Xe.pbe.generatePkcs12Key(r,a,1,o,c,f);f.start();var p=Xe.pbe.generatePkcs12Key(r,a,2,o,l,f);return u(h,p)};Xe.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in Re.md))throw new Error('"md5" hash algorithm unavailable.');n=Re.md.md5.create();}t===null&&(t="");for(var i=[IN(n,e+t)],s=16,a=1;s<r;++a,s+=16)i.push(IN(n,i[a-1]+e+t));return i.join("").substr(0,r)};function IN(e,t){return e.start().update(t).digest().getBytes()}function PN(e){var t;if(!e)t="hmacWithSHA1";else if(t=Xe.oids[te.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return NN(t)}function NN(e){var t=Re.md;switch(e){case"hmacWithSHA224":t=Re.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function BY(e,t,r,n){var i=te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OCTETSTRING,!1,e),te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(te.create(te.Class.UNIVERSAL,te.Type.INTEGER,!1,Re.util.hexToBytes(r.toString(16))),te.create(te.Class.UNIVERSAL,te.Type.SEQUENCE,!0,[te.create(te.Class.UNIVERSAL,te.Type.OID,!1,te.oidToDer(Xe.oids[n]).getBytes()),te.create(te.Class.UNIVERSAL,te.Type.NULL,!1,"")])),i}});var _y=P((mae,BN)=>{var io=Je();zn();mt();var xe=io.asn1,so=BN.exports=io.pkcs7asn1=io.pkcs7asn1||{};io.pkcs7=io.pkcs7||{};io.pkcs7.asn1=so;var kN={name:"ContentInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};so.contentInfoValidator=kN;var ON={name:"EncryptedContentInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};so.envelopedDataValidator={name:"EnvelopedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(ON)};so.encryptedDataValidator={name:"EncryptedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"}].concat(ON)};var LY={name:"SignerInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:xe.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};so.signedDataValidator={name:"SignedData",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},kN,{name:"SignedData.Certificates",tagClass:xe.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:xe.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SET,capture:"signerInfos",optional:!0,value:[LY]}]};so.recipientInfoValidator={name:"RecipientInfo",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:xe.Class.UNIVERSAL,type:xe.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:xe.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:xe.Class.UNIVERSAL,type:xe.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};});var vy=P((yae,LN)=>{var ta=Je();mt();ta.mgf=ta.mgf||{};var FY=LN.exports=ta.mgf.mgf1=ta.mgf1=ta.mgf1||{};FY.create=function(e){var t={generate:function(r,n){for(var i=new ta.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new ta.util.ByteBuffer;o.putInt32(a),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest());}return i.truncate(i.length()-n),i.getBytes()}};return t};});var MN=P((_ae,FN)=>{var Hf=Je();vy();FN.exports=Hf.mgf=Hf.mgf||{};Hf.mgf.mgf1=Hf.mgf1;});var Wf=P((vae,qN)=>{var ra=Je();xn();mt();var MY=qN.exports=ra.pss=ra.pss||{};MY.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=ra.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||ra.random,o={};return o.encode=function(c,l){var u,f=l-1,h=Math.ceil(f/8),p=c.digest().getBytes();if(h<n+s+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=a.getBytesSync(s):m=i.bytes();var v=new ra.util.ByteBuffer;v.fillWithByte(0,8),v.putBytes(p),v.putBytes(m),t.start(),t.update(v.getBytes());var E=t.digest().getBytes(),w=new ra.util.ByteBuffer;w.fillWithByte(0,h-s-n-2),w.putByte(1),w.putBytes(m);var y=w.getBytes(),b=h-n-1,N=r.generate(E,b),B="";for(u=0;u<b;u++)B+=String.fromCharCode(y.charCodeAt(u)^N.charCodeAt(u));var V=65280>>8*h-f&255;return B=String.fromCharCode(B.charCodeAt(0)&~V)+B.substr(1),B+E+"\xBC"},o.verify=function(c,l,u){var f,h=u-1,p=Math.ceil(h/8);if(l=l.substr(-p),p<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(l.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=p-n-1,v=l.substr(0,m),E=l.substr(m,n),w=65280>>8*p-h&255;if(v.charCodeAt(0)&w)throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(E,m),b="";for(f=0;f<m;f++)b+=String.fromCharCode(v.charCodeAt(f)^y.charCodeAt(f));b=String.fromCharCode(b.charCodeAt(0)&~w)+b.substr(1);var N=p-n-s-2;for(f=0;f<N;f++)if(b.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(b.charCodeAt(N)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=b.substr(-s),V=new ra.util.ByteBuffer;V.fillWithByte(0,8),V.putBytes(c),V.putBytes(B),t.start(),t.update(V.getBytes());var X=t.digest().getBytes();return E===X},o};});var Gf=P((bae,HN)=>{var qe=Je();ns();zn();Mu();ai();MN();is();Zs();Wf();$u();mt();var T=qe.asn1,be=HN.exports=qe.pki=qe.pki||{},pt=be.oids,Zt={};Zt.CN=pt.commonName;Zt.commonName="CN";Zt.C=pt.countryName;Zt.countryName="C";Zt.L=pt.localityName;Zt.localityName="L";Zt.ST=pt.stateOrProvinceName;Zt.stateOrProvinceName="ST";Zt.O=pt.organizationName;Zt.organizationName="O";Zt.OU=pt.organizationalUnitName;Zt.organizationalUnitName="OU";Zt.E=pt.emailAddress;Zt.emailAddress="E";var $N=qe.pki.rsa.publicKeyValidator,qY={name:"Certificate",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:T.Class.UNIVERSAL,type:T.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:T.Class.UNIVERSAL,type:T.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:T.Class.UNIVERSAL,type:T.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:T.Class.UNIVERSAL,type:T.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},$N,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:T.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:T.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:T.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},UY={name:"rsapss",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:T.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:T.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:T.Class.UNIVERSAL,type:T.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:T.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:T.Class.UNIVERSAL,type:T.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},$Y={name:"CertificationRequestInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},$N,{name:"CertificationRequestInfo.attributes",tagClass:T.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:T.Class.UNIVERSAL,type:T.Type.SET,constructed:!0}]}]}]},jY={name:"CertificationRequest",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[$Y,{name:"CertificationRequest.signatureAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:T.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};be.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,s,a=0;a<e.value.length;++a){n=e.value[a];for(var o=0;o<n.value.length;++o)s={},i=n.value[o],s.type=T.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in pt&&(s.name=pt[s.type],s.name in Zt&&(s.shortName=Zt[s.name])),t&&(t.update(s.type),t.update(s.value)),r.push(s);}return r};be.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=T.derToOid(n.value[0].value),s=n.value[1].value,a=0;a<s.length;++a){var o={};if(o.type=i,o.value=s[a].value,o.valueTagClass=s[a].type,o.type in pt&&(o.name=pt[o.type],o.name in Zt&&(o.shortName=Zt[o.name])),o.type===pt.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(be.certificateExtensionFromAsn1(o.value[c]));}t.push(o);}return t};function os(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var Kf=function(e,t,r){var n={};if(e!==pt["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:pt.sha1},mgf:{algorithmOid:pt.mgf1,hash:{algorithmOid:pt.sha1}},saltLength:20});var i={},s=[];if(!T.validate(t,UY,i,s)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=s,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=T.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=T.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=T.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},zf=function(e){switch(pt[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return qe.md.sha1.create();case"md5WithRSAEncryption":return qe.md.md5.create();case"sha256WithRSAEncryption":return qe.md.sha256.create();case"sha384WithRSAEncryption":return qe.md.sha384.create();case"sha512WithRSAEncryption":return qe.md.sha512.create();case"RSASSA-PSS":return qe.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},jN=function(e){var t=e.certificate,r;switch(t.signatureOid){case pt.sha1WithRSAEncryption:case pt.sha1WithRSASignature:break;case pt["RSASSA-PSS"]:var n,i;if(n=pt[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=n,s}if(i=pt[t.signatureParameters.mgf.algorithmOid],i===void 0||qe.mgf[i]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=i,s}if(i=qe.mgf[i].create(qe.md[n].create()),n=pt[t.signatureParameters.hash.algorithmOid],n===void 0||qe.md[n]===void 0){var s=new Error("Unsupported RSASSA-PSS hash function.");throw s.oid=t.signatureParameters.hash.algorithmOid,s.name=n,s}r=qe.pss.create(qe.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};be.certificateFromPem=function(e,t,r){var n=qe.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=T.fromDer(n.body,r);return be.certificateFromAsn1(s,t)};be.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:T.toDer(be.certificateToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};be.publicKeyFromPem=function(e){var t=qe.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=T.fromDer(t.body);return be.publicKeyFromAsn1(n)};be.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:T.toDer(be.publicKeyToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};be.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:T.toDer(be.publicKeyToRSAPublicKey(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};be.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||qe.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=T.toDer(be.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=T.toDer(be.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else {if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};be.certificationRequestFromPem=function(e,t,r){var n=qe.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=T.fromDer(n.body,r);return be.certificationRequestFromAsn1(s,t)};be.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:T.toDer(be.certificationRequestToAsn1(e)).getBytes()};return qe.pem.encode(r,{maxline:t})};be.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return os(e.issuer,t)},e.issuer.addField=function(t){Rn([t]),e.issuer.attributes.push(t);},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return os(e.subject,t)},e.subject.addField=function(t){Rn([t]),e.subject.attributes.push(t);},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){Rn(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null;},e.setIssuer=function(t,r){Rn(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null;},e.setExtensions=function(t){for(var r=0;r<t.length;++r)VN(t[r],{cert:e});e.extensions=t;},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||qe.md.sha1.create();var n=pt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=be.getTBSCertificate(e);var s=T.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md);},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var a=t.md;if(a===null){a=zf({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||be.getTBSCertificate(t),c=T.toDer(o);a.update(c.getBytes());}return a!==null&&(r=jN({certificate:e,md:a,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,a,o=0;r&&o<n.attributes.length;++o)s=n.attributes[o],a=i.attributes[o],(s.type!==a.type||s.value!==a.value)&&(r=!1);}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return be.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=pt.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return qe.util.hexToBytes(n.subjectKeyIdentifier)===i}}return !1},e};be.certificateFromAsn1=function(e,t){var r={},n=[];if(!T.validate(e,qY,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=T.derToOid(r.publicKeyOid);if(s!==be.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=be.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=qe.util.createBuffer(r.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=qe.asn1.derToOid(r.certSignatureOid),a.signatureParameters=Kf(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=qe.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=Kf(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(T.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(T.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(T.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(T.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,t){a.md=zf({signatureOid:a.signatureOid,type:"certificate"});var l=T.toDer(a.tbsCertificate);a.md.update(l.getBytes());}var u=qe.md.sha1.create(),f=T.toDer(r.certIssuer);u.update(f.getBytes()),a.issuer.getField=function(m){return os(a.issuer,m)},a.issuer.addField=function(m){Rn([m]),a.issuer.attributes.push(m);},a.issuer.attributes=be.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=u.digest().toHex();var h=qe.md.sha1.create(),p=T.toDer(r.certSubject);return h.update(p.getBytes()),a.subject.getField=function(m){return os(a.subject,m)},a.subject.addField=function(m){Rn([m]),a.subject.attributes.push(m);},a.subject.attributes=be.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=h.digest().toHex(),r.certExtensions?a.extensions=be.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=be.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};be.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(be.certificateExtensionFromAsn1(n.value[i]));return t};be.certificateExtensionFromAsn1=function(e){var t={};if(t.id=T.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===T.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in pt){if(t.name=pt[t.id],t.name==="keyUsage"){var r=T.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128;}else if(t.name==="basicConstraints"){var r=T.fromDer(t.value);r.value.length>0&&r.value[0].type===T.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;r.value.length>0&&r.value[0].type===T.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(t.pathLenConstraint=T.derToInteger(s));}else if(t.name==="extKeyUsage")for(var r=T.fromDer(t.value),a=0;a<r.value.length;++a){var o=T.derToOid(r.value[a].value);o in pt?t[pt[o]]=!0:t[o]=!0;}else if(t.name==="nsCertType"){var r=T.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1;}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=T.fromDer(t.value),l=0;l<r.value.length;++l){c=r.value[l];var u={type:c.type,value:c.value};switch(t.altNames.push(u),c.type){case 1:case 2:case 6:break;case 7:u.ip=qe.util.bytesToIP(c.value);break;case 8:u.oid=T.derToOid(c.value);break;}}}else if(t.name==="subjectKeyIdentifier"){var r=T.fromDer(t.value);t.subjectKeyIdentifier=qe.util.bytesToHex(r.value);}}return t};be.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!T.validate(e,jY,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=T.derToOid(r.publicKeyOid);if(s!==be.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=be.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=qe.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=Kf(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=qe.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=Kf(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,t){a.md=zf({signatureOid:a.signatureOid,type:"certification request"});var o=T.toDer(a.certificationRequestInfo);a.md.update(o.getBytes());}var c=qe.md.sha1.create();return a.subject.getField=function(l){return os(a.subject,l)},a.subject.addField=function(l){Rn([l]),a.subject.attributes.push(l);},a.subject.attributes=be.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=be.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(l){return os(a,l)},a.addAttribute=function(l){Rn([l]),a.attributes.push(l);},a.attributes=be.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};be.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return os(e.subject,t)},e.subject.addField=function(t){Rn([t]),e.subject.attributes.push(t);},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return os(e,t)},e.addAttribute=function(t){Rn([t]),e.attributes.push(t);},e.md=null,e.setSubject=function(t){Rn(t),e.subject.attributes=t,e.subject.hash=null;},e.setAttributes=function(t){Rn(t),e.attributes=t;},e.sign=function(t,r){e.md=r||qe.md.sha1.create();var n=pt[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=be.getCertificationRequestInfo(e);var s=T.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md);},e.verify=function(){var t=!1,r=e.md;if(r===null){r=zf({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||be.getCertificationRequestInfo(e),i=T.toDer(n);r.update(i.getBytes());}return r!==null&&(t=jN({certificate:e,md:r,signature:e.signature})),t},e};function ao(e){for(var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,s=0;s<i.length;++s){r=i[s];var a=r.value,o=T.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===T.Type.UTF8&&(a=qe.util.encodeUtf8(a))),n=T.create(T.Class.UNIVERSAL,T.Type.SET,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(r.type).getBytes()),T.create(T.Class.UNIVERSAL,o,!1,a)])]),t.value.push(n);}return t}function Rn(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in be.oids?t.name=be.oids[t.type]:t.shortName&&t.shortName in Zt&&(t.name=be.oids[Zt[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in be.oids)t.type=be.oids[t.name];else {var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in Zt&&(t.shortName=Zt[t.name]),t.type===pt.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=T.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(be.certificateExtensionToAsn1(VN(t.extensions[i])));}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function VN(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in be.oids&&(e.name=be.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in be.oids)e.id=be.oids[e.name];else {var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,i=0,s=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(s|=128,n=7);var a=String.fromCharCode(n);s!==0?a+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(a+=String.fromCharCode(i)),e.value=T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,a);}else if(e.name==="basicConstraints")e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(T.create(T.Class.UNIVERSAL,T.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var c in e)e[c]===!0&&(c in pt?o.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(pt[c]).getBytes())):c.indexOf(".")!==-1&&o.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(c).getBytes())));}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),e.value=T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,a);}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);for(var l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var a=l.value;if(l.type===7&&l.ip){if(a=qe.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=T.oidToDer(T.oidToDer(l.oid)):a=T.oidToDer(a));e.value.value.push(T.create(T.Class.CONTEXT_SPECIFIC,l.type,!1,a));}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=T.create(T.Class.UNIVERSAL,T.Type.IA5STRING,!1,e.comment);}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,f.getBytes());}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!1,h));}if(e.authorityCertIssuer){var p=[T.create(T.Class.CONTEXT_SPECIFIC,4,!0,[ao(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,p));}if(e.serialNumber){var m=qe.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!1,m));}}else if(e.name==="cRLDistributionPoints"){e.value=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);for(var o=e.value.value,v=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),E=T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[]),l,u=0;u<e.altNames.length;++u){l=e.altNames[u];var a=l.value;if(l.type===7&&l.ip){if(a=qe.util.bytesFromIP(l.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else l.type===8&&(l.oid?a=T.oidToDer(T.oidToDer(l.oid)):a=T.oidToDer(a));E.value.push(T.create(T.Class.CONTEXT_SPECIFIC,l.type,!1,a));}v.value.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[E])),o.push(v);}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function by(e,t){switch(e){case pt["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.hash.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.mgf.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(t.mgf.hash.algorithmOid).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(t.saltLength).getBytes())])),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,r);default:return T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")}}function VY(e){var t=T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,a=T.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===T.Type.UTF8&&(s=qe.util.encodeUtf8(s));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var c=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(i.type).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SET,!0,[T.create(T.Class.UNIVERSAL,a,o,s)])]);t.value.push(c);}return t}var HY=new Date("1950-01-01T00:00:00Z"),WY=new Date("2050-01-01T00:00:00Z");function UN(e){return e>=HY&&e<WY?T.create(T.Class.UNIVERSAL,T.Type.UTCTIME,!1,T.dateToUtcTime(e)):T.create(T.Class.UNIVERSAL,T.Type.GENERALIZEDTIME,!1,T.dateToGeneralizedTime(e))}be.getTBSCertificate=function(e){var t=UN(e.validity.notBefore),r=UN(e.validity.notAfter),n=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.CONTEXT_SPECIFIC,0,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.version).getBytes())]),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,qe.util.hexToBytes(e.serialNumber)),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.siginfo.algorithmOid).getBytes()),by(e.siginfo.algorithmOid,e.siginfo.parameters)]),ao(e.issuer),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,r]),ao(e.subject),be.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(T.create(T.Class.CONTEXT_SPECIFIC,1,!0,[T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(T.create(T.Class.CONTEXT_SPECIFIC,2,!0,[T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(be.certificateExtensionsToAsn1(e.extensions)),n};be.getCertificationRequestInfo=function(e){var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(e.version).getBytes()),ao(e.subject),be.publicKeyToAsn1(e.publicKey),VY(e)]);return t};be.distinguishedNameToAsn1=function(e){return ao(e)};be.certificateToAsn1=function(e){var t=e.tbsCertificate||be.getTBSCertificate(e);return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.signatureOid).getBytes()),by(e.signatureOid,e.signatureParameters)]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.signature)])};be.certificateExtensionsToAsn1=function(e){var t=T.create(T.Class.CONTEXT_SPECIFIC,3,!0,[]),r=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(be.certificateExtensionToAsn1(e[n]));return t};be.certificateExtensionToAsn1=function(e){var t=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);t.value.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.id).getBytes())),e.critical&&t.value.push(T.create(T.Class.UNIVERSAL,T.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=T.toDer(r).getBytes()),t.value.push(T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,r)),t};be.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||be.getCertificationRequestInfo(e);return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[t,T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(e.signatureOid).getBytes()),by(e.signatureOid,e.signatureParameters)]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,"\0"+e.signature)])};be.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(a){var o=r(a.issuer);return o},t.addCertificate=function(a){if(typeof a=="string"&&(a=qe.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))if(a.subject.hash in t.certs){var o=t.certs[a.subject.hash];qe.util.isArray(o)||(o=[o]),o.push(a),t.certs[a.subject.hash]=o;}else t.certs[a.subject.hash]=a;},t.hasCertificate=function(a){typeof a=="string"&&(a=qe.pki.certificateFromPem(a));var o=r(a.subject);if(!o)return !1;qe.util.isArray(o)||(o=[o]);for(var c=T.toDer(be.certificateToAsn1(a)).getBytes(),l=0;l<o.length;++l){var u=T.toDer(be.certificateToAsn1(o[l])).getBytes();if(c===u)return !0}return !1},t.listAllCertificates=function(){var a=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var c=t.certs[o];if(!qe.util.isArray(c))a.push(c);else for(var l=0;l<c.length;++l)a.push(c[l]);}return a},t.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=qe.pki.certificateFromPem(a)),n(a.subject),!t.hasCertificate(a))return null;var c=r(a.subject);if(!qe.util.isArray(c))return o=t.certs[a.subject.hash],delete t.certs[a.subject.hash],o;for(var l=T.toDer(be.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=T.toDer(be.certificateToAsn1(c[u])).getBytes();l===f&&(o=c[u],c.splice(u,1));}return c.length===0&&delete t.certs[a.subject.hash],o};function r(a){return n(a),t.certs[a.hash]||null}function n(a){if(!a.hash){var o=qe.md.sha1.create();a.attributes=be.RDNAttributesAsArray(ao(a),o),a.hash=o.digest().toHex();}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s);}return t};be.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};be.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var s=!0,a=null,o=0;do{var c=t.shift(),l=null,u=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:be.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(l=t[0]||e.getIssuer(c),l===null&&c.isIssuer(c)&&(u=!0,l=c),l){var f=l;qe.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){l=f.shift();try{h=l.verify(c);}catch{}}h||(a={message:"Certificate signature is invalid.",error:be.certificateError.bad_certificate});}a===null&&(!l||u)&&!e.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:be.certificateError.unknown_ca});}if(a===null&&l&&!c.isIssuer(l)&&(a={message:"Certificate issuer is invalid.",error:be.certificateError.bad_certificate}),a===null)for(var p={keyUsage:!0,basicConstraints:!0},m=0;a===null&&m<c.extensions.length;++m){var v=c.extensions[m];v.critical&&!(v.name in p)&&(a={message:"Certificate has an unsupported critical extension.",error:be.certificateError.unsupported_certificate});}if(a===null&&(!s||t.length===0&&(!l||u))){var E=c.getExtension("basicConstraints"),w=c.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:be.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:be.certificateError.bad_certificate}),a===null&&w!==null&&"pathLenConstraint"in E){var y=o-1;y>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:be.certificateError.bad_certificate});}}var b=a===null?!0:a.error,N=r.verify?r.verify(b,o,n):b;if(N===!0)a=null;else throw b===!0&&(a={message:"The application rejected the certificate.",error:be.certificateError.bad_certificate}),(N||N===0)&&(typeof N=="object"&&!qe.util.isArray(N)?(N.message&&(a.message=N.message),N.error&&(a.error=N.error)):typeof N=="string"&&(a.error=N)),a;s=!1,++o;}while(t.length>0);return !0};});var Ey=P((Sae,KN)=>{var Ft=Je();zn();Ja();is();_y();yy();xn();$u();no();mt();Gf();var F=Ft.asn1,st=Ft.pki,Vu=KN.exports=Ft.pkcs12=Ft.pkcs12||{},WN={name:"ContentInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},KY={name:"PFX",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"version"},WN,{name:"PFX.macData",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:F.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},zY={name:"SafeBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},GY={name:"Attribute",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,capture:"values"}]},YY={name:"CertBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:F.Class.UNIVERSAL,type:F.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ju(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o);}}return i}Vu.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!F.validate(e,KY,n,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var w={},y;return "localKeyId"in E?y=E.localKeyId:"localKeyIdHex"in E&&(y=Ft.util.hexToBytes(E.localKeyIdHex)),y===void 0&&!("friendlyName"in E)&&"bagType"in E&&(w[E.bagType]=ju(a.safeContents,null,null,E.bagType)),y!==void 0&&(w.localKeyId=ju(a.safeContents,"localKeyId",y,E.bagType)),"friendlyName"in E&&(w.friendlyName=ju(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),w},getBagsByFriendlyName:function(E,w){return ju(a.safeContents,"friendlyName",E,w)},getBagsByLocalKeyId:function(E,w){return ju(a.safeContents,"localKeyId",E,w)}};if(n.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=n.version.charCodeAt(0),s}if(F.derToOid(n.contentType)!==st.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=F.derToOid(n.contentType),s}var o=n.content.value[0];if(o.tagClass!==F.Class.UNIVERSAL||o.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Sy(o),n.mac){var c=null,l=0,u=F.derToOid(n.macAlgorithm);switch(u){case st.oids.sha1:c=Ft.md.sha1.create(),l=20;break;case st.oids.sha256:c=Ft.md.sha256.create(),l=32;break;case st.oids.sha384:c=Ft.md.sha384.create(),l=48;break;case st.oids.sha512:c=Ft.md.sha512.create(),l=64;break;case st.oids.md5:c=Ft.md.md5.create(),l=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var f=new Ft.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Ft.util.bytesToHex(n.macIterations),16):1,p=Vu.generateKey(r,f,3,h,l,c),m=Ft.hmac.create();m.start(c,p),m.update(o.value);var v=m.getMac();if(v.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return QY(a,o.value,t,r),a};function Sy(e){if(e.composed||e.constructed){for(var t=Ft.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes();}return e}function QY(e,t,r,n){if(t=F.fromDer(t,r),t.tagClass!==F.Class.UNIVERSAL||t.type!==F.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],a={},o=[];if(!F.validate(s,WN,a,o)){var c=new Error("Cannot read ContentInfo.");throw c.errors=o,c}var l={encrypted:!1},u=null,f=a.content.value[0];switch(F.derToOid(a.contentType)){case st.oids.data:if(f.tagClass!==F.Class.UNIVERSAL||f.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=Sy(f).value;break;case st.oids.encryptedData:u=ZY(f,n),l.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=F.derToOid(a.contentType),c}l.safeBags=XY(u,r,n),e.safeContents.push(l);}}function ZY(e,t){var r={},n=[];if(!F.validate(e,Ft.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=F.derToOid(r.contentType);if(s!==st.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=F.derToOid(r.encAlgorithm);var a=st.pbe.getCipher(s,r.encParameter,t),o=Sy(r.encryptedContentAsn1),c=Ft.util.createBuffer(o.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function XY(e,t,r){if(!t&&e.length===0)return [];if(e=F.fromDer(e,t),e.tagClass!==F.Class.UNIVERSAL||e.type!==F.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],a={},o=[];if(!F.validate(s,zY,a,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var l={type:F.derToOid(a.bagId),attributes:JY(a.bagAttributes)};n.push(l);var u,f,h=a.bagValue.value[0];switch(l.type){case st.oids.pkcs8ShroudedKeyBag:if(h=st.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case st.oids.keyBag:try{l.key=st.privateKeyFromAsn1(h);}catch{l.key=null,l.asn1=h;}continue;case st.oids.certBag:u=YY,f=function(){if(F.derToOid(a.certId)!==st.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=F.derToOid(a.certId),m}var v=F.fromDer(a.cert,t);try{l.cert=st.certificateFromAsn1(v,!0);}catch{l.cert=null,l.asn1=v;}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=l.type,c}if(u!==void 0&&!F.validate(h,u,a,o)){var c=new Error("Cannot read PKCS#12 "+u.name);throw c.errors=o,c}f();}return n}function JY(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!F.validate(e[r],GY,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var a=F.derToOid(n.oid);if(st.oids[a]!==void 0){t[st.oids[a]]=[];for(var o=0;o<n.values.length;++o)t[st.oids[a]].push(n.values[o].value);}}return t}Vu.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,s;if(i!==null)i=Ft.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var a=Ft.util.isArray(t)?t[0]:t;typeof a=="string"&&(a=st.certificateFromPem(a));var o=Ft.md.sha1.create();o.update(F.toDer(st.certificateToAsn1(a)).getBytes()),i=o.digest().getBytes();}else i=Ft.random.getBytes(20);var c=[];i!==null&&c.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.localKeyId).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.friendlyName).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(s=F.create(F.Class.UNIVERSAL,F.Type.SET,!0,c));var l=[],u=[];t!==null&&(Ft.util.isArray(t)?u=t:u=[t]);for(var f=[],h=0;h<u.length;++h){t=u[h],typeof t=="string"&&(t=st.certificateFromPem(t));var p=h===0?s:void 0,m=st.certificateToAsn1(t),v=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.certBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.x509Certificate).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(m).getBytes())])])]),p]);f.push(v);}if(f.length>0){var E=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,f),w=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(E).getBytes())])]);l.push(w);}var y=null;if(e!==null){var b=st.wrapRsaPrivateKey(st.privateKeyToAsn1(e));r===null?y=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.keyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[b]),s]):y=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.pkcs8ShroudedKeyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[st.encryptPrivateKeyInfo(b,r,n)]),s]);var N=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[y]),B=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(N).getBytes())])]);l.push(B);}var V=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,l),X;if(n.useMac){var o=Ft.md.sha1.create(),z=new Ft.util.ByteBuffer(Ft.random.getBytes(n.saltSize)),G=n.count,e=Vu.generateKey(r,z,3,G,20),ee=Ft.hmac.create();ee.start(o,e),ee.update(F.toDer(V).getBytes());var U=ee.getMac();X=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.sha1).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,U.getBytes())]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,z.getBytes()),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(G).getBytes())]);}return F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(3).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(st.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(V).getBytes())])]),X])};Vu.generateKey=Ft.pbe.generatePkcs12Key;});var Cy=P((Eae,zN)=>{var us=Je();zn();is();yy();Zs();Mf();Ey();Wf();$u();mt();Gf();var wy=us.asn1,oo=zN.exports=us.pki=us.pki||{};oo.pemToDer=function(e){var t=us.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return us.util.createBuffer(t.body)};oo.privateKeyFromPem=function(e){var t=us.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=wy.fromDer(t.body);return oo.privateKeyFromAsn1(n)};oo.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:wy.toDer(oo.privateKeyToAsn1(e)).getBytes()};return us.pem.encode(r,{maxline:t})};oo.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:wy.toDer(e).getBytes()};return us.pem.encode(r,{maxline:t})};});var Py=P((wae,tD)=>{var de=Je();zn();Ja();Of();Zs();Cy();xn();no();mt();var Xf=function(e,t,r,n){var i=de.util.createBuffer(),s=e.length>>1,a=s+(e.length&1),o=e.substr(0,a),c=e.substr(s,a),l=de.util.createBuffer(),u=de.hmac.create();r=t+r;var f=Math.ceil(n/16),h=Math.ceil(n/20);u.start("MD5",o);var p=de.util.createBuffer();l.putBytes(r);for(var m=0;m<f;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),p.putBuffer(u.digest());u.start("SHA1",c);var v=de.util.createBuffer();l.clear(),l.putBytes(r);for(var m=0;m<h;++m)u.start(null,null),u.update(l.getBytes()),l.putBuffer(u.digest()),u.start(null,null),u.update(l.bytes()+r),v.putBuffer(u.digest());return i.putBytes(de.util.xorBytes(p.getBytes(),v.getBytes(),n)),i},eQ=function(e,t,r){var n=de.hmac.create();n.start("SHA1",e);var i=de.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},tQ=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=de.util.createBuffer(i),t.length=i.length,n=!0;}catch{}return n},rQ=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=de.util.createBuffer(i),t.length=i.length,n=!0;}catch{}return n},pn=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return de.util.createBuffer(e.getBytes(r))},In=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r);},I={};I.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};I.SupportedVersions=[I.Versions.TLS_1_1,I.Versions.TLS_1_0];I.Version=I.SupportedVersions[0];I.MaxFragment=15360;I.ConnectionEnd={server:0,client:1};I.PRFAlgorithm={tls_prf_sha256:0};I.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};I.CipherType={stream:0,block:1,aead:2};I.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};I.CompressionMethod={none:0,deflate:1};I.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};I.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};I.Alert={};I.Alert.Level={warning:1,fatal:2};I.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};I.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};I.CipherSuites={};I.getCipherSuite=function(e){var t=null;for(var r in I.CipherSuites){var n=I.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};I.handleUnexpected=function(e,t){var r=!e.open&&e.entity===I.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}});};I.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(I.queue(e,I.createAlert(e,{level:I.Alert.Level.warning,description:I.Alert.Description.no_renegotiation})),I.flush(e)),e.process();};I.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===I.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});else {var s=t.fragment,a=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:de.util.createBuffer(s.getBytes(32)),session_id:pn(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=pn(s,2),n.compression_methods=pn(s,1)),a=r-(a-s.length()),a>0){for(var o=pn(s,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:pn(o,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var l=n.extensions[c];if(l.type[0]===0&&l.type[1]===0)for(var u=pn(l.data,2);u.length()>0;){var f=u.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(pn(u,2).getBytes());}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=I.getCipherSuite(n.cipher_suite);else for(var h=de.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=I.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure},cipherSuite:de.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=I.CompressionMethod.none;}return n};I.createSecurityParameters=function(e,t){var r=e.entity===I.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:I.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:I.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s};};I.handleServerHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=QN,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=iQ,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.session.id=i,e.process();}};I.handleClientHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=de.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else {for(var a,o=1;o<I.SupportedVersions.length&&(a=I.SupportedVersions[o],!(a.minor<=n.version.minor));++o);e.version={major:a.major,minor:a.minor},e.session.version=e.version;}s!==null?(e.expect=Ry,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?fQ:Ay,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.open=!0,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHello(e)})),e.session.resuming?(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.pending=I.createConnectionState(e),e.state.current.write=e.state.pending.write,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))):(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)})),e.fail||(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerKeyExchange(e)})),e.verifyClient!==!1&&I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificateRequest(e)})),I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHelloDone(e)})))),I.flush(e),e.process();}};I.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:pn(n,3)},s,a,o=[];try{for(;i.certificate_list.length()>0;)s=pn(i.certificate_list,3),a=de.asn1.fromDer(s),s=de.pki.certificateFromAsn1(a,!0),o.push(s);}catch(l){return e.error(e,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var c=e.entity===I.ConnectionEnd.client;(c||e.verifyClient===!0)&&o.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}}):o.length===0?e.expect=c?GN:Ay:(c?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],I.verifyCertificateChain(e,o)&&(e.expect=c?GN:Ay)),e.process();};I.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});e.expect=sQ,e.process();};I.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:pn(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=de.pki.privateKeyFromPem(s);}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}});}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}});try{var a=e.session.sp;a.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=de.random.getBytes(48);}e.expect=Ry,e.session.clientCertificate!==null&&(e.expect=dQ),e.process();};I.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:pn(n,1),certificate_authorities:pn(n,2)};e.session.certificateRequest=i,e.expect=aQ,e.process();};I.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:pn(n,2).getBytes()},a=de.util.createBuffer();a.putBuffer(e.session.md5.digest()),a.putBuffer(e.session.sha1.digest()),a=a.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(a,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i);}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure}})}e.expect=Ry,e.process();};I.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return (s||s===0)&&(typeof s=="object"&&!de.util.isArray(s)?(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert)):typeof s=="number"&&(n.alert.description=s)),e.error(e,n)}e.session.certificateRequest!==null&&(t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)}),I.queue(e,t)),t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createClientKeyExchange(e)}),I.queue(e,t),e.expect=cQ;var a=function(o,c){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createCertificateVerify(o,c)})),I.queue(o,I.createRecord(o,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),o.state.pending=I.createConnectionState(o),o.state.current.write=o.state.pending.write,I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createFinished(o)})),o.expect=QN,I.flush(o),o.process();};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return a(e,null);I.getClientSignature(e,a);};I.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var r=e.entity===I.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=I.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?oQ:hQ,e.process();};I.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();n=de.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var a=e.entity===I.ConnectionEnd.client,o=a?"server finished":"client finished",c=e.session.sp,l=12,u=Xf;if(n=u(c.master_secret,o,n.getBytes(),l),n.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&a||!e.session.resuming&&!a)&&(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))),e.expect=a?uQ:pQ,e.handshaking=!1,++e.handshakes,e.peerCertificate=a?e.session.serverCertificate:e.session.clientCertificate,I.flush(e),e.isConnected=!0,e.connected(e),e.process();};I.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case I.Alert.Description.close_notify:i="Connection closed.";break;case I.Alert.Description.unexpected_message:i="Unexpected message.";break;case I.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case I.Alert.Description.decryption_failed:i="Decryption failed.";break;case I.Alert.Description.record_overflow:i="Record overflow.";break;case I.Alert.Description.decompression_failure:i="Decompression failed.";break;case I.Alert.Description.handshake_failure:i="Handshake failure.";break;case I.Alert.Description.bad_certificate:i="Bad certificate.";break;case I.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case I.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case I.Alert.Description.certificate_expired:i="Certificate expired.";break;case I.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case I.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case I.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case I.Alert.Description.access_denied:i="Access denied.";break;case I.Alert.Description.decode_error:i="Decode error.";break;case I.Alert.Description.decrypt_error:i="Decrypt error.";break;case I.Alert.Description.export_restriction:i="Export restriction.";break;case I.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case I.Alert.Description.insufficient_security:i="Insufficient security.";break;case I.Alert.Description.internal_error:i="Internal error.";break;case I.Alert.Description.user_canceled:i="User canceled.";break;case I.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===I.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===I.ConnectionEnd.client?"server":"client",alert:n}),e.process();};I.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=de.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in Zf[e.entity][e.expect]?(e.entity===I.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:de.md.md5.create(),sha1:de.md.sha1.create()}),n!==I.HandshakeType.hello_request&&n!==I.HandshakeType.certificate_verify&&n!==I.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),Zf[e.entity][e.expect][n](e,t,i)):I.handleUnexpected(e,t);};I.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process();};I.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===I.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();I.queue(e,I.createRecord(e,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_response,s)})),I.flush(e);}else if(n===I.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,de.util.createBuffer(s));}e.process();};var nQ=0,iQ=1,GN=2,sQ=3,aQ=4,QN=5,oQ=6,uQ=7,cQ=8,lQ=0,fQ=1,Ay=2,dQ=3,Ry=4,hQ=5,pQ=6,R=I.handleUnexpected,ZN=I.handleChangeCipherSpec,wr=I.handleAlert,Vr=I.handleHandshake,XN=I.handleApplicationData,Cr=I.handleHeartbeat,Iy=[];Iy[I.ConnectionEnd.client]=[[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[ZN,wr,R,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,XN,Cr],[R,wr,Vr,R,Cr]];Iy[I.ConnectionEnd.server]=[[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,R,Cr],[ZN,wr,R,R,Cr],[R,wr,Vr,R,Cr],[R,wr,Vr,XN,Cr],[R,wr,Vr,R,Cr]];var cs=I.handleHelloRequest,gQ=I.handleServerHello,JN=I.handleCertificate,YN=I.handleServerKeyExchange,xy=I.handleCertificateRequest,Yf=I.handleServerHelloDone,eD=I.handleFinished,Zf=[];Zf[I.ConnectionEnd.client]=[[R,R,gQ,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,JN,YN,xy,Yf,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,YN,xy,Yf,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,R,xy,Yf,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,R,R,Yf,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,eD],[cs,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[cs,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];var mQ=I.handleClientHello,yQ=I.handleClientKeyExchange,_Q=I.handleCertificateVerify;Zf[I.ConnectionEnd.server]=[[R,mQ,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,JN,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,yQ,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,_Q,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,eD],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];I.generateKeys=function(e,t){var r=Xf,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===I.Versions.TLS_1_0.major&&e.version.minor===I.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var a=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return s&&(o.client_write_IV=a.getBytes(t.fixed_iv_length),o.server_write_IV=a.getBytes(t.fixed_iv_length)),o};I.createConnectionState=function(e){var t=e.entity===I.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return !0},compressionState:null,compressFunction:function(a){return !0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1];}};return s},n={read:r(),write:r()};if(n.read.update=function(s,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(s,a,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,a){return n.write.compressFunction(s,a,n.write)?n.write.cipherFunction(a,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=I.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case I.CompressionMethod.none:break;case I.CompressionMethod.deflate:n.read.compressFunction=rQ,n.write.compressFunction=tQ;break;default:throw new Error("Unsupported compression algorithm.")}}return n};I.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=de.util.createBuffer();return r.putInt32(t),r.putBytes(de.random.getBytes(28)),r};I.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};I.createAlert=function(e,t){var r=de.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),I.createRecord(e,{type:I.ContentType.alert,data:r})};I.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=de.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1]);}var i=t.length(),s=de.util.createBuffer();s.putByte(I.CompressionMethod.none);var a=s.length(),o=de.util.createBuffer();if(e.virtualHost){var c=de.util.createBuffer();c.putByte(0),c.putByte(0);var l=de.util.createBuffer();l.putByte(0),In(l,2,de.util.createBuffer(e.virtualHost));var u=de.util.createBuffer();In(u,2,l),In(c,2,u),o.putBuffer(c);}var f=o.length();f>0&&(f+=2);var h=e.session.id,p=h.length+1+2+4+28+2+i+1+a+f,m=de.util.createBuffer();return m.putByte(I.HandshakeType.client_hello),m.putInt24(p),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),In(m,1,de.util.createBuffer(h)),In(m,2,t),In(m,1,s),f>0&&In(m,2,o),m};I.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=de.util.createBuffer();return n.putByte(I.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),In(n,1,de.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};I.createCertificate=function(e){var t=e.entity===I.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n);}var i=de.util.createBuffer();if(r!==null)try{de.util.isArray(r)||(r=[r]);for(var s=null,a=0;a<r.length;++a){var o=de.pem.decode(r[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=de.util.createBuffer(o.body);s===null&&(s=de.asn1.fromDer(l.bytes(),!1));var u=de.util.createBuffer();In(u,3,l),i.putBuffer(u);}r=de.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r;}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var f=3+i.length(),h=de.util.createBuffer();return h.putByte(I.HandshakeType.certificate),h.putInt24(f),In(h,3,i),h};I.createClientKeyExchange=function(e){var t=de.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(de.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=de.util.createBuffer();return s.putByte(I.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};I.createServerKeyExchange=function(e){var r=de.util.createBuffer();return r};I.getClientSignature=function(e,t){var r=de.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=de.pki.privateKeyFromPem(a);}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}});}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):i=a.sign(i,null),s(n,i);},e.getSignature(e,r,t);};I.createCertificateVerify=function(e,t){var r=t.length+2,n=de.util.createBuffer();return n.putByte(I.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};I.createCertificateRequest=function(e){var t=de.util.createBuffer();t.putByte(1);var r=de.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=de.pki.distinguishedNameToAsn1(i.subject),a=de.asn1.toDer(s);r.putInt16(a.length()),r.putBuffer(a);}var o=1+t.length()+2+r.length(),c=de.util.createBuffer();return c.putByte(I.HandshakeType.certificate_request),c.putInt24(o),In(c,1,t),In(c,2,r),c};I.createServerHelloDone=function(e){var t=de.util.createBuffer();return t.putByte(I.HandshakeType.server_hello_done),t.putInt24(0),t};I.createChangeCipherSpec=function(){var e=de.util.createBuffer();return e.putByte(1),e};I.createFinished=function(e){var t=de.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===I.ConnectionEnd.client,n=e.session.sp,i=12,s=Xf,a=r?"client finished":"server finished";t=s(n.master_secret,a,t.getBytes(),i);var o=de.util.createBuffer();return o.putByte(I.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};I.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=de.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(de.random.getBytes(s)),n};I.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===I.ContentType.handshake||t.type===I.ContentType.alert||t.type===I.ContentType.change_cipher_spec))){if(t.type===I.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null;}var n;if(t.fragment.length()<=I.MaxFragment)n=[t];else {n=[];for(var i=t.fragment.bytes();i.length>I.MaxFragment;)n.push(I.createRecord(e,{type:t.type,data:de.util.createBuffer(i.slice(0,I.MaxFragment))})),i=i.slice(I.MaxFragment);i.length>0&&n.push(I.createRecord(e,{type:t.type,data:de.util.createBuffer(i)}));}for(var s=0;s<n.length&&!e.fail;++s){var a=n[s],o=e.state.current.write;o.update(e,a)&&e.records.push(a);}}};I.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment);}return e.records=[],e.tlsDataReady(e)};var Ty=function(e){switch(e){case!0:return !0;case de.pki.certificateError.bad_certificate:return I.Alert.Description.bad_certificate;case de.pki.certificateError.unsupported_certificate:return I.Alert.Description.unsupported_certificate;case de.pki.certificateError.certificate_revoked:return I.Alert.Description.certificate_revoked;case de.pki.certificateError.certificate_expired:return I.Alert.Description.certificate_expired;case de.pki.certificateError.certificate_unknown:return I.Alert.Description.certificate_unknown;case de.pki.certificateError.unknown_ca:return I.Alert.Description.unknown_ca;default:return I.Alert.Description.bad_certificate}},vQ=function(e){switch(e){case!0:return !0;case I.Alert.Description.bad_certificate:return de.pki.certificateError.bad_certificate;case I.Alert.Description.unsupported_certificate:return de.pki.certificateError.unsupported_certificate;case I.Alert.Description.certificate_revoked:return de.pki.certificateError.certificate_revoked;case I.Alert.Description.certificate_expired:return de.pki.certificateError.certificate_expired;case I.Alert.Description.certificate_unknown:return de.pki.certificateError.certificate_unknown;case I.Alert.Description.unknown_ca:return de.pki.certificateError.unknown_ca;default:return de.pki.certificateError.bad_certificate}};I.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,a,o){var l=e.verify(e,s,a,o);if(l!==!0){if(typeof l=="object"&&!de.util.isArray(l)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate},l.message&&(u.message=l.message),l.alert&&(u.alert.description=l.alert),u}l!==s&&(l=vQ(l));}return l},de.pki.verifyCertificateChain(e.caStore,t,r);}catch(s){var i=s;(typeof i!="object"||de.util.isArray(i))&&(i={send:!0,alert:{level:I.Alert.Level.fatal,description:Ty(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:I.Alert.Level.fatal,description:Ty(i.error)}),e.error(e,i);}return !e.fail};I.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else {r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,a=null;if(i?a=de.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){s=r.cache[a],delete r.cache[a];for(var o in r.order)if(r.order[o]===a){r.order.splice(o,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a];}var a=de.util.bytesToHex(i);r.order.push(a),r.cache[a]=s;};}return r};I.createConnection=function(e){var t=null;e.caStore?de.util.isArray(e.caStore)?t=de.pki.createCaStore(e.caStore):t=e.caStore:t=de.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in I.CipherSuites)r.push(I.CipherSuites[n]);}var i=e.server?I.ConnectionEnd.server:I.ConnectionEnd.client,s=e.sessionCache?I.createSessionCache(e.sessionCache):null,a={version:{major:I.Version.major,minor:I.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,f,h,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:de.util.createBuffer(),tlsData:de.util.createBuffer(),data:de.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,f){f.origin=f.origin||(u.entity===I.ConnectionEnd.client?"client":"server"),f.send&&(I.queue(u,I.createAlert(u,f.alert)),I.flush(u));var h=f.fatal!==!1;h&&(u.fail=!0),e.error(u,f),h&&u.close(!1);},deflate:e.deflate||null,inflate:e.inflate||null};a.reset=function(u){a.version={major:I.Version.major,minor:I.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===I.ConnectionEnd.client?nQ:lQ,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(u||typeof u>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=I.createConnectionState(a);},a.reset();var o=function(u,f){var h=f.type-I.ContentType.change_cipher_spec,p=Iy[u.entity][u.expect];h in p?p[h](u,f):I.handleUnexpected(u,f);},c=function(u){var f=0,h=u.input,p=h.length();if(p<5)f=5-p;else {u.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:de.util.createBuffer(),ready:!1};var m=u.record.version.major===u.version.major;m&&u.session&&u.session.version&&(m=u.record.version.minor===u.version.minor),m||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});}return f},l=function(u){var f=0,h=u.input,p=h.length();if(p<u.record.length)f=u.record.length-p;else {u.record.fragment.putBytes(h.getBytes(u.record.length)),h.compact();var m=u.state.current.read;m.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}})),u.record.ready=!0);}return f};return a.handshake=function(u){if(a.entity!==I.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else {a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,u=u||"";var f=null;u.length>0&&(a.sessionCache&&(f=a.sessionCache.getSession(u)),f===null&&(u="")),u.length===0&&a.sessionCache&&(f=a.sessionCache.getSession(),f!==null&&(u=f.id)),a.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:de.md.md5.create(),sha1:de.md.sha1.create()},f&&(a.version=f.version,a.session.sp=f.sp),a.session.sp.client_random=I.createRandom().getBytes(),a.open=!0,I.queue(a,I.createRecord(a,{type:I.ContentType.handshake,data:I.createClientHello(a)})),I.flush(a);}},a.process=function(u){var f=0;return u&&a.input.putBytes(u),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(f=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(f=l(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),f},a.prepare=function(u){return I.queue(a,I.createRecord(a,{type:I.ContentType.application_data,data:de.util.createBuffer(u)})),I.flush(a)},a.prepareHeartbeatRequest=function(u,f){return u instanceof de.util.ByteBuffer&&(u=u.bytes()),typeof f>"u"&&(f=u.length),a.expectedHeartbeatPayload=u,I.queue(a,I.createRecord(a,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_request,u,f)})),I.flush(a)},a.close=function(u){if(!a.fail&&a.sessionCache&&a.session){var f={id:a.session.id,version:a.session.version,sp:a.session.sp};f.sp.keys=null,a.sessionCache.setSession(f.id,f);}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,I.queue(a,I.createAlert(a,{level:I.Alert.Level.warning,description:I.Alert.Description.close_notify})),I.flush(a)),a.closed(a)),a.reset(u);},a};tD.exports=de.tls=de.tls||{};for(Qf in I)typeof I[Qf]!="function"&&(de.tls[Qf]=I[Qf]);var Qf;de.tls.prf_tls1=Xf;de.tls.hmac_sha1=eQ;de.tls.createSessionCache=I.createSessionCache;de.tls.createConnection=I.createConnection;});var iD=P((Cae,nD)=>{var ls=Je();ns();Py();var Pn=nD.exports=ls.tls;Pn.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Pn.BulkCipherAlgorithm.aes,e.cipher_type=Pn.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Pn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20;},initConnectionState:rD};Pn.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Pn.BulkCipherAlgorithm.aes,e.cipher_type=Pn.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Pn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20;},initConnectionState:rD};function rD(e,t,r){var n=t.entity===ls.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:ls.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:ls.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=wQ,e.write.cipherFunction=bQ,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=Pn.hmac_sha1;}function bQ(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===Pn.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=ls.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=Pn.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(SQ)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function SQ(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n);}return !0}function EQ(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)n=n&&t.at(a)==s;n&&t.truncate(s+1);}return n}function wQ(e,t){var r=!1,n;e.version.minor===Pn.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(EQ);var s=t.macLength,a=ls.random.getBytesSync(s),o=i.output.length();o>=s?(e.fragment=i.output.getBytes(o-s),a=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=ls.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=CQ(t.macKey,a,c)&&r,r}function CQ(e,t,r){var n=ls.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var ky=P((xae,uD)=>{var $t=Je();ai();mt();var Hu=uD.exports=$t.sha512=$t.sha512||{};$t.md.sha512=$t.md.algorithms.sha512=Hu;var aD=$t.sha384=$t.sha512.sha384=$t.sha512.sha384||{};aD.create=function(){return Hu.create("SHA-384")};$t.md.sha384=$t.md.algorithms.sha384=aD;$t.sha512.sha256=$t.sha512.sha256||{create:function(){return Hu.create("SHA-512/256")}};$t.md["sha512/256"]=$t.md.algorithms["sha512/256"]=$t.sha512.sha256;$t.sha512.sha224=$t.sha512.sha224||{create:function(){return Hu.create("SHA-512/224")}};$t.md["sha512/224"]=$t.md.algorithms["sha512/224"]=$t.sha512.sha224;Hu.create=function(e){if(oD||xQ(),typeof e>"u"&&(e="SHA-512"),!(e in na))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=na[e],r=null,n=$t.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);n=$t.util.createBuffer(),r=new Array(t.length);for(var l=0;l<t.length;++l)r[l]=t[l].slice(0);return o},o.start(),o.update=function(c,l){l==="utf8"&&(c=$t.util.encodeUtf8(c));var u=c.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=u[1],u[1]=u[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),sD(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=$t.util.createBuffer();c.putBytes(n.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,u=l&o.blockLength-1;c.putBytes(Ny.substr(0,o.blockLength-u));for(var f,h,p=o.fullMessageLength[0]*8,m=0;m<o.fullMessageLength.length-1;++m)f=o.fullMessageLength[m+1]*8,h=f/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=f>>>0;c.putInt32(p);for(var v=new Array(r.length),m=0;m<r.length;++m)v[m]=r[m].slice(0);sD(v,i,c);var E=$t.util.createBuffer(),w;e==="SHA-512"?w=v.length:e==="SHA-384"?w=v.length-2:w=v.length-4;for(var m=0;m<w;++m)E.putInt32(v[m][0]),(m!==w-1||e!=="SHA-512/224")&&E.putInt32(v[m][1]);return E},o};var Ny=null,oD=!1,Dy=null,na=null;function xQ(){Ny="\x80",Ny+=$t.util.fillString("\0",128),Dy=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],na={},na["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],na["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],na["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],na["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],oD=!0;}function sD(e,t,r){for(var n,i,s,a,o,c,l,u,f,h,p,m,v,E,w,y,b,N,B,V,X,z,G,ee,U,ie,me,Pe,W,K,se,Ae,Fe,Ke,Ve,ot=r.length();ot>=128;){for(W=0;W<16;++W)t[W][0]=r.getInt32()>>>0,t[W][1]=r.getInt32()>>>0;for(;W<80;++W)Ae=t[W-2],K=Ae[0],se=Ae[1],n=((K>>>19|se<<13)^(se>>>29|K<<3)^K>>>6)>>>0,i=((K<<13|se>>>19)^(se<<3|K>>>29)^(K<<26|se>>>6))>>>0,Ke=t[W-15],K=Ke[0],se=Ke[1],s=((K>>>1|se<<31)^(K>>>8|se<<24)^K>>>7)>>>0,a=((K<<31|se>>>1)^(K<<24|se>>>8)^(K<<25|se>>>7))>>>0,Fe=t[W-7],Ve=t[W-16],se=i+Fe[1]+a+Ve[1],t[W][0]=n+Fe[0]+s+Ve[0]+(se/4294967296>>>0)>>>0,t[W][1]=se>>>0;for(v=e[0][0],E=e[0][1],w=e[1][0],y=e[1][1],b=e[2][0],N=e[2][1],B=e[3][0],V=e[3][1],X=e[4][0],z=e[4][1],G=e[5][0],ee=e[5][1],U=e[6][0],ie=e[6][1],me=e[7][0],Pe=e[7][1],W=0;W<80;++W)l=((X>>>14|z<<18)^(X>>>18|z<<14)^(z>>>9|X<<23))>>>0,u=((X<<18|z>>>14)^(X<<14|z>>>18)^(z<<23|X>>>9))>>>0,f=(U^X&(G^U))>>>0,h=(ie^z&(ee^ie))>>>0,o=((v>>>28|E<<4)^(E>>>2|v<<30)^(E>>>7|v<<25))>>>0,c=((v<<4|E>>>28)^(E<<30|v>>>2)^(E<<25|v>>>7))>>>0,p=(v&w|b&(v^w))>>>0,m=(E&y|N&(E^y))>>>0,se=Pe+u+h+Dy[W][1]+t[W][1],n=me+l+f+Dy[W][0]+t[W][0]+(se/4294967296>>>0)>>>0,i=se>>>0,se=c+m,s=o+p+(se/4294967296>>>0)>>>0,a=se>>>0,me=U,Pe=ie,U=G,ie=ee,G=X,ee=z,se=V+i,X=B+n+(se/4294967296>>>0)>>>0,z=se>>>0,B=b,V=N,b=w,N=y,w=v,y=E,se=i+a,v=n+s+(se/4294967296>>>0)>>>0,E=se>>>0;se=e[0][1]+E,e[0][0]=e[0][0]+v+(se/4294967296>>>0)>>>0,e[0][1]=se>>>0,se=e[1][1]+y,e[1][0]=e[1][0]+w+(se/4294967296>>>0)>>>0,e[1][1]=se>>>0,se=e[2][1]+N,e[2][0]=e[2][0]+b+(se/4294967296>>>0)>>>0,e[2][1]=se>>>0,se=e[3][1]+V,e[3][0]=e[3][0]+B+(se/4294967296>>>0)>>>0,e[3][1]=se>>>0,se=e[4][1]+z,e[4][0]=e[4][0]+X+(se/4294967296>>>0)>>>0,e[4][1]=se>>>0,se=e[5][1]+ee,e[5][0]=e[5][0]+G+(se/4294967296>>>0)>>>0,e[5][1]=se>>>0,se=e[6][1]+ie,e[6][0]=e[6][0]+U+(se/4294967296>>>0)>>>0,e[6][1]=se>>>0,se=e[7][1]+Pe,e[7][0]=e[7][0]+me+(se/4294967296>>>0)>>>0,e[7][1]=se>>>0,ot-=128;}}});var cD=P(Oy=>{var TQ=Je();zn();var mr=TQ.asn1;Oy.privateKeyValidator={name:"PrivateKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:mr.Class.UNIVERSAL,type:mr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Oy.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:mr.Class.UNIVERSAL,type:mr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mr.Class.UNIVERSAL,type:mr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:mr.Class.UNIVERSAL,type:mr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};});var ED=P((Aae,SD)=>{var xr=Je();Uu();xn();ky();mt();var gD=cD(),AQ=gD.publicKeyValidator,RQ=gD.privateKeyValidator;var Fy=xr.util.ByteBuffer,Xr=typeof Buffer>"u"?Uint8Array:Buffer;xr.pki=xr.pki||{};SD.exports=xr.pki.ed25519=xr.ed25519=xr.ed25519||{};var at=xr.ed25519;at.constants={};at.constants.PUBLIC_KEY_BYTE_LENGTH=32;at.constants.PRIVATE_KEY_BYTE_LENGTH=64;at.constants.SEED_BYTE_LENGTH=32;at.constants.SIGN_BYTE_LENGTH=64;at.constants.HASH_BYTE_LENGTH=64;at.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=xr.random.getBytesSync(at.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==at.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+at.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Oi({message:t,encoding:"binary"});for(var r=new Xr(at.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Xr(at.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return DQ(r,n),{publicKey:r,privateKey:n}};at.privateKeyFromAsn1=function(e){var t={},r=[],n=xr.asn1.validate(e,RQ,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=xr.asn1.derToOid(t.privateKeyOid),a=xr.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.privateKey,c=Oi({message:xr.asn1.fromDer(o).value,encoding:"binary"});return {privateKeyBytes:c}};at.publicKeyFromAsn1=function(e){var t={},r=[],n=xr.asn1.validate(e,AQ,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=xr.asn1.derToOid(t.publicKeyOid),a=xr.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.ed25519PublicKey;if(o.length!==at.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Oi({message:o,encoding:"binary"})};at.publicKeyFromPrivateKey=function(e){e=e||{};var t=Oi({message:e.privateKey,encoding:"binary"});if(t.length!==at.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+at.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Xr(at.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};at.sign=function(e){e=e||{};var t=Oi(e),r=Oi({message:e.privateKey,encoding:"binary"});if(r.length===at.constants.SEED_BYTE_LENGTH){var n=at.generateKeyPair({seed:r});r=n.privateKey;}else if(r.length!==at.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+at.constants.SEED_BYTE_LENGTH+" or "+at.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Xr(at.constants.SIGN_BYTE_LENGTH+t.length);kQ(i,t,t.length,r);for(var s=new Xr(at.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=i[a];return s};at.verify=function(e){e=e||{};var t=Oi(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Oi({message:e.signature,encoding:"binary"});if(r.length!==at.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+at.constants.SIGN_BYTE_LENGTH);var n=Oi({message:e.publicKey,encoding:"binary"});if(n.length!==at.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+at.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Xr(at.constants.SIGN_BYTE_LENGTH+t.length),s=new Xr(at.constants.SIGN_BYTE_LENGTH+t.length),a;for(a=0;a<at.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<t.length;++a)i[a+at.constants.SIGN_BYTE_LENGTH]=t[a];return OQ(s,i,i.length,n)>=0};function Oi(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Xr)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new Fy(t,r);}else if(!(t instanceof Fy))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Xr(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var My=Ue(),Jf=Ue([1]),IQ=Ue([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),PQ=Ue([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),fD=Ue([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),dD=Ue([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),By=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),NQ=Ue([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Wu(e,t){var r=xr.md.sha512.create(),n=new Fy(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var s=new Xr(at.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=i.charCodeAt(a);return s}function DQ(e,t){var r=[Ue(),Ue(),Ue(),Ue()],n,i=Wu(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,jy(r,i),$y(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function kQ(e,t,r,n){var i,s,a=new Float64Array(64),o=[Ue(),Ue(),Ue(),Ue()],c=Wu(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var l=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var u=Wu(e.subarray(32),r+32);for(qy(u),jy(o,u),$y(e,o),i=32;i<64;++i)e[i]=n[i];var f=Wu(e,r+64);for(qy(f),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=u[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=f[i]*c[s];return mD(e.subarray(32),a),l}function OQ(e,t,r,n){var i,s,a=new Xr(32),o=[Ue(),Ue(),Ue(),Ue()],c=[Ue(),Ue(),Ue(),Ue()];if(s=-1,r<64||BQ(c,n))return -1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var l=Wu(e,r);if(qy(l),vD(o,c,l),jy(c,t.subarray(32)),Uy(o,c),$y(a,o),r-=64,yD(t,0,a,0)){for(i=0;i<r;++i)e[i]=0;return -1}for(i=0;i<r;++i)e[i]=t[i+64];return s=r,s}function mD(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*By[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0;}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*By[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*By[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255;}function qy(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;mD(e,t);}function Uy(e,t){var r=Ue(),n=Ue(),i=Ue(),s=Ue(),a=Ue(),o=Ue(),c=Ue(),l=Ue(),u=Ue();co(r,e[1],e[0]),co(u,t[1],t[0]),kt(r,r,u),uo(n,e[0],e[1]),uo(u,t[0],t[1]),kt(n,n,u),kt(i,e[3],t[3]),kt(i,i,PQ),kt(s,e[2],t[2]),uo(s,s,s),co(a,n,r),co(o,s,i),uo(c,s,i),uo(l,n,r),kt(e[0],a,o),kt(e[1],l,c),kt(e[2],c,o),kt(e[3],a,l);}function hD(e,t,r){for(var n=0;n<4;++n)bD(e[n],t[n],r);}function $y(e,t){var r=Ue(),n=Ue(),i=Ue();qQ(i,t[2]),kt(r,t[0],i),kt(n,t[1],i),ed(e,n),e[31]^=_D(r)<<7;}function ed(e,t){var r,n,i,s=Ue(),a=Ue();for(r=0;r<16;++r)a[r]=t[r];for(Ly(a),Ly(a),Ly(a),n=0;n<2;++n){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,bD(a,s,1-i);}for(r=0;r<16;r++)e[2*r]=a[r]&255,e[2*r+1]=a[r]>>8;}function BQ(e,t){var r=Ue(),n=Ue(),i=Ue(),s=Ue(),a=Ue(),o=Ue(),c=Ue();return ds(e[2],Jf),LQ(e[1],t),ia(i,e[1]),kt(s,i,IQ),co(i,i,e[2]),uo(s,e[2],s),ia(a,s),ia(o,a),kt(c,o,a),kt(r,c,i),kt(r,r,s),FQ(r,r),kt(r,r,i),kt(r,r,s),kt(r,r,s),kt(e[0],r,s),ia(n,e[0]),kt(n,n,s),pD(n,i)&&kt(e[0],e[0],NQ),ia(n,e[0]),kt(n,n,s),pD(n,i)?-1:(_D(e[0])===t[31]>>7&&co(e[0],My,e[0]),kt(e[3],e[0],e[1]),0)}function LQ(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767;}function FQ(e,t){var r=Ue(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)ia(r,r),n!==1&&kt(r,r,t);for(n=0;n<16;++n)e[n]=r[n];}function pD(e,t){var r=new Xr(32),n=new Xr(32);return ed(r,e),ed(n,t),yD(r,0,n,0)}function yD(e,t,r,n){return MQ(e,t,r,n,32)}function MQ(e,t,r,n,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^r[n+s];return (1&a-1>>>8)-1}function _D(e){var t=new Xr(32);return ed(t,e),t[0]&1}function vD(e,t,r){var n,i;for(ds(e[0],My),ds(e[1],Jf),ds(e[2],Jf),ds(e[3],My),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,hD(e,t,n),Uy(t,e),Uy(e,e),hD(e,t,n);}function jy(e,t){var r=[Ue(),Ue(),Ue(),Ue()];ds(r[0],fD),ds(r[1],dD),ds(r[2],Jf),kt(r[3],fD,dD),vD(e,r,t);}function ds(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0;}function qQ(e,t){var r=Ue(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)ia(r,r),n!==2&&n!==4&&kt(r,r,t);for(n=0;n<16;++n)e[n]=r[n];}function Ly(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1);}function bD(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n;}function Ue(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function uo(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n];}function co(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n];}function ia(e,t){kt(e,t,t);}function kt(e,t,r){var n,i,s=0,a=0,o=0,c=0,l=0,u=0,f=0,h=0,p=0,m=0,v=0,E=0,w=0,y=0,b=0,N=0,B=0,V=0,X=0,z=0,G=0,ee=0,U=0,ie=0,me=0,Pe=0,W=0,K=0,se=0,Ae=0,Fe=0,Ke=r[0],Ve=r[1],ot=r[2],Dt=r[3],bt=r[4],ft=r[5],Oe=r[6],Rt=r[7],qt=r[8],ye=r[9],$e=r[10],le=r[11],Ie=r[12],He=r[13],et=r[14],ze=r[15];n=t[0],s+=n*Ke,a+=n*Ve,o+=n*ot,c+=n*Dt,l+=n*bt,u+=n*ft,f+=n*Oe,h+=n*Rt,p+=n*qt,m+=n*ye,v+=n*$e,E+=n*le,w+=n*Ie,y+=n*He,b+=n*et,N+=n*ze,n=t[1],a+=n*Ke,o+=n*Ve,c+=n*ot,l+=n*Dt,u+=n*bt,f+=n*ft,h+=n*Oe,p+=n*Rt,m+=n*qt,v+=n*ye,E+=n*$e,w+=n*le,y+=n*Ie,b+=n*He,N+=n*et,B+=n*ze,n=t[2],o+=n*Ke,c+=n*Ve,l+=n*ot,u+=n*Dt,f+=n*bt,h+=n*ft,p+=n*Oe,m+=n*Rt,v+=n*qt,E+=n*ye,w+=n*$e,y+=n*le,b+=n*Ie,N+=n*He,B+=n*et,V+=n*ze,n=t[3],c+=n*Ke,l+=n*Ve,u+=n*ot,f+=n*Dt,h+=n*bt,p+=n*ft,m+=n*Oe,v+=n*Rt,E+=n*qt,w+=n*ye,y+=n*$e,b+=n*le,N+=n*Ie,B+=n*He,V+=n*et,X+=n*ze,n=t[4],l+=n*Ke,u+=n*Ve,f+=n*ot,h+=n*Dt,p+=n*bt,m+=n*ft,v+=n*Oe,E+=n*Rt,w+=n*qt,y+=n*ye,b+=n*$e,N+=n*le,B+=n*Ie,V+=n*He,X+=n*et,z+=n*ze,n=t[5],u+=n*Ke,f+=n*Ve,h+=n*ot,p+=n*Dt,m+=n*bt,v+=n*ft,E+=n*Oe,w+=n*Rt,y+=n*qt,b+=n*ye,N+=n*$e,B+=n*le,V+=n*Ie,X+=n*He,z+=n*et,G+=n*ze,n=t[6],f+=n*Ke,h+=n*Ve,p+=n*ot,m+=n*Dt,v+=n*bt,E+=n*ft,w+=n*Oe,y+=n*Rt,b+=n*qt,N+=n*ye,B+=n*$e,V+=n*le,X+=n*Ie,z+=n*He,G+=n*et,ee+=n*ze,n=t[7],h+=n*Ke,p+=n*Ve,m+=n*ot,v+=n*Dt,E+=n*bt,w+=n*ft,y+=n*Oe,b+=n*Rt,N+=n*qt,B+=n*ye,V+=n*$e,X+=n*le,z+=n*Ie,G+=n*He,ee+=n*et,U+=n*ze,n=t[8],p+=n*Ke,m+=n*Ve,v+=n*ot,E+=n*Dt,w+=n*bt,y+=n*ft,b+=n*Oe,N+=n*Rt,B+=n*qt,V+=n*ye,X+=n*$e,z+=n*le,G+=n*Ie,ee+=n*He,U+=n*et,ie+=n*ze,n=t[9],m+=n*Ke,v+=n*Ve,E+=n*ot,w+=n*Dt,y+=n*bt,b+=n*ft,N+=n*Oe,B+=n*Rt,V+=n*qt,X+=n*ye,z+=n*$e,G+=n*le,ee+=n*Ie,U+=n*He,ie+=n*et,me+=n*ze,n=t[10],v+=n*Ke,E+=n*Ve,w+=n*ot,y+=n*Dt,b+=n*bt,N+=n*ft,B+=n*Oe,V+=n*Rt,X+=n*qt,z+=n*ye,G+=n*$e,ee+=n*le,U+=n*Ie,ie+=n*He,me+=n*et,Pe+=n*ze,n=t[11],E+=n*Ke,w+=n*Ve,y+=n*ot,b+=n*Dt,N+=n*bt,B+=n*ft,V+=n*Oe,X+=n*Rt,z+=n*qt,G+=n*ye,ee+=n*$e,U+=n*le,ie+=n*Ie,me+=n*He,Pe+=n*et,W+=n*ze,n=t[12],w+=n*Ke,y+=n*Ve,b+=n*ot,N+=n*Dt,B+=n*bt,V+=n*ft,X+=n*Oe,z+=n*Rt,G+=n*qt,ee+=n*ye,U+=n*$e,ie+=n*le,me+=n*Ie,Pe+=n*He,W+=n*et,K+=n*ze,n=t[13],y+=n*Ke,b+=n*Ve,N+=n*ot,B+=n*Dt,V+=n*bt,X+=n*ft,z+=n*Oe,G+=n*Rt,ee+=n*qt,U+=n*ye,ie+=n*$e,me+=n*le,Pe+=n*Ie,W+=n*He,K+=n*et,se+=n*ze,n=t[14],b+=n*Ke,N+=n*Ve,B+=n*ot,V+=n*Dt,X+=n*bt,z+=n*ft,G+=n*Oe,ee+=n*Rt,U+=n*qt,ie+=n*ye,me+=n*$e,Pe+=n*le,W+=n*Ie,K+=n*He,se+=n*et,Ae+=n*ze,n=t[15],N+=n*Ke,B+=n*Ve,V+=n*ot,X+=n*Dt,z+=n*bt,G+=n*ft,ee+=n*Oe,U+=n*Rt,ie+=n*qt,me+=n*ye,Pe+=n*$e,W+=n*le,K+=n*Ie,se+=n*He,Ae+=n*et,Fe+=n*ze,s+=38*B,a+=38*V,o+=38*X,c+=38*z,l+=38*G,u+=38*ee,f+=38*U,h+=38*ie,p+=38*me,m+=38*Pe,v+=38*W,E+=38*K,w+=38*se,y+=38*Ae,b+=38*Fe,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=N+i+65535,i=Math.floor(n/65536),N=n-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=c,e[4]=l,e[5]=u,e[6]=f,e[7]=h,e[8]=p,e[9]=m,e[10]=v,e[11]=E,e[12]=w,e[13]=y,e[14]=b,e[15]=N;}});var TD=P((Rae,xD)=>{var gn=Je();mt();xn();Uu();xD.exports=gn.kem=gn.kem||{};var wD=gn.jsbn.BigInteger;gn.kem.rsa={};gn.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||gn.random,n={};return n.encrypt=function(i,s){var a=Math.ceil(i.n.bitLength()/8),o;do o=new wD(gn.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(wD.ONE)<=0);o=gn.util.hexToBytes(o.toString(16));var c=a-o.length;c>0&&(o=gn.util.fillString("\0",c)+o);var l=i.encrypt(o,"NONE"),u=e.generate(o,s);return {encapsulation:l,key:u}},n.decrypt=function(i,s,a){var o=i.decrypt(s,"NONE");return e.generate(o,a)},n};gn.kem.kdf1=function(e,t){CD(this,e,0,t||e.digestLength);};gn.kem.kdf2=function(e,t){CD(this,e,1,t||e.digestLength);};function CD(e,t,r,n){e.generate=function(i,s){for(var a=new gn.util.ByteBuffer,o=Math.ceil(s/n)+r,c=new gn.util.ByteBuffer,l=r;l<o;++l){c.putInt32(l),t.start(),t.update(i+c.getBytes());var u=t.digest();a.putBytes(u.getBytes(n));}return a.truncate(a.length()-s),a.getBytes()};}});var PD=P((Iae,ID)=>{var ct=Je();mt();ID.exports=ct.log=ct.log||{};ct.log.levels=["none","error","warning","info","debug","verbose","max"];var td={},Wy=[],zu=null;ct.log.LEVEL_LOCKED=2;ct.log.NO_LEVEL_CHECK=4;ct.log.INTERPOLATE=8;for(pi=0;pi<ct.log.levels.length;++pi)Vy=ct.log.levels[pi],td[Vy]={index:pi,name:Vy.toUpperCase()};var Vy,pi;ct.log.logMessage=function(e){for(var t=td[e.level].index,r=0;r<Wy.length;++r){var n=Wy[r];if(n.flags&ct.log.NO_LEVEL_CHECK)n.f(e);else {var i=td[n.level].index;t<=i&&n.f(n,e);}}};ct.log.prepareStandard=function(e){"standard"in e||(e.standard=td[e.level].name+" ["+e.category+"] "+e.message);};ct.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=ct.util.format.apply(this,t);}};ct.log.prepareStandardFull=function(e){"standardFull"in e||(ct.log.prepareStandard(e),e.standardFull=e.standard);};for(Hy=["error","warning","info","debug","verbose"],pi=0;pi<Hy.length;++pi)(function(t){ct.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:r,message:n,arguments:i};ct.log.logMessage(s);};})(Hy[pi]);var Hy,pi;ct.log.makeLogger=function(e){var t={flags:0,f:e};return ct.log.setLevel(t,"none"),t};ct.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&ct.log.LEVEL_LOCKED))for(var n=0;n<ct.log.levels.length;++n){var i=ct.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};ct.log.lock=function(e,t){typeof t>"u"||t?e.flags|=ct.log.LEVEL_LOCKED:e.flags&=~ct.log.LEVEL_LOCKED;};ct.log.addLogger=function(e){Wy.push(e);};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(AD={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Gu=function(e,t){ct.log.prepareStandard(t);var r=AD[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n);},lo=ct.log.makeLogger(Gu)):(Gu=function(t,r){ct.log.prepareStandardFull(r),console.log(r.standardFull);},lo=ct.log.makeLogger(Gu)),ct.log.setLevel(lo,"debug"),ct.log.addLogger(lo),zu=lo):console={log:function(){}};var lo,AD,Gu;zu!==null&&typeof window<"u"&&window.location&&(Ku=new URL(window.location.href).searchParams,Ku.has("console.level")&&ct.log.setLevel(zu,Ku.get("console.level").slice(-1)[0]),Ku.has("console.lock")&&(RD=Ku.get("console.lock").slice(-1)[0],RD=="true"&&ct.log.lock(zu)));var Ku,RD;ct.log.consoleLogger=zu;});var DD=P((Pae,ND)=>{ND.exports=ai();Of();no();iy();ky();});var BD=P((Nae,OD)=>{var Ee=Je();ns();zn();Mu();is();Zs();_y();xn();mt();Gf();var j=Ee.asn1,Hr=OD.exports=Ee.pkcs7=Ee.pkcs7||{};Hr.messageFromPem=function(e){var t=Ee.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=j.fromDer(t.body);return Hr.messageFromAsn1(n)};Hr.messageToPem=function(e,t){var r={type:"PKCS7",body:j.toDer(e.toAsn1()).getBytes()};return Ee.pem.encode(r,{maxline:t})};Hr.messageFromAsn1=function(e){var t={},r=[];if(!j.validate(e,Hr.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=j.derToOid(t.contentType),s;switch(i){case Ee.pki.oids.envelopedData:s=Hr.createEnvelopedData();break;case Ee.pki.oids.encryptedData:s=Hr.createEncryptedData();break;case Ee.pki.oids.signedData:s=Hr.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};Hr.createSignedData=function(){var e=null;return e={type:Ee.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(zy(e,n,Hr.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(Ee.pki.certificateFromAsn1(i[s]));},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(Ee.pki.certificateToAsn1(e.certificates[i]));var s=[],a=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&a.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&a.value[0].value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push(j.create(j.Class.UNIVERSAL,j.Type.SET,!0,e.signerInfos)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.type).getBytes()),a])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Ee.pki.certificateFromPem(a)),i=a.issuer.attributes,s=a.serialNumber;}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=Ee.pki.privateKeyFromPem(o));var c=n.digestAlgorithm||Ee.pki.oids.sha1;switch(c){case Ee.pki.oids.sha1:case Ee.pki.oids.sha256:case Ee.pki.oids.sha384:case Ee.pki.oids.sha512:case Ee.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var l=n.authenticatedAttributes||[];if(l.length>0){for(var u=!1,f=!1,h=0;h<l.length;++h){var p=l[h];if(!u&&p.type===Ee.pki.oids.contentType){if(u=!0,f)break;continue}if(!f&&p.type===Ee.pki.oids.messageDigest){if(f=!0,u)break;continue}}if(!u||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:Ee.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]});},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Ee.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Ee.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Ee.util.encodeUtf8(e.content)),n.detached?e.detachedContent=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i)]));}if(e.signers.length!==0){var s=t();r(s);}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ee.pki.certificateFromPem(n)),e.certificates.push(n);},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var s=e.signers[i],a=s.digestAlgorithm;a in n||(n[a]=Ee.md[Ee.pki.oids[a]].create()),s.authenticatedAttributes.length===0?s.md=n[a]:s.md=Ee.md[Ee.pki.oids[a]].create();}e.digestAlgorithmIdentifiers=[];for(var a in n)e.digestAlgorithmIdentifiers.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(a).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=j.derToOid(e.contentInfo.value[0].value),a=j.toDer(i);a.getByte(),j.getBerValueLength(a),a=a.getBytes();for(var o in n)n[o].start().update(a);for(var c=new Date,l=0;l<e.signers.length;++l){var u=e.signers[l];if(u.authenticatedAttributes.length===0){if(s!==Ee.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else {u.authenticatedAttributesAsn1=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[]),h=0;h<u.authenticatedAttributes.length;++h){var p=u.authenticatedAttributes[h];p.type===Ee.pki.oids.messageDigest?p.value=n[u.digestAlgorithm].digest():p.type===Ee.pki.oids.signingTime&&(p.value||(p.value=c)),f.value.push(Ky(p)),u.authenticatedAttributesAsn1.value.push(Ky(p));}a=j.toDer(f).getBytes(),u.md.start().update(a);}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5");}e.signerInfos=WQ(e.signers);}};Hr.createEncryptedData=function(){var e=null;return e={type:Ee.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){zy(e,t,Hr.asn1.encryptedDataValidator);},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),kD(e);}},e};Hr.createEnvelopedData=function(){var e=null;return e={type:Ee.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=zy(e,t,Hr.asn1.envelopedDataValidator);e.recipients=jQ(r.recipientInfos.value);},toAsn1:function(){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.type).getBytes()),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,VQ(e.recipients)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,KQ(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(s[o].type!==r[o].type||s[o].value!==r[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:case Ee.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=Ee.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}kD(e);},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Ee.pki.oids.rsaEncryption,key:t.publicKey}});},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,s;switch(r){case Ee.pki.oids["aes128-CBC"]:n=16,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes192-CBC"]:n=24,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes256-CBC"]:n=32,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Ee.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=Ee.util.createBuffer(Ee.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=Ee.util.createBuffer(Ee.random.getBytes(i));var a=s(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output;}for(var o=0;o<e.recipients.length;++o){var c=e.recipients[o];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function UQ(e){var t={},r=[];if(!j.validate(e,Hr.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return {version:t.version.charCodeAt(0),issuer:Ee.pki.RDNAttributesAsArray(t.issuer),serialNumber:Ee.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:j.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function $Q(e){return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Ee.util.hexToBytes(e.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.encryptedContent.algorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")]),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function jQ(e){for(var t=[],r=0;r<e.length;++r)t.push(UQ(e[r]));return t}function VQ(e){for(var t=[],r=0;r<e.length;++r)t.push($Q(e[r]));return t}function HQ(e){var t=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.version).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:e.issuer}),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Ee.util.hexToBytes(e.serialNumber))]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.digestAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.signatureAlgorithm).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),t.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Ky(i));}t.value.push(r);}return t}function WQ(e){for(var t=[],r=0;r<e.length;++r)t.push(HQ(e[r]));return t}function Ky(e){var t;if(e.type===Ee.pki.oids.contentType)t=j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.value).getBytes());else if(e.type===Ee.pki.oids.messageDigest)t=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Ee.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=j.utcTimeToDate(i):i=j.generalizedTimeToDate(i):i=new Date(s);}i>=r&&i<n?t=j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(i)):t=j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(i));}return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[t])])}function KQ(e){return [j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Ee.pki.oids.data).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.algorithm).getBytes()),e.parameter?j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,e.content.getBytes())])]}function zy(e,t,r){var n={},i=[];if(!j.validate(t,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var a=j.derToOid(n.contentType);if(a!==Ee.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(Ee.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[c].value;}else o=n.encryptedContent;e.encryptedContent={algorithm:j.derToOid(n.encAlgorithm),parameter:Ee.util.createBuffer(n.encParameter.value),content:Ee.util.createBuffer(o)};}if(n.content){var o="";if(Ee.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==j.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[c].value;}else o=n.content;e.content=Ee.util.createBuffer(o);}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function kD(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Ee.pki.oids["aes128-CBC"]:case Ee.pki.oids["aes192-CBC"]:case Ee.pki.oids["aes256-CBC"]:t=Ee.aes.createDecryptionCipher(e.encryptedContent.key);break;case Ee.pki.oids.desCBC:case Ee.pki.oids["des-EDE3-CBC"]:t=Ee.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output;}}});var FD=P((Dae,LD)=>{var ir=Je();ns();Ja();Of();no();mt();var nd=LD.exports=ir.ssh=ir.ssh||{};nd.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+r+`\r
`;var a=ir.util.createBuffer();fo(a,n),gi(a,e.e),gi(a,e.n);var o=ir.util.encode64(a.bytes(),64),c=Math.floor(o.length/66)+1;s+="Public-Lines: "+c+`\r
`,s+=o;var l=ir.util.createBuffer();gi(l,e.d),gi(l,e.p),gi(l,e.q),gi(l,e.qInv);var u;if(!t)u=ir.util.encode64(l.bytes(),64);else {var f=l.length()+16-1;f-=f%16;var h=rd(l.bytes());h.truncate(h.length()-f+l.length()),l.putBuffer(h);var p=ir.util.createBuffer();p.putBuffer(rd("\0\0\0\0",t)),p.putBuffer(rd("\0\0\0",t));var m=ir.aes.createEncryptionCipher(p.truncate(8),"CBC");m.start(ir.util.createBuffer().fillWithByte(0,16)),m.update(l.copy()),m.finish();var v=m.output;v.truncate(16),u=ir.util.encode64(v.bytes(),64);}c=Math.floor(u.length/66)+1,s+=`\r
Private-Lines: `+c+`\r
`,s+=u;var E=rd("putty-private-key-file-mac-key",t),w=ir.util.createBuffer();fo(w,n),fo(w,i),fo(w,r),w.putInt32(a.length()),w.putBuffer(a),w.putInt32(l.length()),w.putBuffer(l);var y=ir.hmac.create();return y.start("sha1",E),y.update(w.bytes()),s+=`\r
Private-MAC: `+y.digest().toHex()+`\r
`,s};nd.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=ir.util.createBuffer();return fo(n,r),gi(n,e.e),gi(n,e.n),r+" "+ir.util.encode64(n.bytes())+" "+t};nd.privateKeyToOpenSSH=function(e,t){return t?ir.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):ir.pki.privateKeyToPem(e)};nd.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||ir.md.md5.create(),n="ssh-rsa",i=ir.util.createBuffer();fo(i,n),gi(i,e.e),gi(i,e.n),r.start(),r.update(i.getBytes());var s=r.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else {if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function gi(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=ir.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n);}function fo(e,t){e.putInt32(t.length),e.putString(t);}function rd(){for(var e=ir.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var Gy=P((kae,MD)=>{MD.exports=Je();ns();iD();zn();Af();Mu();ED();Ja();TD();PD();DD();vy();Mf();Zs();hy();Ey();BD();Cy();gy();sy();Wf();xn();uy();FD();Py();mt();});var UD=P((Oae,qD)=>{qD.exports={dc:"0.9.2342.19200300.100.1.25"};});var Yy=P((Bae,$D)=>{var id;$D.exports=zQ;function zQ(){var e,t,r,n;if(!id){id=Gy(),e=id.oids;for(t in r=UD())n=r[t],e[t]==null&&(e[t]=n),e[n]==null&&(e[n]=t);}return id}});var Qu=P((Lae,zD)=>{var sd,Zy,Yu,Qy,jD,VD,Xy;zD.exports=ad;sd=Yy();Zy={der:HD,pem:WD,txt:GQ,asn1:KD,x509:YQ};Yu=[];for(Qy in Zy)jD=Zy[Qy],ad[Qy]=Yu.length,Yu.push(jD);ad.forge=ad.x509;VD=Buffer.isBuffer;Xy=Buffer.from||function(e,t){return new Buffer(e,t)};function ad(e,t){var r;return r=Yu[e]||Yu[0],t!=null?r(t):r}function HD(e){return VD(e)?e:Xy(e,"binary")}function WD(e){var t,r,n,i;for(e=HD(e).toString("base64"),t=["-----BEGIN CERTIFICATE-----"],r=0,n=e.length;r<n;r+=64)i=r,t.push(e.substr(i,64));return t.push("-----END CERTIFICATE-----",""),t.join(`\r
`)}function GQ(e){var t;return t=KD(e),"Subject	"+t.subject.value.map(function(r){return Xy(r.value[0].value[1].value,"binary").toString("utf8")}).join("/")+`
Valid	`+t.valid.value.map(function(r){return r.value}).join(" - ")+`
`+WD(e)}function KD(e){var t,r,n,i;return t=sd().asn1,e=e.toString("binary"),r=t.fromDer(e).value[0].value,n=r[0],i=n.tagClass===t.Class.CONTEXT_SPECIFIC&&n.type===0&&n.constructed,r=r.slice(i),{serial:r[0],valid:r[3],issuer:r[2],subject:r[4]}}function YQ(e){return sd().pki.certificateFromAsn1(sd().asn1.fromDer(e.toString("binary")))}});var YD=P(e_=>{e_.all=ZQ;e_.each=GD;GD.async=QQ;function GD(){var e;Jy(arguments,e={unique:!0,ondata:function(t){typeof e.$cb=="function"&&e.$cb(t);}});}function QQ(){var e;Jy(arguments,e={async:!0,ondata:function(t){typeof e.$cb=="function"&&e.$cb(void 0,t);},onend:function(){typeof e.$cb=="function"&&e.$cb();}});}function ZQ(){var e;return Jy(arguments,{ondata:e=[]}),e}function Jy(e,t){var r,n;r=ku(),n=e[0],t.unique==null&&(t.unique=!1),t.format=n??r.der2.x509,t.$cb=e[1]||n,r(t);}});var s_=P((Mae,XD)=>{var n_,QD,t_,Zu,i_,r_;n_=he("crypto");QD=Yy();t_=Qu();Zu=QD().asn1;i_=t_(t_.asn1);XD.exports=eZ;r_=Buffer.from||function(e,t){return new Buffer(e,t)};function XQ(e){var t;return t=n_.createHash("sha1"),i_(e).subject.value.forEach(function(r){var n,i;r=Zu.copy(r),n=r.value[0].value[1],n.value&&(n.type=Zu.Type.UTF8,i=r_(n.value,"binary").toString("utf8"),i=i.trim().replace(/[A-Z]+/g,function(s){return s.toLowerCase()}).replace(/\s+/g," "),n.value=r_(i,"utf8").toString("binary"),t.update(Zu.toDer(r).getBytes(),"binary"));}),ZD(t)}function JQ(e){var t,r;return t=n_.createHash("md5"),r=i_(e).subject,t.update(Zu.toDer(r).getBytes(),"binary"),ZD(t)}function ZD(e){return e=e.digest().slice(0,4),e.writeUInt32LE(e.readUInt32BE(0),0),e.toString("hex")}function eZ(e,t){var r;return r=e===0?JQ:XQ,t!=null?r(t):r}});var o_=P((qae,ik)=>{var ek,Xu,a_,tk,od,hs,ec,Ju;ek=he("https");Xu=he("tls");a_=Qu();ik.exports=rk;rk.inject=nk;tk=a_(a_.pem);od=ek.globalAgent.options;hs=[];function rk(e){return nk(e,[]),tZ}function tZ(e){hs.push(tk(e));}ec=0;function nk(e,t){if(t&&(hs.length=0,hs.push.apply(hs,t)),e=e==="+"?2:e?1:0,e!==ec){switch(ec){case 1:od.ca===hs&&delete od.ca;break;case 2:Xu.createSecureContext===JD&&(Xu.createSecureContext=Ju,Ju=void 0);}switch(ec=e){case 1:od.ca=hs;break;case 2:Ju||(Ju=Xu.createSecureContext,Xu.createSecureContext=JD);}}}function JD(e){var t,r,n,i,s;if(t=Ju.apply(this,arguments),ec===2&&!(e!=null&&e.ca))for(r=0,i=(n=hs).length;r<i;++r)s=n[r],t.context.addCACert(s);return t}});var ok=P((sk,ak)=>{var rZ=he("stream");ak.exports=u_;u_.through=u_;function u_(e,t,r){e=e||function(u){this.queue(u);},t=t||function(){this.queue(null);};var n=!1,i=!1,s=[],a=!1,o=new rZ;o.readable=o.writable=!0,o.paused=!1,o.autoDestroy=!(r&&r.autoDestroy===!1),o.write=function(u){return e.call(this,u),!o.paused};function c(){for(;s.length&&!o.paused;){var u=s.shift();if(u===null)return o.emit("end");o.emit("data",u);}}o.queue=o.push=function(u){return a||(u===null&&(a=!0),s.push(u),c()),o},o.on("end",function(){o.readable=!1,!o.writable&&o.autoDestroy&&process.nextTick(function(){o.destroy();});});function l(){o.writable=!1,t.call(o),!o.readable&&o.autoDestroy&&o.destroy();}return o.end=function(u){if(!n)return n=!0,arguments.length&&o.write(u),l(),o},o.destroy=function(){if(!i)return i=!0,n=!0,s.length=0,o.writable=o.readable=!1,o.emit("close"),o},o.pause=function(){if(!o.paused)return o.paused=!0,o},o.resume=function(){return o.paused&&(o.paused=!1,o.emit("resume")),c(),o.paused||o.emit("drain"),o},o}});var ck=P((Uae,uk)=>{var nZ=ok(),iZ=he("string_decoder").StringDecoder;uk.exports=sZ;function sZ(e,t,r){var n=new iZ,i="",s=r&&r.maxLength,a=!(r&&r.trailing===!1);typeof e=="function"&&(t=e,e=null),e||(e=/\r?\n/);function o(l,u){if(t){try{u=t(u);}catch(f){return l.emit("error",f)}typeof u<"u"&&l.queue(u);}else l.queue(u);}function c(l,u){var f=((i??"")+u).split(e);if(i=f.pop(),s&&i.length>s)return l.emit("error",new Error("maximum buffer reached"));for(var h=0;h<f.length;h++){var p=f[h];o(l,p);}}return nZ(function(l){c(this,n.write(l));},function(){n.end&&c(this,n.end()),a&&i!=null&&o(this,i),this.queue(null);})}});var d_=P(ud=>{var lk,c_,fk,cd,l_,dk,f_=typeof ud<"u"&&ud||ud;lk=he("path");c_=he("child_process");fk=ck();l_={maxBuffer:1024*1024*1024};function hk(e){var t;return e==null&&(e="roots.exe"),t=cd,cd=lk.resolve(__dirname,e),t}hk();f_.exe=hk;f_.sync=aZ;function aZ(e){var t,r;return {run:s,next:n,done:i};function n(){if(t||(t=[],r=0,s(function(a){a&&t.push(a);})),r<t.length)return t[r++];t=[];}function i(){t=[];}function s(a){pk(a).on("end",function(){a();}).end(c_.execFileSync(cd,e,l_));}}f_.async=oZ;function oZ(e){var t,r,n;return {run:c,next:i,done:a};function i(){return t||(t=[],r=[],c(s)),t.length?Promise.resolve(t.shift()):n?Promise.resolve():new Promise(function(l){r.push(l);})}function s(l){n||(l?r.length?r.shift()(l):t.push(l):o());}function a(){t=[],o();}function o(){var l,u,f,h;for(n=!0,l=0,f=(u=r).length;l<f;++l)h=u[l],h();}function c(l){c_.execFile(cd,e,l_,function(){}).stdout.pipe(pk(l)).on("end",function(){l();});}}function pk(e){return fk(function(t){t.length&&e(dk(t,"hex"));})}dk=Buffer.from||function(e,t){return new Buffer(e,t)};});var yk=P(ld=>{var gk=typeof ld<"u"&&ld||ld;gk.sync=mk;function mk(){return {next:function(){},done:function(){},run:function(e){return e()}}}gk.async=mk;});var _k=P(()=>{});var vk=P(()=>{});var Yae,h_=tS(()=>{Yae=eS({"./crypt32-ia32.node":()=>_k(),"./crypt32-x64.node":()=>vk()});});var Ek=P(fd=>{h_();var p_,bk=typeof fd<"u"&&fd||fd;p_=Yae("./crypt32-"+process.arch);bk.sync=Sk;function Sk(e){var t,r;return r=e.length?0:-1,{next:n,done:i,run:s};function n(){for(var a;r<e.length;){if(t==null&&(t=r<0?p_():p_(e[r])),a=t.next())return a;t.done(),t=void 0,r++;}}function i(){t?.done(),t=void 0,r=e.length;}function s(a){for(var o;o=n();)a(o);a();}}bk.async=cZ;function cZ(e){var t,r;return t=Sk(e),r=t.next,t.run=n,t;function n(i){function s(){return Promise.resolve().then(r).then(function(a){if(a)return i(a),s();i();})}s();}}});var xk=P((Xae,Ck)=>{var wk;wk=he("crypto");Ck.exports=lZ;function lZ(){var e;e=new Set;function t(r){var n;if(n=wk.createHash("sha256").update(r).digest("base64"),!e.has(n))return e.add(n),!0}return t}});var Rk=P((Jae,Ak)=>{var Tk=(e,t)=>function(){let r=t.promiseModule,n=new Array(arguments.length);for(let i=0;i<arguments.length;i++)n[i]=arguments[i];return new r((i,s)=>{t.errorFirst?n.push(function(a,o){if(t.multiArgs){let c=new Array(arguments.length-1);for(let l=1;l<arguments.length;l++)c[l-1]=arguments[l];a?(c.unshift(a),s(c)):i(c);}else a?s(a):i(o);}):n.push(function(a){if(t.multiArgs){let o=new Array(arguments.length-1);for(let c=0;c<arguments.length;c++)o[c]=arguments[c];i(o);}else i(a);}),e.apply(this,n);})};Ak.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);let r=i=>{let s=a=>typeof a=="string"?i===a:a.test(i);return t.include?t.include.some(s):!t.exclude.some(s)},n;typeof e=="function"?n=function(){return t.excludeMain?e.apply(this,arguments):Tk(e,t).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(e));for(let i in e){let s=e[i];n[i]=typeof s=="function"&&r(i)?Tk(s,t):s;}return n};});var Dk=P((eoe,g_)=>{var fZ=he("fs"),sa=he("path"),Ik=Rk(),Pk={mode:511&~process.umask(),fs:fZ},Nk=e=>{if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(sa.parse(e).root,""))){let r=new Error(`Path contains invalid characters: ${e}`);throw r.code="EINVAL",r}};g_.exports=(e,t)=>Promise.resolve().then(()=>{Nk(e),t=Object.assign({},Pk,t);let r=Ik(t.fs.mkdir),n=Ik(t.fs.stat),i=s=>r(s,t.mode).then(()=>s).catch(a=>{if(a.code==="ENOENT"){if(a.message.includes("null bytes")||sa.dirname(s)===s)throw a;return i(sa.dirname(s)).then(()=>i(s))}return n(s).then(o=>o.isDirectory()?s:Promise.reject()).catch(()=>{throw a})});return i(sa.resolve(e))});g_.exports.sync=(e,t)=>{Nk(e),t=Object.assign({},Pk,t);let r=n=>{try{t.fs.mkdirSync(n,t.mode);}catch(i){if(i.code==="ENOENT"){if(i.message.includes("null bytes")||sa.dirname(n)===n)throw i;return r(sa.dirname(n)),r(n)}try{if(!t.fs.statSync(n).isDirectory())throw new Error("The path is not a directory")}catch{throw i}}return n};return r(sa.resolve(e))};});var jk=P((toe,$k)=>{var rc,kk,tc,Ok,y_,Bk,Lk,Fk,Mk,qk,Uk;rc=he("fs");kk=he("os");tc=he("path");Ok=Dk();y_=Qu();Bk=s_();$k.exports=dZ;Lk=y_(y_.txt);Fk=Bk();Mk=__(rc.writeFile);qk=__(rc.readdir);Uk=__(rc.unlink);function dZ(e){var t,r,n,i,s;return i={},s=new Set,a;function a(f){return Promise.resolve(f).then(o)}function o(f){f?(r||(r=pZ(e.save||e.$ave).then(function(h){return t=h})),r=r.then(function(){if(t)return c(f)})):r?r.then(u).then(function(){n?.end(),t&&e.$ave&&(process.env.SSL_CERT_DIR=ku().path=t),typeof e.onsave=="function"&&e.onsave(t);}):typeof e.onsave=="function"&&e.onsave();}function c(f){var h,p;return (n||(n=rc.createWriteStream(l("roots.pem")))).write(h=Lk(f)),i[p=Fk(f)]||(i[p]=0),Mk(l(p+"."+i[p]++),h).catch(m_)}function l(f){return s.add(f),tc.join(t,f)}function u(){t&&qk(t).then(function(f){return Promise.all(f.filter(function(h){return !s.has(h)}).map(function(h){return tc.join(t,h)}).map(function(h){return Uk(h).catch(m_)}))}).catch(m_);}}function hZ(){return [tc.join(__dirname,"../pem"),tc.join(kk.homedir(),".local/win-ca/pem")]}function pZ(e){var t;return typeof e=="string"?e=[e]:Array.isArray(e)||(e=hZ()),t=0,r();function r(){return t<e.length?Ok(e[t++]).catch(r):Promise.resolve()}}function __(e){return function(){var t,r=this;return t=[].slice.call(arguments),new Promise(function(n,i){t.push(s),e.apply(r,t);function s(a,o){a?i(a):n(o);}})}}function m_(){}});var ku=P((roe,Kk)=>{var v_,Hk,Wk;Kk.exports=Wr;Wr.disabled=v_=process.platform!=="win32";Wr.nApi=Hk=!!process.versions.napi&&Wr===SP()&&!(Wr.electron=wP()());Wr.der2=Wk=Qu();Wr.hash=gZ;Wr.inject=mZ;Wr.exe=yZ;_Z(Wr,YD());!v_&&Wr===b_()&&Wr({inject:!0,$ave:!0,async:!0});function gZ(){return (Wr.hash=s_()).apply(this,arguments)}function mZ(){return (Wr.inject=o_().inject).apply(this,arguments)}function yZ(){return (Wr.exe=d_().exe).apply(this,arguments)}function Wr(e){var t,r,n,i,s,a,o,c,l;if(e==null&&(e={}),t=v_||e.disabled?yk():((r=e.fallback)!=null?r:!Hk)?d_():Ek(),(n=e.store)?Array.isArray(n)||(n=[n]):n=[],t=t[(i=e.async)?"async":"sync"](n),s=i?f:u,e.unique!==!1&&(a=xk()()),o=Wk(e.format),Array.isArray(e.ondata)&&(e.ondata=e.ondata.push.bind(e.ondata)),(e.save||e.$ave)&&(c=jk()(e)),e.inject&&(l=o_()(e.inject)),e.generator)return (i?p:h)();t.run(function(y){(!y||!a||a(y))&&s(y);});function u(y){c&&c(y),y?(l&&l(y),typeof e.ondata=="function"&&e.ondata(o(y))):typeof e.onend=="function"&&e.onend();}function f(y){Promise.resolve(y).then(u);}function h(){var y;return y={},y[Symbol.iterator]=Vk,y.return=v,y.next=E,y}function p(){var y,b;return y={},y[(b=Symbol.asyncIterator)!=null?b:"@"]=Vk,y.return=v,y.next=w,y}function m(y){return s(y),{done:!y,value:y!=null?o(y):y}}function v(y){return t.done(),{done:!0,value:y}}function E(){for(var y;(y=t.next())&&a&&!a(y););return m(y)}function w(){function y(){return Promise.resolve().then(t.next).then(function(b){return b&&a&&!a(b)?y():m(b)})}return y()}}function Vk(){return this}function _Z(e,t){for(var r in t)e[r]=t[r];return e}});var b_=P((noe,zk)=>{zk.exports=ku();});var Qk=P(aa=>{Object.defineProperty(aa,"__esModule",{value:!0});aa.convert=aa.Format=void 0;var nc=Gy(),ps;(function(e){e.der="der",e.pem="pem",e.txt="txt",e.asn1="asn1",e.x509="x509",e.fingerprint="fingerprint";})(ps=aa.Format||(aa.Format={}));function Gk(e){var t=nc.pki.pemToDer(e),r=nc.asn1,n=r.fromDer(t.data.toString("binary")).value[0].value,i=n[0],s=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(s);return {serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}function vZ(e){var t=Gk(e),r=t.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=t.valid.value.map(function(i){return i.value}).join(" - ");return ["Subject	".concat(r),"Valid	".concat(n),String(e)].join(`
`)}function Yk(e,t){switch(t){case ps.der:return nc.pki.pemToDer(e);case ps.pem:return e;case ps.txt:return vZ(e);case ps.asn1:return Gk(e);case ps.fingerprint:var r=nc.md.sha1.create(),n=Yk(e,ps.der);return r.update(n.getBytes()),r.digest().toHex();case ps.x509:return nc.pki.certificateFromPem(e);default:throw new Error("unknown format ".concat(t))}}aa.convert=Yk;});var tO=P(Jr=>{var oa=Jr&&Jr.__assign||function(){return oa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);}return e},oa.apply(this,arguments)},dd=Jr&&Jr.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.convert=Jr.Format=Jr.addToGlobalAgent=Jr.get=void 0;var Xk=he("https"),bZ=he("tls"),Zk=he("child_process"),Bi=Qk();Object.defineProperty(Jr,"Format",{enumerable:!0,get:function(){return Bi.Format}});Object.defineProperty(Jr,"convert",{enumerable:!0,get:function(){return Bi.convert}});var Jk=process.platform==="darwin",pd={keychain:"all",unique:!0,excludeBundled:!0,format:Bi.Format.pem};function eO(e){if(e===void 0&&(e=pd),!Jk)return [];e=oa(oa({},pd),e);var t=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",s=(0, Zk.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(t).map(function(l){return l.trim()});n=dd(dd([],n,!0),s,!0);}if(e.keychain==="all"||e.keychain==="SystemRootCertificates"){var a=(0, Zk.spawnSync)("/usr/bin/security",r).stdout.toString().split(t).map(function(l){return l.trim()});n=dd(dd([],n,!0),a,!0);}if(e.unique||e.excludeBundled){var o=n.map(function(l){return (0, Bi.convert)(l,Bi.Format.fingerprint)}),c=e.excludeBundled?bZ.rootCertificates.map(function(l){return (0, Bi.convert)(l,Bi.Format.fingerprint)}):[];n=n.filter(function(l,u){var f=o[u];return !(e.unique&&u!==o.indexOf(f)||e.excludeBundled&&c.includes(f))});}return n.map(function(l){return (0, Bi.convert)(l,e.format)})}Jr.get=eO;var hd=Xk.globalAgent.options.ca,SZ=function(e){if(e===void 0&&(e=pd),!!Jk){var t;Array.isArray(hd)?t=Array.from(hd):t=typeof hd<"u"?[hd]:[],eO(oa(oa(oa({},pd),e),{format:Bi.Format.pem})).forEach(function(r){return t.push(r)}),Xk.globalAgent.options.ca=t;}};Jr.addToGlobalAgent=SZ;});var bd=P(sr=>{Object.defineProperty(sr,"__esModule",{value:!0});sr.thenable=sr.typedArray=sr.stringArray=sr.array=sr.func=sr.error=sr.number=sr.string=sr.boolean=void 0;function CZ(e){return e===!0||e===!1}sr.boolean=CZ;function cO(e){return typeof e=="string"||e instanceof String}sr.string=cO;function xZ(e){return typeof e=="number"||e instanceof Number}sr.number=xZ;function TZ(e){return e instanceof Error}sr.error=TZ;function lO(e){return typeof e=="function"}sr.func=lO;function fO(e){return Array.isArray(e)}sr.array=fO;function AZ(e){return fO(e)&&e.every(t=>cO(t))}sr.stringArray=AZ;function RZ(e,t){return Array.isArray(e)&&e.every(t)}sr.typedArray=RZ;function IZ(e){return e&&lO(e.then)}sr.thenable=IZ;});var ho=P(Ir=>{Object.defineProperty(Ir,"__esModule",{value:!0});Ir.stringArray=Ir.array=Ir.func=Ir.error=Ir.number=Ir.string=Ir.boolean=void 0;function PZ(e){return e===!0||e===!1}Ir.boolean=PZ;function dO(e){return typeof e=="string"||e instanceof String}Ir.string=dO;function NZ(e){return typeof e=="number"||e instanceof Number}Ir.number=NZ;function DZ(e){return e instanceof Error}Ir.error=DZ;function kZ(e){return typeof e=="function"}Ir.func=kZ;function hO(e){return Array.isArray(e)}Ir.array=hO;function OZ(e){return hO(e)&&e.every(t=>dO(t))}Ir.stringArray=OZ;});var G_=P(Le=>{Object.defineProperty(Le,"__esModule",{value:!0});Le.Message=Le.NotificationType9=Le.NotificationType8=Le.NotificationType7=Le.NotificationType6=Le.NotificationType5=Le.NotificationType4=Le.NotificationType3=Le.NotificationType2=Le.NotificationType1=Le.NotificationType0=Le.NotificationType=Le.RequestType9=Le.RequestType8=Le.RequestType7=Le.RequestType6=Le.RequestType5=Le.RequestType4=Le.RequestType3=Le.RequestType2=Le.RequestType1=Le.RequestType=Le.RequestType0=Le.AbstractMessageSignature=Le.ParameterStructures=Le.ResponseError=Le.ErrorCodes=void 0;var ua=ho(),C_;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3;})(C_||(Le.ErrorCodes=C_={}));var x_=class e extends Error{constructor(t,r,n){super(r),this.code=ua.number(t)?t:C_.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,e.prototype);}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};Le.ResponseError=x_;var en=class e{constructor(t){this.kind=t;}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};Le.ParameterStructures=en;en.auto=new en("auto");en.byPosition=new en("byPosition");en.byName=new en("byName");var jt=class{constructor(t,r){this.method=t,this.numberOfParams=r;}get parameterStructures(){return en.auto}};Le.AbstractMessageSignature=jt;var T_=class extends jt{constructor(t){super(t,0);}};Le.RequestType0=T_;var A_=class extends jt{constructor(t,r=en.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Le.RequestType=A_;var R_=class extends jt{constructor(t,r=en.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Le.RequestType1=R_;var I_=class extends jt{constructor(t){super(t,2);}};Le.RequestType2=I_;var P_=class extends jt{constructor(t){super(t,3);}};Le.RequestType3=P_;var N_=class extends jt{constructor(t){super(t,4);}};Le.RequestType4=N_;var D_=class extends jt{constructor(t){super(t,5);}};Le.RequestType5=D_;var k_=class extends jt{constructor(t){super(t,6);}};Le.RequestType6=k_;var O_=class extends jt{constructor(t){super(t,7);}};Le.RequestType7=O_;var B_=class extends jt{constructor(t){super(t,8);}};Le.RequestType8=B_;var L_=class extends jt{constructor(t){super(t,9);}};Le.RequestType9=L_;var F_=class extends jt{constructor(t,r=en.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Le.NotificationType=F_;var M_=class extends jt{constructor(t){super(t,0);}};Le.NotificationType0=M_;var q_=class extends jt{constructor(t,r=en.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};Le.NotificationType1=q_;var U_=class extends jt{constructor(t){super(t,2);}};Le.NotificationType2=U_;var $_=class extends jt{constructor(t){super(t,3);}};Le.NotificationType3=$_;var j_=class extends jt{constructor(t){super(t,4);}};Le.NotificationType4=j_;var V_=class extends jt{constructor(t){super(t,5);}};Le.NotificationType5=V_;var H_=class extends jt{constructor(t){super(t,6);}};Le.NotificationType6=H_;var W_=class extends jt{constructor(t){super(t,7);}};Le.NotificationType7=W_;var K_=class extends jt{constructor(t){super(t,8);}};Le.NotificationType8=K_;var z_=class extends jt{constructor(t){super(t,9);}};Le.NotificationType9=z_;var pO;(function(e){function t(i){let s=i;return s&&ua.string(s.method)&&(ua.string(s.id)||ua.number(s.id))}e.isRequest=t;function r(i){let s=i;return s&&ua.string(s.method)&&i.id===void 0}e.isNotification=r;function n(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(ua.string(s.id)||ua.number(s.id)||s.id===null)}e.isResponse=n;})(pO||(Le.Message=pO={}));});var Q_=P(gs=>{var gO;Object.defineProperty(gs,"__esModule",{value:!0});gs.LRUCache=gs.LinkedMap=gs.Touch=void 0;var Pr;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last;})(Pr||(gs.Touch=Pr={}));var Sd=class{constructor(){this[gO]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0;}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++;}isEmpty(){return !this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,r=Pr.None){let n=this._map.get(t);if(n)return r!==Pr.None&&this.touch(n,r),n.value}set(t,r,n=Pr.None){let i=this._map.get(t);if(i)i.value=r,n!==Pr.None&&this.touch(i,n);else {switch(i={key:t,value:r,next:void 0,previous:void 0},n){case Pr.None:this.addItemLast(i);break;case Pr.First:this.addItemFirst(i);break;case Pr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++;}return this}delete(t){return !!this.remove(t)}remove(t){let r=this._map.get(t);if(r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next;}}keys(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}values(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}entries(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}[(gO=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++;}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++;}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++;}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next;}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous;}else {let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r;}t.next=void 0,t.previous=void 0,this._state++;}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Pr.First&&r!==Pr.Last)){if(r===Pr.First){if(t===this._head)return;let n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++;}else if(r===Pr.Last){if(t===this._tail)return;let n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++;}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r]);}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n);}};gs.LinkedMap=Sd;var Y_=class extends Sd{constructor(t,r=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,r),1);}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim();}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim();}get(t,r=Pr.AsNew){return super.get(t,r)}peek(t){return super.get(t,Pr.None)}set(t,r){return super.set(t,r,Pr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio));}};gs.LRUCache=Y_;});var yO=P(Ed=>{Object.defineProperty(Ed,"__esModule",{value:!0});Ed.Disposable=void 0;var mO;(function(e){function t(r){return {dispose:r}}e.create=t;})(mO||(Ed.Disposable=mO={}));});var ms=P(J_=>{Object.defineProperty(J_,"__esModule",{value:!0});var Z_;function X_(){if(Z_===void 0)throw new Error("No runtime abstraction layer installed");return Z_}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Z_=r;}e.install=t;})(X_||(X_={}));J_.default=X_;});var go=P(po=>{Object.defineProperty(po,"__esModule",{value:!0});po.Emitter=po.Event=void 0;var BZ=ms(),_O;(function(e){let t={dispose(){}};e.None=function(){return t};})(_O||(po.Event=_O={}));var ev=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)});}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===t)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return [];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{r.push(n[s].apply(i[s],t));}catch(o){(0, BZ.default)().console.error(o);}return r}isEmpty(){return !this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0;}},wd=class e{constructor(t){this._options=t;}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new ev),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,r),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this));}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t);}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0);}};po.Emitter=wd;wd._noop=function(){};});var Td=P(mo=>{Object.defineProperty(mo,"__esModule",{value:!0});mo.CancellationTokenSource=mo.CancellationToken=void 0;var LZ=ms(),FZ=ho(),tv=go(),Cd;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:tv.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:tv.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||FZ.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t;})(Cd||(mo.CancellationToken=Cd={}));var MZ=Object.freeze(function(e,t){let r=(0, LZ.default)().timer.setTimeout(e.bind(t),0);return {dispose(){r.dispose();}}}),xd=class{constructor(){this._isCancelled=!1;}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()));}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?MZ:(this._emitter||(this._emitter=new tv.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0);}},rv=class{get token(){return this._token||(this._token=new xd),this._token}cancel(){this._token?this._token.cancel():this._token=Cd.Cancelled;}dispose(){this._token?this._token instanceof xd&&this._token.dispose():this._token=Cd.None;}};mo.CancellationTokenSource=rv;});var vO=P(yo=>{Object.defineProperty(yo,"__esModule",{value:!0});yo.SharedArrayReceiverStrategy=yo.SharedArraySenderStrategy=void 0;var qZ=Td(),ic;(function(e){e.Continue=0,e.Cancelled=1;})(ic||(ic={}));var nv=class{constructor(){this.buffers=new Map;}enableCancellation(t){if(t.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=ic.Continue,this.buffers.set(t.id,r),t.$cancellationData=r;}async sendCancellation(t,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,ic.Cancelled);}cleanup(t){this.buffers.delete(t);}dispose(){this.buffers.clear();}};yo.SharedArraySenderStrategy=nv;var iv=class{constructor(t){this.data=new Int32Array(t,0,1);}get isCancellationRequested(){return Atomics.load(this.data,0)===ic.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},sv=class{constructor(t){this.token=new iv(t);}cancel(){}dispose(){}},av=class{constructor(){this.kind="request";}createCancellationTokenSource(t){let r=t.$cancellationData;return r===void 0?new qZ.CancellationTokenSource:new sv(r)}};yo.SharedArrayReceiverStrategy=av;});var uv=P(Ad=>{Object.defineProperty(Ad,"__esModule",{value:!0});Ad.Semaphore=void 0;var UZ=ms(),ov=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[];}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext();})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0, UZ.default)().timer.setImmediate(()=>this.doRunNext());}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext();},n=>{this._active--,t.reject(n),this.runNext();}):(this._active--,t.resolve(r),this.runNext());}catch(r){this._active--,t.reject(r),this.runNext();}}};Ad.Semaphore=ov;});var SO=P(ys=>{Object.defineProperty(ys,"__esModule",{value:!0});ys.ReadableStreamMessageReader=ys.AbstractMessageReader=ys.MessageReader=void 0;var lv=ms(),_o=ho(),cv=go(),$Z=uv(),bO;(function(e){function t(r){let n=r;return n&&_o.func(n.listen)&&_o.func(n.dispose)&&_o.func(n.onError)&&_o.func(n.onClose)&&_o.func(n.onPartialMessage)}e.is=t;})(bO||(ys.MessageReader=bO={}));var Rd=class{constructor(){this.errorEmitter=new cv.Emitter,this.closeEmitter=new cv.Emitter,this.partialMessageEmitter=new cv.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t));}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t);}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${_o.string(t.message)?t.message:"unknown"}`)}};ys.AbstractMessageReader=Rd;var fv;(function(e){function t(r){let n,s,a=new Map,o,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else {if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,a.set(s.name,s)),r.contentDecoders!==void 0)for(let l of r.contentDecoders)a.set(l.name,l);if(r.contentTypeDecoder!==void 0&&(o=r.contentTypeDecoder,c.set(o.name,o)),r.contentTypeDecoders!==void 0)for(let l of r.contentTypeDecoders)c.set(l.name,l);}return o===void 0&&(o=(0, lv.default)().applicationJson.decoder,c.set(o.name,o)),{charset:n,contentDecoder:s,contentDecoders:a,contentTypeDecoder:o,contentTypeDecoders:c}}e.fromOptions=t;})(fv||(fv={}));var dv=class extends Rd{constructor(t,r){super(),this.readable=t,this.options=fv.fromOptions(r),this.buffer=(0, lv.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new $Z.Semaphore(1);}set partialMessageTimeout(t){this._partialMessageTimeout=t;}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n);});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s;}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i);}).catch(n=>{this.fireError(n);});}}catch(r){this.fireError(r);}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0);}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0, lv.default)().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer());},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout));}};ys.ReadableStreamMessageReader=dv;});var TO=P(_s=>{Object.defineProperty(_s,"__esModule",{value:!0});_s.WriteableStreamMessageWriter=_s.AbstractMessageWriter=_s.MessageWriter=void 0;var EO=ms(),sc=ho(),jZ=uv(),wO=go(),VZ="Content-Length: ",CO=`\r
`,xO;(function(e){function t(r){let n=r;return n&&sc.func(n.dispose)&&sc.func(n.onClose)&&sc.func(n.onError)&&sc.func(n.write)}e.is=t;})(xO||(_s.MessageWriter=xO={}));var Id=class{constructor(){this.errorEmitter=new wO.Emitter,this.closeEmitter=new wO.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n]);}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${sc.string(t.message)?t.message:"unknown"}`)}};_s.AbstractMessageWriter=Id;var hv;(function(e){function t(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0, EO.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0, EO.default)().applicationJson.encoder}}e.fromOptions=t;})(hv||(hv={}));var pv=class extends Id{constructor(t,r){super(),this.writable=t,this.options=hv.fromOptions(r),this.errorCount=0,this.writeSemaphore=new jZ.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose());}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(VZ,n.byteLength.toString(),CO),i.push(CO),this.doWrite(t,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){this.writable.end();}};_s.WriteableStreamMessageWriter=pv;});var AO=P(Pd=>{Object.defineProperty(Pd,"__esModule",{value:!0});Pd.AbstractMessageBuffer=void 0;var HZ=13,WZ=10,KZ=`\r
`,gv=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0;}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength;}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){let l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case HZ:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0;}break;case WZ:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0;}break;default:r=0;}i++;}s+=l.byteLength,n++;}if(r!==4)return;let a=this._read(s+i),o=new Map,c=this.toString(a,"ascii").split(KZ);if(c.length<2)return o;for(let l=0;l<c.length-2;l++){let u=c[l],f=u.indexOf(":");if(f===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let h=u.substr(0,f),p=u.substr(f+1).trim();o.set(t?h.toLowerCase():h,p);}return o}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(s)}if(this._chunks[0].byteLength>t){let s=this._chunks[0],a=this.asNative(s,t);return this._chunks[0]=s.slice(t),this._totalLength-=t,a}let r=this.allocNative(t),n=0,i=0;for(;t>0;){let s=this._chunks[i];if(s.byteLength>t){let a=s.slice(0,t);r.set(a,n),n+=t,this._chunks[i]=s.slice(t),this._totalLength-=t,t-=t;}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,t-=s.byteLength;}return r}};Pd.AbstractMessageBuffer=gv;});var DO=P(Ze=>{Object.defineProperty(Ze,"__esModule",{value:!0});Ze.createMessageConnection=Ze.ConnectionOptions=Ze.MessageStrategy=Ze.CancellationStrategy=Ze.CancellationSenderStrategy=Ze.CancellationReceiverStrategy=Ze.RequestCancellationReceiverStrategy=Ze.IdCancellationReceiverStrategy=Ze.ConnectionStrategy=Ze.ConnectionError=Ze.ConnectionErrors=Ze.LogTraceNotification=Ze.SetTraceNotification=Ze.TraceFormat=Ze.TraceValues=Ze.Trace=Ze.NullLogger=Ze.ProgressType=Ze.ProgressToken=void 0;var RO=ms(),Yt=ho(),je=G_(),IO=Q_(),ac=go(),mv=Td(),cc;(function(e){e.type=new je.NotificationType("$/cancelRequest");})(cc||(cc={}));var yv;(function(e){function t(r){return typeof r=="string"||typeof r=="number"}e.is=t;})(yv||(Ze.ProgressToken=yv={}));var oc;(function(e){e.type=new je.NotificationType("$/progress");})(oc||(oc={}));var _v=class{constructor(){}};Ze.ProgressType=_v;var vv;(function(e){function t(r){return Yt.func(r)}e.is=t;})(vv||(vv={}));Ze.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Et;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose";})(Et||(Ze.Trace=Et={}));var PO;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose";})(PO||(Ze.TraceValues=PO={}));(function(e){function t(n){if(!Yt.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return "off";case e.Messages:return "messages";case e.Compact:return "compact";case e.Verbose:return "verbose";default:return "off"}}e.toString=r;})(Et||(Ze.Trace=Et={}));var mn;(function(e){e.Text="text",e.JSON="json";})(mn||(Ze.TraceFormat=mn={}));(function(e){function t(r){return Yt.string(r)?(r=r.toLowerCase(),r==="json"?e.JSON:e.Text):e.Text}e.fromString=t;})(mn||(Ze.TraceFormat=mn={}));var bv;(function(e){e.type=new je.NotificationType("$/setTrace");})(bv||(Ze.SetTraceNotification=bv={}));var Nd;(function(e){e.type=new je.NotificationType("$/logTrace");})(Nd||(Ze.LogTraceNotification=Nd={}));var uc;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening";})(uc||(Ze.ConnectionErrors=uc={}));var vo=class e extends Error{constructor(t,r){super(r),this.code=t,Object.setPrototypeOf(this,e.prototype);}};Ze.ConnectionError=vo;var Sv;(function(e){function t(r){let n=r;return n&&Yt.func(n.cancelUndispatched)}e.is=t;})(Sv||(Ze.ConnectionStrategy=Sv={}));var Dd;(function(e){function t(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Yt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Yt.func(n.dispose))}e.is=t;})(Dd||(Ze.IdCancellationReceiverStrategy=Dd={}));var Ev;(function(e){function t(r){let n=r;return n&&n.kind==="request"&&Yt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Yt.func(n.dispose))}e.is=t;})(Ev||(Ze.RequestCancellationReceiverStrategy=Ev={}));var kd;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new mv.CancellationTokenSource}});function t(r){return Dd.is(r)||Ev.is(r)}e.is=t;})(kd||(Ze.CancellationReceiverStrategy=kd={}));var Od;(function(e){e.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(cc.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Yt.func(n.sendCancellation)&&Yt.func(n.cleanup)}e.is=t;})(Od||(Ze.CancellationSenderStrategy=Od={}));var Bd;(function(e){e.Message=Object.freeze({receiver:kd.Message,sender:Od.Message});function t(r){let n=r;return n&&kd.is(n.receiver)&&Od.is(n.sender)}e.is=t;})(Bd||(Ze.CancellationStrategy=Bd={}));var Ld;(function(e){function t(r){let n=r;return n&&Yt.func(n.handleMessage)}e.is=t;})(Ld||(Ze.MessageStrategy=Ld={}));var NO;(function(e){function t(r){let n=r;return n&&(Bd.is(n.cancellationStrategy)||Sv.is(n.connectionStrategy)||Ld.is(n.messageStrategy))}e.is=t;})(NO||(Ze.ConnectionOptions=NO={}));var Yn;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed";})(Yn||(Yn={}));function zZ(e,t,r,n){let i=r!==void 0?r:Ze.NullLogger,s=0,a=0,o=0,c="2.0",l,u=new Map,f,h=new Map,p=new Map,m,v=new IO.LinkedMap,E=new Map,w=new Set,y=new Map,b=Et.Off,N=mn.Text,B,V=Yn.New,X=new ac.Emitter,z=new ac.Emitter,G=new ac.Emitter,ee=new ac.Emitter,U=new ac.Emitter,ie=n&&n.cancellationStrategy?n.cancellationStrategy:Bd.Message;function me(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return "req-"+M.toString()}function Pe(M){return M===null?"res-unknown-"+(++o).toString():"res-"+M.toString()}function W(){return "not-"+(++a).toString()}function K(M,ae){je.Message.isRequest(ae)?M.set(me(ae.id),ae):je.Message.isResponse(ae)?M.set(Pe(ae.id),ae):M.set(W(),ae);}function se(M){}function Ae(){return V===Yn.Listening}function Fe(){return V===Yn.Closed}function Ke(){return V===Yn.Disposed}function Ve(){(V===Yn.New||V===Yn.Listening)&&(V=Yn.Closed,z.fire(void 0));}function ot(M){X.fire([M,void 0,void 0]);}function Dt(M){X.fire(M);}e.onClose(Ve),e.onError(ot),t.onClose(Ve),t.onError(Dt);function bt(){m||v.size===0||(m=(0, RO.default)().timer.setImmediate(()=>{m=void 0,Oe();}));}function ft(M){je.Message.isRequest(M)?qt(M):je.Message.isNotification(M)?$e(M):je.Message.isResponse(M)?ye(M):le(M);}function Oe(){if(v.size===0)return;let M=v.shift();try{let ae=n?.messageStrategy;Ld.is(ae)?ae.handleMessage(M,ft):ft(M);}finally{bt();}}let Rt=M=>{try{if(je.Message.isNotification(M)&&M.method===cc.type.method){let ae=M.params.id,Se=me(ae),Ne=v.get(Se);if(je.Message.isRequest(Ne)){let gt=n?.connectionStrategy,It=gt&&gt.cancelUndispatched?gt.cancelUndispatched(Ne,se):void 0;if(It&&(It.error!==void 0||It.result!==void 0)){v.delete(Se),y.delete(ae),It.id=Ne.id,ze(It,M.method,Date.now()),t.write(It).catch(()=>i.error("Sending response for canceled message failed."));return}}let St=y.get(ae);if(St!==void 0){St.cancel(),kr(M);return}else w.add(ae);}K(v,M);}finally{bt();}};function qt(M){if(Ke())return;function ae(tt,xt,dt){let Vt={jsonrpc:c,id:M.id};tt instanceof je.ResponseError?Vt.error=tt.toJson():Vt.result=tt===void 0?null:tt,ze(Vt,xt,dt),t.write(Vt).catch(()=>i.error("Sending response failed."));}function Se(tt,xt,dt){let Vt={jsonrpc:c,id:M.id,error:tt.toJson()};ze(Vt,xt,dt),t.write(Vt).catch(()=>i.error("Sending response failed."));}function Ne(tt,xt,dt){tt===void 0&&(tt=null);let Vt={jsonrpc:c,id:M.id,result:tt};ze(Vt,xt,dt),t.write(Vt).catch(()=>i.error("Sending response failed."));}_n(M);let St=u.get(M.method),gt,It;St&&(gt=St.type,It=St.handler);let Ot=Date.now();if(It||l){let tt=M.id??String(Date.now()),xt=Dd.is(ie.receiver)?ie.receiver.createCancellationTokenSource(tt):ie.receiver.createCancellationTokenSource(M);M.id!==null&&w.has(M.id)&&xt.cancel(),M.id!==null&&y.set(tt,xt);try{let dt;if(It)if(M.params===void 0){if(gt!==void 0&&gt.numberOfParams!==0){Se(new je.ResponseError(je.ErrorCodes.InvalidParams,`Request ${M.method} defines ${gt.numberOfParams} params but received none.`),M.method,Ot);return}dt=It(xt.token);}else if(Array.isArray(M.params)){if(gt!==void 0&&gt.parameterStructures===je.ParameterStructures.byName){Se(new je.ResponseError(je.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,Ot);return}dt=It(...M.params,xt.token);}else {if(gt!==void 0&&gt.parameterStructures===je.ParameterStructures.byPosition){Se(new je.ResponseError(je.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,Ot);return}dt=It(M.params,xt.token);}else l&&(dt=l(M.method,M.params,xt.token));let Vt=dt;dt?Vt.then?Vt.then(Jt=>{y.delete(tt),ae(Jt,M.method,Ot);},Jt=>{y.delete(tt),Jt instanceof je.ResponseError?Se(Jt,M.method,Ot):Jt&&Yt.string(Jt.message)?Se(new je.ResponseError(je.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${Jt.message}`),M.method,Ot):Se(new je.ResponseError(je.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Ot);}):(y.delete(tt),ae(dt,M.method,Ot)):(y.delete(tt),Ne(dt,M.method,Ot));}catch(dt){y.delete(tt),dt instanceof je.ResponseError?ae(dt,M.method,Ot):dt&&Yt.string(dt.message)?Se(new je.ResponseError(je.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${dt.message}`),M.method,Ot):Se(new je.ResponseError(je.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,Ot);}}else Se(new je.ResponseError(je.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,Ot);}function ye(M){if(!Ke())if(M.id===null)M.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else {let ae=M.id,Se=E.get(ae);if(As(M,Se),Se!==void 0){E.delete(ae);try{if(M.error){let Ne=M.error;Se.reject(new je.ResponseError(Ne.code,Ne.message,Ne.data));}else if(M.result!==void 0)Se.resolve(M.result);else throw new Error("Should never happen.")}catch(Ne){Ne.message?i.error(`Response handler '${Se.method}' failed with message: ${Ne.message}`):i.error(`Response handler '${Se.method}' failed unexpectedly.`);}}}}function $e(M){if(Ke())return;let ae,Se;if(M.method===cc.type.method){let Ne=M.params.id;w.delete(Ne),kr(M);return}else {let Ne=h.get(M.method);Ne&&(Se=Ne.handler,ae=Ne.type);}if(Se||f)try{if(kr(M),Se)if(M.params===void 0)ae!==void 0&&ae.numberOfParams!==0&&ae.parameterStructures!==je.ParameterStructures.byName&&i.error(`Notification ${M.method} defines ${ae.numberOfParams} params but received none.`),Se();else if(Array.isArray(M.params)){let Ne=M.params;M.method===oc.type.method&&Ne.length===2&&yv.is(Ne[0])?Se({token:Ne[0],value:Ne[1]}):(ae!==void 0&&(ae.parameterStructures===je.ParameterStructures.byName&&i.error(`Notification ${M.method} defines parameters by name but received parameters by position`),ae.numberOfParams!==M.params.length&&i.error(`Notification ${M.method} defines ${ae.numberOfParams} params but received ${Ne.length} arguments`)),Se(...Ne));}else ae!==void 0&&ae.parameterStructures===je.ParameterStructures.byPosition&&i.error(`Notification ${M.method} defines parameters by position but received parameters by name`),Se(M.params);else f&&f(M.method,M.params);}catch(Ne){Ne.message?i.error(`Notification handler '${M.method}' failed with message: ${Ne.message}`):i.error(`Notification handler '${M.method}' failed unexpectedly.`);}else G.fire(M);}function le(M){if(!M){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let ae=M;if(Yt.string(ae.id)||Yt.number(ae.id)){let Se=ae.id,Ne=E.get(Se);Ne&&Ne.reject(new Error("The received response has neither a result nor an error property."));}}function Ie(M){if(M!=null)switch(b){case Et.Verbose:return JSON.stringify(M,null,4);case Et.Compact:return JSON.stringify(M);default:return}}function He(M){if(!(b===Et.Off||!B))if(N===mn.Text){let ae;(b===Et.Verbose||b===Et.Compact)&&M.params&&(ae=`Params: ${Ie(M.params)}

`),B.log(`Sending request '${M.method} - (${M.id})'.`,ae);}else Or("send-request",M);}function et(M){if(!(b===Et.Off||!B))if(N===mn.Text){let ae;(b===Et.Verbose||b===Et.Compact)&&(M.params?ae=`Params: ${Ie(M.params)}

`:ae=`No parameters provided.

`),B.log(`Sending notification '${M.method}'.`,ae);}else Or("send-notification",M);}function ze(M,ae,Se){if(!(b===Et.Off||!B))if(N===mn.Text){let Ne;(b===Et.Verbose||b===Et.Compact)&&(M.error&&M.error.data?Ne=`Error data: ${Ie(M.error.data)}

`:M.result?Ne=`Result: ${Ie(M.result)}

`:M.error===void 0&&(Ne=`No result returned.

`)),B.log(`Sending response '${ae} - (${M.id})'. Processing request took ${Date.now()-Se}ms`,Ne);}else Or("send-response",M);}function _n(M){if(!(b===Et.Off||!B))if(N===mn.Text){let ae;(b===Et.Verbose||b===Et.Compact)&&M.params&&(ae=`Params: ${Ie(M.params)}

`),B.log(`Received request '${M.method} - (${M.id})'.`,ae);}else Or("receive-request",M);}function kr(M){if(!(b===Et.Off||!B||M.method===Nd.type.method))if(N===mn.Text){let ae;(b===Et.Verbose||b===Et.Compact)&&(M.params?ae=`Params: ${Ie(M.params)}

`:ae=`No parameters provided.

`),B.log(`Received notification '${M.method}'.`,ae);}else Or("receive-notification",M);}function As(M,ae){if(!(b===Et.Off||!B))if(N===mn.Text){let Se;if((b===Et.Verbose||b===Et.Compact)&&(M.error&&M.error.data?Se=`Error data: ${Ie(M.error.data)}

`:M.result?Se=`Result: ${Ie(M.result)}

`:M.error===void 0&&(Se=`No result returned.

`)),ae){let Ne=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";B.log(`Received response '${ae.method} - (${M.id})' in ${Date.now()-ae.timerStart}ms.${Ne}`,Se);}else B.log(`Received response ${M.id} without active response promise.`,Se);}else Or("receive-response",M);}function Or(M,ae){if(!B||b===Et.Off)return;let Se={isLSPMessage:!0,type:M,message:ae,timestamp:Date.now()};B.log(Se);}function Kr(){if(Fe())throw new vo(uc.Closed,"Connection is closed.");if(Ke())throw new vo(uc.Disposed,"Connection is disposed.")}function Rs(){if(Ae())throw new vo(uc.AlreadyListening,"Connection is already listening")}function ma(){if(!Ae())throw new Error("Call listen() first.")}function an(M){return M===void 0?null:M}function Is(M){if(M!==null)return M}function Ps(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function bi(M,ae){switch(M){case je.ParameterStructures.auto:return Ps(ae)?Is(ae):[an(ae)];case je.ParameterStructures.byName:if(!Ps(ae))throw new Error("Received parameters by name but param is not an object literal.");return Is(ae);case je.ParameterStructures.byPosition:return [an(ae)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function Ns(M,ae){let Se,Ne=M.numberOfParams;switch(Ne){case 0:Se=void 0;break;case 1:Se=bi(M.parameterStructures,ae[0]);break;default:Se=[];for(let St=0;St<ae.length&&St<Ne;St++)Se.push(an(ae[St]));if(ae.length<Ne)for(let St=ae.length;St<Ne;St++)Se.push(null);break}return Se}let Fn={sendNotification:(M,...ae)=>{Kr();let Se,Ne;if(Yt.string(M)){Se=M;let gt=ae[0],It=0,Ot=je.ParameterStructures.auto;je.ParameterStructures.is(gt)&&(It=1,Ot=gt);let tt=ae.length,xt=tt-It;switch(xt){case 0:Ne=void 0;break;case 1:Ne=bi(Ot,ae[It]);break;default:if(Ot===je.ParameterStructures.byName)throw new Error(`Received ${xt} parameters for 'by Name' notification parameter structure.`);Ne=ae.slice(It,tt).map(dt=>an(dt));break}}else {let gt=ae;Se=M.method,Ne=Ns(M,gt);}let St={jsonrpc:c,method:Se,params:Ne};return et(St),t.write(St).catch(gt=>{throw i.error("Sending notification failed."),gt})},onNotification:(M,ae)=>{Kr();let Se;return Yt.func(M)?f=M:ae&&(Yt.string(M)?(Se=M,h.set(M,{type:void 0,handler:ae})):(Se=M.method,h.set(M.method,{type:M,handler:ae}))),{dispose:()=>{Se!==void 0?h.delete(Se):f=void 0;}}},onProgress:(M,ae,Se)=>{if(p.has(ae))throw new Error(`Progress handler for token ${ae} already registered`);return p.set(ae,Se),{dispose:()=>{p.delete(ae);}}},sendProgress:(M,ae,Se)=>Fn.sendNotification(oc.type,{token:ae,value:Se}),onUnhandledProgress:ee.event,sendRequest:(M,...ae)=>{Kr(),ma();let Se,Ne,St;if(Yt.string(M)){Se=M;let tt=ae[0],xt=ae[ae.length-1],dt=0,Vt=je.ParameterStructures.auto;je.ParameterStructures.is(tt)&&(dt=1,Vt=tt);let Jt=ae.length;mv.CancellationToken.is(xt)&&(Jt=Jt-1,St=xt);let Br=Jt-dt;switch(Br){case 0:Ne=void 0;break;case 1:Ne=bi(Vt,ae[dt]);break;default:if(Vt===je.ParameterStructures.byName)throw new Error(`Received ${Br} parameters for 'by Name' request parameter structure.`);Ne=ae.slice(dt,Jt).map(ya=>an(ya));break}}else {let tt=ae;Se=M.method,Ne=Ns(M,tt);let xt=M.numberOfParams;St=mv.CancellationToken.is(tt[xt])?tt[xt]:void 0;}let gt=s++,It;St&&(It=St.onCancellationRequested(()=>{let tt=ie.sender.sendCancellation(Fn,gt);return tt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${gt}`),Promise.resolve()):tt.catch(()=>{i.log(`Sending cancellation messages for id ${gt} failed`);})}));let Ot={jsonrpc:c,id:gt,method:Se,params:Ne};return He(Ot),typeof ie.sender.enableCancellation=="function"&&ie.sender.enableCancellation(Ot),new Promise(async(tt,xt)=>{let dt=Br=>{tt(Br),ie.sender.cleanup(gt),It?.dispose();},Vt=Br=>{xt(Br),ie.sender.cleanup(gt),It?.dispose();},Jt={method:Se,timerStart:Date.now(),resolve:dt,reject:Vt};try{await t.write(Ot),E.set(gt,Jt);}catch(Br){throw i.error("Sending request failed."),Jt.reject(new je.ResponseError(je.ErrorCodes.MessageWriteError,Br.message?Br.message:"Unknown reason")),Br}})},onRequest:(M,ae)=>{Kr();let Se=null;return vv.is(M)?(Se=void 0,l=M):Yt.string(M)?(Se=null,ae!==void 0&&(Se=M,u.set(M,{handler:ae,type:void 0}))):ae!==void 0&&(Se=M.method,u.set(M.method,{type:M,handler:ae})),{dispose:()=>{Se!==null&&(Se!==void 0?u.delete(Se):l=void 0);}}},hasPendingResponse:()=>E.size>0,trace:async(M,ae,Se)=>{let Ne=!1,St=mn.Text;Se!==void 0&&(Yt.boolean(Se)?Ne=Se:(Ne=Se.sendNotification||!1,St=Se.traceFormat||mn.Text)),b=M,N=St,b===Et.Off?B=void 0:B=ae,Ne&&!Fe()&&!Ke()&&await Fn.sendNotification(bv.type,{value:Et.toString(M)});},onError:X.event,onClose:z.event,onUnhandledNotification:G.event,onDispose:U.event,end:()=>{t.end();},dispose:()=>{if(Ke())return;V=Yn.Disposed,U.fire(void 0);let M=new je.ResponseError(je.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let ae of E.values())ae.reject(M);E=new Map,y=new Map,w=new Set,v=new IO.LinkedMap,Yt.func(t.dispose)&&t.dispose(),Yt.func(e.dispose)&&e.dispose();},listen:()=>{Kr(),Rs(),V=Yn.Listening,e.listen(Rt);},inspect:()=>{(0, RO.default)().console.log("inspect");}};return Fn.onNotification(Nd.type,M=>{if(b===Et.Off||!B)return;let ae=b===Et.Verbose||b===Et.Compact;B.log(M.message,ae?M.verbose:void 0);}),Fn.onNotification(oc.type,M=>{let ae=p.get(M.token);ae?ae(M.value):ee.fire(M);}),Fn}Ze.createMessageConnection=zZ;});var Fd=P(re=>{Object.defineProperty(re,"__esModule",{value:!0});re.ProgressType=re.ProgressToken=re.createMessageConnection=re.NullLogger=re.ConnectionOptions=re.ConnectionStrategy=re.AbstractMessageBuffer=re.WriteableStreamMessageWriter=re.AbstractMessageWriter=re.MessageWriter=re.ReadableStreamMessageReader=re.AbstractMessageReader=re.MessageReader=re.SharedArrayReceiverStrategy=re.SharedArraySenderStrategy=re.CancellationToken=re.CancellationTokenSource=re.Emitter=re.Event=re.Disposable=re.LRUCache=re.Touch=re.LinkedMap=re.ParameterStructures=re.NotificationType9=re.NotificationType8=re.NotificationType7=re.NotificationType6=re.NotificationType5=re.NotificationType4=re.NotificationType3=re.NotificationType2=re.NotificationType1=re.NotificationType0=re.NotificationType=re.ErrorCodes=re.ResponseError=re.RequestType9=re.RequestType8=re.RequestType7=re.RequestType6=re.RequestType5=re.RequestType4=re.RequestType3=re.RequestType2=re.RequestType1=re.RequestType0=re.RequestType=re.Message=re.RAL=void 0;re.MessageStrategy=re.CancellationStrategy=re.CancellationSenderStrategy=re.CancellationReceiverStrategy=re.ConnectionError=re.ConnectionErrors=re.LogTraceNotification=re.SetTraceNotification=re.TraceFormat=re.TraceValues=re.Trace=void 0;var Mt=G_();Object.defineProperty(re,"Message",{enumerable:!0,get:function(){return Mt.Message}});Object.defineProperty(re,"RequestType",{enumerable:!0,get:function(){return Mt.RequestType}});Object.defineProperty(re,"RequestType0",{enumerable:!0,get:function(){return Mt.RequestType0}});Object.defineProperty(re,"RequestType1",{enumerable:!0,get:function(){return Mt.RequestType1}});Object.defineProperty(re,"RequestType2",{enumerable:!0,get:function(){return Mt.RequestType2}});Object.defineProperty(re,"RequestType3",{enumerable:!0,get:function(){return Mt.RequestType3}});Object.defineProperty(re,"RequestType4",{enumerable:!0,get:function(){return Mt.RequestType4}});Object.defineProperty(re,"RequestType5",{enumerable:!0,get:function(){return Mt.RequestType5}});Object.defineProperty(re,"RequestType6",{enumerable:!0,get:function(){return Mt.RequestType6}});Object.defineProperty(re,"RequestType7",{enumerable:!0,get:function(){return Mt.RequestType7}});Object.defineProperty(re,"RequestType8",{enumerable:!0,get:function(){return Mt.RequestType8}});Object.defineProperty(re,"RequestType9",{enumerable:!0,get:function(){return Mt.RequestType9}});Object.defineProperty(re,"ResponseError",{enumerable:!0,get:function(){return Mt.ResponseError}});Object.defineProperty(re,"ErrorCodes",{enumerable:!0,get:function(){return Mt.ErrorCodes}});Object.defineProperty(re,"NotificationType",{enumerable:!0,get:function(){return Mt.NotificationType}});Object.defineProperty(re,"NotificationType0",{enumerable:!0,get:function(){return Mt.NotificationType0}});Object.defineProperty(re,"NotificationType1",{enumerable:!0,get:function(){return Mt.NotificationType1}});Object.defineProperty(re,"NotificationType2",{enumerable:!0,get:function(){return Mt.NotificationType2}});Object.defineProperty(re,"NotificationType3",{enumerable:!0,get:function(){return Mt.NotificationType3}});Object.defineProperty(re,"NotificationType4",{enumerable:!0,get:function(){return Mt.NotificationType4}});Object.defineProperty(re,"NotificationType5",{enumerable:!0,get:function(){return Mt.NotificationType5}});Object.defineProperty(re,"NotificationType6",{enumerable:!0,get:function(){return Mt.NotificationType6}});Object.defineProperty(re,"NotificationType7",{enumerable:!0,get:function(){return Mt.NotificationType7}});Object.defineProperty(re,"NotificationType8",{enumerable:!0,get:function(){return Mt.NotificationType8}});Object.defineProperty(re,"NotificationType9",{enumerable:!0,get:function(){return Mt.NotificationType9}});Object.defineProperty(re,"ParameterStructures",{enumerable:!0,get:function(){return Mt.ParameterStructures}});var wv=Q_();Object.defineProperty(re,"LinkedMap",{enumerable:!0,get:function(){return wv.LinkedMap}});Object.defineProperty(re,"LRUCache",{enumerable:!0,get:function(){return wv.LRUCache}});Object.defineProperty(re,"Touch",{enumerable:!0,get:function(){return wv.Touch}});var GZ=yO();Object.defineProperty(re,"Disposable",{enumerable:!0,get:function(){return GZ.Disposable}});var kO=go();Object.defineProperty(re,"Event",{enumerable:!0,get:function(){return kO.Event}});Object.defineProperty(re,"Emitter",{enumerable:!0,get:function(){return kO.Emitter}});var OO=Td();Object.defineProperty(re,"CancellationTokenSource",{enumerable:!0,get:function(){return OO.CancellationTokenSource}});Object.defineProperty(re,"CancellationToken",{enumerable:!0,get:function(){return OO.CancellationToken}});var BO=vO();Object.defineProperty(re,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return BO.SharedArraySenderStrategy}});Object.defineProperty(re,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return BO.SharedArrayReceiverStrategy}});var Cv=SO();Object.defineProperty(re,"MessageReader",{enumerable:!0,get:function(){return Cv.MessageReader}});Object.defineProperty(re,"AbstractMessageReader",{enumerable:!0,get:function(){return Cv.AbstractMessageReader}});Object.defineProperty(re,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Cv.ReadableStreamMessageReader}});var xv=TO();Object.defineProperty(re,"MessageWriter",{enumerable:!0,get:function(){return xv.MessageWriter}});Object.defineProperty(re,"AbstractMessageWriter",{enumerable:!0,get:function(){return xv.AbstractMessageWriter}});Object.defineProperty(re,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return xv.WriteableStreamMessageWriter}});var YZ=AO();Object.defineProperty(re,"AbstractMessageBuffer",{enumerable:!0,get:function(){return YZ.AbstractMessageBuffer}});var Tr=DO();Object.defineProperty(re,"ConnectionStrategy",{enumerable:!0,get:function(){return Tr.ConnectionStrategy}});Object.defineProperty(re,"ConnectionOptions",{enumerable:!0,get:function(){return Tr.ConnectionOptions}});Object.defineProperty(re,"NullLogger",{enumerable:!0,get:function(){return Tr.NullLogger}});Object.defineProperty(re,"createMessageConnection",{enumerable:!0,get:function(){return Tr.createMessageConnection}});Object.defineProperty(re,"ProgressToken",{enumerable:!0,get:function(){return Tr.ProgressToken}});Object.defineProperty(re,"ProgressType",{enumerable:!0,get:function(){return Tr.ProgressType}});Object.defineProperty(re,"Trace",{enumerable:!0,get:function(){return Tr.Trace}});Object.defineProperty(re,"TraceValues",{enumerable:!0,get:function(){return Tr.TraceValues}});Object.defineProperty(re,"TraceFormat",{enumerable:!0,get:function(){return Tr.TraceFormat}});Object.defineProperty(re,"SetTraceNotification",{enumerable:!0,get:function(){return Tr.SetTraceNotification}});Object.defineProperty(re,"LogTraceNotification",{enumerable:!0,get:function(){return Tr.LogTraceNotification}});Object.defineProperty(re,"ConnectionErrors",{enumerable:!0,get:function(){return Tr.ConnectionErrors}});Object.defineProperty(re,"ConnectionError",{enumerable:!0,get:function(){return Tr.ConnectionError}});Object.defineProperty(re,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Tr.CancellationReceiverStrategy}});Object.defineProperty(re,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Tr.CancellationSenderStrategy}});Object.defineProperty(re,"CancellationStrategy",{enumerable:!0,get:function(){return Tr.CancellationStrategy}});Object.defineProperty(re,"MessageStrategy",{enumerable:!0,get:function(){return Tr.MessageStrategy}});var QZ=ms();re.RAL=QZ.default;});var MO=P(Iv=>{Object.defineProperty(Iv,"__esModule",{value:!0});var LO=he("util"),Li=Fd(),Md=class e extends Li.AbstractMessageBuffer{constructor(t="utf-8"){super(t);}emptyBuffer(){return e.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new LO.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};Md.emptyBuffer=Buffer.allocUnsafe(0);var Tv=class{constructor(t){this.stream=t;}onClose(t){return this.stream.on("close",t),Li.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Li.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Li.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Li.Disposable.create(()=>this.stream.off("data",t))}},Av=class{constructor(t){this.stream=t;}onClose(t){return this.stream.on("close",t),Li.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Li.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Li.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,i)=>{let s=a=>{a==null?n():i(a);};typeof t=="string"?this.stream.write(t,r,s):this.stream.write(t,s);})}end(){this.stream.end();}},FO=Object.freeze({messageBuffer:Object.freeze({create:e=>new Md(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new LO.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new Tv(e),asWritableStream:e=>new Av(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){let n=setTimeout(e,t,...r);return {dispose:()=>clearTimeout(n)}},setImmediate(e,...t){let r=setImmediate(e,...t);return {dispose:()=>clearImmediate(r)}},setInterval(e,t,...r){let n=setInterval(e,t,...r);return {dispose:()=>clearInterval(n)}}})});function Rv(){return FO}(function(e){function t(){Li.RAL.install(FO);}e.install=t;})(Rv||(Rv={}));Iv.default=Rv;});var fa=P(lt=>{var ZZ=lt&&lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),XZ=lt&&lt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ZZ(t,e,r);};Object.defineProperty(lt,"__esModule",{value:!0});lt.createMessageConnection=lt.createServerSocketTransport=lt.createClientSocketTransport=lt.createServerPipeTransport=lt.createClientPipeTransport=lt.generateRandomPipeName=lt.StreamMessageWriter=lt.StreamMessageReader=lt.SocketMessageWriter=lt.SocketMessageReader=lt.PortMessageWriter=lt.PortMessageReader=lt.IPCMessageWriter=lt.IPCMessageReader=void 0;var bo=MO();bo.default.install();var qO=he("path"),JZ=he("os"),eX=he("crypto"),$d=he("net"),yn=Fd();XZ(Fd(),lt);var Pv=class extends yn.AbstractMessageReader{constructor(t){super(),this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose());}listen(t){return this.process.on("message",t),yn.Disposable.create(()=>this.process.off("message",t))}};lt.IPCMessageReader=Pv;var Nv=class extends yn.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose);}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0;}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){}};lt.IPCMessageWriter=Nv;var Dv=class extends yn.AbstractMessageReader{constructor(t){super(),this.onData=new yn.Emitter,t.on("close",()=>this.fireClose),t.on("error",r=>this.fireError(r)),t.on("message",r=>{this.onData.fire(r);});}listen(t){return this.onData.event(t)}};lt.PortMessageReader=Dv;var kv=class extends yn.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",r=>this.fireError(r));}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){}};lt.PortMessageWriter=kv;var ca=class extends yn.ReadableStreamMessageReader{constructor(t,r="utf-8"){super((0, bo.default)().stream.asReadableStream(t),r);}};lt.SocketMessageReader=ca;var la=class extends yn.WriteableStreamMessageWriter{constructor(t,r){super((0, bo.default)().stream.asWritableStream(t),r),this.socket=t;}dispose(){super.dispose(),this.socket.destroy();}};lt.SocketMessageWriter=la;var qd=class extends yn.ReadableStreamMessageReader{constructor(t,r){super((0, bo.default)().stream.asReadableStream(t),r);}};lt.StreamMessageReader=qd;var Ud=class extends yn.WriteableStreamMessageWriter{constructor(t,r){super((0, bo.default)().stream.asWritableStream(t),r);}};lt.StreamMessageWriter=Ud;var UO=process.env.XDG_RUNTIME_DIR,tX=new Map([["linux",107],["darwin",103]]);function rX(){let e=(0, eX.randomBytes)(21).toString("hex");if(process.platform==="win32")return `\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;UO?t=qO.join(UO,`vscode-ipc-${e}.sock`):t=qO.join(JZ.tmpdir(),`vscode-${e}.sock`);let r=tX.get(process.platform);return r!==void 0&&t.length>r&&(0, bo.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}lt.generateRandomPipeName=rX;function nX(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i;});return new Promise((i,s)=>{let a=(0, $d.createServer)(o=>{a.close(),r([new ca(o,t),new la(o,t)]);});a.on("error",s),a.listen(e,()=>{a.removeListener("error",s),i({onConnected:()=>n});});})}lt.createClientPipeTransport=nX;function iX(e,t="utf-8"){let r=(0, $d.createConnection)(e);return [new ca(r,t),new la(r,t)]}lt.createServerPipeTransport=iX;function sX(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i;});return new Promise((i,s)=>{let a=(0, $d.createServer)(o=>{a.close(),r([new ca(o,t),new la(o,t)]);});a.on("error",s),a.listen(e,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>n});});})}lt.createClientSocketTransport=sX;function aX(e,t="utf-8"){let r=(0, $d.createConnection)(e,"127.0.0.1");return [new ca(r,t),new la(r,t)]}lt.createServerSocketTransport=aX;function oX(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function uX(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function cX(e,t,r,n){r||(r=yn.NullLogger);let i=oX(e)?new qd(e):e,s=uX(t)?new Ud(t):t;return yn.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, yn.createMessageConnection)(i,s,r,n)}lt.createMessageConnection=cX;});var Ov=P((sue,$O)=>{$O.exports=fa();});var Vd=P((jO,jd)=>{(function(e){if(typeof jd=="object"&&typeof jd.exports=="object"){var t=e(he,jO);t!==void 0&&(jd.exports=t);}else typeof define=="function"&&define.amd&&define(["require","exports"],e);})(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var r;(function(A){function q($){return typeof $=="string"}A.is=q;})(r||(t.DocumentUri=r={}));var n;(function(A){function q($){return typeof $=="string"}A.is=q;})(n||(t.URI=n={}));var i;(function(A){A.MIN_VALUE=-2147483648,A.MAX_VALUE=2147483647;function q($){return typeof $=="number"&&A.MIN_VALUE<=$&&$<=A.MAX_VALUE}A.is=q;})(i||(t.integer=i={}));var s;(function(A){A.MIN_VALUE=0,A.MAX_VALUE=2147483647;function q($){return typeof $=="number"&&A.MIN_VALUE<=$&&$<=A.MAX_VALUE}A.is=q;})(s||(t.uinteger=s={}));var a;(function(A){function q(D,S){return D===Number.MAX_VALUE&&(D=s.MAX_VALUE),S===Number.MAX_VALUE&&(S=s.MAX_VALUE),{line:D,character:S}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&Z.uinteger(S.line)&&Z.uinteger(S.character)}A.is=$;})(a||(t.Position=a={}));var o;(function(A){function q(D,S,Y,oe){if(Z.uinteger(D)&&Z.uinteger(S)&&Z.uinteger(Y)&&Z.uinteger(oe))return {start:a.create(D,S),end:a.create(Y,oe)};if(a.is(D)&&a.is(S))return {start:D,end:S};throw new Error("Range#create called with invalid arguments[".concat(D,", ").concat(S,", ").concat(Y,", ").concat(oe,"]"))}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&a.is(S.start)&&a.is(S.end)}A.is=$;})(o||(t.Range=o={}));var c;(function(A){function q(D,S){return {uri:D,range:S}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&o.is(S.range)&&(Z.string(S.uri)||Z.undefined(S.uri))}A.is=$;})(c||(t.Location=c={}));var l;(function(A){function q(D,S,Y,oe){return {targetUri:D,targetRange:S,targetSelectionRange:Y,originSelectionRange:oe}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&o.is(S.targetRange)&&Z.string(S.targetUri)&&o.is(S.targetSelectionRange)&&(o.is(S.originSelectionRange)||Z.undefined(S.originSelectionRange))}A.is=$;})(l||(t.LocationLink=l={}));var u;(function(A){function q(D,S,Y,oe){return {red:D,green:S,blue:Y,alpha:oe}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&Z.numberRange(S.red,0,1)&&Z.numberRange(S.green,0,1)&&Z.numberRange(S.blue,0,1)&&Z.numberRange(S.alpha,0,1)}A.is=$;})(u||(t.Color=u={}));var f;(function(A){function q(D,S){return {range:D,color:S}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&o.is(S.range)&&u.is(S.color)}A.is=$;})(f||(t.ColorInformation=f={}));var h;(function(A){function q(D,S,Y){return {label:D,textEdit:S,additionalTextEdits:Y}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&Z.string(S.label)&&(Z.undefined(S.textEdit)||B.is(S))&&(Z.undefined(S.additionalTextEdits)||Z.typedArray(S.additionalTextEdits,B.is))}A.is=$;})(h||(t.ColorPresentation=h={}));var p;(function(A){A.Comment="comment",A.Imports="imports",A.Region="region";})(p||(t.FoldingRangeKind=p={}));var m;(function(A){function q(D,S,Y,oe,Ge,Ht){var Pt={startLine:D,endLine:S};return Z.defined(Y)&&(Pt.startCharacter=Y),Z.defined(oe)&&(Pt.endCharacter=oe),Z.defined(Ge)&&(Pt.kind=Ge),Z.defined(Ht)&&(Pt.collapsedText=Ht),Pt}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&Z.uinteger(S.startLine)&&Z.uinteger(S.startLine)&&(Z.undefined(S.startCharacter)||Z.uinteger(S.startCharacter))&&(Z.undefined(S.endCharacter)||Z.uinteger(S.endCharacter))&&(Z.undefined(S.kind)||Z.string(S.kind))}A.is=$;})(m||(t.FoldingRange=m={}));var v;(function(A){function q(D,S){return {location:D,message:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&c.is(S.location)&&Z.string(S.message)}A.is=$;})(v||(t.DiagnosticRelatedInformation=v={}));var E;(function(A){A.Error=1,A.Warning=2,A.Information=3,A.Hint=4;})(E||(t.DiagnosticSeverity=E={}));var w;(function(A){A.Unnecessary=1,A.Deprecated=2;})(w||(t.DiagnosticTag=w={}));var y;(function(A){function q($){var D=$;return Z.objectLiteral(D)&&Z.string(D.href)}A.is=q;})(y||(t.CodeDescription=y={}));var b;(function(A){function q(D,S,Y,oe,Ge,Ht){var Pt={range:D,message:S};return Z.defined(Y)&&(Pt.severity=Y),Z.defined(oe)&&(Pt.code=oe),Z.defined(Ge)&&(Pt.source=Ge),Z.defined(Ht)&&(Pt.relatedInformation=Ht),Pt}A.create=q;function $(D){var S,Y=D;return Z.defined(Y)&&o.is(Y.range)&&Z.string(Y.message)&&(Z.number(Y.severity)||Z.undefined(Y.severity))&&(Z.integer(Y.code)||Z.string(Y.code)||Z.undefined(Y.code))&&(Z.undefined(Y.codeDescription)||Z.string((S=Y.codeDescription)===null||S===void 0?void 0:S.href))&&(Z.string(Y.source)||Z.undefined(Y.source))&&(Z.undefined(Y.relatedInformation)||Z.typedArray(Y.relatedInformation,v.is))}A.is=$;})(b||(t.Diagnostic=b={}));var N;(function(A){function q(D,S){for(var Y=[],oe=2;oe<arguments.length;oe++)Y[oe-2]=arguments[oe];var Ge={title:D,command:S};return Z.defined(Y)&&Y.length>0&&(Ge.arguments=Y),Ge}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.string(S.title)&&Z.string(S.command)}A.is=$;})(N||(t.Command=N={}));var B;(function(A){function q(Y,oe){return {range:Y,newText:oe}}A.replace=q;function $(Y,oe){return {range:{start:Y,end:Y},newText:oe}}A.insert=$;function D(Y){return {range:Y,newText:""}}A.del=D;function S(Y){var oe=Y;return Z.objectLiteral(oe)&&Z.string(oe.newText)&&o.is(oe.range)}A.is=S;})(B||(t.TextEdit=B={}));var V;(function(A){function q(D,S,Y){var oe={label:D};return S!==void 0&&(oe.needsConfirmation=S),Y!==void 0&&(oe.description=Y),oe}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&Z.string(S.label)&&(Z.boolean(S.needsConfirmation)||S.needsConfirmation===void 0)&&(Z.string(S.description)||S.description===void 0)}A.is=$;})(V||(t.ChangeAnnotation=V={}));var X;(function(A){function q($){var D=$;return Z.string(D)}A.is=q;})(X||(t.ChangeAnnotationIdentifier=X={}));var z;(function(A){function q(Y,oe,Ge){return {range:Y,newText:oe,annotationId:Ge}}A.replace=q;function $(Y,oe,Ge){return {range:{start:Y,end:Y},newText:oe,annotationId:Ge}}A.insert=$;function D(Y,oe){return {range:Y,newText:"",annotationId:oe}}A.del=D;function S(Y){var oe=Y;return B.is(oe)&&(V.is(oe.annotationId)||X.is(oe.annotationId))}A.is=S;})(z||(t.AnnotatedTextEdit=z={}));var G;(function(A){function q(D,S){return {textDocument:D,edits:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Fe.is(S.textDocument)&&Array.isArray(S.edits)}A.is=$;})(G||(t.TextDocumentEdit=G={}));var ee;(function(A){function q(D,S,Y){var oe={kind:"create",uri:D};return S!==void 0&&(S.overwrite!==void 0||S.ignoreIfExists!==void 0)&&(oe.options=S),Y!==void 0&&(oe.annotationId=Y),oe}A.create=q;function $(D){var S=D;return S&&S.kind==="create"&&Z.string(S.uri)&&(S.options===void 0||(S.options.overwrite===void 0||Z.boolean(S.options.overwrite))&&(S.options.ignoreIfExists===void 0||Z.boolean(S.options.ignoreIfExists)))&&(S.annotationId===void 0||X.is(S.annotationId))}A.is=$;})(ee||(t.CreateFile=ee={}));var U;(function(A){function q(D,S,Y,oe){var Ge={kind:"rename",oldUri:D,newUri:S};return Y!==void 0&&(Y.overwrite!==void 0||Y.ignoreIfExists!==void 0)&&(Ge.options=Y),oe!==void 0&&(Ge.annotationId=oe),Ge}A.create=q;function $(D){var S=D;return S&&S.kind==="rename"&&Z.string(S.oldUri)&&Z.string(S.newUri)&&(S.options===void 0||(S.options.overwrite===void 0||Z.boolean(S.options.overwrite))&&(S.options.ignoreIfExists===void 0||Z.boolean(S.options.ignoreIfExists)))&&(S.annotationId===void 0||X.is(S.annotationId))}A.is=$;})(U||(t.RenameFile=U={}));var ie;(function(A){function q(D,S,Y){var oe={kind:"delete",uri:D};return S!==void 0&&(S.recursive!==void 0||S.ignoreIfNotExists!==void 0)&&(oe.options=S),Y!==void 0&&(oe.annotationId=Y),oe}A.create=q;function $(D){var S=D;return S&&S.kind==="delete"&&Z.string(S.uri)&&(S.options===void 0||(S.options.recursive===void 0||Z.boolean(S.options.recursive))&&(S.options.ignoreIfNotExists===void 0||Z.boolean(S.options.ignoreIfNotExists)))&&(S.annotationId===void 0||X.is(S.annotationId))}A.is=$;})(ie||(t.DeleteFile=ie={}));var me;(function(A){function q($){var D=$;return D&&(D.changes!==void 0||D.documentChanges!==void 0)&&(D.documentChanges===void 0||D.documentChanges.every(function(S){return Z.string(S.kind)?ee.is(S)||U.is(S)||ie.is(S):G.is(S)}))}A.is=q;})(me||(t.WorkspaceEdit=me={}));var Pe=function(){function A(q,$){this.edits=q,this.changeAnnotations=$;}return A.prototype.insert=function(q,$,D){var S,Y;if(D===void 0?S=B.insert(q,$):X.is(D)?(Y=D,S=z.insert(q,$,D)):(this.assertChangeAnnotations(this.changeAnnotations),Y=this.changeAnnotations.manage(D),S=z.insert(q,$,Y)),this.edits.push(S),Y!==void 0)return Y},A.prototype.replace=function(q,$,D){var S,Y;if(D===void 0?S=B.replace(q,$):X.is(D)?(Y=D,S=z.replace(q,$,D)):(this.assertChangeAnnotations(this.changeAnnotations),Y=this.changeAnnotations.manage(D),S=z.replace(q,$,Y)),this.edits.push(S),Y!==void 0)return Y},A.prototype.delete=function(q,$){var D,S;if($===void 0?D=B.del(q):X.is($)?(S=$,D=z.del(q,$)):(this.assertChangeAnnotations(this.changeAnnotations),S=this.changeAnnotations.manage($),D=z.del(q,S)),this.edits.push(D),S!==void 0)return S},A.prototype.add=function(q){this.edits.push(q);},A.prototype.all=function(){return this.edits},A.prototype.clear=function(){this.edits.splice(0,this.edits.length);},A.prototype.assertChangeAnnotations=function(q){if(q===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},A}(),W=function(){function A(q){this._annotations=q===void 0?Object.create(null):q,this._counter=0,this._size=0;}return A.prototype.all=function(){return this._annotations},Object.defineProperty(A.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),A.prototype.manage=function(q,$){var D;if(X.is(q)?D=q:(D=this.nextId(),$=q),this._annotations[D]!==void 0)throw new Error("Id ".concat(D," is already in use."));if($===void 0)throw new Error("No annotation provided for id ".concat(D));return this._annotations[D]=$,this._size++,D},A.prototype.nextId=function(){return this._counter++,this._counter.toString()},A}(),K=function(){function A(q){var $=this;this._textEditChanges=Object.create(null),q!==void 0?(this._workspaceEdit=q,q.documentChanges?(this._changeAnnotations=new W(q.changeAnnotations),q.changeAnnotations=this._changeAnnotations.all(),q.documentChanges.forEach(function(D){if(G.is(D)){var S=new Pe(D.edits,$._changeAnnotations);$._textEditChanges[D.textDocument.uri]=S;}})):q.changes&&Object.keys(q.changes).forEach(function(D){var S=new Pe(q.changes[D]);$._textEditChanges[D]=S;})):this._workspaceEdit={};}return Object.defineProperty(A.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),A.prototype.getTextEditChange=function(q){if(Fe.is(q)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var $={uri:q.uri,version:q.version},D=this._textEditChanges[$.uri];if(!D){var S=[],Y={textDocument:$,edits:S};this._workspaceEdit.documentChanges.push(Y),D=new Pe(S,this._changeAnnotations),this._textEditChanges[$.uri]=D;}return D}else {if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var D=this._textEditChanges[q];if(!D){var S=[];this._workspaceEdit.changes[q]=S,D=new Pe(S),this._textEditChanges[q]=D;}return D}},A.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new W,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all());},A.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null));},A.prototype.createFile=function(q,$,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var S;V.is($)||X.is($)?S=$:D=$;var Y,oe;if(S===void 0?Y=ee.create(q,D):(oe=X.is(S)?S:this._changeAnnotations.manage(S),Y=ee.create(q,D,oe)),this._workspaceEdit.documentChanges.push(Y),oe!==void 0)return oe},A.prototype.renameFile=function(q,$,D,S){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Y;V.is(D)||X.is(D)?Y=D:S=D;var oe,Ge;if(Y===void 0?oe=U.create(q,$,S):(Ge=X.is(Y)?Y:this._changeAnnotations.manage(Y),oe=U.create(q,$,S,Ge)),this._workspaceEdit.documentChanges.push(oe),Ge!==void 0)return Ge},A.prototype.deleteFile=function(q,$,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var S;V.is($)||X.is($)?S=$:D=$;var Y,oe;if(S===void 0?Y=ie.create(q,D):(oe=X.is(S)?S:this._changeAnnotations.manage(S),Y=ie.create(q,D,oe)),this._workspaceEdit.documentChanges.push(Y),oe!==void 0)return oe},A}();t.WorkspaceChange=K;var se;(function(A){function q(D){return {uri:D}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.string(S.uri)}A.is=$;})(se||(t.TextDocumentIdentifier=se={}));var Ae;(function(A){function q(D,S){return {uri:D,version:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.string(S.uri)&&Z.integer(S.version)}A.is=$;})(Ae||(t.VersionedTextDocumentIdentifier=Ae={}));var Fe;(function(A){function q(D,S){return {uri:D,version:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.string(S.uri)&&(S.version===null||Z.integer(S.version))}A.is=$;})(Fe||(t.OptionalVersionedTextDocumentIdentifier=Fe={}));var Ke;(function(A){function q(D,S,Y,oe){return {uri:D,languageId:S,version:Y,text:oe}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.string(S.uri)&&Z.string(S.languageId)&&Z.integer(S.version)&&Z.string(S.text)}A.is=$;})(Ke||(t.TextDocumentItem=Ke={}));var Ve;(function(A){A.PlainText="plaintext",A.Markdown="markdown";function q($){var D=$;return D===A.PlainText||D===A.Markdown}A.is=q;})(Ve||(t.MarkupKind=Ve={}));var ot;(function(A){function q($){var D=$;return Z.objectLiteral($)&&Ve.is(D.kind)&&Z.string(D.value)}A.is=q;})(ot||(t.MarkupContent=ot={}));var Dt;(function(A){A.Text=1,A.Method=2,A.Function=3,A.Constructor=4,A.Field=5,A.Variable=6,A.Class=7,A.Interface=8,A.Module=9,A.Property=10,A.Unit=11,A.Value=12,A.Enum=13,A.Keyword=14,A.Snippet=15,A.Color=16,A.File=17,A.Reference=18,A.Folder=19,A.EnumMember=20,A.Constant=21,A.Struct=22,A.Event=23,A.Operator=24,A.TypeParameter=25;})(Dt||(t.CompletionItemKind=Dt={}));var bt;(function(A){A.PlainText=1,A.Snippet=2;})(bt||(t.InsertTextFormat=bt={}));var ft;(function(A){A.Deprecated=1;})(ft||(t.CompletionItemTag=ft={}));var Oe;(function(A){function q(D,S,Y){return {newText:D,insert:S,replace:Y}}A.create=q;function $(D){var S=D;return S&&Z.string(S.newText)&&o.is(S.insert)&&o.is(S.replace)}A.is=$;})(Oe||(t.InsertReplaceEdit=Oe={}));var Rt;(function(A){A.asIs=1,A.adjustIndentation=2;})(Rt||(t.InsertTextMode=Rt={}));var qt;(function(A){function q($){var D=$;return D&&(Z.string(D.detail)||D.detail===void 0)&&(Z.string(D.description)||D.description===void 0)}A.is=q;})(qt||(t.CompletionItemLabelDetails=qt={}));var ye;(function(A){function q($){return {label:$}}A.create=q;})(ye||(t.CompletionItem=ye={}));var $e;(function(A){function q($,D){return {items:$||[],isIncomplete:!!D}}A.create=q;})($e||(t.CompletionList=$e={}));var le;(function(A){function q(D){return D.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}A.fromPlainText=q;function $(D){var S=D;return Z.string(S)||Z.objectLiteral(S)&&Z.string(S.language)&&Z.string(S.value)}A.is=$;})(le||(t.MarkedString=le={}));var Ie;(function(A){function q($){var D=$;return !!D&&Z.objectLiteral(D)&&(ot.is(D.contents)||le.is(D.contents)||Z.typedArray(D.contents,le.is))&&($.range===void 0||o.is($.range))}A.is=q;})(Ie||(t.Hover=Ie={}));var He;(function(A){function q($,D){return D?{label:$,documentation:D}:{label:$}}A.create=q;})(He||(t.ParameterInformation=He={}));var et;(function(A){function q($,D){for(var S=[],Y=2;Y<arguments.length;Y++)S[Y-2]=arguments[Y];var oe={label:$};return Z.defined(D)&&(oe.documentation=D),Z.defined(S)?oe.parameters=S:oe.parameters=[],oe}A.create=q;})(et||(t.SignatureInformation=et={}));var ze;(function(A){A.Text=1,A.Read=2,A.Write=3;})(ze||(t.DocumentHighlightKind=ze={}));var _n;(function(A){function q($,D){var S={range:$};return Z.number(D)&&(S.kind=D),S}A.create=q;})(_n||(t.DocumentHighlight=_n={}));var kr;(function(A){A.File=1,A.Module=2,A.Namespace=3,A.Package=4,A.Class=5,A.Method=6,A.Property=7,A.Field=8,A.Constructor=9,A.Enum=10,A.Interface=11,A.Function=12,A.Variable=13,A.Constant=14,A.String=15,A.Number=16,A.Boolean=17,A.Array=18,A.Object=19,A.Key=20,A.Null=21,A.EnumMember=22,A.Struct=23,A.Event=24,A.Operator=25,A.TypeParameter=26;})(kr||(t.SymbolKind=kr={}));var As;(function(A){A.Deprecated=1;})(As||(t.SymbolTag=As={}));var Or;(function(A){function q($,D,S,Y,oe){var Ge={name:$,kind:D,location:{uri:Y,range:S}};return oe&&(Ge.containerName=oe),Ge}A.create=q;})(Or||(t.SymbolInformation=Or={}));var Kr;(function(A){function q($,D,S,Y){return Y!==void 0?{name:$,kind:D,location:{uri:S,range:Y}}:{name:$,kind:D,location:{uri:S}}}A.create=q;})(Kr||(t.WorkspaceSymbol=Kr={}));var Rs;(function(A){function q(D,S,Y,oe,Ge,Ht){var Pt={name:D,detail:S,kind:Y,range:oe,selectionRange:Ge};return Ht!==void 0&&(Pt.children=Ht),Pt}A.create=q;function $(D){var S=D;return S&&Z.string(S.name)&&Z.number(S.kind)&&o.is(S.range)&&o.is(S.selectionRange)&&(S.detail===void 0||Z.string(S.detail))&&(S.deprecated===void 0||Z.boolean(S.deprecated))&&(S.children===void 0||Array.isArray(S.children))&&(S.tags===void 0||Array.isArray(S.tags))}A.is=$;})(Rs||(t.DocumentSymbol=Rs={}));var ma;(function(A){A.Empty="",A.QuickFix="quickfix",A.Refactor="refactor",A.RefactorExtract="refactor.extract",A.RefactorInline="refactor.inline",A.RefactorRewrite="refactor.rewrite",A.Source="source",A.SourceOrganizeImports="source.organizeImports",A.SourceFixAll="source.fixAll";})(ma||(t.CodeActionKind=ma={}));var an;(function(A){A.Invoked=1,A.Automatic=2;})(an||(t.CodeActionTriggerKind=an={}));var Is;(function(A){function q(D,S,Y){var oe={diagnostics:D};return S!=null&&(oe.only=S),Y!=null&&(oe.triggerKind=Y),oe}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.typedArray(S.diagnostics,b.is)&&(S.only===void 0||Z.typedArray(S.only,Z.string))&&(S.triggerKind===void 0||S.triggerKind===an.Invoked||S.triggerKind===an.Automatic)}A.is=$;})(Is||(t.CodeActionContext=Is={}));var Ps;(function(A){function q(D,S,Y){var oe={title:D},Ge=!0;return typeof S=="string"?(Ge=!1,oe.kind=S):N.is(S)?oe.command=S:oe.edit=S,Ge&&Y!==void 0&&(oe.kind=Y),oe}A.create=q;function $(D){var S=D;return S&&Z.string(S.title)&&(S.diagnostics===void 0||Z.typedArray(S.diagnostics,b.is))&&(S.kind===void 0||Z.string(S.kind))&&(S.edit!==void 0||S.command!==void 0)&&(S.command===void 0||N.is(S.command))&&(S.isPreferred===void 0||Z.boolean(S.isPreferred))&&(S.edit===void 0||me.is(S.edit))}A.is=$;})(Ps||(t.CodeAction=Ps={}));var bi;(function(A){function q(D,S){var Y={range:D};return Z.defined(S)&&(Y.data=S),Y}A.create=q;function $(D){var S=D;return Z.defined(S)&&o.is(S.range)&&(Z.undefined(S.command)||N.is(S.command))}A.is=$;})(bi||(t.CodeLens=bi={}));var Ns;(function(A){function q(D,S){return {tabSize:D,insertSpaces:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&Z.uinteger(S.tabSize)&&Z.boolean(S.insertSpaces)}A.is=$;})(Ns||(t.FormattingOptions=Ns={}));var Fn;(function(A){function q(D,S,Y){return {range:D,target:S,data:Y}}A.create=q;function $(D){var S=D;return Z.defined(S)&&o.is(S.range)&&(Z.undefined(S.target)||Z.string(S.target))}A.is=$;})(Fn||(t.DocumentLink=Fn={}));var M;(function(A){function q(D,S){return {range:D,parent:S}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&o.is(S.range)&&(S.parent===void 0||A.is(S.parent))}A.is=$;})(M||(t.SelectionRange=M={}));var ae;(function(A){A.namespace="namespace",A.type="type",A.class="class",A.enum="enum",A.interface="interface",A.struct="struct",A.typeParameter="typeParameter",A.parameter="parameter",A.variable="variable",A.property="property",A.enumMember="enumMember",A.event="event",A.function="function",A.method="method",A.macro="macro",A.keyword="keyword",A.modifier="modifier",A.comment="comment",A.string="string",A.number="number",A.regexp="regexp",A.operator="operator",A.decorator="decorator";})(ae||(t.SemanticTokenTypes=ae={}));var Se;(function(A){A.declaration="declaration",A.definition="definition",A.readonly="readonly",A.static="static",A.deprecated="deprecated",A.abstract="abstract",A.async="async",A.modification="modification",A.documentation="documentation",A.defaultLibrary="defaultLibrary";})(Se||(t.SemanticTokenModifiers=Se={}));var Ne;(function(A){function q($){var D=$;return Z.objectLiteral(D)&&(D.resultId===void 0||typeof D.resultId=="string")&&Array.isArray(D.data)&&(D.data.length===0||typeof D.data[0]=="number")}A.is=q;})(Ne||(t.SemanticTokens=Ne={}));var St;(function(A){function q(D,S){return {range:D,text:S}}A.create=q;function $(D){var S=D;return S!=null&&o.is(S.range)&&Z.string(S.text)}A.is=$;})(St||(t.InlineValueText=St={}));var gt;(function(A){function q(D,S,Y){return {range:D,variableName:S,caseSensitiveLookup:Y}}A.create=q;function $(D){var S=D;return S!=null&&o.is(S.range)&&Z.boolean(S.caseSensitiveLookup)&&(Z.string(S.variableName)||S.variableName===void 0)}A.is=$;})(gt||(t.InlineValueVariableLookup=gt={}));var It;(function(A){function q(D,S){return {range:D,expression:S}}A.create=q;function $(D){var S=D;return S!=null&&o.is(S.range)&&(Z.string(S.expression)||S.expression===void 0)}A.is=$;})(It||(t.InlineValueEvaluatableExpression=It={}));var Ot;(function(A){function q(D,S){return {frameId:D,stoppedLocation:S}}A.create=q;function $(D){var S=D;return Z.defined(S)&&o.is(D.stoppedLocation)}A.is=$;})(Ot||(t.InlineValueContext=Ot={}));var tt;(function(A){A.Type=1,A.Parameter=2;function q($){return $===1||$===2}A.is=q;})(tt||(t.InlayHintKind=tt={}));var xt;(function(A){function q(D){return {value:D}}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&(S.tooltip===void 0||Z.string(S.tooltip)||ot.is(S.tooltip))&&(S.location===void 0||c.is(S.location))&&(S.command===void 0||N.is(S.command))}A.is=$;})(xt||(t.InlayHintLabelPart=xt={}));var dt;(function(A){function q(D,S,Y){var oe={position:D,label:S};return Y!==void 0&&(oe.kind=Y),oe}A.create=q;function $(D){var S=D;return Z.objectLiteral(S)&&a.is(S.position)&&(Z.string(S.label)||Z.typedArray(S.label,xt.is))&&(S.kind===void 0||tt.is(S.kind))&&S.textEdits===void 0||Z.typedArray(S.textEdits,B.is)&&(S.tooltip===void 0||Z.string(S.tooltip)||ot.is(S.tooltip))&&(S.paddingLeft===void 0||Z.boolean(S.paddingLeft))&&(S.paddingRight===void 0||Z.boolean(S.paddingRight))}A.is=$;})(dt||(t.InlayHint=dt={}));var Vt;(function(A){function q($){return {kind:"snippet",value:$}}A.createSnippet=q;})(Vt||(t.StringValue=Vt={}));var Jt;(function(A){function q($,D,S,Y){return {insertText:$,filterText:D,range:S,command:Y}}A.create=q;})(Jt||(t.InlineCompletionItem=Jt={}));var Br;(function(A){function q($){return {items:$}}A.create=q;})(Br||(t.InlineCompletionList=Br={}));var ya;(function(A){A.Invoked=0,A.Automatic=1;})(ya||(t.InlineCompletionTriggerKind=ya={}));var Mi;(function(A){function q($,D){return {range:$,text:D}}A.create=q;})(Mi||(t.SelectedCompletionInfo=Mi={}));var qi;(function(A){function q($,D){return {triggerKind:$,selectedCompletionInfo:D}}A.create=q;})(qi||(t.InlineCompletionContext=qi={}));var Bo;((function(A){function q($){var D=$;return Z.objectLiteral(D)&&n.is(D.uri)&&Z.string(D.name)}A.is=q;}))(Bo||(t.WorkspaceFolder=Bo={})),t.EOL=[`
`,`\r
`,"\r"];var Lo;(function(A){function q(Y,oe,Ge,Ht){return new vc(Y,oe,Ge,Ht)}A.create=q;function $(Y){var oe=Y;return !!(Z.defined(oe)&&Z.string(oe.uri)&&(Z.undefined(oe.languageId)||Z.string(oe.languageId))&&Z.uinteger(oe.lineCount)&&Z.func(oe.getText)&&Z.func(oe.positionAt)&&Z.func(oe.offsetAt))}A.is=$;function D(Y,oe){for(var Ge=Y.getText(),Ht=S(oe,function(Ui,_a){var bc=Ui.range.start.line-_a.range.start.line;return bc===0?Ui.range.start.character-_a.range.start.character:bc}),Pt=Ge.length,on=Ht.length-1;on>=0;on--){var un=Ht[on],Mn=Y.offsetAt(un.range.start),nt=Y.offsetAt(un.range.end);if(nt<=Pt)Ge=Ge.substring(0,Mn)+un.newText+Ge.substring(nt,Ge.length);else throw new Error("Overlapping edit");Pt=Mn;}return Ge}A.applyEdits=D;function S(Y,oe){if(Y.length<=1)return Y;var Ge=Y.length/2|0,Ht=Y.slice(0,Ge),Pt=Y.slice(Ge);S(Ht,oe),S(Pt,oe);for(var on=0,un=0,Mn=0;on<Ht.length&&un<Pt.length;){var nt=oe(Ht[on],Pt[un]);nt<=0?Y[Mn++]=Ht[on++]:Y[Mn++]=Pt[un++];}for(;on<Ht.length;)Y[Mn++]=Ht[on++];for(;un<Pt.length;)Y[Mn++]=Pt[un++];return Y}})(Lo||(t.TextDocument=Lo={}));var vc=function(){function A(q,$,D,S){this._uri=q,this._languageId=$,this._version=D,this._content=S,this._lineOffsets=void 0;}return Object.defineProperty(A.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),A.prototype.getText=function(q){if(q){var $=this.offsetAt(q.start),D=this.offsetAt(q.end);return this._content.substring($,D)}return this._content},A.prototype.update=function(q,$){this._content=q.text,this._version=$,this._lineOffsets=void 0;},A.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var q=[],$=this._content,D=!0,S=0;S<$.length;S++){D&&(q.push(S),D=!1);var Y=$.charAt(S);D=Y==="\r"||Y===`
`,Y==="\r"&&S+1<$.length&&$.charAt(S+1)===`
`&&S++;}D&&$.length>0&&q.push($.length),this._lineOffsets=q;}return this._lineOffsets},A.prototype.positionAt=function(q){q=Math.max(Math.min(q,this._content.length),0);var $=this.getLineOffsets(),D=0,S=$.length;if(S===0)return a.create(0,q);for(;D<S;){var Y=Math.floor((D+S)/2);$[Y]>q?S=Y:D=Y+1;}var oe=D-1;return a.create(oe,q-$[oe])},A.prototype.offsetAt=function(q){var $=this.getLineOffsets();if(q.line>=$.length)return this._content.length;if(q.line<0)return 0;var D=$[q.line],S=q.line+1<$.length?$[q.line+1]:this._content.length;return Math.max(Math.min(D+q.character,S),D)},Object.defineProperty(A.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),A}(),Z;(function(A){var q=Object.prototype.toString;function $(nt){return typeof nt<"u"}A.defined=$;function D(nt){return typeof nt>"u"}A.undefined=D;function S(nt){return nt===!0||nt===!1}A.boolean=S;function Y(nt){return q.call(nt)==="[object String]"}A.string=Y;function oe(nt){return q.call(nt)==="[object Number]"}A.number=oe;function Ge(nt,Ui,_a){return q.call(nt)==="[object Number]"&&Ui<=nt&&nt<=_a}A.numberRange=Ge;function Ht(nt){return q.call(nt)==="[object Number]"&&-2147483648<=nt&&nt<=2147483647}A.integer=Ht;function Pt(nt){return q.call(nt)==="[object Number]"&&0<=nt&&nt<=2147483647}A.uinteger=Pt;function on(nt){return q.call(nt)==="[object Function]"}A.func=on;function un(nt){return nt!==null&&typeof nt=="object"}A.objectLiteral=un;function Mn(nt,Ui){return Array.isArray(nt)&&nt.every(Ui)}A.typedArray=Mn;})(Z||(Z={}));});});var Kt=P(tn=>{Object.defineProperty(tn,"__esModule",{value:!0});tn.ProtocolNotificationType=tn.ProtocolNotificationType0=tn.ProtocolRequestType=tn.ProtocolRequestType0=tn.RegistrationType=tn.MessageDirection=void 0;var So=fa(),VO;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both";})(VO||(tn.MessageDirection=VO={}));var Bv=class{constructor(t){this.method=t;}};tn.RegistrationType=Bv;var Lv=class extends So.RequestType0{constructor(t){super(t);}};tn.ProtocolRequestType0=Lv;var Fv=class extends So.RequestType{constructor(t){super(t,So.ParameterStructures.byName);}};tn.ProtocolRequestType=Fv;var Mv=class extends So.NotificationType0{constructor(t){super(t);}};tn.ProtocolNotificationType0=Mv;var qv=class extends So.NotificationType{constructor(t){super(t,So.ParameterStructures.byName);}};tn.ProtocolNotificationType=qv;});var Hd=P(ar=>{Object.defineProperty(ar,"__esModule",{value:!0});ar.objectLiteral=ar.typedArray=ar.stringArray=ar.array=ar.func=ar.error=ar.number=ar.string=ar.boolean=void 0;function lX(e){return e===!0||e===!1}ar.boolean=lX;function HO(e){return typeof e=="string"||e instanceof String}ar.string=HO;function fX(e){return typeof e=="number"||e instanceof Number}ar.number=fX;function dX(e){return e instanceof Error}ar.error=dX;function hX(e){return typeof e=="function"}ar.func=hX;function WO(e){return Array.isArray(e)}ar.array=WO;function pX(e){return WO(e)&&e.every(t=>HO(t))}ar.stringArray=pX;function gX(e,t){return Array.isArray(e)&&e.every(t)}ar.typedArray=gX;function mX(e){return e!==null&&typeof e=="object"}ar.objectLiteral=mX;});var GO=P(Wd=>{Object.defineProperty(Wd,"__esModule",{value:!0});Wd.ImplementationRequest=void 0;var KO=Kt(),zO;(function(e){e.method="textDocument/implementation",e.messageDirection=KO.MessageDirection.clientToServer,e.type=new KO.ProtocolRequestType(e.method);})(zO||(Wd.ImplementationRequest=zO={}));});var ZO=P(Kd=>{Object.defineProperty(Kd,"__esModule",{value:!0});Kd.TypeDefinitionRequest=void 0;var YO=Kt(),QO;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=YO.MessageDirection.clientToServer,e.type=new YO.ProtocolRequestType(e.method);})(QO||(Kd.TypeDefinitionRequest=QO={}));});var eB=P(Eo=>{Object.defineProperty(Eo,"__esModule",{value:!0});Eo.DidChangeWorkspaceFoldersNotification=Eo.WorkspaceFoldersRequest=void 0;var zd=Kt(),XO;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=zd.MessageDirection.serverToClient,e.type=new zd.ProtocolRequestType0(e.method);})(XO||(Eo.WorkspaceFoldersRequest=XO={}));var JO;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=zd.MessageDirection.clientToServer,e.type=new zd.ProtocolNotificationType(e.method);})(JO||(Eo.DidChangeWorkspaceFoldersNotification=JO={}));});var nB=P(Gd=>{Object.defineProperty(Gd,"__esModule",{value:!0});Gd.ConfigurationRequest=void 0;var tB=Kt(),rB;(function(e){e.method="workspace/configuration",e.messageDirection=tB.MessageDirection.serverToClient,e.type=new tB.ProtocolRequestType(e.method);})(rB||(Gd.ConfigurationRequest=rB={}));});var aB=P(wo=>{Object.defineProperty(wo,"__esModule",{value:!0});wo.ColorPresentationRequest=wo.DocumentColorRequest=void 0;var Yd=Kt(),iB;(function(e){e.method="textDocument/documentColor",e.messageDirection=Yd.MessageDirection.clientToServer,e.type=new Yd.ProtocolRequestType(e.method);})(iB||(wo.DocumentColorRequest=iB={}));var sB;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=Yd.MessageDirection.clientToServer,e.type=new Yd.ProtocolRequestType(e.method);})(sB||(wo.ColorPresentationRequest=sB={}));});var cB=P(Co=>{Object.defineProperty(Co,"__esModule",{value:!0});Co.FoldingRangeRefreshRequest=Co.FoldingRangeRequest=void 0;var Qd=Kt(),oB;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Qd.MessageDirection.clientToServer,e.type=new Qd.ProtocolRequestType(e.method);})(oB||(Co.FoldingRangeRequest=oB={}));var uB;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Qd.MessageDirection.serverToClient,e.type=new Qd.ProtocolRequestType0(e.method);})(uB||(Co.FoldingRangeRefreshRequest=uB={}));});var dB=P(Zd=>{Object.defineProperty(Zd,"__esModule",{value:!0});Zd.DeclarationRequest=void 0;var lB=Kt(),fB;(function(e){e.method="textDocument/declaration",e.messageDirection=lB.MessageDirection.clientToServer,e.type=new lB.ProtocolRequestType(e.method);})(fB||(Zd.DeclarationRequest=fB={}));});var gB=P(Xd=>{Object.defineProperty(Xd,"__esModule",{value:!0});Xd.SelectionRangeRequest=void 0;var hB=Kt(),pB;(function(e){e.method="textDocument/selectionRange",e.messageDirection=hB.MessageDirection.clientToServer,e.type=new hB.ProtocolRequestType(e.method);})(pB||(Xd.SelectionRangeRequest=pB={}));});var vB=P(vs=>{Object.defineProperty(vs,"__esModule",{value:!0});vs.WorkDoneProgressCancelNotification=vs.WorkDoneProgressCreateRequest=vs.WorkDoneProgress=void 0;var yX=fa(),Jd=Kt(),mB;(function(e){e.type=new yX.ProgressType;function t(r){return r===e.type}e.is=t;})(mB||(vs.WorkDoneProgress=mB={}));var yB;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Jd.MessageDirection.serverToClient,e.type=new Jd.ProtocolRequestType(e.method);})(yB||(vs.WorkDoneProgressCreateRequest=yB={}));var _B;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Jd.MessageDirection.clientToServer,e.type=new Jd.ProtocolNotificationType(e.method);})(_B||(vs.WorkDoneProgressCancelNotification=_B={}));});var wB=P(bs=>{Object.defineProperty(bs,"__esModule",{value:!0});bs.CallHierarchyOutgoingCallsRequest=bs.CallHierarchyIncomingCallsRequest=bs.CallHierarchyPrepareRequest=void 0;var xo=Kt(),bB;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=xo.MessageDirection.clientToServer,e.type=new xo.ProtocolRequestType(e.method);})(bB||(bs.CallHierarchyPrepareRequest=bB={}));var SB;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=xo.MessageDirection.clientToServer,e.type=new xo.ProtocolRequestType(e.method);})(SB||(bs.CallHierarchyIncomingCallsRequest=SB={}));var EB;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=xo.MessageDirection.clientToServer,e.type=new xo.ProtocolRequestType(e.method);})(EB||(bs.CallHierarchyOutgoingCallsRequest=EB={}));});var IB=P(rn=>{Object.defineProperty(rn,"__esModule",{value:!0});rn.SemanticTokensRefreshRequest=rn.SemanticTokensRangeRequest=rn.SemanticTokensDeltaRequest=rn.SemanticTokensRequest=rn.SemanticTokensRegistrationType=rn.TokenFormat=void 0;var Fi=Kt(),CB;(function(e){e.Relative="relative";})(CB||(rn.TokenFormat=CB={}));var lc;(function(e){e.method="textDocument/semanticTokens",e.type=new Fi.RegistrationType(e.method);})(lc||(rn.SemanticTokensRegistrationType=lc={}));var xB;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=Fi.MessageDirection.clientToServer,e.type=new Fi.ProtocolRequestType(e.method),e.registrationMethod=lc.method;})(xB||(rn.SemanticTokensRequest=xB={}));var TB;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=Fi.MessageDirection.clientToServer,e.type=new Fi.ProtocolRequestType(e.method),e.registrationMethod=lc.method;})(TB||(rn.SemanticTokensDeltaRequest=TB={}));var AB;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=Fi.MessageDirection.clientToServer,e.type=new Fi.ProtocolRequestType(e.method),e.registrationMethod=lc.method;})(AB||(rn.SemanticTokensRangeRequest=AB={}));var RB;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=Fi.MessageDirection.serverToClient,e.type=new Fi.ProtocolRequestType0(e.method);})(RB||(rn.SemanticTokensRefreshRequest=RB={}));});var DB=P(eh=>{Object.defineProperty(eh,"__esModule",{value:!0});eh.ShowDocumentRequest=void 0;var PB=Kt(),NB;(function(e){e.method="window/showDocument",e.messageDirection=PB.MessageDirection.serverToClient,e.type=new PB.ProtocolRequestType(e.method);})(NB||(eh.ShowDocumentRequest=NB={}));});var BB=P(th=>{Object.defineProperty(th,"__esModule",{value:!0});th.LinkedEditingRangeRequest=void 0;var kB=Kt(),OB;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=kB.MessageDirection.clientToServer,e.type=new kB.ProtocolRequestType(e.method);})(OB||(th.LinkedEditingRangeRequest=OB={}));});var VB=P(Nr=>{Object.defineProperty(Nr,"__esModule",{value:!0});Nr.WillDeleteFilesRequest=Nr.DidDeleteFilesNotification=Nr.DidRenameFilesNotification=Nr.WillRenameFilesRequest=Nr.DidCreateFilesNotification=Nr.WillCreateFilesRequest=Nr.FileOperationPatternKind=void 0;var Nn=Kt(),LB;(function(e){e.file="file",e.folder="folder";})(LB||(Nr.FileOperationPatternKind=LB={}));var FB;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolRequestType(e.method);})(FB||(Nr.WillCreateFilesRequest=FB={}));var MB;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolNotificationType(e.method);})(MB||(Nr.DidCreateFilesNotification=MB={}));var qB;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolRequestType(e.method);})(qB||(Nr.WillRenameFilesRequest=qB={}));var UB;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolNotificationType(e.method);})(UB||(Nr.DidRenameFilesNotification=UB={}));var $B;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolNotificationType(e.method);})($B||(Nr.DidDeleteFilesNotification=$B={}));var jB;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Nn.MessageDirection.clientToServer,e.type=new Nn.ProtocolRequestType(e.method);})(jB||(Nr.WillDeleteFilesRequest=jB={}));});var GB=P(Ss=>{Object.defineProperty(Ss,"__esModule",{value:!0});Ss.MonikerRequest=Ss.MonikerKind=Ss.UniquenessLevel=void 0;var HB=Kt(),WB;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global";})(WB||(Ss.UniquenessLevel=WB={}));var KB;(function(e){e.$import="import",e.$export="export",e.local="local";})(KB||(Ss.MonikerKind=KB={}));var zB;(function(e){e.method="textDocument/moniker",e.messageDirection=HB.MessageDirection.clientToServer,e.type=new HB.ProtocolRequestType(e.method);})(zB||(Ss.MonikerRequest=zB={}));});var XB=P(Es=>{Object.defineProperty(Es,"__esModule",{value:!0});Es.TypeHierarchySubtypesRequest=Es.TypeHierarchySupertypesRequest=Es.TypeHierarchyPrepareRequest=void 0;var To=Kt(),YB;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(YB||(Es.TypeHierarchyPrepareRequest=YB={}));var QB;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(QB||(Es.TypeHierarchySupertypesRequest=QB={}));var ZB;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=To.MessageDirection.clientToServer,e.type=new To.ProtocolRequestType(e.method);})(ZB||(Es.TypeHierarchySubtypesRequest=ZB={}));});var tL=P(Ao=>{Object.defineProperty(Ao,"__esModule",{value:!0});Ao.InlineValueRefreshRequest=Ao.InlineValueRequest=void 0;var rh=Kt(),JB;(function(e){e.method="textDocument/inlineValue",e.messageDirection=rh.MessageDirection.clientToServer,e.type=new rh.ProtocolRequestType(e.method);})(JB||(Ao.InlineValueRequest=JB={}));var eL;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=rh.MessageDirection.serverToClient,e.type=new rh.ProtocolRequestType0(e.method);})(eL||(Ao.InlineValueRefreshRequest=eL={}));});var sL=P(ws=>{Object.defineProperty(ws,"__esModule",{value:!0});ws.InlayHintRefreshRequest=ws.InlayHintResolveRequest=ws.InlayHintRequest=void 0;var Ro=Kt(),rL;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Ro.MessageDirection.clientToServer,e.type=new Ro.ProtocolRequestType(e.method);})(rL||(ws.InlayHintRequest=rL={}));var nL;(function(e){e.method="inlayHint/resolve",e.messageDirection=Ro.MessageDirection.clientToServer,e.type=new Ro.ProtocolRequestType(e.method);})(nL||(ws.InlayHintResolveRequest=nL={}));var iL;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Ro.MessageDirection.serverToClient,e.type=new Ro.ProtocolRequestType0(e.method);})(iL||(ws.InlayHintRefreshRequest=iL={}));});var dL=P(Dn=>{Object.defineProperty(Dn,"__esModule",{value:!0});Dn.DiagnosticRefreshRequest=Dn.WorkspaceDiagnosticRequest=Dn.DocumentDiagnosticRequest=Dn.DocumentDiagnosticReportKind=Dn.DiagnosticServerCancellationData=void 0;var fL=fa(),_X=Hd(),Io=Kt(),aL;(function(e){function t(r){let n=r;return n&&_X.boolean(n.retriggerRequest)}e.is=t;})(aL||(Dn.DiagnosticServerCancellationData=aL={}));var oL;(function(e){e.Full="full",e.Unchanged="unchanged";})(oL||(Dn.DocumentDiagnosticReportKind=oL={}));var uL;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Io.MessageDirection.clientToServer,e.type=new Io.ProtocolRequestType(e.method),e.partialResult=new fL.ProgressType;})(uL||(Dn.DocumentDiagnosticRequest=uL={}));var cL;(function(e){e.method="workspace/diagnostic",e.messageDirection=Io.MessageDirection.clientToServer,e.type=new Io.ProtocolRequestType(e.method),e.partialResult=new fL.ProgressType;})(cL||(Dn.WorkspaceDiagnosticRequest=cL={}));var lL;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Io.MessageDirection.serverToClient,e.type=new Io.ProtocolRequestType0(e.method);})(lL||(Dn.DiagnosticRefreshRequest=lL={}));});var vL=P(Xt=>{Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DidCloseNotebookDocumentNotification=Xt.DidSaveNotebookDocumentNotification=Xt.DidChangeNotebookDocumentNotification=Xt.NotebookCellArrayChange=Xt.DidOpenNotebookDocumentNotification=Xt.NotebookDocumentSyncRegistrationType=Xt.NotebookDocument=Xt.NotebookCell=Xt.ExecutionSummary=Xt.NotebookCellKind=void 0;var fc=Vd(),Qn=Hd(),mi=Kt(),Uv;(function(e){e.Markup=1,e.Code=2;function t(r){return r===1||r===2}e.is=t;})(Uv||(Xt.NotebookCellKind=Uv={}));var $v;(function(e){function t(i,s){let a={executionOrder:i};return (s===!0||s===!1)&&(a.success=s),a}e.create=t;function r(i){let s=i;return Qn.objectLiteral(s)&&fc.uinteger.is(s.executionOrder)&&(s.success===void 0||Qn.boolean(s.success))}e.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}e.equals=n;})($v||(Xt.ExecutionSummary=$v={}));var nh;(function(e){function t(s,a){return {kind:s,document:a}}e.create=t;function r(s){let a=s;return Qn.objectLiteral(a)&&Uv.is(a.kind)&&fc.DocumentUri.is(a.document)&&(a.metadata===void 0||Qn.objectLiteral(a.metadata))}e.is=r;function n(s,a){let o=new Set;return s.document!==a.document&&o.add("document"),s.kind!==a.kind&&o.add("kind"),s.executionSummary!==a.executionSummary&&o.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!i(s.metadata,a.metadata)&&o.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!$v.equals(s.executionSummary,a.executionSummary)&&o.add("executionSummary"),o}e.diff=n;function i(s,a){if(s===a)return !0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return !1;let o=Array.isArray(s),c=Array.isArray(a);if(o!==c)return !1;if(o&&c){if(s.length!==a.length)return !1;for(let l=0;l<s.length;l++)if(!i(s[l],a[l]))return !1}if(Qn.objectLiteral(s)&&Qn.objectLiteral(a)){let l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length||(l.sort(),u.sort(),!i(l,u)))return !1;for(let f=0;f<l.length;f++){let h=l[f];if(!i(s[h],a[h]))return !1}}return !0}})(nh||(Xt.NotebookCell=nh={}));var hL;(function(e){function t(n,i,s,a){return {uri:n,notebookType:i,version:s,cells:a}}e.create=t;function r(n){let i=n;return Qn.objectLiteral(i)&&Qn.string(i.uri)&&fc.integer.is(i.version)&&Qn.typedArray(i.cells,nh.is)}e.is=r;})(hL||(Xt.NotebookDocument=hL={}));var Po;(function(e){e.method="notebookDocument/sync",e.messageDirection=mi.MessageDirection.clientToServer,e.type=new mi.RegistrationType(e.method);})(Po||(Xt.NotebookDocumentSyncRegistrationType=Po={}));var pL;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=mi.MessageDirection.clientToServer,e.type=new mi.ProtocolNotificationType(e.method),e.registrationMethod=Po.method;})(pL||(Xt.DidOpenNotebookDocumentNotification=pL={}));var gL;(function(e){function t(n){let i=n;return Qn.objectLiteral(i)&&fc.uinteger.is(i.start)&&fc.uinteger.is(i.deleteCount)&&(i.cells===void 0||Qn.typedArray(i.cells,nh.is))}e.is=t;function r(n,i,s){let a={start:n,deleteCount:i};return s!==void 0&&(a.cells=s),a}e.create=r;})(gL||(Xt.NotebookCellArrayChange=gL={}));var mL;(function(e){e.method="notebookDocument/didChange",e.messageDirection=mi.MessageDirection.clientToServer,e.type=new mi.ProtocolNotificationType(e.method),e.registrationMethod=Po.method;})(mL||(Xt.DidChangeNotebookDocumentNotification=mL={}));var yL;(function(e){e.method="notebookDocument/didSave",e.messageDirection=mi.MessageDirection.clientToServer,e.type=new mi.ProtocolNotificationType(e.method),e.registrationMethod=Po.method;})(yL||(Xt.DidSaveNotebookDocumentNotification=yL={}));var _L;(function(e){e.method="notebookDocument/didClose",e.messageDirection=mi.MessageDirection.clientToServer,e.type=new mi.ProtocolNotificationType(e.method),e.registrationMethod=Po.method;})(_L||(Xt.DidCloseNotebookDocumentNotification=_L={}));});var EL=P(ih=>{Object.defineProperty(ih,"__esModule",{value:!0});ih.InlineCompletionRequest=void 0;var bL=Kt(),SL;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=bL.MessageDirection.clientToServer,e.type=new bL.ProtocolRequestType(e.method);})(SL||(ih.InlineCompletionRequest=SL={}));});var BF=P(O=>{Object.defineProperty(O,"__esModule",{value:!0});O.WorkspaceSymbolRequest=O.CodeActionResolveRequest=O.CodeActionRequest=O.DocumentSymbolRequest=O.DocumentHighlightRequest=O.ReferencesRequest=O.DefinitionRequest=O.SignatureHelpRequest=O.SignatureHelpTriggerKind=O.HoverRequest=O.CompletionResolveRequest=O.CompletionRequest=O.CompletionTriggerKind=O.PublishDiagnosticsNotification=O.WatchKind=O.RelativePattern=O.FileChangeType=O.DidChangeWatchedFilesNotification=O.WillSaveTextDocumentWaitUntilRequest=O.WillSaveTextDocumentNotification=O.TextDocumentSaveReason=O.DidSaveTextDocumentNotification=O.DidCloseTextDocumentNotification=O.DidChangeTextDocumentNotification=O.TextDocumentContentChangeEvent=O.DidOpenTextDocumentNotification=O.TextDocumentSyncKind=O.TelemetryEventNotification=O.LogMessageNotification=O.ShowMessageRequest=O.ShowMessageNotification=O.MessageType=O.DidChangeConfigurationNotification=O.ExitNotification=O.ShutdownRequest=O.InitializedNotification=O.InitializeErrorCodes=O.InitializeRequest=O.WorkDoneProgressOptions=O.TextDocumentRegistrationOptions=O.StaticRegistrationOptions=O.PositionEncodingKind=O.FailureHandlingKind=O.ResourceOperationKind=O.UnregistrationRequest=O.RegistrationRequest=O.DocumentSelector=O.NotebookCellTextDocumentFilter=O.NotebookDocumentFilter=O.TextDocumentFilter=void 0;O.MonikerRequest=O.MonikerKind=O.UniquenessLevel=O.WillDeleteFilesRequest=O.DidDeleteFilesNotification=O.WillRenameFilesRequest=O.DidRenameFilesNotification=O.WillCreateFilesRequest=O.DidCreateFilesNotification=O.FileOperationPatternKind=O.LinkedEditingRangeRequest=O.ShowDocumentRequest=O.SemanticTokensRegistrationType=O.SemanticTokensRefreshRequest=O.SemanticTokensRangeRequest=O.SemanticTokensDeltaRequest=O.SemanticTokensRequest=O.TokenFormat=O.CallHierarchyPrepareRequest=O.CallHierarchyOutgoingCallsRequest=O.CallHierarchyIncomingCallsRequest=O.WorkDoneProgressCancelNotification=O.WorkDoneProgressCreateRequest=O.WorkDoneProgress=O.SelectionRangeRequest=O.DeclarationRequest=O.FoldingRangeRefreshRequest=O.FoldingRangeRequest=O.ColorPresentationRequest=O.DocumentColorRequest=O.ConfigurationRequest=O.DidChangeWorkspaceFoldersNotification=O.WorkspaceFoldersRequest=O.TypeDefinitionRequest=O.ImplementationRequest=O.ApplyWorkspaceEditRequest=O.ExecuteCommandRequest=O.PrepareRenameRequest=O.RenameRequest=O.PrepareSupportDefaultBehavior=O.DocumentOnTypeFormattingRequest=O.DocumentRangesFormattingRequest=O.DocumentRangeFormattingRequest=O.DocumentFormattingRequest=O.DocumentLinkResolveRequest=O.DocumentLinkRequest=O.CodeLensRefreshRequest=O.CodeLensResolveRequest=O.CodeLensRequest=O.WorkspaceSymbolResolveRequest=void 0;O.InlineCompletionRequest=O.DidCloseNotebookDocumentNotification=O.DidSaveNotebookDocumentNotification=O.DidChangeNotebookDocumentNotification=O.NotebookCellArrayChange=O.DidOpenNotebookDocumentNotification=O.NotebookDocumentSyncRegistrationType=O.NotebookDocument=O.NotebookCell=O.ExecutionSummary=O.NotebookCellKind=O.DiagnosticRefreshRequest=O.WorkspaceDiagnosticRequest=O.DocumentDiagnosticRequest=O.DocumentDiagnosticReportKind=O.DiagnosticServerCancellationData=O.InlayHintRefreshRequest=O.InlayHintResolveRequest=O.InlayHintRequest=O.InlineValueRefreshRequest=O.InlineValueRequest=O.TypeHierarchySupertypesRequest=O.TypeHierarchySubtypesRequest=O.TypeHierarchyPrepareRequest=void 0;var ve=Kt(),wL=Vd(),yr=Hd(),vX=GO();Object.defineProperty(O,"ImplementationRequest",{enumerable:!0,get:function(){return vX.ImplementationRequest}});var bX=ZO();Object.defineProperty(O,"TypeDefinitionRequest",{enumerable:!0,get:function(){return bX.TypeDefinitionRequest}});var NF=eB();Object.defineProperty(O,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return NF.WorkspaceFoldersRequest}});Object.defineProperty(O,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return NF.DidChangeWorkspaceFoldersNotification}});var SX=nB();Object.defineProperty(O,"ConfigurationRequest",{enumerable:!0,get:function(){return SX.ConfigurationRequest}});var DF=aB();Object.defineProperty(O,"DocumentColorRequest",{enumerable:!0,get:function(){return DF.DocumentColorRequest}});Object.defineProperty(O,"ColorPresentationRequest",{enumerable:!0,get:function(){return DF.ColorPresentationRequest}});var kF=cB();Object.defineProperty(O,"FoldingRangeRequest",{enumerable:!0,get:function(){return kF.FoldingRangeRequest}});Object.defineProperty(O,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return kF.FoldingRangeRefreshRequest}});var EX=dB();Object.defineProperty(O,"DeclarationRequest",{enumerable:!0,get:function(){return EX.DeclarationRequest}});var wX=gB();Object.defineProperty(O,"SelectionRangeRequest",{enumerable:!0,get:function(){return wX.SelectionRangeRequest}});var Kv=vB();Object.defineProperty(O,"WorkDoneProgress",{enumerable:!0,get:function(){return Kv.WorkDoneProgress}});Object.defineProperty(O,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Kv.WorkDoneProgressCreateRequest}});Object.defineProperty(O,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Kv.WorkDoneProgressCancelNotification}});var zv=wB();Object.defineProperty(O,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return zv.CallHierarchyIncomingCallsRequest}});Object.defineProperty(O,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return zv.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(O,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return zv.CallHierarchyPrepareRequest}});var No=IB();Object.defineProperty(O,"TokenFormat",{enumerable:!0,get:function(){return No.TokenFormat}});Object.defineProperty(O,"SemanticTokensRequest",{enumerable:!0,get:function(){return No.SemanticTokensRequest}});Object.defineProperty(O,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return No.SemanticTokensDeltaRequest}});Object.defineProperty(O,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return No.SemanticTokensRangeRequest}});Object.defineProperty(O,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return No.SemanticTokensRefreshRequest}});Object.defineProperty(O,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return No.SemanticTokensRegistrationType}});var CX=DB();Object.defineProperty(O,"ShowDocumentRequest",{enumerable:!0,get:function(){return CX.ShowDocumentRequest}});var xX=BB();Object.defineProperty(O,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return xX.LinkedEditingRangeRequest}});var da=VB();Object.defineProperty(O,"FileOperationPatternKind",{enumerable:!0,get:function(){return da.FileOperationPatternKind}});Object.defineProperty(O,"DidCreateFilesNotification",{enumerable:!0,get:function(){return da.DidCreateFilesNotification}});Object.defineProperty(O,"WillCreateFilesRequest",{enumerable:!0,get:function(){return da.WillCreateFilesRequest}});Object.defineProperty(O,"DidRenameFilesNotification",{enumerable:!0,get:function(){return da.DidRenameFilesNotification}});Object.defineProperty(O,"WillRenameFilesRequest",{enumerable:!0,get:function(){return da.WillRenameFilesRequest}});Object.defineProperty(O,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return da.DidDeleteFilesNotification}});Object.defineProperty(O,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return da.WillDeleteFilesRequest}});var Gv=GB();Object.defineProperty(O,"UniquenessLevel",{enumerable:!0,get:function(){return Gv.UniquenessLevel}});Object.defineProperty(O,"MonikerKind",{enumerable:!0,get:function(){return Gv.MonikerKind}});Object.defineProperty(O,"MonikerRequest",{enumerable:!0,get:function(){return Gv.MonikerRequest}});var Yv=XB();Object.defineProperty(O,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Yv.TypeHierarchyPrepareRequest}});Object.defineProperty(O,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Yv.TypeHierarchySubtypesRequest}});Object.defineProperty(O,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Yv.TypeHierarchySupertypesRequest}});var OF=tL();Object.defineProperty(O,"InlineValueRequest",{enumerable:!0,get:function(){return OF.InlineValueRequest}});Object.defineProperty(O,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return OF.InlineValueRefreshRequest}});var Qv=sL();Object.defineProperty(O,"InlayHintRequest",{enumerable:!0,get:function(){return Qv.InlayHintRequest}});Object.defineProperty(O,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Qv.InlayHintResolveRequest}});Object.defineProperty(O,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Qv.InlayHintRefreshRequest}});var dc=dL();Object.defineProperty(O,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return dc.DiagnosticServerCancellationData}});Object.defineProperty(O,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return dc.DocumentDiagnosticReportKind}});Object.defineProperty(O,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return dc.DocumentDiagnosticRequest}});Object.defineProperty(O,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return dc.WorkspaceDiagnosticRequest}});Object.defineProperty(O,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return dc.DiagnosticRefreshRequest}});var yi=vL();Object.defineProperty(O,"NotebookCellKind",{enumerable:!0,get:function(){return yi.NotebookCellKind}});Object.defineProperty(O,"ExecutionSummary",{enumerable:!0,get:function(){return yi.ExecutionSummary}});Object.defineProperty(O,"NotebookCell",{enumerable:!0,get:function(){return yi.NotebookCell}});Object.defineProperty(O,"NotebookDocument",{enumerable:!0,get:function(){return yi.NotebookDocument}});Object.defineProperty(O,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return yi.NotebookDocumentSyncRegistrationType}});Object.defineProperty(O,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return yi.DidOpenNotebookDocumentNotification}});Object.defineProperty(O,"NotebookCellArrayChange",{enumerable:!0,get:function(){return yi.NotebookCellArrayChange}});Object.defineProperty(O,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return yi.DidChangeNotebookDocumentNotification}});Object.defineProperty(O,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return yi.DidSaveNotebookDocumentNotification}});Object.defineProperty(O,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return yi.DidCloseNotebookDocumentNotification}});var TX=EL();Object.defineProperty(O,"InlineCompletionRequest",{enumerable:!0,get:function(){return TX.InlineCompletionRequest}});var jv;(function(e){function t(r){let n=r;return yr.string(n)||yr.string(n.language)||yr.string(n.scheme)||yr.string(n.pattern)}e.is=t;})(jv||(O.TextDocumentFilter=jv={}));var Vv;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(yr.string(n.notebookType)||yr.string(n.scheme)||yr.string(n.pattern))}e.is=t;})(Vv||(O.NotebookDocumentFilter=Vv={}));var Hv;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(yr.string(n.notebook)||Vv.is(n.notebook))&&(n.language===void 0||yr.string(n.language))}e.is=t;})(Hv||(O.NotebookCellTextDocumentFilter=Hv={}));var Wv;(function(e){function t(r){if(!Array.isArray(r))return !1;for(let n of r)if(!yr.string(n)&&!jv.is(n)&&!Hv.is(n))return !1;return !0}e.is=t;})(Wv||(O.DocumentSelector=Wv={}));var CL;(function(e){e.method="client/registerCapability",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(CL||(O.RegistrationRequest=CL={}));var xL;(function(e){e.method="client/unregisterCapability",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(xL||(O.UnregistrationRequest=xL={}));var TL;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete";})(TL||(O.ResourceOperationKind=TL={}));var AL;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo";})(AL||(O.FailureHandlingKind=AL={}));var RL;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32";})(RL||(O.PositionEncodingKind=RL={}));var IL;(function(e){function t(r){let n=r;return n&&yr.string(n.id)&&n.id.length>0}e.hasId=t;})(IL||(O.StaticRegistrationOptions=IL={}));var PL;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||Wv.is(n.documentSelector))}e.is=t;})(PL||(O.TextDocumentRegistrationOptions=PL={}));var NL;(function(e){function t(n){let i=n;return yr.objectLiteral(i)&&(i.workDoneProgress===void 0||yr.boolean(i.workDoneProgress))}e.is=t;function r(n){let i=n;return i&&yr.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=r;})(NL||(O.WorkDoneProgressOptions=NL={}));var DL;(function(e){e.method="initialize",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(DL||(O.InitializeRequest=DL={}));var kL;(function(e){e.unknownProtocolVersion=1;})(kL||(O.InitializeErrorCodes=kL={}));var OL;(function(e){e.method="initialized",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(OL||(O.InitializedNotification=OL={}));var BL;(function(e){e.method="shutdown",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType0(e.method);})(BL||(O.ShutdownRequest=BL={}));var LL;(function(e){e.method="exit",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType0(e.method);})(LL||(O.ExitNotification=LL={}));var FL;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(FL||(O.DidChangeConfigurationNotification=FL={}));var ML;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5;})(ML||(O.MessageType=ML={}));var qL;(function(e){e.method="window/showMessage",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(qL||(O.ShowMessageNotification=qL={}));var UL;(function(e){e.method="window/showMessageRequest",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType(e.method);})(UL||(O.ShowMessageRequest=UL={}));var $L;(function(e){e.method="window/logMessage",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})($L||(O.LogMessageNotification=$L={}));var jL;(function(e){e.method="telemetry/event",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(jL||(O.TelemetryEventNotification=jL={}));var VL;(function(e){e.None=0,e.Full=1,e.Incremental=2;})(VL||(O.TextDocumentSyncKind=VL={}));var HL;(function(e){e.method="textDocument/didOpen",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(HL||(O.DidOpenTextDocumentNotification=HL={}));var WL;(function(e){function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=r;})(WL||(O.TextDocumentContentChangeEvent=WL={}));var KL;(function(e){e.method="textDocument/didChange",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(KL||(O.DidChangeTextDocumentNotification=KL={}));var zL;(function(e){e.method="textDocument/didClose",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(zL||(O.DidCloseTextDocumentNotification=zL={}));var GL;(function(e){e.method="textDocument/didSave",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(GL||(O.DidSaveTextDocumentNotification=GL={}));var YL;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3;})(YL||(O.TextDocumentSaveReason=YL={}));var QL;(function(e){e.method="textDocument/willSave",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(QL||(O.WillSaveTextDocumentNotification=QL={}));var ZL;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(ZL||(O.WillSaveTextDocumentWaitUntilRequest=ZL={}));var XL;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolNotificationType(e.method);})(XL||(O.DidChangeWatchedFilesNotification=XL={}));var JL;(function(e){e.Created=1,e.Changed=2,e.Deleted=3;})(JL||(O.FileChangeType=JL={}));var eF;(function(e){function t(r){let n=r;return yr.objectLiteral(n)&&(wL.URI.is(n.baseUri)||wL.WorkspaceFolder.is(n.baseUri))&&yr.string(n.pattern)}e.is=t;})(eF||(O.RelativePattern=eF={}));var tF;(function(e){e.Create=1,e.Change=2,e.Delete=4;})(tF||(O.WatchKind=tF={}));var rF;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolNotificationType(e.method);})(rF||(O.PublishDiagnosticsNotification=rF={}));var nF;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3;})(nF||(O.CompletionTriggerKind=nF={}));var iF;(function(e){e.method="textDocument/completion",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(iF||(O.CompletionRequest=iF={}));var sF;(function(e){e.method="completionItem/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(sF||(O.CompletionResolveRequest=sF={}));var aF;(function(e){e.method="textDocument/hover",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(aF||(O.HoverRequest=aF={}));var oF;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3;})(oF||(O.SignatureHelpTriggerKind=oF={}));var uF;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(uF||(O.SignatureHelpRequest=uF={}));var cF;(function(e){e.method="textDocument/definition",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(cF||(O.DefinitionRequest=cF={}));var lF;(function(e){e.method="textDocument/references",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(lF||(O.ReferencesRequest=lF={}));var fF;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(fF||(O.DocumentHighlightRequest=fF={}));var dF;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(dF||(O.DocumentSymbolRequest=dF={}));var hF;(function(e){e.method="textDocument/codeAction",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(hF||(O.CodeActionRequest=hF={}));var pF;(function(e){e.method="codeAction/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(pF||(O.CodeActionResolveRequest=pF={}));var gF;(function(e){e.method="workspace/symbol",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(gF||(O.WorkspaceSymbolRequest=gF={}));var mF;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(mF||(O.WorkspaceSymbolResolveRequest=mF={}));var yF;(function(e){e.method="textDocument/codeLens",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(yF||(O.CodeLensRequest=yF={}));var _F;(function(e){e.method="codeLens/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(_F||(O.CodeLensResolveRequest=_F={}));var vF;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType0(e.method);})(vF||(O.CodeLensRefreshRequest=vF={}));var bF;(function(e){e.method="textDocument/documentLink",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(bF||(O.DocumentLinkRequest=bF={}));var SF;(function(e){e.method="documentLink/resolve",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(SF||(O.DocumentLinkResolveRequest=SF={}));var EF;(function(e){e.method="textDocument/formatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(EF||(O.DocumentFormattingRequest=EF={}));var wF;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(wF||(O.DocumentRangeFormattingRequest=wF={}));var CF;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(CF||(O.DocumentRangesFormattingRequest=CF={}));var xF;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(xF||(O.DocumentOnTypeFormattingRequest=xF={}));var TF;(function(e){e.Identifier=1;})(TF||(O.PrepareSupportDefaultBehavior=TF={}));var AF;(function(e){e.method="textDocument/rename",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(AF||(O.RenameRequest=AF={}));var RF;(function(e){e.method="textDocument/prepareRename",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(RF||(O.PrepareRenameRequest=RF={}));var IF;(function(e){e.method="workspace/executeCommand",e.messageDirection=ve.MessageDirection.clientToServer,e.type=new ve.ProtocolRequestType(e.method);})(IF||(O.ExecuteCommandRequest=IF={}));var PF;(function(e){e.method="workspace/applyEdit",e.messageDirection=ve.MessageDirection.serverToClient,e.type=new ve.ProtocolRequestType("workspace/applyEdit");})(PF||(O.ApplyWorkspaceEditRequest=PF={}));});var FF=P(sh=>{Object.defineProperty(sh,"__esModule",{value:!0});sh.createProtocolConnection=void 0;var LF=fa();function AX(e,t,r,n){return LF.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, LF.createMessageConnection)(e,t,r,n)}sh.createProtocolConnection=AX;});var qF=P(nn=>{var RX=nn&&nn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),ah=nn&&nn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&RX(t,e,r);};Object.defineProperty(nn,"__esModule",{value:!0});nn.LSPErrorCodes=nn.createProtocolConnection=void 0;ah(fa(),nn);ah(Vd(),nn);ah(Kt(),nn);ah(BF(),nn);var IX=FF();Object.defineProperty(nn,"createProtocolConnection",{enumerable:!0,get:function(){return IX.createProtocolConnection}});var MF;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800;})(MF||(nn.LSPErrorCodes=MF={}));});var nr=P(_i=>{var PX=_i&&_i.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),UF=_i&&_i.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&PX(t,e,r);};Object.defineProperty(_i,"__esModule",{value:!0});_i.createProtocolConnection=void 0;var NX=Ov();UF(Ov(),_i);UF(qF(),_i);function DX(e,t,r,n){return (0, NX.createMessageConnection)(e,t,r,n)}_i.createProtocolConnection=DX;});var Zv=P(kn=>{Object.defineProperty(kn,"__esModule",{value:!0});kn.generateUuid=kn.parse=kn.isUUID=kn.v4=kn.empty=void 0;var hc=class{constructor(t){this._value=t;}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},pc=class e extends hc{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""));}};pc._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];pc._timeHighBits=["8","9","a","b"];kn.empty=new hc("00000000-0000-0000-0000-000000000000");function $F(){return new pc}kn.v4=$F;var kX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function jF(e){return kX.test(e)}kn.isUUID=jF;function OX(e){if(!jF(e))throw new Error("invalid uuid");return new hc(e)}kn.parse=OX;function BX(){return $F().asHex()}kn.generateUuid=BX;});var VF=P(xs=>{Object.defineProperty(xs,"__esModule",{value:!0});xs.attachPartialResult=xs.ProgressFeature=xs.attachWorkDone=void 0;var Cs=nr(),LX=Zv(),ha=class e{constructor(t,r){this._connection=t,this._token=r,e.Instances.set(this._token,this);}begin(t,r,n,i){let s={kind:"begin",title:t,percentage:r,message:n,cancellable:i};this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,s);}report(t,r){let n={kind:"report"};typeof t=="number"?(n.percentage=t,r!==void 0&&(n.message=r)):n.message=t,this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,n);}done(){e.Instances.delete(this._token),this._connection.sendProgress(Cs.WorkDoneProgress.type,this._token,{kind:"end"});}};ha.Instances=new Map;var oh=class extends ha{constructor(t,r){super(t,r),this._source=new Cs.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose(),super.done();}cancel(){this._source.cancel();}},gc=class{constructor(){}begin(){}report(){}done(){}},uh=class extends gc{constructor(){super(),this._source=new Cs.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose();}cancel(){this._source.cancel();}};function FX(e,t){if(t===void 0||t.workDoneToken===void 0)return new gc;let r=t.workDoneToken;return delete t.workDoneToken,new ha(e,r)}xs.attachWorkDone=FX;var MX=e=>class extends e{constructor(){super(),this._progressSupported=!1;}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Cs.WorkDoneProgressCancelNotification.type,r=>{let n=ha.Instances.get(r.token);(n instanceof oh||n instanceof uh)&&n.cancel();}));}attachWorkDoneProgress(t){return t===void 0?new gc:new ha(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0, LX.generateUuid)();return this.connection.sendRequest(Cs.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new oh(this.connection,t))}else return Promise.resolve(new uh)}};xs.ProgressFeature=MX;var Xv;(function(e){e.type=new Cs.ProgressType;})(Xv||(Xv={}));var Jv=class{constructor(t,r){this._connection=t,this._token=r;}report(t){this._connection.sendProgress(Xv.type,this._token,t);}};function qX(e,t){if(t===void 0||t.partialResultToken===void 0)return;let r=t.partialResultToken;return delete t.partialResultToken,new Jv(e,r)}xs.attachPartialResult=qX;});var HF=P(ch=>{Object.defineProperty(ch,"__esModule",{value:!0});ch.ConfigurationFeature=void 0;var UX=nr(),$X=bd(),jX=e=>class extends e{getConfiguration(t){return t?$X.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let r={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(UX.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(t)?n:n[0]:Array.isArray(t)?[]:null)}};ch.ConfigurationFeature=jX;});var WF=P(fh=>{Object.defineProperty(fh,"__esModule",{value:!0});fh.WorkspaceFoldersFeature=void 0;var lh=nr(),VX=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1;}initialize(t){super.initialize(t);let r=t.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new lh.Emitter,this.connection.onNotification(lh.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event);}));}fillServerCapabilities(t){super.fillServerCapabilities(t);let r=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string";}getWorkspaceFolders(){return this.connection.sendRequest(lh.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return !this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(lh.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};fh.WorkspaceFoldersFeature=VX;});var KF=P(dh=>{Object.defineProperty(dh,"__esModule",{value:!0});dh.CallHierarchyFeature=void 0;var eb=nr(),HX=e=>class extends e{get callHierarchy(){return {onPrepare:t=>this.connection.onRequest(eb.CallHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onIncomingCalls:t=>{let r=eb.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onOutgoingCalls:t=>{let r=eb.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};dh.CallHierarchyFeature=HX;});var rb=P(Ts=>{Object.defineProperty(Ts,"__esModule",{value:!0});Ts.SemanticTokensBuilder=Ts.SemanticTokensDiff=Ts.SemanticTokensFeature=void 0;var hh=nr(),WX=e=>class extends e{get semanticTokens(){return {refresh:()=>this.connection.sendRequest(hh.SemanticTokensRefreshRequest.type),on:t=>{let r=hh.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onDelta:t=>{let r=hh.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onRange:t=>{let r=hh.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Ts.SemanticTokensFeature=WX;var ph=class{constructor(t,r){this.originalSequence=t,this.modifiedSequence=r;}computeDiff(){let t=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<t&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<t){let i=t-1,s=r-1;for(;i>=n&&s>=n&&this.originalSequence[i]===this.modifiedSequence[s];)i--,s--;(i<n||s<n)&&(i++,s++);let a=i-n+1,o=this.modifiedSequence.slice(n,s+1);return o.length===1&&o[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:o}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<t?[{start:n,deleteCount:t-n}]:[]}};Ts.SemanticTokensDiff=ph;var tb=class{constructor(){this._prevData=void 0,this.initialize();}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0;}push(t,r,n,i,s){let a=t,o=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=s,this._prevLine=t,this._prevChar=r;}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize();}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new ph(this._prevData,this._data).computeDiff()}:this.build()}};Ts.SemanticTokensBuilder=tb;});var zF=P(gh=>{Object.defineProperty(gh,"__esModule",{value:!0});gh.ShowDocumentFeature=void 0;var KX=nr(),zX=e=>class extends e{showDocument(t){return this.connection.sendRequest(KX.ShowDocumentRequest.type,t)}};gh.ShowDocumentFeature=zX;});var GF=P(mh=>{Object.defineProperty(mh,"__esModule",{value:!0});mh.FileOperationsFeature=void 0;var Do=nr(),GX=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(Do.DidCreateFilesNotification.type,r=>{t(r);})}onDidRenameFiles(t){return this.connection.onNotification(Do.DidRenameFilesNotification.type,r=>{t(r);})}onDidDeleteFiles(t){return this.connection.onNotification(Do.DidDeleteFilesNotification.type,r=>{t(r);})}onWillCreateFiles(t){return this.connection.onRequest(Do.WillCreateFilesRequest.type,(r,n)=>t(r,n))}onWillRenameFiles(t){return this.connection.onRequest(Do.WillRenameFilesRequest.type,(r,n)=>t(r,n))}onWillDeleteFiles(t){return this.connection.onRequest(Do.WillDeleteFilesRequest.type,(r,n)=>t(r,n))}};mh.FileOperationsFeature=GX;});var YF=P(yh=>{Object.defineProperty(yh,"__esModule",{value:!0});yh.LinkedEditingRangeFeature=void 0;var YX=nr(),QX=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(YX.LinkedEditingRangeRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0))}};yh.LinkedEditingRangeFeature=QX;});var QF=P(_h=>{Object.defineProperty(_h,"__esModule",{value:!0});_h.TypeHierarchyFeature=void 0;var nb=nr(),ZX=e=>class extends e{get typeHierarchy(){return {onPrepare:t=>this.connection.onRequest(nb.TypeHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onSupertypes:t=>{let r=nb.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onSubtypes:t=>{let r=nb.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};_h.TypeHierarchyFeature=ZX;});var XF=P(vh=>{Object.defineProperty(vh,"__esModule",{value:!0});vh.InlineValueFeature=void 0;var ZF=nr(),XX=e=>class extends e{get inlineValue(){return {refresh:()=>this.connection.sendRequest(ZF.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(ZF.InlineValueRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};vh.InlineValueFeature=XX;});var eM=P(bh=>{Object.defineProperty(bh,"__esModule",{value:!0});bh.FoldingRangeFeature=void 0;var JF=nr(),JX=e=>class extends e{get foldingRange(){return {refresh:()=>this.connection.sendRequest(JF.FoldingRangeRefreshRequest.type),on:t=>{let r=JF.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};bh.FoldingRangeFeature=JX;});var tM=P(Sh=>{Object.defineProperty(Sh,"__esModule",{value:!0});Sh.InlayHintFeature=void 0;var ib=nr(),eJ=e=>class extends e{get inlayHint(){return {refresh:()=>this.connection.sendRequest(ib.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(ib.InlayHintRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r))),resolve:t=>this.connection.onRequest(ib.InlayHintResolveRequest.type,(r,n)=>t(r,n))}}};Sh.InlayHintFeature=eJ;});var rM=P(Eh=>{Object.defineProperty(Eh,"__esModule",{value:!0});Eh.DiagnosticFeature=void 0;var mc=nr(),tJ=e=>class extends e{get diagnostics(){return {refresh:()=>this.connection.sendRequest(mc.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(mc.DocumentDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(mc.DocumentDiagnosticRequest.partialResult,r))),onWorkspace:t=>this.connection.onRequest(mc.WorkspaceDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(mc.WorkspaceDiagnosticRequest.partialResult,r)))}}};Eh.DiagnosticFeature=tJ;});var ab=P(wh=>{Object.defineProperty(wh,"__esModule",{value:!0});wh.TextDocuments=void 0;var pa=nr(),sb=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new pa.Emitter,this._onDidOpen=new pa.Emitter,this._onDidClose=new pa.Emitter,this._onDidSave=new pa.Emitter,this._onWillSave=new pa.Emitter;}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t;}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=pa.TextDocumentSyncKind.Incremental;let r=[];return r.push(t.onDidOpenTextDocument(n=>{let i=n.textDocument,s=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,s);let a=Object.freeze({document:s});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a);})),r.push(t.onDidChangeTextDocument(n=>{let i=n.textDocument,s=n.contentChanges;if(s.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let o=this._syncedDocuments.get(i.uri);o!==void 0&&(o=this._configuration.update(o,s,a),this._syncedDocuments.set(i.uri,o),this._onDidChangeContent.fire(Object.freeze({document:o})));})),r.push(t.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})));})),r.push(t.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}));})),r.push(t.onWillSaveTextDocumentWaitUntil((n,i)=>{let s=this._syncedDocuments.get(n.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:n.reason}),i):[]})),r.push(t.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}));})),pa.Disposable.create(()=>{r.forEach(n=>n.dispose());})}};wh.TextDocuments=sb;});var ub=P(ko=>{Object.defineProperty(ko,"__esModule",{value:!0});ko.NotebookDocuments=ko.NotebookSyncFeature=void 0;var On=nr(),nM=ab(),rJ=e=>class extends e{get synchronization(){return {onDidOpenNotebookDocument:t=>this.connection.onNotification(On.DidOpenNotebookDocumentNotification.type,r=>{t(r);}),onDidChangeNotebookDocument:t=>this.connection.onNotification(On.DidChangeNotebookDocumentNotification.type,r=>{t(r);}),onDidSaveNotebookDocument:t=>this.connection.onNotification(On.DidSaveNotebookDocumentNotification.type,r=>{t(r);}),onDidCloseNotebookDocument:t=>this.connection.onNotification(On.DidCloseNotebookDocumentNotification.type,r=>{t(r);})}}};ko.NotebookSyncFeature=rJ;var Ch=class e{onDidOpenTextDocument(t){return this.openHandler=t,On.Disposable.create(()=>{this.openHandler=void 0;})}openTextDocument(t){this.openHandler&&this.openHandler(t);}onDidChangeTextDocument(t){return this.changeHandler=t,On.Disposable.create(()=>{this.changeHandler=t;})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t);}onDidCloseTextDocument(t){return this.closeHandler=t,On.Disposable.create(()=>{this.closeHandler=void 0;})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t);}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Ch.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var ob=class{constructor(t){t instanceof nM.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new nM.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new On.Emitter,this._onDidChange=new On.Emitter,this._onDidSave=new On.Emitter,this._onDidClose=new On.Emitter;}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let r=this.notebookCellMap.get(t);return r&&r[0]}findNotebookDocumentForCell(t){let r=typeof t=="string"?t:t.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let r=new Ch,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let s of i.cellTextDocuments)r.openTextDocument({textDocument:s});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument);})),n.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s===void 0)return;s.version=i.notebookDocument.version;let a=s.metadata,o=!1,c=i.change;c.metadata!==void 0&&(o=!0,s.metadata=c.metadata);let l=[],u=[],f=[],h=[];if(c.cells!==void 0){let w=c.cells;if(w.structure!==void 0){let y=w.structure.array;if(s.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),w.structure.didOpen!==void 0)for(let b of w.structure.didOpen)r.openTextDocument({textDocument:b}),l.push(b.uri);if(w.structure.didClose)for(let b of w.structure.didClose)r.closeTextDocument({textDocument:b}),u.push(b.uri);}if(w.data!==void 0){let y=new Map(w.data.map(b=>[b.document,b]));for(let b=0;b<=s.cells.length;b++){let N=y.get(s.cells[b].document);if(N!==void 0){let B=s.cells.splice(b,1,N);if(f.push({old:B[0],new:N}),y.delete(N.document),y.size===0)break}}}if(w.textContent!==void 0)for(let y of w.textContent)r.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),h.push(y.document.uri);}this.updateCellMap(s);let p={notebookDocument:s};o&&(p.metadata={old:a,new:s.metadata});let m=[];for(let w of l)m.push(this.getNotebookCell(w));let v=[];for(let w of u)v.push(this.getNotebookCell(w));let E=[];for(let w of h)E.push(this.getNotebookCell(w));(m.length>0||v.length>0||f.length>0||E.length>0)&&(p.cells={added:m,removed:v,changed:{data:f,textContent:E}}),(p.metadata!==void 0||p.cells!==void 0)&&this._onDidChange.fire(p);})),n.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s);})),n.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let s=this.notebookDocuments.get(i.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of s.cells)this.notebookCellMap.delete(a.document);}})),On.Disposable.create(()=>{n.forEach(i=>i.dispose());})}updateCellMap(t){for(let r of t.cells)this.notebookCellMap.set(r.document,[r,t]);}};ko.NotebookDocuments=ob;});var iM=P(xh=>{Object.defineProperty(xh,"__esModule",{value:!0});xh.MonikerFeature=void 0;var nJ=nr(),iJ=e=>class extends e{get moniker(){return {on:t=>{let r=nJ.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};xh.MonikerFeature=iJ;});var pb=P(vt=>{Object.defineProperty(vt,"__esModule",{value:!0});vt.createConnection=vt.combineFeatures=vt.combineNotebooksFeatures=vt.combineLanguagesFeatures=vt.combineWorkspaceFeatures=vt.combineWindowFeatures=vt.combineClientFeatures=vt.combineTracerFeatures=vt.combineTelemetryFeatures=vt.combineConsoleFeatures=vt._NotebooksImpl=vt._LanguagesImpl=vt.BulkUnregistration=vt.BulkRegistration=vt.ErrorMessageTracker=void 0;var we=nr(),Bn=bd(),lb=Zv(),Ye=VF(),sJ=HF(),aJ=WF(),oJ=KF(),uJ=rb(),cJ=zF(),lJ=GF(),fJ=YF(),dJ=QF(),hJ=XF(),pJ=eM(),gJ=tM(),mJ=rM(),yJ=ub(),_J=iM();function cb(e){if(e!==null)return e}var fb=class{constructor(){this._messages=Object.create(null);}add(t){let r=this._messages[t];r||(r=0),r++,this._messages[t]=r;}sendErrors(t){Object.keys(this._messages).forEach(r=>{t.window.showErrorMessage(r);});}};vt.ErrorMessageTracker=fb;var Th=class{constructor(){}rawAttach(t){this._rawConnection=t;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(we.MessageType.Error,t);}warn(t){this.send(we.MessageType.Warning,t);}info(t){this.send(we.MessageType.Info,t);}log(t){this.send(we.MessageType.Log,t);}debug(t){this.send(we.MessageType.Debug,t);}send(t,r){this._rawConnection&&this._rawConnection.sendNotification(we.LogMessageNotification.type,{type:t,message:r}).catch(()=>{(0, we.RAL)().console.error("Sending log message failed");});}},db=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...r){let n={type:we.MessageType.Error,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(cb)}showWarningMessage(t,...r){let n={type:we.MessageType.Warning,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(cb)}showInformationMessage(t,...r){let n={type:we.MessageType.Info,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(cb)}},sM=(0, cJ.ShowDocumentFeature)((0, Ye.ProgressFeature)(db)),aM;(function(e){function t(){return new Ah}e.create=t;})(aM||(vt.BulkRegistration=aM={}));var Ah=class{constructor(){this._registrations=[],this._registered=new Set;}add(t,r){let n=Bn.string(t)?t:t.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=lb.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n);}asRegistrationParams(){return {registrations:this._registrations}}},oM;(function(e){function t(){return new yc(void 0,[])}e.create=t;})(oM||(vt.BulkUnregistration=oM={}));var yc=class{constructor(t,r){this._connection=t,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n);});}get isAttached(){return !!this._connection}attach(t){this._connection=t;}add(t){this._unregistrations.set(t.method,t);}dispose(){let t=[];for(let n of this._unregistrations.values())t.push(n);let r={unregisterations:t};this._connection.sendRequest(we.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.");});}disposeSingle(t){let r=Bn.string(t)?t:t.method,n=this._unregistrations.get(r);if(!n)return !1;let i={unregisterations:[n]};return this._connection.sendRequest(we.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r);},s=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`);}),!0}},Rh=class{attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,r,n){return t instanceof Ah?this.registerMany(t):t instanceof yc?this.registerSingle1(t,r,n):this.registerSingle2(t,r)}registerSingle1(t,r,n){let i=Bn.string(r)?r:r.method,s=lb.generateUuid(),a={registrations:[{id:s,method:i,registerOptions:n||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(we.RegistrationRequest.type,a).then(o=>(t.add({id:s,method:i}),t),o=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(o)))}registerSingle2(t,r){let n=Bn.string(t)?t:t.method,i=lb.generateUuid(),s={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(we.RegistrationRequest.type,s).then(a=>we.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`);});}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(t,r){let n={unregisterations:[{id:t,method:r}]};return this.connection.sendRequest(we.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`);})}registerMany(t){let r=t.asRegistrationParams();return this.connection.sendRequest(we.RegistrationRequest.type,r).then(()=>new yc(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},hb=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function r(i){return i&&!!i.edit}let n=r(t)?t:{edit:t};return this.connection.sendRequest(we.ApplyWorkspaceEditRequest.type,n)}},uM=(0, lJ.FileOperationsFeature)((0, aJ.WorkspaceFoldersFeature)((0, sJ.ConfigurationFeature)(hb))),Ih=class{constructor(){this._trace=we.Trace.Off;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t;}log(t,r){this._trace!==we.Trace.Off&&this.connection.sendNotification(we.LogTraceNotification.type,{message:t,verbose:this._trace===we.Trace.Verbose?r:void 0}).catch(()=>{});}},Ph=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(we.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed");});}},Nh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Ye.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Ye.attachPartialResult)(this.connection,r)}};vt._LanguagesImpl=Nh;var cM=(0, pJ.FoldingRangeFeature)((0, _J.MonikerFeature)((0, mJ.DiagnosticFeature)((0, gJ.InlayHintFeature)((0, hJ.InlineValueFeature)((0, dJ.TypeHierarchyFeature)((0, fJ.LinkedEditingRangeFeature)((0, uJ.SemanticTokensFeature)((0, oJ.CallHierarchyFeature)(Nh))))))))),Dh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Ye.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Ye.attachPartialResult)(this.connection,r)}};vt._NotebooksImpl=Dh;var lM=(0, yJ.NotebookSyncFeature)(Dh);function fM(e,t){return function(r){return t(e(r))}}vt.combineConsoleFeatures=fM;function dM(e,t){return function(r){return t(e(r))}}vt.combineTelemetryFeatures=dM;function hM(e,t){return function(r){return t(e(r))}}vt.combineTracerFeatures=hM;function pM(e,t){return function(r){return t(e(r))}}vt.combineClientFeatures=pM;function gM(e,t){return function(r){return t(e(r))}}vt.combineWindowFeatures=gM;function mM(e,t){return function(r){return t(e(r))}}vt.combineWorkspaceFeatures=mM;function yM(e,t){return function(r){return t(e(r))}}vt.combineLanguagesFeatures=yM;function _M(e,t){return function(r){return t(e(r))}}vt.combineNotebooksFeatures=_M;function vJ(e,t){function r(i,s,a){return i&&s?a(i,s):i||s}return {__brand:"features",console:r(e.console,t.console,fM),tracer:r(e.tracer,t.tracer,hM),telemetry:r(e.telemetry,t.telemetry,dM),client:r(e.client,t.client,pM),window:r(e.window,t.window,gM),workspace:r(e.workspace,t.workspace,mM),languages:r(e.languages,t.languages,yM),notebooks:r(e.notebooks,t.notebooks,_M)}}vt.combineFeatures=vJ;function bJ(e,t,r){let n=r&&r.console?new(r.console(Th)):new Th,i=e(n);n.rawAttach(i);let s=r&&r.tracer?new(r.tracer(Ih)):new Ih,a=r&&r.telemetry?new(r.telemetry(Ph)):new Ph,o=r&&r.client?new(r.client(Rh)):new Rh,c=r&&r.window?new(r.window(sM)):new sM,l=r&&r.workspace?new(r.workspace(uM)):new uM,u=r&&r.languages?new(r.languages(cM)):new cM,f=r&&r.notebooks?new(r.notebooks(lM)):new lM,h=[n,s,a,o,c,l,u,f];function p(y){return y instanceof Promise?y:Bn.thenable(y)?new Promise((b,N)=>{y.then(B=>b(B),B=>N(B));}):Promise.resolve(y)}let m,v,E,w={listen:()=>i.listen(),sendRequest:(y,...b)=>i.sendRequest(Bn.string(y)?y:y.method,...b),onRequest:(y,b)=>i.onRequest(y,b),sendNotification:(y,b)=>{let N=Bn.string(y)?y:y.method;return i.sendNotification(N,b)},onNotification:(y,b)=>i.onNotification(y,b),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(v=y,{dispose:()=>{v=void 0;}}),onInitialized:y=>i.onNotification(we.InitializedNotification.type,y),onShutdown:y=>(m=y,{dispose:()=>{m=void 0;}}),onExit:y=>(E=y,{dispose:()=>{E=void 0;}}),get console(){return n},get telemetry(){return a},get tracer(){return s},get client(){return o},get window(){return c},get workspace(){return l},get languages(){return u},get notebooks(){return f},onDidChangeConfiguration:y=>i.onNotification(we.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(we.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(we.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(we.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(we.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(we.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(we.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(we.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(we.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(we.HoverRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),onCompletion:y=>i.onRequest(we.CompletionRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onCompletionResolve:y=>i.onRequest(we.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(we.SignatureHelpRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),onDeclaration:y=>i.onRequest(we.DeclarationRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onDefinition:y=>i.onRequest(we.DefinitionRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onTypeDefinition:y=>i.onRequest(we.TypeDefinitionRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onImplementation:y=>i.onRequest(we.ImplementationRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onReferences:y=>i.onRequest(we.ReferencesRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onDocumentHighlight:y=>i.onRequest(we.DocumentHighlightRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onDocumentSymbol:y=>i.onRequest(we.DocumentSymbolRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onWorkspaceSymbol:y=>i.onRequest(we.WorkspaceSymbolRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onWorkspaceSymbolResolve:y=>i.onRequest(we.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(we.CodeActionRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onCodeActionResolve:y=>i.onRequest(we.CodeActionResolveRequest.type,(b,N)=>y(b,N)),onCodeLens:y=>i.onRequest(we.CodeLensRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onCodeLensResolve:y=>i.onRequest(we.CodeLensResolveRequest.type,(b,N)=>y(b,N)),onDocumentFormatting:y=>i.onRequest(we.DocumentFormattingRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),onDocumentRangeFormatting:y=>i.onRequest(we.DocumentRangeFormattingRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(we.DocumentOnTypeFormattingRequest.type,(b,N)=>y(b,N)),onRenameRequest:y=>i.onRequest(we.RenameRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),onPrepareRename:y=>i.onRequest(we.PrepareRenameRequest.type,(b,N)=>y(b,N)),onDocumentLinks:y=>i.onRequest(we.DocumentLinkRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onDocumentLinkResolve:y=>i.onRequest(we.DocumentLinkResolveRequest.type,(b,N)=>y(b,N)),onDocumentColor:y=>i.onRequest(we.DocumentColorRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onColorPresentation:y=>i.onRequest(we.ColorPresentationRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onFoldingRanges:y=>i.onRequest(we.FoldingRangeRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onSelectionRanges:y=>i.onRequest(we.SelectionRangeRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),(0, Ye.attachPartialResult)(i,b))),onExecuteCommand:y=>i.onRequest(we.ExecuteCommandRequest.type,(b,N)=>y(b,N,(0, Ye.attachWorkDone)(i,b),void 0)),dispose:()=>i.dispose()};for(let y of h)y.attach(w);return i.onRequest(we.InitializeRequest.type,y=>{t.initialize(y),Bn.string(y.trace)&&(s.trace=we.Trace.fromString(y.trace));for(let b of h)b.initialize(y.capabilities);if(v){let b=v(y,new we.CancellationTokenSource().token,(0, Ye.attachWorkDone)(i,y),void 0);return p(b).then(N=>{if(N instanceof we.ResponseError)return N;let B=N;B||(B={capabilities:{}});let V=B.capabilities;V||(V={},B.capabilities=V),V.textDocumentSync===void 0||V.textDocumentSync===null?V.textDocumentSync=Bn.number(w.__textDocumentSync)?w.__textDocumentSync:we.TextDocumentSyncKind.None:!Bn.number(V.textDocumentSync)&&!Bn.number(V.textDocumentSync.change)&&(V.textDocumentSync.change=Bn.number(w.__textDocumentSync)?w.__textDocumentSync:we.TextDocumentSyncKind.None);for(let X of h)X.fillServerCapabilities(V);return B})}else {let b={capabilities:{textDocumentSync:we.TextDocumentSyncKind.None}};for(let N of h)N.fillServerCapabilities(b.capabilities);return b}}),i.onRequest(we.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,m)return m(new we.CancellationTokenSource().token)}),i.onNotification(we.ExitNotification.type,()=>{try{E&&E();}finally{t.shutdownReceived?t.exit(0):t.exit(1);}}),i.onNotification(we.SetTraceNotification.type,y=>{s.trace=we.Trace.fromString(y.value);}),w}vt.createConnection=bJ;});var vM=P(sn=>{Object.defineProperty(sn,"__esModule",{value:!0});sn.resolveModulePath=sn.FileSystem=sn.resolveGlobalYarnPath=sn.resolveGlobalNodePath=sn.resolve=sn.uriToFilePath=void 0;var SJ=he("url"),Zn=he("path"),gb=he("fs"),vb=he("child_process");function EJ(e){let t=SJ.parse(e);if(t.protocol!=="file:"||!t.path)return;let r=t.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let s=r[0],a=r[1];s.length===0&&a.length>1&&a[1]===":"&&r.shift();}return Zn.normalize(r.join("/"))}sn.uriToFilePath=EJ;function mb(){return process.platform==="win32"}function kh(e,t,r,n){let i="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,o)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(u=>l[u]=c[u]),t&&gb.existsSync(t)&&(l[i]?l[i]=t+Zn.delimiter+l[i]:l[i]=t,n&&n(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let u=(0, vb.fork)("",[],{cwd:r,env:l,execArgv:["-e",s]});if(u.pid===void 0){o(new Error(`Starting process to resolve node module  ${e} failed`));return}u.on("error",h=>{o(h);}),u.on("message",h=>{h.c==="r"&&(u.send({c:"e"}),h.s?a(h.r):o(new Error(`Failed to resolve module: ${e}`)));});let f={c:"rs",a:e};u.send(f);}catch(u){o(u);}})}sn.resolve=kh;function yb(e){let t="npm",r=Object.create(null);Object.keys(process.env).forEach(s=>r[s]=process.env[s]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};mb()&&(t="npm.cmd",n.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let s=(0, vb.spawnSync)(t,["config","get","prefix"],n).stdout;if(!s){e&&e("'npm config get prefix' didn't return a value.");return}let a=s.trim();return e&&e(`'npm config get prefix' value is: ${a}`),a.length>0?mb()?Zn.join(a,"node_modules"):Zn.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i);}}sn.resolveGlobalNodePath=yb;function wJ(e){let t="yarn",r={encoding:"utf8"};mb()&&(t="yarn.cmd",r.shell=!0);let n=()=>{};try{process.on("SIGPIPE",n);let i=(0, vb.spawnSync)(t,["global","dir","--json"],r),s=i.stdout;if(!s){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let a=s.trim().split(/\r?\n/);for(let o of a)try{let c=JSON.parse(o);if(c.type==="log")return Zn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n);}}sn.resolveGlobalYarnPath=wJ;var _b;(function(e){let t;function r(){return t!==void 0||(process.platform==="win32"?t=!1:t=!gb.existsSync(__filename.toUpperCase())||!gb.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=r;function n(i,s){return r()?Zn.normalize(s).indexOf(Zn.normalize(i))===0:Zn.normalize(s).toLowerCase().indexOf(Zn.normalize(i).toLowerCase())===0}e.isParent=n;})(_b||(sn.FileSystem=_b={}));function CJ(e,t,r,n){return r?(Zn.isAbsolute(r)||(r=Zn.join(e,r)),kh(t,r,r,n).then(i=>_b.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>kh(t,yb(n),e,n))):kh(t,yb(n),e,n)}sn.resolveModulePath=CJ;});var bb=P((pce,bM)=>{bM.exports=nr();});var SM=P(Oh=>{Object.defineProperty(Oh,"__esModule",{value:!0});Oh.InlineCompletionFeature=void 0;var xJ=nr(),TJ=e=>class extends e{get inlineCompletion(){return {on:t=>this.connection.onRequest(xJ.InlineCompletionRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};Oh.InlineCompletionFeature=TJ;});var CM=P(Dr=>{var AJ=Dr&&Dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),wM=Dr&&Dr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&AJ(t,e,r);};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ProposedFeatures=Dr.NotebookDocuments=Dr.TextDocuments=Dr.SemanticTokensBuilder=void 0;var RJ=rb();Object.defineProperty(Dr,"SemanticTokensBuilder",{enumerable:!0,get:function(){return RJ.SemanticTokensBuilder}});var IJ=SM();wM(nr(),Dr);var PJ=ab();Object.defineProperty(Dr,"TextDocuments",{enumerable:!0,get:function(){return PJ.TextDocuments}});var NJ=ub();Object.defineProperty(Dr,"NotebookDocuments",{enumerable:!0,get:function(){return NJ.NotebookDocuments}});wM(pb(),Dr);var EM;(function(e){e.all={__brand:"features",languages:IJ.InlineCompletionFeature};})(EM||(Dr.ProposedFeatures=EM={}));});var PM=P(Ln=>{var DJ=Ln&&Ln.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),RM=Ln&&Ln.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&DJ(t,e,r);};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.createConnection=Ln.Files=void 0;var xM=he("util"),Sb=bd(),kJ=pb(),_c=vM(),ga=bb();RM(bb(),Ln);RM(CM(),Ln);var TM;(function(e){e.uriToFilePath=_c.uriToFilePath,e.resolveGlobalNodePath=_c.resolveGlobalNodePath,e.resolveGlobalYarnPath=_c.resolveGlobalYarnPath,e.resolve=_c.resolve,e.resolveModulePath=_c.resolveModulePath;})(TM||(Ln.Files=TM={}));var Oo=!1,IM;function OJ(){let e="--clientProcessId";function t(r){try{let n=parseInt(r);isNaN(n)||(IM=setInterval(()=>{try{process.kill(n,0);}catch{process.exit(Oo?0:1);}},3e3));}catch{}}for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===e&&r+1<process.argv.length){t(process.argv[r+1]);return}else {let i=n.split("=");i[0]===e&&t(i[1]);}}}OJ();var BJ={initialize:e=>{let t=e.processId;Sb.number(t)&&IM===void 0&&setInterval(()=>{try{process.kill(t,0);}catch{process.exit(Oo?0:1);}},3e3);},get shutdownReceived(){return Oo},set shutdownReceived(e){Oo=e;},exit:e=>{process.exit(e);}};function LJ(e,t,r,n){let i,s,a,o;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=r,r=n),ga.ConnectionStrategy.is(e)||ga.ConnectionOptions.is(e)?o=e:(s=e,a=t,o=r),FJ(s,a,o,i)}Ln.createConnection=LJ;function FJ(e,t,r,n){let i=!1;if(!e&&!t&&process.argv.length>2){let c,l,u=process.argv.slice(2);for(let f=0;f<u.length;f++){let h=u[f];if(h==="--node-ipc"){e=new ga.IPCMessageReader(process),t=new ga.IPCMessageWriter(process);break}else if(h==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(h==="--socket"){c=parseInt(u[f+1]);break}else if(h==="--pipe"){l=u[f+1];break}else {var s=h.split("=");if(s[0]==="--socket"){c=parseInt(s[1]);break}else if(s[0]==="--pipe"){l=s[1];break}}}if(c){let f=(0, ga.createServerSocketTransport)(c);e=f[0],t=f[1];}else if(l){let f=(0, ga.createServerPipeTransport)(l);e=f[0],t=f[1];}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+a);if(!t)throw new Error("Connection output stream is not set. "+a);if(Sb.func(e.read)&&Sb.func(e.on)){let c=e;c.on("end",()=>{process.exit(Oo?0:1);}),c.on("close",()=>{process.exit(Oo?0:1);});}let o=c=>{let l=(0, ga.createProtocolConnection)(e,t,c,r);return i&&MJ(c),l};return (0, kJ.createConnection)(o,BJ,n)}function MJ(e){function t(n){return n.map(i=>typeof i=="string"?i:(0, xM.inspect)(i)).join(" ")}let r=new Map;console.assert=function(i,...s){if(!i)if(s.length===0)e.error("Assertion failed");else {let[a,...o]=s;e.error(`Assertion failed: ${a} ${t(o)}`);}},console.count=function(i="default"){let s=String(i),a=r.get(s)??0;a+=1,r.set(s,a),e.log(`${s}: ${s}`);},console.countReset=function(i){i===void 0?r.clear():r.delete(String(i));},console.debug=function(...i){e.log(t(i));},console.dir=function(i,s){e.log((0, xM.inspect)(i,s));},console.log=function(...i){e.log(t(i));},console.error=function(...i){e.error(t(i));},console.trace=function(...i){let s=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${t(i)}`),e.log(`${a}
${s}`);},console.warn=function(...i){e.warn(t(i));};}});var DM=P((vce,NM)=>{NM.exports=PM();});var Rc=new Uint8Array(256),Ac=Rc.length;function Gh(){return Ac>Rc.length-16&&(Tq__default.default.randomFillSync(Rc),Ac=0),Rc.slice(Ac,Ac+=16)}var Sr=[];for(let e=0;e<256;++e)Sr.push((e+256).toString(16).slice(1));function nS(e,t=0){return Sr[e[t+0]]+Sr[e[t+1]]+Sr[e[t+2]]+Sr[e[t+3]]+"-"+Sr[e[t+4]]+Sr[e[t+5]]+"-"+Sr[e[t+6]]+Sr[e[t+7]]+"-"+Sr[e[t+8]]+Sr[e[t+9]]+"-"+Sr[e[t+10]]+Sr[e[t+11]]+Sr[e[t+12]]+Sr[e[t+13]]+Sr[e[t+14]]+Sr[e[t+15]]}var Yh={randomUUID:Tq__default.default.randomUUID};function Rq(e,t,r){if(Yh.randomUUID&&!t&&!e)return Yh.randomUUID();e=e||{};let n=e.random||(e.rng||Gh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return nS(n)}var Si=Rq;var yd=or(cl());var zi={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function lU(e,t){return t}function t1(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:hU(e)?1:e instanceof Set?3:e instanceof Map?4:5}function fU(e){let t=new Set;for(let r of e)for(let n of [...Object.keys(r),...Object.getOwnPropertySymbols(r)])t.add(n);return t}function dU(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function n1(e){return {*[Symbol.iterator](){for(let t of e)for(let r of t)yield r;}}}var r1=new Set(["[object Object]","[object Module]"]);function hU(e){if(!r1.has(Object.prototype.toString.call(e)))return !1;let{constructor:t}=e;if(t===void 0)return !0;let r=t.prototype;return !(r===null||typeof r!="object"||!r1.has(Object.prototype.toString.call(r))||!r.hasOwnProperty("isPrototypeOf"))}function pU(e,t,r){let n={};for(let i of fU(e)){let s=[];for(let c of e)dU(c,i)&&s.push(c[i]);if(s.length===0)continue;let a=t.metaDataUpdater(r,{key:i,parents:e}),o=a1(s,t,a);o!==zi.skip&&(i==="__proto__"?Object.defineProperty(n,i,{value:o,configurable:!0,enumerable:!0,writable:!0}):n[i]=o);}return n}function gU(e){return e.flat()}function mU(e){return new Set(n1(e))}function yU(e){return new Map(n1(e))}function i1(e){return e.at(-1)}var Xp=Object.freeze({__proto__:null,mergeArrays:gU,mergeMaps:yU,mergeOthers:i1,mergeRecords:pU,mergeSets:mU});function s1(...e){return _U({})(...e)}function _U(e,t){let r=vU(e,n);function n(...i){return a1(i,r,t)}return n}function vU(e,t){return {defaultMergeFunctions:Xp,mergeFunctions:{...Xp,...Object.fromEntries(Object.entries(e).filter(([r,n])=>Object.hasOwn(Xp,r)).map(([r,n])=>n===!1?[r,i1]:[r,n]))},metaDataUpdater:e.metaDataUpdater??lU,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,actions:zi}}function a1(e,t,r){if(e.length===0)return;if(e.length===1)return Jp(e,t,r);let n=t1(e[0]);if(n!==0&&n!==5){for(let i=1;i<e.length;i++)if(t1(e[i])!==n)return Jp(e,t,r)}switch(n){case 1:return bU(e,t,r);case 2:return SU(e,t,r);case 3:return EU(e,t,r);case 4:return wU(e,t,r);default:return Jp(e,t,r)}}function bU(e,t,r){let n=t.mergeFunctions.mergeRecords(e,t,r);return n===zi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,r):n}function SU(e,t,r){let n=t.mergeFunctions.mergeArrays(e,t,r);return n===zi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):n}function EU(e,t,r){let n=t.mergeFunctions.mergeSets(e,t,r);return n===zi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):n}function wU(e,t,r){let n=t.mergeFunctions.mergeMaps(e,t,r);return n===zi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):n}function Jp(e,t,r){let n=t.mergeFunctions.mergeOthers(e,t,r);return n===zi.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):n}var Zo=e=>{let t=typeof e;return e!==null&&(t==="object"||t==="function")};var eg=new Set(["__proto__","prototype","constructor"]),CU=new Set("0123456789");function tg(e){let t=[],r="",n="start",i=!1;for(let s of e)switch(s){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=s),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=s;break}if(eg.has(r))return [];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=s;break}if(n==="property"){if(eg.has(r))return [];t.push(r),r="";}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!CU.has(s))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=s;}}switch(i&&(r+="\\"),n){case"property":{if(eg.has(r))return [];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function o1(e,t){if(typeof t!="number"&&Array.isArray(e)){let r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return !1}function u1(e,t){if(o1(e,t))throw new Error("Cannot use string index")}function ll(e,t,r){if(!Zo(e)||typeof t!="string")return r===void 0?e:r;let n=tg(t);if(n.length===0)return r;for(let i=0;i<n.length;i++){let s=n[i];if(o1(e,s)?e=i===n.length-1?void 0:null:e=e[s],e==null){if(i!==n.length-1)return r;break}}return e===void 0?r:e}function Bs(e,t,r){if(!Zo(e)||typeof t!="string")return e;let n=e,i=tg(t);for(let s=0;s<i.length;s++){let a=i[s];u1(e,a),s===i.length-1?e[a]=r:Zo(e[a])||(e[a]=typeof i[s+1]=="number"?[]:{}),e=e[a];}return n}function fl(e,t){if(!Zo(e)||typeof t!="string")return !1;let r=tg(t);for(let n=0;n<r.length;n++){let i=r[n];if(u1(e,i),n===r.length-1)return delete e[i],!0;if(e=e[i],!Zo(e))return !1}}var xU={"Content-Type":"application/json"};function Ls(e={}){let{fetch:t=globalThis.fetch,querySerializer:r,bodySerializer:n,...i}=e,s=i.baseUrl??"";s.endsWith("/")&&(s=s.slice(0,-1));async function a(o,c){let{fetch:l=t,headers:u,body:f,params:h={},parseAs:p="json",querySerializer:m=r??TU,bodySerializer:v=n??AU,...E}=c||{},w=RU(o,{baseUrl:s,params:h,querySerializer:m}),y=IU(xU,e?.headers,u,h.header),b={redirect:"follow",...i,...E,headers:y};f&&(b.body=v(f)),b.body instanceof FormData&&y.delete("Content-Type");let N=await l(w,b);if(N.status===204||N.headers.get("Content-Length")==="0")return N.ok?{data:{},response:N}:{error:{},response:N};if(N.ok){let V;if(p!=="stream"){let X=N.clone();V=typeof X[p]=="function"?await X[p]():await X.text();}else V=N.clone().body;return {data:V,response:N}}let B={};try{B=await N.clone().json();}catch{B=await N.clone().text();}return {error:B,response:N}}return {async GET(o,...c){return a(o,{...c[0],method:"GET"})},async PUT(o,...c){return a(o,{...c[0],method:"PUT"})},async POST(o,...c){return a(o,{...c[0],method:"POST"})},async DELETE(o,...c){return a(o,{...c[0],method:"DELETE"})},async OPTIONS(o,...c){return a(o,{...c[0],method:"OPTIONS"})},async HEAD(o,...c){return a(o,{...c[0],method:"HEAD"})},async PATCH(o,...c){return a(o,{...c[0],method:"PATCH"})},async TRACE(o,...c){return a(o,{...c[0],method:"TRACE"})}}}function TU(e){let t=new URLSearchParams;if(e&&typeof e=="object")for(let[r,n]of Object.entries(e))n!=null&&t.set(r,n);return t.toString()}function AU(e){return JSON.stringify(e)}function RU(e,t){let r=`${t.baseUrl}${e}`;if(t.params.path)for(let[i,s]of Object.entries(t.params.path))r=r.replace(`{${i}}`,encodeURIComponent(String(s)));let n=t.querySerializer(t.params.query??{});return n&&(r+=`?${n}`),r}function IU(...e){let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[i,s]of n)s===null?t.delete(i):s!==void 0&&t.set(i,s);}return t}var p1=or(d1());function Bt(e){let t=e.match(/.*(?:$|\r?\n)/g)?.filter(Boolean)??[];return t.length>0&&t[t.length-1]?.endsWith(`
`)&&t.push(""),t}function rt(e){return e.trim().length===0}function ei(e,t){if(t===void 0)return e.match(/^[ \t]*/)?.[0]?.length??0;if(t==="	")return e.match(/^\t*/)?.[0].length??0;if(t.match(/^ *$/))return (e.match(/^ */)?.[0].length??0)/t.length;throw new Error(`Invalid indentation: ${t}`)}function ng(e,t){return t<0||t>=e.length-1?!1:ei(e[t])<ei(e[t+1])}function dl(e,t){return t<=0||t>e.length-1?!1:ei(e[t-1])>ei(e[t])}var ig=[{open:{chars:"(",reg:/\(/},close:{chars:")",reg:/\)/}},{open:{chars:"[",reg:/\[/},close:{chars:"]",reg:/\]/}},{open:{chars:"{",reg:/\{/},close:{chars:"}",reg:/\}/}},{open:{chars:"<",reg:/<(?=\w)/},close:{chars:"/>",reg:/\/>/}},{open:{chars:"<",reg:/<(?=[/\w])/},close:{chars:">",reg:/>/}},{openOrClose:{chars:'"',reg:/"/}},{openOrClose:{chars:"'",reg:/'/}},{openOrClose:{chars:"`",reg:/`/}}],h1=/^([)\]}>"'`]|(\/>))*$/g;function hl(e){let t=[],r=0;for(;r<e.length;){let n=e.slice(r),i={index:n.length,found:void 0};if(ig.forEach(s=>{Object.entries(s).forEach(([a,o])=>{let c=n.match(o.reg);c&&c.index!==void 0&&c.index<i.index&&(i={index:c.index,found:{pair:s,pos:a,pattern:o}});});}),!i.found)break;switch(i.found.pos){case"openOrClose":{let s=i.found.pattern.chars;t.length>0&&t.includes(s)?t.splice(t.lastIndexOf(s),t.length-t.lastIndexOf(s)):t.push(s);break}case"open":{t.push(i.found.pattern.chars);break}case"close":{let s=i.found.pair;t.length>0&&"open"in s&&t[t.length-1]===s.open.chars?t.pop():t.push(i.found.pattern.chars);break}}r+=i.index+i.found.pattern.chars.length;}return t}function Na(e,t){return p1.get(e,t)}function Jo(e){let t=new AbortController;for(let r of e){if(r?.aborted)return t.abort(r.reason),r;r?.addEventListener("abort",()=>t.abort(r.reason),{signal:t.signal});}return t.signal}var Lr=class extends Error{constructor(r){super(`${r.status} ${r.statusText}`);this.name="HttpError",this.status=r.status,this.statusText=r.statusText,this.response=r;}};function eu(e){return e instanceof Error&&e.name==="TimeoutError"||e instanceof Lr&&[408,499].includes(e.status)}function wi(e){return e instanceof Error&&e.name==="AbortError"}function sg(e){let t=e.message||e.toString();return e.cause&&(t+=`
Caused by: `+sg(e.cause)),t}function ag(e){this.message=e;}ag.prototype=new Error,ag.prototype.name="InvalidCharacterError";var g1=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ag("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,a="";n=t.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?a+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function kU(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw "Illegal base64url string!"}try{return function(r){return decodeURIComponent(g1(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return g1(t)}}function pl(e){this.message=e;}function OU(e,t){if(typeof e!="string")throw new pl("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(kU(e.split(".")[r]))}catch(n){throw new pl("Invalid token specified: "+n.message)}}pl.prototype=new Error,pl.prototype.name="InvalidTokenError";var gl=OU;var vm=or(Tl()),oR=or(cl()),uR=or(_m());var bm=class extends events.EventEmitter{constructor(r){super();this.filepath=r;this.data={};}async load(){this.data=await vm.default.readJson(Sm,{throws:!1})||{};}async save(){await vm.default.outputJson(Sm,this.data);}watch(){this.watcher=uR.default.watch(this.filepath,{interval:1e3});let r=async()=>{let n=this.data;await this.load(),(0, oR.default)(n,this.data)||super.emit("updated",this.data);};this.watcher.on("add",r),this.watcher.on("change",r);}},Sm=E___default.default.join(gP__default.default.homedir(),".tabby-client","agent","data.json"),js=new bm(Sm);var pf=or(m2()),A2=or(C2());var T0=class{constructor(){this.streamOptions={filename:E___default.default.join(gP__default.default.homedir(),".tabby-client","agent","logs","%DATE%"),frequency:"daily",size:"10M",max_logs:"30d",extension:".log",create_symlink:!0};}write(t){this.stream||(this.stream=A2.getStream(this.streamOptions)),this.stream.write(t);}},x2=new T0,T2={serializers:{error:pf.default.stdSerializers.err}},Qt=x2?(0, pf.default)(T2,x2):(0, pf.default)(T2);Qt.level="silent";var xu=[Qt];Qt.onChild=e=>{xu.push(e);};var A0=class extends Error{constructor(r){super();this.cause=r;this.name="RetryLimitReachedError";}},gf=class e extends events.EventEmitter{constructor(r){super();this.endpoint=r;this.logger=Qt.child({component:"Auth"});this.authApi=Ls({baseUrl:"https://app.tabbyml.com/api"});}static{this.authPageUrl="https://app.tabbyml.com/account/device-token";}static{this.tokenStrategy={polling:{interval:5e3,timeout:5*60*1e3},refresh:{interval:15*60*1e3,beforeExpire:30*60*1e3,whenLoaded:{maxTry:5,retryDelay:1e3},whenScheduled:{maxTry:60,retryDelay:30*1e3}}};}async init(r){r?.dataStore?this.dataStore=r.dataStore:(this.dataStore=js,js&&(js.on("updated",async()=>{await this.load(),super.emit("updated",this.jwt);}),js.watch())),this.scheduleRefreshToken(),await this.load();}get token(){return this.jwt?.token}get user(){return this.jwt?.payload.email}async load(){if(this.dataStore)try{await this.dataStore.load();let r=this.dataStore.data.auth?.[this.endpoint]?.jwt;if(typeof r=="string"&&this.jwt?.token!==r){this.logger.debug({storedJwt:r},"Load jwt from data store.");let n={token:r,payload:gl(r)};n.payload.exp*1e3-Date.now()<e.tokenStrategy.refresh.beforeExpire?(this.jwt=await this.refreshToken(n,e.tokenStrategy.refresh.whenLoaded),await this.save()):this.jwt=n;}}catch(r){this.logger.debug({error:r},"Error when loading auth");}}async save(){if(this.dataStore)try{if(this.jwt){if(this.dataStore.data.auth?.[this.endpoint]?.jwt===this.jwt.token)return;this.dataStore.data.auth={...this.dataStore.data.auth,[this.endpoint]:{jwt:this.jwt.token}};}else {if(typeof this.dataStore.data.auth?.[this.endpoint]>"u")return;delete this.dataStore.data.auth[this.endpoint];}await this.dataStore.save(),this.logger.debug("Save changes to data store.");}catch(r){this.logger.error({error:r},"Error when saving auth");}}async reset(){this.jwt&&(this.jwt=void 0,await this.save());}async requestAuthUrl(r){try{if(await this.reset(),r?.signal.aborted)throw r.signal.reason;this.logger.debug("Start to request device token");let n=await this.authApi.POST("/device-token",{body:{auth_url:this.endpoint},signal:r?.signal});if(n.error||!n.response.ok)throw new Lr(n.response);let i=n.data;this.logger.debug({deviceToken:i},"Request device token response");let s=new URL(e.authPageUrl);return s.searchParams.append("code",i.data.code),{authUrl:s.toString(),code:i.data.code}}catch(n){throw this.logger.error({error:n},"Error when requesting token"),n}}async pollingToken(r,n){return new Promise((i,s)=>{let a=Jo([AbortSignal.timeout(e.tokenStrategy.polling.timeout),n?.signal]),o=setInterval(async()=>{try{let c=await this.authApi.POST("/device-token/accept",{params:{query:{code:r}},signal:a});if(c.error||!c.response.ok)throw new Lr(c.response);let l=c.data;this.logger.debug({result:l},"Poll jwt response"),this.jwt={token:l.data.jwt,payload:gl(l.data.jwt)},super.emit("updated",this.jwt),await this.save(),clearInterval(o),i(!0);}catch(c){c instanceof Lr&&[400,401,403,405].includes(c.status)?this.logger.debug({error:c},"Expected error when polling jwt"):this.logger.error({error:c},"Error when polling jwt");}},e.tokenStrategy.polling.interval);a.aborted?(clearInterval(o),s(a.reason)):a.addEventListener("abort",()=>{clearInterval(o),s(a.reason);});})}async refreshToken(r,n={maxTry:1,retryDelay:1e3},i=0){try{this.logger.debug({retry:i},"Start to refresh token");let s=await this.authApi.POST("/device-token/refresh",{headers:{Authorization:`Bearer ${r.token}`}});if(s.error||!s.response.ok)throw new Lr(s.response);let a=s.data;return this.logger.debug({refreshedJwt:a},"Refresh token response"),{token:a.data.jwt,payload:gl(a.data.jwt)}}catch(s){if(s instanceof Lr&&[400,401,403,405].includes(s.status))this.logger.debug({error:s},"Error when refreshing jwt");else if(this.logger.error({error:s},"Unknown error when refreshing jwt"),i<n.maxTry)return this.logger.debug(`Retry refreshing jwt after ${n.retryDelay}ms`),await new Promise(a=>setTimeout(a,n.retryDelay)),this.refreshToken(r,n,i+1);throw new A0(s)}}scheduleRefreshToken(){setInterval(async()=>{if(this.jwt)if(this.jwt.payload.exp*1e3-Date.now()<e.tokenStrategy.refresh.beforeExpire)try{this.jwt=await this.refreshToken(this.jwt,e.tokenStrategy.refresh.whenScheduled),super.emit("updated",this.jwt),await this.save();}catch(r){this.logger.error({error:r},"Error when refreshing jwt");}else this.logger.debug("Check token, still valid");},e.tokenStrategy.refresh.interval);}};var R0={server:{endpoint:"http://localhost:8080",token:"",requestHeaders:{},requestTimeout:12e4},completion:{prompt:{experimentalStripAutoClosingCharacters:!1,maxPrefixLines:20,maxSuffixLines:20,clipboard:{minChars:3,maxChars:2e3}},debounce:{mode:"adaptive",interval:250}},postprocess:{limitScope:{experimentalSyntax:!1,indentation:{experimentalKeepBlockScopeWhenCompletingLine:!1}},calculateReplaceRange:{experimentalSyntax:!1}},logs:{level:"silent"},tls:{ca:"system"},anonymousUsageTracking:{disable:!1}};var I0=or(Tl()),B2=or(k2()),L2=or(_m()),F2=or(cl());var O2=`## Tabby agent configuration file

## Online documentation: https://tabby.tabbyml.com/docs/extensions/configurations
## You can uncomment and edit the values below to change the default settings.
## Configurations in this file have lower priority than the IDE settings.

## Server
## You can set the server endpoint here and an optional authentication token if required.
# [server]
# endpoint = "http://localhost:8080" # http or https URL
# token = "your-token-here" # if token is set, request header Authorization = "Bearer $token" will be added automatically

## You can add custom request headers.
# [server.requestHeaders]
# Header1 = "Value1" # list your custom headers here
# Header2 = "Value2" # values can be strings, numbers or booleans

## Logs
## You can set the log level here. The log file is located at ~/.tabby-client/agent/logs/.
# [logs]
# level = "silent" # "silent" or "error" or "debug"

## Anonymous usage tracking
## Tabby collects anonymous usage data and sends it to the Tabby team to help improve our products.
## Your code, generated completions, or any sensitive information is never tracked or sent.
## For more details on data collection, see https://tabby.tabbyml.com/docs/extensions/configurations#usage-collection
## Your contribution is greatly appreciated. However, if you prefer not to participate, you can disable anonymous usage tracking here.
# [anonymousUsageTracking]
# disable = false # set to true to disable

`,K7={server:"object","server.endpoint":"string","server.token":"string","server.requestHeaders":"object","server.requestTimeout":"number",completion:"object","completion.prompt":"object","completion.prompt.experimentalStripAutoClosingCharacters":"boolean","completion.prompt.maxPrefixLines":"number","completion.prompt.maxSuffixLines":"number","completion.prompt.clipboard":"object","completion.prompt.clipboard.minChars":"number","completion.prompt.clipboard.maxChars":"number","completion.debounce":"object","completion.debounce.mode":"string","completion.debounce.interval":"number",postprocess:"object","postprocess.limitScopeByIndentation":"object","postprocess.limitScopeByIndentation.experimentalKeepBlockScopeWhenCompletingLine":"boolean",logs:"object","logs.level":"string",tls:"object","tls.ca":"string",anonymousUsageTracking:"object","anonymousUsageTracking.disable":"boolean"};function z7(e){for(let[t,r]of Object.entries(K7))typeof ll(e,t)!==r&&fl(e,t);return e}var P0=class extends events.EventEmitter{constructor(r){super();this.filepath=r;this.data={};this.logger=Qt.child({component:"ConfigFile"});}get config(){return this.data}async load(){try{let r=await I0.default.readFile(this.filepath,"utf8"),n=B2.default.parse(r);if(Object.keys(n).length===0&&r.trim()!==O2.trim()){await this.createTemplate();return}this.data=z7(n);}catch(r){r instanceof Error&&"code"in r&&r.code==="ENOENT"?await this.createTemplate():this.logger.error({error:r},"Failed to load config file");}}watch(){this.watcher=L2.default.watch(this.filepath,{interval:1e3});let r=async()=>{let n=this.data;await this.load(),(0, F2.default)(n,this.data)||super.emit("updated",this.data);};this.watcher.on("add",r),this.watcher.on("change",r);}async createTemplate(){try{await I0.default.outputFile(this.filepath,O2);}catch(r){this.logger.error({error:r},"Failed to create config template file");}}},G7=E___default.default.join(gP__default.default.homedir(),".tabby-client","agent","config.toml"),za=new P0(G7);var Tu=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,q2=new Set,N0=typeof process=="object"&&process?process:{},U2=(e,t,r,n)=>{typeof N0.emitWarning=="function"?N0.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`);},mf=globalThis.AbortController,M2=globalThis.AbortSignal;if(typeof mf>"u"){M2=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i);}},mf=class{constructor(){t();}signal=new M2;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n);}}};let e=N0.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,U2("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t));};}var Y7=e=>!q2.has(e),es=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),$2=e=>es(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Ga:null:null,Ga=class extends Array{constructor(t){super(t),this.fill(0);}},D0=class e{heap;length;static#u=!1;static create(t){let r=$2(t);if(!r)return [];e.#u=!0;let n=new e(t,r);return e.#u=!1,n}constructor(t,r){if(!e.#u)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0;}push(t){this.heap[this.length++]=t;}pop(){return this.heap[--this.length]}},yf=class e{#u;#f;#_;#p;#I;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#g;#i;#r;#e;#c;#d;#o;#s;#m;#a;#E;#w;#y;#v;#x;#l;static unsafeExposeInternals(t){return {starts:t.#w,ttls:t.#y,sizes:t.#E,keyMap:t.#i,keyList:t.#r,valList:t.#e,next:t.#c,prev:t.#d,get head(){return t.#o},get tail(){return t.#s},free:t.#m,isBackgroundFetch:r=>t.#t(r),backgroundFetch:(r,n,i,s)=>t.#D(r,n,i,s),moveToTail:r=>t.#R(r),indexes:r=>t.#b(r),rindexes:r=>t.#S(r),isStale:r=>t.#h(r)}}get max(){return this.#u}get maxSize(){return this.#f}get calculatedSize(){return this.#g}get size(){return this.#n}get fetchMethod(){return this.#I}get dispose(){return this.#_}get disposeAfter(){return this.#p}constructor(t){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:h,maxSize:p=0,maxEntrySize:m=0,sizeCalculation:v,fetchMethod:E,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:N,ignoreFetchAbort:B}=t;if(r!==0&&!es(r))throw new TypeError("max option must be a nonnegative integer");let V=r?$2(r):Array;if(!V)throw new Error("invalid max value: "+r);if(this.#u=r,this.#f=p,this.maxEntrySize=m||this.#f,this.sizeCalculation=v,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#I=E,this.#x=!!E,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#c=new V(r),this.#d=new V(r),this.#o=0,this.#s=0,this.#m=D0.create(r),this.#n=0,this.#g=0,typeof l=="function"&&(this.#_=l),typeof u=="function"?(this.#p=u,this.#a=[]):(this.#p=void 0,this.#a=void 0),this.#v=!!this.#_,this.#l=!!this.#p,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!B,this.maxEntrySize!==0){if(this.#f!==0&&!es(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!es(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M();}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=es(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!es(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#k();}if(this.#u===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#u&&!this.#f){let X="LRU_CACHE_UNBOUNDED";Y7(X)&&(q2.add(X),U2("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",X,e));}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#k(){let t=new Ga(this.#u),r=new Ga(this.#u);this.#y=t,this.#w=r,this.#O=(s,a,o=Tu.now())=>{if(r[s]=a!==0?o:0,t[s]=a,a!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#h(s)&&this.delete(this.#r[s]);},a+1);c.unref&&c.unref();}},this.#T=s=>{r[s]=t[s]!==0?Tu.now():0;},this.#C=(s,a)=>{if(t[a]){let o=t[a],c=r[a];s.ttl=o,s.start=c,s.now=n||i();let l=s.now-c;s.remainingTTL=o-l;}};let n=0,i=()=>{let s=Tu.now();if(this.ttlResolution>0){n=s;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref();}return s};this.getRemainingTTL=s=>{let a=this.#i.get(s);if(a===void 0)return 0;let o=t[a],c=r[a];if(o===0||c===0)return 1/0;let l=(n||i())-c;return o-l},this.#h=s=>t[s]!==0&&r[s]!==0&&(n||i())-r[s]>t[s];}#T=()=>{};#C=()=>{};#O=()=>{};#h=()=>!1;#M(){let t=new Ga(this.#u);this.#g=0,this.#E=t,this.#A=r=>{this.#g-=t[r],t[r]=0;},this.#B=(r,n,i,s)=>{if(this.#t(n))return 0;if(!es(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!es(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(t[r]=n,this.#f){let s=this.#f-t[r];for(;this.#g>s;)this.#N(!0);}this.#g+=t[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#g);};}#A=t=>{};#P=(t,r,n)=>{};#B=(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#s;!(!this.#L(r)||((t||!this.#h(r))&&(yield r),r===this.#o));)r=this.#d[r];}*#S({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#L(r)||((t||!this.#h(r))&&(yield r),r===this.#s));)r=this.#c[r];}#L(t){return t!==void 0&&this.#i.get(this.#r[t])===t}*entries(){for(let t of this.#b())this.#e[t]!==void 0&&this.#r[t]!==void 0&&!this.#t(this.#e[t])&&(yield [this.#r[t],this.#e[t]]);}*rentries(){for(let t of this.#S())this.#e[t]!==void 0&&this.#r[t]!==void 0&&!this.#t(this.#e[t])&&(yield [this.#r[t],this.#e[t]]);}*keys(){for(let t of this.#b()){let r=this.#r[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r);}}*rkeys(){for(let t of this.#S()){let r=this.#r[t];r!==void 0&&!this.#t(this.#e[t])&&(yield r);}}*values(){for(let t of this.#b())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t]);}*rvalues(){for(let t of this.#S())this.#e[t]!==void 0&&!this.#t(this.#e[t])&&(yield this.#e[t]);}[Symbol.iterator](){return this.entries()}find(t,r={}){for(let n of this.#b()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,this.#r[n],this))return this.get(this.#r[n],r)}}forEach(t,r=this){for(let n of this.#b()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#r[n],this);}}rforEach(t,r=this){for(let n of this.#S()){let i=this.#e[n],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&t.call(r,s,this.#r[n],this);}}purgeStale(){let t=!1;for(let r of this.#S({allowStale:!0}))this.#h(r)&&(this.delete(this.#r[r]),t=!0);return t}dump(){let t=[];for(let r of this.#b({allowStale:!0})){let n=this.#r[r],i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let a={value:s};if(this.#y&&this.#w){a.ttl=this.#y[r];let o=Tu.now()-this.#w[r];a.start=Math.floor(Date.now()-o);}this.#E&&(a.size=this.#E[r]),t.unshift([n,a]);}return t}load(t){this.clear();for(let[r,n]of t){if(n.start){let i=Date.now()-n.start;n.start=Tu.now()-i;}this.set(r,n.value,n);}}set(t,r,n={}){if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=this.#B(t,r,n.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(t),this;let f=this.#n===0?void 0:this.#i.get(t);if(f===void 0)f=this.#n===0?this.#s:this.#m.length!==0?this.#m.pop():this.#n===this.#u?this.#N(!1):this.#n,this.#r[f]=t,this.#e[f]=r,this.#i.set(t,f),this.#c[this.#s]=f,this.#d[f]=this.#s,this.#s=f,this.#n++,this.#P(f,u,c),c&&(c.set="add"),l=!1;else {this.#R(f);let h=this.#e[f];if(r!==h){if(this.#x&&this.#t(h)?h.__abortController.abort(new Error("replaced")):a||(this.#v&&this.#_?.(h,t,"set"),this.#l&&this.#a?.push([h,t,"set"])),this.#A(f),this.#P(f,u,c),this.#e[f]=r,c){c.set="replace";let p=h&&this.#t(h)?h.__staleWhileFetching:h;p!==void 0&&(c.oldValue=p);}}else c&&(c.set="update");}if(i!==0&&!this.#y&&this.#k(),this.#y&&(l||this.#O(f,i,s),c&&this.#C(c,f)),!a&&this.#l&&this.#a){let h=this.#a,p;for(;p=h?.shift();)this.#p?.(...p);}return this}pop(){try{for(;this.#n;){let t=this.#e[this.#o];if(this.#N(!0),this.#t(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#l&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#p?.(...r);}}}#N(t){let r=this.#o,n=this.#r[r],i=this.#e[r];return this.#x&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#l)&&(this.#v&&this.#_?.(i,n,"evict"),this.#l&&this.#a?.push([i,n,"evict"])),this.#A(r),t&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#m.push(r)),this.#n===1?(this.#o=this.#s=0,this.#m.length=0):this.#o=this.#c[r],this.#i.delete(n),this.#n--,r}has(t,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#i.get(t);if(s!==void 0){let a=this.#e[s];if(this.#t(a)&&a.__staleWhileFetching===void 0)return !1;if(this.#h(s))i&&(i.has="stale",this.#C(i,s));else return n&&this.#T(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return !1}peek(t,r={}){let{allowStale:n=this.allowStale}=r,i=this.#i.get(t);if(i!==void 0&&(n||!this.#h(i))){let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}}#D(t,r,n,i){let s=r===void 0?void 0:this.#e[r];if(this.#t(s))return s;let a=new mf,{signal:o}=n;o?.addEventListener("abort",()=>a.abort(o.reason),{signal:a.signal});let c={signal:a.signal,options:n,context:i},l=(v,E=!1)=>{let{aborted:w}=a.signal,y=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(w&&!E?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,y&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),w&&!y&&!E)return f(a.signal.reason);let b=p;return this.#e[r]===p&&(v===void 0?b.__staleWhileFetching?this.#e[r]=b.__staleWhileFetching:this.delete(t):(n.status&&(n.status.fetchUpdated=!0),this.set(t,v,c.options))),v},u=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),f(v)),f=v=>{let{aborted:E}=a.signal,w=E&&n.allowStaleOnFetchAbort,y=w||n.allowStaleOnFetchRejection,b=y||n.noDeleteOnFetchRejection,N=p;if(this.#e[r]===p&&(!b||N.__staleWhileFetching===void 0?this.delete(t):w||(this.#e[r]=N.__staleWhileFetching)),y)return n.status&&N.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),N.__staleWhileFetching;if(N.__returned===N)throw v},h=(v,E)=>{let w=this.#I?.(t,s,c);w&&w instanceof Promise&&w.then(y=>v(y),E),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(),n.allowStaleOnFetchAbort&&(v=y=>l(y,!0)));});};n.status&&(n.status.fetchDispatched=!0);let p=new Promise(h).then(l,u),m=Object.assign(p,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(t,m,{...c.options,status:void 0}),r=this.#i.get(t)):this.#e[r]=m,m}#t(t){if(!this.#x)return !1;let r=t;return !!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof mf}async fetch(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:v,forceRefresh:E=!1,status:w,signal:y}=r;if(!this.#x)return w&&(w.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:w});let b={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:o,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:m,ignoreFetchAbort:p,status:w,signal:y},N=this.#i.get(t);if(N===void 0){w&&(w.fetch="miss");let B=this.#D(t,N,b,v);return B.__returned=B}else {let B=this.#e[N];if(this.#t(B)){let ee=n&&B.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",ee&&(w.returnedStale=!0)),ee?B.__staleWhileFetching:B.__returned=B}let V=this.#h(N);if(!E&&!V)return w&&(w.fetch="hit"),this.#R(N),i&&this.#T(N),w&&this.#C(w,N),B;let X=this.#D(t,N,b,v),G=X.__staleWhileFetching!==void 0&&n;return w&&(w.fetch=V?"stale":"refresh",G&&V&&(w.returnedStale=!0)),G?X.__staleWhileFetching:X.__returned=X}}get(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=r,o=this.#i.get(t);if(o!==void 0){let c=this.#e[o],l=this.#t(c);return a&&this.#C(a,o),this.#h(o)?(a&&(a.get="stale"),l?(a&&n&&c.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?c.__staleWhileFetching:void 0):(s||this.delete(t),a&&n&&(a.returnedStale=!0),n?c:void 0)):(a&&(a.get="hit"),l?c.__staleWhileFetching:(this.#R(o),i&&this.#T(o),c))}else a&&(a.get="miss");}#F(t,r){this.#d[r]=t,this.#c[t]=r;}#R(t){t!==this.#s&&(t===this.#o?this.#o=this.#c[t]:this.#F(this.#d[t],this.#c[t]),this.#F(this.#s,t),this.#s=t);}delete(t){let r=!1;if(this.#n!==0){let n=this.#i.get(t);if(n!==void 0)if(r=!0,this.#n===1)this.clear();else {this.#A(n);let i=this.#e[n];this.#t(i)?i.__abortController.abort(new Error("deleted")):(this.#v||this.#l)&&(this.#v&&this.#_?.(i,t,"delete"),this.#l&&this.#a?.push([i,t,"delete"])),this.#i.delete(t),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#s?this.#s=this.#d[n]:n===this.#o?this.#o=this.#c[n]:(this.#c[this.#d[n]]=this.#c[n],this.#d[this.#c[n]]=this.#d[n]),this.#n--,this.#m.push(n);}}if(this.#l&&this.#a?.length){let n=this.#a,i;for(;i=n?.shift();)this.#p?.(...i);}return r}clear(){for(let t of this.#S({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else {let n=this.#r[t];this.#v&&this.#_?.(r,n,"delete"),this.#l&&this.#a?.push([r,n,"delete"]);}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#y&&this.#w&&(this.#y.fill(0),this.#w.fill(0)),this.#E&&this.#E.fill(0),this.#o=0,this.#s=0,this.#m.length=0,this.#g=0,this.#n=0,this.#l&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#p?.(...r);}}};var G2=or(z2());function Z7(e){return e.trimEnd().match(h1)}var Ys=class{constructor(t){this.filepath=t.filepath,this.language=t.language,this.text=t.text,this.position=t.position,this.indentation=t.indentation,this.prefix=t.text.slice(0,t.position),this.suffix=t.text.slice(t.position),this.prefixLines=Bt(this.prefix),this.suffixLines=Bt(this.suffix),this.currentLinePrefix=this.prefixLines[this.prefixLines.length-1]??"",this.currentLineSuffix=this.suffixLines[0]??"",this.clipboard=t.clipboard?.trim()??"";let r=Z7(this.suffixLines[0]??"");this.mode=r?"default":"fill-in-line",this.hash=(0, G2.default)({filepath:this.filepath,language:this.language,text:this.text,position:this.position,clipboard:this.clipboard});}};var _f=class{constructor(){this.logger=Qt.child({component:"CompletionCache"});this.options={maxCount:1e4,prebuildCache:{enabled:!0,perCharacter:{lines:1,max:50},perLine:{max:10},autoClosingPairCheck:{max:3}}};this.cache=new yf({max:this.options.maxCount});}has(t){return this.cache.has(t.hash)}buildCache(t,r){this.logger.debug({key:t,value:r},"Starting to build cache");let n=this.createCacheEntries(t,r);n.forEach(i=>{this.cache.set(i.key.hash,{value:i.value,rebuildFlag:i.rebuildFlag});}),this.logger.debug({newEntries:n.length,cacheSize:this.cache.size},"Cache updated");}get(t){let r=this.cache.get(t.hash);return r?.rebuildFlag&&this.buildCache(t,r?.value),r?.value}createCacheEntries(t,r){let n=[{key:t,value:r,rebuildFlag:!1}];if(this.options.prebuildCache.enabled)for(let s of r.choices){let a=s.text.slice(t.position-s.replaceRange.start),o=this.getPerLinePositions(a);this.logger.trace({completionText:a,perLinePositions:o},"Calculate per-line cache positions");for(let l of o){let u=a.slice(0,l),f=this.generateAutoClosedPrefixes(u);for(let h of [u,...f]){let p={key:new Ys({...t,text:t.text.slice(0,t.position)+h+t.text.slice(t.position),position:t.position+l}),value:{...r,choices:[{index:s.index,text:a.slice(l),replaceRange:{start:t.position+l,end:t.position+l}}]},rebuildFlag:!0};this.logger.trace({prefix:h,entry:p},"Build per-line cache entry"),n.push(p);}}let c=this.getPerCharacterPositions(a);this.logger.trace({completionText:a,perCharacterPositions:c},"Calculate per-character cache positions");for(let l of c){let u=l;for(;u>0&&a[u-1]!==`
`;)u--;let f=a.slice(0,l),h=this.generateAutoClosedPrefixes(f);for(let p of [f,...h]){let m={key:new Ys({...t,text:t.text.slice(0,t.position)+p+t.text.slice(t.position),position:t.position+l}),value:{...r,choices:[{index:s.index,text:a.slice(u),replaceRange:{start:t.position+u,end:t.position+l}}]},rebuildFlag:!1};this.logger.trace({prefix:p,entry:m},"Build per-character cache entry"),n.push(m);}}}return n.reduce((s,a)=>{let o=s.find(c=>c.key.hash===a.key.hash);return o?(o.value.choices.push(...a.value.choices),o.rebuildFlag=o.rebuildFlag||a.rebuildFlag):s.push(a),s},[])}getPerLinePositions(t){let r=[],n=this.options.prebuildCache,i=Bt(t),s=0,a=0;for(;s<i.length-1&&s<n.perLine.max;){a+=i[s]?.length??0,r.push(a-1),r.push(a);let o=a;for(;o<t.length&&t[o].match(/\s/);)o++;r.push(o),s++;}return r}getPerCharacterPositions(t){let r=[],n=this.options.prebuildCache,i=Bt(t).slice(0,n.perCharacter.lines).join(""),s=0;for(;s<i.length&&s<n.perCharacter.max;)r.push(s),s++;return r}generateAutoClosedPrefixes(t){let r=[],n=hl(t),i=0,s="";for(;i<n.length&&i<this.options.prebuildCache.autoClosingPairCheck.max;)ig.filter(a=>{let o;return "open"in a?o=a.open:o=a.openOrClose,o.chars===n[n.length-1-i]}).forEach(a=>{let o;"close"in a?o=a.close:o=a.openOrClose,s+=o.chars,r.push(t+s);}),i++;return r}};function B0(e,t,r){return Math.max(e,Math.min(t,r))}var vf=class{constructor(){this.lastCalledTimeStamp=0;this.baseInterval=200;this.calledIntervalHistory=[];this.options={baseIntervalSlideWindowAvg:{minSize:20,maxSize:100,min:100,max:400},adaptiveRate:{min:1.5,max:3},contextScoreWeights:{triggerCharacter:.5,noSuffixInCurrentLine:.4,noSuffix:.1},requestDelay:{min:100,max:1e3}};}async debounce(t,r){let{request:n,config:i,responseTime:s}=t;if(n.manually)return this.sleep(0,r);if(i.mode==="fixed")return this.sleep(i.interval,r);let a=Date.now();this.updateBaseInterval(a-this.lastCalledTimeStamp),this.lastCalledTimeStamp=a;let o=this.calcContextScore(n),l=(this.options.adaptiveRate.max-(this.options.adaptiveRate.max-this.options.adaptiveRate.min)*o)*this.baseInterval,u=B0(this.options.requestDelay.min,this.options.requestDelay.max,l-s);return this.sleep(u,r)}async sleep(t,r){return new Promise((n,i)=>{let s=setTimeout(n,Math.min(t,2147483647));r?.signal&&(r.signal.aborted?(clearTimeout(s),i(r.signal.reason)):r.signal.addEventListener("abort",()=>{clearTimeout(s),i(r.signal.reason);}));})}updateBaseInterval(t){if(!(t>this.options.baseIntervalSlideWindowAvg.max)&&(this.calledIntervalHistory.push(t),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.maxSize&&this.calledIntervalHistory.shift(),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.minSize)){let r=this.calledIntervalHistory.reduce((n,i)=>n+i,0)/this.calledIntervalHistory.length;this.baseInterval=B0(this.options.baseIntervalSlideWindowAvg.min,this.options.baseIntervalSlideWindowAvg.max,r);}}calcContextScore(t){let r=0,n=this.options.contextScoreWeights,i=t.text[t.position-1]??"";r+=i.match(/^\W*$/)?n.triggerCharacter:0;let s=t.text.slice(t.position)??"",a=Bt(s)[0]??"";return r+=a.match(/^\W*$/)?n.noSuffixInCurrentLine:0,r+=s.match(/^\W*$/)?n.noSuffix:0,r=B0(0,1,r),r}};Array.prototype.distinct||(Array.prototype.distinct=function(e){return [...new Map(this.map(t=>[e?.(t)??t,t])).values()]});Array.prototype.mapAsync||(Array.prototype.mapAsync=async function(e,t){return await Promise.all(this.map((r,n)=>e.call(t,r,n,this)))});var Nt=Qt.child({component:"Postprocess"});function Qr(e,t){return L0(async r=>{let n=t.position-r.replaceRange.start,i=r.text.slice(n),s=await e(i,t);return r.text=r.text.slice(0,n)+(s??""),r},t)}function L0(e,t){return async r=>(r.choices=(await r.choices.mapAsync(async n=>await e(n,t))).filter(n=>!!n&&!!n.text).distinct(n=>n.text),r)}function X7(e){return /\n(\s*)\n/g}function Y2(){return (e,t)=>{let r=e.split(X7()),n=0,i=2,s=r.length-2;for(;s>=1;){if(rt(r[s])){s--;continue}let a=s-1;for(;a>=0&&rt(r[a]);)a--;if(a<0)break;let o=r[s].trim(),c=r[a].trim(),l=Math.max(.1*o.length,.1*c.length);if(Na(o,c)<=l)n++,s--;else break}return n>=i?(Nt.debug({inputBlocks:r,repetitionCount:n},"Remove repetitive blocks."),r.slice(0,s+1).join("").trimEnd()):e}}function Q2(){return e=>{let t=Bt(e),r=0,n=5,i=t.length-2;for(;i>=1;){if(rt(t[i])){i--;continue}let s=i-1;for(;s>=0&&rt(t[s]);)s--;if(s<0)break;let a=t[i].trim(),o=t[s].trim(),c=Math.max(.1*a.length,.1*o.length);if(Na(a,o)<=c)r++,i=s;else break}return r>=n?(Nt.debug({inputLines:t,repetitionCount:r},"Remove repetitive lines."),t.slice(0,i+1).join("").trimEnd()):e}}var J7=[/(.{3,}?)\1{5,}$/g,/(.{10,}?)\1{3,}$/g];function Z2(){return e=>{let t=Bt(e),r=t.length-1;for(;r>=0&&rt(t[r]);)r--;if(r<0)return e;for(let n of J7){let i=t[r].match(n);if(i)return Nt.debug({inputLines:t,lineNumber:r,match:i},"Remove line ends with repetition."),r<1?null:t.slice(0,r).join("").trimEnd()}return e}}function X2(){return (e,t)=>{let{suffixLines:r,currentLinePrefix:n}=t,i=Bt(e);if(i.length<2)return e;let s=i.map((l,u)=>u===0?n+l:l);if(!dl(s,i.length-1))return e;let a=i[i.length-1],o=1;for(;o<r.length&&rt(r[o]);)o++;if(o>=r.length)return e;let c=r[o];return a.startsWith(c.trimEnd())||c.startsWith(a.trimEnd())?(Nt.debug({inputLines:i,suffixLines:r},"Removing duplicated block closing line"),i.slice(0,i.length-1).join("").trimEnd()):e}}function ez(e,t,r,n){let i={indentLevelLimit:0,allowClosingLine:!0},{prefixLines:s,suffixLines:a,currentLinePrefix:o}=r;if(e.length==0||s.length==0)return i;let c=rt(o),l=s.length-1;for(;l>=0&&rt(s[l]);)l--;if(l<0)return i;let u=s[l],f=ei(u),h=e[0],p=rt(h),m=0;for(;m<e.length&&rt(e[m]);)m++;if(m>=e.length)return i;let v=e[m],E;p?E=ei(v):E=ei(o+v),!p&&!c?n.experimentalKeepBlockScopeWhenCompletingLine?i.indentLevelLimit=f:(i.indentLevelLimit=f+1,i.allowClosingLine&&=ng(t,0)):E>f?i.indentLevelLimit=f+1:(i.indentLevelLimit=f);let w=1;for(;w<a.length&&rt(a[w]);)w++;if(w<a.length){let y=a[w];i.allowClosingLine&&=ei(y)<i.indentLevelLimit;}return i}function J2(e){return (t,r)=>{let{prefixLines:n,suffixLines:i,currentLinePrefix:s}=r,a=Bt(t),o=a.map((u,f)=>f===0?s+u:u),c=ez(a,o,r,e),l=1;for(;l<a.length;){let u=a[l],f=a[l-1];if(rt(u)){l++;continue}if(ei(u)<c.indentLevelLimit){if(dl(o,l)&&ng(o,l)){l++;continue}c.allowClosingLine&&(r.language!=="python"||!rt(f))&&l++;break}l++;}return l<a.length?(Nt.debug({inputLines:a,prefixLines:n,suffixLines:i,scopeLineCount:l},"Remove content out of indent scope"),a.slice(0,l).join("").trimEnd()):t}}var bf=or(eP());var Qa={javascript:"tsx",typescript:"tsx",javascriptreact:"tsx",typescriptreact:"tsx",python:"python",go:"go",rust:"rust",ruby:"ruby"},rP=!1;async function tz(e){rP||(await bf.default.init({locateFile(n,i){let s=[i,"wasm",n];return E___default.default.join(...s)}}),rP=!0);let t=new bf.default,r=[__dirname,"wasm",`tree-sitter-${e}.wasm`];return t.setLanguage(await bf.default.Language.load(E___default.default.join(...r))),t}var nP=new Map;async function Sf(e){let t=nP.get(e);return t||(t=await tz(e),nP.set(e,t)),t}var iP={tsx:[["jsx_element","jsx_self_closing_element","for_statement","for_in_statement","if_statement","while_statement","do_statement","switch_statement","try_statement","with_statement","labeled_statement","class_declaration","abstract_class_declaration","interface_declaration","enum_declaration","type_alias_declaration","function_declaration","generator_function_declaration","ambient_declaration","method_definition","import_statement","export_statement","module"],["expression_statement","lexical_declaration"]],python:[["for_statement","if_statement","while_statement","match_statement","try_statement","with_statement","function_definition","decorated_definition","class_definition","import_statement","import_from_statement"]],go:[["for_statement","if_statement","expression_switch_statement","type_switch_statement","select_statement","labeled_statement","function_declaration","method_declaration","type_declaration","import_declaration","package_clause"]],rust:[["for_expression","if_expression","while_expression","loop_expression","match_expression","try_expression","function_item","type_item","enum_item","struct_item","union_item","trait_item","impl_item","use_declaration"]],ruby:[["for","if","unless","while","until","case","class","singleton_class","method","singleton_method","module"]]};var rz=Object.keys(Qa);function nz(e,t){let r=t-1;for(;r>=0&&e[r]?.match(/\s/);)r--;if(r<0)return 0;let n=e.lastIndexOf(`
`,r);if(n<0)return 0;let s=e.slice(n+1,t).search(/\S/);return n+1+s}function iz(e,t){let r=t;for(;r<e.length&&e[r]?.match(/\s/);)r++;if(r>=e.length)return e.length;let n=e.indexOf(`
`,r);return n<0?e.length:n}function sz(e,t){for(let r of t){let n=e;for(;n;){if(r.includes(n.type))return n;n=n.parent;}}return e}function sP(){return async(e,t)=>{let{position:r,text:n,language:i,prefix:s,suffix:a}=t;if(!rz.includes(i))throw new Error(`Language ${i} is not supported`);let o=Qa[i],c=await Sf(o),l=s+e+a,u=c.parse(l),f=nz(l,r),h=iz(l,r),p=sz(u.rootNode.namedDescendantForIndex(f,h),iP[o]??[]);if(p.type=="ERROR")throw new Error("Cannot determine syntax scope.");return p.endIndex<r+e.length?(Nt.debug({languageConfig:o,text:n,updatedText:l,position:r,lineBegin:f,lineEnd:h,scope:{type:p.type,start:p.startIndex,end:p.endIndex}},"Remove content out of syntax scope"),e.slice(0,p.endIndex-r)):e}}function aP(e){return async(t,r)=>{if(e.experimentalSyntax)try{return await sP()(t,r)}catch(i){Nt.debug({error:i},"Failed to limit scope by syntax parser");}return J2(e.indentation)(t,r)}}function F0(e){let t={"	":0,"  ":0,"    ":0};for(let r of e)if(r.match(/^\t/))t["	"]++;else {let n=r.match(/^ */)?.[0].length??0;n>0&&(n%4===0&&t["    "]++,n%2===0&&t["  "]++);}return t["	"]>0?"	":t["  "]>t["    "]?"  ":t["    "]>0?"    ":null}function az(e,t){return t==="	"?e.match(/^\t*/)?.[0].length??0:(e.match(/^ */)?.[0].length??0)/t.length}function oP(){return (e,t)=>{let{prefixLines:r,suffixLines:n,currentLinePrefix:i,indentation:s}=t,a=Bt(e);if(!s)return e;let o=rt(i)?r.slice(0,r.length-1):r;if(r.length>1&&F0(o)!==null)return e;let c=n.slice(1);if(n.length>1&&F0(c)!==null)return e;let l=a.map((h,p)=>p===0?i+h:h),u=F0(l);if(u===null||u===s)return e;let f=l.map((h,p)=>{let m=az(h,u);if(m===0)return a[p];let v=h.slice(u.length*m);return p===0?rt(i)?s.repeat(m).slice(i.length)+v:a[0]:s.repeat(m)+v});return Nt.debug({prefixLines:r,suffixLines:n,inputLines:a,formatted:f},"Format indentation."),f.join("")}}function M0(){return (e,t)=>{let{currentLinePrefix:r,currentLineSuffix:n}=t,i=e;return !rt(r)&&r.match(/\s$/)&&(i=i.trimStart()),(rt(n)||!rt(n)&&n.match(/^\s/))&&(i=i.trimEnd()),i}}function uP(){return (e,t)=>{let r=Bt(e);if(t.mode==="fill-in-line"&&r.length>1){let n=t.currentLineSuffix.trimEnd(),i=r[0].trimEnd();if(i.endsWith(n)){let s=i.slice(0,-n.length);if(s.length>0)return Nt.debug({inputLines:r,trimmedInputLine:s},"Trim content with multiple lines"),s}return Nt.debug({inputLines:r},"Drop content with multiple lines"),null}return e}}function q0(){return (e,t)=>{let{suffixLines:r}=t,n=Bt(e),i=0;for(;i<n.length&&rt(n[i]);)i++;let s=0;for(;s<r.length&&rt(r[s]);)s++;let a=Math.min(3,n.length-i,r.length-s);if(a<1)return e;let o=n.slice(i,i+a).join("").trim(),c=r.slice(s,s+a).join("").trim(),l=Math.max(1,.05*o.length,.05*c.length),u=Na(o,c);return u<=l?(Nt.debug({inputLines:n,suffixLines:r,inputToCompare:o,suffixToCompare:c,distance:u,threshold:l},"Drop completion due to duplicated."),null):e}}function U0(){return e=>rt(e)?null:e}function cP(e,t){let{currentLineSuffix:r}=t,n=r.trimEnd();if(rt(n))return e;let i=e.text.slice(t.position-e.replaceRange.start),s=hl(i).join("");return rt(s)||(n.startsWith(s)?(e.replaceRange.end=t.position+s.length,Nt.trace({context:t,completion:e.text,range:e.replaceRange,unpaired:s},"Adjust replace range by bracket stack")):s.startsWith(n)&&(e.replaceRange.end=t.position+n.length,Nt.trace({context:t,completion:e.text,range:e.replaceRange,unpaired:s},"Adjust replace range by bracket stack"))),e}var oz=Object.keys(Qa);async function lP(e,t){let{position:r,prefix:n,suffix:i,prefixLines:s,currentLinePrefix:a,currentLineSuffix:o,language:c}=t,l=o.trimEnd();if(rt(l))return e;if(!oz.includes(c))throw new Error(`Language ${c} is not supported`);let u=Qa[c],f=await Sf(u),h=e.text.slice(r-e.replaceRange.start),p=Bt(h),m=0,v=f.parse(n+h+i),E=v.rootNode.namedDescendantForIndex(n.length+h.length,n.length+h.length+l.length-m);for(;E.hasError()&&m<l.length;){m++;let w=s.length-1+p.length-1,y=p[p.length-1]?.length??0;p.length==1&&(y+=a.length),v.edit({startIndex:n.length+h.length,oldEndIndex:n.length+h.length+1,newEndIndex:n.length+h.length,startPosition:{row:w,column:y},oldEndPosition:{row:w,column:y+1},newEndPosition:{row:w,column:y}}),v=f.parse(n+h+i.slice(m),v),E=v.rootNode.namedDescendantForIndex(n.length+h.length,n.length+h.length+l.length-m);}if(E.hasError())throw new Error("Syntax error when parsing completion");return e.replaceRange.end=r+m,Nt.trace({context:t,completion:e.text,range:e.replaceRange},"Adjust replace range by syntax"),e}function fP(e){return async(t,r)=>{if(e.experimentalSyntax)try{return await lP(t,r)}catch(i){Nt.debug({error:i},"Failed to calculate replace range by syntax parser");}return cP(t,r)}}async function dP(e,t,r){return Promise.resolve(r).then(Qr(uP(),e)).then(Qr(Z2(),e)).then(Qr(q0(),e)).then(Qr(M0(),e)).then(Qr(U0(),e))}async function hP(e,t,r){return Promise.resolve(r).then(Qr(Y2(),e)).then(Qr(Q2(),e)).then(Qr(aP(t.limitScope),e)).then(Qr(X2(),e)).then(Qr(oP(),e)).then(Qr(q0(),e)).then(Qr(M0(),e)).then(Qr(U0(),e)).then(L0(fP(t.calculateReplaceRange),e))}var Ru="tabby-agent",Iu="1.4.0-dev";var Ef=class{constructor(){this.anonymousUsageTrackingApi=Ls({baseUrl:"https://app.tabbyml.com/api"});this.logger=Qt.child({component:"AnonymousUsage"});this.systemData={agent:`${Ru}, ${Iu}`,browser:void 0,node:`${process.version} ${process.platform} ${gP__default.default.arch()} ${gP__default.default.release()}`};this.sessionProperties={};this.userProperties={};this.userPropertiesUpdated=!1;this.emittedUniqueEvent=[];this.disabled=!1;}async init(t){if(this.dataStore=t?.dataStore||js,this.dataStore){try{await this.dataStore.load();}catch(r){this.logger.debug({error:r},"Error when loading anonymousId");}if(typeof this.dataStore.data.anonymousId=="string")this.anonymousId=this.dataStore.data.anonymousId;else {this.anonymousId=Si(),this.dataStore.data.anonymousId=this.anonymousId;try{await this.dataStore.save();}catch(r){this.logger.debug({error:r},"Error when saving anonymousId");}}}else this.anonymousId=Si();}setSessionProperties(t,r){Bs(this.sessionProperties,t,r);}setUserProperties(t,r){Bs(this.userProperties,t,r),this.userPropertiesUpdated=!0;}async uniqueEvent(t,r={}){await this.event(t,r,!0);}async event(t,r={},n=!1){if(this.disabled||!this.anonymousId||n&&this.emittedUniqueEvent.includes(t))return;n&&this.emittedUniqueEvent.push(t);let i={...this.systemData,...this.sessionProperties,...r};this.userPropertiesUpdated&&(Bs(i,"$set",this.userProperties),this.userPropertiesUpdated=!1);try{await this.anonymousUsageTrackingApi.POST("/usage",{body:{distinctId:this.anonymousId,event:t,properties:i}});}catch(s){this.logger.error({error:s},"Error when sending anonymous usage data");}}};var H0=or(vP()),wf=class{constructor(){this.sum=0;this.quantity=0;}add(t){this.sum+=t,this.quantity+=1;}mean(){if(this.quantity!==0)return this.sum/this.quantity}count(){return this.quantity}},Cf=class{constructor(t){this.values=[];this.maxSize=t;}add(t){this.values.push(t),this.values.length>this.maxSize&&this.values.shift();}getValues(){return this.values}},xf=class{constructor(){this.config={windowSize:10,checks:{disable:!1,healthy:{windowSize:1,latency:3e3},slowResponseTime:{latency:5e3,count:1},highTimeoutRate:{rate:.5,count:1}}};this.autoCompletionCount=0;this.manualCompletionCount=0;this.cacheHitCount=0;this.cacheMissCount=0;this.eventMap=new Map;this.completionRequestLatencyStats=new H0.Univariate;this.completionRequestCanceledStats=new wf;this.completionRequestTimeoutCount=0;this.recentCompletionRequestLatencies=new Cf(this.config.windowSize);}add(t){let{triggerMode:r,cacheHit:n,aborted:i,requestSent:s,requestLatency:a,requestCanceled:o,requestTimeout:c}=t;i||(r==="auto"?this.autoCompletionCount+=1:this.manualCompletionCount+=1,n?this.cacheHitCount+=1:this.cacheMissCount+=1),s&&(o?this.completionRequestCanceledStats.add(a):c?this.completionRequestTimeoutCount+=1:this.completionRequestLatencyStats.add(a),o||this.recentCompletionRequestLatencies.add(a));}addEvent(t){let r=this.eventMap.get(t)||0;this.eventMap.set(t,r+1);}reset(){this.autoCompletionCount=0,this.manualCompletionCount=0,this.cacheHitCount=0,this.cacheMissCount=0,this.eventMap=new Map,this.completionRequestLatencyStats=new H0.Univariate,this.completionRequestCanceledStats=new wf,this.completionRequestTimeoutCount=0;}resetWindowed(){this.recentCompletionRequestLatencies=new Cf(this.config.windowSize);}stats(){let t=Object.fromEntries(Array.from(this.eventMap.entries()).map(([r,n])=>["count_"+r,n]));return {completion:{count_auto:this.autoCompletionCount,count_manual:this.manualCompletionCount,cache_hit:this.cacheHitCount,cache_miss:this.cacheMissCount,...t},completion_request:{count:this.completionRequestLatencyStats.count(),latency_avg:this.completionRequestLatencyStats.mean(),latency_p50:this.completionRequestLatencyStats.percentile(50),latency_p95:this.completionRequestLatencyStats.percentile(95),latency_p99:this.completionRequestLatencyStats.percentile(99)},completion_request_canceled:{count:this.completionRequestCanceledStats.count(),latency_avg:this.completionRequestCanceledStats.mean()},completion_request_timeout:{count:this.completionRequestTimeoutCount}}}windowed(){let t=this.recentCompletionRequestLatencies.getValues(),r=t.filter(s=>Number.isNaN(s)),n=t.filter(s=>!Number.isNaN(s)),i=n.reduce((s,a)=>s+a,0)/n.length;return {values:t,stats:{total:t.length,timeouts:r.length,responses:n.length,averageResponseTime:i}}}check(t){if(this.config.checks.disable)return null;let r=this.config.checks,{values:n,stats:{total:i,timeouts:s,responses:a,averageResponseTime:o}}=t;return n.slice(-Math.min(this.config.windowSize,r.healthy.windowSize)).every(c=>c<r.healthy.latency)?"healthy":s/i>r.highTimeoutRate.rate&&s>=r.highTimeoutRate.count?"highTimeoutRate":o>r.slowResponseTime.latency&&a>=r.slowResponseTime.count?"slowResponseTime":null}};var iO=or(Tl()),w_=or(b_()),sO=or(tO());var md=Qt.child({component:"CaCert"}),gd=[],S_;function aO(e){S_||(S_=rO__default.default.createSecureContext);let t=e.filter(n=>typeof n=="string"?n.trim().length>0:!0),r=[...gd,...t].distinct();md.debug(`Loaded ${r.length-gd.length} extra certs.`),gd=r,rO__default.default.createSecureContext=n=>{let i=S_(n);return gd.forEach(s=>{i.context.addCACert(s);}),i};}async function nO(e){md.debug(`Loading extra certs from ${e}.`);let t=(await e.split(E___default.default.delimiter).mapAsync(async r=>{try{return (await iO.default.readFile(r)).toString()}catch{return null}})).join(`
`).split(/(?=-----BEGIN\sCERTIFICATE-----)/g).distinct();aO(t);}async function oO(e){if(e.ca!=="bundled")if(e.ca==="system")if(process.platform==="win32")md.debug("Loading extra certs from win-ca."),w_.default.exe(E___default.default.join("win-ca","roots.exe")),(0, w_.default)({fallback:!0,inject:"+"});else if(process.platform==="darwin"){md.debug("Loading extra certs from mac-ca.");let t=sO.get();aO(t);}else await nO(E___default.default.join("/etc/ssl/certs/ca-certificates.crt"));else e.ca&&await nO(e.ca);}var _d=class e extends events.EventEmitter{constructor(){super();this.logger=Qt.child({component:"TabbyAgent"});this.anonymousUsageLogger=new Ef;this.config=R0;this.userConfig={};this.clientConfig={};this.status="notInitialized";this.issues=[];this.completionCache=new _f;this.completionDebounce=new vf;this.completionProviderStats=new xf;this.tryingConnectTimer=setInterval(async()=>{this.status==="disconnected"&&(this.logger.debug("Trying to connect..."),await this.healthCheck());},e.tryConnectInterval),this.submitStatsTimer=setInterval(async()=>{await this.submitStats();},e.submitStatsInterval);}static{this.tryConnectInterval=1e3*30;}static{this.submitStatsInterval=1e3*60*60*24;}async applyConfig(){let r=this.config,n=this.status;this.config=s1(R0,this.userConfig,this.clientConfig),xu.forEach(s=>s.level=this.config.logs.level),this.anonymousUsageLogger.disabled=this.config.anonymousUsageTracking.disable,await oO(this.config.tls),rt(this.config.server.token)&&this.config.server.requestHeaders.Authorization===void 0?this.config.server.endpoint!==this.auth?.endpoint&&(this.auth=new gf(this.config.server.endpoint),await this.auth.init({dataStore:this.dataStore}),this.auth.on("updated",()=>{this.setupApi();})):this.auth=void 0,(0, yd.default)(r.server,this.config.server)||(this.serverHealthState=void 0,this.completionProviderStats.resetWindowed(),this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate"),this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0),await this.setupApi(),(0, yd.default)(r.server,this.config.server)||n==="unauthorized"&&this.status==="unauthorized"&&this.emitAuthRequired();let i={event:"configUpdated",config:this.config};this.logger.debug({event:i},"Config updated"),super.emit("configUpdated",i);}async setupApi(){let r=rt(this.config.server.token)?this.auth?.token?`Bearer ${this.auth.token}`:void 0:`Bearer ${this.config.server.token}`;this.api=Ls({baseUrl:this.config.server.endpoint.replace(/\/+$/,""),headers:{Authorization:r,...this.config.server.requestHeaders}}),await this.healthCheck();}changeStatus(r){if(this.status!=r){this.status=r;let n={event:"statusChanged",status:r};this.logger.debug({event:n},"Status changed"),super.emit("statusChanged",n),this.status==="unauthorized"&&this.emitAuthRequired();}}issueFromName(r){switch(r){case"highCompletionTimeoutRate":return {name:"highCompletionTimeoutRate",completionResponseStats:this.completionProviderStats.windowed().stats};case"slowCompletionResponseTime":return {name:"slowCompletionResponseTime",completionResponseStats:this.completionProviderStats.windowed().stats};case"connectionFailed":return {name:"connectionFailed",message:this.connectionErrorMessage}}}pushIssue(r){this.issues.includes(r)||(this.issues.push(r),this.logger.debug({issue:r},"Issues Pushed"),this.emitIssueUpdated());}popIssue(r){let n=this.issues.indexOf(r);n>=0&&(this.issues.splice(n,1),this.logger.debug({issue:r},"Issues Popped"),this.emitIssueUpdated());}emitAuthRequired(){let r={event:"authRequired",server:this.config.server};super.emit("authRequired",r);}emitIssueUpdated(){let r={event:"issuesUpdated",issues:this.issues};super.emit("issuesUpdated",r);}async submitStats(){let r=this.completionProviderStats.stats();r.completion_request.count>0&&(await this.anonymousUsageLogger.event("AgentStats",{stats:r}),this.completionProviderStats.reset(),this.logger.debug({stats:r},"Stats submitted"));}createAbortSignal(r){let n=Math.min(2147483647,r?.timeout||this.config.server.requestTimeout);return Jo([AbortSignal.timeout(n),r?.signal])}async healthCheck(r){let n=Si(),i="/v1/health",s=this.config.server.endpoint+i,a={signal:this.createAbortSignal({signal:r?.signal})};try{if(!this.api)throw new Error("http client not initialized");this.logger.debug({requestId:n,requestOptions:a,url:s},"Health check request");let o;if(r?.method==="POST"?o=await this.api.POST(i,a):o=await this.api.GET(i,a),o.error||!o.response.ok)throw new Lr(o.response);this.logger.debug({requestId:n,response:o},"Health check response"),this.changeStatus("ready"),this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0;let c=o.data;typeof c=="object"&&c.model!==void 0&&c.device!==void 0&&(this.serverHealthState=c,this.anonymousUsageLogger.uniqueEvent("AgentConnected",c));}catch(o){if(this.serverHealthState=void 0,o instanceof Lr&&o.status==405&&r?.method!=="POST")return await this.healthCheck({method:"POST"});if(o instanceof Lr&&[401,403].includes(o.status))this.logger.debug({requestId:n,error:o},"Health check error: unauthorized"),this.changeStatus("unauthorized");else {if(eu(o))this.logger.debug({requestId:n,error:o},"Health check error: timeout"),this.connectionErrorMessage=`GET ${s}: Timed out.`;else if(wi(o))this.logger.debug({requestId:n,error:o},"Health check error: canceled"),this.connectionErrorMessage=`GET ${s}: Canceled.`;else {this.logger.error({requestId:n,error:o},"Health check error: unknown error");let c=o instanceof Error?sg(o):JSON.stringify(o);this.connectionErrorMessage=`GET ${s}: Request failed: 
${c}`;}this.pushIssue("connectionFailed"),this.changeStatus("disconnected");}}}createSegments(r){let n=this.config.completion.prompt.maxPrefixLines,i=this.config.completion.prompt.maxSuffixLines,{prefixLines:s,suffixLines:a}=r,o=s.slice(Math.max(s.length-n,0)).join(""),c;this.config.completion.prompt.experimentalStripAutoClosingCharacters&&r.mode!=="fill-in-line"?c=`
`+a.slice(1,i).join(""):c=a.slice(0,i).join("");let l,u=this.config.completion.prompt.clipboard;return r.clipboard.length>=u.minChars&&r.clipboard.length<=u.maxChars&&(l=r.clipboard),{prefix:o,suffix:c,clipboard:l}}async initialize(r){if(this.dataStore=r?.dataStore,await this.anonymousUsageLogger.init({dataStore:this.dataStore}),r.clientProperties){let{user:n,session:i}=r.clientProperties;xu.forEach(s=>s.setBindings?.({...i})),i&&Object.entries(i).forEach(([s,a])=>{this.anonymousUsageLogger.setSessionProperties(s,a);}),n&&Object.entries(n).forEach(([s,a])=>{this.anonymousUsageLogger.setUserProperties(s,a);});}return za&&(await za.load(),this.userConfig=za.config,za.on("updated",async n=>{this.userConfig=n,await this.applyConfig();}),za.watch()),r.config&&(this.clientConfig=r.config),await this.applyConfig(),await this.anonymousUsageLogger.uniqueEvent("AgentInitialized"),this.logger.debug({options:r},"Initialized"),this.status!=="notInitialized"}async finalize(){return this.status==="finalized"?!1:(await this.submitStats(),this.tryingConnectTimer&&clearInterval(this.tryingConnectTimer),this.submitStatsTimer&&clearInterval(this.submitStatsTimer),this.changeStatus("finalized"),!0)}async updateClientProperties(r,n,i){switch(r){case"session":xu.forEach(s=>s.setBindings?.(Bs({},n,i))),this.anonymousUsageLogger.setSessionProperties(n,i);break;case"user":this.anonymousUsageLogger.setUserProperties(n,i);break}return !0}async updateConfig(r,n){let i=ll(this.clientConfig,r);return (0, yd.default)(i,n)||(n===void 0?fl(this.clientConfig,r):Bs(this.clientConfig,r,n),await this.applyConfig()),!0}async clearConfig(r){return await this.updateConfig(r,void 0)}getConfig(){return this.config}getStatus(){return this.status}getIssues(){return this.issues}getIssueDetail(r){let n=this.getIssues();return r.index!==void 0&&r.index<n.length?this.issueFromName(n[r.index]):r.name!==void 0&&this.issues.includes(r.name)?this.issueFromName(r.name):null}getServerHealthState(){return this.serverHealthState??null}async requestAuthUrl(r){if(this.status==="notInitialized")throw new Error("Agent is not initialized");return await this.healthCheck(r),this.status!=="unauthorized"||!this.auth?null:await this.auth.requestAuthUrl(r)}async waitForAuthToken(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.status!=="unauthorized"||!this.auth||(await this.auth.pollingToken(r,n),await this.setupApi());}async provideCompletions(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.logger.trace({request:r},"Call provideCompletions"),this.nonParallelProvideCompletionAbortController&&this.nonParallelProvideCompletionAbortController.abort(),this.nonParallelProvideCompletionAbortController=new AbortController;let i=Jo([this.nonParallelProvideCompletionAbortController.signal,n?.signal]),s,a={triggerMode:r.manually?"manual":"auto",cacheHit:!1,aborted:!1,requestSent:!1,requestLatency:0,requestCanceled:!1,requestTimeout:!1},o,c=new Ys(r);try{if(this.completionCache.has(c))a.cacheHit=!0,this.logger.debug({context:c},"Completion cache hit"),await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:0},{signal:i}),s=this.completionCache.get(c);else {a.cacheHit=!1;let l=this.createSegments(c);if(rt(l.prefix))a=void 0,this.logger.debug("Segment prefix is blank, returning empty completion response"),s={id:"agent-"+Si(),choices:[]};else {await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:this.completionProviderStats.windowed().stats.averageResponseTime},n);let u=Si();a.requestSent=!0,o=performance.now();try{if(!this.api)throw new Error("http client not initialized");let f="/v1/completions",h={body:{language:r.language,segments:l,user:this.auth?.user},signal:this.createAbortSignal({signal:i})};this.logger.debug({requestId:u,requestOptions:h,url:this.config.server.endpoint+f},"Completion request");let p=await this.api.POST(f,h);if(p.error||!p.response.ok)throw new Lr(p.response);this.logger.debug({requestId:u,response:p},"Completion response");let m=p.data;a.requestLatency=performance.now()-o,s={id:m.id,choices:m.choices.map(v=>({index:v.index,text:v.text,replaceRange:{start:r.position,end:r.position}}))};}catch(f){throw wi(f)?(this.logger.debug({requestId:u,error:f},"Completion request canceled"),a.requestCanceled=!0,a.requestLatency=performance.now()-o):eu(f)?(this.logger.debug({requestId:u,error:f},"Completion request timeout"),a.requestTimeout=!0,a.requestLatency=NaN):(this.logger.error({requestId:u,error:f},"Completion request failed with unknown error"),this.healthCheck()),f}if(s=await dP(c,this.config.postprocess,s),i.aborted)throw i.reason;this.completionCache.buildCache(c,JSON.parse(JSON.stringify(s)));}}if(s=await hP(c,this.config.postprocess,s),i.aborted)throw i.reason}catch(l){throw wi(l)||eu(l)?a&&(a.aborted=!0):a=void 0,l}finally{if(a&&(this.completionProviderStats.add(a),a.requestSent&&!a.requestCanceled)){let l=this.completionProviderStats.windowed();switch(this.completionProviderStats.check(l)){case"healthy":this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate");break;case"highTimeoutRate":this.popIssue("slowCompletionResponseTime"),this.pushIssue("highCompletionTimeoutRate");break;case"slowResponseTime":this.popIssue("highCompletionTimeoutRate"),this.pushIssue("slowCompletionResponseTime");break}}}return this.logger.trace({context:c,completionResponse:s},"Return from provideCompletions"),s}async postEvent(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.completionProviderStats.addEvent(r.type);let i=Si();try{if(!this.api)throw new Error("http client not initialized");let s="/v1/events",a={body:r,params:{query:{select_kind:r.select_kind}},signal:this.createAbortSignal(n),parseAs:"text"};this.logger.debug({requestId:i,requestOptions:a,url:this.config.server.endpoint+s},"Event request");let o=await this.api.POST(s,a);if(o.error||!o.response.ok)throw new Lr(o.response);return this.logger.debug({requestId:i,response:o},"Event response"),!0}catch(s){return eu(s)?this.logger.debug({requestId:i,error:s},"Event request timeout"):wi(s)?this.logger.debug({requestId:i,error:s},"Event request canceled"):this.logger.error({requestId:i,error:s},"Event request failed with unknown error"),!1}}};var uO=["statusChanged","configUpdated","authRequired","issuesUpdated"];var vd=class{constructor(){this.process=process;this.inStream=process.stdin;this.outStream=process.stdout;this.logger=Qt.child({component:"JsonLineServer"});this.abortControllers={};}async handleLine(t){let r;try{r=JSON.parse(t);}catch(i){this.logger.error({error:i},`Failed to parse request: ${t}`);return}this.logger.debug({request:r},"Received request");let n=await this.handleRequest(r);this.sendResponse(n),this.logger.debug({response:n},"Sent response");}async handleRequest(t){let r=0,n=[0,null],i=new AbortController;try{if(!this.agent)throw new Error(`Agent not bound.
`);r=t[0],n[0]=r;let s=t[1].func;if(s==="cancelRequest")n[1]=this.cancelRequest(t);else {let a=this.agent[s];if(!a)throw new Error(`Unknown function: ${s}`);let o=t[1].args;o.length>0&&typeof o[o.length-1]=="object"&&o[o.length-1].signal&&(this.abortControllers[r]=i,o[o.length-1].signal=i.signal),n[1]=await a.apply(this.agent,o);}}catch(s){wi(s)?this.logger.debug({error:s,request:t},"Request canceled"):this.logger.error({error:s,request:t},"Failed to handle request");}finally{this.abortControllers[r]&&delete this.abortControllers[r];}return n}cancelRequest(t){let r=t[1].args[0],n=this.abortControllers[r];return n?(n.abort(),!0):!1}sendResponse(t){this.outStream.write(JSON.stringify(t)+`
`);}bind(t){this.agent=t;for(let r of uO)this.agent.on(r,n=>{this.sendResponse([0,n]);});}listen(){wZ__default.default.createInterface({input:this.inStream}).on("line",t=>{this.handleLine(t);}),["SIGTERM","SIGINT"].forEach(t=>{this.process.on(t,async()=>{this.agent&&this.agent.getStatus()!=="finalized"&&await this.agent.finalize(),this.process.exit(0);});});}};var vi=or(DM());var Lh=class e{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0;}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){for(let n of t)if(e.isIncremental(n)){let i=OM(n.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(a,this._content.length);let o=Math.max(i.start.line,0),c=Math.max(i.end.line,0),l=this._lineOffsets,u=kM(n.text,!1,s);if(c-o===u.length)for(let h=0,p=u.length;h<p;h++)l[h+o+1]=u[h];else u.length<1e4?l.splice(o+1,c-o,...u):this._lineOffsets=l=l.slice(0,o+1).concat(u,l.slice(c+1));let f=n.text.length-(a-s);if(f!==0)for(let h=o+1+u.length,p=l.length;h<p;h++)l[h]=l[h]+f;}else if(e.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r;}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=kM(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return {line:0,character:t};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>t?i=a:n=a+1;}let s=n-1;return {line:s,character:t-r[s]}}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},Fh;(function(e){function t(i,s,a,o){return new Lh(i,s,a,o)}e.create=t;function r(i,s,a){if(i instanceof Lh)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=r;function n(i,s){let a=i.getText(),o=Eb(s.map(qJ),(u,f)=>{let h=u.range.start.line-f.range.start.line;return h===0?u.range.start.character-f.range.start.character:h}),c=0,l=[];for(let u of o){let f=i.offsetAt(u.range.start);if(f<c)throw new Error("Overlapping edit");f>c&&l.push(a.substring(c,f)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end);}return l.push(a.substr(c)),l.join("")}e.applyEdits=n;})(Fh||(Fh={}));function Eb(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);Eb(n,t),Eb(i,t);let s=0,a=0,o=0;for(;s<n.length&&a<i.length;)t(n[s],i[a])<=0?e[o++]=n[s++]:e[o++]=i[a++];for(;s<n.length;)e[o++]=n[s++];for(;a<i.length;)e[o++]=i[a++];return e}function kM(e,t,r=0){let n=t?[r]:[];for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);(s===13||s===10)&&(s===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,n.push(r+i+1));}return n}function OM(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function qJ(e){let t=OM(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var Mh=class{constructor(){this.connection=(0, vi.createConnection)();this.documents=new vi.TextDocuments(Fh);this.logger=Qt.child({component:"LspServer"});this.connection.onInitialize(async t=>await this.initialize(t)),this.connection.onShutdown(async()=>await this.shutdown()),this.connection.onExit(async()=>this.exit()),this.connection.onCompletion(async t=>await this.completion(t));}bind(t){this.agent=t,this.agent.on("statusChanged",r=>{(r.status==="disconnected"||r.status==="unauthorized")&&this.showMessage({type:vi.MessageType.Warning,message:`Tabby agent status: ${r.status}`});});}listen(){this.documents.listen(this.connection),this.connection.listen();}async initialize(t){if(this.logger.debug({params:t},"LSP: initialize: request"),!this.agent)throw new Error(`Agent not bound.
`);let{clientInfo:r,capabilities:n}=t;return await this.agent.initialize({clientProperties:{session:{client:`${r?.name} ${r?.version??""}`,ide:{name:r?.name,version:r?.version},tabby_plugin:{name:`${Ru} (LSP)`,version:Iu}}}}),{capabilities:{textDocumentSync:{openClose:!0,change:vi.TextDocumentSyncKind.Incremental},completionProvider:{}},serverInfo:{name:Ru,version:Iu}}}async shutdown(){if(this.logger.debug("LSP: shutdown: request"),!this.agent)throw new Error(`Agent not bound.
`);await this.agent.finalize();}exit(){return this.logger.debug("LSP: exit: request"),process.exit(0)}async showMessage(t){this.logger.debug({params:t},"LSP server notification: window/showMessage"),await this.connection.sendNotification("window/showMessage",t);}async completion(t){if(this.logger.debug({params:t},"LSP: textDocument/completion: request"),!this.agent)throw new Error(`Agent not bound.
`);try{let r=this.buildCompletionRequest(t),n=await this.agent.provideCompletions(r),i=this.toCompletionList(n,t);return this.logger.debug({completionList:i},"LSP: textDocument/completion: response"),i}catch(r){wi(r)?this.logger.debug({error:r},"LSP: textDocument/completion: canceled"):this.logger.error({error:r},"LSP: textDocument/completion: error");}return {isIncomplete:!0,items:[]}}buildCompletionRequest(t,r=!1){let{textDocument:n,position:i}=t,s=this.documents.get(n.uri);return {filepath:s.uri,language:s.languageId,text:s.getText(),position:s.offsetAt(i),manually:r}}toCompletionList(t,r){let{textDocument:n,position:i}=r,s=this.documents.get(n.uri),a=s.getText({start:{line:i.line,character:0},end:i}),o=a.match(/(\w+)$/)?.[0]??"";return {isIncomplete:!0,items:t.choices.map(c=>{let l=c.text.slice(s.offsetAt(i)-c.replaceRange.start),u=Bt(l),f=u[0]||"",h=u[1]||"";return {label:o+f,labelDetails:{detail:h,description:"Tabby"},kind:vi.CompletionItemKind.Text,documentation:{kind:"markdown",value:`\`\`\`
${a+l}
\`\`\`
 ---
Suggested by Tabby.`},textEdit:{newText:o+l,range:{start:{line:i.line,character:i.character-o.length},end:s.positionAt(c.replaceRange.end)}},data:{completionId:t.id,choiceIndex:c.index}}})}}};var UJ=process.argv.slice(2),qh;UJ.indexOf("--lsp")>=0?qh=new Mh:qh=new vd;var $J=new _d;qh.bind($J);qh.listen();
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)
*/
//# sourceMappingURL=out.js.map
//# sourceMappingURL=cli.js.map
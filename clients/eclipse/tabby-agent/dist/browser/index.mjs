#!/usr/bin/env node
/**
 * Tabby Agent
 * https://github.com/tabbyml/tabby/tree/main/clients/tabby-agent
 * Copyright (c) 2023-2024 TabbyML, Inc.
 * Licensed under the Apache License 2.0.
 */
var MF=Object.create;var Rc=Object.defineProperty;var qF=Object.getOwnPropertyDescriptor;var FF=Object.getOwnPropertyNames;var $F=Object.getPrototypeOf,jF=Object.prototype.hasOwnProperty;var UF=(e,t,r)=>t in e?Rc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ic=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var jn=(e,t)=>()=>(e&&(t=e(e=0)),t);var X=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ws=(e,t)=>{for(var r in t)Rc(e,r,{get:t[r],enumerable:!0});},HS=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of FF(t))!jF.call(e,i)&&i!==r&&Rc(e,i,{get:()=>t[i],enumerable:!(n=qF(t,i))||n.enumerable});return e};var mr=(e,t,r)=>(r=e!=null?MF($F(e)):{},HS(!e||!e.__esModule?Rc(r,"default",{value:e,enumerable:!0}):r,e)),Ar=e=>HS(Rc({},"__esModule",{value:!0}),e);var Ct=(e,t,r)=>(UF(e,typeof t!="symbol"?t+"":t,r),r),Jp=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var H=(e,t,r)=>(Jp(e,t,"read from private field"),r?r.call(e):t.get(e)),Ke=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r);},qe=(e,t,r,n)=>(Jp(e,t,"write to private field"),t.set(e,r),r);var cl=(e,t,r,n)=>({set _(i){qe(e,t,i);},get _(){return H(e,t,n)}}),Oe=(e,t,r)=>(Jp(e,t,"access private method"),r);var d=jn(()=>{});var O={};Ws(O,{_debugEnd:()=>O1,_debugProcess:()=>L1,_events:()=>Y1,_eventsCount:()=>X1,_exiting:()=>h1,_fatalExceptions:()=>I1,_getActiveHandles:()=>y1,_getActiveRequests:()=>m1,_kill:()=>b1,_linkedBinding:()=>f1,_maxListeners:()=>G1,_preload_modules:()=>H1,_rawDebug:()=>u1,_startProfilerIdleNotifier:()=>k1,_stopProfilerIdleNotifier:()=>N1,_tickCallback:()=>D1,abort:()=>$1,addListener:()=>J1,allowedNodeEnvironmentFlags:()=>_1,arch:()=>JS,argv:()=>QS,argv0:()=>z1,assert:()=>T1,binding:()=>i1,chdir:()=>a1,config:()=>p1,cpuUsage:()=>fl,cwd:()=>s1,debugPort:()=>W1,default:()=>oE,dlopen:()=>g1,domain:()=>d1,emit:()=>tE,emitWarning:()=>n1,env:()=>ZS,execArgv:()=>e1,execPath:()=>B1,exit:()=>x1,features:()=>R1,hasUncaughtExceptionCaptureCallback:()=>P1,hrtime:()=>ll,kill:()=>E1,listeners:()=>iE,memoryUsage:()=>S1,moduleLoadList:()=>l1,nextTick:()=>GS,off:()=>Z1,on:()=>Li,once:()=>K1,openStdin:()=>C1,pid:()=>j1,platform:()=>KS,ppid:()=>U1,prependListener:()=>rE,prependOnceListener:()=>nE,reallyExit:()=>v1,release:()=>c1,removeAllListeners:()=>eE,removeListener:()=>Q1,resourceUsage:()=>w1,setSourceMapsEnabled:()=>V1,setUncaughtExceptionCaptureCallback:()=>A1,stderr:()=>q1,stdin:()=>F1,stdout:()=>M1,title:()=>XS,umask:()=>o1,uptime:()=>Ac,version:()=>t1,versions:()=>r1});function Qp(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function BF(){!zs||!es||(zs=!1,es.length?Di=es.concat(Di):ul=-1,Di.length&&VS());}function VS(){if(!zs){var e=setTimeout(BF,0);zs=!0;for(var t=Di.length;t;){for(es=Di,Di=[];++ul<t;)es&&es[ul].run();ul=-1,t=Di.length;}es=null,zs=!1,clearTimeout(e);}}function GS(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Di.push(new YS(e,t)),Di.length===1&&!zs&&setTimeout(VS,0);}function YS(e,t){this.fun=e,this.array=t;}function Pr(){}function f1(e){Qp("_linkedBinding");}function g1(e){Qp("dlopen");}function m1(){return []}function y1(){return []}function T1(e,t){if(!e)throw new Error(t||"assertion error")}function P1(){return !1}function Ac(){return lo.now()/1e3}function ll(e){var t=Math.floor((Date.now()-lo.now())*.001),r=lo.now()*.001,n=Math.floor(r)+t,i=Math.floor(r%1*1e9);return e&&(n=n-e[0],i=i-e[1],i<0&&(n--,i+=Zp)),[n,i]}function Li(){return oE}function iE(e){return []}var Di,zs,es,ul,XS,JS,KS,ZS,QS,e1,t1,r1,n1,i1,o1,s1,a1,c1,u1,l1,d1,h1,p1,v1,b1,fl,w1,S1,E1,x1,C1,_1,R1,I1,A1,D1,L1,O1,k1,N1,M1,q1,F1,$1,j1,U1,B1,W1,z1,H1,V1,lo,Kp,Zp,G1,Y1,X1,J1,K1,Z1,Q1,eE,tE,rE,nE,oE,dl=jn(()=>{d();p();h();Di=[],zs=!1,ul=-1;YS.prototype.run=function(){this.fun.apply(null,this.array);};XS="browser",JS="x64",KS="browser",ZS={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},QS=["/usr/bin/node"],e1=[],t1="v16.8.0",r1={},n1=function(e,t){console.warn((t?t+": ":"")+e);},i1=function(e){Qp("binding");},o1=function(e){return 0},s1=function(){return "/"},a1=function(e){},c1={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};u1=Pr,l1=[];d1={},h1=!1,p1={};v1=Pr,b1=Pr,fl=function(){return {}},w1=fl,S1=fl,E1=Pr,x1=Pr,C1=Pr,_1={};R1={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},I1=Pr,A1=Pr;D1=Pr,L1=Pr,O1=Pr,k1=Pr,N1=Pr,M1=void 0,q1=void 0,F1=void 0,$1=Pr,j1=2,U1=1,B1="/bin/usr/node",W1=9229,z1="node",H1=[],V1=Pr,lo={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};lo.now===void 0&&(Kp=Date.now(),lo.timing&&lo.timing.navigationStart&&(Kp=lo.timing.navigationStart),lo.now=()=>Date.now()-Kp);Zp=1e9;ll.bigint=function(e){var t=ll(e);return typeof BigInt>"u"?t[0]*Zp+t[1]:BigInt(t[0]*Zp)+BigInt(t[1])};G1=10,Y1={},X1=0;J1=Li,K1=Li,Z1=Li,Q1=Li,eE=Li,tE=Pr,rE=Li,nE=Li;oE={version:t1,versions:r1,arch:JS,platform:KS,release:c1,_rawDebug:u1,moduleLoadList:l1,binding:i1,_linkedBinding:f1,_events:Y1,_eventsCount:X1,_maxListeners:G1,on:Li,addListener:J1,once:K1,off:Z1,removeListener:Q1,removeAllListeners:eE,emit:tE,prependListener:rE,prependOnceListener:nE,listeners:iE,domain:d1,_exiting:h1,config:p1,dlopen:g1,uptime:Ac,_getActiveRequests:m1,_getActiveHandles:y1,reallyExit:v1,_kill:b1,cpuUsage:fl,resourceUsage:w1,memoryUsage:S1,kill:E1,exit:x1,openStdin:C1,allowedNodeEnvironmentFlags:_1,assert:T1,features:R1,_fatalExceptions:I1,setUncaughtExceptionCaptureCallback:A1,hasUncaughtExceptionCaptureCallback:P1,emitWarning:n1,nextTick:GS,_tickCallback:D1,_debugProcess:L1,_debugEnd:O1,_startProfilerIdleNotifier:k1,_stopProfilerIdleNotifier:N1,stdout:M1,stdin:F1,stderr:q1,abort:$1,umask:o1,chdir:a1,cwd:s1,env:ZS,title:XS,argv:QS,execArgv:e1,pid:j1,ppid:U1,execPath:B1,debugPort:W1,hrtime:ll,argv0:z1,_preload_modules:H1,setSourceMapsEnabled:V1};});var h=jn(()=>{dl();});var ho={};Ws(ho,{Buffer:()=>M,INSPECT_MAX_BYTES:()=>VF,default:()=>fo,kMaxLength:()=>GF});function WF(){if(sE)return Pc;sE=!0,Pc.byteLength=a,Pc.toByteArray=l,Pc.fromByteArray=w;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function s(y){var _=y.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=y.indexOf("=");x===-1&&(x=_);var D=x===_?0:4-x%4;return [x,D]}function a(y){var _=s(y),x=_[0],D=_[1];return (x+D)*3/4-D}function c(y,_,x){return (_+x)*3/4-x}function l(y){var _,x=s(y),D=x[0],A=x[1],C=new r(c(y,D,A)),R=0,T=A>0?D-4:D,$;for($=0;$<T;$+=4)_=t[y.charCodeAt($)]<<18|t[y.charCodeAt($+1)]<<12|t[y.charCodeAt($+2)]<<6|t[y.charCodeAt($+3)],C[R++]=_>>16&255,C[R++]=_>>8&255,C[R++]=_&255;return A===2&&(_=t[y.charCodeAt($)]<<2|t[y.charCodeAt($+1)]>>4,C[R++]=_&255),A===1&&(_=t[y.charCodeAt($)]<<10|t[y.charCodeAt($+1)]<<4|t[y.charCodeAt($+2)]>>2,C[R++]=_>>8&255,C[R++]=_&255),C}function u(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function g(y,_,x){for(var D,A=[],C=_;C<x;C+=3)D=(y[C]<<16&16711680)+(y[C+1]<<8&65280)+(y[C+2]&255),A.push(u(D));return A.join("")}function w(y){for(var _,x=y.length,D=x%3,A=[],C=16383,R=0,T=x-D;R<T;R+=C)A.push(g(y,R,R+C>T?T:R+C));return D===1?(_=y[x-1],A.push(e[_>>2]+e[_<<4&63]+"==")):D===2&&(_=(y[x-2]<<8)+y[x-1],A.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),A.join("")}return Pc}function zF(){if(aE)return hl;aE=!0;return hl.read=function(e,t,r,n,i){var o,s,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,g=r?i-1:0,w=r?-1:1,y=e[t+g];for(g+=w,o=y&(1<<-u)-1,y>>=-u,u+=a;u>0;o=o*256+e[t+g],g+=w,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=s*256+e[t+g],g+=w,u-=8);if(o===0)o=1-l;else {if(o===c)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l;}return (y?-1:1)*s*Math.pow(2,o-n)},hl.write=function(e,t,r,n,i,o){var s,a,c,l=o*8-i-1,u=(1<<l)-1,g=u>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,_=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+g>=1?t+=w/c:t+=w*Math.pow(2,1-g),t*c>=2&&(s++,c/=2),s+g>=u?(a=0,s=u):s+g>=1?(a=(t*c-1)*Math.pow(2,i),s=s+g):(a=t*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;e[r+y]=a&255,y+=_,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+y]=s&255,y+=_,s/=256,l-=8);e[r+y-_]|=x*128;},hl}function HF(){if(cE)return ts;cE=!0;let e=WF(),t=zF(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ts.Buffer=s,ts.SlowBuffer=A,ts.INSPECT_MAX_BYTES=50;let n=2147483647;ts.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let L=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(L,v),L.foo()===42}catch{return !1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');let v=new Uint8Array(L);return Object.setPrototypeOf(v,s.prototype),v}function s(L,v,b){if(typeof L=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(L)}return a(L,v,b)}s.poolSize=8192;function a(L,v,b){if(typeof L=="string")return g(L,v);if(ArrayBuffer.isView(L))return y(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(at(L,ArrayBuffer)||L&&at(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(at(L,SharedArrayBuffer)||L&&at(L.buffer,SharedArrayBuffer)))return _(L,v,b);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=L.valueOf&&L.valueOf();if(E!=null&&E!==L)return s.from(E,v,b);let j=x(L);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return s.from(L[Symbol.toPrimitive]("string"),v,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}s.from=function(L,v,b){return a(L,v,b)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function l(L,v,b){return c(L),L<=0?o(L):v!==void 0?typeof b=="string"?o(L).fill(v,b):o(L).fill(v):o(L)}s.alloc=function(L,v,b){return l(L,v,b)};function u(L){return c(L),o(L<0?0:D(L)|0)}s.allocUnsafe=function(L){return u(L)},s.allocUnsafeSlow=function(L){return u(L)};function g(L,v){if((typeof v!="string"||v==="")&&(v="utf8"),!s.isEncoding(v))throw new TypeError("Unknown encoding: "+v);let b=C(L,v)|0,E=o(b),j=E.write(L,v);return j!==b&&(E=E.slice(0,j)),E}function w(L){let v=L.length<0?0:D(L.length)|0,b=o(v);for(let E=0;E<v;E+=1)b[E]=L[E]&255;return b}function y(L){if(at(L,Uint8Array)){let v=new Uint8Array(L);return _(v.buffer,v.byteOffset,v.byteLength)}return w(L)}function _(L,v,b){if(v<0||L.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<v+(b||0))throw new RangeError('"length" is outside of buffer bounds');let E;return v===void 0&&b===void 0?E=new Uint8Array(L):b===void 0?E=new Uint8Array(L,v):E=new Uint8Array(L,v,b),Object.setPrototypeOf(E,s.prototype),E}function x(L){if(s.isBuffer(L)){let v=D(L.length)|0,b=o(v);return b.length===0||L.copy(b,0,0,v),b}if(L.length!==void 0)return typeof L.length!="number"||an(L.length)?o(0):w(L);if(L.type==="Buffer"&&Array.isArray(L.data))return w(L.data)}function D(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function A(L){return +L!=L&&(L=0),s.alloc(+L)}s.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==s.prototype},s.compare=function(v,b){if(at(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),at(b,Uint8Array)&&(b=s.from(b,b.offset,b.byteLength)),!s.isBuffer(v)||!s.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===b)return 0;let E=v.length,j=b.length;for(let G=0,ee=Math.min(E,j);G<ee;++G)if(v[G]!==b[G]){E=v[G],j=b[G];break}return E<j?-1:j<E?1:0},s.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},s.concat=function(v,b){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return s.alloc(0);let E;if(b===void 0)for(b=0,E=0;E<v.length;++E)b+=v[E].length;let j=s.allocUnsafe(b),G=0;for(E=0;E<v.length;++E){let ee=v[E];if(at(ee,Uint8Array))G+ee.length>j.length?(s.isBuffer(ee)||(ee=s.from(ee)),ee.copy(j,G)):Uint8Array.prototype.set.call(j,ee,G);else if(s.isBuffer(ee))ee.copy(j,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=ee.length;}return j};function C(L,v){if(s.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||at(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);let b=L.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&b===0)return 0;let j=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Ft(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return tt(L).length;default:if(j)return E?-1:Ft(L).length;v=(""+v).toLowerCase(),j=!0;}}s.byteLength=C;function R(L,v,b){let E=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,v>>>=0,b<=v))return "";for(L||(L="utf8");;)switch(L){case"hex":return ze(this,v,b);case"utf8":case"utf-8":return be(this,v,b);case"ascii":return pt(this,v,b);case"latin1":case"binary":return We(this,v,b);case"base64":return fe(this,v,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rt(this,v,b);default:if(E)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),E=!0;}}s.prototype._isBuffer=!0;function T(L,v,b){let E=L[v];L[v]=L[b],L[b]=E;}s.prototype.swap16=function(){let v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<v;b+=2)T(this,b,b+1);return this},s.prototype.swap32=function(){let v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<v;b+=4)T(this,b,b+3),T(this,b+1,b+2);return this},s.prototype.swap64=function(){let v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<v;b+=8)T(this,b,b+7),T(this,b+1,b+6),T(this,b+2,b+5),T(this,b+3,b+4);return this},s.prototype.toString=function(){let v=this.length;return v===0?"":arguments.length===0?be(this,0,v):R.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(v){if(!s.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:s.compare(this,v)===0},s.prototype.inspect=function(){let v="",b=ts.INSPECT_MAX_BYTES;return v=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(v+=" ... "),"<Buffer "+v+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(v,b,E,j,G){if(at(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),!s.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(b===void 0&&(b=0),E===void 0&&(E=v?v.length:0),j===void 0&&(j=0),G===void 0&&(G=this.length),b<0||E>v.length||j<0||G>this.length)throw new RangeError("out of range index");if(j>=G&&b>=E)return 0;if(j>=G)return -1;if(b>=E)return 1;if(b>>>=0,E>>>=0,j>>>=0,G>>>=0,this===v)return 0;let ee=G-j,Ce=E-b,Le=Math.min(ee,Ce),Ne=this.slice(j,G),Pe=v.slice(b,E);for(let Ie=0;Ie<Le;++Ie)if(Ne[Ie]!==Pe[Ie]){ee=Ne[Ie],Ce=Pe[Ie];break}return ee<Ce?-1:Ce<ee?1:0};function $(L,v,b,E,j){if(L.length===0)return -1;if(typeof b=="string"?(E=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,an(b)&&(b=j?0:L.length-1),b<0&&(b=L.length+b),b>=L.length){if(j)return -1;b=L.length-1;}else if(b<0)if(j)b=0;else return -1;if(typeof v=="string"&&(v=s.from(v,E)),s.isBuffer(v))return v.length===0?-1:P(L,v,b,E,j);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(L,v,b):Uint8Array.prototype.lastIndexOf.call(L,v,b):P(L,[v],b,E,j);throw new TypeError("val must be string, number or Buffer")}function P(L,v,b,E,j){let G=1,ee=L.length,Ce=v.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(L.length<2||v.length<2)return -1;G=2,ee/=2,Ce/=2,b/=2;}function Le(Pe,Ie){return G===1?Pe[Ie]:Pe.readUInt16BE(Ie*G)}let Ne;if(j){let Pe=-1;for(Ne=b;Ne<ee;Ne++)if(Le(L,Ne)===Le(v,Pe===-1?0:Ne-Pe)){if(Pe===-1&&(Pe=Ne),Ne-Pe+1===Ce)return Pe*G}else Pe!==-1&&(Ne-=Ne-Pe),Pe=-1;}else for(b+Ce>ee&&(b=ee-Ce),Ne=b;Ne>=0;Ne--){let Pe=!0;for(let Ie=0;Ie<Ce;Ie++)if(Le(L,Ne+Ie)!==Le(v,Ie)){Pe=!1;break}if(Pe)return Ne}return -1}s.prototype.includes=function(v,b,E){return this.indexOf(v,b,E)!==-1},s.prototype.indexOf=function(v,b,E){return $(this,v,b,E,!0)},s.prototype.lastIndexOf=function(v,b,E){return $(this,v,b,E,!1)};function q(L,v,b,E){b=Number(b)||0;let j=L.length-b;E?(E=Number(E),E>j&&(E=j)):E=j;let G=v.length;E>G/2&&(E=G/2);let ee;for(ee=0;ee<E;++ee){let Ce=parseInt(v.substr(ee*2,2),16);if(an(Ce))return ee;L[b+ee]=Ce;}return ee}function k(L,v,b,E){return He(Ft(v,L.length-b),L,b,E)}function V(L,v,b,E){return He(Et(v),L,b,E)}function K(L,v,b,E){return He(tt(v),L,b,E)}function ve(L,v,b,E){return He($t(v,L.length-b),L,b,E)}s.prototype.write=function(v,b,E,j){if(b===void 0)j="utf8",E=this.length,b=0;else if(E===void 0&&typeof b=="string")j=b,E=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(E)?(E=E>>>0,j===void 0&&(j="utf8")):(j=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let G=this.length-b;if((E===void 0||E>G)&&(E=G),v.length>0&&(E<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let ee=!1;for(;;)switch(j){case"hex":return q(this,v,b,E);case"utf8":case"utf-8":return k(this,v,b,E);case"ascii":case"latin1":case"binary":return V(this,v,b,E);case"base64":return K(this,v,b,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,v,b,E);default:if(ee)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),ee=!0;}},s.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(L,v,b){return v===0&&b===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(v,b))}function be(L,v,b){b=Math.min(L.length,b);let E=[],j=v;for(;j<b;){let G=L[j],ee=null,Ce=G>239?4:G>223?3:G>191?2:1;if(j+Ce<=b){let Le,Ne,Pe,Ie;switch(Ce){case 1:G<128&&(ee=G);break;case 2:Le=L[j+1],(Le&192)===128&&(Ie=(G&31)<<6|Le&63,Ie>127&&(ee=Ie));break;case 3:Le=L[j+1],Ne=L[j+2],(Le&192)===128&&(Ne&192)===128&&(Ie=(G&15)<<12|(Le&63)<<6|Ne&63,Ie>2047&&(Ie<55296||Ie>57343)&&(ee=Ie));break;case 4:Le=L[j+1],Ne=L[j+2],Pe=L[j+3],(Le&192)===128&&(Ne&192)===128&&(Pe&192)===128&&(Ie=(G&15)<<18|(Le&63)<<12|(Ne&63)<<6|Pe&63,Ie>65535&&Ie<1114112&&(ee=Ie));}}ee===null?(ee=65533,Ce=1):ee>65535&&(ee-=65536,E.push(ee>>>10&1023|55296),ee=56320|ee&1023),E.push(ee),j+=Ce;}return je(E)}let me=4096;function je(L){let v=L.length;if(v<=me)return String.fromCharCode.apply(String,L);let b="",E=0;for(;E<v;)b+=String.fromCharCode.apply(String,L.slice(E,E+=me));return b}function pt(L,v,b){let E="";b=Math.min(L.length,b);for(let j=v;j<b;++j)E+=String.fromCharCode(L[j]&127);return E}function We(L,v,b){let E="";b=Math.min(L.length,b);for(let j=v;j<b;++j)E+=String.fromCharCode(L[j]);return E}function ze(L,v,b){let E=L.length;(!v||v<0)&&(v=0),(!b||b<0||b>E)&&(b=E);let j="";for(let G=v;G<b;++G)j+=bn[L[G]];return j}function Rt(L,v,b){let E=L.slice(v,b),j="";for(let G=0;G<E.length-1;G+=2)j+=String.fromCharCode(E[G]+E[G+1]*256);return j}s.prototype.slice=function(v,b){let E=this.length;v=~~v,b=b===void 0?E:~~b,v<0?(v+=E,v<0&&(v=0)):v>E&&(v=E),b<0?(b+=E,b<0&&(b=0)):b>E&&(b=E),b<v&&(b=v);let j=this.subarray(v,b);return Object.setPrototypeOf(j,s.prototype),j};function Qe(L,v,b){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+v>b)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(v,b,E){v=v>>>0,b=b>>>0,E||Qe(v,b,this.length);let j=this[v],G=1,ee=0;for(;++ee<b&&(G*=256);)j+=this[v+ee]*G;return j},s.prototype.readUintBE=s.prototype.readUIntBE=function(v,b,E){v=v>>>0,b=b>>>0,E||Qe(v,b,this.length);let j=this[v+--b],G=1;for(;b>0&&(G*=256);)j+=this[v+--b]*G;return j},s.prototype.readUint8=s.prototype.readUInt8=function(v,b){return v=v>>>0,b||Qe(v,1,this.length),this[v]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(v,b){return v=v>>>0,b||Qe(v,2,this.length),this[v]|this[v+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(v,b){return v=v>>>0,b||Qe(v,2,this.length),this[v]<<8|this[v+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},s.prototype.readBigUInt64LE=Ur(function(v){v=v>>>0,he(v,"offset");let b=this[v],E=this[v+7];(b===void 0||E===void 0)&&Ue(v,this.length-8);let j=b+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,G=this[++v]+this[++v]*2**8+this[++v]*2**16+E*2**24;return BigInt(j)+(BigInt(G)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ur(function(v){v=v>>>0,he(v,"offset");let b=this[v],E=this[v+7];(b===void 0||E===void 0)&&Ue(v,this.length-8);let j=b*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],G=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E;return (BigInt(j)<<BigInt(32))+BigInt(G)}),s.prototype.readIntLE=function(v,b,E){v=v>>>0,b=b>>>0,E||Qe(v,b,this.length);let j=this[v],G=1,ee=0;for(;++ee<b&&(G*=256);)j+=this[v+ee]*G;return G*=128,j>=G&&(j-=Math.pow(2,8*b)),j},s.prototype.readIntBE=function(v,b,E){v=v>>>0,b=b>>>0,E||Qe(v,b,this.length);let j=b,G=1,ee=this[v+--j];for(;j>0&&(G*=256);)ee+=this[v+--j]*G;return G*=128,ee>=G&&(ee-=Math.pow(2,8*b)),ee},s.prototype.readInt8=function(v,b){return v=v>>>0,b||Qe(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},s.prototype.readInt16LE=function(v,b){v=v>>>0,b||Qe(v,2,this.length);let E=this[v]|this[v+1]<<8;return E&32768?E|4294901760:E},s.prototype.readInt16BE=function(v,b){v=v>>>0,b||Qe(v,2,this.length);let E=this[v+1]|this[v]<<8;return E&32768?E|4294901760:E},s.prototype.readInt32LE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},s.prototype.readInt32BE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},s.prototype.readBigInt64LE=Ur(function(v){v=v>>>0,he(v,"offset");let b=this[v],E=this[v+7];(b===void 0||E===void 0)&&Ue(v,this.length-8);let j=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(E<<24);return (BigInt(j)<<BigInt(32))+BigInt(b+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),s.prototype.readBigInt64BE=Ur(function(v){v=v>>>0,he(v,"offset");let b=this[v],E=this[v+7];(b===void 0||E===void 0)&&Ue(v,this.length-8);let j=(b<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return (BigInt(j)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+E)}),s.prototype.readFloatLE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),t.read(this,v,!0,23,4)},s.prototype.readFloatBE=function(v,b){return v=v>>>0,b||Qe(v,4,this.length),t.read(this,v,!1,23,4)},s.prototype.readDoubleLE=function(v,b){return v=v>>>0,b||Qe(v,8,this.length),t.read(this,v,!0,52,8)},s.prototype.readDoubleBE=function(v,b){return v=v>>>0,b||Qe(v,8,this.length),t.read(this,v,!1,52,8)};function lt(L,v,b,E,j,G){if(!s.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>j||v<G)throw new RangeError('"value" argument is out of bounds');if(b+E>L.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(v,b,E,j){if(v=+v,b=b>>>0,E=E>>>0,!j){let Ce=Math.pow(2,8*E)-1;lt(this,v,b,E,Ce,0);}let G=1,ee=0;for(this[b]=v&255;++ee<E&&(G*=256);)this[b+ee]=v/G&255;return b+E},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(v,b,E,j){if(v=+v,b=b>>>0,E=E>>>0,!j){let Ce=Math.pow(2,8*E)-1;lt(this,v,b,E,Ce,0);}let G=E-1,ee=1;for(this[b+G]=v&255;--G>=0&&(ee*=256);)this[b+G]=v/ee&255;return b+E},s.prototype.writeUint8=s.prototype.writeUInt8=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,1,255,0),this[b]=v&255,b+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,2,65535,0),this[b]=v&255,this[b+1]=v>>>8,b+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,2,65535,0),this[b]=v>>>8,this[b+1]=v&255,b+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,4,4294967295,0),this[b+3]=v>>>24,this[b+2]=v>>>16,this[b+1]=v>>>8,this[b]=v&255,b+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,4,4294967295,0),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=v&255,b+4};function sn(L,v,b,E,j){le(v,E,j,L,b,7);let G=Number(v&BigInt(4294967295));L[b++]=G,G=G>>8,L[b++]=G,G=G>>8,L[b++]=G,G=G>>8,L[b++]=G;let ee=Number(v>>BigInt(32)&BigInt(4294967295));return L[b++]=ee,ee=ee>>8,L[b++]=ee,ee=ee>>8,L[b++]=ee,ee=ee>>8,L[b++]=ee,b}function Jr(L,v,b,E,j){le(v,E,j,L,b,7);let G=Number(v&BigInt(4294967295));L[b+7]=G,G=G>>8,L[b+6]=G,G=G>>8,L[b+5]=G,G=G>>8,L[b+4]=G;let ee=Number(v>>BigInt(32)&BigInt(4294967295));return L[b+3]=ee,ee=ee>>8,L[b+2]=ee,ee=ee>>8,L[b+1]=ee,ee=ee>>8,L[b]=ee,b+8}s.prototype.writeBigUInt64LE=Ur(function(v,b=0){return sn(this,v,b,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ur(function(v,b=0){return Jr(this,v,b,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(v,b,E,j){if(v=+v,b=b>>>0,!j){let Le=Math.pow(2,8*E-1);lt(this,v,b,E,Le-1,-Le);}let G=0,ee=1,Ce=0;for(this[b]=v&255;++G<E&&(ee*=256);)v<0&&Ce===0&&this[b+G-1]!==0&&(Ce=1),this[b+G]=(v/ee>>0)-Ce&255;return b+E},s.prototype.writeIntBE=function(v,b,E,j){if(v=+v,b=b>>>0,!j){let Le=Math.pow(2,8*E-1);lt(this,v,b,E,Le-1,-Le);}let G=E-1,ee=1,Ce=0;for(this[b+G]=v&255;--G>=0&&(ee*=256);)v<0&&Ce===0&&this[b+G+1]!==0&&(Ce=1),this[b+G]=(v/ee>>0)-Ce&255;return b+E},s.prototype.writeInt8=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,1,127,-128),v<0&&(v=255+v+1),this[b]=v&255,b+1},s.prototype.writeInt16LE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,2,32767,-32768),this[b]=v&255,this[b+1]=v>>>8,b+2},s.prototype.writeInt16BE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,2,32767,-32768),this[b]=v>>>8,this[b+1]=v&255,b+2},s.prototype.writeInt32LE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,4,2147483647,-2147483648),this[b]=v&255,this[b+1]=v>>>8,this[b+2]=v>>>16,this[b+3]=v>>>24,b+4},s.prototype.writeInt32BE=function(v,b,E){return v=+v,b=b>>>0,E||lt(this,v,b,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[b]=v>>>24,this[b+1]=v>>>16,this[b+2]=v>>>8,this[b+3]=v&255,b+4},s.prototype.writeBigInt64LE=Ur(function(v,b=0){return sn(this,v,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ur(function(v,b=0){return Jr(this,v,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ir(L,v,b,E,j,G){if(b+E>L.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Dt(L,v,b,E,j){return v=+v,b=b>>>0,j||ir(L,v,b,4),t.write(L,v,b,E,23,4),b+4}s.prototype.writeFloatLE=function(v,b,E){return Dt(this,v,b,!0,E)},s.prototype.writeFloatBE=function(v,b,E){return Dt(this,v,b,!1,E)};function pe(L,v,b,E,j){return v=+v,b=b>>>0,j||ir(L,v,b,8),t.write(L,v,b,E,52,8),b+8}s.prototype.writeDoubleLE=function(v,b,E){return pe(this,v,b,!0,E)},s.prototype.writeDoubleBE=function(v,b,E){return pe(this,v,b,!1,E)},s.prototype.copy=function(v,b,E,j){if(!s.isBuffer(v))throw new TypeError("argument should be a Buffer");if(E||(E=0),!j&&j!==0&&(j=this.length),b>=v.length&&(b=v.length),b||(b=0),j>0&&j<E&&(j=E),j===E||v.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),v.length-b<j-E&&(j=v.length-b+E);let G=j-E;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,E,j):Uint8Array.prototype.set.call(v,this.subarray(E,j),b),G},s.prototype.fill=function(v,b,E,j){if(typeof v=="string"){if(typeof b=="string"?(j=b,b=0,E=this.length):typeof E=="string"&&(j=E,E=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!s.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(v.length===1){let ee=v.charCodeAt(0);(j==="utf8"&&ee<128||j==="latin1")&&(v=ee);}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(b<0||this.length<b||this.length<E)throw new RangeError("Out of range index");if(E<=b)return this;b=b>>>0,E=E===void 0?this.length:E>>>0,v||(v=0);let G;if(typeof v=="number")for(G=b;G<E;++G)this[G]=v;else {let ee=s.isBuffer(v)?v:s.from(v,j),Ce=ee.length;if(Ce===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(G=0;G<E-b;++G)this[G+b]=ee[G%Ce];}return this};let F={};function z(L,v,b){F[L]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,delete this.name;}get code(){return L}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0});}toString(){return `${this.name} [${L}]: ${this.message}`}};}z("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(L,v){return `The "${L}" argument must be of type number. Received type ${typeof v}`},TypeError),z("ERR_OUT_OF_RANGE",function(L,v,b){let E=`The value of "${L}" is out of range.`,j=b;return Number.isInteger(b)&&Math.abs(b)>2**32?j=Q(String(b)):typeof b=="bigint"&&(j=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(j=Q(j)),j+="n"),E+=` It must be ${v}. Received ${j}`,E},RangeError);function Q(L){let v="",b=L.length,E=L[0]==="-"?1:0;for(;b>=E+4;b-=3)v=`_${L.slice(b-3,b)}${v}`;return `${L.slice(0,b)}${v}`}function de(L,v,b){he(v,"offset"),(L[v]===void 0||L[v+b]===void 0)&&Ue(v,L.length-(b+1));}function le(L,v,b,E,j,G){if(L>b||L<v){let ee=typeof v=="bigint"?"n":"",Ce;throw v===0||v===BigInt(0)?Ce=`>= 0${ee} and < 2${ee} ** ${(G+1)*8}${ee}`:Ce=`>= -(2${ee} ** ${(G+1)*8-1}${ee}) and < 2 ** ${(G+1)*8-1}${ee}`,new F.ERR_OUT_OF_RANGE("value",Ce,L)}de(E,j,G);}function he(L,v){if(typeof L!="number")throw new F.ERR_INVALID_ARG_TYPE(v,"number",L)}function Ue(L,v,b){throw Math.floor(L)!==L?(he(L,b),new F.ERR_OUT_OF_RANGE("offset","an integer",L)):v<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE("offset",`>= ${0} and <= ${v}`,L)}let et=/[^+/0-9A-Za-z-_]/g;function vt(L){if(L=L.split("=")[0],L=L.trim().replace(et,""),L.length<2)return "";for(;L.length%4!==0;)L=L+"=";return L}function Ft(L,v){v=v||1/0;let b,E=L.length,j=null,G=[];for(let ee=0;ee<E;++ee){if(b=L.charCodeAt(ee),b>55295&&b<57344){if(!j){if(b>56319){(v-=3)>-1&&G.push(239,191,189);continue}else if(ee+1===E){(v-=3)>-1&&G.push(239,191,189);continue}j=b;continue}if(b<56320){(v-=3)>-1&&G.push(239,191,189),j=b;continue}b=(j-55296<<10|b-56320)+65536;}else j&&(v-=3)>-1&&G.push(239,191,189);if(j=null,b<128){if((v-=1)<0)break;G.push(b);}else if(b<2048){if((v-=2)<0)break;G.push(b>>6|192,b&63|128);}else if(b<65536){if((v-=3)<0)break;G.push(b>>12|224,b>>6&63|128,b&63|128);}else if(b<1114112){if((v-=4)<0)break;G.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128);}else throw new Error("Invalid code point")}return G}function Et(L){let v=[];for(let b=0;b<L.length;++b)v.push(L.charCodeAt(b)&255);return v}function $t(L,v){let b,E,j,G=[];for(let ee=0;ee<L.length&&!((v-=2)<0);++ee)b=L.charCodeAt(ee),E=b>>8,j=b%256,G.push(j),G.push(E);return G}function tt(L){return e.toByteArray(vt(L))}function He(L,v,b,E){let j;for(j=0;j<E&&!(j+b>=v.length||j>=L.length);++j)v[j+b]=L[j];return j}function at(L,v){return L instanceof v||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===v.name}function an(L){return L!==L}let bn=function(){let L="0123456789abcdef",v=new Array(256);for(let b=0;b<16;++b){let E=b*16;for(let j=0;j<16;++j)v[E+j]=L[b]+L[j];}return v}();function Ur(L){return typeof BigInt>"u"?no:L}function no(){throw new Error("BigInt not supported")}return ts}var Pc,sE,hl,aE,ts,cE,fo,M,VF,GF,Oi=jn(()=>{d();p();h();Pc={},sE=!1;hl={},aE=!1;ts={},cE=!1;fo=HF();M=fo.Buffer,VF=fo.INSPECT_MAX_BYTES,GF=fo.kMaxLength;});var p=jn(()=>{Oi();});function St(){St.init.call(this);}function pl(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function vE(e){return e._maxListeners===void 0?St.defaultMaxListeners:e._maxListeners}function dE(e,t,r,n){var i,o,s,a;if(pl(r),(o=e._events)===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),s===void 0)s=o[t]=r,++e._eventsCount;else if(typeof s=="function"?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=vE(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a);}return e}function YF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hE(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=YF.bind(n);return i.listener=r,n.wrapFn=i,i}function pE(e,t,r){var n=e._events;if(n===void 0)return [];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?function(o){for(var s=new Array(o.length),a=0;a<s.length;++a)s[a]=o[a].listener||o[a];return s}(i):bE(i,i.length)}function gE(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}function bE(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}var mE,yE,Hs,uE,lE,fE,Dr,rg=jn(()=>{d();p();h();Hs=typeof Reflect=="object"?Reflect:null,uE=Hs&&typeof Hs.apply=="function"?Hs.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};yE=Hs&&typeof Hs.ownKeys=="function"?Hs.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};lE=Number.isNaN||function(e){return e!=e};mE=St,St.EventEmitter=St,St.prototype._events=void 0,St.prototype._eventsCount=0,St.prototype._maxListeners=void 0;fE=10;Object.defineProperty(St,"defaultMaxListeners",{enumerable:!0,get:function(){return fE},set:function(e){if(typeof e!="number"||e<0||lE(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");fE=e;}}),St.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},St.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||lE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},St.prototype.getMaxListeners=function(){return vE(this)},St.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return !1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(a===void 0)return !1;if(typeof a=="function")uE(a,this,t);else {var c=a.length,l=bE(a,c);for(r=0;r<c;++r)uE(l[r],this,t);}return !0},St.prototype.addListener=function(e,t){return dE(this,e,t,!1)},St.prototype.on=St.prototype.addListener,St.prototype.prependListener=function(e,t){return dE(this,e,t,!0)},St.prototype.once=function(e,t){return pl(t),this.on(e,hE(this,e,t)),this},St.prototype.prependOnceListener=function(e,t){return pl(t),this.prependListener(e,hE(this,e,t)),this},St.prototype.removeListener=function(e,t){var r,n,i,o,s;if(pl(t),(n=this._events)===void 0)return this;if((r=n[e])===void 0)return this;if(r===t||r.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():function(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop();}(r,i),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,s||t);}return this},St.prototype.off=St.prototype.removeListener,St.prototype.removeAllListeners=function(e){var t,r,n;if((r=this._events)===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i,o=Object.keys(r);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=r[e])=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},St.prototype.listeners=function(e){return pE(this,e,!0)},St.prototype.rawListeners=function(e){return pE(this,e,!1)},St.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):gE.call(e,t)},St.prototype.listenerCount=gE,St.prototype.eventNames=function(){return this._eventsCount>0?yE(this._events):[]};Dr=mE;});var Dc={};Ws(Dc,{EventEmitter:()=>Un,default:()=>Dr,defaultMaxListeners:()=>XF,init:()=>JF,listenerCount:()=>KF,on:()=>ZF,once:()=>QF});var Un,XF,JF,KF,ZF,QF,ni=jn(()=>{d();p();h();rg();rg();Dr.once=function(e,t){return new Promise((r,n)=>{function i(...s){o!==void 0&&e.removeListener("error",o),r(s);}let o;t!=="error"&&(o=s=>{e.removeListener(name,i),n(s);},e.once("error",o)),e.once(t,i);})};Dr.on=function(e,t){let r=[],n=[],i=null,o=!1,s={async next(){let l=r.shift();if(l)return createIterResult(l,!1);if(i){let u=Promise.reject(i);return i=null,u}return o?createIterResult(void 0,!0):new Promise((u,g)=>n.push({resolve:u,reject:g}))},async return(){e.removeListener(t,a),e.removeListener("error",c),o=!0;for(let l of n)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){i=l,e.removeListener(t,a),e.removeListener("error",c);},[Symbol.asyncIterator](){return this}};return e.on(t,a),e.on("error",c),s;function a(...l){let u=n.shift();u?u.resolve(createIterResult(l,!1)):r.push(l);}function c(l){o=!0;let u=n.shift();u?u.reject(l):i=l,s.return();}};({EventEmitter:Un,defaultMaxListeners:XF,init:JF,listenerCount:KF,on:ZF,once:QF}=Dr);});var og=X((SJ,EE)=>{d();p();h();var SE=Object.prototype.toString;EE.exports=function(t){var r=SE.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&SE.call(t.callee)==="[object Function]"),n};});var DE=X((_J,PE)=>{d();p();h();var AE;Object.keys||(Lc=Object.prototype.hasOwnProperty,sg=Object.prototype.toString,xE=og(),ag=Object.prototype.propertyIsEnumerable,CE=!ag.call({toString:null},"toString"),_E=ag.call(function(){},"prototype"),Oc=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ml=function(e){var t=e.constructor;return t&&t.prototype===e},TE={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},RE=function(){if(typeof window>"u")return !1;for(var e in window)try{if(!TE["$"+e]&&Lc.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{ml(window[e]);}catch{return !0}}catch{return !0}return !1}(),IE=function(e){if(typeof window>"u"||!RE)return ml(e);try{return ml(e)}catch{return !1}},AE=function(t){var r=t!==null&&typeof t=="object",n=sg.call(t)==="[object Function]",i=xE(t),o=r&&sg.call(t)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=_E&&n;if(o&&t.length>0&&!Lc.call(t,0))for(var c=0;c<t.length;++c)s.push(String(c));if(i&&t.length>0)for(var l=0;l<t.length;++l)s.push(String(l));else for(var u in t)!(a&&u==="prototype")&&Lc.call(t,u)&&s.push(String(u));if(CE)for(var g=IE(t),w=0;w<Oc.length;++w)!(g&&Oc[w]==="constructor")&&Lc.call(t,Oc[w])&&s.push(Oc[w]);return s});var Lc,sg,xE,ag,CE,_E,Oc,ml,TE,RE,IE;PE.exports=AE;});var vl=X((AJ,kE)=>{d();p();h();var n$=Array.prototype.slice,i$=og(),LE=Object.keys,yl=LE?function(t){return LE(t)}:DE(),OE=Object.keys;yl.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return i$(n)?OE(n$.call(n)):OE(n)});}else Object.keys=yl;return Object.keys||yl};kE.exports=yl;});var ME=X((OJ,NE)=>{d();p();h();NE.exports=Error;});var FE=X((qJ,qE)=>{d();p();h();qE.exports=EvalError;});var jE=X((UJ,$E)=>{d();p();h();$E.exports=RangeError;});var BE=X((HJ,UE)=>{d();p();h();UE.exports=ReferenceError;});var cg=X((XJ,WE)=>{d();p();h();WE.exports=SyntaxError;});var ki=X((QJ,zE)=>{d();p();h();zE.exports=TypeError;});var VE=X((nK,HE)=>{d();p();h();HE.exports=URIError;});var kc=X((aK,GE)=>{d();p();h();GE.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return !1;if(typeof Symbol.iterator=="symbol")return !0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return !1;var i=42;t[r]=i;for(r in t)return !1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return !1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return !1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return !1}return !0};});var bl=X((fK,XE)=>{d();p();h();var YE=typeof Symbol<"u"&&Symbol,o$=kc();XE.exports=function(){return typeof YE!="function"||typeof Symbol!="function"||typeof YE("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:o$()};});var KE=X((gK,JE)=>{d();p();h();var ug={__proto__:null,foo:{}},s$=Object;JE.exports=function(){return {__proto__:ug}.foo===ug.foo&&!(ug instanceof s$)};});var ex=X((bK,QE)=>{d();p();h();var a$="Function.prototype.bind called on incompatible ",c$=Object.prototype.toString,u$=Math.max,l$="[object Function]",ZE=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},f$=function(t,r){for(var n=[],i=r,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},d$=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};QE.exports=function(t){var r=this;if(typeof r!="function"||c$.apply(r)!==l$)throw new TypeError(a$+r);for(var n=f$(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,ZE(n,arguments));return Object(u)===u?u:this}return r.apply(t,ZE(n,arguments))},s=u$(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+d$(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null;}return i};});var wl=X((xK,tx)=>{d();p();h();var h$=ex();tx.exports=Function.prototype.bind||h$;});var lg=X((RK,rx)=>{d();p();h();var p$=Function.prototype.call,g$=Object.prototype.hasOwnProperty,m$=wl();rx.exports=m$.call(p$,g$);});var Wn=X((DK,ax)=>{d();p();h();var nt,y$=ME(),v$=FE(),b$=jE(),w$=BE(),Xs=cg(),Ys=ki(),S$=VE(),sx=Function,fg=function(e){try{return sx('"use strict"; return ('+e+").constructor;")()}catch{}},rs=Object.getOwnPropertyDescriptor;var dg=function(){throw new Ys},E$=rs?function(){try{return dg}catch{try{return rs(arguments,"callee").get}catch{return dg}}}():dg,Vs=bl()(),x$=KE()(),yr=Object.getPrototypeOf||(x$?function(e){return e.__proto__}:null),Gs={},C$=typeof Uint8Array>"u"||!yr?nt:yr(Uint8Array),ns={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?nt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?nt:ArrayBuffer,"%ArrayIteratorPrototype%":Vs&&yr?yr([][Symbol.iterator]()):nt,"%AsyncFromSyncIteratorPrototype%":nt,"%AsyncFunction%":Gs,"%AsyncGenerator%":Gs,"%AsyncGeneratorFunction%":Gs,"%AsyncIteratorPrototype%":Gs,"%Atomics%":typeof Atomics>"u"?nt:Atomics,"%BigInt%":typeof BigInt>"u"?nt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?nt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?nt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?nt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":y$,"%eval%":eval,"%EvalError%":v$,"%Float32Array%":typeof Float32Array>"u"?nt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?nt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?nt:FinalizationRegistry,"%Function%":sx,"%GeneratorFunction%":Gs,"%Int8Array%":typeof Int8Array>"u"?nt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?nt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?nt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Vs&&yr?yr(yr([][Symbol.iterator]())):nt,"%JSON%":typeof JSON=="object"?JSON:nt,"%Map%":typeof Map>"u"?nt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Vs||!yr?nt:yr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?nt:Promise,"%Proxy%":typeof Proxy>"u"?nt:Proxy,"%RangeError%":b$,"%ReferenceError%":w$,"%Reflect%":typeof Reflect>"u"?nt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?nt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Vs||!yr?nt:yr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?nt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Vs&&yr?yr(""[Symbol.iterator]()):nt,"%Symbol%":Vs?Symbol:nt,"%SyntaxError%":Xs,"%ThrowTypeError%":E$,"%TypedArray%":C$,"%TypeError%":Ys,"%Uint8Array%":typeof Uint8Array>"u"?nt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?nt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?nt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?nt:Uint32Array,"%URIError%":S$,"%WeakMap%":typeof WeakMap>"u"?nt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?nt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?nt:WeakSet};var _$=function e(t){var r;if(t==="%AsyncFunction%")r=fg("async function () {}");else if(t==="%GeneratorFunction%")r=fg("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=fg("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype);}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&yr&&(r=yr(i.prototype));}return ns[t]=r,r},ix={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Nc=wl(),Sl=lg(),T$=Nc.call(Function.call,Array.prototype.concat),R$=Nc.call(Function.apply,Array.prototype.splice),ox=Nc.call(Function.call,String.prototype.replace),El=Nc.call(Function.call,String.prototype.slice),I$=Nc.call(Function.call,RegExp.prototype.exec),A$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P$=/\\(\\)?/g,D$=function(t){var r=El(t,0,1),n=El(t,-1);if(r==="%"&&n!=="%")throw new Xs("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xs("invalid intrinsic syntax, expected opening `%`");var i=[];return ox(t,A$,function(o,s,a,c){i[i.length]=a?ox(c,P$,"$1"):s||o;}),i},L$=function(t,r){var n=t,i;if(Sl(ix,n)&&(i=ix[n],n="%"+i[0]+"%"),Sl(ns,n)){var o=ns[n];if(o===Gs&&(o=_$(n)),typeof o>"u"&&!r)throw new Ys("intrinsic "+t+" exists, but is not available. Please file an issue!");return {alias:i,name:n,value:o}}throw new Xs("intrinsic "+t+" does not exist!")};ax.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Ys("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ys('"allowMissing" argument must be a boolean');if(I$(/^%?[^%]*%?$/,t)===null)throw new Xs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=D$(t),i=n.length>0?n[0]:"",o=L$("%"+i+"%",r),s=o.name,a=o.value,c=!1,l=o.alias;l&&(i=l[0],R$(n,T$([0,1],l)));for(var u=1,g=!0;u<n.length;u+=1){var w=n[u],y=El(w,0,1),_=El(w,-1);if((y==='"'||y==="'"||y==="`"||_==='"'||_==="'"||_==="`")&&y!==_)throw new Xs("property names with quotes must have matching quotes");if((w==="constructor"||!g)&&(c=!0),i+="."+w,s="%"+i+"%",Sl(ns,s))a=ns[s];else if(a!=null){if(!(w in a)){if(!r)throw new Ys("base intrinsic for "+t+" exists, but the property is not available.");return}if(rs&&u+1>=n.length){var x=rs(a,w);g=!!x,g&&"get"in x&&!("originalValue"in x.get)?a=x.get:a=a[w];}else g=Sl(a,w),a=a[w];g&&!c&&(ns[s]=a);}}return a};});var Cl=X((NK,cx)=>{d();p();h();var O$=Wn(),xl=O$("%Object.defineProperty%",!0)||!1;if(xl)try{xl({},"a",{value:1});}catch{xl=!1;}cx.exports=xl;});var Tl=X(($K,ux)=>{d();p();h();var k$=Wn(),_l=k$("%Object.getOwnPropertyDescriptor%",!0);if(_l)try{_l([],"length");}catch{_l=null;}ux.exports=_l;});var Rl=X((WK,dx)=>{d();p();h();var lx=Cl(),N$=cg(),Js=ki(),fx=Tl();dx.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Js("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Js("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Js("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Js("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Js("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Js("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!fx&&fx(t,r);if(lx)lx(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new N$("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")};});var Il=X((GK,px)=>{d();p();h();var hg=Cl(),hx=function(){return !!hg};hx.hasArrayLengthDefineBug=function(){if(!hg)return null;try{return hg([],"length",{value:1}).length!==1}catch{return !0}};px.exports=hx;});var po=X((KK,vx)=>{d();p();h();var M$=vl(),q$=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",F$=Object.prototype.toString,$$=Array.prototype.concat,gx=Rl(),j$=function(e){return typeof e=="function"&&F$.call(e)==="[object Function]"},mx=Il()(),U$=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!j$(n)||!n())return}mx?gx(e,t,r,!0):gx(e,t,r);},yx=function(e,t){var r=arguments.length>2?arguments[2]:{},n=M$(t);q$&&(n=$$.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)U$(e,n[i],t[n[i]],r[n[i]]);};yx.supportsDescriptors=!!mx;vx.exports=yx;});var xx=X((tZ,Ex)=>{d();p();h();var B$=Wn(),bx=Rl(),W$=Il()(),wx=Tl(),Sx=ki(),z$=B$("%Math.floor%");Ex.exports=function(t,r){if(typeof t!="function")throw new Sx("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||z$(r)!==r)throw new Sx("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&wx){var s=wx(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1);}return (i||o||!n)&&(W$?bx(t,"length",r,!0,!0):bx(t,"length",r)),t};});var is=X((oZ,Al)=>{d();p();h();var pg=wl(),Pl=Wn(),H$=xx(),V$=ki(),Tx=Pl("%Function.prototype.apply%"),Rx=Pl("%Function.prototype.call%"),Ix=Pl("%Reflect.apply%",!0)||pg.call(Rx,Tx),Cx=Cl(),G$=Pl("%Math.max%");Al.exports=function(t){if(typeof t!="function")throw new V$("a function is required");var r=Ix(pg,Rx,arguments);return H$(r,1+G$(0,t.length-(arguments.length-1)),!0)};var _x=function(){return Ix(pg,Tx,arguments)};Cx?Cx(Al.exports,"apply",{value:_x}):Al.exports.apply=_x;});var fn=X((uZ,Dx)=>{d();p();h();var Ax=Wn(),Px=is(),Y$=Px(Ax("String.prototype.indexOf"));Dx.exports=function(t,r){var n=Ax(t,!!r);return typeof n=="function"&&Y$(t,".prototype.")>-1?Px(n):n};});var gg=X((hZ,Mx)=>{d();p();h();var X$=vl(),kx=kc()(),Nx=fn(),Lx=Object,J$=Nx("Array.prototype.push"),Ox=Nx("Object.prototype.propertyIsEnumerable"),K$=kx?Object.getOwnPropertySymbols:null;Mx.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var n=Lx(t);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=Lx(arguments[i]),s=X$(o),a=kx&&(Object.getOwnPropertySymbols||K$);if(a)for(var c=a(o),l=0;l<c.length;++l){var u=c[l];Ox(o,u)&&J$(s,u);}for(var g=0;g<s.length;++g){var w=s[g];if(Ox(o,w)){var y=o[w];n[w]=y;}}}return n};});var yg=X((yZ,qx)=>{d();p();h();var mg=gg(),Z$=function(){if(!Object.assign)return !1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return e!==o},Q$=function(){if(!Object.assign||!Object.preventExtensions)return !1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy");}catch{return e[1]==="y"}return !1};qx.exports=function(){return !Object.assign||Z$()||Q$()?mg:Object.assign};});var $x=X((SZ,Fx)=>{d();p();h();var ej=po(),tj=yg();Fx.exports=function(){var t=tj();return ej(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t};});var Wx=X((_Z,Bx)=>{d();p();h();var rj=po(),nj=is(),ij=gg(),jx=yg(),oj=$x(),sj=nj.apply(jx()),Ux=function(t,r){return sj(Object,arguments)};rj(Ux,{getPolyfill:jx,implementation:ij,shim:oj});Bx.exports=Ux;});var Hx=X((AZ,zx)=>{d();p();h();var qc=function(){return typeof function(){}.name=="string"},Mc=Object.getOwnPropertyDescriptor;qc.functionsHaveConfigurableNames=function(){if(!qc()||!Mc)return !1;var t=Mc(function(){},"name");return !!t&&!!t.configurable};var aj=Function.prototype.bind;qc.boundFunctionsHaveNames=function(){return qc()&&typeof aj=="function"&&function(){}.bind().name!==""};zx.exports=qc;});var Yx=X((OZ,Gx)=>{d();p();h();var Vx=Rl(),cj=Il()(),uj=Hx().functionsHaveConfigurableNames(),lj=ki();Gx.exports=function(t,r){if(typeof t!="function")throw new lj("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return (!n||uj)&&(cj?Vx(t,"name",r,!0,!0):Vx(t,"name",r)),t};});var vg=X((qZ,Xx)=>{d();p();h();var fj=Yx(),dj=ki(),hj=Object;Xx.exports=fj(function(){if(this==null||this!==hj(this))throw new dj("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0);});var bg=X((UZ,Jx)=>{d();p();h();var pj=vg(),gj=po().supportsDescriptors,mj=Object.getOwnPropertyDescriptor;Jx.exports=function(){if(gj&&/a/mig.flags==="gim"){var t=mj(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d";}}),Object.defineProperty(n,"sticky",{get:function(){r+="y";}}),r==="dy")return t.get}}return pj};});var Qx=X((HZ,Zx)=>{d();p();h();var yj=po().supportsDescriptors,vj=bg(),bj=Object.getOwnPropertyDescriptor,wj=Object.defineProperty,Sj=TypeError,Kx=Object.getPrototypeOf,Ej=/a/;Zx.exports=function(){if(!yj||!Kx)throw new Sj("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=vj(),r=Kx(Ej),n=bj(r,"flags");return (!n||n.get!==t)&&wj(r,"flags",{configurable:!0,enumerable:!1,get:t}),t};});var nC=X((XZ,rC)=>{d();p();h();var xj=po(),Cj=is(),_j=vg(),eC=bg(),Tj=Qx(),tC=Cj(eC());xj(tC,{getPolyfill:eC,implementation:_j,shim:Tj});rC.exports=tC;});var go=X((QZ,iC)=>{d();p();h();var Rj=kc();iC.exports=function(){return Rj()&&!!Symbol.toStringTag};});var Sg=X((nQ,sC)=>{d();p();h();var Ij=go()(),Aj=fn(),wg=Aj("Object.prototype.toString"),Dl=function(t){return Ij&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:wg(t)==="[object Arguments]"},oC=function(t){return Dl(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&wg(t)!=="[object Array]"&&wg(t.callee)==="[object Function]"},Pj=function(){return Dl(arguments)}();Dl.isLegacyArguments=oC;sC.exports=Pj?Dl:oC;});var aC=X(()=>{d();p();h();});var RC=X((dQ,TC)=>{d();p();h();var Dg=typeof Map=="function"&&Map.prototype,Eg=Object.getOwnPropertyDescriptor&&Dg?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ol=Dg&&Eg&&typeof Eg.get=="function"?Eg.get:null,cC=Dg&&Map.prototype.forEach,Lg=typeof Set=="function"&&Set.prototype,xg=Object.getOwnPropertyDescriptor&&Lg?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,kl=Lg&&xg&&typeof xg.get=="function"?xg.get:null,uC=Lg&&Set.prototype.forEach,Dj=typeof WeakMap=="function"&&WeakMap.prototype,$c=Dj?WeakMap.prototype.has:null,Lj=typeof WeakSet=="function"&&WeakSet.prototype,jc=Lj?WeakSet.prototype.has:null,Oj=typeof WeakRef=="function"&&WeakRef.prototype,lC=Oj?WeakRef.prototype.deref:null,kj=Boolean.prototype.valueOf,Nj=Object.prototype.toString,Mj=Function.prototype.toString,qj=String.prototype.match,Og=String.prototype.slice,yo=String.prototype.replace,Fj=String.prototype.toUpperCase,fC=String.prototype.toLowerCase,wC=RegExp.prototype.test,dC=Array.prototype.concat,ii=Array.prototype.join,$j=Array.prototype.slice,hC=Math.floor,Tg=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Cg=Object.getOwnPropertySymbols,Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Lr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ks||!0)?Symbol.toStringTag:null,SC=Object.prototype.propertyIsEnumerable,pC=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function gC(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||wC.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-hC(-e):hC(e);if(n!==e){var i=String(n),o=Og.call(t,i.length+1);return yo.call(i,r,"$&_")+"."+yo.call(yo.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return yo.call(t,r,"$&_")}var Ig=aC(),mC=Ig.custom,yC=xC(mC)?mC:null;TC.exports=function e(t,r,n,i){var o=r||{};if(mo(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mo(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=mo(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mo(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mo(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return "undefined";if(t===null)return "null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return _C(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return a?gC(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return a?gC(t,l):l}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof t=="object")return Ag(t)?"[Array]":"[Object]";var g=n6(o,n);if(typeof i>"u")i=[];else if(CC(i,t)>=0)return "[Circular]";function w(be,me,je){if(me&&(i=$j.call(i),i.push(me)),je){var pt={depth:o.depth};return mo(o,"quoteStyle")&&(pt.quoteStyle=o.quoteStyle),e(be,pt,n+1,i)}return e(be,o,n+1,i)}if(typeof t=="function"&&!vC(t)){var y=Yj(t),_=Ll(t,w);return "[Function"+(y?": "+y:" (anonymous)")+"]"+(_.length>0?" { "+ii.call(_,", ")+" }":"")}if(xC(t)){var x=Ks?yo.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Rg.call(t);return typeof t=="object"&&!Ks?Fc(x):x}if(e6(t)){for(var D="<"+fC.call(String(t.nodeName)),A=t.attributes||[],C=0;C<A.length;C++)D+=" "+A[C].name+"="+EC(jj(A[C].value),"double",o);return D+=">",t.childNodes&&t.childNodes.length&&(D+="..."),D+="</"+fC.call(String(t.nodeName))+">",D}if(Ag(t)){if(t.length===0)return "[]";var R=Ll(t,w);return g&&!r6(R)?"["+Pg(R,g)+"]":"[ "+ii.call(R,", ")+" ]"}if(Bj(t)){var T=Ll(t,w);return !("cause"in Error.prototype)&&"cause"in t&&!SC.call(t,"cause")?"{ ["+String(t)+"] "+ii.call(dC.call("[cause]: "+w(t.cause),T),", ")+" }":T.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ii.call(T,", ")+" }"}if(typeof t=="object"&&s){if(yC&&typeof t[yC]=="function"&&Ig)return Ig(t,{depth:u-n});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Xj(t)){var $=[];return cC&&cC.call(t,function(be,me){$.push(w(me,t,!0)+" => "+w(be,t));}),bC("Map",Ol.call(t),$,g)}if(Zj(t)){var P=[];return uC&&uC.call(t,function(be){P.push(w(be,t));}),bC("Set",kl.call(t),P,g)}if(Jj(t))return _g("WeakMap");if(Qj(t))return _g("WeakSet");if(Kj(t))return _g("WeakRef");if(zj(t))return Fc(w(Number(t)));if(Vj(t))return Fc(w(Tg.call(t)));if(Hj(t))return Fc(kj.call(t));if(Wj(t))return Fc(w(String(t)));if(typeof window<"u"&&t===window)return "{ [object Window] }";if(t===global)return "{ [object globalThis] }";if(!Uj(t)&&!vC(t)){var q=Ll(t,w),k=pC?pC(t)===Object.prototype:t instanceof Object||t.constructor===Object,V=t instanceof Object?"":"null prototype",K=!k&&Lr&&Object(t)===t&&Lr in t?Og.call(vo(t),8,-1):V?"Object":"",ve=k||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",fe=ve+(K||V?"["+ii.call(dC.call([],K||[],V||[]),": ")+"] ":"");return q.length===0?fe+"{}":g?fe+"{"+Pg(q,g)+"}":fe+"{ "+ii.call(q,", ")+" }"}return String(t)};function EC(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function jj(e){return yo.call(String(e),/"/g,"&quot;")}function Ag(e){return vo(e)==="[object Array]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function Uj(e){return vo(e)==="[object Date]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function vC(e){return vo(e)==="[object RegExp]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function Bj(e){return vo(e)==="[object Error]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function Wj(e){return vo(e)==="[object String]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function zj(e){return vo(e)==="[object Number]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function Hj(e){return vo(e)==="[object Boolean]"&&(!Lr||!(typeof e=="object"&&Lr in e))}function xC(e){if(Ks)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return !0;if(!e||typeof e!="object"||!Rg)return !1;try{return Rg.call(e),!0}catch{}return !1}function Vj(e){if(!e||typeof e!="object"||!Tg)return !1;try{return Tg.call(e),!0}catch{}return !1}var Gj=Object.prototype.hasOwnProperty||function(e){return e in this};function mo(e,t){return Gj.call(e,t)}function vo(e){return Nj.call(e)}function Yj(e){if(e.name)return e.name;var t=qj.call(Mj.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function CC(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function Xj(e){if(!Ol||!e||typeof e!="object")return !1;try{Ol.call(e);try{kl.call(e);}catch{return !0}return e instanceof Map}catch{}return !1}function Jj(e){if(!$c||!e||typeof e!="object")return !1;try{$c.call(e,$c);try{jc.call(e,jc);}catch{return !0}return e instanceof WeakMap}catch{}return !1}function Kj(e){if(!lC||!e||typeof e!="object")return !1;try{return lC.call(e),!0}catch{}return !1}function Zj(e){if(!kl||!e||typeof e!="object")return !1;try{kl.call(e);try{Ol.call(e);}catch{return !0}return e instanceof Set}catch{}return !1}function Qj(e){if(!jc||!e||typeof e!="object")return !1;try{jc.call(e,jc);try{$c.call(e,$c);}catch{return !0}return e instanceof WeakSet}catch{}return !1}function e6(e){return !e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function _C(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return _C(Og.call(e,0,t.maxStringLength),t)+n}var i=yo.call(yo.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,t6);return EC(i,"single",t)}function t6(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+Fj.call(t.toString(16))}function Fc(e){return "Object("+e+")"}function _g(e){return e+" { ? }"}function bC(e,t,r,n){var i=n?Pg(r,n):ii.call(r,", ");return e+" ("+t+") {"+i+"}"}function r6(e){for(var t=0;t<e.length;t++)if(CC(e[t],`
`)>=0)return !1;return !0}function n6(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=ii.call(Array(e.indent+1)," ");else return null;return {base:r,prev:ii.call(Array(t+1),r)}}function Pg(e,t){if(e.length===0)return "";var r=`
`+t.prev+t.base;return r+ii.call(e,","+r)+`
`+t.prev}function Ll(e,t){var r=Ag(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=mo(e,i)?t(e[i],e):"";}var o=typeof Cg=="function"?Cg(e):[],s;if(Ks){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a];}for(var c in e)mo(e,c)&&(r&&String(Number(c))===c&&c<e.length||Ks&&s["$"+c]instanceof Symbol||(wC.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if(typeof Cg=="function")for(var l=0;l<o.length;l++)SC.call(e,o[l])&&n.push("["+t(o[l])+"]: "+t(e[o[l]],e));return n}});var Ng=X((mQ,AC)=>{d();p();h();var IC=Wn(),Zs=fn(),i6=RC(),o6=ki(),Nl=IC("%WeakMap%",!0),Ml=IC("%Map%",!0),s6=Zs("WeakMap.prototype.get",!0),a6=Zs("WeakMap.prototype.set",!0),c6=Zs("WeakMap.prototype.has",!0),u6=Zs("Map.prototype.get",!0),l6=Zs("Map.prototype.set",!0),f6=Zs("Map.prototype.has",!0),kg=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},d6=function(e,t){var r=kg(e,t);return r&&r.value},h6=function(e,t,r){var n=kg(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r};},p6=function(e,t){return !!kg(e,t)};AC.exports=function(){var t,r,n,i={assert:function(o){if(!i.has(o))throw new o6("Side channel does not contain "+i6(o))},get:function(o){if(Nl&&o&&(typeof o=="object"||typeof o=="function")){if(t)return s6(t,o)}else if(Ml){if(r)return u6(r,o)}else if(n)return d6(n,o)},has:function(o){if(Nl&&o&&(typeof o=="object"||typeof o=="function")){if(t)return c6(t,o)}else if(Ml){if(r)return f6(r,o)}else if(n)return p6(n,o);return !1},set:function(o,s){Nl&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Nl),a6(t,o,s)):Ml?(r||(r=new Ml),l6(r,o,s)):(n||(n={key:{},next:null}),h6(n,o,s));}};return i};});var DC=X((wQ,PC)=>{d();p();h();var g6=lg(),Uc=Ng()(),Ni=ki(),Mg={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Ni("`O` is not an object");if(typeof t!="string")throw new Ni("`slot` must be a string");if(Uc.assert(e),!Mg.has(e,t))throw new Ni("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Ni("`O` is not an object");if(typeof t!="string")throw new Ni("`slot` must be a string");var r=Uc.get(e);return r&&r["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new Ni("`O` is not an object");if(typeof t!="string")throw new Ni("`slot` must be a string");var r=Uc.get(e);return !!r&&g6(r,"$"+t)},set:function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Ni("`O` is not an object");if(typeof t!="string")throw new Ni("`slot` must be a string");var n=Uc.get(e);n||(n={},Uc.set(e,n)),n["$"+t]=r;}};Object.freeze&&Object.freeze(Mg);PC.exports=Mg;});var kC=X((CQ,OC)=>{d();p();h();var Bc=DC(),m6=SyntaxError,LC=typeof StopIteration=="object"?StopIteration:null;OC.exports=function(t){if(!LC)throw new m6("this environment lacks StopIteration");Bc.set(t,"[[Done]]",!1);var r={next:function(){var i=Bc.get(this,"[[Iterator]]"),o=Bc.get(i,"[[Done]]");try{return {done:o,value:o?void 0:i.next()}}catch(s){if(Bc.set(i,"[[Done]]",!0),s!==LC)throw s;return {done:!0,value:void 0}}}};return Bc.set(r,"[[Iterator]]",t),r};});var qg=X((IQ,NC)=>{d();p();h();var y6={}.toString;NC.exports=Array.isArray||function(e){return y6.call(e)=="[object Array]"};});var Fg=X((LQ,MC)=>{d();p();h();var v6=String.prototype.valueOf,b6=function(t){try{return v6.call(t),!0}catch{return !1}},w6=Object.prototype.toString,S6="[object String]",E6=go()();MC.exports=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:E6?b6(t):w6.call(t)===S6};});var jg=X((MQ,$C)=>{d();p();h();var $g=typeof Map=="function"&&Map.prototype?Map:null,x6=typeof Set=="function"&&Set.prototype?Set:null,ql;$g||(ql=function(t){return !1});var FC=$g?Map.prototype.has:null,qC=x6?Set.prototype.has:null;!ql&&!FC&&(ql=function(t){return !1});$C.exports=ql||function(t){if(!t||typeof t!="object")return !1;try{if(FC.call(t),qC)try{qC.call(t);}catch{return !0}return t instanceof $g}catch{}return !1};});var Bg=X((jQ,BC)=>{d();p();h();var C6=typeof Map=="function"&&Map.prototype?Map:null,Ug=typeof Set=="function"&&Set.prototype?Set:null,Fl;Ug||(Fl=function(t){return !1});var jC=C6?Map.prototype.has:null,UC=Ug?Set.prototype.has:null;!Fl&&!UC&&(Fl=function(t){return !1});BC.exports=Fl||function(t){if(!t||typeof t!="object")return !1;try{if(UC.call(t),jC)try{jC.call(t);}catch{return !0}return t instanceof Ug}catch{}return !1};});var e_=X((zQ,Ul)=>{d();p();h();var WC=Sg(),zC=kC();bl()()||kc()()?($l=Symbol.iterator,Ul.exports=function(t){if(t!=null&&typeof t[$l]<"u")return t[$l]();if(WC(t))return Array.prototype[$l].call(t)}):(HC=qg(),VC=Fg(),Wg=Wn(),GC=Wg("%Map%",!0),YC=Wg("%Set%",!0),Tn=fn(),zg=Tn("Array.prototype.push"),Hg=Tn("String.prototype.charCodeAt"),XC=Tn("String.prototype.slice"),JC=function(t,r){var n=t.length;if(r+1>=n)return r+1;var i=Hg(t,r);if(i<55296||i>56319)return r+1;var o=Hg(t,r+1);return o<56320||o>57343?r+1:r+2},jl=function(t){var r=0;return {next:function(){var i=r>=t.length,o;return i||(o=t[r],r+=1),{done:i,value:o}}}},Vg=function(t,r){if(HC(t)||WC(t))return jl(t);if(VC(t)){var n=0;return {next:function(){var o=JC(t,n),s=XC(t,n,o);return n=o,{done:o>t.length,value:s}}}}if(r&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()},!GC&&!YC?Ul.exports=function(t){if(t!=null)return Vg(t,!0)}:(KC=jg(),ZC=Bg(),Gg=Tn("Map.prototype.forEach",!0),Yg=Tn("Set.prototype.forEach",!0),(typeof O>"u"||!O.versions||!O.versions.node)&&(Xg=Tn("Map.prototype.iterator",!0),Jg=Tn("Set.prototype.iterator",!0)),Kg=Tn("Map.prototype.@@iterator",!0)||Tn("Map.prototype._es6-shim iterator_",!0),Zg=Tn("Set.prototype.@@iterator",!0)||Tn("Set.prototype._es6-shim iterator_",!0),QC=function(t){if(KC(t)){if(Xg)return zC(Xg(t));if(Kg)return Kg(t);if(Gg){var r=[];return Gg(t,function(i,o){zg(r,[o,i]);}),jl(r)}}if(ZC(t)){if(Jg)return zC(Jg(t));if(Zg)return Zg(t);if(Yg){var n=[];return Yg(t,function(i){zg(n,i);}),jl(n)}}},Ul.exports=function(t){return QC(t)||Vg(t)}));var $l,HC,VC,Wg,GC,YC,Tn,zg,Hg,XC,JC,jl,Vg,KC,ZC,Gg,Yg,Xg,Jg,Kg,Zg,QC;});var Qg=X((YQ,r_)=>{d();p();h();var t_=function(e){return e!==e};r_.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||t_(t)&&t_(r))};});var em=X((ZQ,n_)=>{d();p();h();var _6=Qg();n_.exports=function(){return typeof Object.is=="function"?Object.is:_6};});var o_=X((ree,i_)=>{d();p();h();var T6=em(),R6=po();i_.exports=function(){var t=T6();return R6(Object,{is:t},{is:function(){return Object.is!==t}}),t};});var u_=X((see,c_)=>{d();p();h();var I6=po(),A6=is(),P6=Qg(),s_=em(),D6=o_(),a_=A6(s_(),Object);I6(a_,{getPolyfill:s_,implementation:P6,shim:D6});c_.exports=a_;});var rm=X((lee,h_)=>{d();p();h();var L6=is(),d_=fn(),O6=Wn(),tm=O6("%ArrayBuffer%",!0),Bl=d_("ArrayBuffer.prototype.byteLength",!0),k6=d_("Object.prototype.toString"),l_=!!tm&&!Bl&&new tm(0).slice,f_=!!l_&&L6(l_);h_.exports=Bl||f_?function(t){if(!t||typeof t!="object")return !1;try{return Bl?Bl(t):f_(t,0),!0}catch{return !1}}:tm?function(t){return k6(t)==="[object ArrayBuffer]"}:function(t){return !1};});var g_=X((pee,p_)=>{d();p();h();var N6=Date.prototype.getDay,M6=function(t){try{return N6.call(t),!0}catch{return !1}},q6=Object.prototype.toString,F6="[object Date]",$6=go()();p_.exports=function(t){return typeof t!="object"||t===null?!1:$6?M6(t):q6.call(t)===F6};});var w_=X((vee,b_)=>{d();p();h();var nm=fn(),m_=go()(),y_,v_,im,om;m_&&(y_=nm("Object.prototype.hasOwnProperty"),v_=nm("RegExp.prototype.exec"),im={},Wl=function(){throw im},om={toString:Wl,valueOf:Wl},typeof Symbol.toPrimitive=="symbol"&&(om[Symbol.toPrimitive]=Wl));var Wl,j6=nm("Object.prototype.toString"),U6=Object.getOwnPropertyDescriptor,B6="[object RegExp]";b_.exports=m_?function(t){if(!t||typeof t!="object")return !1;var r=U6(t,"lastIndex"),n=r&&y_(r,"value");if(!n)return !1;try{v_(t,om);}catch(i){return i===im}}:function(t){return !t||typeof t!="object"&&typeof t!="function"?!1:j6(t)===B6};});var x_=X((Eee,E_)=>{d();p();h();var W6=fn(),S_=W6("SharedArrayBuffer.prototype.byteLength",!0);E_.exports=S_?function(t){if(!t||typeof t!="object")return !1;try{return S_(t),!0}catch{return !1}}:function(t){return !1};});var __=X((Tee,C_)=>{d();p();h();var z6=Number.prototype.toString,H6=function(t){try{return z6.call(t),!0}catch{return !1}},V6=Object.prototype.toString,G6="[object Number]",Y6=go()();C_.exports=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:Y6?H6(t):V6.call(t)===G6};});var I_=X((Pee,R_)=>{d();p();h();var T_=fn(),X6=T_("Boolean.prototype.toString"),J6=T_("Object.prototype.toString"),K6=function(t){try{return X6(t),!0}catch{return !1}},Z6="[object Boolean]",Q6=go()();R_.exports=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:Q6&&Symbol.toStringTag in t?K6(t):J6(t)===Z6};});var L_=X((kee,sm)=>{d();p();h();var e3=Object.prototype.toString,t3=bl()();t3?(A_=Symbol.prototype.toString,P_=/^Symbol\(.*\)$/,D_=function(t){return typeof t.valueOf()!="symbol"?!1:P_.test(A_.call(t))},sm.exports=function(t){if(typeof t=="symbol")return !0;if(e3.call(t)!=="[object Symbol]")return !1;try{return D_(t)}catch{return !1}}):sm.exports=function(t){return !1};var A_,P_,D_;});var N_=X((Fee,k_)=>{d();p();h();var O_=typeof BigInt<"u"&&BigInt;k_.exports=function(){return typeof O_=="function"&&typeof BigInt=="function"&&typeof O_(42)=="bigint"&&typeof BigInt(42)=="bigint"};});var F_=X((Bee,am)=>{d();p();h();var r3=N_()();r3?(M_=BigInt.prototype.valueOf,q_=function(t){try{return M_.call(t),!0}catch{}return !1},am.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:q_(t)}):am.exports=function(t){return !1};var M_,q_;});var j_=X((Vee,$_)=>{d();p();h();var n3=Fg(),i3=__(),o3=I_(),s3=L_(),a3=F_();$_.exports=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(n3(t))return "String";if(i3(t))return "Number";if(o3(t))return "Boolean";if(s3(t))return "Symbol";if(a3(t))return "BigInt"};});var W_=X((Jee,B_)=>{d();p();h();var zl=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,U_=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Hl;zl||(Hl=function(t){return !1});var um=zl?zl.prototype.has:null,cm=U_?U_.prototype.has:null;!Hl&&!um&&(Hl=function(t){return !1});B_.exports=Hl||function(t){if(!t||typeof t!="object")return !1;try{if(um.call(t,um),cm)try{cm.call(t,cm);}catch{return !0}return t instanceof zl}catch{}return !1};});var H_=X((ete,fm)=>{d();p();h();var c3=Wn(),z_=fn(),u3=c3("%WeakSet%",!0),lm=z_("WeakSet.prototype.has",!0);lm?(Vl=z_("WeakMap.prototype.has",!0),fm.exports=function(t){if(!t||typeof t!="object")return !1;try{if(lm(t,lm),Vl)try{Vl(t,Vl);}catch{return !0}return t instanceof u3}catch{}return !1}):fm.exports=function(t){return !1};var Vl;});var G_=X((ite,V_)=>{d();p();h();var l3=jg(),f3=Bg(),d3=W_(),h3=H_();V_.exports=function(t){if(t&&typeof t=="object"){if(l3(t))return "Map";if(f3(t))return "Set";if(d3(t))return "WeakMap";if(h3(t))return "WeakSet"}return !1};});var K_=X((cte,J_)=>{d();p();h();var X_=Function.prototype.toString,Qs=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,hm,Gl;if(typeof Qs=="function"&&typeof Object.defineProperty=="function")try{hm=Object.defineProperty({},"length",{get:function(){throw Gl}}),Gl={},Qs(function(){throw 42},null,hm);}catch(e){e!==Gl&&(Qs=null);}else Qs=null;var p3=/^\s*class\b/,pm=function(t){try{var r=X_.call(t);return p3.test(r)}catch{return !1}},dm=function(t){try{return pm(t)?!1:(X_.call(t),!0)}catch{return !1}},Yl=Object.prototype.toString,g3="[object Object]",m3="[object Function]",y3="[object GeneratorFunction]",v3="[object HTMLAllCollection]",b3="[object HTML document.all class]",w3="[object HTMLCollection]",S3=typeof Symbol=="function"&&!!Symbol.toStringTag,E3=!(0 in[,]),gm=function(){return !1};typeof document=="object"&&(Y_=document.all,Yl.call(Y_)===Yl.call(document.all)&&(gm=function(t){if((E3||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Yl.call(t);return (r===v3||r===b3||r===w3||r===g3)&&t("")==null}catch{}return !1}));var Y_;J_.exports=Qs?function(t){if(gm(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;try{Qs(t,null,hm);}catch(r){if(r!==Gl)return !1}return !pm(t)&&dm(t)}:function(t){if(gm(t))return !0;if(!t||typeof t!="function"&&typeof t!="object")return !1;if(S3)return dm(t);if(pm(t))return !1;var r=Yl.call(t);return r!==m3&&r!==y3&&!/^\[object HTML/.test(r)?!1:dm(t)};});var eT=X((dte,Q_)=>{d();p();h();var x3=K_(),C3=Object.prototype.toString,Z_=Object.prototype.hasOwnProperty,_3=function(t,r,n){for(var i=0,o=t.length;i<o;i++)Z_.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},T3=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t);},R3=function(t,r,n){for(var i in t)Z_.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t));},I3=function(t,r,n){if(!x3(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),C3.call(t)==="[object Array]"?_3(t,r,i):typeof t=="string"?T3(t,r,i):R3(t,r,i);};Q_.exports=I3;});var rT=X((mte,tT)=>{d();p();h();tT.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"];});var iT=X((wte,nT)=>{d();p();h();var mm=rT(),A3=typeof globalThis>"u"?global:globalThis;nT.exports=function(){for(var t=[],r=0;r<mm.length;r++)typeof A3[mm[r]]=="function"&&(t[t.length]=mm[r]);return t};});var uT=X((Cte,cT)=>{d();p();h();var Jl=eT(),P3=iT(),oT=is(),bm=fn(),Xl=Tl(),D3=bm("Object.prototype.toString"),aT=go()(),sT=typeof globalThis>"u"?global:globalThis,vm=P3(),wm=bm("String.prototype.slice"),ym=Object.getPrototypeOf,L3=bm("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return -1},Kl={__proto__:null};aT&&Xl&&ym?Jl(vm,function(e){var t=new sT[e];if(Symbol.toStringTag in t){var r=ym(t),n=Xl(r,Symbol.toStringTag);if(!n){var i=ym(r);n=Xl(i,Symbol.toStringTag);}Kl["$"+e]=oT(n.get);}}):Jl(vm,function(e){var t=new sT[e],r=t.slice||t.set;r&&(Kl["$"+e]=oT(r));});var O3=function(t){var r=!1;return Jl(Kl,function(n,i){if(!r)try{"$"+n(t)===i&&(r=wm(i,1));}catch{}}),r},k3=function(t){var r=!1;return Jl(Kl,function(n,i){if(!r)try{n(t),r=wm(i,1);}catch{}}),r};cT.exports=function(t){if(!t||typeof t!="object")return !1;if(!aT){var r=wm(D3(t),8,-1);return L3(vm,r)>-1?r:r!=="Object"?!1:k3(t)}return Xl?O3(t):null};});var dT=X((Ite,fT)=>{d();p();h();var N3=fn(),lT=N3("ArrayBuffer.prototype.byteLength",!0),M3=rm();fT.exports=function(t){return M3(t)?lT?lT(t):t.byteLength:NaN};});var ta=X((Lte,MT)=>{d();p();h();var OT=Wx(),oi=fn(),hT=nC(),q3=Wn(),ea=e_(),F3=Ng(),pT=u_(),gT=Sg(),mT=qg(),yT=rm(),vT=g_(),bT=w_(),wT=x_(),ST=vl(),ET=j_(),xT=G_(),CT=uT(),_T=dT(),TT=oi("SharedArrayBuffer.prototype.byteLength",!0),RT=oi("Date.prototype.getTime"),Sm=Object.getPrototypeOf,IT=oi("Object.prototype.toString"),Ql=q3("%Set%",!0),Em=oi("Map.prototype.has",!0),ef=oi("Map.prototype.get",!0),AT=oi("Map.prototype.size",!0),tf=oi("Set.prototype.add",!0),kT=oi("Set.prototype.delete",!0),rf=oi("Set.prototype.has",!0),Zl=oi("Set.prototype.size",!0);function PT(e,t,r,n){for(var i=ea(e),o;(o=i.next())&&!o.done;)if(zn(t,o.value,r,n))return kT(e,o.value),!0;return !1}function NT(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function $3(e,t,r,n,i,o){var s=NT(r);if(s!=null)return s;var a=ef(t,s),c=OT({},i,{strict:!1});return typeof a>"u"&&!Em(t,s)||!zn(n,a,c,o)?!1:!Em(e,s)&&zn(n,a,c,o)}function j3(e,t,r){var n=NT(r);return n??(rf(t,n)&&!rf(e,n))}function DT(e,t,r,n,i,o){for(var s=ea(e),a,c;(a=s.next())&&!a.done;)if(c=a.value,zn(r,c,i,o)&&zn(n,ef(t,c),i,o))return kT(e,c),!0;return !1}function zn(e,t,r,n){var i=r||{};if(i.strict?pT(e,t):e===t)return !0;var o=ET(e),s=ET(t);if(o!==s)return !1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?pT(e,t):e==t;var a=n.has(e),c=n.has(t),l;if(a&&c){if(n.get(e)===n.get(t))return !0}else l={};return a||n.set(e,l),c||n.set(t,l),W3(e,t,i,n)}function LT(e){return !e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function U3(e,t,r,n){if(Zl(e)!==Zl(t))return !1;for(var i=ea(e),o=ea(t),s,a,c;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")c||(c=new Ql),tf(c,s.value);else if(!rf(t,s.value)){if(r.strict||!j3(e,t,s.value))return !1;c||(c=new Ql),tf(c,s.value);}if(c){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!PT(c,a.value,r.strict,n))return !1}else if(!r.strict&&!rf(e,a.value)&&!PT(c,a.value,r.strict,n))return !1;return Zl(c)===0}return !0}function B3(e,t,r,n){if(AT(e)!==AT(t))return !1;for(var i=ea(e),o=ea(t),s,a,c,l,u,g;(s=i.next())&&!s.done;)if(l=s.value[0],u=s.value[1],l&&typeof l=="object")c||(c=new Ql),tf(c,l);else if(g=ef(t,l),typeof g>"u"&&!Em(t,l)||!zn(u,g,r,n)){if(r.strict||!$3(e,t,l,u,r,n))return !1;c||(c=new Ql),tf(c,l);}if(c){for(;(a=o.next())&&!a.done;)if(l=a.value[0],g=a.value[1],l&&typeof l=="object"){if(!DT(c,e,l,g,r,n))return !1}else if(!r.strict&&(!e.has(l)||!zn(ef(e,l),g,r,n))&&!DT(c,e,l,g,OT({},r,{strict:!1}),n))return !1;return Zl(c)===0}return !0}function W3(e,t,r,n){var i,o;if(typeof e!=typeof t||e==null||t==null||IT(e)!==IT(t)||gT(e)!==gT(t))return !1;var s=mT(e),a=mT(t);if(s!==a)return !1;var c=e instanceof Error,l=t instanceof Error;if(c!==l||(c||l)&&(e.name!==t.name||e.message!==t.message))return !1;var u=bT(e),g=bT(t);if(u!==g||(u||g)&&(e.source!==t.source||hT(e)!==hT(t)))return !1;var w=vT(e),y=vT(t);if(w!==y||(w||y)&&RT(e)!==RT(t)||r.strict&&Sm&&Sm(e)!==Sm(t))return !1;var _=CT(e),x=CT(t);if(_!==x)return !1;if(_||x){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var D=LT(e),A=LT(t);if(D!==A)return !1;if(D||A){if(e.length!==t.length)return !1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return !1;return !0}var C=yT(e),R=yT(t);if(C!==R)return !1;if(C||R)return _T(e)!==_T(t)?!1:typeof Uint8Array=="function"&&zn(new Uint8Array(e),new Uint8Array(t),r,n);var T=wT(e),$=wT(t);if(T!==$)return !1;if(T||$)return TT(e)!==TT(t)?!1:typeof Uint8Array=="function"&&zn(new Uint8Array(e),new Uint8Array(t),r,n);if(typeof e!=typeof t)return !1;var P=ST(e),q=ST(t);if(P.length!==q.length)return !1;for(P.sort(),q.sort(),i=P.length-1;i>=0;i--)if(P[i]!=q[i])return !1;for(i=P.length-1;i>=0;i--)if(o=P[i],!zn(e[o],t[o],r,n))return !1;var k=xT(e),V=xT(t);return k!==V?!1:k==="Set"||V==="Set"?U3(e,t,r,n):k==="Map"?B3(e,t,r,n):!0}MT.exports=function(t,r,n){return zn(t,r,n,F3())};});var zc=X((Xte,zT)=>{d();p();h();var lU="2.0.0",fU=Number.MAX_SAFE_INTEGER||9007199254740991,dU=16,hU=250,pU=["major","premajor","minor","preminor","patch","prepatch","prerelease"];zT.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:dU,MAX_SAFE_BUILD_LENGTH:hU,MAX_SAFE_INTEGER:fU,RELEASE_TYPES:pU,SEMVER_SPEC_VERSION:lU,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};});var Hc=X((Qte,HT)=>{d();p();h();var gU=typeof O=="object"&&O.env&&O.env.NODE_DEBUG&&/\bsemver\b/i.test(O.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};HT.exports=gU;});var na=X((Mi,VT)=>{d();p();h();var{MAX_SAFE_COMPONENT_LENGTH:Rm,MAX_SAFE_BUILD_LENGTH:mU,MAX_LENGTH:yU}=zc(),vU=Hc();Mi=VT.exports={};var bU=Mi.re=[],wU=Mi.safeRe=[],_e=Mi.src=[],Te=Mi.t={},SU=0,Im="[a-zA-Z0-9-]",EU=[["\\s",1],["\\d",yU],[Im,mU]],xU=e=>{for(let[t,r]of EU)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},Ye=(e,t,r)=>{let n=xU(t),i=SU++;vU(e,i,t),Te[e]=i,_e[i]=t,bU[i]=new RegExp(t,r?"g":void 0),wU[i]=new RegExp(n,r?"g":void 0);};Ye("NUMERICIDENTIFIER","0|[1-9]\\d*");Ye("NUMERICIDENTIFIERLOOSE","\\d+");Ye("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Im}*`);Ye("MAINVERSION",`(${_e[Te.NUMERICIDENTIFIER]})\\.(${_e[Te.NUMERICIDENTIFIER]})\\.(${_e[Te.NUMERICIDENTIFIER]})`);Ye("MAINVERSIONLOOSE",`(${_e[Te.NUMERICIDENTIFIERLOOSE]})\\.(${_e[Te.NUMERICIDENTIFIERLOOSE]})\\.(${_e[Te.NUMERICIDENTIFIERLOOSE]})`);Ye("PRERELEASEIDENTIFIER",`(?:${_e[Te.NUMERICIDENTIFIER]}|${_e[Te.NONNUMERICIDENTIFIER]})`);Ye("PRERELEASEIDENTIFIERLOOSE",`(?:${_e[Te.NUMERICIDENTIFIERLOOSE]}|${_e[Te.NONNUMERICIDENTIFIER]})`);Ye("PRERELEASE",`(?:-(${_e[Te.PRERELEASEIDENTIFIER]}(?:\\.${_e[Te.PRERELEASEIDENTIFIER]})*))`);Ye("PRERELEASELOOSE",`(?:-?(${_e[Te.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${_e[Te.PRERELEASEIDENTIFIERLOOSE]})*))`);Ye("BUILDIDENTIFIER",`${Im}+`);Ye("BUILD",`(?:\\+(${_e[Te.BUILDIDENTIFIER]}(?:\\.${_e[Te.BUILDIDENTIFIER]})*))`);Ye("FULLPLAIN",`v?${_e[Te.MAINVERSION]}${_e[Te.PRERELEASE]}?${_e[Te.BUILD]}?`);Ye("FULL",`^${_e[Te.FULLPLAIN]}$`);Ye("LOOSEPLAIN",`[v=\\s]*${_e[Te.MAINVERSIONLOOSE]}${_e[Te.PRERELEASELOOSE]}?${_e[Te.BUILD]}?`);Ye("LOOSE",`^${_e[Te.LOOSEPLAIN]}$`);Ye("GTLT","((?:<|>)?=?)");Ye("XRANGEIDENTIFIERLOOSE",`${_e[Te.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ye("XRANGEIDENTIFIER",`${_e[Te.NUMERICIDENTIFIER]}|x|X|\\*`);Ye("XRANGEPLAIN",`[v=\\s]*(${_e[Te.XRANGEIDENTIFIER]})(?:\\.(${_e[Te.XRANGEIDENTIFIER]})(?:\\.(${_e[Te.XRANGEIDENTIFIER]})(?:${_e[Te.PRERELEASE]})?${_e[Te.BUILD]}?)?)?`);Ye("XRANGEPLAINLOOSE",`[v=\\s]*(${_e[Te.XRANGEIDENTIFIERLOOSE]})(?:\\.(${_e[Te.XRANGEIDENTIFIERLOOSE]})(?:\\.(${_e[Te.XRANGEIDENTIFIERLOOSE]})(?:${_e[Te.PRERELEASELOOSE]})?${_e[Te.BUILD]}?)?)?`);Ye("XRANGE",`^${_e[Te.GTLT]}\\s*${_e[Te.XRANGEPLAIN]}$`);Ye("XRANGELOOSE",`^${_e[Te.GTLT]}\\s*${_e[Te.XRANGEPLAINLOOSE]}$`);Ye("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Rm}})(?:\\.(\\d{1,${Rm}}))?(?:\\.(\\d{1,${Rm}}))?`);Ye("COERCE",`${_e[Te.COERCEPLAIN]}(?:$|[^\\d])`);Ye("COERCEFULL",_e[Te.COERCEPLAIN]+`(?:${_e[Te.PRERELEASE]})?(?:${_e[Te.BUILD]})?(?:$|[^\\d])`);Ye("COERCERTL",_e[Te.COERCE],!0);Ye("COERCERTLFULL",_e[Te.COERCEFULL],!0);Ye("LONETILDE","(?:~>?)");Ye("TILDETRIM",`(\\s*)${_e[Te.LONETILDE]}\\s+`,!0);Mi.tildeTrimReplace="$1~";Ye("TILDE",`^${_e[Te.LONETILDE]}${_e[Te.XRANGEPLAIN]}$`);Ye("TILDELOOSE",`^${_e[Te.LONETILDE]}${_e[Te.XRANGEPLAINLOOSE]}$`);Ye("LONECARET","(?:\\^)");Ye("CARETTRIM",`(\\s*)${_e[Te.LONECARET]}\\s+`,!0);Mi.caretTrimReplace="$1^";Ye("CARET",`^${_e[Te.LONECARET]}${_e[Te.XRANGEPLAIN]}$`);Ye("CARETLOOSE",`^${_e[Te.LONECARET]}${_e[Te.XRANGEPLAINLOOSE]}$`);Ye("COMPARATORLOOSE",`^${_e[Te.GTLT]}\\s*(${_e[Te.LOOSEPLAIN]})$|^$`);Ye("COMPARATOR",`^${_e[Te.GTLT]}\\s*(${_e[Te.FULLPLAIN]})$|^$`);Ye("COMPARATORTRIM",`(\\s*)${_e[Te.GTLT]}\\s*(${_e[Te.LOOSEPLAIN]}|${_e[Te.XRANGEPLAIN]})`,!0);Mi.comparatorTrimReplace="$1$2$3";Ye("HYPHENRANGE",`^\\s*(${_e[Te.XRANGEPLAIN]})\\s+-\\s+(${_e[Te.XRANGEPLAIN]})\\s*$`);Ye("HYPHENRANGELOOSE",`^\\s*(${_e[Te.XRANGEPLAINLOOSE]})\\s+-\\s+(${_e[Te.XRANGEPLAINLOOSE]})\\s*$`);Ye("STAR","(<|>)?=?\\s*\\*");Ye("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ye("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");});var af=X((sre,GT)=>{d();p();h();var CU=Object.freeze({loose:!0}),_U=Object.freeze({}),TU=e=>e?typeof e!="object"?CU:e:_U;GT.exports=TU;});var Am=X((lre,JT)=>{d();p();h();var YT=/^[0-9]+$/,XT=(e,t)=>{let r=YT.test(e),n=YT.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},RU=(e,t)=>XT(t,e);JT.exports={compareIdentifiers:XT,rcompareIdentifiers:RU};});var Or=X((pre,eR)=>{d();p();h();var cf=Hc(),{MAX_LENGTH:KT,MAX_SAFE_INTEGER:uf}=zc(),{safeRe:ZT,t:QT}=na(),IU=af(),{compareIdentifiers:ia}=Am(),Pm=class e{constructor(t,r){if(r=IU(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version;}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>KT)throw new TypeError(`version is longer than ${KT} characters`);cf("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?ZT[QT.LOOSE]:ZT[QT.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>uf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>uf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>uf||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<uf)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format();}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(cf("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options);}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),ia(this.major,t.major)||ia(this.minor,t.minor)||ia(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return -1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(cf("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return -1;if(n===i)continue;return ia(n,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(cf("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return -1;if(n===i)continue;return ia(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else {let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i);}}if(r){let o=[r,i];n===!1&&(o=[r]),ia(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o;}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};eR.exports=Pm;});var ss=X((vre,rR)=>{d();p();h();var tR=Or(),AU=(e,t,r=!1)=>{if(e instanceof tR)return e;try{return new tR(e,t)}catch(n){if(!r)return null;throw n}};rR.exports=AU;});var iR=X((Ere,nR)=>{d();p();h();var PU=ss(),DU=(e,t)=>{let r=PU(e,t);return r?r.version:null};nR.exports=DU;});var sR=X((Tre,oR)=>{d();p();h();var LU=ss(),OU=(e,t)=>{let r=LU(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};oR.exports=OU;});var uR=X((Pre,cR)=>{d();p();h();var aR=Or(),kU=(e,t,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new aR(e instanceof aR?e.version:e,r).inc(t,n,i).version}catch{return null}};cR.exports=kU;});var dR=X((kre,fR)=>{d();p();h();var lR=ss(),NU=(e,t)=>{let r=lR(e,null,!0),n=lR(t,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,s=o?r:n,a=o?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return !a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};fR.exports=NU;});var pR=X((Fre,hR)=>{d();p();h();var MU=Or(),qU=(e,t)=>new MU(e,t).major;hR.exports=qU;});var mR=X((Bre,gR)=>{d();p();h();var FU=Or(),$U=(e,t)=>new FU(e,t).minor;gR.exports=$U;});var vR=X((Vre,yR)=>{d();p();h();var jU=Or(),UU=(e,t)=>new jU(e,t).patch;yR.exports=UU;});var wR=X((Jre,bR)=>{d();p();h();var BU=ss(),WU=(e,t)=>{let r=BU(e,t);return r&&r.prerelease.length?r.prerelease:null};bR.exports=WU;});var Rn=X((ene,ER)=>{d();p();h();var SR=Or(),zU=(e,t,r)=>new SR(e,r).compare(new SR(t,r));ER.exports=zU;});var CR=X((ine,xR)=>{d();p();h();var HU=Rn(),VU=(e,t,r)=>HU(t,e,r);xR.exports=VU;});var TR=X((cne,_R)=>{d();p();h();var GU=Rn(),YU=(e,t)=>GU(e,t,!0);_R.exports=YU;});var lf=X((dne,IR)=>{d();p();h();var RR=Or(),XU=(e,t,r)=>{let n=new RR(e,r),i=new RR(t,r);return n.compare(i)||n.compareBuild(i)};IR.exports=XU;});var PR=X((mne,AR)=>{d();p();h();var JU=lf(),KU=(e,t)=>e.sort((r,n)=>JU(r,n,t));AR.exports=KU;});var LR=X((wne,DR)=>{d();p();h();var ZU=lf(),QU=(e,t)=>e.sort((r,n)=>ZU(n,r,t));DR.exports=QU;});var Vc=X((Cne,OR)=>{d();p();h();var e4=Rn(),t4=(e,t,r)=>e4(e,t,r)>0;OR.exports=t4;});var ff=X((Ine,kR)=>{d();p();h();var r4=Rn(),n4=(e,t,r)=>r4(e,t,r)<0;kR.exports=n4;});var Dm=X((Lne,NR)=>{d();p();h();var i4=Rn(),o4=(e,t,r)=>i4(e,t,r)===0;NR.exports=o4;});var Lm=X((Mne,MR)=>{d();p();h();var s4=Rn(),a4=(e,t,r)=>s4(e,t,r)!==0;MR.exports=a4;});var df=X((jne,qR)=>{d();p();h();var c4=Rn(),u4=(e,t,r)=>c4(e,t,r)>=0;qR.exports=u4;});var hf=X((zne,FR)=>{d();p();h();var l4=Rn(),f4=(e,t,r)=>l4(e,t,r)<=0;FR.exports=f4;});var Om=X((Yne,$R)=>{d();p();h();var d4=Dm(),h4=Lm(),p4=Vc(),g4=df(),m4=ff(),y4=hf(),v4=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return d4(e,r,n);case"!=":return h4(e,r,n);case">":return p4(e,r,n);case">=":return g4(e,r,n);case"<":return m4(e,r,n);case"<=":return y4(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};$R.exports=v4;});var UR=X((Zne,jR)=>{d();p();h();var b4=Or(),w4=ss(),{safeRe:pf,t:gf}=na(),S4=(e,t)=>{if(e instanceof b4)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?pf[gf.COERCEFULL]:pf[gf.COERCE]);else {let c=t.includePrerelease?pf[gf.COERCERTLFULL]:pf[gf.COERCERTL],l;for(;(l=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1;}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return w4(`${n}.${i}.${o}${s}${a}`,t)};jR.exports=S4;});var WR=X((rie,BR)=>{d();p();h();var km=class{constructor(){this.max=1e3,this.map=new Map;}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i);}this.map.set(t,r);}return this}};BR.exports=km;});var In=X((sie,GR)=>{d();p();h();var Nm=class e{constructor(t,r){if(r=x4(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Mm)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!HR(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&P4(i[0])){this.set=[i];break}}}this.format();}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&I4)|(this.options.loose&&A4))+":"+t,i=zR.get(n);if(i)return i;let o=this.options.loose,s=o?Zr[Vr.HYPHENRANGELOOSE]:Zr[Vr.HYPHENRANGE];t=t.replace(s,j4(this.options.includePrerelease)),kt("hyphen replace",t),t=t.replace(Zr[Vr.COMPARATORTRIM],_4),kt("comparator trim",t),t=t.replace(Zr[Vr.TILDETRIM],T4),kt("tilde trim",t),t=t.replace(Zr[Vr.CARETTRIM],R4),kt("caret trim",t);let a=t.split(" ").map(g=>D4(g,this.options)).join(" ").split(/\s+/).map(g=>$4(g,this.options));o&&(a=a.filter(g=>(kt("loose invalid filter",g,this.options),!!g.match(Zr[Vr.COMPARATORLOOSE])))),kt("range list",a);let c=new Map,l=a.map(g=>new Mm(g,this.options));for(let g of l){if(HR(g))return [g];c.set(g.value,g);}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return zR.set(n,u),u}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>VR(n,r)&&t.set.some(i=>VR(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(t){if(!t)return !1;if(typeof t=="string")try{t=new C4(t,this.options);}catch{return !1}for(let r=0;r<this.set.length;r++)if(U4(this.set[r],t,this.options))return !0;return !1}};GR.exports=Nm;var E4=WR(),zR=new E4,x4=af(),Mm=Gc(),kt=Hc(),C4=Or(),{safeRe:Zr,t:Vr,comparatorTrimReplace:_4,tildeTrimReplace:T4,caretTrimReplace:R4}=na(),{FLAG_INCLUDE_PRERELEASE:I4,FLAG_LOOSE:A4}=zc(),HR=e=>e.value==="<0.0.0-0",P4=e=>e.value==="",VR=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,t)),i=n.pop();return r},D4=(e,t)=>(kt("comp",e,t),e=k4(e,t),kt("caret",e),e=L4(e,t),kt("tildes",e),e=M4(e,t),kt("xrange",e),e=F4(e,t),kt("stars",e),e),Gr=e=>!e||e.toLowerCase()==="x"||e==="*",L4=(e,t)=>e.trim().split(/\s+/).map(r=>O4(r,t)).join(" "),O4=(e,t)=>{let r=t.loose?Zr[Vr.TILDELOOSE]:Zr[Vr.TILDE];return e.replace(r,(n,i,o,s,a)=>{kt("tilde",e,n,i,o,s,a);let c;return Gr(i)?c="":Gr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Gr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(kt("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,kt("tilde return",c),c})},k4=(e,t)=>e.trim().split(/\s+/).map(r=>N4(r,t)).join(" "),N4=(e,t)=>{kt("caret",e,t);let r=t.loose?Zr[Vr.CARETLOOSE]:Zr[Vr.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,o,s,a,c)=>{kt("caret",e,i,o,s,a,c);let l;return Gr(o)?l="":Gr(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Gr(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(kt("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(kt("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),kt("caret return",l),l})},M4=(e,t)=>(kt("replaceXRanges",e,t),e.split(/\s+/).map(r=>q4(r,t)).join(" ")),q4=(e,t)=>{e=e.trim();let r=t.loose?Zr[Vr.XRANGELOOSE]:Zr[Vr.XRANGE];return e.replace(r,(n,i,o,s,a,c)=>{kt("xRange",e,n,i,o,s,a,c);let l=Gr(o),u=l||Gr(s),g=u||Gr(a),w=g;return i==="="&&w&&(i=""),c=t.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&w?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:g&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),kt("xRange return",n),n})},F4=(e,t)=>(kt("replaceStars",e,t),e.trim().replace(Zr[Vr.STAR],"")),$4=(e,t)=>(kt("replaceGTE0",e,t),e.trim().replace(Zr[t.includePrerelease?Vr.GTE0PRE:Vr.GTE0],"")),j4=e=>(t,r,n,i,o,s,a,c,l,u,g,w)=>(Gr(n)?r="":Gr(i)?r=`>=${n}.0.0${e?"-0":""}`:Gr(o)?r=`>=${n}.${i}.0${e?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Gr(l)?c="":Gr(u)?c=`<${+l+1}.0.0-0`:Gr(g)?c=`<${l}.${+u+1}.0-0`:w?c=`<=${l}.${u}.${g}-${w}`:e?c=`<${l}.${u}.${+g+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),U4=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return !1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(kt(e[n].semver),e[n].semver!==Mm.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return !0}return !1}return !0};});var Gc=X((lie,QR)=>{d();p();h();var Yc=Symbol("SemVer ANY"),$m=class e{static get ANY(){return Yc}constructor(t,r){if(r=YR(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value;}t=t.trim().split(/\s+/).join(" "),Fm("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Yc?this.value="":this.value=this.operator+this.semver.version,Fm("comp",this);}parse(t){let r=this.options.loose?XR[JR.COMPARATORLOOSE]:XR[JR.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new KR(n[2],this.options.loose):this.semver=Yc;}toString(){return this.value}test(t){if(Fm("Comparator.test",t,this.options.loose),this.semver===Yc||t===Yc)return !0;if(typeof t=="string")try{t=new KR(t,this.options);}catch{return !1}return qm(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new ZR(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new ZR(this.value,r).test(t.semver):(r=YR(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||qm(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||qm(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};QR.exports=$m;var YR=af(),{safeRe:XR,t:JR}=na(),qm=Om(),Fm=Hc(),KR=Or(),ZR=In();});var Xc=X((pie,eI)=>{d();p();h();var B4=In(),W4=(e,t,r)=>{try{t=new B4(t,r);}catch{return !1}return t.test(e)};eI.exports=W4;});var rI=X((vie,tI)=>{d();p();h();var z4=In(),H4=(e,t)=>new z4(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));tI.exports=H4;});var iI=X((Eie,nI)=>{d();p();h();var V4=Or(),G4=In(),Y4=(e,t,r)=>{let n=null,i=null,o=null;try{o=new G4(t,r);}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new V4(n,r));}),n};nI.exports=Y4;});var sI=X((Tie,oI)=>{d();p();h();var X4=Or(),J4=In(),K4=(e,t,r)=>{let n=null,i=null,o=null;try{o=new J4(t,r);}catch{return null}return e.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new X4(n,r));}),n};oI.exports=K4;});var uI=X((Pie,cI)=>{d();p();h();var jm=Or(),Z4=In(),aI=Vc(),Q4=(e,t)=>{e=new Z4(e,t);let r=new jm("0.0.0");if(e.test(r)||(r=new jm("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],o=null;i.forEach(s=>{let a=new jm(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||aI(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||aI(r,o))&&(r=o);}return r&&e.test(r)?r:null};cI.exports=Q4;});var fI=X((kie,lI)=>{d();p();h();var eB=In(),tB=(e,t)=>{try{return new eB(e,t).range||"*"}catch{return null}};lI.exports=tB;});var mf=X((Fie,gI)=>{d();p();h();var rB=Or(),pI=Gc(),{ANY:nB}=pI,iB=In(),oB=Xc(),dI=Vc(),hI=ff(),sB=hf(),aB=df(),cB=(e,t,r,n)=>{e=new rB(e,n),t=new iB(t,n);let i,o,s,a,c;switch(r){case">":i=dI,o=sB,s=hI,a=">",c=">=";break;case"<":i=hI,o=aB,s=dI,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(oB(e,t,n))return !1;for(let l=0;l<t.set.length;++l){let u=t.set[l],g=null,w=null;if(u.forEach(y=>{y.semver===nB&&(y=new pI(">=0.0.0")),g=g||y,w=w||y,i(y.semver,g.semver,n)?g=y:s(y.semver,w.semver,n)&&(w=y);}),g.operator===a||g.operator===c||(!w.operator||w.operator===a)&&o(e,w.semver))return !1;if(w.operator===c&&s(e,w.semver))return !1}return !0};gI.exports=cB;});var yI=X((Bie,mI)=>{d();p();h();var uB=mf(),lB=(e,t,r)=>uB(e,t,">",r);mI.exports=lB;});var bI=X((Vie,vI)=>{d();p();h();var fB=mf(),dB=(e,t,r)=>fB(e,t,"<",r);vI.exports=dB;});var EI=X((Jie,SI)=>{d();p();h();var wI=In(),hB=(e,t,r)=>(e=new wI(e,r),t=new wI(t,r),e.intersects(t,r));SI.exports=hB;});var CI=X((eoe,xI)=>{d();p();h();var pB=Xc(),gB=Rn();xI.exports=(e,t,r)=>{let n=[],i=null,o=null,s=e.sort((u,g)=>gB(u,g,r));for(let u of s)pB(u,t,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,g]of n)u===g?a.push(u):!g&&u===s[0]?a.push("*"):g?u===s[0]?a.push(`<=${g}`):a.push(`${u} - ${g}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return c.length<l.length?c:t};});var PI=X((ioe,AI)=>{d();p();h();var _I=In(),Bm=Gc(),{ANY:Um}=Bm,Jc=Xc(),Wm=Rn(),mB=(e,t,r={})=>{if(e===t)return !0;e=new _I(e,r),t=new _I(t,r);let n=!1;e:for(let i of e.set){for(let o of t.set){let s=vB(i,o,r);if(n=n||s!==null,s)continue e}if(n)return !1}return !0},yB=[new Bm(">=0.0.0-0")],TI=[new Bm(">=0.0.0")],vB=(e,t,r)=>{if(e===t)return !0;if(e.length===1&&e[0].semver===Um){if(t.length===1&&t[0].semver===Um)return !0;r.includePrerelease?e=yB:e=TI;}if(t.length===1&&t[0].semver===Um){if(r.includePrerelease)return !0;t=TI;}let n=new Set,i,o;for(let y of e)y.operator===">"||y.operator===">="?i=RI(i,y,r):y.operator==="<"||y.operator==="<="?o=II(o,y,r):n.add(y.semver);if(n.size>1)return null;let s;if(i&&o){if(s=Wm(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let y of n){if(i&&!Jc(y,String(i),r)||o&&!Jc(y,String(o),r))return null;for(let _ of t)if(!Jc(y,String(_),r))return !1;return !0}let a,c,l,u,g=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,w=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;g&&g.prerelease.length===1&&o.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(let y of t){if(u=u||y.operator===">"||y.operator===">=",l=l||y.operator==="<"||y.operator==="<=",i){if(w&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===w.major&&y.semver.minor===w.minor&&y.semver.patch===w.patch&&(w=!1),y.operator===">"||y.operator===">="){if(a=RI(i,y,r),a===y&&a!==i)return !1}else if(i.operator===">="&&!Jc(i.semver,String(y),r))return !1}if(o){if(g&&y.semver.prerelease&&y.semver.prerelease.length&&y.semver.major===g.major&&y.semver.minor===g.minor&&y.semver.patch===g.patch&&(g=!1),y.operator==="<"||y.operator==="<="){if(c=II(o,y,r),c===y&&c!==o)return !1}else if(o.operator==="<="&&!Jc(o.semver,String(y),r))return !1}if(!y.operator&&(o||i)&&s!==0)return !1}return !(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||w||g)},RI=(e,t,r)=>{if(!e)return t;let n=Wm(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},II=(e,t,r)=>{if(!e)return t;let n=Wm(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};AI.exports=mB;});var kI=X((coe,OI)=>{d();p();h();var zm=na(),DI=zc(),bB=Or(),LI=Am(),wB=ss(),SB=iR(),EB=sR(),xB=uR(),CB=dR(),_B=pR(),TB=mR(),RB=vR(),IB=wR(),AB=Rn(),PB=CR(),DB=TR(),LB=lf(),OB=PR(),kB=LR(),NB=Vc(),MB=ff(),qB=Dm(),FB=Lm(),$B=df(),jB=hf(),UB=Om(),BB=UR(),WB=Gc(),zB=In(),HB=Xc(),VB=rI(),GB=iI(),YB=sI(),XB=uI(),JB=fI(),KB=mf(),ZB=yI(),QB=bI(),e8=EI(),t8=CI(),r8=PI();OI.exports={parse:wB,valid:SB,clean:EB,inc:xB,diff:CB,major:_B,minor:TB,patch:RB,prerelease:IB,compare:AB,rcompare:PB,compareLoose:DB,compareBuild:LB,sort:OB,rsort:kB,gt:NB,lt:MB,eq:qB,neq:FB,gte:$B,lte:jB,cmp:UB,coerce:BB,Comparator:WB,Range:zB,satisfies:HB,toComparators:VB,maxSatisfying:GB,minSatisfying:YB,minVersion:XB,validRange:JB,outside:KB,gtr:ZB,ltr:QB,intersects:e8,simplifyRange:t8,subset:r8,SemVer:bB,re:zm.re,src:zm.src,tokens:zm.t,SEMVER_SPEC_VERSION:DI.SEMVER_SPEC_VERSION,RELEASE_TYPES:DI.RELEASE_TYPES,compareIdentifiers:LI.compareIdentifiers,rcompareIdentifiers:LI.rcompareIdentifiers};});var BI={};Ws(BI,{closest:()=>f8,distance:()=>UI});var qi,u8,l8,UI,f8,WI=jn(()=>{d();p();h();qi=new Uint32Array(65536),u8=(e,t)=>{let r=e.length,n=t.length,i=1<<r-1,o=-1,s=0,a=r,c=r;for(;c--;)qi[e.charCodeAt(c)]|=1<<c;for(c=0;c<n;c++){let l=qi[t.charCodeAt(c)],u=l|s;l|=(l&o)+o^o,s|=~(l|o),o&=l,s&i&&a++,o&i&&a--,s=s<<1|1,o=o<<1|~(u|s),s&=u;}for(c=r;c--;)qi[e.charCodeAt(c)]=0;return a},l8=(e,t)=>{let r=t.length,n=e.length,i=[],o=[],s=Math.ceil(r/32),a=Math.ceil(n/32);for(let _=0;_<s;_++)o[_]=-1,i[_]=0;let c=0;for(;c<a-1;c++){let _=0,x=-1,D=c*32,A=Math.min(32,n)+D;for(let C=D;C<A;C++)qi[e.charCodeAt(C)]|=1<<C;for(let C=0;C<r;C++){let R=qi[t.charCodeAt(C)],T=o[C/32|0]>>>C&1,$=i[C/32|0]>>>C&1,P=R|_,q=((R|$)&x)+x^x|R|$,k=_|~(q|x),V=x&q;k>>>31^T&&(o[C/32|0]^=1<<C),V>>>31^$&&(i[C/32|0]^=1<<C),k=k<<1|T,V=V<<1|$,x=V|~(P|k),_=k&P;}for(let C=D;C<A;C++)qi[e.charCodeAt(C)]=0;}let l=0,u=-1,g=c*32,w=Math.min(32,n-g)+g;for(let _=g;_<w;_++)qi[e.charCodeAt(_)]|=1<<_;let y=n;for(let _=0;_<r;_++){let x=qi[t.charCodeAt(_)],D=o[_/32|0]>>>_&1,A=i[_/32|0]>>>_&1,C=x|l,R=((x|A)&u)+u^u|x|A,T=l|~(R|u),$=u&R;y+=T>>>n-1&1,y-=$>>>n-1&1,T>>>31^D&&(o[_/32|0]^=1<<_),$>>>31^A&&(i[_/32|0]^=1<<_),T=T<<1|D,$=$<<1|A,u=$|~(C|T),l=T&C;}for(let _=g;_<w;_++)qi[e.charCodeAt(_)]=0;return y},UI=(e,t)=>{if(e.length<t.length){let r=t;t=e,e=r;}return t.length===0?e.length:e.length<=32?u8(e,t):l8(e,t)},f8=(e,t)=>{let r=1/0,n=0;for(let i=0;i<t.length;i++){let o=UI(e,t[i]);o<r&&(r=o,n=i);}return t[n]};});var zI=X((Jm,Kc)=>{d();p();h();(function(){var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null;}catch{console.log("Collator could not be initialized and wouldn't be used");}var t=(WI(),Ar(BI)),r=[],n=[],i={get:function(o,s,a){var c=a&&e&&a.useCollator;if(c){var l=o.length,u=s.length;if(l===0)return u;if(u===0)return l;var g,w,y,_,x;for(y=0;y<u;++y)r[y]=y,n[y]=s.charCodeAt(y);r[u]=u;var D;for(y=0;y<l;++y){for(w=y+1,_=0;_<u;++_)g=w,D=e.compare(o.charAt(y),String.fromCharCode(n[_]))===0,w=r[_]+(D?0:1),x=g+1,w>x&&(w=x),x=r[_+1]+1,w>x&&(w=x),r[_]=g;r[_]=w;}return w}return t.distance(o,s)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return i}):typeof Kc<"u"&&Kc!==null&&typeof Jm<"u"&&Kc.exports===Jm?Kc.exports=i:typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"?self.Levenshtein=i:typeof window<"u"&&window!==null&&(window.Levenshtein=i);})();});var Vt=X((Nse,XI)=>{d();p();h();XI.exports={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array};});var aa=X(($se,vf)=>{d();p();h();var{AbortController:JI,AbortSignal:h8}=typeof self<"u"?self:typeof window<"u"?window:void 0;vf.exports=JI;vf.exports.AbortSignal=h8;vf.exports.default=JI;});var kr=X((Wse,ty)=>{d();p();h();var p8=(Oi(),Ar(ho)),{kResistStopPropagation:g8,SymbolDispose:m8}=Vt(),y8=globalThis.AbortSignal||aa().AbortSignal,v8=globalThis.AbortController||aa().AbortController,b8=Object.getPrototypeOf(async function(){}).constructor,KI=globalThis.Blob||p8.Blob,w8=typeof KI<"u"?function(t){return t instanceof KI}:function(t){return !1},ZI=(e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)},S8=(e,t)=>{if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE(t,"Function",e)},ey=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let n=0;n<t.length;n++)r+=`    ${t[n].stack}
`;super(r),this.name="AggregateError",this.errors=t;}};ty.exports={AggregateError:ey,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r));}},createDeferredPromise:function(){let e,t;return {promise:new Promise((n,i)=>{e=n,t=i;}),resolve:e,reject:t}},promisify(e){return new Promise((t,r)=>{e((n,...i)=>n?r(n):t(...i));})},debuglog(){return function(){}},format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,n]){let i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return `\`${e}\``}else return `"${e}"`;return `'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return `${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return "{}"}},types:{isAsyncFunction(e){return e instanceof b8},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:w8,deprecate(e,t){return e},addAbortListener:(ni(),Ar(Dc)).addAbortListener||function(t,r){if(t===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",t);ZI(t,"signal"),S8(r,"listener");let n;return t.aborted?queueMicrotask(()=>r()):(t.addEventListener("abort",r,{__proto__:null,once:!0,[g8]:!0}),n=()=>{t.removeEventListener("abort",r);}),{__proto__:null,[m8](){var i;(i=n)===null||i===void 0||i();}}},AbortSignalAny:y8.any||function(t){if(t.length===1)return t[0];let r=new v8,n=()=>r.abort();return t.forEach(i=>{ZI(i,"signals"),i.addEventListener("abort",n,{once:!0});}),r.signal.addEventListener("abort",()=>{t.forEach(i=>i.removeEventListener("abort",n));},{once:!0}),r.signal}};ty.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom");});var Yr=X((Gse,tA)=>{d();p();h();var{format:E8,inspect:bf,AggregateError:x8}=kr(),C8=globalThis.AggregateError||x8,_8=Symbol("kIsNodeError"),T8=["string","function","number","object","Function","Object","boolean","bigint","symbol"],R8=/^([A-Z][a-z0-9]*)+$/,I8="__node_internal_",wf={};function cs(e,t){if(!e)throw new wf.ERR_INTERNAL_ASSERTION(t)}function QI(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return `${e.slice(0,r)}${t}`}function A8(e,t,r){if(typeof t=="function")return cs(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let n=(t.match(/%[dfijoOs]/g)||[]).length;return cs(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:E8(t,...r)}function Cr(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(A8(e,t,o));}toString(){return `${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return `${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[_8]=!0,wf[e]=n;}function eA(e){let t=I8+e.name;return Object.defineProperty(e,"name",{value:t}),e}function P8(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new C8([t,e],t.message);return r.code=t.code,r}return e||t}var ry=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new wf.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError";}};Cr("ERR_ASSERTION","%s",Error);Cr("ERR_INVALID_ARG_TYPE",(e,t,r)=>{cs(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let c of t)cs(typeof c=="string","All expected entries have to be of type string"),T8.includes(c)?i.push(c.toLowerCase()):R8.test(c)?o.push(c):(cs(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"));}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`;}}(o.length>0||s.length>0)&&(n+=" or ");}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`;}}s.length>0&&(n+=" or ");}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`;}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else {let c=bf(r,{depth:-1});n+=`. Received ${c}`;}}else {let c=bf(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`;}return n},TypeError);Cr("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=bf(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);Cr("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return `Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Cr("ERR_MISSING_ARGS",(...e)=>{cs(e.length>0,"At least one arg needs to be specified");let t,r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`;}break}return `${t} must be specified`},TypeError);Cr("ERR_OUT_OF_RANGE",(e,t,r)=>{cs(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=QI(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=QI(n)),n+="n"):n=bf(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);Cr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Cr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Cr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Cr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Cr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Cr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Cr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Cr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Cr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Cr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Cr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);tA.exports={AbortError:ry,aggregateTwoErrors:eA(P8),hideStackFrames:eA,codes:wf};});var ua=X((Kse,fA)=>{d();p();h();var{ArrayIsArray:iy,ArrayPrototypeIncludes:oA,ArrayPrototypeJoin:sA,ArrayPrototypeMap:D8,NumberIsInteger:oy,NumberIsNaN:L8,NumberMAX_SAFE_INTEGER:O8,NumberMIN_SAFE_INTEGER:k8,NumberParseInt:N8,ObjectPrototypeHasOwnProperty:M8,RegExpPrototypeExec:aA,String:q8,StringPrototypeToUpperCase:F8,StringPrototypeTrim:$8}=Vt(),{hideStackFrames:An,codes:{ERR_SOCKET_BAD_PORT:j8,ERR_INVALID_ARG_TYPE:Nr,ERR_INVALID_ARG_VALUE:ca,ERR_OUT_OF_RANGE:us,ERR_UNKNOWN_SIGNAL:rA}}=Yr(),{normalizeEncoding:U8}=kr(),{isAsyncFunction:B8,isArrayBufferView:W8}=kr().types,nA={};function z8(e){return e===(e|0)}function H8(e){return e===e>>>0}var V8=/^[0-7]+$/,G8="must be a 32-bit unsigned integer or an octal string";function Y8(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(aA(V8,e)===null)throw new ca(t,e,G8);e=N8(e,8);}return cA(e,t),e}var X8=An((e,t,r=k8,n=O8)=>{if(typeof e!="number")throw new Nr(t,"number",e);if(!oy(e))throw new us(t,"an integer",e);if(e<r||e>n)throw new us(t,`>= ${r} && <= ${n}`,e)}),J8=An((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new Nr(t,"number",e);if(!oy(e))throw new us(t,"an integer",e);if(e<r||e>n)throw new us(t,`>= ${r} && <= ${n}`,e)}),cA=An((e,t,r=!1)=>{if(typeof e!="number")throw new Nr(t,"number",e);if(!oy(e))throw new us(t,"an integer",e);let n=r?1:0,i=4294967295;if(e<n||e>i)throw new us(t,`>= ${n} && <= ${i}`,e)});function sy(e,t){if(typeof e!="string")throw new Nr(t,"string",e)}function K8(e,t,r=void 0,n){if(typeof e!="number")throw new Nr(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&L8(e))throw new us(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}var Z8=An((e,t,r)=>{if(!oA(r,e)){let i="must be one of: "+sA(D8(r,o=>typeof o=="string"?`'${o}'`:q8(o)),", ");throw new ca(t,e,i)}});function uA(e,t){if(typeof e!="boolean")throw new Nr(t,"boolean",e)}function ny(e,t,r){return e==null||!M8(e,t)?r:e[t]}var Q8=An((e,t,r=null)=>{let n=ny(r,"allowArray",!1),i=ny(r,"allowFunction",!1);if(!ny(r,"nullable",!1)&&e===null||!n&&iy(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Nr(t,"Object",e)}),e5=An((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Nr(t,"a dictionary",e)}),Sf=An((e,t,r=0)=>{if(!iy(e))throw new Nr(t,"Array",e);if(e.length<r){let n=`must be longer than ${r}`;throw new ca(t,e,n)}});function t5(e,t){Sf(e,t);for(let r=0;r<e.length;r++)sy(e[r],`${t}[${r}]`);}function r5(e,t){Sf(e,t);for(let r=0;r<e.length;r++)uA(e[r],`${t}[${r}]`);}function n5(e,t){Sf(e,t);for(let r=0;r<e.length;r++){let n=e[r],i=`${t}[${r}]`;if(n==null)throw new Nr(i,"AbortSignal",n);lA(n,i);}}function i5(e,t="signal"){if(sy(e,t),nA[e]===void 0)throw nA[F8(e)]!==void 0?new rA(e+" (signals must use all capital letters)"):new rA(e)}var o5=An((e,t="buffer")=>{if(!W8(e))throw new Nr(t,["Buffer","TypedArray","DataView"],e)});function s5(e,t){let r=U8(t),n=e.length;if(r==="hex"&&n%2!==0)throw new ca("encoding",t,`is invalid for data of length ${n}`)}function a5(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&$8(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new j8(t,e,r);return e|0}var lA=An((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Nr(t,"AbortSignal",e)}),c5=An((e,t)=>{if(typeof e!="function")throw new Nr(t,"Function",e)}),u5=An((e,t)=>{if(typeof e!="function"||B8(e))throw new Nr(t,"Function",e)}),l5=An((e,t)=>{if(e!==void 0)throw new Nr(t,"undefined",e)});function f5(e,t,r){if(!oA(r,e))throw new Nr(t,`('${sA(r,"|")}')`,e)}var d5=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function iA(e,t){if(typeof e>"u"||!aA(d5,e))throw new ca(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function h5(e){if(typeof e=="string")return iA(e,"hints"),e;if(iy(e)){let t=e.length,r="";if(t===0)return r;for(let n=0;n<t;n++){let i=e[n];iA(i,"hints"),r+=i,n!==t-1&&(r+=", ");}return r}throw new ca("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}fA.exports={isInt32:z8,isUint32:H8,parseFileMode:Y8,validateArray:Sf,validateStringArray:t5,validateBooleanArray:r5,validateAbortSignalArray:n5,validateBoolean:uA,validateBuffer:o5,validateDictionary:e5,validateEncoding:s5,validateFunction:c5,validateInt32:J8,validateInteger:X8,validateNumber:K8,validateObject:Q8,validateOneOf:Z8,validatePlainFunction:u5,validatePort:a5,validateSignalName:i5,validateString:sy,validateUint32:cA,validateUndefined:l5,validateUnion:f5,validateAbortSignal:lA,validateLinkHeaderValue:h5};});var So=X((tae,gA)=>{d();p();h();var rr=gA.exports={},ai,ci;function ay(){throw new Error("setTimeout has not been defined")}function cy(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ai=setTimeout:ai=ay;}catch{ai=ay;}try{typeof clearTimeout=="function"?ci=clearTimeout:ci=cy;}catch{ci=cy;}})();function dA(e){if(ai===setTimeout)return setTimeout(e,0);if((ai===ay||!ai)&&setTimeout)return ai=setTimeout,setTimeout(e,0);try{return ai(e,0)}catch{try{return ai.call(null,e,0)}catch{return ai.call(this,e,0)}}}function p5(e){if(ci===clearTimeout)return clearTimeout(e);if((ci===cy||!ci)&&clearTimeout)return ci=clearTimeout,clearTimeout(e);try{return ci(e)}catch{try{return ci.call(null,e)}catch{return ci.call(this,e)}}}var $i=[],la=!1,ls,Ef=-1;function g5(){!la||!ls||(la=!1,ls.length?$i=ls.concat($i):Ef=-1,$i.length&&hA());}function hA(){if(!la){var e=dA(g5);la=!0;for(var t=$i.length;t;){for(ls=$i,$i=[];++Ef<t;)ls&&ls[Ef].run();Ef=-1,t=$i.length;}ls=null,la=!1,p5(e);}}rr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];$i.push(new pA(e,t)),$i.length===1&&!la&&dA(hA);};function pA(e,t){this.fun=e,this.array=t;}pA.prototype.run=function(){this.fun.apply(null,this.array);};rr.title="browser";rr.browser=!0;rr.env={};rr.argv=[];rr.version="";rr.versions={};function ji(){}rr.on=ji;rr.addListener=ji;rr.once=ji;rr.off=ji;rr.removeListener=ji;rr.removeAllListeners=ji;rr.emit=ji;rr.prependListener=ji;rr.prependOnceListener=ji;rr.listeners=function(e){return []};rr.binding=function(e){throw new Error("process.binding is not supported")};rr.cwd=function(){return "/"};rr.chdir=function(e){throw new Error("process.chdir is not supported")};rr.umask=function(){return 0};});var li=X((oae,PA)=>{d();p();h();var{SymbolAsyncIterator:mA,SymbolIterator:yA,SymbolFor:fs}=Vt(),vA=fs("nodejs.stream.destroyed"),bA=fs("nodejs.stream.errored"),uy=fs("nodejs.stream.readable"),ly=fs("nodejs.stream.writable"),wA=fs("nodejs.stream.disturbed"),m5=fs("nodejs.webstream.isClosedPromise"),y5=fs("nodejs.webstream.controllerErrorFunction");function xf(e,t=!1){var r;return !!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function Cf(e){var t;return !!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function v5(e){return !!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function ui(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function SA(e){return !!(e&&!ui(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function EA(e){return !!(e&&!ui(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function xA(e){return !!(e&&!ui(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function b5(e){return SA(e)||EA(e)||xA(e)}function w5(e,t){return e==null?!1:t===!0?typeof e[mA]=="function":t===!1?typeof e[yA]=="function":typeof e[mA]=="function"||typeof e[yA]=="function"}function _f(e){if(!ui(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return !!(e.destroyed||e[vA]||n!=null&&n.destroyed)}function CA(e){if(!Cf(e))return null;if(e.writableEnded===!0)return !0;let t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function S5(e,t){if(!Cf(e))return null;if(e.writableFinished===!0)return !0;let r=e._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function E5(e){if(!xf(e))return null;if(e.readableEnded===!0)return !0;let t=e._readableState;return !t||t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function _A(e,t){if(!xf(e))return null;let r=e._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function TA(e){return e&&e[uy]!=null?e[uy]:typeof e?.readable!="boolean"?null:_f(e)?!1:xf(e)&&e.readable&&!_A(e)}function RA(e){return e&&e[ly]!=null?e[ly]:typeof e?.writable!="boolean"?null:_f(e)?!1:Cf(e)&&e.writable&&!CA(e)}function x5(e,t){return ui(e)?_f(e)?!0:!(t?.readable!==!1&&TA(e)||t?.writable!==!1&&RA(e)):null}function C5(e){var t,r;return ui(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function _5(e){var t,r;return ui(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function T5(e){if(!ui(e))return null;if(typeof e.closed=="boolean")return e.closed;let t=e._writableState,r=e._readableState;return typeof t?.closed=="boolean"||typeof r?.closed=="boolean"?t?.closed||r?.closed:typeof e._closed=="boolean"&&IA(e)?e._closed:null}function IA(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function AA(e){return typeof e._sent100=="boolean"&&IA(e)}function R5(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function I5(e){if(!ui(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return !n&&AA(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function A5(e){var t;return !!(e&&((t=e[wA])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function P5(e){var t,r,n,i,o,s,a,c,l,u;return !!(e&&((t=(r=(n=(i=(o=(s=e[bA])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(a=e._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(l=e._readableState)===null||l===void 0?void 0:l.errored)!==null&&t!==void 0?t:!((u=e._writableState)===null||u===void 0)&&u.errored))}PA.exports={isDestroyed:_f,kIsDestroyed:vA,isDisturbed:A5,kIsDisturbed:wA,isErrored:P5,kIsErrored:bA,isReadable:TA,kIsReadable:uy,kIsClosedPromise:m5,kControllerErrorFunction:y5,kIsWritable:ly,isClosed:T5,isDuplexNodeStream:v5,isFinished:x5,isIterable:w5,isReadableNodeStream:xf,isReadableStream:SA,isReadableEnded:E5,isReadableFinished:_A,isReadableErrored:_5,isNodeStream:ui,isWebStream:b5,isWritable:RA,isWritableNodeStream:Cf,isWritableStream:EA,isWritableEnded:CA,isWritableFinished:S5,isWritableErrored:C5,isServerRequest:R5,isServerResponse:AA,willEmitClose:I5,isTransformStream:xA};});var Ui=X((uae,gy)=>{d();p();h();var Eo=So(),{AbortError:$A,codes:D5}=Yr(),{ERR_INVALID_ARG_TYPE:L5,ERR_STREAM_PREMATURE_CLOSE:DA}=D5,{kEmptyObject:dy,once:hy}=kr(),{validateAbortSignal:O5,validateFunction:k5,validateObject:N5,validateBoolean:M5}=ua(),{Promise:q5,PromisePrototypeThen:F5,SymbolDispose:jA}=Vt(),{isClosed:$5,isReadable:LA,isReadableNodeStream:fy,isReadableStream:j5,isReadableFinished:OA,isReadableErrored:kA,isWritable:NA,isWritableNodeStream:MA,isWritableStream:U5,isWritableFinished:qA,isWritableErrored:FA,isNodeStream:B5,willEmitClose:W5,kIsClosedPromise:z5}=li(),fa;function H5(e){return e.setHeader&&typeof e.abort=="function"}var py=()=>{};function UA(e,t,r){var n,i;if(arguments.length===2?(r=t,t=dy):t==null?t=dy:N5(t,"options"),k5(r,"callback"),O5(t.signal,"options.signal"),r=hy(r),j5(e)||U5(e))return V5(e,t,r);if(!B5(e))throw new L5("stream",["ReadableStream","WritableStream","Stream"],e);let o=(n=t.readable)!==null&&n!==void 0?n:fy(e),s=(i=t.writable)!==null&&i!==void 0?i:MA(e),a=e._writableState,c=e._readableState,l=()=>{e.writable||w();},u=W5(e)&&fy(e)===o&&MA(e)===s,g=qA(e,!1),w=()=>{g=!0,e.destroyed&&(u=!1),!(u&&(!e.readable||o))&&(!o||y)&&r.call(e);},y=OA(e,!1),_=()=>{y=!0,e.destroyed&&(u=!1),!(u&&(!e.writable||s))&&(!s||g)&&r.call(e);},x=$=>{r.call(e,$);},D=$5(e),A=()=>{D=!0;let $=FA(e)||kA(e);if($&&typeof $!="boolean")return r.call(e,$);if(o&&!y&&fy(e,!0)&&!OA(e,!1))return r.call(e,new DA);if(s&&!g&&!qA(e,!1))return r.call(e,new DA);r.call(e);},C=()=>{D=!0;let $=FA(e)||kA(e);if($&&typeof $!="boolean")return r.call(e,$);r.call(e);},R=()=>{e.req.on("finish",w);};H5(e)?(e.on("complete",w),u||e.on("abort",A),e.req?R():e.on("request",R)):s&&!a&&(e.on("end",l),e.on("close",l)),!u&&typeof e.aborted=="boolean"&&e.on("aborted",A),e.on("end",_),e.on("finish",w),t.error!==!1&&e.on("error",x),e.on("close",A),D?Eo.nextTick(A):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?u||Eo.nextTick(C):(!o&&(!u||LA(e))&&(g||NA(e)===!1)||!s&&(!u||NA(e))&&(y||LA(e)===!1)||c&&e.req&&e.aborted)&&Eo.nextTick(C);let T=()=>{r=py,e.removeListener("aborted",A),e.removeListener("complete",w),e.removeListener("abort",A),e.removeListener("request",R),e.req&&e.req.removeListener("finish",w),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",w),e.removeListener("end",_),e.removeListener("error",x),e.removeListener("close",A);};if(t.signal&&!D){let $=()=>{let P=r;T(),P.call(e,new $A(void 0,{cause:t.signal.reason}));};if(t.signal.aborted)Eo.nextTick($);else {fa=fa||kr().addAbortListener;let P=fa(t.signal,$),q=r;r=hy((...k)=>{P[jA](),q.apply(e,k);});}}return T}function V5(e,t,r){let n=!1,i=py;if(t.signal)if(i=()=>{n=!0,r.call(e,new $A(void 0,{cause:t.signal.reason}));},t.signal.aborted)Eo.nextTick(i);else {fa=fa||kr().addAbortListener;let s=fa(t.signal,i),a=r;r=hy((...c)=>{s[jA](),a.apply(e,c);});}let o=(...s)=>{n||Eo.nextTick(()=>r.apply(e,s));};return F5(e[z5].promise,o,o),py}function G5(e,t){var r;let n=!1;return t===null&&(t=dy),(r=t)!==null&&r!==void 0&&r.cleanup&&(M5(t.cleanup,"cleanup"),n=t.cleanup),new q5((i,o)=>{let s=UA(e,t,a=>{n&&s(),a?o(a):i();});})}gy.exports=UA;gy.exports.finished=G5;});var ds=X((hae,XA)=>{d();p();h();var fi=So(),{aggregateTwoErrors:Y5,codes:{ERR_MULTIPLE_CALLBACK:X5},AbortError:J5}=Yr(),{Symbol:zA}=Vt(),{kIsDestroyed:K5,isDestroyed:Z5,isFinished:Q5,isServerRequest:eW}=li(),HA=zA("kDestroy"),my=zA("kConstruct");function VA(e,t,r){e&&(t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e));}function tW(e,t){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(VA(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?BA(this,e,t):this.once(HA,function(o){BA(this,Y5(o,e),t);}),this)}function BA(e,t,r){let n=!1;function i(o){if(n)return;n=!0;let s=e._readableState,a=e._writableState;VA(o,a,s),a&&(a.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?fi.nextTick(rW,e,o):fi.nextTick(GA,e);}try{e._destroy(t||null,i);}catch(o){i(o);}}function rW(e,t){yy(e,t),GA(e);}function GA(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close");}function yy(e,t){let r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t));}function nW(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1);}function vy(e,t,r){let n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?fi.nextTick(yy,e,t):yy(e,t));}function iW(e,t){if(typeof e._construct!="function")return;let r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(my,t),!(e.listenerCount(my)>1)&&fi.nextTick(oW,e);}function oW(e){let t=!1;function r(n){if(t){vy(e,n??new X5);return}t=!0;let i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(HA,n):n?vy(e,n,!0):fi.nextTick(sW,e);}try{e._construct(n=>{fi.nextTick(r,n);});}catch(n){fi.nextTick(r,n);}}function sW(e){e.emit(my);}function WA(e){return e?.setHeader&&typeof e.abort=="function"}function YA(e){e.emit("close");}function aW(e,t){e.emit("error",t),fi.nextTick(YA,e);}function cW(e,t){!e||Z5(e)||(!t&&!Q5(e)&&(t=new J5),eW(e)?(e.socket=null,e.destroy(t)):WA(e)?e.abort():WA(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?fi.nextTick(aW,e,t):fi.nextTick(YA,e),e.destroyed||(e[K5]=!0));}XA.exports={construct:iW,destroyer:cW,destroy:tW,undestroy:nW,errorOrDestroy:vy};});var If=X((yae,KA)=>{d();p();h();var{ArrayIsArray:uW,ObjectSetPrototypeOf:JA}=Vt(),{EventEmitter:Tf}=(ni(),Ar(Dc));function Rf(e){Tf.call(this,e);}JA(Rf.prototype,Tf.prototype);JA(Rf,Tf);Rf.prototype.pipe=function(e,t){let r=this;function n(u){e.writable&&e.write(u)===!1&&r.pause&&r.pause();}r.on("data",n);function i(){r.readable&&r.resume&&r.resume();}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,e.end());}function a(){o||(o=!0,typeof e.destroy=="function"&&e.destroy());}function c(u){l(),Tf.listenerCount(this,"error")===0&&this.emit("error",u);}by(r,"error",c),by(e,"error",c);function l(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l);}return r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e};function by(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):uW(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]];}KA.exports={Stream:Rf,prependListener:by};});var Qc=X((Sae,Af)=>{d();p();h();var{SymbolDispose:lW}=Vt(),{AbortError:ZA,codes:fW}=Yr(),{isNodeStream:QA,isWebStream:dW,kControllerErrorFunction:hW}=li(),pW=Ui(),{ERR_INVALID_ARG_TYPE:eP}=fW,wy,gW=(e,t)=>{if(typeof e!="object"||!("aborted"in e))throw new eP(t,"AbortSignal",e)};Af.exports.addAbortSignal=function(t,r){if(gW(t,"signal"),!QA(r)&&!dW(r))throw new eP("stream",["ReadableStream","WritableStream","Stream"],r);return Af.exports.addAbortSignalNoValidate(t,r)};Af.exports.addAbortSignalNoValidate=function(e,t){if(typeof e!="object"||!("aborted"in e))return t;let r=QA(t)?()=>{t.destroy(new ZA(void 0,{cause:e.reason}));}:()=>{t[hW](new ZA(void 0,{cause:e.reason}));};if(e.aborted)r();else {wy=wy||kr().addAbortListener;let n=wy(e,r);pW(t,n[lW]);}return t};});var nP=X((Tae,rP)=>{d();p();h();var{StringPrototypeSlice:tP,SymbolIterator:mW,TypedArrayPrototypeSet:Pf,Uint8Array:yW}=Vt(),{Buffer:Sy}=(Oi(),Ar(ho)),{inspect:vW}=kr();rP.exports=class{constructor(){this.head=null,this.tail=null,this.length=0;}push(t){let r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length;}unshift(t){let r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length;}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0;}join(t){if(this.length===0)return "";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return Sy.alloc(0);let r=Sy.allocUnsafe(t>>>0),n=this.head,i=0;for(;n;)Pf(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){let n=this.head.data;if(t<n.length){let i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[mW](){for(let t=this.head;t;t=t.next)yield t.data;}_getString(t){let r="",n=this.head,i=0;do{let o=n.data;if(t>o.length)r+=o,t-=o.length;else {t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=tP(o,0,t),this.head=n,n.data=tP(o,t));break}++i;}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){let r=Sy.allocUnsafe(t),n=t,i=this.head,o=0;do{let s=i.data;if(t>s.length)Pf(r,s,n-t),t-=s.length;else {t===s.length?(Pf(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(Pf(r,new yW(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o;}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return vW(this,{...r,depth:0,customInspect:!1})}};});var eu=X((Pae,aP)=>{d();p();h();var{MathFloor:bW,NumberIsInteger:wW}=Vt(),{validateInteger:SW}=ua(),{ERR_INVALID_ARG_VALUE:EW}=Yr().codes,iP=16*1024,oP=16;function xW(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function sP(e){return e?oP:iP}function CW(e,t){SW(t,"value",0),e?oP=t:iP=t;}function _W(e,t,r,n){let i=xW(t,n,r);if(i!=null){if(!wW(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new EW(o,i)}return bW(i)}return sP(e.objectMode)}aP.exports={getHighWaterMark:_W,getDefaultHighWaterMark:sP,setDefaultHighWaterMark:CW};});function lP(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return r===-1&&(r=t),[r,r===t?0:4-r%4]}function TW(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(Hn[(i=n)>>18&63]+Hn[i>>12&63]+Hn[i>>6&63]+Hn[63&i]);return o.join("")}function Bi(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,ue.prototype),t}function ue(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _y(e)}return wP(e,t,r)}function wP(e,t,r){if(typeof e=="string")return function(o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!ue.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|EP(o,s),c=Bi(a),l=c.write(o,s);return l!==a&&(c=c.slice(0,l)),c}(e,t);if(ArrayBuffer.isView(e))return Ey(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Wi(e,ArrayBuffer)||e&&Wi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Wi(e,SharedArrayBuffer)||e&&Wi(e.buffer,SharedArrayBuffer)))return dP(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return ue.from(n,t,r);var i=function(o){if(ue.isBuffer(o)){var s=0|Iy(o.length),a=Bi(s);return a.length===0||o.copy(a,0,0,s),a}if(o.length!==void 0)return typeof o.length!="number"||Ay(o.length)?Bi(0):Ey(o);if(o.type==="Buffer"&&Array.isArray(o.data))return Ey(o.data)}(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ue.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function SP(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function _y(e){return SP(e),Bi(e<0?0:0|Iy(e))}function Ey(e){for(var t=e.length<0?0:0|Iy(e.length),r=Bi(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function dP(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=t===void 0&&r===void 0?new Uint8Array(e):r===void 0?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,ue.prototype),n}function Iy(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function EP(e,t){if(ue.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Wi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ty(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return TP(e).length;default:if(i)return n?-1:Ty(e).length;t=(""+t).toLowerCase(),i=!0;}}function IW(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return "";for(e||(e="utf8");;)switch(e){case"hex":return qW(this,t,r);case"utf8":case"utf-8":return CP(this,t,r);case"ascii":return NW(this,t,r);case"latin1":case"binary":return MW(this,t,r);case"base64":return kW(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return FW(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function ps(e,t,r){var n=e[t];e[t]=e[r],e[r]=n;}function hP(e,t,r,n,i){if(e.length===0)return -1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Ay(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1;}else if(r<0){if(!i)return -1;r=0;}if(typeof t=="string"&&(t=ue.from(t,n)),ue.isBuffer(t))return t.length===0?-1:pP(e,t,r,n,i);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):pP(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function pP(e,t,r,n,i){var o,s=1,a=e.length,c=t.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return -1;s=2,a/=2,c/=2,r/=2;}function l(y,_){return s===1?y[_]:y.readUInt16BE(_*s)}if(i){var u=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,u===-1?0:o-u)){if(u===-1&&(u=o),o-u+1===c)return u*s}else u!==-1&&(o-=o-u),u=-1;}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var g=!0,w=0;w<c;w++)if(l(e,o+w)!==l(t,w)){g=!1;break}if(g)return o}return -1}function AW(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(Ay(a))return s;e[r+s]=a;}return s}function PW(e,t,r,n){return kf(Ty(t,e.length-r),e,r,n)}function xP(e,t,r,n){return kf(function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o}(t),e,r,n)}function DW(e,t,r,n){return xP(e,t,r,n)}function LW(e,t,r,n){return kf(TP(t),e,r,n)}function OW(e,t,r,n){return kf(function(i,o){for(var s,a,c,l=[],u=0;u<i.length&&!((o-=2)<0);++u)s=i.charCodeAt(u),a=s>>8,c=s%256,l.push(c),l.push(a);return l}(t,e.length-r),e,r,n)}function kW(e,t,r){return t===0&&r===e.length?Cy.fromByteArray(e):Cy.fromByteArray(e.slice(t,r))}function CP(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,l=e[i],u=null,g=l>239?4:l>223?3:l>191?2:1;if(i+g<=r)switch(g){case 1:l<128&&(u=l);break;case 2:(192&(o=e[i+1]))==128&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],s=e[i+2],(192&o)==128&&(192&s)==128&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c);}u===null?(u=65533,g=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=g;}return function(w){var y=w.length;if(y<=4096)return String.fromCharCode.apply(String,w);for(var _="",x=0;x<y;)_+=String.fromCharCode.apply(String,w.slice(x,x+=4096));return _}(n)}function NW(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function MW(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function qW(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=jW[e[o]];return i}function FW(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function br(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Qr(e,t,r,n,i,o){if(!ue.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function gP(e,t,r,n,i){return t=+t,r>>>=0,i||_P(e,0,r,4),da.write(e,t,r,n,23,4),r+4}function mP(e,t,r,n,i){return t=+t,r>>>=0,i||_P(e,0,r,8),da.write(e,t,r,n,52,8),r+8}function Ty(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320);}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r);}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128);}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return o}function TP(e){return Cy.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace($W,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t}(e))}function kf(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Wi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Ay(e){return e!=e}function yP(e,t){for(var r in e)t[r]=e[r];}function gs(e,t,r){return di(e,t,r)}function tu(e){var t;switch(this.encoding=function(r){var n=function(i){if(!i)return "utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0;}}(r);if(typeof n!="string"&&(Ry.isEncoding===vP||!vP(r)))throw new Error("Unknown encoding: "+r);return n||r}(e),this.encoding){case"utf16le":this.text=WW,this.end=zW,t=4;break;case"utf8":this.fillLast=BW,t=4;break;case"base64":this.text=HW,this.end=VW,t=3;break;default:return this.write=GW,this.end=YW,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ry.allocUnsafe(t);}function xy(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function BW(e){var t=this.lastTotal-this.lastNeed,r=function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}}(this,e);return r!==void 0?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length,void 0)}function WW(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function zW(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function HW(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function VW(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function GW(e){return e.toString(this.encoding)}function YW(e){return e&&e.length?this.write(e):""}var bP,Hn,dn,cP,Df,hs,uP,RW,zi,Cy,da,fP,$W,jW,Lf,Of,di,UW,ms,Ry,vP,Py=jn(()=>{d();p();h();for(bP={byteLength:function(e){var t=lP(e),r=t[0],n=t[1];return 3*(r+n)/4-n},toByteArray:function(e){var t,r,n=lP(e),i=n[0],o=n[1],s=new cP(function(l,u,g){return 3*(u+g)/4-g}(0,i,o)),a=0,c=o>0?i-4:i;for(r=0;r<c;r+=4)t=dn[e.charCodeAt(r)]<<18|dn[e.charCodeAt(r+1)]<<12|dn[e.charCodeAt(r+2)]<<6|dn[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return o===2&&(t=dn[e.charCodeAt(r)]<<2|dn[e.charCodeAt(r+1)]>>4,s[a++]=255&t),o===1&&(t=dn[e.charCodeAt(r)]<<10|dn[e.charCodeAt(r+1)]<<4|dn[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(e){for(var t,r=e.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(TW(e,o,o+16383>s?s:o+16383));return n===1?(t=e[r-1],i.push(Hn[t>>2]+Hn[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(Hn[t>>10]+Hn[t>>4&63]+Hn[t<<2&63]+"=")),i.join("")}},Hn=[],dn=[],cP=typeof Uint8Array<"u"?Uint8Array:Array,Df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hs=0,uP=Df.length;hs<uP;++hs)Hn[hs]=Df[hs],dn[Df.charCodeAt(hs)]=hs;dn[45]=62,dn[95]=63;RW={read:function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,g=r?i-1:0,w=r?-1:1,y=e[t+g];for(g+=w,o=y&(1<<-u)-1,y>>=-u,u+=a;u>0;o=256*o+e[t+g],g+=w,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+g],g+=w,u-=8);if(o===0)o=1-l;else {if(o===c)return s?NaN:1/0*(y?-1:1);s+=Math.pow(2,n),o-=l;}return (y?-1:1)*s*Math.pow(2,o-n)},write:function(e,t,r,n,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,g=u>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,_=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+g>=1?w/c:w*Math.pow(2,1-g))*c>=2&&(s++,c/=2),s+g>=u?(a=0,s=u):s+g>=1?(a=(t*c-1)*Math.pow(2,i),s+=g):(a=t*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;e[r+y]=255&a,y+=_,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+y]=255&s,y+=_,s/=256,l-=8);e[r+y-_]|=128*x;}},zi={},Cy=bP,da=RW,fP=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zi.Buffer=ue,zi.SlowBuffer=function(e){return +e!=e&&(e=0),ue.alloc(+e)},zi.INSPECT_MAX_BYTES=50;zi.kMaxLength=2147483647,ue.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return !1}}(),ue.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ue.prototype,"parent",{enumerable:!0,get:function(){if(ue.isBuffer(this))return this.buffer}}),Object.defineProperty(ue.prototype,"offset",{enumerable:!0,get:function(){if(ue.isBuffer(this))return this.byteOffset}}),ue.poolSize=8192,ue.from=function(e,t,r){return wP(e,t,r)},Object.setPrototypeOf(ue.prototype,Uint8Array.prototype),Object.setPrototypeOf(ue,Uint8Array),ue.alloc=function(e,t,r){return function(n,i,o){return SP(n),n<=0?Bi(n):i!==void 0?typeof o=="string"?Bi(n).fill(i,o):Bi(n).fill(i):Bi(n)}(e,t,r)},ue.allocUnsafe=function(e){return _y(e)},ue.allocUnsafeSlow=function(e){return _y(e)},ue.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==ue.prototype},ue.compare=function(e,t){if(Wi(e,Uint8Array)&&(e=ue.from(e,e.offset,e.byteLength)),Wi(t,Uint8Array)&&(t=ue.from(t,t.offset,t.byteLength)),!ue.isBuffer(e)||!ue.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},ue.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},ue.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ue.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ue.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(Wi(o,Uint8Array)&&(o=ue.from(o)),!ue.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length;}return n},ue.byteLength=EP,ue.prototype._isBuffer=!0,ue.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ps(this,t,t+1);return this},ue.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ps(this,t,t+3),ps(this,t+1,t+2);return this},ue.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ps(this,t,t+7),ps(this,t+1,t+6),ps(this,t+2,t+5),ps(this,t+3,t+4);return this},ue.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?CP(this,0,e):IW.apply(this,arguments)},ue.prototype.toLocaleString=ue.prototype.toString,ue.prototype.equals=function(e){if(!ue.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||ue.compare(this,e)===0},ue.prototype.inspect=function(){var e="",t=zi.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},fP&&(ue.prototype[fP]=ue.prototype.inspect),ue.prototype.compare=function(e,t,r,n,i){if(Wi(e,Uint8Array)&&(e=ue.from(e,e.offset,e.byteLength)),!ue.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),u=0;u<a;++u)if(c[u]!==l[u]){o=c[u],s=l[u];break}return o<s?-1:s<o?1:0},ue.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},ue.prototype.indexOf=function(e,t,r){return hP(this,e,t,r,!0)},ue.prototype.lastIndexOf=function(e,t,r){return hP(this,e,t,r,!1)},ue.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else {if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,n===void 0&&(n="utf8")):(n=r,r=void 0);}var i=this.length-t;if((r===void 0||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return AW(this,e,t,r);case"utf8":case"utf-8":return PW(this,e,t,r);case"ascii":return xP(this,e,t,r);case"latin1":case"binary":return DW(this,e,t,r);case"base64":return LW(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return OW(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},ue.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};ue.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=t===void 0?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,ue.prototype),n},ue.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||br(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},ue.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||br(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},ue.prototype.readUInt8=function(e,t){return e>>>=0,t||br(e,1,this.length),this[e]},ue.prototype.readUInt16LE=function(e,t){return e>>>=0,t||br(e,2,this.length),this[e]|this[e+1]<<8},ue.prototype.readUInt16BE=function(e,t){return e>>>=0,t||br(e,2,this.length),this[e]<<8|this[e+1]},ue.prototype.readUInt32LE=function(e,t){return e>>>=0,t||br(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ue.prototype.readUInt32BE=function(e,t){return e>>>=0,t||br(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ue.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||br(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},ue.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||br(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},ue.prototype.readInt8=function(e,t){return e>>>=0,t||br(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ue.prototype.readInt16LE=function(e,t){e>>>=0,t||br(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ue.prototype.readInt16BE=function(e,t){e>>>=0,t||br(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ue.prototype.readInt32LE=function(e,t){return e>>>=0,t||br(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ue.prototype.readInt32BE=function(e,t){return e>>>=0,t||br(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ue.prototype.readFloatLE=function(e,t){return e>>>=0,t||br(e,4,this.length),da.read(this,e,!0,23,4)},ue.prototype.readFloatBE=function(e,t){return e>>>=0,t||br(e,4,this.length),da.read(this,e,!1,23,4)},ue.prototype.readDoubleLE=function(e,t){return e>>>=0,t||br(e,8,this.length),da.read(this,e,!0,52,8)},ue.prototype.readDoubleBE=function(e,t){return e>>>=0,t||br(e,8,this.length),da.read(this,e,!1,52,8)},ue.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||Qr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},ue.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||Qr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},ue.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,1,255,0),this[t]=255&e,t+1},ue.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},ue.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},ue.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},ue.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},ue.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);Qr(this,e,t,r,i-1,-i);}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},ue.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);Qr(this,e,t,r,i-1,-i);}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},ue.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},ue.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},ue.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},ue.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},ue.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Qr(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},ue.prototype.writeFloatLE=function(e,t,r){return gP(this,e,t,!0,r)},ue.prototype.writeFloatBE=function(e,t,r){return gP(this,e,t,!1,r)},ue.prototype.writeDoubleLE=function(e,t,r){return mP(this,e,t,!0,r)},ue.prototype.writeDoubleBE=function(e,t,r){return mP(this,e,t,!1,r)},ue.prototype.copy=function(e,t,r,n){if(!ue.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||n===0||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},ue.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ue.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){var i=e.charCodeAt(0);(n==="utf8"&&i<128||n==="latin1")&&(e=i);}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0),typeof e=="number")for(o=t;o<r;++o)this[o]=e;else {var s=ue.isBuffer(e)?e:ue.from(e,n),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a];}return this};$W=/[^+/0-9A-Za-z-_]/g;jW=function(){for(var e=new Array(256),t=0;t<16;++t)for(var r=16*t,n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}();Lf={},Of=zi,di=Of.Buffer;di.from&&di.alloc&&di.allocUnsafe&&di.allocUnsafeSlow?Lf=Of:(yP(Of,Lf),Lf.Buffer=gs),gs.prototype=Object.create(di.prototype),yP(di,gs),gs.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return di(e,t,r)},gs.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=di(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n},gs.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return di(e)},gs.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Of.SlowBuffer(e)};UW=Lf,ms={},Ry=UW.Buffer,vP=Ry.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}};ms.StringDecoder=tu,tu.prototype.write=function(e){if(e.length===0)return "";var t,r;if(this.lastNeed){if((t=this.fillLast(e))===void 0)return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},tu.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t},tu.prototype.text=function(e,t){var r=function(i,o,s){var a=o.length-1;if(a<s)return 0;var c=xy(o[a]);return c>=0?(c>0&&(i.lastNeed=c-1),c):--a<s||c===-2?0:(c=xy(o[a]))>=0?(c>0&&(i.lastNeed=c-2),c):--a<s||c===-2?0:(c=xy(o[a]))>=0?(c>0&&(c===2?c=0:i.lastNeed=c-3),c):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},tu.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length;};});var RP={};Ws(RP,{StringDecoder:()=>XW,default:()=>ms});var XW,IP=jn(()=>{d();p();h();Py();Py();XW=ms.StringDecoder;});var Dy=X((Wae,LP)=>{d();p();h();var AP=So(),{PromisePrototypeThen:JW,SymbolAsyncIterator:PP,SymbolIterator:DP}=Vt(),{Buffer:KW}=(Oi(),Ar(ho)),{ERR_INVALID_ARG_TYPE:ZW,ERR_STREAM_NULL_VALUES:QW}=Yr().codes;function e9(e,t,r){let n;if(typeof t=="string"||t instanceof KW)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null);}});let i;if(t&&t[PP])i=!0,n=t[PP]();else if(t&&t[DP])i=!1,n=t[DP]();else throw new ZW("iterable",["Iterable"],t);let o=new e({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,c());},o._destroy=function(l,u){JW(a(l),()=>AP.nextTick(u,l),g=>AP.nextTick(u,g||l));};async function a(l){let u=l!=null,g=typeof n.throw=="function";if(u&&g){let{value:w,done:y}=await n.throw(l);if(await w,y)return}if(typeof n.return=="function"){let{value:w}=await n.return();await w;}}async function c(){for(;;){try{let{value:l,done:u}=i?await n.next():n.next();if(u)o.push(null);else {let g=l&&typeof l.then=="function"?await l:l;if(g===null)throw s=!1,new QW;if(o.push(g))continue;s=!1;}}catch(l){o.destroy(l);}break}}return o}LP.exports=e9;});var nu=X((Gae,JP)=>{d();p();h();var Vn=So(),{ArrayPrototypeIndexOf:t9,NumberIsInteger:r9,NumberIsNaN:n9,NumberParseInt:i9,ObjectDefineProperties:$y,ObjectKeys:o9,ObjectSetPrototypeOf:NP,Promise:MP,SafeSet:s9,SymbolAsyncDispose:a9,SymbolAsyncIterator:c9,Symbol:u9}=Vt();JP.exports=Ze;Ze.ReadableState=Ff;var{EventEmitter:l9}=(ni(),Ar(Dc)),{Stream:xo,prependListener:f9}=If(),{Buffer:Ly}=(Oi(),Ar(ho)),{addAbortSignal:d9}=Qc(),qP=Ui(),it=kr().debuglog("stream",e=>{it=e;}),h9=nP(),ga=ds(),{getHighWaterMark:p9,getDefaultHighWaterMark:g9}=eu(),{aggregateTwoErrors:OP,codes:{ERR_INVALID_ARG_TYPE:m9,ERR_METHOD_NOT_IMPLEMENTED:y9,ERR_OUT_OF_RANGE:v9,ERR_STREAM_PUSH_AFTER_EOF:b9,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:w9},AbortError:S9}=Yr(),{validateObject:E9}=ua(),ys=u9("kPaused"),{StringDecoder:FP}=(IP(),Ar(RP)),x9=Dy();NP(Ze.prototype,xo.prototype);NP(Ze,xo);var Oy=()=>{},{errorOrDestroy:ha}=ga,pa=1,C9=2,$P=4,ru=8,jP=16,Nf=32,Mf=64,UP=128,_9=256,T9=512,R9=1024,qy=2048,Fy=4096,I9=8192,A9=16384,P9=32768,BP=65536,D9=1<<17,L9=1<<18;function fr(e){return {enumerable:!1,get(){return (this.state&e)!==0},set(t){t?this.state|=e:this.state&=~e;}}}$y(Ff.prototype,{objectMode:fr(pa),ended:fr(C9),endEmitted:fr($P),reading:fr(ru),constructed:fr(jP),sync:fr(Nf),needReadable:fr(Mf),emittedReadable:fr(UP),readableListening:fr(_9),resumeScheduled:fr(T9),errorEmitted:fr(R9),emitClose:fr(qy),autoDestroy:fr(Fy),destroyed:fr(I9),closed:fr(A9),closeEmitted:fr(P9),multiAwaitDrain:fr(BP),readingMore:fr(D9),dataEmitted:fr(L9)});function Ff(e,t,r){typeof r!="boolean"&&(r=t instanceof hi()),this.state=qy|Fy|jP|Nf,e&&e.objectMode&&(this.state|=pa),r&&e&&e.readableObjectMode&&(this.state|=pa),this.highWaterMark=e?p9(this,e,"readableHighWaterMark",r):g9(!1),this.buffer=new h9,this.length=0,this.pipes=[],this.flowing=null,this[ys]=null,e&&e.emitClose===!1&&(this.state&=~qy),e&&e.autoDestroy===!1&&(this.state&=~Fy),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new FP(e.encoding),this.encoding=e.encoding);}function Ze(e){if(!(this instanceof Ze))return new Ze(e);let t=this instanceof hi();this._readableState=new Ff(e,this,t),e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&!t&&d9(e.signal,this)),xo.call(this,e),ga.construct(this,()=>{this._readableState.needReadable&&qf(this,this._readableState);});}Ze.prototype.destroy=ga.destroy;Ze.prototype._undestroy=ga.undestroy;Ze.prototype._destroy=function(e,t){t(e);};Ze.prototype[l9.captureRejectionSymbol]=function(e){this.destroy(e);};Ze.prototype[a9]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new S9,this.destroy(e)),new MP((t,r)=>qP(this,n=>n&&n!==e?r(n):t(null)))};Ze.prototype.push=function(e,t){return WP(this,e,t,!1)};Ze.prototype.unshift=function(e,t){return WP(this,e,t,!0)};function WP(e,t,r,n){it("readableAddChunk",t);let i=e._readableState,o;if(i.state&pa||(typeof t=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=Ly.from(t,r).toString(i.encoding):(t=Ly.from(t,r),r=""))):t instanceof Ly?r="":xo._isUint8Array(t)?(t=xo._uint8ArrayToBuffer(t),r=""):t!=null&&(o=new m9("chunk",["string","Buffer","Uint8Array"],t))),o)ha(e,o);else if(t===null)i.state&=~ru,N9(e,i);else if(i.state&pa||t&&t.length>0)if(n)if(i.state&$P)ha(e,new w9);else {if(i.destroyed||i.errored)return !1;ky(e,i,t,!0);}else if(i.ended)ha(e,new b9);else {if(i.destroyed||i.errored)return !1;i.state&=~ru,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?ky(e,i,t,!1):qf(e,i)):ky(e,i,t,!1);}else n||(i.state&=~ru,qf(e,i));return !i.ended&&(i.length<i.highWaterMark||i.length===0)}function ky(e,t,r,n){t.flowing&&t.length===0&&!t.sync&&e.listenerCount("data")>0?(t.state&BP?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.state&Mf&&$f(e)),qf(e,t);}Ze.prototype.isPaused=function(){let e=this._readableState;return e[ys]===!0||e.flowing===!1};Ze.prototype.setEncoding=function(e){let t=new FP(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=t.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var O9=1073741824;function k9(e){if(e>O9)throw new v9("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function kP(e,t){return e<=0||t.length===0&&t.ended?0:t.state&pa?1:n9(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}Ze.prototype.read=function(e){it("read",e),e===void 0?e=NaN:r9(e)||(e=i9(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=k9(e)),e!==0&&(t.state&=~UP),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return it("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ny(this):$f(this),null;if(e=kP(e,t),e===0&&t.ended)return t.length===0&&Ny(this),null;let n=(t.state&Mf)!==0;if(it("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,it("length less than watermark",n)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)n=!1,it("reading, ended or constructing",n);else if(n){it("do read"),t.state|=ru|Nf,t.length===0&&(t.state|=Mf);try{this._read(t.highWaterMark);}catch(o){ha(this,o);}t.state&=~Nf,t.reading||(e=kP(r,t));}let i;return e>0?i=YP(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ny(this)),i!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",i)),i};function N9(e,t){if(it("onEofChunk"),!t.ended){if(t.decoder){let r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length);}t.ended=!0,t.sync?$f(e):(t.needReadable=!1,t.emittedReadable=!0,zP(e));}}function $f(e){let t=e._readableState;it("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(it("emitReadable",t.flowing),t.emittedReadable=!0,Vn.nextTick(zP,e));}function zP(e){let t=e._readableState;it("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,VP(e);}function qf(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,Vn.nextTick(M9,e,t));}function M9(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let r=t.length;if(it("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1;}Ze.prototype._read=function(e){throw new y9("_read()")};Ze.prototype.pipe=function(e,t){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new s9(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(e),it("pipe count=%d opts=%j",n.pipes.length,t);let o=(!t||t.end!==!1)&&e!==Vn.stdout&&e!==Vn.stderr?a:D;n.endEmitted?Vn.nextTick(o):r.once("end",o),e.on("unpipe",s);function s(A,C){it("onunpipe"),A===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,u());}function a(){it("onend"),e.end();}let c,l=!1;function u(){it("cleanup"),e.removeListener("close",_),e.removeListener("finish",x),c&&e.removeListener("drain",c),e.removeListener("error",y),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",D),r.removeListener("data",w),l=!0,c&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c();}function g(){l||(n.pipes.length===1&&n.pipes[0]===e?(it("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(it("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),r.pause()),c||(c=q9(r,e),e.on("drain",c));}r.on("data",w);function w(A){it("ondata");let C=e.write(A);it("dest.write",C),C===!1&&g();}function y(A){if(it("onerror",A),D(),e.removeListener("error",y),e.listenerCount("error")===0){let C=e._writableState||e._readableState;C&&!C.errorEmitted?ha(e,A):e.emit("error",A);}}f9(e,"error",y);function _(){e.removeListener("finish",x),D();}e.once("close",_);function x(){it("onfinish"),e.removeListener("close",_),D();}e.once("finish",x);function D(){it("unpipe"),r.unpipe(e);}return e.emit("pipe",r),e.writableNeedDrain===!0?g():n.flowing||(it("pipe resume"),r.resume()),e};function q9(e,t){return function(){let n=e._readableState;n.awaitDrainWriters===t?(it("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(it("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&e.listenerCount("data")&&e.resume();}}Ze.prototype.unpipe=function(e){let t=this._readableState,r={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!e){let i=t.pipes;t.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=t9(t.pipes,e);return n===-1?this:(t.pipes.splice(n,1),t.pipes.length===0&&this.pause(),e.emit("unpipe",this,r),this)};Ze.prototype.on=function(e,t){let r=xo.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,it("on readable",n.length,n.reading),n.length?$f(this):n.reading||Vn.nextTick(F9,this)),r};Ze.prototype.addListener=Ze.prototype.on;Ze.prototype.removeListener=function(e,t){let r=xo.prototype.removeListener.call(this,e,t);return e==="readable"&&Vn.nextTick(HP,this),r};Ze.prototype.off=Ze.prototype.removeListener;Ze.prototype.removeAllListeners=function(e){let t=xo.prototype.removeAllListeners.apply(this,arguments);return (e==="readable"||e===void 0)&&Vn.nextTick(HP,this),t};function HP(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&t[ys]===!1?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null);}function F9(e){it("readable nexttick read 0"),e.read(0);}Ze.prototype.resume=function(){let e=this._readableState;return e.flowing||(it("resume"),e.flowing=!e.readableListening,$9(this,e)),e[ys]=!1,this};function $9(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Vn.nextTick(j9,e,t));}function j9(e,t){it("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),VP(e),t.flowing&&!t.reading&&e.read(0);}Ze.prototype.pause=function(){return it("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(it("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ys]=!0,this};function VP(e){let t=e._readableState;for(it("flow",t.flowing);t.flowing&&e.read()!==null;);}Ze.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause());}),e.on("end",()=>{this.push(null);}),e.on("error",n=>{ha(this,n);}),e.on("close",()=>{this.destroy();}),e.on("destroy",()=>{this.destroy();}),this._read=()=>{t&&e.resume&&(t=!1,e.resume());};let r=o9(e);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof e[i]=="function"&&(this[i]=e[i].bind(e));}return this};Ze.prototype[c9]=function(){return GP(this)};Ze.prototype.iterator=function(e){return e!==void 0&&E9(e,"options"),GP(this,e)};function GP(e,t){typeof e.read!="function"&&(e=Ze.wrap(e,{objectMode:!0}));let r=U9(e,t);return r.stream=e,r}async function*U9(e,t){let r=Oy;function n(s){this===e?(r(),r=Oy):r=s;}e.on("readable",n);let i,o=qP(e,{writable:!1},s=>{i=s?OP(i,s):null,r(),r=Oy;});try{for(;;){let s=e.destroyed?null:e.read();if(s!==null)yield s;else {if(i)throw i;if(i===null)return;await new MP(n);}}}catch(s){throw i=OP(i,s),i}finally{(i||t?.destroyOnReturn!==!1)&&(i===void 0||e._readableState.autoDestroy)?ga.destroyer(e,null):(e.off("readable",n),o());}}$y(Ze.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return !!e&&e.readable!==!1&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e);}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return !!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e);}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(e){this._readableState&&(this._readableState.destroyed=e);}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});$y(Ff.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ys]!==!1},set(e){this[ys]=!!e;}}});Ze._fromList=YP;function YP(e,t){if(t.length===0)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Ny(e){let t=e._readableState;it("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,Vn.nextTick(B9,t,e));}function B9(e,t){if(it("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){if(e.endEmitted=!0,t.emit("end"),t.writable&&t.allowHalfOpen===!1)Vn.nextTick(W9,t);else if(e.autoDestroy){let r=t._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&t.destroy();}}}function W9(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end();}Ze.from=function(e,t){return x9(Ze,e,t)};var My;function XP(){return My===void 0&&(My={}),My}Ze.fromWeb=function(e,t){return XP().newStreamReadableFromReadableStream(e,t)};Ze.toWeb=function(e,t){return XP().newReadableStreamFromStreamReadable(e,t)};Ze.wrap=function(e,t){var r,n;return new Ze({objectMode:(r=(n=e.readableObjectMode)!==null&&n!==void 0?n:e.objectMode)!==null&&r!==void 0?r:!0,...t,destroy(i,o){ga.destroyer(e,i),o(i);}}).wrap(e)};});var zf=X((Kae,cD)=>{d();p();h();var vs=So(),{ArrayPrototypeSlice:QP,Error:z9,FunctionPrototypeSymbolHasInstance:eD,ObjectDefineProperty:tD,ObjectDefineProperties:H9,ObjectSetPrototypeOf:rD,StringPrototypeToLowerCase:V9,Symbol:G9,SymbolHasInstance:Y9}=Vt();cD.exports=Gt;Gt.WritableState=su;var{EventEmitter:X9}=(ni(),Ar(Dc)),iu=If().Stream,{Buffer:jf}=(Oi(),Ar(ho)),Wf=ds(),{addAbortSignal:J9}=Qc(),{getHighWaterMark:K9,getDefaultHighWaterMark:Z9}=eu(),{ERR_INVALID_ARG_TYPE:Q9,ERR_METHOD_NOT_IMPLEMENTED:ez,ERR_MULTIPLE_CALLBACK:nD,ERR_STREAM_CANNOT_PIPE:tz,ERR_STREAM_DESTROYED:ou,ERR_STREAM_ALREADY_FINISHED:rz,ERR_STREAM_NULL_VALUES:nz,ERR_STREAM_WRITE_AFTER_END:iz,ERR_UNKNOWN_ENCODING:iD}=Yr().codes,{errorOrDestroy:ma}=Wf;rD(Gt.prototype,iu.prototype);rD(Gt,iu);function By(){}var ya=G9("kOnFinished");function su(e,t,r){typeof r!="boolean"&&(r=t instanceof hi()),this.objectMode=!!(e&&e.objectMode),r&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?K9(this,e,"writableHighWaterMark",r):Z9(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(e&&e.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=sz.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Bf(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||e.emitClose!==!1,this.autoDestroy=!e||e.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ya]=[];}function Bf(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0;}su.prototype.getBuffer=function(){return QP(this.buffered,this.bufferedIndex)};tD(su.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Gt(e){let t=this instanceof hi();if(!t&&!eD(Gt,this))return new Gt(e);this._writableState=new su(e,this,t),e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&J9(e.signal,this)),iu.call(this,e),Wf.construct(this,()=>{let r=this._writableState;r.writing||zy(this,r),Hy(this,r);});}tD(Gt,Y9,{__proto__:null,value:function(e){return eD(this,e)?!0:this!==Gt?!1:e&&e._writableState instanceof su}});Gt.prototype.pipe=function(){ma(this,new tz);};function oD(e,t,r,n){let i=e._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else {if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!jf.isEncoding(r))throw new iD(r);typeof n!="function"&&(n=By);}if(t===null)throw new nz;if(!i.objectMode)if(typeof t=="string")i.decodeStrings!==!1&&(t=jf.from(t,r),r="buffer");else if(t instanceof jf)r="buffer";else if(iu._isUint8Array(t))t=iu._uint8ArrayToBuffer(t),r="buffer";else throw new Q9("chunk",["string","Buffer","Uint8Array"],t);let o;return i.ending?o=new iz:i.destroyed&&(o=new ou("write")),o?(vs.nextTick(n,o),ma(e,o,!0),o):(i.pendingcb++,oz(e,i,t,r,n))}Gt.prototype.write=function(e,t,r){return oD(this,e,t,r)===!0};Gt.prototype.cork=function(){this._writableState.corked++;};Gt.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||zy(this,e));};Gt.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=V9(t)),!jf.isEncoding(t))throw new iD(t);return this._writableState.defaultEncoding=t,this};function oz(e,t,r,n,i){let o=t.objectMode?1:r.length;t.length+=o;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&n!=="buffer"&&(t.allBuffers=!1),t.allNoop&&i!==By&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}function KP(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ou("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1;}function ZP(e,t,r,n){--t.pendingcb,n(r),Wy(t),ma(e,r);}function sz(e,t){let r=e._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){ma(e,new nD);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?vs.nextTick(ZP,e,r,t,i):ZP(e,r,t,i)):(r.buffered.length>r.bufferedIndex&&zy(e,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:e,state:r},vs.nextTick(az,r.afterWriteTickInfo)):sD(e,r,1,i));}function az({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,sD(e,t,r,n)}function sD(e,t,r,n){for(!t.ending&&!e.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&Wy(t),Hy(e,t);}function Wy(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;let{chunk:o,callback:s}=e.buffered[i],a=e.objectMode?1:o.length;e.length-=a,s((t=e.errored)!==null&&t!==void 0?t:new ou("write"));}let r=e[ya].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=e.errored)!==null&&n!==void 0?n:new ou("end"));}Bf(e);}function zy(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=t,o=r.length-n;if(!o)return;let s=n;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let a=t.allNoop?By:l=>{for(let u=s;u<r.length;++u)r[u].callback(l);},c=t.allNoop&&s===0?r:QP(r,s);c.allBuffers=t.allBuffers,KP(e,t,!0,t.length,c,"",a),Bf(t);}else {do{let{chunk:a,encoding:c,callback:l}=r[s];r[s++]=null;let u=i?1:a.length;KP(e,t,!1,u,a,c,l);}while(s<r.length&&!t.writing);s===r.length?Bf(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s;}t.bufferProcessing=!1;}Gt.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new ez("_write()")};Gt.prototype._writev=null;Gt.prototype.end=function(e,t,r){let n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null);let i;if(e!=null){let o=oD(this,e,t);o instanceof z9&&(i=o);}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Hy(this,n,!0),n.ended=!0):n.finished?i=new rz("end"):n.destroyed&&(i=new ou("end"))),typeof r=="function"&&(i||n.finished?vs.nextTick(r,i):n[ya].push(r)),this};function Uf(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function cz(e,t){let r=!1;function n(i){if(r){ma(e,i??nD());return}if(r=!0,t.pendingcb--,i){let o=t[ya].splice(0);for(let s=0;s<o.length;s++)o[s](i);ma(e,i,t.sync);}else Uf(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,vs.nextTick(Uy,e,t));}t.sync=!0,t.pendingcb++;try{e._final(n);}catch(i){n(i);}t.sync=!1;}function uz(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.finalCalled=!0,cz(e,t)):(t.prefinished=!0,e.emit("prefinish")));}function Hy(e,t,r){Uf(t)&&(uz(e,t),t.pendingcb===0&&(r?(t.pendingcb++,vs.nextTick((n,i)=>{Uf(i)?Uy(n,i):i.pendingcb--;},e,t)):Uf(t)&&(t.pendingcb++,Uy(e,t))));}function Uy(e,t){t.pendingcb--,t.finished=!0;let r=t[ya].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){let n=e._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&e.destroy();}}H9(Gt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(e){this._writableState&&(this._writableState.destroyed=e);}},writable:{__proto__:null,get(){let e=this._writableState;return !!e&&e.writable!==!1&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e);}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return e?!e.destroyed&&!e.ending&&e.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return !!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var lz=Wf.destroy;Gt.prototype.destroy=function(e,t){let r=this._writableState;return !r.destroyed&&(r.bufferedIndex<r.buffered.length||r[ya].length)&&vs.nextTick(Wy,r),lz.call(this,e,t),this};Gt.prototype._undestroy=Wf.undestroy;Gt.prototype._destroy=function(e,t){t(e);};Gt.prototype[X9.captureRejectionSymbol]=function(e){this.destroy(e);};var jy;function aD(){return jy===void 0&&(jy={}),jy}Gt.fromWeb=function(e,t){return aD().newStreamWritableFromWritableStream(e,t)};Gt.toWeb=function(e){return aD().newWritableStreamFromStreamWritable(e)};});var xD=X((tce,ED)=>{d();p();h();var Vy=So(),fz=(Oi(),Ar(ho)),{isReadable:dz,isWritable:hz,isIterable:uD,isNodeStream:pz,isReadableNodeStream:lD,isWritableNodeStream:fD,isDuplexNodeStream:gz,isReadableStream:dD,isWritableStream:hD}=li(),pD=Ui(),{AbortError:wD,codes:{ERR_INVALID_ARG_TYPE:mz,ERR_INVALID_RETURN_VALUE:gD}}=Yr(),{destroyer:ba}=ds(),yz=hi(),SD=nu(),vz=zf(),{createDeferredPromise:mD}=kr(),yD=Dy(),vD=globalThis.Blob||fz.Blob,bz=typeof vD<"u"?function(t){return t instanceof vD}:function(t){return !1},wz=globalThis.AbortController||aa().AbortController,{FunctionPrototypeCall:bD}=Vt(),Co=class extends yz{constructor(t){super(t),t?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0);}};ED.exports=function e(t,r){if(gz(t))return t;if(lD(t))return va({readable:t});if(fD(t))return va({writable:t});if(pz(t))return va({writable:!1,readable:!1});if(dD(t))return va({readable:SD.fromWeb(t)});if(hD(t))return va({writable:vz.fromWeb(t)});if(typeof t=="function"){let{value:i,write:o,final:s,destroy:a}=Sz(t);if(uD(i))return yD(Co,i,{objectMode:!0,write:o,final:s,destroy:a});let c=i?.then;if(typeof c=="function"){let l,u=bD(c,i,g=>{if(g!=null)throw new gD("nully","body",g)},g=>{ba(l,g);});return l=new Co({objectMode:!0,readable:!1,write:o,final(g){s(async()=>{try{await u,Vy.nextTick(g,null);}catch(w){Vy.nextTick(g,w);}});},destroy:a})}throw new gD("Iterable, AsyncIterable or AsyncFunction",r,i)}if(bz(t))return e(t.arrayBuffer());if(uD(t))return yD(Co,t,{objectMode:!0,writable:!1});if(dD(t?.readable)&&hD(t?.writable))return Co.fromWeb(t);if(typeof t?.writable=="object"||typeof t?.readable=="object"){let i=t!=null&&t.readable?lD(t?.readable)?t?.readable:e(t.readable):void 0,o=t!=null&&t.writable?fD(t?.writable)?t?.writable:e(t.writable):void 0;return va({readable:i,writable:o})}let n=t?.then;if(typeof n=="function"){let i;return bD(n,t,o=>{o!=null&&i.push(o),i.push(null);},o=>{ba(i,o);}),i=new Co({objectMode:!0,writable:!1,read(){}})}throw new mz(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)};function Sz(e){let{promise:t,resolve:r}=mD(),n=new wz,i=n.signal;return {value:e(async function*(){for(;;){let s=t;t=null;let{chunk:a,done:c,cb:l}=await s;if(Vy.nextTick(l),c)return;if(i.aborted)throw new wD(void 0,{cause:i.reason});(({promise:t,resolve:r}=mD())),yield a;}}(),{signal:i}),write(s,a,c){let l=r;r=null,l({chunk:s,done:!1,cb:c});},final(s){let a=r;r=null,a({done:!0,cb:s});},destroy(s,a){n.abort(),a(s);}}}function va(e){let t=e.readable&&typeof e.readable.read!="function"?SD.wrap(e.readable):e.readable,r=e.writable,n=!!dz(t),i=!!hz(r),o,s,a,c,l;function u(g){let w=c;c=null,w?w(g):g&&l.destroy(g);}return l=new Co({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(pD(r,g=>{i=!1,g&&ba(t,g),u(g);}),l._write=function(g,w,y){r.write(g,w)?y():o=y;},l._final=function(g){r.end(),s=g;},r.on("drain",function(){if(o){let g=o;o=null,g();}}),r.on("finish",function(){if(s){let g=s;s=null,g();}})),n&&(pD(t,g=>{n=!1,g&&ba(t,g),u(g);}),t.on("readable",function(){if(a){let g=a;a=null,g();}}),t.on("end",function(){l.push(null);}),l._read=function(){for(;;){let g=t.read();if(g===null){a=l._read;return}if(!l.push(g))return}}),l._destroy=function(g,w){!g&&c!==null&&(g=new wD),a=null,o=null,s=null,c===null?w(g):(c=w,ba(r,g),ba(t,g));},l}});var hi=X((oce,TD)=>{d();p();h();var{ObjectDefineProperties:Ez,ObjectGetOwnPropertyDescriptor:Hi,ObjectKeys:xz,ObjectSetPrototypeOf:CD}=Vt();TD.exports=Gn;var Xy=nu(),Pn=zf();CD(Gn.prototype,Xy.prototype);CD(Gn,Xy);{let e=xz(Pn.prototype);for(let t=0;t<e.length;t++){let r=e[t];Gn.prototype[r]||(Gn.prototype[r]=Pn.prototype[r]);}}function Gn(e){if(!(this instanceof Gn))return new Gn(e);Xy.call(this,e),Pn.call(this,e),e?(this.allowHalfOpen=e.allowHalfOpen!==!1,e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0;}Ez(Gn.prototype,{writable:{__proto__:null,...Hi(Pn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Hi(Pn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Hi(Pn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Hi(Pn.prototype,"writableBuffer")},writableLength:{__proto__:null,...Hi(Pn.prototype,"writableLength")},writableFinished:{__proto__:null,...Hi(Pn.prototype,"writableFinished")},writableCorked:{__proto__:null,...Hi(Pn.prototype,"writableCorked")},writableEnded:{__proto__:null,...Hi(Pn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Hi(Pn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e);}}});var Gy;function _D(){return Gy===void 0&&(Gy={}),Gy}Gn.fromWeb=function(e,t){return _D().newStreamDuplexFromReadableWritablePair(e,t)};Gn.toWeb=function(e){return _D().newReadableWritablePairFromDuplex(e)};var Yy;Gn.from=function(e){return Yy||(Yy=xD()),Yy(e,"body")};});var Zy=X((uce,ID)=>{d();p();h();var{ObjectSetPrototypeOf:RD,Symbol:Cz}=Vt();ID.exports=Vi;var{ERR_METHOD_NOT_IMPLEMENTED:_z}=Yr().codes,Ky=hi(),{getHighWaterMark:Tz}=eu();RD(Vi.prototype,Ky.prototype);RD(Vi,Ky);var au=Cz("kCallback");function Vi(e){if(!(this instanceof Vi))return new Vi(e);let t=e?Tz(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),Ky.call(this,e),this._readableState.sync=!1,this[au]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Rz);}function Jy(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e();}):(this.push(null),e&&e());}function Rz(){this._final!==Jy&&Jy.call(this);}Vi.prototype._final=Jy;Vi.prototype._transform=function(e,t,r){throw new _z("_transform()")};Vi.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,a)=>{if(s){r(s);return}a!=null&&this.push(a),i.ended||o===n.length||n.length<n.highWaterMark?r():this[au]=r;});};Vi.prototype._read=function(){if(this[au]){let e=this[au];this[au]=null,e();}};});var ev=X((hce,PD)=>{d();p();h();var{ObjectSetPrototypeOf:AD}=Vt();PD.exports=wa;var Qy=Zy();AD(wa.prototype,Qy.prototype);AD(wa,Qy);function wa(e){if(!(this instanceof wa))return new wa(e);Qy.call(this,e);}wa.prototype._transform=function(e,t,r){r(null,e);};});var Yf=X((yce,ND)=>{d();p();h();var cu=So(),{ArrayIsArray:Iz,Promise:Az,SymbolAsyncIterator:Pz,SymbolDispose:Dz}=Vt(),Gf=Ui(),{once:Lz}=kr(),Oz=ds(),DD=hi(),{aggregateTwoErrors:kz,codes:{ERR_INVALID_ARG_TYPE:uv,ERR_INVALID_RETURN_VALUE:tv,ERR_MISSING_ARGS:Nz,ERR_STREAM_DESTROYED:Mz,ERR_STREAM_PREMATURE_CLOSE:qz},AbortError:Fz}=Yr(),{validateFunction:$z,validateAbortSignal:jz}=ua(),{isIterable:bs,isReadable:rv,isReadableNodeStream:Vf,isNodeStream:LD,isTransformStream:Sa,isWebStream:Uz,isReadableStream:nv,isReadableFinished:Bz}=li(),Wz=globalThis.AbortController||aa().AbortController,iv,ov,sv;function OD(e,t,r){let n=!1;e.on("close",()=>{n=!0;});let i=Gf(e,{readable:t,writable:r},o=>{n=!o;});return {destroy:o=>{n||(n=!0,Oz.destroyer(e,o||new Mz("pipe")));},cleanup:i}}function zz(e){return $z(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function av(e){if(bs(e))return e;if(Vf(e))return Hz(e);throw new uv("val",["Readable","Iterable","AsyncIterable"],e)}async function*Hz(e){ov||(ov=nu()),yield*ov.prototype[Pz].call(e);}async function Hf(e,t,r,{end:n}){let i,o=null,s=l=>{if(l&&(i=l),o){let u=o;o=null,u();}},a=()=>new Az((l,u)=>{i?u(i):o=()=>{i?u(i):l();};});t.on("drain",s);let c=Gf(t,{readable:!1},s);try{t.writableNeedDrain&&await a();for await(let l of e)t.write(l)||await a();n&&(t.end(),await a()),r();}catch(l){r(i!==l?kz(i,l):l);}finally{c(),t.off("drain",s);}}async function cv(e,t,r,{end:n}){Sa(t)&&(t=t.writable);let i=t.getWriter();try{for await(let o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r();}catch(o){try{await i.abort(o),r(o);}catch(s){r(s);}}}function Vz(...e){return kD(e,Lz(zz(e)))}function kD(e,t,r){if(e.length===1&&Iz(e[0])&&(e=e[0]),e.length<2)throw new Nz("streams");let n=new Wz,i=n.signal,o=r?.signal,s=[];jz(o,"options.signal");function a(){_(new Fz);}sv=sv||kr().addAbortListener;let c;o&&(c=sv(o,a));let l,u,g=[],w=0;function y(R){_(R,--w===0);}function _(R,T){var $;if(R&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=R),!(!l&&!T)){for(;g.length;)g.shift()(l);($=c)===null||$===void 0||$[Dz](),n.abort(),T&&(l||s.forEach(P=>P()),cu.nextTick(t,l,u));}}let x;for(let R=0;R<e.length;R++){let T=e[R],$=R<e.length-1,P=R>0,q=$||r?.end!==!1,k=R===e.length-1;if(LD(T)){let V=function(K){K&&K.name!=="AbortError"&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"&&y(K);};if(q){let{destroy:K,cleanup:ve}=OD(T,$,P);g.push(K),rv(T)&&k&&s.push(ve);}T.on("error",V),rv(T)&&k&&s.push(()=>{T.removeListener("error",V);});}if(R===0)if(typeof T=="function"){if(x=T({signal:i}),!bs(x))throw new tv("Iterable, AsyncIterable or Stream","source",x)}else bs(T)||Vf(T)||Sa(T)?x=T:x=DD.from(T);else if(typeof T=="function"){if(Sa(x)){var D;x=av((D=x)===null||D===void 0?void 0:D.readable);}else x=av(x);if(x=T(x,{signal:i}),$){if(!bs(x,!0))throw new tv("AsyncIterable",`transform[${R-1}]`,x)}else {var A;iv||(iv=ev());let V=new iv({objectMode:!0}),K=(A=x)===null||A===void 0?void 0:A.then;if(typeof K=="function")w++,K.call(x,be=>{u=be,be!=null&&V.write(be),q&&V.end(),cu.nextTick(y);},be=>{V.destroy(be),cu.nextTick(y,be);});else if(bs(x,!0))w++,Hf(x,V,y,{end:q});else if(nv(x)||Sa(x)){let be=x.readable||x;w++,Hf(be,V,y,{end:q});}else throw new tv("AsyncIterable or Promise","destination",x);x=V;let{destroy:ve,cleanup:fe}=OD(x,!1,!0);g.push(ve),k&&s.push(fe);}}else if(LD(T)){if(Vf(x)){w+=2;let V=Gz(x,T,y,{end:q});rv(T)&&k&&s.push(V);}else if(Sa(x)||nv(x)){let V=x.readable||x;w++,Hf(V,T,y,{end:q});}else if(bs(x))w++,Hf(x,T,y,{end:q});else throw new uv("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],x);x=T;}else if(Uz(T)){if(Vf(x))w++,cv(av(x),T,y,{end:q});else if(nv(x)||bs(x))w++,cv(x,T,y,{end:q});else if(Sa(x))w++,cv(x.readable,T,y,{end:q});else throw new uv("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],x);x=T;}else x=DD.from(T);}return (i!=null&&i.aborted||o!=null&&o.aborted)&&cu.nextTick(a),x}function Gz(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new qz);}),e.pipe(t,{end:!1}),n){let s=function(){i=!0,t.end();};Bz(e)?cu.nextTick(s):e.once("end",s);}else r();return Gf(e,{readable:!0,writable:!1},s=>{let a=e._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?e.once("end",r).once("error",r):r(s);}),Gf(t,{readable:!1,writable:!0},r)}ND.exports={pipelineImpl:kD,pipeline:Vz};});var fv=X((Sce,UD)=>{d();p();h();var{pipeline:Yz}=Yf(),Xf=hi(),{destroyer:Xz}=ds(),{isNodeStream:Jf,isReadable:MD,isWritable:qD,isWebStream:lv,isTransformStream:ws,isWritableStream:FD,isReadableStream:$D}=li(),{AbortError:Jz,codes:{ERR_INVALID_ARG_VALUE:jD,ERR_MISSING_ARGS:Kz}}=Yr(),Zz=Ui();UD.exports=function(...t){if(t.length===0)throw new Kz("streams");if(t.length===1)return Xf.from(t[0]);let r=[...t];if(typeof t[0]=="function"&&(t[0]=Xf.from(t[0])),typeof t[t.length-1]=="function"){let y=t.length-1;t[y]=Xf.from(t[y]);}for(let y=0;y<t.length;++y)if(!(!Jf(t[y])&&!lv(t[y]))){if(y<t.length-1&&!(MD(t[y])||$D(t[y])||ws(t[y])))throw new jD(`streams[${y}]`,r[y],"must be readable");if(y>0&&!(qD(t[y])||FD(t[y])||ws(t[y])))throw new jD(`streams[${y}]`,r[y],"must be writable")}let n,i,o,s,a;function c(y){let _=s;s=null,_?_(y):y?a.destroy(y):!w&&!g&&a.destroy();}let l=t[0],u=Yz(t,c),g=!!(qD(l)||FD(l)||ws(l)),w=!!(MD(u)||$D(u)||ws(u));if(a=new Xf({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:g,readable:w}),g){if(Jf(l))a._write=function(_,x,D){l.write(_,x)?D():n=D;},a._final=function(_){l.end(),i=_;},l.on("drain",function(){if(n){let _=n;n=null,_();}});else if(lv(l)){let x=(ws(l)?l.writable:l).getWriter();a._write=async function(D,A,C){try{await x.ready,x.write(D).catch(()=>{}),C();}catch(R){C(R);}},a._final=async function(D){try{await x.ready,x.close().catch(()=>{}),i=D;}catch(A){D(A);}};}let y=ws(u)?u.readable:u;Zz(y,()=>{if(i){let _=i;i=null,_();}});}if(w){if(Jf(u))u.on("readable",function(){if(o){let y=o;o=null,y();}}),u.on("end",function(){a.push(null);}),a._read=function(){for(;;){let y=u.read();if(y===null){o=a._read;return}if(!a.push(y))return}};else if(lv(u)){let _=(ws(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:x,done:D}=await _.read();if(!a.push(x))return;if(D){a.push(null);return}}catch{return}};}}return a._destroy=function(y,_){!y&&s!==null&&(y=new Jz),o=null,n=null,i=null,s===null?_(y):(s=_,Jf(u)&&Xz(u,y));},a};});var KD=X((_ce,pv)=>{d();p();h();var Qz=globalThis.AbortController||aa().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e7,ERR_INVALID_ARG_TYPE:uu,ERR_MISSING_ARGS:t7,ERR_OUT_OF_RANGE:r7},AbortError:pi}=Yr(),{validateAbortSignal:Ss,validateInteger:BD,validateObject:Es}=ua(),n7=Vt().Symbol("kWeak"),i7=Vt().Symbol("kResistStopPropagation"),{finished:o7}=Ui(),s7=fv(),{addAbortSignalNoValidate:a7}=Qc(),{isWritable:c7,isNodeStream:u7}=li(),{deprecate:l7}=kr(),{ArrayPrototypePush:f7,Boolean:d7,MathFloor:WD,Number:h7,NumberIsNaN:p7,Promise:zD,PromiseReject:HD,PromiseResolve:g7,PromisePrototypeThen:VD,Symbol:YD}=Vt(),Kf=YD("kEmpty"),GD=YD("kEof");function m7(e,t){if(t!=null&&Es(t,"options"),t?.signal!=null&&Ss(t.signal,"options.signal"),u7(e)&&!c7(e))throw new e7("stream",e,"must be writable");let r=s7(this,e);return t!=null&&t.signal&&a7(t.signal,r),r}function Zf(e,t){if(typeof e!="function")throw new uu("fn",["Function","AsyncFunction"],e);t!=null&&Es(t,"options"),t?.signal!=null&&Ss(t.signal,"options.signal");let r=1;t?.concurrency!=null&&(r=WD(t.concurrency));let n=r-1;return t?.highWaterMark!=null&&(n=WD(t.highWaterMark)),BD(r,"options.concurrency",1),BD(n,"options.highWaterMark",0),n+=r,async function*(){let o=kr().AbortSignalAny([t?.signal].filter(d7)),s=this,a=[],c={signal:o},l,u,g=!1,w=0;function y(){g=!0,_();}function _(){w-=1,x();}function x(){u&&!g&&w<r&&a.length<n&&(u(),u=null);}async function D(){try{for await(let A of s){if(g)return;if(o.aborted)throw new pi;try{if(A=e(A,c),A===Kf)continue;A=g7(A);}catch(C){A=HD(C);}w+=1,VD(A,_,y),a.push(A),l&&(l(),l=null),!g&&(a.length>=n||w>=r)&&await new zD(C=>{u=C;});}a.push(GD);}catch(A){let C=HD(A);VD(C,_,y),a.push(C);}finally{g=!0,l&&(l(),l=null);}}D();try{for(;;){for(;a.length>0;){let A=await a[0];if(A===GD)return;if(o.aborted)throw new pi;A!==Kf&&(yield A),a.shift(),x();}await new zD(A=>{l=A;});}}finally{g=!0,u&&(u(),u=null);}}.call(this)}function y7(e=void 0){return e!=null&&Es(e,"options"),e?.signal!=null&&Ss(e.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new pi({cause:e.signal.reason});yield [r++,i];}}.call(this)}async function XD(e,t=void 0){for await(let r of hv.call(this,e,t))return !0;return !1}async function v7(e,t=void 0){if(typeof e!="function")throw new uu("fn",["Function","AsyncFunction"],e);return !await XD.call(this,async(...r)=>!await e(...r),t)}async function b7(e,t){for await(let r of hv.call(this,e,t))return r}async function w7(e,t){if(typeof e!="function")throw new uu("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),Kf}for await(let n of Zf.call(this,r,t));}function hv(e,t){if(typeof e!="function")throw new uu("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:Kf}return Zf.call(this,r,t)}var dv=class extends t7{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value";}};async function S7(e,t,r){var n;if(typeof e!="function")throw new uu("reducer",["Function","AsyncFunction"],e);r!=null&&Es(r,"options"),r?.signal!=null&&Ss(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let l=new pi(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await o7(this.destroy(l)),l}let o=new Qz,s=o.signal;if(r!=null&&r.signal){let l={once:!0,[n7]:this,[i7]:!0};r.signal.addEventListener("abort",()=>o.abort(),l);}let a=!1;try{for await(let l of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new pi;i?t=await e(t,l,{signal:s}):(t=l,i=!0);}if(!a&&!i)throw new dv}finally{o.abort();}return t}async function E7(e){e!=null&&Es(e,"options"),e?.signal!=null&&Ss(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new pi(void 0,{cause:e.signal.reason});f7(t,n);}return t}function x7(e,t){let r=Zf.call(this,e,t);return async function*(){for await(let i of r)yield*i;}.call(this)}function JD(e){if(e=h7(e),p7(e))return 0;if(e<0)throw new r7("number",">= 0",e);return e}function C7(e,t=void 0){return t!=null&&Es(t,"options"),t?.signal!=null&&Ss(t.signal,"options.signal"),e=JD(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new pi;for await(let o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new pi;e--<=0&&(yield o);}}.call(this)}function _7(e,t=void 0){return t!=null&&Es(t,"options"),t?.signal!=null&&Ss(t.signal,"options.signal"),e=JD(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new pi;for await(let o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new pi;if(e-- >0&&(yield o),e<=0)return}}.call(this)}pv.exports.streamReturningOperators={asIndexedPairs:l7(y7,"readable.asIndexedPairs will be removed in a future version."),drop:C7,filter:hv,flatMap:x7,map:Zf,take:_7,compose:m7};pv.exports.promiseReturningOperators={every:v7,forEach:w7,reduce:S7,toArray:E7,some:XD,find:b7};});var gv=X((Ace,ZD)=>{d();p();h();var{ArrayPrototypePop:T7,Promise:R7}=Vt(),{isIterable:I7,isNodeStream:A7,isWebStream:P7}=li(),{pipelineImpl:D7}=Yf(),{finished:L7}=Ui();mv();function O7(...e){return new R7((t,r)=>{let n,i,o=e[e.length-1];if(o&&typeof o=="object"&&!A7(o)&&!I7(o)&&!P7(o)){let s=T7(e);n=s.signal,i=s.end;}D7(e,(s,a)=>{s?r(s):t(a);},{signal:n,end:i});})}ZD.exports={finished:L7,pipeline:O7};});var mv=X((Oce,aL)=>{d();p();h();var{Buffer:k7}=(Oi(),Ar(ho)),{ObjectDefineProperty:Gi,ObjectKeys:tL,ReflectApply:rL}=Vt(),{promisify:{custom:nL}}=kr(),{streamReturningOperators:QD,promiseReturningOperators:eL}=KD(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:iL}}=Yr(),N7=fv(),{setDefaultHighWaterMark:M7,getDefaultHighWaterMark:q7}=eu(),{pipeline:oL}=Yf(),{destroyer:F7}=ds(),sL=Ui(),yv=gv(),lu=li(),Nt=aL.exports=If().Stream;Nt.isDestroyed=lu.isDestroyed;Nt.isDisturbed=lu.isDisturbed;Nt.isErrored=lu.isErrored;Nt.isReadable=lu.isReadable;Nt.isWritable=lu.isWritable;Nt.Readable=nu();for(let e of tL(QD)){let r=function(...n){if(new.target)throw iL();return Nt.Readable.from(rL(t,this,n))};let t=QD[e];Gi(r,"name",{__proto__:null,value:t.name}),Gi(r,"length",{__proto__:null,value:t.length}),Gi(Nt.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0});}for(let e of tL(eL)){let r=function(...i){if(new.target)throw iL();return rL(t,this,i)};let t=eL[e];Gi(r,"name",{__proto__:null,value:t.name}),Gi(r,"length",{__proto__:null,value:t.length}),Gi(Nt.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0});}Nt.Writable=zf();Nt.Duplex=hi();Nt.Transform=Zy();Nt.PassThrough=ev();Nt.pipeline=oL;var{addAbortSignal:$7}=Qc();Nt.addAbortSignal=$7;Nt.finished=sL;Nt.destroy=F7;Nt.compose=N7;Nt.setDefaultHighWaterMark=M7;Nt.getDefaultHighWaterMark=q7;Gi(Nt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return yv}});Gi(oL,nL,{__proto__:null,enumerable:!0,get(){return yv.pipeline}});Gi(sL,nL,{__proto__:null,enumerable:!0,get(){return yv.finished}});Nt.Stream=Nt;Nt._isUint8Array=function(t){return t instanceof Uint8Array};Nt._uint8ArrayToBuffer=function(t){return k7.from(t.buffer,t.byteOffset,t.byteLength)};});var cL=X((qce,nr)=>{d();p();h();var dr=mv(),j7=gv(),U7=dr.Readable.destroy;nr.exports=dr.Readable;nr.exports._uint8ArrayToBuffer=dr._uint8ArrayToBuffer;nr.exports._isUint8Array=dr._isUint8Array;nr.exports.isDisturbed=dr.isDisturbed;nr.exports.isErrored=dr.isErrored;nr.exports.isReadable=dr.isReadable;nr.exports.Readable=dr.Readable;nr.exports.Writable=dr.Writable;nr.exports.Duplex=dr.Duplex;nr.exports.Transform=dr.Transform;nr.exports.PassThrough=dr.PassThrough;nr.exports.addAbortSignal=dr.addAbortSignal;nr.exports.finished=dr.finished;nr.exports.destroy=dr.destroy;nr.exports.destroy=U7;nr.exports.pipeline=dr.pipeline;nr.exports.compose=dr.compose;Object.defineProperty(dr,"promises",{configurable:!0,enumerable:!0,get(){return j7}});nr.exports.Stream=dr.Stream;nr.exports.default=nr.exports;});var uL=X(Ea=>{d();p();h();Object.defineProperty(Ea,"__esModule",{value:!0});Ea.readableFromWeb=Ea.ReadableFromWeb=void 0;var B7=cL(),Qf=class extends B7.Readable{constructor(t,r){super(r),this.reader=t.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0;}).catch(n=>{this.readerClosed=!0,this.destroy(n);});}_read(){this.reader.read().then(t=>this.push(t.done?null:t.value)).catch(t=>this.destroy(t));}destroy(t){return this.readerClosed||this.reader.cancel(t).then().catch(()=>{}),super.destroy(t)}};Ea.ReadableFromWeb=Qf;function W7(e,t){return new Qf(e,t)}Ea.readableFromWeb=W7;});var lL=X(ed=>{d();p();h();Object.defineProperty(ed,"__esModule",{value:!0});ed.readableFromWeb=void 0;var z7=uL();Object.defineProperty(ed,"readableFromWeb",{enumerable:!0,get:function(){return z7.readableFromWeb}});});var pL=X((iue,hL)=>{d();p();h();function V7(e){try{return JSON.stringify(e)}catch{return '"[Circular]"'}}hL.exports=G7;function G7(e,t,r){var n=r&&r.stringify||V7,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=n(e);for(var a=1;a<o;a++)s[a]=n(t[a]);return s.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",u=1-i,g=-1,w=e&&e.length||0,y=0;y<w;){if(e.charCodeAt(y)===37&&y+1<w){switch(g=g>-1?g:0,e.charCodeAt(y+1)){case 100:case 102:if(u>=c||t[u]==null)break;g<y&&(l+=e.slice(g,y)),l+=Number(t[u]),g=y+2,y++;break;case 105:if(u>=c||t[u]==null)break;g<y&&(l+=e.slice(g,y)),l+=Math.floor(Number(t[u])),g=y+2,y++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;g<y&&(l+=e.slice(g,y));var _=typeof t[u];if(_==="string"){l+="'"+t[u]+"'",g=y+2,y++;break}if(_==="function"){l+=t[u].name||"<anonymous>",g=y+2,y++;break}l+=n(t[u]),g=y+2,y++;break;case 115:if(u>=c)break;g<y&&(l+=e.slice(g,y)),l+=String(t[u]),g=y+2,y++;break;case 37:g<y&&(l+=e.slice(g,y)),l+="%",g=y+2,y++,u--;break}++u;}++y;}return g===-1?e:(g<w&&(l+=e.slice(g)),l)}});var wL=X((cue,od)=>{d();p();h();var gL=pL();od.exports=Yi;var fu=cH().console||{},Y7={mapHttpRequest:rd,mapHttpResponse:rd,wrapRequestSerializer:bv,wrapResponseSerializer:bv,wrapErrorSerializer:bv,req:rd,res:rd,err:yL,errWithCause:yL};function nd(e,t){return e==="silent"?1/0:t.levels.values[e]}var Ev=Symbol("pino.logFuncs"),wv=Symbol("pino.hierarchy"),X7={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function mL(e,t){let r={logger:t,parent:e[wv]};t[wv]=r;}function J7(e,t,r){let n={};t.forEach(i=>{n[i]=r[i]?r[i]:fu[i]||fu[X7[i]||"log"]||du;}),e[Ev]=n;}function K7(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Yi(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||fu;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},i=K7(e.browser.serialize,n),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let s=Object.keys(e.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&a.forEach(function(x){r[x]=r;}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let c=e.level||"info",l=Object.create(r);l.log||(l.log=du),J7(l,a,r),mL({},l),Object.defineProperty(l,"levelVal",{get:g}),Object.defineProperty(l,"level",{get:w,set:y});let u={transmit:t,serialize:i,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:a,timestamp:oH(e)};l.levels=Z7(e),l.level=c,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=du,l.serializers=n,l._serialize=i,l._stdErrSerialize=o,l.child=_,t&&(l._logEvent=Sv());function g(){return nd(this.level,this)}function w(){return this._level}function y(x){if(x!=="silent"&&!this.levels.values[x])throw Error("unknown level "+x);this._level=x,xs(this,u,l,"error"),xs(this,u,l,"fatal"),xs(this,u,l,"warn"),xs(this,u,l,"info"),xs(this,u,l,"debug"),xs(this,u,l,"trace"),s.forEach(D=>{xs(this,u,l,D);});}function _(x,D){if(!x)throw new Error("missing bindings for child Pino");D=D||{},i&&x.serializers&&(D.serializers=x.serializers);let A=D.serializers;if(i&&A){var C=Object.assign({},n,A),R=e.browser.serialize===!0?Object.keys(C):i;delete x.serializers,id([x],R,C,this._stdErrSerialize);}function T(P){this._childLevel=(P._childLevel|0)+1,this.bindings=x,C&&(this.serializers=C,this._serialize=R),t&&(this._logEvent=Sv([].concat(P._logEvent.bindings,x)));}T.prototype=this;let $=new T(this);return mL(this,$),$.level=this.level,$}return l}function Z7(e){let t=e.customLevels||{},r=Object.assign({},Yi.levels.values,t),n=Object.assign({},Yi.levels.labels,Q7(t));return {values:r,labels:n}}function Q7(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r;}),t}Yi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Yi.stdSerializers=Y7;Yi.stdTimeFunctions=Object.assign({},{nullTime:vL,epochTime:bL,unixTime:sH,isoTime:aH});function eH(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[wv];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function xs(e,t,r,n){if(Object.defineProperty(e,n,{value:nd(e.level,r)>nd(n,r)?du:r[Ev][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===du)return;e[n]=rH(e,t,r,n);let i=eH(e);i.length!==0&&(e[n]=tH(i,e[n]));}function tH(e,t){return function(){return t.apply(this,[...e,...arguments])}}function rH(e,t,r,n){return function(i){return function(){let s=t.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===fu?fu:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];if(t.serialize&&!t.asObject&&id(a,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?i.call(c,nH(this,n,a,s,t.formatters)):i.apply(c,a),t.transmit){let u=t.transmit.level||e._level,g=r.levels.values[u],w=r.levels.values[n];if(w<g)return;iH(this,{ts:s,methodLevel:n,methodValue:w,transmitLevel:u,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:nd(e._level,r)},a);}}}(e[Ev][n])}function nH(e,t,r,n,i={}){let{level:o=()=>e.levels.values[t],log:s=w=>w}=i;e._serialize&&id(r,e._serialize,e.serializers,e._stdErrSerialize);let a=r.slice(),c=a[0],l={};n&&(l.time=n),l.level=o(t,e.levels.values[t]);let u=(e._childLevel|0)+1;if(u<1&&(u=1),c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?gL(a.shift(),a):void 0;}else typeof c=="string"&&(c=gL(a.shift(),a));return c!==void 0&&(l.msg=c),s(l)}function id(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=Yi.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let o in e[i])t&&t.indexOf(o)>-1&&o in r&&(e[i][o]=r[o](e[i][o]));}function iH(e,t,r){let n=t.send,i=t.ts,o=t.methodLevel,s=t.methodValue,a=t.val,c=e._logEvent.bindings;id(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=s,n(o,e._logEvent,a),e._logEvent=Sv(c);}function Sv(e){return {ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function yL(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function oH(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?vL:bL}function rd(){return {}}function bv(e){return e}function du(){}function vL(){return !1}function bL(){return Date.now()}function sH(){return Math.round(Date.now()/1e3)}function aH(){return new Date(Date.now()).toISOString()}function cH(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}od.exports.default=Yi;od.exports.pino=Yi;});var IL=X((zue,RL)=>{d();p();h();RL.exports=function(){function e(n,i){function o(){this.constructor=n;}o.prototype=i.prototype,n.prototype=new o;}function t(n,i,o,s,a,c){this.message=n,this.expected=i,this.found=o,this.offset=s,this.line=a,this.column=c,this.name="SyntaxError";}e(t,Error);function r(n){var i=arguments.length>1?arguments[1]:{},o={},s={start:zp},a=zp,l=function(){return WS},u=o,g="#",w={type:"literal",value:"#",description:'"#"'},y=void 0,_={type:"any",description:"any character"},x="[",D={type:"literal",value:"[",description:'"["'},A="]",C={type:"literal",value:"]",description:'"]"'},R=function(f){Yp(Er("ObjectPath",f,sr,ur));},T=function(f){Yp(Er("ArrayPath",f,sr,ur));},$=function(f,S){return f.concat(S)},P=function(f){return [f]},q=function(f){return f},k=".",V={type:"literal",value:".",description:'"."'},K="=",ve={type:"literal",value:"=",description:'"="'},fe=function(f,S){Yp(Er("Assign",S,sr,ur,f));},be=function(f){return f.join("")},me=function(f){return f.value},je='"""',pt={type:"literal",value:'"""',description:'"\\"\\"\\""'},We=null,ze=function(f){return Er("String",f.join(""),sr,ur)},Rt='"',Qe={type:"literal",value:'"',description:'"\\""'},lt="'''",sn={type:"literal",value:"'''",description:`"'''"`},Jr="'",ir={type:"literal",value:"'",description:`"'"`},Dt=function(f){return f},pe=function(f){return f},F="\\",z={type:"literal",value:"\\",description:'"\\\\"'},Q=function(){return ""},de="e",le={type:"literal",value:"e",description:'"e"'},he="E",Ue={type:"literal",value:"E",description:'"E"'},et=function(f,S){return Er("Float",parseFloat(f+"e"+S),sr,ur)},vt=function(f){return Er("Float",parseFloat(f),sr,ur)},Ft="+",Et={type:"literal",value:"+",description:'"+"'},$t=function(f){return f.join("")},tt="-",He={type:"literal",value:"-",description:'"-"'},at=function(f){return "-"+f.join("")},an=function(f){return Er("Integer",parseInt(f,10),sr,ur)},bn="true",Ur={type:"literal",value:"true",description:'"true"'},no=function(){return Er("Boolean",!0,sr,ur)},L="false",v={type:"literal",value:"false",description:'"false"'},b=function(){return Er("Boolean",!1,sr,ur)},E=function(){return Er("Array",[],sr,ur)},j=function(f){return Er("Array",f?[f]:[],sr,ur)},G=function(f){return Er("Array",f,sr,ur)},ee=function(f,S){return Er("Array",f.concat(S),sr,ur)},Ce=function(f){return f},Le=",",Ne={type:"literal",value:",",description:'","'},Pe="{",Ie={type:"literal",value:"{",description:'"{"'},xt="}",ct={type:"literal",value:"}",description:'"}"'},zt=function(f){return Er("InlineTable",f,sr,ur)},or=function(f,S){return Er("InlineTableValue",S,sr,ur,f)},Kr=function(f){return "."+f},ti=function(f){return f.join("")},Vo=":",io={type:"literal",value:":",description:'":"'},tl=function(f){return f.join("")},Fs="T",bc={type:"literal",value:"T",description:'"T"'},jp="Z",rl={type:"literal",value:"Z",description:'"Z"'},Up=function(f,S){return Er("Date",new Date(f+"T"+S+"Z"),sr,ur)},nl=function(f,S){return Er("Date",new Date(f+"T"+S),sr,ur)},J=/^[ \t]/,B={type:"class",value:"[ \\t]",description:"[ \\t]"},Z=`
`,ne={type:"literal",value:`
`,description:'"\\n"'},ie="\r",Ee={type:"literal",value:"\r",description:'"\\r"'},Ge=/^[0-9a-f]/i,ot={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},ft=/^[0-9]/,Xt={type:"class",value:"[0-9]",description:"[0-9]"},rt="_",Lt={type:"literal",value:"_",description:'"_"'},Jt=function(){return ""},It=/^[A-Za-z0-9_\-]/,st={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},Ot=function(f){return f.join("")},gt='\\"',Ai={type:"literal",value:'\\"',description:'"\\\\\\""'},Br=function(){return '"'},Wr="\\\\",bt={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},zr=function(){return "\\"},Hr="\\b",wn={type:"literal",value:"\\b",description:'"\\\\b"'},Pi=function(){return "\b"},Sn="\\t",Go={type:"literal",value:"\\t",description:'"\\\\t"'},$s=function(){return "	"},Yo="\\n",oo={type:"literal",value:"\\n",description:'"\\\\n"'},so=function(){return `
`},En="\\f",ao={type:"literal",value:"\\f",description:'"\\\\f"'},wc=function(){return "\f"},ri="\\r",Bp={type:"literal",value:"\\r",description:'"\\\\r"'},Wp=function(){return "\r"},Sc="\\U",Xo={type:"literal",value:"\\U",description:'"\\\\U"'},co=function(f){return kF(f.join(""))},Ec="\\u",Jo={type:"literal",value:"\\u",description:'"\\\\u"'},m=0,Re=0,Ko=0,cn={line:1,column:1,seenCR:!1},$n=0,Zo=[],ae=0,ce={},xc;if("startRule"in i){if(!(i.startRule in s))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');a=s[i.startRule];}function sr(){return il(Re).line}function ur(){return il(Re).column}function il(f){function S(I,U,Y){var te,se;for(te=U;te<Y;te++)se=n.charAt(te),se===`
`?(I.seenCR||I.line++,I.column=1,I.seenCR=!1):se==="\r"||se==="\u2028"||se==="\u2029"?(I.line++,I.column=1,I.seenCR=!0):(I.column++,I.seenCR=!1);}return Ko!==f&&(Ko>f&&(Ko=0,cn={line:1,column:1,seenCR:!1}),S(cn,Ko,f),Ko=f),cn}function ge(f){m<$n||(m>$n&&($n=m,Zo=[]),Zo.push(f));}function ol(f,S,I){function U(Se){var Be=1;for(Se.sort(function(wt,dt){return wt.description<dt.description?-1:wt.description>dt.description?1:0});Be<Se.length;)Se[Be-1]===Se[Be]?Se.splice(Be,1):Be++;}function Y(Se,Be){function wt(Bs){function uo(ln){return ln.charCodeAt(0).toString(16).toUpperCase()}return Bs.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ln){return "\\x0"+uo(ln)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ln){return "\\x"+uo(ln)}).replace(/[\u0180-\u0FFF]/g,function(ln){return "\\u0"+uo(ln)}).replace(/[\u1080-\uFFFF]/g,function(ln){return "\\u"+uo(ln)})}var dt=new Array(Se.length),Ht,er,un;for(un=0;un<Se.length;un++)dt[un]=Se[un].description;return Ht=Se.length>1?dt.slice(0,-1).join(", ")+" or "+dt[Se.length-1]:dt[0],er=Be?'"'+wt(Be)+'"':"end of input","Expected "+Ht+" but "+er+" found."}var te=il(I),se=I<n.length?n.charAt(I):null;return S!==null&&U(S),new t(Y(S,se),S,se,I,te.line,te.column)}function zp(){var f,S,I,U=m*49+0,Y=ce[U];if(Y)return m=Y.nextPos,Y.result;for(f=m,S=[],I=Hp();I!==o;)S.push(I),I=Hp();return S!==o&&(Re=f,S=l()),f=S,ce[U]={nextPos:m,result:f},f}function Hp(){var f,S,I,U,Y,te,se,Se=m*49+1,Be=ce[Se];if(Be)return m=Be.nextPos,Be.result;for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=_S(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o){for(Y=[],te=Cc();te!==o;)Y.push(te),te=Cc();if(Y!==o){if(te=[],se=Cn(),se!==o)for(;se!==o;)te.push(se),se=Cn();else te=u;te===o&&(te=al()),te!==o?(S=[S,I,U,Y,te],f=S):(m=f,f=u);}else m=f,f=u;}else m=f,f=u;}else m=f,f=u;else m=f,f=u;if(f===o){if(f=m,S=[],I=Ae(),I!==o)for(;I!==o;)S.push(I),I=Ae();else S=u;if(S!==o){if(I=[],U=Cn(),U!==o)for(;U!==o;)I.push(U),U=Cn();else I=u;I===o&&(I=al()),I!==o?(S=[S,I],f=S):(m=f,f=u);}else m=f,f=u;f===o&&(f=Cn());}return ce[Se]={nextPos:m,result:f},f}function _S(){var f,S=m*49+2,I=ce[S];return I?(m=I.nextPos,I.result):(f=Cc(),f===o&&(f=yF(),f===o&&(f=vF(),f===o&&(f=bF()))),ce[S]={nextPos:m,result:f},f)}function Cc(){var f,S,I,U,Y,te,se=m*49+3,Se=ce[se];if(Se)return m=Se.nextPos,Se.result;if(f=m,n.charCodeAt(m)===35?(S=g,m++):(S=o,ae===0&&ge(w)),S!==o){for(I=[],U=m,Y=m,ae++,te=Cn(),te===o&&(te=al()),ae--,te===o?Y=y:(m=Y,Y=u),Y!==o?(n.length>m?(te=n.charAt(m),m++):(te=o,ae===0&&ge(_)),te!==o?(Y=[Y,te],U=Y):(m=U,U=u)):(m=U,U=u);U!==o;)I.push(U),U=m,Y=m,ae++,te=Cn(),te===o&&(te=al()),ae--,te===o?Y=y:(m=Y,Y=u),Y!==o?(n.length>m?(te=n.charAt(m),m++):(te=o,ae===0&&ge(_)),te!==o?(Y=[Y,te],U=Y):(m=U,U=u)):(m=U,U=u);I!==o?(S=[S,I],f=S):(m=f,f=u);}else m=f,f=u;return ce[se]={nextPos:m,result:f},f}function yF(){var f,S,I,U,Y,te,se=m*49+4,Se=ce[se];if(Se)return m=Se.nextPos,Se.result;if(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o){for(I=[],U=Ae();U!==o;)I.push(U),U=Ae();if(I!==o)if(U=TS(),U!==o){for(Y=[],te=Ae();te!==o;)Y.push(te),te=Ae();Y!==o?(n.charCodeAt(m)===93?(te=A,m++):(te=o,ae===0&&ge(C)),te!==o?(Re=f,S=R(U),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;return ce[se]={nextPos:m,result:f},f}function vF(){var f,S,I,U,Y,te,se,Se,Be=m*49+5,wt=ce[Be];if(wt)return m=wt.nextPos,wt.result;if(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o)if(n.charCodeAt(m)===91?(I=x,m++):(I=o,ae===0&&ge(D)),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o)if(Y=TS(),Y!==o){for(te=[],se=Ae();se!==o;)te.push(se),se=Ae();te!==o?(n.charCodeAt(m)===93?(se=A,m++):(se=o,ae===0&&ge(C)),se!==o?(n.charCodeAt(m)===93?(Se=A,m++):(Se=o,ae===0&&ge(C)),Se!==o?(Re=f,S=T(Y),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;return ce[Be]={nextPos:m,result:f},f}function TS(){var f,S,I,U=m*49+6,Y=ce[U];if(Y)return m=Y.nextPos,Y.result;if(f=m,S=[],I=IS(),I!==o)for(;I!==o;)S.push(I),I=IS();else S=u;return S!==o?(I=RS(),I!==o?(Re=f,S=$(S,I),f=S):(m=f,f=u)):(m=f,f=u),f===o&&(f=m,S=RS(),S!==o&&(Re=f,S=P(S)),f=S),ce[U]={nextPos:m,result:f},f}function RS(){var f,S,I,U,Y,te=m*49+7,se=ce[te];if(se)return m=se.nextPos,se.result;for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=_c(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();U!==o?(Re=f,S=q(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;if(f===o){for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=Vp(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();U!==o?(Re=f,S=q(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}return ce[te]={nextPos:m,result:f},f}function IS(){var f,S,I,U,Y,te,se,Se=m*49+8,Be=ce[Se];if(Be)return m=Be.nextPos,Be.result;for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=_c(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o)if(n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),Y!==o){for(te=[],se=Ae();se!==o;)te.push(se),se=Ae();te!==o?(Re=f,S=q(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;if(f===o){for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=Vp(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o)if(n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),Y!==o){for(te=[],se=Ae();se!==o;)te.push(se),se=Ae();te!==o?(Re=f,S=q(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;}return ce[Se]={nextPos:m,result:f},f}function bF(){var f,S,I,U,Y,te,se=m*49+9,Se=ce[se];if(Se)return m=Se.nextPos,Se.result;if(f=m,S=_c(),S!==o){for(I=[],U=Ae();U!==o;)I.push(U),U=Ae();if(I!==o)if(n.charCodeAt(m)===61?(U=K,m++):(U=o,ae===0&&ge(ve)),U!==o){for(Y=[],te=Ae();te!==o;)Y.push(te),te=Ae();Y!==o?(te=Us(),te!==o?(Re=f,S=fe(S,te),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;if(f===o)if(f=m,S=Vp(),S!==o){for(I=[],U=Ae();U!==o;)I.push(U),U=Ae();if(I!==o)if(n.charCodeAt(m)===61?(U=K,m++):(U=o,ae===0&&ge(ve)),U!==o){for(Y=[],te=Ae();te!==o;)Y.push(te),te=Ae();Y!==o?(te=Us(),te!==o?(Re=f,S=fe(S,te),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;return ce[se]={nextPos:m,result:f},f}function _c(){var f,S,I,U=m*49+10,Y=ce[U];if(Y)return m=Y.nextPos,Y.result;if(f=m,S=[],I=US(),I!==o)for(;I!==o;)S.push(I),I=US();else S=u;return S!==o&&(Re=f,S=be(S)),f=S,ce[U]={nextPos:m,result:f},f}function Vp(){var f,S,I=m*49+11,U=ce[I];return U?(m=U.nextPos,U.result):(f=m,S=AS(),S!==o&&(Re=f,S=me(S)),f=S,f===o&&(f=m,S=PS(),S!==o&&(Re=f,S=me(S)),f=S),ce[I]={nextPos:m,result:f},f)}function Us(){var f,S=m*49+12,I=ce[S];return I?(m=I.nextPos,I.result):(f=wF(),f===o&&(f=DF(),f===o&&(f=CF(),f===o&&(f=_F(),f===o&&(f=TF(),f===o&&(f=RF(),f===o&&(f=IF())))))),ce[S]={nextPos:m,result:f},f)}function wF(){var f,S=m*49+13,I=ce[S];return I?(m=I.nextPos,I.result):(f=SF(),f===o&&(f=AS(),f===o&&(f=EF(),f===o&&(f=PS()))),ce[S]={nextPos:m,result:f},f)}function SF(){var f,S,I,U,Y,te=m*49+14,se=ce[te];if(se)return m=se.nextPos,se.result;if(f=m,n.substr(m,3)===je?(S=je,m+=3):(S=o,ae===0&&ge(pt)),S!==o)if(I=Cn(),I===o&&(I=We),I!==o){for(U=[],Y=OS();Y!==o;)U.push(Y),Y=OS();U!==o?(n.substr(m,3)===je?(Y=je,m+=3):(Y=o,ae===0&&ge(pt)),Y!==o?(Re=f,S=ze(U),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;return ce[te]={nextPos:m,result:f},f}function AS(){var f,S,I,U,Y=m*49+15,te=ce[Y];if(te)return m=te.nextPos,te.result;if(f=m,n.charCodeAt(m)===34?(S=Rt,m++):(S=o,ae===0&&ge(Qe)),S!==o){for(I=[],U=DS();U!==o;)I.push(U),U=DS();I!==o?(n.charCodeAt(m)===34?(U=Rt,m++):(U=o,ae===0&&ge(Qe)),U!==o?(Re=f,S=ze(I),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;return ce[Y]={nextPos:m,result:f},f}function EF(){var f,S,I,U,Y,te=m*49+16,se=ce[te];if(se)return m=se.nextPos,se.result;if(f=m,n.substr(m,3)===lt?(S=lt,m+=3):(S=o,ae===0&&ge(sn)),S!==o)if(I=Cn(),I===o&&(I=We),I!==o){for(U=[],Y=kS();Y!==o;)U.push(Y),Y=kS();U!==o?(n.substr(m,3)===lt?(Y=lt,m+=3):(Y=o,ae===0&&ge(sn)),Y!==o?(Re=f,S=ze(U),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;return ce[te]={nextPos:m,result:f},f}function PS(){var f,S,I,U,Y=m*49+17,te=ce[Y];if(te)return m=te.nextPos,te.result;if(f=m,n.charCodeAt(m)===39?(S=Jr,m++):(S=o,ae===0&&ge(ir)),S!==o){for(I=[],U=LS();U!==o;)I.push(U),U=LS();I!==o?(n.charCodeAt(m)===39?(U=Jr,m++):(U=o,ae===0&&ge(ir)),U!==o?(Re=f,S=ze(I),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;return ce[Y]={nextPos:m,result:f},f}function DS(){var f,S,I,U=m*49+18,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(f=BS(),f===o&&(f=m,S=m,ae++,n.charCodeAt(m)===34?(I=Rt,m++):(I=o,ae===0&&ge(Qe)),ae--,I===o?S=y:(m=S,S=u),S!==o?(n.length>m?(I=n.charAt(m),m++):(I=o,ae===0&&ge(_)),I!==o?(Re=f,S=Dt(I),f=S):(m=f,f=u)):(m=f,f=u)),ce[U]={nextPos:m,result:f},f)}function LS(){var f,S,I,U=m*49+19,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(f=m,S=m,ae++,n.charCodeAt(m)===39?(I=Jr,m++):(I=o,ae===0&&ge(ir)),ae--,I===o?S=y:(m=S,S=u),S!==o?(n.length>m?(I=n.charAt(m),m++):(I=o,ae===0&&ge(_)),I!==o?(Re=f,S=Dt(I),f=S):(m=f,f=u)):(m=f,f=u),ce[U]={nextPos:m,result:f},f)}function OS(){var f,S,I,U=m*49+20,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(f=BS(),f===o&&(f=xF(),f===o&&(f=m,S=m,ae++,n.substr(m,3)===je?(I=je,m+=3):(I=o,ae===0&&ge(pt)),ae--,I===o?S=y:(m=S,S=u),S!==o?(n.length>m?(I=n.charAt(m),m++):(I=o,ae===0&&ge(_)),I!==o?(Re=f,S=pe(I),f=S):(m=f,f=u)):(m=f,f=u))),ce[U]={nextPos:m,result:f},f)}function xF(){var f,S,I,U,Y,te=m*49+21,se=ce[te];if(se)return m=se.nextPos,se.result;if(f=m,n.charCodeAt(m)===92?(S=F,m++):(S=o,ae===0&&ge(z)),S!==o)if(I=Cn(),I!==o){for(U=[],Y=jS();Y!==o;)U.push(Y),Y=jS();U!==o?(Re=f,S=Q(),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;return ce[te]={nextPos:m,result:f},f}function kS(){var f,S,I,U=m*49+22,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(f=m,S=m,ae++,n.substr(m,3)===lt?(I=lt,m+=3):(I=o,ae===0&&ge(sn)),ae--,I===o?S=y:(m=S,S=u),S!==o?(n.length>m?(I=n.charAt(m),m++):(I=o,ae===0&&ge(_)),I!==o?(Re=f,S=Dt(I),f=S):(m=f,f=u)):(m=f,f=u),ce[U]={nextPos:m,result:f},f)}function CF(){var f,S,I,U,Y=m*49+23,te=ce[Y];return te?(m=te.nextPos,te.result):(f=m,S=NS(),S===o&&(S=Gp()),S!==o?(n.charCodeAt(m)===101?(I=de,m++):(I=o,ae===0&&ge(le)),I===o&&(n.charCodeAt(m)===69?(I=he,m++):(I=o,ae===0&&ge(Ue))),I!==o?(U=Gp(),U!==o?(Re=f,S=et(S,U),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u),f===o&&(f=m,S=NS(),S!==o&&(Re=f,S=vt(S)),f=S),ce[Y]={nextPos:m,result:f},f)}function NS(){var f,S,I,U,Y,te,se=m*49+24,Se=ce[se];return Se?(m=Se.nextPos,Se.result):(f=m,n.charCodeAt(m)===43?(S=Ft,m++):(S=o,ae===0&&ge(Et)),S===o&&(S=We),S!==o?(I=m,U=Tc(),U!==o?(n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),Y!==o?(te=Tc(),te!==o?(U=[U,Y,te],I=U):(m=I,I=u)):(m=I,I=u)):(m=I,I=u),I!==o?(Re=f,S=$t(I),f=S):(m=f,f=u)):(m=f,f=u),f===o&&(f=m,n.charCodeAt(m)===45?(S=tt,m++):(S=o,ae===0&&ge(He)),S!==o?(I=m,U=Tc(),U!==o?(n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),Y!==o?(te=Tc(),te!==o?(U=[U,Y,te],I=U):(m=I,I=u)):(m=I,I=u)):(m=I,I=u),I!==o?(Re=f,S=at(I),f=S):(m=f,f=u)):(m=f,f=u)),ce[se]={nextPos:m,result:f},f)}function _F(){var f,S,I=m*49+25,U=ce[I];return U?(m=U.nextPos,U.result):(f=m,S=Gp(),S!==o&&(Re=f,S=an(S)),f=S,ce[I]={nextPos:m,result:f},f)}function Gp(){var f,S,I,U,Y,te=m*49+26,se=ce[te];if(se)return m=se.nextPos,se.result;if(f=m,n.charCodeAt(m)===43?(S=Ft,m++):(S=o,ae===0&&ge(Et)),S===o&&(S=We),S!==o){if(I=[],U=yt(),U!==o)for(;U!==o;)I.push(U),U=yt();else I=u;I!==o?(U=m,ae++,n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),ae--,Y===o?U=y:(m=U,U=u),U!==o?(Re=f,S=$t(I),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;if(f===o)if(f=m,n.charCodeAt(m)===45?(S=tt,m++):(S=o,ae===0&&ge(He)),S!==o){if(I=[],U=yt(),U!==o)for(;U!==o;)I.push(U),U=yt();else I=u;I!==o?(U=m,ae++,n.charCodeAt(m)===46?(Y=k,m++):(Y=o,ae===0&&ge(V)),ae--,Y===o?U=y:(m=U,U=u),U!==o?(Re=f,S=at(I),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;return ce[te]={nextPos:m,result:f},f}function TF(){var f,S,I=m*49+27,U=ce[I];return U?(m=U.nextPos,U.result):(f=m,n.substr(m,4)===bn?(S=bn,m+=4):(S=o,ae===0&&ge(Ur)),S!==o&&(Re=f,S=no()),f=S,f===o&&(f=m,n.substr(m,5)===L?(S=L,m+=5):(S=o,ae===0&&ge(v)),S!==o&&(Re=f,S=b()),f=S),ce[I]={nextPos:m,result:f},f)}function RF(){var f,S,I,U,Y,te=m*49+28,se=ce[te];if(se)return m=se.nextPos,se.result;if(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o){for(I=[],U=xn();U!==o;)I.push(U),U=xn();I!==o?(n.charCodeAt(m)===93?(U=A,m++):(U=o,ae===0&&ge(C)),U!==o?(Re=f,S=E(),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;if(f===o&&(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o?(I=MS(),I===o&&(I=We),I!==o?(n.charCodeAt(m)===93?(U=A,m++):(U=o,ae===0&&ge(C)),U!==o?(Re=f,S=j(I),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u),f===o)){if(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o){if(I=[],U=sl(),U!==o)for(;U!==o;)I.push(U),U=sl();else I=u;I!==o?(n.charCodeAt(m)===93?(U=A,m++):(U=o,ae===0&&ge(C)),U!==o?(Re=f,S=G(I),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;if(f===o)if(f=m,n.charCodeAt(m)===91?(S=x,m++):(S=o,ae===0&&ge(D)),S!==o){if(I=[],U=sl(),U!==o)for(;U!==o;)I.push(U),U=sl();else I=u;I!==o?(U=MS(),U!==o?(n.charCodeAt(m)===93?(Y=A,m++):(Y=o,ae===0&&ge(C)),Y!==o?(Re=f,S=ee(I,U),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;}return ce[te]={nextPos:m,result:f},f}function MS(){var f,S,I,U,Y,te=m*49+29,se=ce[te];if(se)return m=se.nextPos,se.result;for(f=m,S=[],I=xn();I!==o;)S.push(I),I=xn();if(S!==o)if(I=Us(),I!==o){for(U=[],Y=xn();Y!==o;)U.push(Y),Y=xn();U!==o?(Re=f,S=Ce(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;return ce[te]={nextPos:m,result:f},f}function sl(){var f,S,I,U,Y,te,se,Se=m*49+30,Be=ce[Se];if(Be)return m=Be.nextPos,Be.result;for(f=m,S=[],I=xn();I!==o;)S.push(I),I=xn();if(S!==o)if(I=Us(),I!==o){for(U=[],Y=xn();Y!==o;)U.push(Y),Y=xn();if(U!==o)if(n.charCodeAt(m)===44?(Y=Le,m++):(Y=o,ae===0&&ge(Ne)),Y!==o){for(te=[],se=xn();se!==o;)te.push(se),se=xn();te!==o?(Re=f,S=Ce(I),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;return ce[Se]={nextPos:m,result:f},f}function xn(){var f,S=m*49+31,I=ce[S];return I?(m=I.nextPos,I.result):(f=Ae(),f===o&&(f=Cn(),f===o&&(f=Cc())),ce[S]={nextPos:m,result:f},f)}function IF(){var f,S,I,U,Y,te,se=m*49+32,Se=ce[se];if(Se)return m=Se.nextPos,Se.result;if(f=m,n.charCodeAt(m)===123?(S=Pe,m++):(S=o,ae===0&&ge(Ie)),S!==o){for(I=[],U=Ae();U!==o;)I.push(U),U=Ae();if(I!==o){for(U=[],Y=qS();Y!==o;)U.push(Y),Y=qS();if(U!==o){for(Y=[],te=Ae();te!==o;)Y.push(te),te=Ae();Y!==o?(n.charCodeAt(m)===125?(te=xt,m++):(te=o,ae===0&&ge(ct)),te!==o?(Re=f,S=zt(U),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;}else m=f,f=u;}else m=f,f=u;return ce[se]={nextPos:m,result:f},f}function qS(){var f,S,I,U,Y,te,se,Se,Be,wt,dt,Ht=m*49+33,er=ce[Ht];if(er)return m=er.nextPos,er.result;for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=_c(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o)if(n.charCodeAt(m)===61?(Y=K,m++):(Y=o,ae===0&&ge(ve)),Y!==o){for(te=[],se=Ae();se!==o;)te.push(se),se=Ae();if(te!==o)if(se=Us(),se!==o){for(Se=[],Be=Ae();Be!==o;)Se.push(Be),Be=Ae();if(Se!==o)if(n.charCodeAt(m)===44?(Be=Le,m++):(Be=o,ae===0&&ge(Ne)),Be!==o){for(wt=[],dt=Ae();dt!==o;)wt.push(dt),dt=Ae();wt!==o?(Re=f,S=or(I,se),f=S):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;if(f===o){for(f=m,S=[],I=Ae();I!==o;)S.push(I),I=Ae();if(S!==o)if(I=_c(),I!==o){for(U=[],Y=Ae();Y!==o;)U.push(Y),Y=Ae();if(U!==o)if(n.charCodeAt(m)===61?(Y=K,m++):(Y=o,ae===0&&ge(ve)),Y!==o){for(te=[],se=Ae();se!==o;)te.push(se),se=Ae();te!==o?(se=Us(),se!==o?(Re=f,S=or(I,se),f=S):(m=f,f=u)):(m=f,f=u);}else m=f,f=u;else m=f,f=u;}else m=f,f=u;else m=f,f=u;}return ce[Ht]={nextPos:m,result:f},f}function FS(){var f,S,I,U=m*49+34,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(f=m,n.charCodeAt(m)===46?(S=k,m++):(S=o,ae===0&&ge(V)),S!==o?(I=Tc(),I!==o?(Re=f,S=Kr(I),f=S):(m=f,f=u)):(m=f,f=u),ce[U]={nextPos:m,result:f},f)}function $S(){var f,S,I,U,Y,te,se,Se,Be,wt,dt,Ht,er=m*49+35,un=ce[er];return un?(m=un.nextPos,un.result):(f=m,S=m,I=yt(),I!==o?(U=yt(),U!==o?(Y=yt(),Y!==o?(te=yt(),te!==o?(n.charCodeAt(m)===45?(se=tt,m++):(se=o,ae===0&&ge(He)),se!==o?(Se=yt(),Se!==o?(Be=yt(),Be!==o?(n.charCodeAt(m)===45?(wt=tt,m++):(wt=o,ae===0&&ge(He)),wt!==o?(dt=yt(),dt!==o?(Ht=yt(),Ht!==o?(I=[I,U,Y,te,se,Se,Be,wt,dt,Ht],S=I):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u),S!==o&&(Re=f,S=ti(S)),f=S,ce[er]={nextPos:m,result:f},f)}function AF(){var f,S,I,U,Y,te,se,Se,Be,wt,dt,Ht=m*49+36,er=ce[Ht];return er?(m=er.nextPos,er.result):(f=m,S=m,I=yt(),I!==o?(U=yt(),U!==o?(n.charCodeAt(m)===58?(Y=Vo,m++):(Y=o,ae===0&&ge(io)),Y!==o?(te=yt(),te!==o?(se=yt(),se!==o?(n.charCodeAt(m)===58?(Se=Vo,m++):(Se=o,ae===0&&ge(io)),Se!==o?(Be=yt(),Be!==o?(wt=yt(),wt!==o?(dt=FS(),dt===o&&(dt=We),dt!==o?(I=[I,U,Y,te,se,Se,Be,wt,dt],S=I):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u),S!==o&&(Re=f,S=tl(S)),f=S,ce[Ht]={nextPos:m,result:f},f)}function PF(){var f,S,I,U,Y,te,se,Se,Be,wt,dt,Ht,er,un,Bs,uo,ln,zS=m*49+37,Xp=ce[zS];return Xp?(m=Xp.nextPos,Xp.result):(f=m,S=m,I=yt(),I!==o?(U=yt(),U!==o?(n.charCodeAt(m)===58?(Y=Vo,m++):(Y=o,ae===0&&ge(io)),Y!==o?(te=yt(),te!==o?(se=yt(),se!==o?(n.charCodeAt(m)===58?(Se=Vo,m++):(Se=o,ae===0&&ge(io)),Se!==o?(Be=yt(),Be!==o?(wt=yt(),wt!==o?(dt=FS(),dt===o&&(dt=We),dt!==o?(n.charCodeAt(m)===45?(Ht=tt,m++):(Ht=o,ae===0&&ge(He)),Ht===o&&(n.charCodeAt(m)===43?(Ht=Ft,m++):(Ht=o,ae===0&&ge(Et))),Ht!==o?(er=yt(),er!==o?(un=yt(),un!==o?(n.charCodeAt(m)===58?(Bs=Vo,m++):(Bs=o,ae===0&&ge(io)),Bs!==o?(uo=yt(),uo!==o?(ln=yt(),ln!==o?(I=[I,U,Y,te,se,Se,Be,wt,dt,Ht,er,un,Bs,uo,ln],S=I):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u)):(m=S,S=u),S!==o&&(Re=f,S=tl(S)),f=S,ce[zS]={nextPos:m,result:f},f)}function DF(){var f,S,I,U,Y,te=m*49+38,se=ce[te];return se?(m=se.nextPos,se.result):(f=m,S=$S(),S!==o?(n.charCodeAt(m)===84?(I=Fs,m++):(I=o,ae===0&&ge(bc)),I!==o?(U=AF(),U!==o?(n.charCodeAt(m)===90?(Y=jp,m++):(Y=o,ae===0&&ge(rl)),Y!==o?(Re=f,S=Up(S,U),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u)):(m=f,f=u),f===o&&(f=m,S=$S(),S!==o?(n.charCodeAt(m)===84?(I=Fs,m++):(I=o,ae===0&&ge(bc)),I!==o?(U=PF(),U!==o?(Re=f,S=nl(S,U),f=S):(m=f,f=u)):(m=f,f=u)):(m=f,f=u)),ce[te]={nextPos:m,result:f},f)}function Ae(){var f,S=m*49+39,I=ce[S];return I?(m=I.nextPos,I.result):(J.test(n.charAt(m))?(f=n.charAt(m),m++):(f=o,ae===0&&ge(B)),ce[S]={nextPos:m,result:f},f)}function Cn(){var f,S,I,U=m*49+40,Y=ce[U];return Y?(m=Y.nextPos,Y.result):(n.charCodeAt(m)===10?(f=Z,m++):(f=o,ae===0&&ge(ne)),f===o&&(f=m,n.charCodeAt(m)===13?(S=ie,m++):(S=o,ae===0&&ge(Ee)),S!==o?(n.charCodeAt(m)===10?(I=Z,m++):(I=o,ae===0&&ge(ne)),I!==o?(S=[S,I],f=S):(m=f,f=u)):(m=f,f=u)),ce[U]={nextPos:m,result:f},f)}function jS(){var f,S=m*49+41,I=ce[S];return I?(m=I.nextPos,I.result):(f=Cn(),f===o&&(f=Ae()),ce[S]={nextPos:m,result:f},f)}function al(){var f,S,I=m*49+42,U=ce[I];return U?(m=U.nextPos,U.result):(f=m,ae++,n.length>m?(S=n.charAt(m),m++):(S=o,ae===0&&ge(_)),ae--,S===o?f=y:(m=f,f=u),ce[I]={nextPos:m,result:f},f)}function _n(){var f,S=m*49+43,I=ce[S];return I?(m=I.nextPos,I.result):(Ge.test(n.charAt(m))?(f=n.charAt(m),m++):(f=o,ae===0&&ge(ot)),ce[S]={nextPos:m,result:f},f)}function yt(){var f,S,I=m*49+44,U=ce[I];return U?(m=U.nextPos,U.result):(ft.test(n.charAt(m))?(f=n.charAt(m),m++):(f=o,ae===0&&ge(Xt)),f===o&&(f=m,n.charCodeAt(m)===95?(S=rt,m++):(S=o,ae===0&&ge(Lt)),S!==o&&(Re=f,S=Jt()),f=S),ce[I]={nextPos:m,result:f},f)}function US(){var f,S=m*49+45,I=ce[S];return I?(m=I.nextPos,I.result):(It.test(n.charAt(m))?(f=n.charAt(m),m++):(f=o,ae===0&&ge(st)),ce[S]={nextPos:m,result:f},f)}function Tc(){var f,S,I,U=m*49+46,Y=ce[U];if(Y)return m=Y.nextPos,Y.result;if(f=m,S=[],I=yt(),I!==o)for(;I!==o;)S.push(I),I=yt();else S=u;return S!==o&&(Re=f,S=Ot(S)),f=S,ce[U]={nextPos:m,result:f},f}function BS(){var f,S,I=m*49+47,U=ce[I];return U?(m=U.nextPos,U.result):(f=m,n.substr(m,2)===gt?(S=gt,m+=2):(S=o,ae===0&&ge(Ai)),S!==o&&(Re=f,S=Br()),f=S,f===o&&(f=m,n.substr(m,2)===Wr?(S=Wr,m+=2):(S=o,ae===0&&ge(bt)),S!==o&&(Re=f,S=zr()),f=S,f===o&&(f=m,n.substr(m,2)===Hr?(S=Hr,m+=2):(S=o,ae===0&&ge(wn)),S!==o&&(Re=f,S=Pi()),f=S,f===o&&(f=m,n.substr(m,2)===Sn?(S=Sn,m+=2):(S=o,ae===0&&ge(Go)),S!==o&&(Re=f,S=$s()),f=S,f===o&&(f=m,n.substr(m,2)===Yo?(S=Yo,m+=2):(S=o,ae===0&&ge(oo)),S!==o&&(Re=f,S=so()),f=S,f===o&&(f=m,n.substr(m,2)===En?(S=En,m+=2):(S=o,ae===0&&ge(ao)),S!==o&&(Re=f,S=wc()),f=S,f===o&&(f=m,n.substr(m,2)===ri?(S=ri,m+=2):(S=o,ae===0&&ge(Bp)),S!==o&&(Re=f,S=Wp()),f=S,f===o&&(f=LF()))))))),ce[I]={nextPos:m,result:f},f)}function LF(){var f,S,I,U,Y,te,se,Se,Be,wt,dt,Ht=m*49+48,er=ce[Ht];return er?(m=er.nextPos,er.result):(f=m,n.substr(m,2)===Sc?(S=Sc,m+=2):(S=o,ae===0&&ge(Xo)),S!==o?(I=m,U=_n(),U!==o?(Y=_n(),Y!==o?(te=_n(),te!==o?(se=_n(),se!==o?(Se=_n(),Se!==o?(Be=_n(),Be!==o?(wt=_n(),wt!==o?(dt=_n(),dt!==o?(U=[U,Y,te,se,Se,Be,wt,dt],I=U):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u),I!==o?(Re=f,S=co(I),f=S):(m=f,f=u)):(m=f,f=u),f===o&&(f=m,n.substr(m,2)===Ec?(S=Ec,m+=2):(S=o,ae===0&&ge(Jo)),S!==o?(I=m,U=_n(),U!==o?(Y=_n(),Y!==o?(te=_n(),te!==o?(se=_n(),se!==o?(U=[U,Y,te,se],I=U):(m=I,I=u)):(m=I,I=u)):(m=I,I=u)):(m=I,I=u),I!==o?(Re=f,S=co(I),f=S):(m=f,f=u)):(m=f,f=u)),ce[Ht]={nextPos:m,result:f},f)}var WS=[];function OF(f,S,I){var U=new Error(f);throw U.line=S,U.column=I,U}function Yp(f){WS.push(f);}function Er(f,S,I,U,Y){var te={type:f,value:S,line:I(),column:U()};return Y&&(te.key=Y),te}function kF(f,S,I){var U=parseInt("0x"+f);if(!isFinite(U)||Math.floor(U)!=U||U<0||U>1114111||U>55295&&U<57344)OF("Invalid Unicode escape code: "+f,S,I);else return NF(U)}function NF(){var f=16384,S=[],I,U,Y=-1,te=arguments.length;if(!te)return "";for(var se="";++Y<te;){var Se=Number(arguments[Y]);Se<=65535?S.push(Se):(Se-=65536,I=(Se>>10)+55296,U=Se%1024+56320,S.push(I,U)),(Y+1==te||S.length>f)&&(se+=String.fromCharCode.apply(null,S),S.length=0);}return se}if(xc=a(),xc!==o&&m===n.length)return xc;throw xc!==o&&m<n.length&&ge({type:"end",description:"end of input"}),ol(null,Zo,$n)}return {SyntaxError:t,parse:r}}();});var PL=X((Yue,AL)=>{d();p();h();function dH(e){var t=[],r=[],n="",i=Object.create(null),o=i;return a(e);function a(C){for(var R,T=0;T<C.length;T++)switch(R=C[T],R.type){case"Assign":l(R);break;case"ObjectPath":y(R);break;case"ArrayPath":_(R);break}return i}function c(C,R,T){var $=new Error(C);throw $.line=R,$.column=T,$}function l(C){var R=C.key,T=C.value,$=C.line,P=C.column,q;n?q=n+"."+R:q=R,typeof o[R]<"u"&&c("Cannot redefine existing key '"+q+"'.",$,P),o[R]=g(T),u(q)||(t.push(q),r.push(q));}function u(C){return t.indexOf(C)!==-1}function g(C){return C.type==="Array"?D(C.value):C.type==="InlineTable"?w(C.value):C.value}function w(C){for(var R=Object.create(null),T=0;T<C.length;T++){var $=C[T];$.value.type==="InlineTable"?R[$.key]=w($.value.value):$.type==="InlineTableValue"&&(R[$.key]=g($.value));}return R}function y(C){var R=C.value,T=R.map(A).join("."),$=C.line,P=C.column;u(T)&&c("Cannot redefine existing key '"+R+"'.",$,P),t.push(T),o=x(i,R,Object.create(null),$,P),n=R;}function _(C){var R=C.value,T=R.map(A).join("."),$=C.line,P=C.column;if(u(T)||t.push(T),t=t.filter(function(k){return k.indexOf(T)!==0}),t.push(T),o=x(i,R,[],$,P),n=T,o instanceof Array){var q=Object.create(null);o.push(q),o=q;}else c("Cannot redefine existing key '"+R+"'.",$,P);}function x(C,R,T,$,P){for(var q=[],k="",V=R.join("."),K=C,ve=0;ve<R.length;ve++){var fe=R[ve];q.push(fe),k=q.join("."),typeof K[fe]>"u"?ve===R.length-1?K[fe]=T:K[fe]=Object.create(null):ve!==R.length-1&&r.indexOf(k)>-1&&c("Cannot redefine existing key '"+k+"'.",$,P),K=K[fe],K instanceof Array&&K.length&&ve<R.length-1&&(K=K[K.length-1]);}return K}function D(C){for(var R=null,T=0;T<C.length;T++){var $=C[T];R===null?R=$.type:$.type!==R&&c("Cannot add value of type "+$.type+" to array of type "+R+".",$.line,$.column);}return C.map(g)}function A(C){return C.indexOf(".")>-1?'"'+C+'"':C}}AL.exports={compile:dH};});var LL=X((Zue,DL)=>{d();p();h();var hH=IL(),pH=PL();DL.exports={parse:function(e){var t=hH.parse(e.toString());return pH.compile(t)}};});var Uv=X((jle,UL)=>{d();p();h();var jv=class{constructor(t={}){let r=!t.flat&&t.base||1.001,n=t.precision??1e-9;if(!(n>0))throw new Error("precision must be a positive number");if(!(r>1)||!(r<1.5))throw new Error("base must be a number between 1 and 1.5");if(r+=1e-9,r=2**(1/Math.ceil(Math.log(2)/Math.log(r))),r===1)throw new Error("base too close to 1");n=Number.parseFloat(""+n);let i=Math.ceil(1/(r-1)),o=t.flat?1/0:n*i;t.flat?this._flat=!0:this._base=r,this._thresh=o,this._precision=n;}toJSON(){return this._flat?{precision:this._precision,flat:!0}:{precision:this._precision,base:this._base}}getBase(){return this._base}getPrecision(){return this._precision}round(t){if(typeof t!="number"&&(t=Number.parseFloat(t)),Number.isNaN(t))throw new Error("Attempt to round a non-numeric value: "+t);return t<0?-this.round(-t):t<this._thresh?Math.round(t/this._precision)*this._precision:this._thresh*this._base**Math.round(Math.log(t/this._thresh)/Math.log(this._base))}upper(t){return t<0?-this.lower(-t):(t=this.round(t),t<this._thresh?t+this._precision/2:t*Math.sqrt(this._base))}lower(t){return t<0?-this.upper(-t):(t=this.round(t),t<=this._thresh?t-this._precision/2:t/Math.sqrt(this._base))}shorten(t,r){return t===void 0?t:r===void 0?Su(this.lower(t),this.upper(t)):Su(t,r)}};function Su(e,t,r=10){if(e===t)return e;if(e*t<=0)return 0;if(t<0)return -Su(-t,-e,r);if(e>t)return Su(t,e,r);let n=-Math.floor(Math.log(t-e)/Math.log(r));for(;Math.ceil(e*r**n)<=Math.floor(t*r**n);)n--;return n++,n>=0?Math.ceil(e*r**n)/r**n:Math.ceil(e/r**-n)*r**-n}UL.exports={Binning:jv,shorten:Su};});var WL=X((zle,BL)=>{d();p();h();var{Binning:SH}=Uv(),EH="stats-logscale/univariate@1.0",Eu=class e extends SH{constructor(t={}){super(t),this.storage=new Map,this._count=0,this._cache={},this.neat=new xu(this),t.bins&&this.addWeighted(t.bins);}add(...t){return this._cache={},t.forEach(r=>{let n=this.round(r),i=this.storage.get(n)??0;this.storage.set(n,i+1),this._count++;}),this}addWeighted(t){return this._cache={},t.forEach(r=>{let n=r[0],i=Number.parseFloat(r[1]);if(Number.isNaN(i))throw new Error("Attempt to provide a non-numeric weight");let o=this.round(n),s=(this.storage.get(o)??0)+i;s<=0?(this.storage.delete(o),this._count+=i-s):(this.storage.set(o,s),this._count+=i);}),this}toJSON(){return {version:EH,...super.toJSON(),bins:this.getBins()}}clone(t={}){let r=this.getBins(t);return t.transform&&(r=r.map(n=>[t.transform(n[0]),n[1]])),new e({...super.toJSON(),bins:r})}getBins(t){if(this._cache.data||(this._cache.data=[...this.storage].sort((a,c)=>a[0]-c[0])),!t)return this._cache.data;let r=Math.max(t.min??-1/0,this.percentile(t.ltrim??0)),n=Math.min(t.max??1/0,this.percentile(100-(t.rtrim??0)));if(!t.winsorize)return this._cache.data.filter(a=>a[0]>=r&&a[0]<=n);let i=[this.round(r),0],o=[this.round(n),0],s=[i];for(let[a,c]of this._cache.data)a<=i[0]?i[1]+=c:a>=o[0]?o[1]+=c:s.push([a,c]);return o[1]>0&&s.push(o),s}count(){return this._count}min(){let t=this.getBins();return this.lower(t[0][0])}max(){let t=this.getBins();return this.upper(t[t.length-1][0])}sumOf(t){let r=0;return [...this.storage].forEach(n=>{r+=n[1]*t(n[0]);}),r}E(t){return this._count?this.sumOf(t)/this._count:void 0}mean(){return this._count?this.sumOf(t=>t)/this._count:void 0}stdev(){if(this._count<2)return;let t=this.mean();return Math.sqrt(this.sumOf(r=>(r-t)*(r-t))/(this._count-1))}skewness(){let t=this.count();return t<3?void 0:t*t/((t-1)*(t-2))*this.momentStd(3)}kurtosis(){let t=this.count();if(t<4)return;let r=t*t*(t+1)/((t-1)*(t-2)*(t-3)),n=(t-1)*(t-1)/((t-2)*(t-3));return this.momentStd(4)*r-3*n}moment(t,r){if(!Number.isInteger(t))throw new Error("Cannot calculate non-integer moment (did you mean momentAbs?)");return r===void 0&&(r=this.mean()),this.E(n=>(n-r)**t)}momentAbs(t=1,r){return r===void 0&&(r=this.mean()),this.E(n=>Math.abs(n-r)**t)}momentStd(t){return this.moment(t)/this.stdev()**t}quantile(t){let r=t*this._count,n=this._cumulative(),i=0,o=n.length;for(;i+1<o;){let c=Math.floor((o+i)/2);n[c][1]>=r?o=c:i=c;}let s=this.lower(n[i][0]),a=this.upper(n[i][0])-s;return s+a*(r-n[i][1])/(n[i][2]-n[i][1])}percentile(t){return this.quantile(t/100)}median(){return this.quantile(.5)}cdf(t){return this._rawCdf(t)/this._count}_rawCdf(t){let r=this._cumulative(),n=this.round(t),i=0,o=r.length;for(;i<o;){let a=Math.floor((o+i)/2);r[a][0]<n?i=a+1:o=a;}if(i>=r.length)return this._count;let s=i>0?r[i-1][2]:0;if(n===r[i][0]){let a=this.upper(t)-this.lower(t),c=r[i][2]-r[i][1];s+=a>0?c*(t-this.lower(t))/a:c/2;}return s}histogram(t={}){if(!this._count)return [];let r=this.min(),n=this.max(),i=t.count||10,o=[],s=r,a=(n-r)/i;for(let c=0;c<i;c++)o.push([this._rawCdf(s+a),s,s+=a]);for(let c=o.length;c-- >1;)o[c][0]-=o[c-1][0];if(o[0][0]-=this._rawCdf(r),t.scale){let c=0;for(let l=0;l<o.length;l++)c<o[l][0]&&(c=o[l][0]);for(let l=0;l<o.length;l++)o[l][0]=o[l][0]*t.scale/c;}return o}_cumulative(){if(!this._cache.cumulative){let t=this.getBins(),r=[],n=0;for(let i=0;i<t.length;i++)r.push([t[i][0],n,n+=t[i][1]]);this._cache.cumulative=r;}return this._cache.cumulative}};["cdf+","kurtosis","max","mean","min","moment+","momentAbs+","momentStd+","quantile+","skewness","stdev"].forEach(e=>{let t=!!e.match(/\+/);t&&(e=e.replace("+",""));let r=Eu.prototype[e];if(typeof r!="function")throw new Error('method "'+e+'" is cached but never defined');Eu.prototype[e]=t?function(...n){if(this._count===0)return;this._cache[e]===void 0&&(this._cache[e]={});let i=n.join(":");return this._cache[e][i]===void 0&&(this._cache[e][i]=r.apply(this,n)),this._cache[e][i]}:function(){if(this._count!==0)return this._cache[e]===void 0&&(this._cache[e]=r.apply(this)),this._cache[e]};});var xu=class{constructor(t){this._main=t;}min(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[0][0])}max(){if(!this._main._count)return;let t=this._main.getBins();return this._main.shorten(t[t.length-1][0])}};["E","kurtosis","mean","median","moment","momentAbs","momentStd","percentile","quantile","skewness","stdev","sumOf"].forEach(e=>{xu.prototype[e]=function(t){return this._main.shorten(this._main[e](t))};});["cdf","count"].forEach(e=>{xu.prototype[e]=function(t){return this._main[e](t)};});BL.exports={Univariate:Eu};});var zL=X((Yle,Bv)=>{d();p();h();(()=>{let{Binning:e}=Uv(),{Univariate:t}=WL(),r={Binning:e,Univariate:t};typeof window<"u"&&(window.logstat=r),typeof Bv=="object"&&(Bv.exports=r);})();});var GL=X((HL,VL)=>{d();p();h();(function(e){var t;typeof HL=="object"?VL.exports=e():typeof define=="function"&&define.amd?define(e):(typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"&&(t=self),t.objectHash=e());})(function(){return function e(t,r,n){function i(a,c){if(!r[a]){if(!t[a]){var l=typeof Ic=="function"&&Ic;if(!c&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}c=r[a]={exports:{}},t[a][0].call(c.exports,function(u){var g=t[a][1][u];return i(g||u)},c,c.exports,e,t,r,n);}return r[a].exports}for(var o=typeof Ic=="function"&&Ic,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){var w=e("crypto");function y(T,$){$=D(T,$);var P;return (P=$.algorithm!=="passthrough"?w.createHash($.algorithm):new R).write===void 0&&(P.write=P.update,P.end=P.update),C($,P).dispatch(T),P.update||P.end(""),P.digest?P.digest($.encoding==="buffer"?void 0:$.encoding):(T=P.read(),$.encoding!=="buffer"?T.toString($.encoding):T)}(r=t.exports=y).sha1=function(T){return y(T)},r.keys=function(T){return y(T,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(T){return y(T,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(T){return y(T,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var _=w.getHashes?w.getHashes().slice():["sha1","md5"],x=(_.push("passthrough"),["buffer","hex","binary","base64"]);function D(T,$){var P={};if(P.algorithm=($=$||{}).algorithm||"sha1",P.encoding=$.encoding||"hex",P.excludeValues=!!$.excludeValues,P.algorithm=P.algorithm.toLowerCase(),P.encoding=P.encoding.toLowerCase(),P.ignoreUnknown=$.ignoreUnknown===!0,P.respectType=$.respectType!==!1,P.respectFunctionNames=$.respectFunctionNames!==!1,P.respectFunctionProperties=$.respectFunctionProperties!==!1,P.unorderedArrays=$.unorderedArrays===!0,P.unorderedSets=$.unorderedSets!==!1,P.unorderedObjects=$.unorderedObjects!==!1,P.replacer=$.replacer||void 0,P.excludeKeys=$.excludeKeys||void 0,T===void 0)throw new Error("Object argument required.");for(var q=0;q<_.length;++q)_[q].toLowerCase()===P.algorithm.toLowerCase()&&(P.algorithm=_[q]);if(_.indexOf(P.algorithm)===-1)throw new Error('Algorithm "'+P.algorithm+'"  not supported. supported values: '+_.join(", "));if(x.indexOf(P.encoding)===-1&&P.algorithm!=="passthrough")throw new Error('Encoding "'+P.encoding+'"  not supported. supported values: '+x.join(", "));return P}function A(T){if(typeof T=="function")return /^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(T))!=null}function C(T,$,P){P=P||[];function q(k){return $.update?$.update(k,"utf8"):$.write(k,"utf8")}return {dispatch:function(k){return this["_"+((k=T.replacer?T.replacer(k):k)===null?"null":typeof k)](k)},_object:function(k){var V,K=Object.prototype.toString.call(k),ve=/\[object (.*)\]/i.exec(K);if(ve=(ve=ve?ve[1]:"unknown:["+K+"]").toLowerCase(),0<=(K=P.indexOf(k)))return this.dispatch("[CIRCULAR:"+K+"]");if(P.push(k),o!==void 0&&o.isBuffer&&o.isBuffer(k))return q("buffer:"),q(k);if(ve==="object"||ve==="function"||ve==="asyncfunction")return K=Object.keys(k),T.unorderedObjects&&(K=K.sort()),T.respectType===!1||A(k)||K.splice(0,0,"prototype","__proto__","constructor"),T.excludeKeys&&(K=K.filter(function(fe){return !T.excludeKeys(fe)})),q("object:"+K.length+":"),V=this,K.forEach(function(fe){V.dispatch(fe),q(":"),T.excludeValues||V.dispatch(k[fe]),q(",");});if(!this["_"+ve]){if(T.ignoreUnknown)return q("["+ve+"]");throw new Error('Unknown object type "'+ve+'"')}this["_"+ve](k);},_array:function(k,fe){fe=fe!==void 0?fe:T.unorderedArrays!==!1;var K=this;if(q("array:"+k.length+":"),!fe||k.length<=1)return k.forEach(function(be){return K.dispatch(be)});var ve=[],fe=k.map(function(be){var me=new R,je=P.slice();return C(T,me,je).dispatch(be),ve=ve.concat(je.slice(P.length)),me.read().toString()});return P=P.concat(ve),fe.sort(),this._array(fe,!1)},_date:function(k){return q("date:"+k.toJSON())},_symbol:function(k){return q("symbol:"+k.toString())},_error:function(k){return q("error:"+k.toString())},_boolean:function(k){return q("bool:"+k.toString())},_string:function(k){q("string:"+k.length+":"),q(k.toString());},_function:function(k){q("fn:"),A(k)?this.dispatch("[native]"):this.dispatch(k.toString()),T.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(k.name)),T.respectFunctionProperties&&this._object(k);},_number:function(k){return q("number:"+k.toString())},_xml:function(k){return q("xml:"+k.toString())},_null:function(){return q("Null")},_undefined:function(){return q("Undefined")},_regexp:function(k){return q("regex:"+k.toString())},_uint8array:function(k){return q("uint8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint8clampedarray:function(k){return q("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(k))},_int8array:function(k){return q("int8array:"),this.dispatch(Array.prototype.slice.call(k))},_uint16array:function(k){return q("uint16array:"),this.dispatch(Array.prototype.slice.call(k))},_int16array:function(k){return q("int16array:"),this.dispatch(Array.prototype.slice.call(k))},_uint32array:function(k){return q("uint32array:"),this.dispatch(Array.prototype.slice.call(k))},_int32array:function(k){return q("int32array:"),this.dispatch(Array.prototype.slice.call(k))},_float32array:function(k){return q("float32array:"),this.dispatch(Array.prototype.slice.call(k))},_float64array:function(k){return q("float64array:"),this.dispatch(Array.prototype.slice.call(k))},_arraybuffer:function(k){return q("arraybuffer:"),this.dispatch(new Uint8Array(k))},_url:function(k){return q("url:"+k.toString())},_map:function(k){return q("map:"),k=Array.from(k),this._array(k,T.unorderedSets!==!1)},_set:function(k){return q("set:"),k=Array.from(k),this._array(k,T.unorderedSets!==!1)},_file:function(k){return q("file:"),this.dispatch([k.name,k.size,k.type,k.lastModfied])},_blob:function(){if(T.ignoreUnknown)return q("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return q("domwindow")},_bigint:function(k){return q("bigint:"+k.toString())},_process:function(){return q("process")},_timer:function(){return q("timer")},_pipe:function(){return q("pipe")},_tcp:function(){return q("tcp")},_udp:function(){return q("udp")},_tty:function(){return q("tty")},_statwatcher:function(){return q("statwatcher")},_securecontext:function(){return q("securecontext")},_connection:function(){return q("connection")},_zlib:function(){return q("zlib")},_context:function(){return q("context")},_nodescript:function(){return q("nodescript")},_httpparser:function(){return q("httpparser")},_dataview:function(){return q("dataview")},_signal:function(){return q("signal")},_fsevent:function(){return q("fsevent")},_tlswrap:function(){return q("tlswrap")}}}function R(){return {buf:"",write:function(T){this.buf+=T;},end:function(T){this.buf+=T;},read:function(){return this.buf}}}r.writeToStream=function(T,$,P){return P===void 0&&(P=$,$={}),C($=D(T,$),P).dispatch(T)};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/");},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){(function(w){var y=typeof Uint8Array<"u"?Uint8Array:Array,_=43,x=47,D=48,A=97,C=65,R=45,T=95;function $(P){return P=P.charCodeAt(0),P===_||P===R?62:P===x||P===T?63:P<D?-1:P<D+10?P-D+26+26:P<C+26?P-C:P<A+26?P-A+26:void 0}w.toByteArray=function(P){var q,k;if(0<P.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var V=P.length,V=P.charAt(V-2)==="="?2:P.charAt(V-1)==="="?1:0,K=new y(3*P.length/4-V),ve=0<V?P.length-4:P.length,fe=0;function be(me){K[fe++]=me;}for(q=0;q<ve;q+=4,0)be((16711680&(k=$(P.charAt(q))<<18|$(P.charAt(q+1))<<12|$(P.charAt(q+2))<<6|$(P.charAt(q+3))))>>16),be((65280&k)>>8),be(255&k);return V==2?be(255&(k=$(P.charAt(q))<<2|$(P.charAt(q+1))>>4)):V==1&&(be((k=$(P.charAt(q))<<10|$(P.charAt(q+1))<<4|$(P.charAt(q+2))>>2)>>8&255),be(255&k)),K},w.fromByteArray=function(P){var q,k,V,K,ve=P.length%3,fe="";function be(me){return "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(me)}for(q=0,V=P.length-ve;q<V;q+=3)k=(P[q]<<16)+(P[q+1]<<8)+P[q+2],fe+=be((K=k)>>18&63)+be(K>>12&63)+be(K>>6&63)+be(63&K);switch(ve){case 1:fe=(fe+=be((k=P[P.length-1])>>2))+be(k<<4&63)+"==";break;case 2:fe=(fe=(fe+=be((k=(P[P.length-2]<<8)+P[P.length-1])>>10))+be(k>>4&63))+be(k<<2&63)+"=";}return fe};})(r===void 0?this.base64js={}:r);}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib");},{buffer:3,lYpoI2:11}],3:[function(e,t,r){(function(n,i,_,s,a,c,l,u,g){var w=e("base64-js"),y=e("ieee754");function _(F,z,Q){if(!(this instanceof _))return new _(F,z,Q);var de,le,he,Ue,et=typeof F;if(z==="base64"&&et=="string")for(F=(Ue=F).trim?Ue.trim():Ue.replace(/^\s+|\s+$/g,"");F.length%4!=0;)F+="=";if(et=="number")de=pt(F);else if(et=="string")de=_.byteLength(F,z);else {if(et!="object")throw new Error("First argument needs to be a number, array or string.");de=pt(F.length);}if(_._useTypedArrays?le=_._augment(new Uint8Array(de)):((le=this).length=de,le._isBuffer=!0),_._useTypedArrays&&typeof F.byteLength=="number")le._set(F);else if(We(Ue=F)||_.isBuffer(Ue)||Ue&&typeof Ue=="object"&&typeof Ue.length=="number")for(he=0;he<de;he++)_.isBuffer(F)?le[he]=F.readUInt8(he):le[he]=F[he];else if(et=="string")le.write(F,0,z);else if(et=="number"&&!_._useTypedArrays&&!Q)for(he=0;he<de;he++)le[he]=0;return le}function x(F,z,Q,de){return _._charsWritten=lt(function(le){for(var he=[],Ue=0;Ue<le.length;Ue++)he.push(255&le.charCodeAt(Ue));return he}(z),F,Q,de)}function D(F,z,Q,de){return _._charsWritten=lt(function(le){for(var he,Ue,et=[],vt=0;vt<le.length;vt++)Ue=le.charCodeAt(vt),he=Ue>>8,Ue=Ue%256,et.push(Ue),et.push(he);return et}(z),F,Q,de)}function A(F,z,Q){var de="";Q=Math.min(F.length,Q);for(var le=z;le<Q;le++)de+=String.fromCharCode(F[le]);return de}function C(F,z,Q,he){he||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z!=null,"missing offset"),pe(z+1<F.length,"Trying to read beyond buffer length"));var le,he=F.length;if(!(he<=z))return Q?(le=F[z],z+1<he&&(le|=F[z+1]<<8)):(le=F[z]<<8,z+1<he&&(le|=F[z+1])),le}function R(F,z,Q,he){he||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z!=null,"missing offset"),pe(z+3<F.length,"Trying to read beyond buffer length"));var le,he=F.length;if(!(he<=z))return Q?(z+2<he&&(le=F[z+2]<<16),z+1<he&&(le|=F[z+1]<<8),le|=F[z],z+3<he&&(le+=F[z+3]<<24>>>0)):(z+1<he&&(le=F[z+1]<<16),z+2<he&&(le|=F[z+2]<<8),z+3<he&&(le|=F[z+3]),le+=F[z]<<24>>>0),le}function T(F,z,Q,de){if(de||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z!=null,"missing offset"),pe(z+1<F.length,"Trying to read beyond buffer length")),!(F.length<=z))return de=C(F,z,Q,!0),32768&de?-1*(65535-de+1):de}function $(F,z,Q,de){if(de||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z!=null,"missing offset"),pe(z+3<F.length,"Trying to read beyond buffer length")),!(F.length<=z))return de=R(F,z,Q,!0),2147483648&de?-1*(4294967295-de+1):de}function P(F,z,Q,de){return de||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z+3<F.length,"Trying to read beyond buffer length")),y.read(F,z,Q,23,4)}function q(F,z,Q,de){return de||(pe(typeof Q=="boolean","missing or invalid endian"),pe(z+7<F.length,"Trying to read beyond buffer length")),y.read(F,z,Q,52,8)}function k(F,z,Q,de,le){if(le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+1<F.length,"trying to write beyond buffer length"),Jr(z,65535)),le=F.length,!(le<=Q))for(var he=0,Ue=Math.min(le-Q,2);he<Ue;he++)F[Q+he]=(z&255<<8*(de?he:1-he))>>>8*(de?he:1-he);}function V(F,z,Q,de,le){if(le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+3<F.length,"trying to write beyond buffer length"),Jr(z,4294967295)),le=F.length,!(le<=Q))for(var he=0,Ue=Math.min(le-Q,4);he<Ue;he++)F[Q+he]=z>>>8*(de?he:3-he)&255;}function K(F,z,Q,de,le){le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+1<F.length,"Trying to write beyond buffer length"),ir(z,32767,-32768)),F.length<=Q||k(F,0<=z?z:65535+z+1,Q,de,le);}function ve(F,z,Q,de,le){le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+3<F.length,"Trying to write beyond buffer length"),ir(z,2147483647,-2147483648)),F.length<=Q||V(F,0<=z?z:4294967295+z+1,Q,de,le);}function fe(F,z,Q,de,le){le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+3<F.length,"Trying to write beyond buffer length"),Dt(z,34028234663852886e22,-34028234663852886e22)),F.length<=Q||y.write(F,z,Q,de,23,4);}function be(F,z,Q,de,le){le||(pe(z!=null,"missing value"),pe(typeof de=="boolean","missing or invalid endian"),pe(Q!=null,"missing offset"),pe(Q+7<F.length,"Trying to write beyond buffer length"),Dt(z,17976931348623157e292,-17976931348623157e292)),F.length<=Q||y.write(F,z,Q,de,52,8);}r.Buffer=_,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50,_.poolSize=8192,_._useTypedArrays=function(){try{var F=new ArrayBuffer(0),z=new Uint8Array(F);return z.foo=function(){return 42},z.foo()===42&&typeof z.subarray=="function"}catch{return !1}}(),_.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},_.isBuffer=function(F){return !(F==null||!F._isBuffer)},_.byteLength=function(F,z){var Q;switch(F+="",z||"utf8"){case"hex":Q=F.length/2;break;case"utf8":case"utf-8":Q=Rt(F).length;break;case"ascii":case"binary":case"raw":Q=F.length;break;case"base64":Q=Qe(F).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Q=2*F.length;break;default:throw new Error("Unknown encoding")}return Q},_.concat=function(F,z){if(pe(We(F),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),F.length===0)return new _(0);if(F.length===1)return F[0];if(typeof z!="number")for(le=z=0;le<F.length;le++)z+=F[le].length;for(var Q=new _(z),de=0,le=0;le<F.length;le++){var he=F[le];he.copy(Q,de),de+=he.length;}return Q},_.prototype.write=function(F,z,Q,de){isFinite(z)?isFinite(Q)||(de=Q,Q=void 0):(vt=de,de=z,z=Q,Q=vt),z=Number(z)||0;var le,he,Ue,et,vt=this.length-z;switch((!Q||vt<(Q=Number(Q)))&&(Q=vt),de=String(de||"utf8").toLowerCase()){case"hex":le=function(Ft,Et,$t,tt){$t=Number($t)||0;var He=Ft.length-$t;(!tt||He<(tt=Number(tt)))&&(tt=He),pe((He=Et.length)%2==0,"Invalid hex string"),He/2<tt&&(tt=He/2);for(var at=0;at<tt;at++){var an=parseInt(Et.substr(2*at,2),16);pe(!isNaN(an),"Invalid hex string"),Ft[$t+at]=an;}return _._charsWritten=2*at,at}(this,F,z,Q);break;case"utf8":case"utf-8":he=this,Ue=z,et=Q,le=_._charsWritten=lt(Rt(F),he,Ue,et);break;case"ascii":case"binary":le=x(this,F,z,Q);break;case"base64":he=this,Ue=z,et=Q,le=_._charsWritten=lt(Qe(F),he,Ue,et);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":le=D(this,F,z,Q);break;default:throw new Error("Unknown encoding")}return le},_.prototype.toString=function(F,z,Q){var de,le,he,Ue,et=this;if(F=String(F||"utf8").toLowerCase(),z=Number(z)||0,(Q=Q!==void 0?Number(Q):et.length)===z)return "";switch(F){case"hex":de=function(vt,Ft,Et){var $t=vt.length;(!Ft||Ft<0)&&(Ft=0),(!Et||Et<0||$t<Et)&&(Et=$t);for(var tt="",He=Ft;He<Et;He++)tt+=ze(vt[He]);return tt}(et,z,Q);break;case"utf8":case"utf-8":de=function(vt,Ft,Et){var $t="",tt="";Et=Math.min(vt.length,Et);for(var He=Ft;He<Et;He++)vt[He]<=127?($t+=sn(tt)+String.fromCharCode(vt[He]),tt=""):tt+="%"+vt[He].toString(16);return $t+sn(tt)}(et,z,Q);break;case"ascii":case"binary":de=A(et,z,Q);break;case"base64":le=et,Ue=Q,de=(he=z)===0&&Ue===le.length?w.fromByteArray(le):w.fromByteArray(le.slice(he,Ue));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":de=function(vt,Ft,Et){for(var $t=vt.slice(Ft,Et),tt="",He=0;He<$t.length;He+=2)tt+=String.fromCharCode($t[He]+256*$t[He+1]);return tt}(et,z,Q);break;default:throw new Error("Unknown encoding")}return de},_.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},_.prototype.copy=function(F,z,Q,de){if(z=z||0,(de=de||de===0?de:this.length)!==(Q=Q||0)&&F.length!==0&&this.length!==0){pe(Q<=de,"sourceEnd < sourceStart"),pe(0<=z&&z<F.length,"targetStart out of bounds"),pe(0<=Q&&Q<this.length,"sourceStart out of bounds"),pe(0<=de&&de<=this.length,"sourceEnd out of bounds"),de>this.length&&(de=this.length);var le=(de=F.length-z<de-Q?F.length-z+Q:de)-Q;if(le<100||!_._useTypedArrays)for(var he=0;he<le;he++)F[he+z]=this[he+Q];else F._set(this.subarray(Q,Q+le),z);}},_.prototype.slice=function(F,z){var Q=this.length;if(F=je(F,Q,0),z=je(z,Q,Q),_._useTypedArrays)return _._augment(this.subarray(F,z));for(var de=z-F,le=new _(de,void 0,!0),he=0;he<de;he++)le[he]=this[he+F];return le},_.prototype.get=function(F){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(F)},_.prototype.set=function(F,z){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(F,z)},_.prototype.readUInt8=function(F,z){if(z||(pe(F!=null,"missing offset"),pe(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return this[F]},_.prototype.readUInt16LE=function(F,z){return C(this,F,!0,z)},_.prototype.readUInt16BE=function(F,z){return C(this,F,!1,z)},_.prototype.readUInt32LE=function(F,z){return R(this,F,!0,z)},_.prototype.readUInt32BE=function(F,z){return R(this,F,!1,z)},_.prototype.readInt8=function(F,z){if(z||(pe(F!=null,"missing offset"),pe(F<this.length,"Trying to read beyond buffer length")),!(F>=this.length))return 128&this[F]?-1*(255-this[F]+1):this[F]},_.prototype.readInt16LE=function(F,z){return T(this,F,!0,z)},_.prototype.readInt16BE=function(F,z){return T(this,F,!1,z)},_.prototype.readInt32LE=function(F,z){return $(this,F,!0,z)},_.prototype.readInt32BE=function(F,z){return $(this,F,!1,z)},_.prototype.readFloatLE=function(F,z){return P(this,F,!0,z)},_.prototype.readFloatBE=function(F,z){return P(this,F,!1,z)},_.prototype.readDoubleLE=function(F,z){return q(this,F,!0,z)},_.prototype.readDoubleBE=function(F,z){return q(this,F,!1,z)},_.prototype.writeUInt8=function(F,z,Q){Q||(pe(F!=null,"missing value"),pe(z!=null,"missing offset"),pe(z<this.length,"trying to write beyond buffer length"),Jr(F,255)),z>=this.length||(this[z]=F);},_.prototype.writeUInt16LE=function(F,z,Q){k(this,F,z,!0,Q);},_.prototype.writeUInt16BE=function(F,z,Q){k(this,F,z,!1,Q);},_.prototype.writeUInt32LE=function(F,z,Q){V(this,F,z,!0,Q);},_.prototype.writeUInt32BE=function(F,z,Q){V(this,F,z,!1,Q);},_.prototype.writeInt8=function(F,z,Q){Q||(pe(F!=null,"missing value"),pe(z!=null,"missing offset"),pe(z<this.length,"Trying to write beyond buffer length"),ir(F,127,-128)),z>=this.length||(0<=F?this.writeUInt8(F,z,Q):this.writeUInt8(255+F+1,z,Q));},_.prototype.writeInt16LE=function(F,z,Q){K(this,F,z,!0,Q);},_.prototype.writeInt16BE=function(F,z,Q){K(this,F,z,!1,Q);},_.prototype.writeInt32LE=function(F,z,Q){ve(this,F,z,!0,Q);},_.prototype.writeInt32BE=function(F,z,Q){ve(this,F,z,!1,Q);},_.prototype.writeFloatLE=function(F,z,Q){fe(this,F,z,!0,Q);},_.prototype.writeFloatBE=function(F,z,Q){fe(this,F,z,!1,Q);},_.prototype.writeDoubleLE=function(F,z,Q){be(this,F,z,!0,Q);},_.prototype.writeDoubleBE=function(F,z,Q){be(this,F,z,!1,Q);},_.prototype.fill=function(F,z,Q){if(z=z||0,Q=Q||this.length,pe(typeof(F=typeof(F=F||0)=="string"?F.charCodeAt(0):F)=="number"&&!isNaN(F),"value is not a number"),pe(z<=Q,"end < start"),Q!==z&&this.length!==0){pe(0<=z&&z<this.length,"start out of bounds"),pe(0<=Q&&Q<=this.length,"end out of bounds");for(var de=z;de<Q;de++)this[de]=F;}},_.prototype.inspect=function(){for(var F=[],z=this.length,Q=0;Q<z;Q++)if(F[Q]=ze(this[Q]),Q===r.INSPECT_MAX_BYTES){F[Q+1]="...";break}return "<Buffer "+F.join(" ")+">"},_.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(_._useTypedArrays)return new _(this).buffer;for(var F=new Uint8Array(this.length),z=0,Q=F.length;z<Q;z+=1)F[z]=this[z];return F.buffer};var me=_.prototype;function je(F,z,Q){return typeof F!="number"?Q:z<=(F=~~F)?z:0<=F||0<=(F+=z)?F:0}function pt(F){return (F=~~Math.ceil(+F))<0?0:F}function We(F){return (Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"})(F)}function ze(F){return F<16?"0"+F.toString(16):F.toString(16)}function Rt(F){for(var z=[],Q=0;Q<F.length;Q++){var de=F.charCodeAt(Q);if(de<=127)z.push(F.charCodeAt(Q));else for(var le=Q,he=(55296<=de&&de<=57343&&Q++,encodeURIComponent(F.slice(le,Q+1)).substr(1).split("%")),Ue=0;Ue<he.length;Ue++)z.push(parseInt(he[Ue],16));}return z}function Qe(F){return w.toByteArray(F)}function lt(F,z,Q,de){for(var le=0;le<de&&!(le+Q>=z.length||le>=F.length);le++)z[le+Q]=F[le];return le}function sn(F){try{return decodeURIComponent(F)}catch{return "\uFFFD"}}function Jr(F,z){pe(typeof F=="number","cannot write a non-number as a number"),pe(0<=F,"specified a negative value for writing an unsigned value"),pe(F<=z,"value is larger than maximum value for type"),pe(Math.floor(F)===F,"value has a fractional component");}function ir(F,z,Q){pe(typeof F=="number","cannot write a non-number as a number"),pe(F<=z,"value larger than maximum allowed value"),pe(Q<=F,"value smaller than minimum allowed value"),pe(Math.floor(F)===F,"value has a fractional component");}function Dt(F,z,Q){pe(typeof F=="number","cannot write a non-number as a number"),pe(F<=z,"value larger than maximum allowed value"),pe(Q<=F,"value smaller than minimum allowed value");}function pe(F,z){if(!F)throw new Error(z||"Failed assertion")}_._augment=function(F){return F._isBuffer=!0,F._get=F.get,F._set=F.set,F.get=me.get,F.set=me.set,F.write=me.write,F.toString=me.toString,F.toLocaleString=me.toString,F.toJSON=me.toJSON,F.copy=me.copy,F.slice=me.slice,F.readUInt8=me.readUInt8,F.readUInt16LE=me.readUInt16LE,F.readUInt16BE=me.readUInt16BE,F.readUInt32LE=me.readUInt32LE,F.readUInt32BE=me.readUInt32BE,F.readInt8=me.readInt8,F.readInt16LE=me.readInt16LE,F.readInt16BE=me.readInt16BE,F.readInt32LE=me.readInt32LE,F.readInt32BE=me.readInt32BE,F.readFloatLE=me.readFloatLE,F.readFloatBE=me.readFloatBE,F.readDoubleLE=me.readDoubleLE,F.readDoubleBE=me.readDoubleBE,F.writeUInt8=me.writeUInt8,F.writeUInt16LE=me.writeUInt16LE,F.writeUInt16BE=me.writeUInt16BE,F.writeUInt32LE=me.writeUInt32LE,F.writeUInt32BE=me.writeUInt32BE,F.writeInt8=me.writeInt8,F.writeInt16LE=me.writeInt16LE,F.writeInt16BE=me.writeInt16BE,F.writeInt32LE=me.writeInt32LE,F.writeInt32BE=me.writeInt32BE,F.writeFloatLE=me.writeFloatLE,F.writeFloatBE=me.writeFloatBE,F.writeDoubleLE=me.writeDoubleLE,F.writeDoubleBE=me.writeDoubleBE,F.fill=me.fill,F.inspect=me.inspect,F.toArrayBuffer=me.toArrayBuffer,F};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer");},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,r){(function(n,i,w,s,a,c,l,u,g){var w=e("buffer").Buffer,y=4,_=new w(y);_.fill(0),t.exports={hash:function(x,D,A,C){for(var R=D(function(k,V){k.length%y!=0&&(K=k.length+(y-k.length%y),k=w.concat([k,_],K));for(var K,ve=[],fe=V?k.readInt32BE:k.readInt32LE,be=0;be<k.length;be+=y)ve.push(fe.call(k,be));return ve}(x=w.isBuffer(x)?x:new w(x),C),8*x.length),D=C,T=new w(A),$=D?T.writeInt32BE:T.writeInt32LE,P=0;P<R.length;P++)$.call(T,R[P],4*P,!0);return T}};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{buffer:3,lYpoI2:11}],5:[function(e,t,r){(function(n,i,w,s,a,c,l,u,g){var w=e("buffer").Buffer,y=e("./sha"),_=e("./sha256"),x=e("./rng"),D={sha1:y,sha256:_,md5:e("./md5")},A=64,C=new w(A);function R(k,V){var K=D[k=k||"sha1"],ve=[];return K||T("algorithm:",k,"is not yet supported"),{update:function(fe){return w.isBuffer(fe)||(fe=new w(fe)),ve.push(fe),this},digest:function(fe){var be=w.concat(ve),be=V?function(me,je,pt){w.isBuffer(je)||(je=new w(je)),w.isBuffer(pt)||(pt=new w(pt)),je.length>A?je=me(je):je.length<A&&(je=w.concat([je,C],A));for(var We=new w(A),ze=new w(A),Rt=0;Rt<A;Rt++)We[Rt]=54^je[Rt],ze[Rt]=92^je[Rt];return pt=me(w.concat([We,pt])),me(w.concat([ze,pt]))}(K,V,be):K(be);return ve=null,fe?be.toString(fe):be}}}function T(){var k=[].slice.call(arguments).join(" ");throw new Error([k,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}C.fill(0),r.createHash=function(k){return R(k)},r.createHmac=R,r.randomBytes=function(k,V){if(!V||!V.call)return new w(x(k));try{V.call(this,void 0,new w(x(k)));}catch(K){V(K);}};var $,P=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],q=function(k){r[k]=function(){T("sorry,",k,"is not implemented yet");};};for($ in P)q(P[$]);}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){var w=e("./helpers");function y(T,$){T[$>>5]|=128<<$%32,T[14+($+64>>>9<<4)]=$;for(var P=1732584193,q=-271733879,k=-1732584194,V=271733878,K=0;K<T.length;K+=16){var ve=P,fe=q,be=k,me=V,P=x(P,q,k,V,T[K+0],7,-680876936),V=x(V,P,q,k,T[K+1],12,-389564586),k=x(k,V,P,q,T[K+2],17,606105819),q=x(q,k,V,P,T[K+3],22,-1044525330);P=x(P,q,k,V,T[K+4],7,-176418897),V=x(V,P,q,k,T[K+5],12,1200080426),k=x(k,V,P,q,T[K+6],17,-1473231341),q=x(q,k,V,P,T[K+7],22,-45705983),P=x(P,q,k,V,T[K+8],7,1770035416),V=x(V,P,q,k,T[K+9],12,-1958414417),k=x(k,V,P,q,T[K+10],17,-42063),q=x(q,k,V,P,T[K+11],22,-1990404162),P=x(P,q,k,V,T[K+12],7,1804603682),V=x(V,P,q,k,T[K+13],12,-40341101),k=x(k,V,P,q,T[K+14],17,-1502002290),P=D(P,q=x(q,k,V,P,T[K+15],22,1236535329),k,V,T[K+1],5,-165796510),V=D(V,P,q,k,T[K+6],9,-1069501632),k=D(k,V,P,q,T[K+11],14,643717713),q=D(q,k,V,P,T[K+0],20,-373897302),P=D(P,q,k,V,T[K+5],5,-701558691),V=D(V,P,q,k,T[K+10],9,38016083),k=D(k,V,P,q,T[K+15],14,-660478335),q=D(q,k,V,P,T[K+4],20,-405537848),P=D(P,q,k,V,T[K+9],5,568446438),V=D(V,P,q,k,T[K+14],9,-1019803690),k=D(k,V,P,q,T[K+3],14,-187363961),q=D(q,k,V,P,T[K+8],20,1163531501),P=D(P,q,k,V,T[K+13],5,-1444681467),V=D(V,P,q,k,T[K+2],9,-51403784),k=D(k,V,P,q,T[K+7],14,1735328473),P=A(P,q=D(q,k,V,P,T[K+12],20,-1926607734),k,V,T[K+5],4,-378558),V=A(V,P,q,k,T[K+8],11,-2022574463),k=A(k,V,P,q,T[K+11],16,1839030562),q=A(q,k,V,P,T[K+14],23,-35309556),P=A(P,q,k,V,T[K+1],4,-1530992060),V=A(V,P,q,k,T[K+4],11,1272893353),k=A(k,V,P,q,T[K+7],16,-155497632),q=A(q,k,V,P,T[K+10],23,-1094730640),P=A(P,q,k,V,T[K+13],4,681279174),V=A(V,P,q,k,T[K+0],11,-358537222),k=A(k,V,P,q,T[K+3],16,-722521979),q=A(q,k,V,P,T[K+6],23,76029189),P=A(P,q,k,V,T[K+9],4,-640364487),V=A(V,P,q,k,T[K+12],11,-421815835),k=A(k,V,P,q,T[K+15],16,530742520),P=C(P,q=A(q,k,V,P,T[K+2],23,-995338651),k,V,T[K+0],6,-198630844),V=C(V,P,q,k,T[K+7],10,1126891415),k=C(k,V,P,q,T[K+14],15,-1416354905),q=C(q,k,V,P,T[K+5],21,-57434055),P=C(P,q,k,V,T[K+12],6,1700485571),V=C(V,P,q,k,T[K+3],10,-1894986606),k=C(k,V,P,q,T[K+10],15,-1051523),q=C(q,k,V,P,T[K+1],21,-2054922799),P=C(P,q,k,V,T[K+8],6,1873313359),V=C(V,P,q,k,T[K+15],10,-30611744),k=C(k,V,P,q,T[K+6],15,-1560198380),q=C(q,k,V,P,T[K+13],21,1309151649),P=C(P,q,k,V,T[K+4],6,-145523070),V=C(V,P,q,k,T[K+11],10,-1120210379),k=C(k,V,P,q,T[K+2],15,718787259),q=C(q,k,V,P,T[K+9],21,-343485551),P=R(P,ve),q=R(q,fe),k=R(k,be),V=R(V,me);}return Array(P,q,k,V)}function _(T,$,P,q,k,V){return R(($=R(R($,T),R(q,V)))<<k|$>>>32-k,P)}function x(T,$,P,q,k,V,K){return _($&P|~$&q,T,$,k,V,K)}function D(T,$,P,q,k,V,K){return _($&q|P&~q,T,$,k,V,K)}function A(T,$,P,q,k,V,K){return _($^P^q,T,$,k,V,K)}function C(T,$,P,q,k,V,K){return _(P^($|~q),T,$,k,V,K)}function R(T,$){var P=(65535&T)+(65535&$);return (T>>16)+($>>16)+(P>>16)<<16|65535&P}t.exports=function(T){return w.hash(T,y,16)};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){t.exports=function(y){for(var _,x=new Array(y),D=0;D<y;D++)!(3&D)&&(_=4294967296*Math.random()),x[D]=_>>>((3&D)<<3)&255;return x};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{buffer:3,lYpoI2:11}],8:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){var w=e("./helpers");function y(D,A){D[A>>5]|=128<<24-A%32,D[15+(A+64>>9<<4)]=A;for(var C,R,T,$=Array(80),P=1732584193,q=-271733879,k=-1732584194,V=271733878,K=-1009589776,ve=0;ve<D.length;ve+=16){for(var fe=P,be=q,me=k,je=V,pt=K,We=0;We<80;We++){$[We]=We<16?D[ve+We]:x($[We-3]^$[We-8]^$[We-14]^$[We-16],1);var ze=_(_(x(P,5),(ze=q,R=k,T=V,(C=We)<20?ze&R|~ze&T:!(C<40)&&C<60?ze&R|ze&T|R&T:ze^R^T)),_(_(K,$[We]),(C=We)<20?1518500249:C<40?1859775393:C<60?-1894007588:-899497514)),K=V,V=k,k=x(q,30),q=P,P=ze;}P=_(P,fe),q=_(q,be),k=_(k,me),V=_(V,je),K=_(K,pt);}return Array(P,q,k,V,K)}function _(D,A){var C=(65535&D)+(65535&A);return (D>>16)+(A>>16)+(C>>16)<<16|65535&C}function x(D,A){return D<<A|D>>>32-A}t.exports=function(D){return w.hash(D,y,20,!0)};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){function w(A,C){var R=(65535&A)+(65535&C);return (A>>16)+(C>>16)+(R>>16)<<16|65535&R}function y(A,C){var R,T=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),$=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),P=new Array(64);A[C>>5]|=128<<24-C%32,A[15+(C+64>>9<<4)]=C;for(var q,k,V=0;V<A.length;V+=16){for(var K=$[0],ve=$[1],fe=$[2],be=$[3],me=$[4],je=$[5],pt=$[6],We=$[7],ze=0;ze<64;ze++)P[ze]=ze<16?A[ze+V]:w(w(w((k=P[ze-2],x(k,17)^x(k,19)^D(k,10)),P[ze-7]),(k=P[ze-15],x(k,7)^x(k,18)^D(k,3))),P[ze-16]),R=w(w(w(w(We,x(k=me,6)^x(k,11)^x(k,25)),me&je^~me&pt),T[ze]),P[ze]),q=w(x(q=K,2)^x(q,13)^x(q,22),K&ve^K&fe^ve&fe),We=pt,pt=je,je=me,me=w(be,R),be=fe,fe=ve,ve=K,K=w(R,q);$[0]=w(K,$[0]),$[1]=w(ve,$[1]),$[2]=w(fe,$[2]),$[3]=w(be,$[3]),$[4]=w(me,$[4]),$[5]=w(je,$[5]),$[6]=w(pt,$[6]),$[7]=w(We,$[7]);}return $}var _=e("./helpers"),x=function(A,C){return A>>>C|A<<32-C},D=function(A,C){return A>>>C};t.exports=function(A){return _.hash(A,y,32,!0)};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify");},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){r.read=function(w,y,_,x,V){var A,C,R=8*V-x-1,T=(1<<R)-1,$=T>>1,P=-7,q=_?V-1:0,k=_?-1:1,V=w[y+q];for(q+=k,A=V&(1<<-P)-1,V>>=-P,P+=R;0<P;A=256*A+w[y+q],q+=k,P-=8);for(C=A&(1<<-P)-1,A>>=-P,P+=x;0<P;C=256*C+w[y+q],q+=k,P-=8);if(A===0)A=1-$;else {if(A===T)return C?NaN:1/0*(V?-1:1);C+=Math.pow(2,x),A-=$;}return (V?-1:1)*C*Math.pow(2,A-x)},r.write=function(w,y,_,x,D,K){var C,R,T=8*K-D-1,$=(1<<T)-1,P=$>>1,q=D===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=x?0:K-1,V=x?1:-1,K=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(R=isNaN(y)?1:0,C=$):(C=Math.floor(Math.log(y)/Math.LN2),y*(x=Math.pow(2,-C))<1&&(C--,x*=2),2<=(y+=1<=C+P?q/x:q*Math.pow(2,1-P))*x&&(C++,x/=2),$<=C+P?(R=0,C=$):1<=C+P?(R=(y*x-1)*Math.pow(2,D),C+=P):(R=y*Math.pow(2,P-1)*Math.pow(2,D),C=0));8<=D;w[_+k]=255&R,k+=V,R/=256,D-=8);for(C=C<<D|R,T+=D;0<T;w[_+k]=255&C,k+=V,C/=256,T-=8);w[_+k-V]|=128*K;};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754");},{buffer:3,lYpoI2:11}],11:[function(e,t,r){(function(n,i,o,s,a,c,l,u,g){var w,y,_;function x(){}(n=t.exports={}).nextTick=(y=typeof window<"u"&&window.setImmediate,_=typeof window<"u"&&window.postMessage&&window.addEventListener,y?function(D){return window.setImmediate(D)}:_?(w=[],window.addEventListener("message",function(D){var A=D.source;A!==window&&A!==null||D.data!=="process-tick"||(D.stopPropagation(),0<w.length&&w.shift()());},!0),function(D){w.push(D),window.postMessage("process-tick","*");}):function(D){setTimeout(D,0);}),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.binding=function(D){throw new Error("process.binding is not supported")},n.cwd=function(){return "/"},n.chdir=function(D){throw new Error("process.chdir is not supported")};}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process");},{buffer:3,lYpoI2:11}]},{},[1])(1)});});var Jv=X((Cd,hO)=>{d();p();h();(function(e,t){typeof Cd=="object"&&typeof hO<"u"?t(Cd):typeof define=="function"&&define.amd?define(["exports"],t):t(e.URI=e.URI||{});})(Cd,function(e){function t(){for(var J=arguments.length,B=Array(J),Z=0;Z<J;Z++)B[Z]=arguments[Z];if(B.length>1){B[0]=B[0].slice(0,-1);for(var ne=B.length-1,ie=1;ie<ne;++ie)B[ie]=B[ie].slice(1,-1);return B[ne]=B[ne].slice(1),B.join("")}else return B[0]}function r(J){return "(?:"+J+")"}function n(J){return J===void 0?"undefined":J===null?"null":Object.prototype.toString.call(J).split(" ").pop().split("]").shift().toLowerCase()}function i(J){return J.toUpperCase()}function o(J){return J!=null?J instanceof Array?J:typeof J.length!="number"||J.split||J.setInterval||J.call?[J]:Array.prototype.slice.call(J):[]}function s(J,B){var Z=J;if(B)for(var ne in B)Z[ne]=B[ne];return Z}function a(J){var B="[A-Za-z]",ne="[0-9]",Ee=t(ne,"[A-Fa-f]"),ft=r(r("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+r("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+r("%"+Ee+Ee)),Xt="[\\:\\/\\?\\#\\[\\]\\@]",rt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Lt=t(Xt,rt),Jt=J?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",It=J?"[\\uE000-\\uF8FF]":"[]",st=t(B,ne,"[\\-\\.\\_\\~]",Jt);r(B+t(B,ne,"[\\+\\-\\.]")+"*");r(r(ft+"|"+t(st,rt,"[\\:]"))+"*");var Br=r(r("25[0-5]")+"|"+r("2[0-4]"+ne)+"|"+r("1"+ne+ne)+"|"+r("0?[1-9]"+ne)+"|0?0?"+ne),Wr=r(Br+"\\."+Br+"\\."+Br+"\\."+Br),bt=r(Ee+"{1,4}"),zr=r(r(bt+"\\:"+bt)+"|"+Wr),Hr=r(r(bt+"\\:")+"{6}"+zr),wn=r("\\:\\:"+r(bt+"\\:")+"{5}"+zr),Pi=r(r(bt)+"?\\:\\:"+r(bt+"\\:")+"{4}"+zr),Sn=r(r(r(bt+"\\:")+"{0,1}"+bt)+"?\\:\\:"+r(bt+"\\:")+"{3}"+zr),Go=r(r(r(bt+"\\:")+"{0,2}"+bt)+"?\\:\\:"+r(bt+"\\:")+"{2}"+zr),$s=r(r(r(bt+"\\:")+"{0,3}"+bt)+"?\\:\\:"+bt+"\\:"+zr),Yo=r(r(r(bt+"\\:")+"{0,4}"+bt)+"?\\:\\:"+zr),oo=r(r(r(bt+"\\:")+"{0,5}"+bt)+"?\\:\\:"+bt),so=r(r(r(bt+"\\:")+"{0,6}"+bt)+"?\\:\\:"),En=r([Hr,wn,Pi,Sn,Go,$s,Yo,oo,so].join("|")),ao=r(r(st+"|"+ft)+"+");r("[vV]"+Ee+"+\\."+t(st,rt,"[\\:]")+"+");r(r(ft+"|"+t(st,rt))+"*");var Jo=r(ft+"|"+t(st,rt,"[\\:\\@]"));r(r(ft+"|"+t(st,rt,"[\\@]"))+"+");r(r(Jo+"|"+t("[\\/\\?]",It))+"*");return {NOT_SCHEME:new RegExp(t("[^]",B,ne,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",st,rt),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",st,rt),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",st,rt),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",st,rt),"g"),NOT_QUERY:new RegExp(t("[^\\%]",st,rt,"[\\:\\@\\/\\?]",It),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",st,rt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",st,rt),"g"),UNRESERVED:new RegExp(st,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",st,Lt),"g"),PCT_ENCODED:new RegExp(ft,"g"),IPV4ADDRESS:new RegExp("^("+Wr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+En+")"+r(r("\\%25|\\%(?!"+Ee+"{2})")+"("+ao+")")+"?\\]?$")}}var c=a(!1),l=a(!0),u=function(){function J(B,Z){var ne=[],ie=!0,Ee=!1,Ge=void 0;try{for(var ot=B[Symbol.iterator](),ft;!(ie=(ft=ot.next()).done)&&(ne.push(ft.value),!(Z&&ne.length===Z));ie=!0);}catch(Xt){Ee=!0,Ge=Xt;}finally{try{!ie&&ot.return&&ot.return();}finally{if(Ee)throw Ge}}return ne}return function(B,Z){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return J(B,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(J){if(Array.isArray(J)){for(var B=0,Z=Array(J.length);B<J.length;B++)Z[B]=J[B];return Z}else return Array.from(J)},w=2147483647,y=36,_=1,x=26,D=38,A=700,C=72,R=128,T="-",$=/^xn--/,P=/[^\0-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=y-_,K=Math.floor,ve=String.fromCharCode;function fe(J){throw new RangeError(k[J])}function be(J,B){for(var Z=[],ne=J.length;ne--;)Z[ne]=B(J[ne]);return Z}function me(J,B){var Z=J.split("@"),ne="";Z.length>1&&(ne=Z[0]+"@",J=Z[1]),J=J.replace(q,".");var ie=J.split("."),Ee=be(ie,B).join(".");return ne+Ee}function je(J){for(var B=[],Z=0,ne=J.length;Z<ne;){var ie=J.charCodeAt(Z++);if(ie>=55296&&ie<=56319&&Z<ne){var Ee=J.charCodeAt(Z++);(Ee&64512)==56320?B.push(((ie&1023)<<10)+(Ee&1023)+65536):(B.push(ie),Z--);}else B.push(ie);}return B}var pt=function(B){return String.fromCodePoint.apply(String,g(B))},We=function(B){return B-48<10?B-22:B-65<26?B-65:B-97<26?B-97:y},ze=function(B,Z){return B+22+75*(B<26)-((Z!=0)<<5)},Rt=function(B,Z,ne){var ie=0;for(B=ne?K(B/A):B>>1,B+=K(B/Z);B>V*x>>1;ie+=y)B=K(B/V);return K(ie+(V+1)*B/(B+D))},Qe=function(B){var Z=[],ne=B.length,ie=0,Ee=R,Ge=C,ot=B.lastIndexOf(T);ot<0&&(ot=0);for(var ft=0;ft<ot;++ft)B.charCodeAt(ft)>=128&&fe("not-basic"),Z.push(B.charCodeAt(ft));for(var Xt=ot>0?ot+1:0;Xt<ne;){for(var rt=ie,Lt=1,Jt=y;;Jt+=y){Xt>=ne&&fe("invalid-input");var It=We(B.charCodeAt(Xt++));(It>=y||It>K((w-ie)/Lt))&&fe("overflow"),ie+=It*Lt;var st=Jt<=Ge?_:Jt>=Ge+x?x:Jt-Ge;if(It<st)break;var Ot=y-st;Lt>K(w/Ot)&&fe("overflow"),Lt*=Ot;}var gt=Z.length+1;Ge=Rt(ie-rt,gt,rt==0),K(ie/gt)>w-Ee&&fe("overflow"),Ee+=K(ie/gt),ie%=gt,Z.splice(ie++,0,Ee);}return String.fromCodePoint.apply(String,Z)},lt=function(B){var Z=[];B=je(B);var ne=B.length,ie=R,Ee=0,Ge=C,ot=!0,ft=!1,Xt=void 0;try{for(var rt=B[Symbol.iterator](),Lt;!(ot=(Lt=rt.next()).done);ot=!0){var Jt=Lt.value;Jt<128&&Z.push(ve(Jt));}}catch(ri){ft=!0,Xt=ri;}finally{try{!ot&&rt.return&&rt.return();}finally{if(ft)throw Xt}}var It=Z.length,st=It;for(It&&Z.push(T);st<ne;){var Ot=w,gt=!0,Ai=!1,Br=void 0;try{for(var Wr=B[Symbol.iterator](),bt;!(gt=(bt=Wr.next()).done);gt=!0){var zr=bt.value;zr>=ie&&zr<Ot&&(Ot=zr);}}catch(ri){Ai=!0,Br=ri;}finally{try{!gt&&Wr.return&&Wr.return();}finally{if(Ai)throw Br}}var Hr=st+1;Ot-ie>K((w-Ee)/Hr)&&fe("overflow"),Ee+=(Ot-ie)*Hr,ie=Ot;var wn=!0,Pi=!1,Sn=void 0;try{for(var Go=B[Symbol.iterator](),$s;!(wn=($s=Go.next()).done);wn=!0){var Yo=$s.value;if(Yo<ie&&++Ee>w&&fe("overflow"),Yo==ie){for(var oo=Ee,so=y;;so+=y){var En=so<=Ge?_:so>=Ge+x?x:so-Ge;if(oo<En)break;var ao=oo-En,wc=y-En;Z.push(ve(ze(En+ao%wc,0))),oo=K(ao/wc);}Z.push(ve(ze(oo,0))),Ge=Rt(Ee,Hr,st==It),Ee=0,++st;}}}catch(ri){Pi=!0,Sn=ri;}finally{try{!wn&&Go.return&&Go.return();}finally{if(Pi)throw Sn}}++Ee,++ie;}return Z.join("")},sn=function(B){return me(B,function(Z){return $.test(Z)?Qe(Z.slice(4).toLowerCase()):Z})},Jr=function(B){return me(B,function(Z){return P.test(Z)?"xn--"+lt(Z):Z})},ir={version:"2.1.0",ucs2:{decode:je,encode:pt},decode:Qe,encode:lt,toASCII:Jr,toUnicode:sn},Dt={};function pe(J){var B=J.charCodeAt(0),Z=void 0;return B<16?Z="%0"+B.toString(16).toUpperCase():B<128?Z="%"+B.toString(16).toUpperCase():B<2048?Z="%"+(B>>6|192).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase():Z="%"+(B>>12|224).toString(16).toUpperCase()+"%"+(B>>6&63|128).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase(),Z}function F(J){for(var B="",Z=0,ne=J.length;Z<ne;){var ie=parseInt(J.substr(Z+1,2),16);if(ie<128)B+=String.fromCharCode(ie),Z+=3;else if(ie>=194&&ie<224){if(ne-Z>=6){var Ee=parseInt(J.substr(Z+4,2),16);B+=String.fromCharCode((ie&31)<<6|Ee&63);}else B+=J.substr(Z,6);Z+=6;}else if(ie>=224){if(ne-Z>=9){var Ge=parseInt(J.substr(Z+4,2),16),ot=parseInt(J.substr(Z+7,2),16);B+=String.fromCharCode((ie&15)<<12|(Ge&63)<<6|ot&63);}else B+=J.substr(Z,9);Z+=9;}else B+=J.substr(Z,3),Z+=3;}return B}function z(J,B){function Z(ne){var ie=F(ne);return ie.match(B.UNRESERVED)?ie:ne}return J.scheme&&(J.scheme=String(J.scheme).replace(B.PCT_ENCODED,Z).toLowerCase().replace(B.NOT_SCHEME,"")),J.userinfo!==void 0&&(J.userinfo=String(J.userinfo).replace(B.PCT_ENCODED,Z).replace(B.NOT_USERINFO,pe).replace(B.PCT_ENCODED,i)),J.host!==void 0&&(J.host=String(J.host).replace(B.PCT_ENCODED,Z).toLowerCase().replace(B.NOT_HOST,pe).replace(B.PCT_ENCODED,i)),J.path!==void 0&&(J.path=String(J.path).replace(B.PCT_ENCODED,Z).replace(J.scheme?B.NOT_PATH:B.NOT_PATH_NOSCHEME,pe).replace(B.PCT_ENCODED,i)),J.query!==void 0&&(J.query=String(J.query).replace(B.PCT_ENCODED,Z).replace(B.NOT_QUERY,pe).replace(B.PCT_ENCODED,i)),J.fragment!==void 0&&(J.fragment=String(J.fragment).replace(B.PCT_ENCODED,Z).replace(B.NOT_FRAGMENT,pe).replace(B.PCT_ENCODED,i)),J}function Q(J){return J.replace(/^0*(.*)/,"$1")||"0"}function de(J,B){var Z=J.match(B.IPV4ADDRESS)||[],ne=u(Z,2),ie=ne[1];return ie?ie.split(".").map(Q).join("."):J}function le(J,B){var Z=J.match(B.IPV6ADDRESS)||[],ne=u(Z,3),ie=ne[1],Ee=ne[2];if(ie){for(var Ge=ie.toLowerCase().split("::").reverse(),ot=u(Ge,2),ft=ot[0],Xt=ot[1],rt=Xt?Xt.split(":").map(Q):[],Lt=ft.split(":").map(Q),Jt=B.IPV4ADDRESS.test(Lt[Lt.length-1]),It=Jt?7:8,st=Lt.length-It,Ot=Array(It),gt=0;gt<It;++gt)Ot[gt]=rt[gt]||Lt[st+gt]||"";Jt&&(Ot[It-1]=de(Ot[It-1],B));var Ai=Ot.reduce(function(Hr,wn,Pi){if(!wn||wn==="0"){var Sn=Hr[Hr.length-1];Sn&&Sn.index+Sn.length===Pi?Sn.length++:Hr.push({index:Pi,length:1});}return Hr},[]),Br=Ai.sort(function(Hr,wn){return wn.length-Hr.length})[0],Wr=void 0;if(Br&&Br.length>1){var bt=Ot.slice(0,Br.index),zr=Ot.slice(Br.index+Br.length);Wr=bt.join(":")+"::"+zr.join(":");}else Wr=Ot.join(":");return Ee&&(Wr+="%"+Ee),Wr}else return J}var he=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ue="".match(/(){0}/)[1]===void 0;function et(J){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z={},ne=B.iri!==!1?l:c;B.reference==="suffix"&&(J=(B.scheme?B.scheme+":":"")+"//"+J);var ie=J.match(he);if(ie){Ue?(Z.scheme=ie[1],Z.userinfo=ie[3],Z.host=ie[4],Z.port=parseInt(ie[5],10),Z.path=ie[6]||"",Z.query=ie[7],Z.fragment=ie[8],isNaN(Z.port)&&(Z.port=ie[5])):(Z.scheme=ie[1]||void 0,Z.userinfo=J.indexOf("@")!==-1?ie[3]:void 0,Z.host=J.indexOf("//")!==-1?ie[4]:void 0,Z.port=parseInt(ie[5],10),Z.path=ie[6]||"",Z.query=J.indexOf("?")!==-1?ie[7]:void 0,Z.fragment=J.indexOf("#")!==-1?ie[8]:void 0,isNaN(Z.port)&&(Z.port=J.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ie[4]:void 0)),Z.host&&(Z.host=le(de(Z.host,ne),ne)),Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&!Z.path&&Z.query===void 0?Z.reference="same-document":Z.scheme===void 0?Z.reference="relative":Z.fragment===void 0?Z.reference="absolute":Z.reference="uri",B.reference&&B.reference!=="suffix"&&B.reference!==Z.reference&&(Z.error=Z.error||"URI is not a "+B.reference+" reference.");var Ee=Dt[(B.scheme||Z.scheme||"").toLowerCase()];if(!B.unicodeSupport&&(!Ee||!Ee.unicodeSupport)){if(Z.host&&(B.domainHost||Ee&&Ee.domainHost))try{Z.host=ir.toASCII(Z.host.replace(ne.PCT_ENCODED,F).toLowerCase());}catch(Ge){Z.error=Z.error||"Host's domain name can not be converted to ASCII via punycode: "+Ge;}z(Z,c);}else z(Z,ne);Ee&&Ee.parse&&Ee.parse(Z,B);}else Z.error=Z.error||"URI can not be parsed.";return Z}function vt(J,B){var Z=B.iri!==!1?l:c,ne=[];return J.userinfo!==void 0&&(ne.push(J.userinfo),ne.push("@")),J.host!==void 0&&ne.push(le(de(String(J.host),Z),Z).replace(Z.IPV6ADDRESS,function(ie,Ee,Ge){return "["+Ee+(Ge?"%25"+Ge:"")+"]"})),(typeof J.port=="number"||typeof J.port=="string")&&(ne.push(":"),ne.push(String(J.port))),ne.length?ne.join(""):void 0}var Ft=/^\.\.?\//,Et=/^\/\.(\/|$)/,$t=/^\/\.\.(\/|$)/,tt=/^\/?(?:.|\n)*?(?=\/|$)/;function He(J){for(var B=[];J.length;)if(J.match(Ft))J=J.replace(Ft,"");else if(J.match(Et))J=J.replace(Et,"/");else if(J.match($t))J=J.replace($t,"/"),B.pop();else if(J==="."||J==="..")J="";else {var Z=J.match(tt);if(Z){var ne=Z[0];J=J.slice(ne.length),B.push(ne);}else throw new Error("Unexpected dot segment condition")}return B.join("")}function at(J){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=B.iri?l:c,ne=[],ie=Dt[(B.scheme||J.scheme||"").toLowerCase()];if(ie&&ie.serialize&&ie.serialize(J,B),J.host&&!Z.IPV6ADDRESS.test(J.host)){if(B.domainHost||ie&&ie.domainHost)try{J.host=B.iri?ir.toUnicode(J.host):ir.toASCII(J.host.replace(Z.PCT_ENCODED,F).toLowerCase());}catch(ot){J.error=J.error||"Host's domain name can not be converted to "+(B.iri?"Unicode":"ASCII")+" via punycode: "+ot;}}z(J,Z),B.reference!=="suffix"&&J.scheme&&(ne.push(J.scheme),ne.push(":"));var Ee=vt(J,B);if(Ee!==void 0&&(B.reference!=="suffix"&&ne.push("//"),ne.push(Ee),J.path&&J.path.charAt(0)!=="/"&&ne.push("/")),J.path!==void 0){var Ge=J.path;!B.absolutePath&&(!ie||!ie.absolutePath)&&(Ge=He(Ge)),Ee===void 0&&(Ge=Ge.replace(/^\/\//,"/%2F")),ne.push(Ge);}return J.query!==void 0&&(ne.push("?"),ne.push(J.query)),J.fragment!==void 0&&(ne.push("#"),ne.push(J.fragment)),ne.join("")}function an(J,B){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=arguments[3],ie={};return ne||(J=et(at(J,Z),Z),B=et(at(B,Z),Z)),Z=Z||{},!Z.tolerant&&B.scheme?(ie.scheme=B.scheme,ie.userinfo=B.userinfo,ie.host=B.host,ie.port=B.port,ie.path=He(B.path||""),ie.query=B.query):(B.userinfo!==void 0||B.host!==void 0||B.port!==void 0?(ie.userinfo=B.userinfo,ie.host=B.host,ie.port=B.port,ie.path=He(B.path||""),ie.query=B.query):(B.path?(B.path.charAt(0)==="/"?ie.path=He(B.path):((J.userinfo!==void 0||J.host!==void 0||J.port!==void 0)&&!J.path?ie.path="/"+B.path:J.path?ie.path=J.path.slice(0,J.path.lastIndexOf("/")+1)+B.path:ie.path=B.path,ie.path=He(ie.path)),ie.query=B.query):(ie.path=J.path,B.query!==void 0?ie.query=B.query:ie.query=J.query),ie.userinfo=J.userinfo,ie.host=J.host,ie.port=J.port),ie.scheme=J.scheme),ie.fragment=B.fragment,ie}function bn(J,B,Z){var ne=s({scheme:"null"},Z);return at(an(et(J,ne),et(B,ne),ne,!0),ne)}function Ur(J,B){return typeof J=="string"?J=at(et(J,B),B):n(J)==="object"&&(J=et(at(J,B),B)),J}function no(J,B,Z){return typeof J=="string"?J=at(et(J,Z),Z):n(J)==="object"&&(J=at(J,Z)),typeof B=="string"?B=at(et(B,Z),Z):n(B)==="object"&&(B=at(B,Z)),J===B}function L(J,B){return J&&J.toString().replace(!B||!B.iri?c.ESCAPE:l.ESCAPE,pe)}function v(J,B){return J&&J.toString().replace(!B||!B.iri?c.PCT_ENCODED:l.PCT_ENCODED,F)}var b={scheme:"http",domainHost:!0,parse:function(B,Z){return B.host||(B.error=B.error||"HTTP URIs must have a host."),B},serialize:function(B,Z){var ne=String(B.scheme).toLowerCase()==="https";return (B.port===(ne?443:80)||B.port==="")&&(B.port=void 0),B.path||(B.path="/"),B}},E={scheme:"https",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize};function j(J){return typeof J.secure=="boolean"?J.secure:String(J.scheme).toLowerCase()==="wss"}var G={scheme:"ws",domainHost:!0,parse:function(B,Z){var ne=B;return ne.secure=j(ne),ne.resourceName=(ne.path||"/")+(ne.query?"?"+ne.query:""),ne.path=void 0,ne.query=void 0,ne},serialize:function(B,Z){if((B.port===(j(B)?443:80)||B.port==="")&&(B.port=void 0),typeof B.secure=="boolean"&&(B.scheme=B.secure?"wss":"ws",B.secure=void 0),B.resourceName){var ne=B.resourceName.split("?"),ie=u(ne,2),Ee=ie[0],Ge=ie[1];B.path=Ee&&Ee!=="/"?Ee:void 0,B.query=Ge,B.resourceName=void 0;}return B.fragment=void 0,B}},ee={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},Ce={},Ne="[A-Za-z0-9\\-\\.\\_\\~"+("\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF")+"]",Pe="[0-9A-Fa-f]",Ie=r(r("%[EFef]"+Pe+"%"+Pe+Pe+"%"+Pe+Pe)+"|"+r("%[89A-Fa-f]"+Pe+"%"+Pe+Pe)+"|"+r("%"+Pe+Pe)),xt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ct="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",zt=t(ct,'[\\"\\\\]'),or="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Kr=new RegExp(Ne,"g"),ti=new RegExp(Ie,"g"),Vo=new RegExp(t("[^]",xt,"[\\.]",'[\\"]',zt),"g"),io=new RegExp(t("[^]",Ne,or),"g"),tl=io;function Fs(J){var B=F(J);return B.match(Kr)?B:J}var bc={scheme:"mailto",parse:function(B,Z){var ne=B,ie=ne.to=ne.path?ne.path.split(","):[];if(ne.path=void 0,ne.query){for(var Ee=!1,Ge={},ot=ne.query.split("&"),ft=0,Xt=ot.length;ft<Xt;++ft){var rt=ot[ft].split("=");switch(rt[0]){case"to":for(var Lt=rt[1].split(","),Jt=0,It=Lt.length;Jt<It;++Jt)ie.push(Lt[Jt]);break;case"subject":ne.subject=v(rt[1],Z);break;case"body":ne.body=v(rt[1],Z);break;default:Ee=!0,Ge[v(rt[0],Z)]=v(rt[1],Z);break}}Ee&&(ne.headers=Ge);}ne.query=void 0;for(var st=0,Ot=ie.length;st<Ot;++st){var gt=ie[st].split("@");if(gt[0]=v(gt[0]),Z.unicodeSupport)gt[1]=v(gt[1],Z).toLowerCase();else try{gt[1]=ir.toASCII(v(gt[1],Z).toLowerCase());}catch(Ai){ne.error=ne.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ai;}ie[st]=gt.join("@");}return ne},serialize:function(B,Z){var ne=B,ie=o(B.to);if(ie){for(var Ee=0,Ge=ie.length;Ee<Ge;++Ee){var ot=String(ie[Ee]),ft=ot.lastIndexOf("@"),Xt=ot.slice(0,ft).replace(ti,Fs).replace(ti,i).replace(Vo,pe),rt=ot.slice(ft+1);try{rt=Z.iri?ir.toUnicode(rt):ir.toASCII(v(rt,Z).toLowerCase());}catch(st){ne.error=ne.error||"Email address's domain name can not be converted to "+(Z.iri?"Unicode":"ASCII")+" via punycode: "+st;}ie[Ee]=Xt+"@"+rt;}ne.path=ie.join(",");}var Lt=B.headers=B.headers||{};B.subject&&(Lt.subject=B.subject),B.body&&(Lt.body=B.body);var Jt=[];for(var It in Lt)Lt[It]!==Ce[It]&&Jt.push(It.replace(ti,Fs).replace(ti,i).replace(io,pe)+"="+Lt[It].replace(ti,Fs).replace(ti,i).replace(tl,pe));return Jt.length&&(ne.query=Jt.join("&")),ne}},jp=/^([^\:]+)\:(.*)/,rl={scheme:"urn",parse:function(B,Z){var ne=B.path&&B.path.match(jp),ie=B;if(ne){var Ee=Z.scheme||ie.scheme||"urn",Ge=ne[1].toLowerCase(),ot=ne[2],ft=Ee+":"+(Z.nid||Ge),Xt=Dt[ft];ie.nid=Ge,ie.nss=ot,ie.path=void 0,Xt&&(ie=Xt.parse(ie,Z));}else ie.error=ie.error||"URN can not be parsed.";return ie},serialize:function(B,Z){var ne=Z.scheme||B.scheme||"urn",ie=B.nid,Ee=ne+":"+(Z.nid||ie),Ge=Dt[Ee];Ge&&(B=Ge.serialize(B,Z));var ot=B,ft=B.nss;return ot.path=(ie||Z.nid)+":"+ft,ot}},Up=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,nl={scheme:"urn:uuid",parse:function(B,Z){var ne=B;return ne.uuid=ne.nss,ne.nss=void 0,!Z.tolerant&&(!ne.uuid||!ne.uuid.match(Up))&&(ne.error=ne.error||"UUID is not valid."),ne},serialize:function(B,Z){var ne=B;return ne.nss=(B.uuid||"").toLowerCase(),ne}};Dt[b.scheme]=b,Dt[E.scheme]=E,Dt[G.scheme]=G,Dt[ee.scheme]=ee,Dt[bc.scheme]=bc,Dt[rl.scheme]=rl,Dt[nl.scheme]=nl,e.SCHEMES=Dt,e.pctEncChar=pe,e.pctDecChars=F,e.parse=et,e.removeDotSegments=He,e.serialize=at,e.resolveComponents=an,e.resolve=bn,e.normalize=Ur,e.equal=no,e.escapeComponent=L,e.unescapeComponent=v,Object.defineProperty(e,"__esModule",{value:!0});});});var La=X(qr=>{d();p();h();Object.defineProperty(qr,"__esModule",{value:!0});qr.stringArray=qr.array=qr.func=qr.error=qr.number=qr.string=qr.boolean=void 0;function DH(e){return e===!0||e===!1}qr.boolean=DH;function yO(e){return typeof e=="string"||e instanceof String}qr.string=yO;function LH(e){return typeof e=="number"||e instanceof Number}qr.number=LH;function OH(e){return e instanceof Error}qr.error=OH;function kH(e){return typeof e=="function"}qr.func=kH;function vO(e){return Array.isArray(e)}qr.array=vO;function NH(e){return vO(e)&&e.every(t=>yO(t))}qr.stringArray=NH;});var Sb=X(De=>{d();p();h();Object.defineProperty(De,"__esModule",{value:!0});De.Message=De.NotificationType9=De.NotificationType8=De.NotificationType7=De.NotificationType6=De.NotificationType5=De.NotificationType4=De.NotificationType3=De.NotificationType2=De.NotificationType1=De.NotificationType0=De.NotificationType=De.RequestType9=De.RequestType8=De.RequestType7=De.RequestType6=De.RequestType5=De.RequestType4=De.RequestType3=De.RequestType2=De.RequestType1=De.RequestType=De.RequestType0=De.AbstractMessageSignature=De.ParameterStructures=De.ResponseError=De.ErrorCodes=void 0;var Is=La(),Kv;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3;})(Kv||(De.ErrorCodes=Kv={}));var Zv=class e extends Error{constructor(t,r,n){super(r),this.code=Is.number(t)?t:Kv.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,e.prototype);}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};De.ResponseError=Zv;var tn=class e{constructor(t){this.kind=t;}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};De.ParameterStructures=tn;tn.auto=new tn("auto");tn.byPosition=new tn("byPosition");tn.byName=new tn("byName");var qt=class{constructor(t,r){this.method=t,this.numberOfParams=r;}get parameterStructures(){return tn.auto}};De.AbstractMessageSignature=qt;var Qv=class extends qt{constructor(t){super(t,0);}};De.RequestType0=Qv;var eb=class extends qt{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};De.RequestType=eb;var tb=class extends qt{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};De.RequestType1=tb;var rb=class extends qt{constructor(t){super(t,2);}};De.RequestType2=rb;var nb=class extends qt{constructor(t){super(t,3);}};De.RequestType3=nb;var ib=class extends qt{constructor(t){super(t,4);}};De.RequestType4=ib;var ob=class extends qt{constructor(t){super(t,5);}};De.RequestType5=ob;var sb=class extends qt{constructor(t){super(t,6);}};De.RequestType6=sb;var ab=class extends qt{constructor(t){super(t,7);}};De.RequestType7=ab;var cb=class extends qt{constructor(t){super(t,8);}};De.RequestType8=cb;var ub=class extends qt{constructor(t){super(t,9);}};De.RequestType9=ub;var lb=class extends qt{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};De.NotificationType=lb;var fb=class extends qt{constructor(t){super(t,0);}};De.NotificationType0=fb;var db=class extends qt{constructor(t,r=tn.auto){super(t,1),this._parameterStructures=r;}get parameterStructures(){return this._parameterStructures}};De.NotificationType1=db;var hb=class extends qt{constructor(t){super(t,2);}};De.NotificationType2=hb;var pb=class extends qt{constructor(t){super(t,3);}};De.NotificationType3=pb;var gb=class extends qt{constructor(t){super(t,4);}};De.NotificationType4=gb;var mb=class extends qt{constructor(t){super(t,5);}};De.NotificationType5=mb;var yb=class extends qt{constructor(t){super(t,6);}};De.NotificationType6=yb;var vb=class extends qt{constructor(t){super(t,7);}};De.NotificationType7=vb;var bb=class extends qt{constructor(t){super(t,8);}};De.NotificationType8=bb;var wb=class extends qt{constructor(t){super(t,9);}};De.NotificationType9=wb;var bO;(function(e){function t(i){let o=i;return o&&Is.string(o.method)&&(Is.string(o.id)||Is.number(o.id))}e.isRequest=t;function r(i){let o=i;return o&&Is.string(o.method)&&i.id===void 0}e.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(Is.string(o.id)||Is.number(o.id)||o.id===null)}e.isResponse=n;})(bO||(De.Message=bO={}));});var xb=X(Do=>{d();p();h();var wO;Object.defineProperty(Do,"__esModule",{value:!0});Do.LRUCache=Do.LinkedMap=Do.Touch=void 0;var Fr;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last;})(Fr||(Do.Touch=Fr={}));var Rd=class{constructor(){this[wO]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0;}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++;}isEmpty(){return !this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,r=Fr.None){let n=this._map.get(t);if(n)return r!==Fr.None&&this.touch(n,r),n.value}set(t,r,n=Fr.None){let i=this._map.get(t);if(i)i.value=r,n!==Fr.None&&this.touch(i,n);else {switch(i={key:t,value:r,next:void 0,previous:void 0},n){case Fr.None:this.addItemLast(i);break;case Fr.First:this.addItemFirst(i);break;case Fr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++;}return this}delete(t){return !!this.remove(t)}remove(t){let r=this._map.get(t);if(r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next;}}keys(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}values(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}entries(){let t=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return {value:void 0,done:!0}}};return n}[(wO=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++;}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++;}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++;}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next;}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous;}else {let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r;}t.next=void 0,t.previous=void 0,this._state++;}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Fr.First&&r!==Fr.Last)){if(r===Fr.First){if(t===this._head)return;let n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++;}else if(r===Fr.Last){if(t===this._tail)return;let n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++;}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r]);}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n);}};Do.LinkedMap=Rd;var Eb=class extends Rd{constructor(t,r=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,r),1);}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim();}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim();}get(t,r=Fr.AsNew){return super.get(t,r)}peek(t){return super.get(t,Fr.None)}set(t,r){return super.set(t,r,Fr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio));}};Do.LRUCache=Eb;});var EO=X(Id=>{d();p();h();Object.defineProperty(Id,"__esModule",{value:!0});Id.Disposable=void 0;var SO;(function(e){function t(r){return {dispose:r}}e.create=t;})(SO||(Id.Disposable=SO={}));});var Lo=X(Tb=>{d();p();h();Object.defineProperty(Tb,"__esModule",{value:!0});var Cb;function _b(){if(Cb===void 0)throw new Error("No runtime abstraction layer installed");return Cb}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Cb=r;}e.install=t;})(_b||(_b={}));Tb.default=_b;});var ka=X(Oa=>{d();p();h();Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Emitter=Oa.Event=void 0;var MH=Lo(),xO;(function(e){let t={dispose(){}};e.None=function(){return t};})(xO||(Oa.Event=xO={}));var Rb=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)});}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===t)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return [];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{r.push(n[o].apply(i[o],t));}catch(a){(0, MH.default)().console.error(a);}return r}isEmpty(){return !this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0;}},Ad=class e{constructor(t){this._options=t;}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new Rb),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,r),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this));}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t);}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0);}};Oa.Emitter=Ad;Ad._noop=function(){};});var Ld=X(Na=>{d();p();h();Object.defineProperty(Na,"__esModule",{value:!0});Na.CancellationTokenSource=Na.CancellationToken=void 0;var qH=Lo(),FH=La(),Ib=ka(),Pd;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ib.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ib.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||FH.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t;})(Pd||(Na.CancellationToken=Pd={}));var $H=Object.freeze(function(e,t){let r=(0, qH.default)().timer.setTimeout(e.bind(t),0);return {dispose(){r.dispose();}}}),Dd=class{constructor(){this._isCancelled=!1;}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()));}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$H:(this._emitter||(this._emitter=new Ib.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0);}},Ab=class{get token(){return this._token||(this._token=new Dd),this._token}cancel(){this._token?this._token.cancel():this._token=Pd.Cancelled;}dispose(){this._token?this._token instanceof Dd&&this._token.dispose():this._token=Pd.None;}};Na.CancellationTokenSource=Ab;});var CO=X(Ma=>{d();p();h();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.SharedArrayReceiverStrategy=Ma.SharedArraySenderStrategy=void 0;var jH=Ld(),Iu;(function(e){e.Continue=0,e.Cancelled=1;})(Iu||(Iu={}));var Pb=class{constructor(){this.buffers=new Map;}enableCancellation(t){if(t.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=Iu.Continue,this.buffers.set(t.id,r),t.$cancellationData=r;}async sendCancellation(t,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,Iu.Cancelled);}cleanup(t){this.buffers.delete(t);}dispose(){this.buffers.clear();}};Ma.SharedArraySenderStrategy=Pb;var Db=class{constructor(t){this.data=new Int32Array(t,0,1);}get isCancellationRequested(){return Atomics.load(this.data,0)===Iu.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Lb=class{constructor(t){this.token=new Db(t);}cancel(){}dispose(){}},Ob=class{constructor(){this.kind="request";}createCancellationTokenSource(t){let r=t.$cancellationData;return r===void 0?new jH.CancellationTokenSource:new Lb(r)}};Ma.SharedArrayReceiverStrategy=Ob;});var Nb=X(Od=>{d();p();h();Object.defineProperty(Od,"__esModule",{value:!0});Od.Semaphore=void 0;var UH=Lo(),kb=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[];}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext();})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0, UH.default)().timer.setImmediate(()=>this.doRunNext());}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext();},n=>{this._active--,t.reject(n),this.runNext();}):(this._active--,t.resolve(r),this.runNext());}catch(r){this._active--,t.reject(r),this.runNext();}}};Od.Semaphore=kb;});var TO=X(Oo=>{d();p();h();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.ReadableStreamMessageReader=Oo.AbstractMessageReader=Oo.MessageReader=void 0;var qb=Lo(),qa=La(),Mb=ka(),BH=Nb(),_O;(function(e){function t(r){let n=r;return n&&qa.func(n.listen)&&qa.func(n.dispose)&&qa.func(n.onError)&&qa.func(n.onClose)&&qa.func(n.onPartialMessage)}e.is=t;})(_O||(Oo.MessageReader=_O={}));var kd=class{constructor(){this.errorEmitter=new Mb.Emitter,this.closeEmitter=new Mb.Emitter,this.partialMessageEmitter=new Mb.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t));}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t);}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${qa.string(t.message)?t.message:"unknown"}`)}};Oo.AbstractMessageReader=kd;var Fb;(function(e){function t(r){let n,o,s=new Map,a,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else {if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,s.set(o.name,o)),r.contentDecoders!==void 0)for(let l of r.contentDecoders)s.set(l.name,l);if(r.contentTypeDecoder!==void 0&&(a=r.contentTypeDecoder,c.set(a.name,a)),r.contentTypeDecoders!==void 0)for(let l of r.contentTypeDecoders)c.set(l.name,l);}return a===void 0&&(a=(0, qb.default)().applicationJson.decoder,c.set(a.name,a)),{charset:n,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}e.fromOptions=t;})(Fb||(Fb={}));var $b=class extends kd{constructor(t,r){super(),this.readable=t,this.options=Fb.fromOptions(r),this.buffer=(0, qb.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new BH.Semaphore(1);}set partialMessageTimeout(t){this._partialMessageTimeout=t;}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n);});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o;}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i);}).catch(n=>{this.fireError(n);});}}catch(r){this.fireError(r);}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0);}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0, qb.default)().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer());},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout));}};Oo.ReadableStreamMessageReader=$b;});var DO=X(ko=>{d();p();h();Object.defineProperty(ko,"__esModule",{value:!0});ko.WriteableStreamMessageWriter=ko.AbstractMessageWriter=ko.MessageWriter=void 0;var RO=Lo(),Au=La(),WH=Nb(),IO=ka(),zH="Content-Length: ",AO=`\r
`,PO;(function(e){function t(r){let n=r;return n&&Au.func(n.dispose)&&Au.func(n.onClose)&&Au.func(n.onError)&&Au.func(n.write)}e.is=t;})(PO||(ko.MessageWriter=PO={}));var Nd=class{constructor(){this.errorEmitter=new IO.Emitter,this.closeEmitter=new IO.Emitter;}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose();}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n]);}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0);}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${Au.string(t.message)?t.message:"unknown"}`)}};ko.AbstractMessageWriter=Nd;var jb;(function(e){function t(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0, RO.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0, RO.default)().applicationJson.encoder}}e.fromOptions=t;})(jb||(jb={}));var Ub=class extends Nd{constructor(t,r){super(),this.writable=t,this.options=jb.fromOptions(r),this.errorCount=0,this.writeSemaphore=new WH.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose());}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(zH,n.byteLength.toString(),AO),i.push(AO),this.doWrite(t,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){this.writable.end();}};ko.WriteableStreamMessageWriter=Ub;});var LO=X(Md=>{d();p();h();Object.defineProperty(Md,"__esModule",{value:!0});Md.AbstractMessageBuffer=void 0;var HH=13,VH=10,GH=`\r
`,Bb=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0;}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength;}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case HH:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0;}break;case VH:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0;}break;default:r=0;}i++;}o+=l.byteLength,n++;}if(r!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split(GH);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){let u=c[l],g=u.indexOf(":");if(g===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let w=u.substr(0,g),y=u.substr(g+1).trim();a.set(t?w.toLowerCase():w,y);}return a}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(o)}if(this._chunks[0].byteLength>t){let o=this._chunks[0],s=this.asNative(o,t);return this._chunks[0]=o.slice(t),this._totalLength-=t,s}let r=this.allocNative(t),n=0,i=0;for(;t>0;){let o=this._chunks[i];if(o.byteLength>t){let s=o.slice(0,t);r.set(s,n),n+=t,this._chunks[i]=o.slice(t),this._totalLength-=t,t-=t;}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,t-=o.byteLength;}return r}};Md.AbstractMessageBuffer=Bb;});var qO=X(Je=>{d();p();h();Object.defineProperty(Je,"__esModule",{value:!0});Je.createMessageConnection=Je.ConnectionOptions=Je.MessageStrategy=Je.CancellationStrategy=Je.CancellationSenderStrategy=Je.CancellationReceiverStrategy=Je.RequestCancellationReceiverStrategy=Je.IdCancellationReceiverStrategy=Je.ConnectionStrategy=Je.ConnectionError=Je.ConnectionErrors=Je.LogTraceNotification=Je.SetTraceNotification=Je.TraceFormat=Je.TraceValues=Je.Trace=Je.NullLogger=Je.ProgressType=Je.ProgressToken=void 0;var OO=Lo(),Yt=La(),$e=Sb(),kO=xb(),Pu=ka(),Wb=Ld(),Ou;(function(e){e.type=new $e.NotificationType("$/cancelRequest");})(Ou||(Ou={}));var zb;(function(e){function t(r){return typeof r=="string"||typeof r=="number"}e.is=t;})(zb||(Je.ProgressToken=zb={}));var Du;(function(e){e.type=new $e.NotificationType("$/progress");})(Du||(Du={}));var Hb=class{constructor(){}};Je.ProgressType=Hb;var Vb;(function(e){function t(r){return Yt.func(r)}e.is=t;})(Vb||(Vb={}));Je.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var mt;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose";})(mt||(Je.Trace=mt={}));var NO;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose";})(NO||(Je.TraceValues=NO={}));(function(e){function t(n){if(!Yt.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return "off";case e.Messages:return "messages";case e.Compact:return "compact";case e.Verbose:return "verbose";default:return "off"}}e.toString=r;})(mt||(Je.Trace=mt={}));var yn;(function(e){e.Text="text",e.JSON="json";})(yn||(Je.TraceFormat=yn={}));(function(e){function t(r){return Yt.string(r)?(r=r.toLowerCase(),r==="json"?e.JSON:e.Text):e.Text}e.fromString=t;})(yn||(Je.TraceFormat=yn={}));var Gb;(function(e){e.type=new $e.NotificationType("$/setTrace");})(Gb||(Je.SetTraceNotification=Gb={}));var qd;(function(e){e.type=new $e.NotificationType("$/logTrace");})(qd||(Je.LogTraceNotification=qd={}));var Lu;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening";})(Lu||(Je.ConnectionErrors=Lu={}));var Fa=class e extends Error{constructor(t,r){super(r),this.code=t,Object.setPrototypeOf(this,e.prototype);}};Je.ConnectionError=Fa;var Yb;(function(e){function t(r){let n=r;return n&&Yt.func(n.cancelUndispatched)}e.is=t;})(Yb||(Je.ConnectionStrategy=Yb={}));var Fd;(function(e){function t(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Yt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Yt.func(n.dispose))}e.is=t;})(Fd||(Je.IdCancellationReceiverStrategy=Fd={}));var Xb;(function(e){function t(r){let n=r;return n&&n.kind==="request"&&Yt.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Yt.func(n.dispose))}e.is=t;})(Xb||(Je.RequestCancellationReceiverStrategy=Xb={}));var $d;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new Wb.CancellationTokenSource}});function t(r){return Fd.is(r)||Xb.is(r)}e.is=t;})($d||(Je.CancellationReceiverStrategy=$d={}));var jd;(function(e){e.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(Ou.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Yt.func(n.sendCancellation)&&Yt.func(n.cleanup)}e.is=t;})(jd||(Je.CancellationSenderStrategy=jd={}));var Ud;(function(e){e.Message=Object.freeze({receiver:$d.Message,sender:jd.Message});function t(r){let n=r;return n&&$d.is(n.receiver)&&jd.is(n.sender)}e.is=t;})(Ud||(Je.CancellationStrategy=Ud={}));var Bd;(function(e){function t(r){let n=r;return n&&Yt.func(n.handleMessage)}e.is=t;})(Bd||(Je.MessageStrategy=Bd={}));var MO;(function(e){function t(r){let n=r;return n&&(Ud.is(n.cancellationStrategy)||Yb.is(n.connectionStrategy)||Bd.is(n.messageStrategy))}e.is=t;})(MO||(Je.ConnectionOptions=MO={}));var Qn;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed";})(Qn||(Qn={}));function YH(e,t,r,n){let i=r!==void 0?r:Je.NullLogger,o=0,s=0,a=0,c="2.0",l,u=new Map,g,w=new Map,y=new Map,_,x=new kO.LinkedMap,D=new Map,A=new Set,C=new Map,R=mt.Off,T=yn.Text,$,P=Qn.New,q=new Pu.Emitter,k=new Pu.Emitter,V=new Pu.Emitter,K=new Pu.Emitter,ve=new Pu.Emitter,fe=n&&n.cancellationStrategy?n.cancellationStrategy:Ud.Message;function be(E){if(E===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return "req-"+E.toString()}function me(E){return E===null?"res-unknown-"+(++a).toString():"res-"+E.toString()}function je(){return "not-"+(++s).toString()}function pt(E,j){$e.Message.isRequest(j)?E.set(be(j.id),j):$e.Message.isResponse(j)?E.set(me(j.id),j):E.set(je(),j);}function We(E){}function ze(){return P===Qn.Listening}function Rt(){return P===Qn.Closed}function Qe(){return P===Qn.Disposed}function lt(){(P===Qn.New||P===Qn.Listening)&&(P=Qn.Closed,k.fire(void 0));}function sn(E){q.fire([E,void 0,void 0]);}function Jr(E){q.fire(E);}e.onClose(lt),e.onError(sn),t.onClose(lt),t.onError(Jr);function ir(){_||x.size===0||(_=(0, OO.default)().timer.setImmediate(()=>{_=void 0,pe();}));}function Dt(E){$e.Message.isRequest(E)?z(E):$e.Message.isNotification(E)?de(E):$e.Message.isResponse(E)?Q(E):le(E);}function pe(){if(x.size===0)return;let E=x.shift();try{let j=n?.messageStrategy;Bd.is(j)?j.handleMessage(E,Dt):Dt(E);}finally{ir();}}let F=E=>{try{if($e.Message.isNotification(E)&&E.method===Ou.type.method){let j=E.params.id,G=be(j),ee=x.get(G);if($e.Message.isRequest(ee)){let Le=n?.connectionStrategy,Ne=Le&&Le.cancelUndispatched?Le.cancelUndispatched(ee,We):void 0;if(Ne&&(Ne.error!==void 0||Ne.result!==void 0)){x.delete(G),C.delete(j),Ne.id=ee.id,vt(Ne,E.method,Date.now()),t.write(Ne).catch(()=>i.error("Sending response for canceled message failed."));return}}let Ce=C.get(j);if(Ce!==void 0){Ce.cancel(),Et(E);return}else A.add(j);}pt(x,E);}finally{ir();}};function z(E){if(Qe())return;function j(Ie,xt,ct){let zt={jsonrpc:c,id:E.id};Ie instanceof $e.ResponseError?zt.error=Ie.toJson():zt.result=Ie===void 0?null:Ie,vt(zt,xt,ct),t.write(zt).catch(()=>i.error("Sending response failed."));}function G(Ie,xt,ct){let zt={jsonrpc:c,id:E.id,error:Ie.toJson()};vt(zt,xt,ct),t.write(zt).catch(()=>i.error("Sending response failed."));}function ee(Ie,xt,ct){Ie===void 0&&(Ie=null);let zt={jsonrpc:c,id:E.id,result:Ie};vt(zt,xt,ct),t.write(zt).catch(()=>i.error("Sending response failed."));}Ft(E);let Ce=u.get(E.method),Le,Ne;Ce&&(Le=Ce.type,Ne=Ce.handler);let Pe=Date.now();if(Ne||l){let Ie=E.id??String(Date.now()),xt=Fd.is(fe.receiver)?fe.receiver.createCancellationTokenSource(Ie):fe.receiver.createCancellationTokenSource(E);E.id!==null&&A.has(E.id)&&xt.cancel(),E.id!==null&&C.set(Ie,xt);try{let ct;if(Ne)if(E.params===void 0){if(Le!==void 0&&Le.numberOfParams!==0){G(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${E.method} defines ${Le.numberOfParams} params but received none.`),E.method,Pe);return}ct=Ne(xt.token);}else if(Array.isArray(E.params)){if(Le!==void 0&&Le.parameterStructures===$e.ParameterStructures.byName){G(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${E.method} defines parameters by name but received parameters by position`),E.method,Pe);return}ct=Ne(...E.params,xt.token);}else {if(Le!==void 0&&Le.parameterStructures===$e.ParameterStructures.byPosition){G(new $e.ResponseError($e.ErrorCodes.InvalidParams,`Request ${E.method} defines parameters by position but received parameters by name`),E.method,Pe);return}ct=Ne(E.params,xt.token);}else l&&(ct=l(E.method,E.params,xt.token));let zt=ct;ct?zt.then?zt.then(or=>{C.delete(Ie),j(or,E.method,Pe);},or=>{C.delete(Ie),or instanceof $e.ResponseError?G(or,E.method,Pe):or&&Yt.string(or.message)?G(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${E.method} failed with message: ${or.message}`),E.method,Pe):G(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${E.method} failed unexpectedly without providing any details.`),E.method,Pe);}):(C.delete(Ie),j(ct,E.method,Pe)):(C.delete(Ie),ee(ct,E.method,Pe));}catch(ct){C.delete(Ie),ct instanceof $e.ResponseError?j(ct,E.method,Pe):ct&&Yt.string(ct.message)?G(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${E.method} failed with message: ${ct.message}`),E.method,Pe):G(new $e.ResponseError($e.ErrorCodes.InternalError,`Request ${E.method} failed unexpectedly without providing any details.`),E.method,Pe);}}else G(new $e.ResponseError($e.ErrorCodes.MethodNotFound,`Unhandled method ${E.method}`),E.method,Pe);}function Q(E){if(!Qe())if(E.id===null)E.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(E.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else {let j=E.id,G=D.get(j);if($t(E,G),G!==void 0){D.delete(j);try{if(E.error){let ee=E.error;G.reject(new $e.ResponseError(ee.code,ee.message,ee.data));}else if(E.result!==void 0)G.resolve(E.result);else throw new Error("Should never happen.")}catch(ee){ee.message?i.error(`Response handler '${G.method}' failed with message: ${ee.message}`):i.error(`Response handler '${G.method}' failed unexpectedly.`);}}}}function de(E){if(Qe())return;let j,G;if(E.method===Ou.type.method){let ee=E.params.id;A.delete(ee),Et(E);return}else {let ee=w.get(E.method);ee&&(G=ee.handler,j=ee.type);}if(G||g)try{if(Et(E),G)if(E.params===void 0)j!==void 0&&j.numberOfParams!==0&&j.parameterStructures!==$e.ParameterStructures.byName&&i.error(`Notification ${E.method} defines ${j.numberOfParams} params but received none.`),G();else if(Array.isArray(E.params)){let ee=E.params;E.method===Du.type.method&&ee.length===2&&zb.is(ee[0])?G({token:ee[0],value:ee[1]}):(j!==void 0&&(j.parameterStructures===$e.ParameterStructures.byName&&i.error(`Notification ${E.method} defines parameters by name but received parameters by position`),j.numberOfParams!==E.params.length&&i.error(`Notification ${E.method} defines ${j.numberOfParams} params but received ${ee.length} arguments`)),G(...ee));}else j!==void 0&&j.parameterStructures===$e.ParameterStructures.byPosition&&i.error(`Notification ${E.method} defines parameters by position but received parameters by name`),G(E.params);else g&&g(E.method,E.params);}catch(ee){ee.message?i.error(`Notification handler '${E.method}' failed with message: ${ee.message}`):i.error(`Notification handler '${E.method}' failed unexpectedly.`);}else V.fire(E);}function le(E){if(!E){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(E,null,4)}`);let j=E;if(Yt.string(j.id)||Yt.number(j.id)){let G=j.id,ee=D.get(G);ee&&ee.reject(new Error("The received response has neither a result nor an error property."));}}function he(E){if(E!=null)switch(R){case mt.Verbose:return JSON.stringify(E,null,4);case mt.Compact:return JSON.stringify(E);default:return}}function Ue(E){if(!(R===mt.Off||!$))if(T===yn.Text){let j;(R===mt.Verbose||R===mt.Compact)&&E.params&&(j=`Params: ${he(E.params)}

`),$.log(`Sending request '${E.method} - (${E.id})'.`,j);}else tt("send-request",E);}function et(E){if(!(R===mt.Off||!$))if(T===yn.Text){let j;(R===mt.Verbose||R===mt.Compact)&&(E.params?j=`Params: ${he(E.params)}

`:j=`No parameters provided.

`),$.log(`Sending notification '${E.method}'.`,j);}else tt("send-notification",E);}function vt(E,j,G){if(!(R===mt.Off||!$))if(T===yn.Text){let ee;(R===mt.Verbose||R===mt.Compact)&&(E.error&&E.error.data?ee=`Error data: ${he(E.error.data)}

`:E.result?ee=`Result: ${he(E.result)}

`:E.error===void 0&&(ee=`No result returned.

`)),$.log(`Sending response '${j} - (${E.id})'. Processing request took ${Date.now()-G}ms`,ee);}else tt("send-response",E);}function Ft(E){if(!(R===mt.Off||!$))if(T===yn.Text){let j;(R===mt.Verbose||R===mt.Compact)&&E.params&&(j=`Params: ${he(E.params)}

`),$.log(`Received request '${E.method} - (${E.id})'.`,j);}else tt("receive-request",E);}function Et(E){if(!(R===mt.Off||!$||E.method===qd.type.method))if(T===yn.Text){let j;(R===mt.Verbose||R===mt.Compact)&&(E.params?j=`Params: ${he(E.params)}

`:j=`No parameters provided.

`),$.log(`Received notification '${E.method}'.`,j);}else tt("receive-notification",E);}function $t(E,j){if(!(R===mt.Off||!$))if(T===yn.Text){let G;if((R===mt.Verbose||R===mt.Compact)&&(E.error&&E.error.data?G=`Error data: ${he(E.error.data)}

`:E.result?G=`Result: ${he(E.result)}

`:E.error===void 0&&(G=`No result returned.

`)),j){let ee=E.error?` Request failed: ${E.error.message} (${E.error.code}).`:"";$.log(`Received response '${j.method} - (${E.id})' in ${Date.now()-j.timerStart}ms.${ee}`,G);}else $.log(`Received response ${E.id} without active response promise.`,G);}else tt("receive-response",E);}function tt(E,j){if(!$||R===mt.Off)return;let G={isLSPMessage:!0,type:E,message:j,timestamp:Date.now()};$.log(G);}function He(){if(Rt())throw new Fa(Lu.Closed,"Connection is closed.");if(Qe())throw new Fa(Lu.Disposed,"Connection is disposed.")}function at(){if(ze())throw new Fa(Lu.AlreadyListening,"Connection is already listening")}function an(){if(!ze())throw new Error("Call listen() first.")}function bn(E){return E===void 0?null:E}function Ur(E){if(E!==null)return E}function no(E){return E!=null&&!Array.isArray(E)&&typeof E=="object"}function L(E,j){switch(E){case $e.ParameterStructures.auto:return no(j)?Ur(j):[bn(j)];case $e.ParameterStructures.byName:if(!no(j))throw new Error("Received parameters by name but param is not an object literal.");return Ur(j);case $e.ParameterStructures.byPosition:return [bn(j)];default:throw new Error(`Unknown parameter structure ${E.toString()}`)}}function v(E,j){let G,ee=E.numberOfParams;switch(ee){case 0:G=void 0;break;case 1:G=L(E.parameterStructures,j[0]);break;default:G=[];for(let Ce=0;Ce<j.length&&Ce<ee;Ce++)G.push(bn(j[Ce]));if(j.length<ee)for(let Ce=j.length;Ce<ee;Ce++)G.push(null);break}return G}let b={sendNotification:(E,...j)=>{He();let G,ee;if(Yt.string(E)){G=E;let Le=j[0],Ne=0,Pe=$e.ParameterStructures.auto;$e.ParameterStructures.is(Le)&&(Ne=1,Pe=Le);let Ie=j.length,xt=Ie-Ne;switch(xt){case 0:ee=void 0;break;case 1:ee=L(Pe,j[Ne]);break;default:if(Pe===$e.ParameterStructures.byName)throw new Error(`Received ${xt} parameters for 'by Name' notification parameter structure.`);ee=j.slice(Ne,Ie).map(ct=>bn(ct));break}}else {let Le=j;G=E.method,ee=v(E,Le);}let Ce={jsonrpc:c,method:G,params:ee};return et(Ce),t.write(Ce).catch(Le=>{throw i.error("Sending notification failed."),Le})},onNotification:(E,j)=>{He();let G;return Yt.func(E)?g=E:j&&(Yt.string(E)?(G=E,w.set(E,{type:void 0,handler:j})):(G=E.method,w.set(E.method,{type:E,handler:j}))),{dispose:()=>{G!==void 0?w.delete(G):g=void 0;}}},onProgress:(E,j,G)=>{if(y.has(j))throw new Error(`Progress handler for token ${j} already registered`);return y.set(j,G),{dispose:()=>{y.delete(j);}}},sendProgress:(E,j,G)=>b.sendNotification(Du.type,{token:j,value:G}),onUnhandledProgress:K.event,sendRequest:(E,...j)=>{He(),an();let G,ee,Ce;if(Yt.string(E)){G=E;let Ie=j[0],xt=j[j.length-1],ct=0,zt=$e.ParameterStructures.auto;$e.ParameterStructures.is(Ie)&&(ct=1,zt=Ie);let or=j.length;Wb.CancellationToken.is(xt)&&(or=or-1,Ce=xt);let Kr=or-ct;switch(Kr){case 0:ee=void 0;break;case 1:ee=L(zt,j[ct]);break;default:if(zt===$e.ParameterStructures.byName)throw new Error(`Received ${Kr} parameters for 'by Name' request parameter structure.`);ee=j.slice(ct,or).map(ti=>bn(ti));break}}else {let Ie=j;G=E.method,ee=v(E,Ie);let xt=E.numberOfParams;Ce=Wb.CancellationToken.is(Ie[xt])?Ie[xt]:void 0;}let Le=o++,Ne;Ce&&(Ne=Ce.onCancellationRequested(()=>{let Ie=fe.sender.sendCancellation(b,Le);return Ie===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Le}`),Promise.resolve()):Ie.catch(()=>{i.log(`Sending cancellation messages for id ${Le} failed`);})}));let Pe={jsonrpc:c,id:Le,method:G,params:ee};return Ue(Pe),typeof fe.sender.enableCancellation=="function"&&fe.sender.enableCancellation(Pe),new Promise(async(Ie,xt)=>{let ct=Kr=>{Ie(Kr),fe.sender.cleanup(Le),Ne?.dispose();},zt=Kr=>{xt(Kr),fe.sender.cleanup(Le),Ne?.dispose();},or={method:G,timerStart:Date.now(),resolve:ct,reject:zt};try{await t.write(Pe),D.set(Le,or);}catch(Kr){throw i.error("Sending request failed."),or.reject(new $e.ResponseError($e.ErrorCodes.MessageWriteError,Kr.message?Kr.message:"Unknown reason")),Kr}})},onRequest:(E,j)=>{He();let G=null;return Vb.is(E)?(G=void 0,l=E):Yt.string(E)?(G=null,j!==void 0&&(G=E,u.set(E,{handler:j,type:void 0}))):j!==void 0&&(G=E.method,u.set(E.method,{type:E,handler:j})),{dispose:()=>{G!==null&&(G!==void 0?u.delete(G):l=void 0);}}},hasPendingResponse:()=>D.size>0,trace:async(E,j,G)=>{let ee=!1,Ce=yn.Text;G!==void 0&&(Yt.boolean(G)?ee=G:(ee=G.sendNotification||!1,Ce=G.traceFormat||yn.Text)),R=E,T=Ce,R===mt.Off?$=void 0:$=j,ee&&!Rt()&&!Qe()&&await b.sendNotification(Gb.type,{value:mt.toString(E)});},onError:q.event,onClose:k.event,onUnhandledNotification:V.event,onDispose:ve.event,end:()=>{t.end();},dispose:()=>{if(Qe())return;P=Qn.Disposed,ve.fire(void 0);let E=new $e.ResponseError($e.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let j of D.values())j.reject(E);D=new Map,C=new Map,A=new Set,x=new kO.LinkedMap,Yt.func(t.dispose)&&t.dispose(),Yt.func(e.dispose)&&e.dispose();},listen:()=>{He(),at(),P=Qn.Listening,e.listen(F);},inspect:()=>{(0, OO.default)().console.log("inspect");}};return b.onNotification(qd.type,E=>{if(R===mt.Off||!$)return;let j=R===mt.Verbose||R===mt.Compact;$.log(E.message,j?E.verbose:void 0);}),b.onNotification(Du.type,E=>{let j=y.get(E.token);j?j(E.value):K.fire(E);}),b}Je.createMessageConnection=YH;});var Wd=X(oe=>{d();p();h();Object.defineProperty(oe,"__esModule",{value:!0});oe.ProgressType=oe.ProgressToken=oe.createMessageConnection=oe.NullLogger=oe.ConnectionOptions=oe.ConnectionStrategy=oe.AbstractMessageBuffer=oe.WriteableStreamMessageWriter=oe.AbstractMessageWriter=oe.MessageWriter=oe.ReadableStreamMessageReader=oe.AbstractMessageReader=oe.MessageReader=oe.SharedArrayReceiverStrategy=oe.SharedArraySenderStrategy=oe.CancellationToken=oe.CancellationTokenSource=oe.Emitter=oe.Event=oe.Disposable=oe.LRUCache=oe.Touch=oe.LinkedMap=oe.ParameterStructures=oe.NotificationType9=oe.NotificationType8=oe.NotificationType7=oe.NotificationType6=oe.NotificationType5=oe.NotificationType4=oe.NotificationType3=oe.NotificationType2=oe.NotificationType1=oe.NotificationType0=oe.NotificationType=oe.ErrorCodes=oe.ResponseError=oe.RequestType9=oe.RequestType8=oe.RequestType7=oe.RequestType6=oe.RequestType5=oe.RequestType4=oe.RequestType3=oe.RequestType2=oe.RequestType1=oe.RequestType0=oe.RequestType=oe.Message=oe.RAL=void 0;oe.MessageStrategy=oe.CancellationStrategy=oe.CancellationSenderStrategy=oe.CancellationReceiverStrategy=oe.ConnectionError=oe.ConnectionErrors=oe.LogTraceNotification=oe.SetTraceNotification=oe.TraceFormat=oe.TraceValues=oe.Trace=void 0;var Pt=Sb();Object.defineProperty(oe,"Message",{enumerable:!0,get:function(){return Pt.Message}});Object.defineProperty(oe,"RequestType",{enumerable:!0,get:function(){return Pt.RequestType}});Object.defineProperty(oe,"RequestType0",{enumerable:!0,get:function(){return Pt.RequestType0}});Object.defineProperty(oe,"RequestType1",{enumerable:!0,get:function(){return Pt.RequestType1}});Object.defineProperty(oe,"RequestType2",{enumerable:!0,get:function(){return Pt.RequestType2}});Object.defineProperty(oe,"RequestType3",{enumerable:!0,get:function(){return Pt.RequestType3}});Object.defineProperty(oe,"RequestType4",{enumerable:!0,get:function(){return Pt.RequestType4}});Object.defineProperty(oe,"RequestType5",{enumerable:!0,get:function(){return Pt.RequestType5}});Object.defineProperty(oe,"RequestType6",{enumerable:!0,get:function(){return Pt.RequestType6}});Object.defineProperty(oe,"RequestType7",{enumerable:!0,get:function(){return Pt.RequestType7}});Object.defineProperty(oe,"RequestType8",{enumerable:!0,get:function(){return Pt.RequestType8}});Object.defineProperty(oe,"RequestType9",{enumerable:!0,get:function(){return Pt.RequestType9}});Object.defineProperty(oe,"ResponseError",{enumerable:!0,get:function(){return Pt.ResponseError}});Object.defineProperty(oe,"ErrorCodes",{enumerable:!0,get:function(){return Pt.ErrorCodes}});Object.defineProperty(oe,"NotificationType",{enumerable:!0,get:function(){return Pt.NotificationType}});Object.defineProperty(oe,"NotificationType0",{enumerable:!0,get:function(){return Pt.NotificationType0}});Object.defineProperty(oe,"NotificationType1",{enumerable:!0,get:function(){return Pt.NotificationType1}});Object.defineProperty(oe,"NotificationType2",{enumerable:!0,get:function(){return Pt.NotificationType2}});Object.defineProperty(oe,"NotificationType3",{enumerable:!0,get:function(){return Pt.NotificationType3}});Object.defineProperty(oe,"NotificationType4",{enumerable:!0,get:function(){return Pt.NotificationType4}});Object.defineProperty(oe,"NotificationType5",{enumerable:!0,get:function(){return Pt.NotificationType5}});Object.defineProperty(oe,"NotificationType6",{enumerable:!0,get:function(){return Pt.NotificationType6}});Object.defineProperty(oe,"NotificationType7",{enumerable:!0,get:function(){return Pt.NotificationType7}});Object.defineProperty(oe,"NotificationType8",{enumerable:!0,get:function(){return Pt.NotificationType8}});Object.defineProperty(oe,"NotificationType9",{enumerable:!0,get:function(){return Pt.NotificationType9}});Object.defineProperty(oe,"ParameterStructures",{enumerable:!0,get:function(){return Pt.ParameterStructures}});var Jb=xb();Object.defineProperty(oe,"LinkedMap",{enumerable:!0,get:function(){return Jb.LinkedMap}});Object.defineProperty(oe,"LRUCache",{enumerable:!0,get:function(){return Jb.LRUCache}});Object.defineProperty(oe,"Touch",{enumerable:!0,get:function(){return Jb.Touch}});var XH=EO();Object.defineProperty(oe,"Disposable",{enumerable:!0,get:function(){return XH.Disposable}});var FO=ka();Object.defineProperty(oe,"Event",{enumerable:!0,get:function(){return FO.Event}});Object.defineProperty(oe,"Emitter",{enumerable:!0,get:function(){return FO.Emitter}});var $O=Ld();Object.defineProperty(oe,"CancellationTokenSource",{enumerable:!0,get:function(){return $O.CancellationTokenSource}});Object.defineProperty(oe,"CancellationToken",{enumerable:!0,get:function(){return $O.CancellationToken}});var jO=CO();Object.defineProperty(oe,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return jO.SharedArraySenderStrategy}});Object.defineProperty(oe,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return jO.SharedArrayReceiverStrategy}});var Kb=TO();Object.defineProperty(oe,"MessageReader",{enumerable:!0,get:function(){return Kb.MessageReader}});Object.defineProperty(oe,"AbstractMessageReader",{enumerable:!0,get:function(){return Kb.AbstractMessageReader}});Object.defineProperty(oe,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Kb.ReadableStreamMessageReader}});var Zb=DO();Object.defineProperty(oe,"MessageWriter",{enumerable:!0,get:function(){return Zb.MessageWriter}});Object.defineProperty(oe,"AbstractMessageWriter",{enumerable:!0,get:function(){return Zb.AbstractMessageWriter}});Object.defineProperty(oe,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Zb.WriteableStreamMessageWriter}});var JH=LO();Object.defineProperty(oe,"AbstractMessageBuffer",{enumerable:!0,get:function(){return JH.AbstractMessageBuffer}});var Tr=qO();Object.defineProperty(oe,"ConnectionStrategy",{enumerable:!0,get:function(){return Tr.ConnectionStrategy}});Object.defineProperty(oe,"ConnectionOptions",{enumerable:!0,get:function(){return Tr.ConnectionOptions}});Object.defineProperty(oe,"NullLogger",{enumerable:!0,get:function(){return Tr.NullLogger}});Object.defineProperty(oe,"createMessageConnection",{enumerable:!0,get:function(){return Tr.createMessageConnection}});Object.defineProperty(oe,"ProgressToken",{enumerable:!0,get:function(){return Tr.ProgressToken}});Object.defineProperty(oe,"ProgressType",{enumerable:!0,get:function(){return Tr.ProgressType}});Object.defineProperty(oe,"Trace",{enumerable:!0,get:function(){return Tr.Trace}});Object.defineProperty(oe,"TraceValues",{enumerable:!0,get:function(){return Tr.TraceValues}});Object.defineProperty(oe,"TraceFormat",{enumerable:!0,get:function(){return Tr.TraceFormat}});Object.defineProperty(oe,"SetTraceNotification",{enumerable:!0,get:function(){return Tr.SetTraceNotification}});Object.defineProperty(oe,"LogTraceNotification",{enumerable:!0,get:function(){return Tr.LogTraceNotification}});Object.defineProperty(oe,"ConnectionErrors",{enumerable:!0,get:function(){return Tr.ConnectionErrors}});Object.defineProperty(oe,"ConnectionError",{enumerable:!0,get:function(){return Tr.ConnectionError}});Object.defineProperty(oe,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Tr.CancellationReceiverStrategy}});Object.defineProperty(oe,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Tr.CancellationSenderStrategy}});Object.defineProperty(oe,"CancellationStrategy",{enumerable:!0,get:function(){return Tr.CancellationStrategy}});Object.defineProperty(oe,"MessageStrategy",{enumerable:!0,get:function(){return Tr.MessageStrategy}});var KH=Lo();oe.RAL=KH.default;});var BO=X(rw=>{d();p();h();Object.defineProperty(rw,"__esModule",{value:!0});var bi=Wd(),zd=class e extends bi.AbstractMessageBuffer{constructor(t="utf-8"){super(t),this.asciiDecoder=new TextDecoder("ascii");}emptyBuffer(){return e.emptyBuffer}fromString(t,r){return new TextEncoder().encode(t)}toString(t,r){return r==="ascii"?this.asciiDecoder.decode(t):new TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t:t.slice(0,r)}allocNative(t){return new Uint8Array(t)}};zd.emptyBuffer=new Uint8Array(0);var Qb=class{constructor(t){this.socket=t,this._onData=new bi.Emitter,this._messageListener=r=>{r.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i));},()=>{(0, bi.RAL)().console.error("Converting blob to array buffer failed.");});},this.socket.addEventListener("message",this._messageListener);}onClose(t){return this.socket.addEventListener("close",t),bi.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),bi.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),bi.Disposable.create(()=>this.socket.removeEventListener("end",t))}onData(t){return this._onData.event(t)}},ew=class{constructor(t){this.socket=t;}onClose(t){return this.socket.addEventListener("close",t),bi.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),bi.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),bi.Disposable.create(()=>this.socket.removeEventListener("end",t))}write(t,r){if(typeof t=="string"){if(r!==void 0&&r!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${r}`);this.socket.send(t);}else this.socket.send(t);return Promise.resolve()}end(){this.socket.close();}},ZH=new TextEncoder,UO=Object.freeze({messageBuffer:Object.freeze({create:e=>new zd(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if(t.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(ZH.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new Qb(e),asWritableStream:e=>new ew(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){let n=setTimeout(e,t,...r);return {dispose:()=>clearTimeout(n)}},setImmediate(e,...t){let r=setTimeout(e,0,...t);return {dispose:()=>clearTimeout(r)}},setInterval(e,t,...r){let n=setInterval(e,t,...r);return {dispose:()=>clearInterval(n)}}})});function tw(){return UO}(function(e){function t(){bi.RAL.install(UO);}e.install=t;})(tw||(tw={}));rw.default=tw;});var As=X(vn=>{d();p();h();var QH=vn&&vn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),eV=vn&&vn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&QH(t,e,r);};Object.defineProperty(vn,"__esModule",{value:!0});vn.createMessageConnection=vn.BrowserMessageWriter=vn.BrowserMessageReader=void 0;var tV=BO();tV.default.install();var $a=Wd();eV(Wd(),vn);var nw=class extends $a.AbstractMessageReader{constructor(t){super(),this._onData=new $a.Emitter,this._messageListener=r=>{this._onData.fire(r.data);},t.addEventListener("error",r=>this.fireError(r)),t.onmessage=this._messageListener;}listen(t){return this._onData.event(t)}};vn.BrowserMessageReader=nw;var iw=class extends $a.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.addEventListener("error",r=>this.fireError(r));}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount);}end(){}};vn.BrowserMessageWriter=iw;function rV(e,t,r,n){return r===void 0&&(r=$a.NullLogger),$a.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, $a.createMessageConnection)(e,t,r,n)}vn.createMessageConnection=rV;});var ow=X((Oge,WO)=>{d();p();h();WO.exports=As();});var Qd={};Ws(Qd,{AnnotatedTextEdit:()=>Zi,ChangeAnnotation:()=>Ps,ChangeAnnotationIdentifier:()=>Rr,CodeAction:()=>jw,CodeActionContext:()=>$w,CodeActionKind:()=>Fw,CodeActionTriggerKind:()=>ju,CodeDescription:()=>gw,CodeLens:()=>Uw,Color:()=>Vd,ColorInformation:()=>uw,ColorPresentation:()=>lw,Command:()=>Ds,CompletionItem:()=>Tw,CompletionItemKind:()=>ww,CompletionItemLabelDetails:()=>_w,CompletionItemTag:()=>Ew,CompletionList:()=>Rw,CreateFile:()=>Ua,DeleteFile:()=>Wa,Diagnostic:()=>Mu,DiagnosticRelatedInformation:()=>Gd,DiagnosticSeverity:()=>hw,DiagnosticTag:()=>pw,DocumentHighlight:()=>Lw,DocumentHighlightKind:()=>Dw,DocumentLink:()=>Ww,DocumentSymbol:()=>qw,DocumentUri:()=>sw,EOL:()=>nV,FoldingRange:()=>dw,FoldingRangeKind:()=>fw,FormattingOptions:()=>Bw,Hover:()=>Iw,InlayHint:()=>Zw,InlayHintKind:()=>Kd,InlayHintLabelPart:()=>Zd,InlineCompletionContext:()=>i0,InlineCompletionItem:()=>e0,InlineCompletionList:()=>t0,InlineCompletionTriggerKind:()=>r0,InlineValueContext:()=>Kw,InlineValueEvaluatableExpression:()=>Jw,InlineValueText:()=>Yw,InlineValueVariableLookup:()=>Xw,InsertReplaceEdit:()=>xw,InsertTextFormat:()=>Sw,InsertTextMode:()=>Cw,Location:()=>Nu,LocationLink:()=>cw,MarkedString:()=>$u,MarkupContent:()=>za,MarkupKind:()=>Jd,OptionalVersionedTextDocumentIdentifier:()=>Fu,ParameterInformation:()=>Aw,Position:()=>Ln,Range:()=>Kt,RenameFile:()=>Ba,SelectedCompletionInfo:()=>n0,SelectionRange:()=>zw,SemanticTokenModifiers:()=>Vw,SemanticTokenTypes:()=>Hw,SemanticTokens:()=>Gw,SignatureInformation:()=>Pw,StringValue:()=>Qw,SymbolInformation:()=>Nw,SymbolKind:()=>Ow,SymbolTag:()=>kw,TextDocument:()=>s0,TextDocumentEdit:()=>qu,TextDocumentIdentifier:()=>yw,TextDocumentItem:()=>bw,TextEdit:()=>wi,URI:()=>Hd,VersionedTextDocumentIdentifier:()=>vw,WorkspaceChange:()=>mw,WorkspaceEdit:()=>Yd,WorkspaceFolder:()=>o0,WorkspaceSymbol:()=>Mw,integer:()=>aw,uinteger:()=>ku});var sw,Hd,aw,ku,Ln,Kt,Nu,cw,Vd,uw,lw,fw,dw,Gd,hw,pw,gw,Mu,Ds,wi,Ps,Rr,Zi,qu,Ua,Ba,Wa,Yd,ja,Xd,mw,yw,vw,Fu,bw,Jd,za,ww,Sw,Ew,xw,Cw,_w,Tw,Rw,$u,Iw,Aw,Pw,Dw,Lw,Ow,kw,Nw,Mw,qw,Fw,ju,$w,jw,Uw,Bw,Ww,zw,Hw,Vw,Gw,Yw,Xw,Jw,Kw,Kd,Zd,Zw,Qw,e0,t0,r0,n0,i0,o0,nV,s0,a0,re,eh=jn(()=>{d();p();h();(function(e){function t(r){return typeof r=="string"}e.is=t;})(sw||(sw={}));(function(e){function t(r){return typeof r=="string"}e.is=t;})(Hd||(Hd={}));(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t;})(aw||(aw={}));(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t;})(ku||(ku={}));(function(e){function t(n,i){return n===Number.MAX_VALUE&&(n=ku.MAX_VALUE),i===Number.MAX_VALUE&&(i=ku.MAX_VALUE),{line:n,character:i}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&re.uinteger(i.line)&&re.uinteger(i.character)}e.is=r;})(Ln||(Ln={}));(function(e){function t(n,i,o,s){if(re.uinteger(n)&&re.uinteger(i)&&re.uinteger(o)&&re.uinteger(s))return {start:Ln.create(n,i),end:Ln.create(o,s)};if(Ln.is(n)&&Ln.is(i))return {start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${s}]`)}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Ln.is(i.start)&&Ln.is(i.end)}e.is=r;})(Kt||(Kt={}));(function(e){function t(n,i){return {uri:n,range:i}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Kt.is(i.range)&&(re.string(i.uri)||re.undefined(i.uri))}e.is=r;})(Nu||(Nu={}));(function(e){function t(n,i,o,s){return {targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Kt.is(i.targetRange)&&re.string(i.targetUri)&&Kt.is(i.targetSelectionRange)&&(Kt.is(i.originSelectionRange)||re.undefined(i.originSelectionRange))}e.is=r;})(cw||(cw={}));(function(e){function t(n,i,o,s){return {red:n,green:i,blue:o,alpha:s}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&re.numberRange(i.red,0,1)&&re.numberRange(i.green,0,1)&&re.numberRange(i.blue,0,1)&&re.numberRange(i.alpha,0,1)}e.is=r;})(Vd||(Vd={}));(function(e){function t(n,i){return {range:n,color:i}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Kt.is(i.range)&&Vd.is(i.color)}e.is=r;})(uw||(uw={}));(function(e){function t(n,i,o){return {label:n,textEdit:i,additionalTextEdits:o}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&re.string(i.label)&&(re.undefined(i.textEdit)||wi.is(i))&&(re.undefined(i.additionalTextEdits)||re.typedArray(i.additionalTextEdits,wi.is))}e.is=r;})(lw||(lw={}));(function(e){e.Comment="comment",e.Imports="imports",e.Region="region";})(fw||(fw={}));(function(e){function t(n,i,o,s,a,c){let l={startLine:n,endLine:i};return re.defined(o)&&(l.startCharacter=o),re.defined(s)&&(l.endCharacter=s),re.defined(a)&&(l.kind=a),re.defined(c)&&(l.collapsedText=c),l}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&re.uinteger(i.startLine)&&re.uinteger(i.startLine)&&(re.undefined(i.startCharacter)||re.uinteger(i.startCharacter))&&(re.undefined(i.endCharacter)||re.uinteger(i.endCharacter))&&(re.undefined(i.kind)||re.string(i.kind))}e.is=r;})(dw||(dw={}));(function(e){function t(n,i){return {location:n,message:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&Nu.is(i.location)&&re.string(i.message)}e.is=r;})(Gd||(Gd={}));(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4;})(hw||(hw={}));(function(e){e.Unnecessary=1,e.Deprecated=2;})(pw||(pw={}));(function(e){function t(r){let n=r;return re.objectLiteral(n)&&re.string(n.href)}e.is=t;})(gw||(gw={}));(function(e){function t(n,i,o,s,a,c){let l={range:n,message:i};return re.defined(o)&&(l.severity=o),re.defined(s)&&(l.code=s),re.defined(a)&&(l.source=a),re.defined(c)&&(l.relatedInformation=c),l}e.create=t;function r(n){var i;let o=n;return re.defined(o)&&Kt.is(o.range)&&re.string(o.message)&&(re.number(o.severity)||re.undefined(o.severity))&&(re.integer(o.code)||re.string(o.code)||re.undefined(o.code))&&(re.undefined(o.codeDescription)||re.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(re.string(o.source)||re.undefined(o.source))&&(re.undefined(o.relatedInformation)||re.typedArray(o.relatedInformation,Gd.is))}e.is=r;})(Mu||(Mu={}));(function(e){function t(n,i,...o){let s={title:n,command:i};return re.defined(o)&&o.length>0&&(s.arguments=o),s}e.create=t;function r(n){let i=n;return re.defined(i)&&re.string(i.title)&&re.string(i.command)}e.is=r;})(Ds||(Ds={}));(function(e){function t(o,s){return {range:o,newText:s}}e.replace=t;function r(o,s){return {range:{start:o,end:o},newText:s}}e.insert=r;function n(o){return {range:o,newText:""}}e.del=n;function i(o){let s=o;return re.objectLiteral(s)&&re.string(s.newText)&&Kt.is(s.range)}e.is=i;})(wi||(wi={}));(function(e){function t(n,i,o){let s={label:n};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&re.string(i.label)&&(re.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(re.string(i.description)||i.description===void 0)}e.is=r;})(Ps||(Ps={}));(function(e){function t(r){let n=r;return re.string(n)}e.is=t;})(Rr||(Rr={}));(function(e){function t(o,s,a){return {range:o,newText:s,annotationId:a}}e.replace=t;function r(o,s,a){return {range:{start:o,end:o},newText:s,annotationId:a}}e.insert=r;function n(o,s){return {range:o,newText:"",annotationId:s}}e.del=n;function i(o){let s=o;return wi.is(s)&&(Ps.is(s.annotationId)||Rr.is(s.annotationId))}e.is=i;})(Zi||(Zi={}));(function(e){function t(n,i){return {textDocument:n,edits:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&Fu.is(i.textDocument)&&Array.isArray(i.edits)}e.is=r;})(qu||(qu={}));(function(e){function t(n,i,o){let s={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){let i=n;return i&&i.kind==="create"&&re.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||re.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||re.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Rr.is(i.annotationId))}e.is=r;})(Ua||(Ua={}));(function(e){function t(n,i,o,s){let a={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}e.create=t;function r(n){let i=n;return i&&i.kind==="rename"&&re.string(i.oldUri)&&re.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||re.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||re.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Rr.is(i.annotationId))}e.is=r;})(Ba||(Ba={}));(function(e){function t(n,i,o){let s={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){let i=n;return i&&i.kind==="delete"&&re.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||re.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||re.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Rr.is(i.annotationId))}e.is=r;})(Wa||(Wa={}));(function(e){function t(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>re.string(i.kind)?Ua.is(i)||Ba.is(i)||Wa.is(i):qu.is(i)))}e.is=t;})(Yd||(Yd={}));ja=class{constructor(t,r){this.edits=t,this.changeAnnotations=r;}insert(t,r,n){let i,o;if(n===void 0?i=wi.insert(t,r):Rr.is(n)?(o=n,i=Zi.insert(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Zi.insert(t,r,o)),this.edits.push(i),o!==void 0)return o}replace(t,r,n){let i,o;if(n===void 0?i=wi.replace(t,r):Rr.is(n)?(o=n,i=Zi.replace(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Zi.replace(t,r,o)),this.edits.push(i),o!==void 0)return o}delete(t,r){let n,i;if(r===void 0?n=wi.del(t):Rr.is(r)?(i=r,n=Zi.del(t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Zi.del(t,i)),this.edits.push(n),i!==void 0)return i}add(t){this.edits.push(t);}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length);}assertChangeAnnotations(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}},Xd=class{constructor(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0;}all(){return this._annotations}get size(){return this._size}manage(t,r){let n;if(Rr.is(t)?n=t:(n=this.nextId(),r=t),this._annotations[n]!==void 0)throw new Error(`Id ${n} is already in use.`);if(r===void 0)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=r,this._size++,n}nextId(){return this._counter++,this._counter.toString()}},mw=class{constructor(t){this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new Xd(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(r=>{if(qu.is(r)){let n=new ja(r.edits,this._changeAnnotations);this._textEditChanges[r.textDocument.uri]=n;}})):t.changes&&Object.keys(t.changes).forEach(r=>{let n=new ja(t.changes[r]);this._textEditChanges[r]=n;})):this._workspaceEdit={};}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(t){if(Fu.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let r={uri:t.uri,version:t.version},n=this._textEditChanges[r.uri];if(!n){let i=[],o={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(o),n=new ja(i,this._changeAnnotations),this._textEditChanges[r.uri]=n;}return n}else {if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let r=this._textEditChanges[t];if(!r){let n=[];this._workspaceEdit.changes[t]=n,r=new ja(n),this._textEditChanges[t]=r;}return r}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Xd,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all());}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null));}createFile(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Ps.is(r)||Rr.is(r)?i=r:n=r;let o,s;if(i===void 0?o=Ua.create(t,n):(s=Rr.is(i)?i:this._changeAnnotations.manage(i),o=Ua.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s}renameFile(t,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let o;Ps.is(n)||Rr.is(n)?o=n:i=n;let s,a;if(o===void 0?s=Ba.create(t,r,i):(a=Rr.is(o)?o:this._changeAnnotations.manage(o),s=Ba.create(t,r,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}deleteFile(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Ps.is(r)||Rr.is(r)?i=r:n=r;let o,s;if(i===void 0?o=Wa.create(t,n):(s=Rr.is(i)?i:this._changeAnnotations.manage(i),o=Wa.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s}};(function(e){function t(n){return {uri:n}}e.create=t;function r(n){let i=n;return re.defined(i)&&re.string(i.uri)}e.is=r;})(yw||(yw={}));(function(e){function t(n,i){return {uri:n,version:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&re.string(i.uri)&&re.integer(i.version)}e.is=r;})(vw||(vw={}));(function(e){function t(n,i){return {uri:n,version:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&re.string(i.uri)&&(i.version===null||re.integer(i.version))}e.is=r;})(Fu||(Fu={}));(function(e){function t(n,i,o,s){return {uri:n,languageId:i,version:o,text:s}}e.create=t;function r(n){let i=n;return re.defined(i)&&re.string(i.uri)&&re.string(i.languageId)&&re.integer(i.version)&&re.string(i.text)}e.is=r;})(bw||(bw={}));(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(r){let n=r;return n===e.PlainText||n===e.Markdown}e.is=t;})(Jd||(Jd={}));(function(e){function t(r){let n=r;return re.objectLiteral(r)&&Jd.is(n.kind)&&re.string(n.value)}e.is=t;})(za||(za={}));(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25;})(ww||(ww={}));(function(e){e.PlainText=1,e.Snippet=2;})(Sw||(Sw={}));(function(e){e.Deprecated=1;})(Ew||(Ew={}));(function(e){function t(n,i,o){return {newText:n,insert:i,replace:o}}e.create=t;function r(n){let i=n;return i&&re.string(i.newText)&&Kt.is(i.insert)&&Kt.is(i.replace)}e.is=r;})(xw||(xw={}));(function(e){e.asIs=1,e.adjustIndentation=2;})(Cw||(Cw={}));(function(e){function t(r){let n=r;return n&&(re.string(n.detail)||n.detail===void 0)&&(re.string(n.description)||n.description===void 0)}e.is=t;})(_w||(_w={}));(function(e){function t(r){return {label:r}}e.create=t;})(Tw||(Tw={}));(function(e){function t(r,n){return {items:r||[],isIncomplete:!!n}}e.create=t;})(Rw||(Rw={}));(function(e){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(n){let i=n;return re.string(i)||re.objectLiteral(i)&&re.string(i.language)&&re.string(i.value)}e.is=r;})($u||($u={}));(function(e){function t(r){let n=r;return !!n&&re.objectLiteral(n)&&(za.is(n.contents)||$u.is(n.contents)||re.typedArray(n.contents,$u.is))&&(r.range===void 0||Kt.is(r.range))}e.is=t;})(Iw||(Iw={}));(function(e){function t(r,n){return n?{label:r,documentation:n}:{label:r}}e.create=t;})(Aw||(Aw={}));(function(e){function t(r,n,...i){let o={label:r};return re.defined(n)&&(o.documentation=n),re.defined(i)?o.parameters=i:o.parameters=[],o}e.create=t;})(Pw||(Pw={}));(function(e){e.Text=1,e.Read=2,e.Write=3;})(Dw||(Dw={}));(function(e){function t(r,n){let i={range:r};return re.number(n)&&(i.kind=n),i}e.create=t;})(Lw||(Lw={}));(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26;})(Ow||(Ow={}));(function(e){e.Deprecated=1;})(kw||(kw={}));(function(e){function t(r,n,i,o,s){let a={name:r,kind:n,location:{uri:o,range:i}};return s&&(a.containerName=s),a}e.create=t;})(Nw||(Nw={}));(function(e){function t(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}e.create=t;})(Mw||(Mw={}));(function(e){function t(n,i,o,s,a,c){let l={name:n,detail:i,kind:o,range:s,selectionRange:a};return c!==void 0&&(l.children=c),l}e.create=t;function r(n){let i=n;return i&&re.string(i.name)&&re.number(i.kind)&&Kt.is(i.range)&&Kt.is(i.selectionRange)&&(i.detail===void 0||re.string(i.detail))&&(i.deprecated===void 0||re.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=r;})(qw||(qw={}));(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll";})(Fw||(Fw={}));(function(e){e.Invoked=1,e.Automatic=2;})(ju||(ju={}));(function(e){function t(n,i,o){let s={diagnostics:n};return i!=null&&(s.only=i),o!=null&&(s.triggerKind=o),s}e.create=t;function r(n){let i=n;return re.defined(i)&&re.typedArray(i.diagnostics,Mu.is)&&(i.only===void 0||re.typedArray(i.only,re.string))&&(i.triggerKind===void 0||i.triggerKind===ju.Invoked||i.triggerKind===ju.Automatic)}e.is=r;})($w||($w={}));(function(e){function t(n,i,o){let s={title:n},a=!0;return typeof i=="string"?(a=!1,s.kind=i):Ds.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}e.create=t;function r(n){let i=n;return i&&re.string(i.title)&&(i.diagnostics===void 0||re.typedArray(i.diagnostics,Mu.is))&&(i.kind===void 0||re.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Ds.is(i.command))&&(i.isPreferred===void 0||re.boolean(i.isPreferred))&&(i.edit===void 0||Yd.is(i.edit))}e.is=r;})(jw||(jw={}));(function(e){function t(n,i){let o={range:n};return re.defined(i)&&(o.data=i),o}e.create=t;function r(n){let i=n;return re.defined(i)&&Kt.is(i.range)&&(re.undefined(i.command)||Ds.is(i.command))}e.is=r;})(Uw||(Uw={}));(function(e){function t(n,i){return {tabSize:n,insertSpaces:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&re.uinteger(i.tabSize)&&re.boolean(i.insertSpaces)}e.is=r;})(Bw||(Bw={}));(function(e){function t(n,i,o){return {range:n,target:i,data:o}}e.create=t;function r(n){let i=n;return re.defined(i)&&Kt.is(i.range)&&(re.undefined(i.target)||re.string(i.target))}e.is=r;})(Ww||(Ww={}));(function(e){function t(n,i){return {range:n,parent:i}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Kt.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=r;})(zw||(zw={}));(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator";})(Hw||(Hw={}));(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary";})(Vw||(Vw={}));(function(e){function t(r){let n=r;return re.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t;})(Gw||(Gw={}));(function(e){function t(n,i){return {range:n,text:i}}e.create=t;function r(n){let i=n;return i!=null&&Kt.is(i.range)&&re.string(i.text)}e.is=r;})(Yw||(Yw={}));(function(e){function t(n,i,o){return {range:n,variableName:i,caseSensitiveLookup:o}}e.create=t;function r(n){let i=n;return i!=null&&Kt.is(i.range)&&re.boolean(i.caseSensitiveLookup)&&(re.string(i.variableName)||i.variableName===void 0)}e.is=r;})(Xw||(Xw={}));(function(e){function t(n,i){return {range:n,expression:i}}e.create=t;function r(n){let i=n;return i!=null&&Kt.is(i.range)&&(re.string(i.expression)||i.expression===void 0)}e.is=r;})(Jw||(Jw={}));(function(e){function t(n,i){return {frameId:n,stoppedLocation:i}}e.create=t;function r(n){let i=n;return re.defined(i)&&Kt.is(n.stoppedLocation)}e.is=r;})(Kw||(Kw={}));(function(e){e.Type=1,e.Parameter=2;function t(r){return r===1||r===2}e.is=t;})(Kd||(Kd={}));(function(e){function t(n){return {value:n}}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&(i.tooltip===void 0||re.string(i.tooltip)||za.is(i.tooltip))&&(i.location===void 0||Nu.is(i.location))&&(i.command===void 0||Ds.is(i.command))}e.is=r;})(Zd||(Zd={}));(function(e){function t(n,i,o){let s={position:n,label:i};return o!==void 0&&(s.kind=o),s}e.create=t;function r(n){let i=n;return re.objectLiteral(i)&&Ln.is(i.position)&&(re.string(i.label)||re.typedArray(i.label,Zd.is))&&(i.kind===void 0||Kd.is(i.kind))&&i.textEdits===void 0||re.typedArray(i.textEdits,wi.is)&&(i.tooltip===void 0||re.string(i.tooltip)||za.is(i.tooltip))&&(i.paddingLeft===void 0||re.boolean(i.paddingLeft))&&(i.paddingRight===void 0||re.boolean(i.paddingRight))}e.is=r;})(Zw||(Zw={}));(function(e){function t(r){return {kind:"snippet",value:r}}e.createSnippet=t;})(Qw||(Qw={}));(function(e){function t(r,n,i,o){return {insertText:r,filterText:n,range:i,command:o}}e.create=t;})(e0||(e0={}));(function(e){function t(r){return {items:r}}e.create=t;})(t0||(t0={}));(function(e){e.Invoked=0,e.Automatic=1;})(r0||(r0={}));(function(e){function t(r,n){return {range:r,text:n}}e.create=t;})(n0||(n0={}));(function(e){function t(r,n){return {triggerKind:r,selectedCompletionInfo:n}}e.create=t;})(i0||(i0={}));(function(e){function t(r){let n=r;return re.objectLiteral(n)&&Hd.is(n.uri)&&re.string(n.name)}e.is=t;})(o0||(o0={}));nV=[`
`,`\r
`,"\r"];(function(e){function t(o,s,a,c){return new a0(o,s,a,c)}e.create=t;function r(o){let s=o;return !!(re.defined(s)&&re.string(s.uri)&&(re.undefined(s.languageId)||re.string(s.languageId))&&re.uinteger(s.lineCount)&&re.func(s.getText)&&re.func(s.positionAt)&&re.func(s.offsetAt))}e.is=r;function n(o,s){let a=o.getText(),c=i(s,(u,g)=>{let w=u.range.start.line-g.range.start.line;return w===0?u.range.start.character-g.range.start.character:w}),l=a.length;for(let u=c.length-1;u>=0;u--){let g=c[u],w=o.offsetAt(g.range.start),y=o.offsetAt(g.range.end);if(y<=l)a=a.substring(0,w)+g.newText+a.substring(y,a.length);else throw new Error("Overlapping edit");l=w;}return a}e.applyEdits=n;function i(o,s){if(o.length<=1)return o;let a=o.length/2|0,c=o.slice(0,a),l=o.slice(a);i(c,s),i(l,s);let u=0,g=0,w=0;for(;u<c.length&&g<l.length;)s(c[u],l[g])<=0?o[w++]=c[u++]:o[w++]=l[g++];for(;u<c.length;)o[w++]=c[u++];for(;g<l.length;)o[w++]=l[g++];return o}})(s0||(s0={}));a0=class{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0;}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0;}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(t.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++;}n&&r.length>0&&t.push(r.length),this._lineOffsets=t;}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Ln.create(0,t);for(;n<i;){let s=Math.floor((n+i)/2);r[s]>t?i=s:n=s+1;}let o=n-1;return Ln.create(o,t-r[o])}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)}get lineCount(){return this.getLineOffsets().length}};(function(e){let t=Object.prototype.toString;function r(y){return typeof y<"u"}e.defined=r;function n(y){return typeof y>"u"}e.undefined=n;function i(y){return y===!0||y===!1}e.boolean=i;function o(y){return t.call(y)==="[object String]"}e.string=o;function s(y){return t.call(y)==="[object Number]"}e.number=s;function a(y,_,x){return t.call(y)==="[object Number]"&&_<=y&&y<=x}e.numberRange=a;function c(y){return t.call(y)==="[object Number]"&&-2147483648<=y&&y<=2147483647}e.integer=c;function l(y){return t.call(y)==="[object Number]"&&0<=y&&y<=2147483647}e.uinteger=l;function u(y){return t.call(y)==="[object Function]"}e.func=u;function g(y){return y!==null&&typeof y=="object"}e.objectLiteral=g;function w(y,_){return Array.isArray(y)&&y.every(_)}e.typedArray=w;})(re||(re={}));});var Wt=X(rn=>{d();p();h();Object.defineProperty(rn,"__esModule",{value:!0});rn.ProtocolNotificationType=rn.ProtocolNotificationType0=rn.ProtocolRequestType=rn.ProtocolRequestType0=rn.RegistrationType=rn.MessageDirection=void 0;var Ha=As(),zO;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both";})(zO||(rn.MessageDirection=zO={}));var c0=class{constructor(t){this.method=t;}};rn.RegistrationType=c0;var u0=class extends Ha.RequestType0{constructor(t){super(t);}};rn.ProtocolRequestType0=u0;var l0=class extends Ha.RequestType{constructor(t){super(t,Ha.ParameterStructures.byName);}};rn.ProtocolRequestType=l0;var f0=class extends Ha.NotificationType0{constructor(t){super(t);}};rn.ProtocolNotificationType0=f0;var d0=class extends Ha.NotificationType{constructor(t){super(t,Ha.ParameterStructures.byName);}};rn.ProtocolNotificationType=d0;});var th=X(ar=>{d();p();h();Object.defineProperty(ar,"__esModule",{value:!0});ar.objectLiteral=ar.typedArray=ar.stringArray=ar.array=ar.func=ar.error=ar.number=ar.string=ar.boolean=void 0;function iV(e){return e===!0||e===!1}ar.boolean=iV;function HO(e){return typeof e=="string"||e instanceof String}ar.string=HO;function oV(e){return typeof e=="number"||e instanceof Number}ar.number=oV;function sV(e){return e instanceof Error}ar.error=sV;function aV(e){return typeof e=="function"}ar.func=aV;function VO(e){return Array.isArray(e)}ar.array=VO;function cV(e){return VO(e)&&e.every(t=>HO(t))}ar.stringArray=cV;function uV(e,t){return Array.isArray(e)&&e.every(t)}ar.typedArray=uV;function lV(e){return e!==null&&typeof e=="object"}ar.objectLiteral=lV;});var XO=X(rh=>{d();p();h();Object.defineProperty(rh,"__esModule",{value:!0});rh.ImplementationRequest=void 0;var GO=Wt(),YO;(function(e){e.method="textDocument/implementation",e.messageDirection=GO.MessageDirection.clientToServer,e.type=new GO.ProtocolRequestType(e.method);})(YO||(rh.ImplementationRequest=YO={}));});var ZO=X(nh=>{d();p();h();Object.defineProperty(nh,"__esModule",{value:!0});nh.TypeDefinitionRequest=void 0;var JO=Wt(),KO;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=JO.MessageDirection.clientToServer,e.type=new JO.ProtocolRequestType(e.method);})(KO||(nh.TypeDefinitionRequest=KO={}));});var tk=X(Va=>{d();p();h();Object.defineProperty(Va,"__esModule",{value:!0});Va.DidChangeWorkspaceFoldersNotification=Va.WorkspaceFoldersRequest=void 0;var ih=Wt(),QO;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=ih.MessageDirection.serverToClient,e.type=new ih.ProtocolRequestType0(e.method);})(QO||(Va.WorkspaceFoldersRequest=QO={}));var ek;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=ih.MessageDirection.clientToServer,e.type=new ih.ProtocolNotificationType(e.method);})(ek||(Va.DidChangeWorkspaceFoldersNotification=ek={}));});var ik=X(oh=>{d();p();h();Object.defineProperty(oh,"__esModule",{value:!0});oh.ConfigurationRequest=void 0;var rk=Wt(),nk;(function(e){e.method="workspace/configuration",e.messageDirection=rk.MessageDirection.serverToClient,e.type=new rk.ProtocolRequestType(e.method);})(nk||(oh.ConfigurationRequest=nk={}));});var ak=X(Ga=>{d();p();h();Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ColorPresentationRequest=Ga.DocumentColorRequest=void 0;var sh=Wt(),ok;(function(e){e.method="textDocument/documentColor",e.messageDirection=sh.MessageDirection.clientToServer,e.type=new sh.ProtocolRequestType(e.method);})(ok||(Ga.DocumentColorRequest=ok={}));var sk;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=sh.MessageDirection.clientToServer,e.type=new sh.ProtocolRequestType(e.method);})(sk||(Ga.ColorPresentationRequest=sk={}));});var lk=X(Ya=>{d();p();h();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.FoldingRangeRefreshRequest=Ya.FoldingRangeRequest=void 0;var ah=Wt(),ck;(function(e){e.method="textDocument/foldingRange",e.messageDirection=ah.MessageDirection.clientToServer,e.type=new ah.ProtocolRequestType(e.method);})(ck||(Ya.FoldingRangeRequest=ck={}));var uk;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=ah.MessageDirection.serverToClient,e.type=new ah.ProtocolRequestType0(e.method);})(uk||(Ya.FoldingRangeRefreshRequest=uk={}));});var hk=X(ch=>{d();p();h();Object.defineProperty(ch,"__esModule",{value:!0});ch.DeclarationRequest=void 0;var fk=Wt(),dk;(function(e){e.method="textDocument/declaration",e.messageDirection=fk.MessageDirection.clientToServer,e.type=new fk.ProtocolRequestType(e.method);})(dk||(ch.DeclarationRequest=dk={}));});var mk=X(uh=>{d();p();h();Object.defineProperty(uh,"__esModule",{value:!0});uh.SelectionRangeRequest=void 0;var pk=Wt(),gk;(function(e){e.method="textDocument/selectionRange",e.messageDirection=pk.MessageDirection.clientToServer,e.type=new pk.ProtocolRequestType(e.method);})(gk||(uh.SelectionRangeRequest=gk={}));});var wk=X(No=>{d();p();h();Object.defineProperty(No,"__esModule",{value:!0});No.WorkDoneProgressCancelNotification=No.WorkDoneProgressCreateRequest=No.WorkDoneProgress=void 0;var fV=As(),lh=Wt(),yk;(function(e){e.type=new fV.ProgressType;function t(r){return r===e.type}e.is=t;})(yk||(No.WorkDoneProgress=yk={}));var vk;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=lh.MessageDirection.serverToClient,e.type=new lh.ProtocolRequestType(e.method);})(vk||(No.WorkDoneProgressCreateRequest=vk={}));var bk;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=lh.MessageDirection.clientToServer,e.type=new lh.ProtocolNotificationType(e.method);})(bk||(No.WorkDoneProgressCancelNotification=bk={}));});var Ck=X(Mo=>{d();p();h();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.CallHierarchyOutgoingCallsRequest=Mo.CallHierarchyIncomingCallsRequest=Mo.CallHierarchyPrepareRequest=void 0;var Xa=Wt(),Sk;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Xa.MessageDirection.clientToServer,e.type=new Xa.ProtocolRequestType(e.method);})(Sk||(Mo.CallHierarchyPrepareRequest=Sk={}));var Ek;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Xa.MessageDirection.clientToServer,e.type=new Xa.ProtocolRequestType(e.method);})(Ek||(Mo.CallHierarchyIncomingCallsRequest=Ek={}));var xk;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Xa.MessageDirection.clientToServer,e.type=new Xa.ProtocolRequestType(e.method);})(xk||(Mo.CallHierarchyOutgoingCallsRequest=xk={}));});var Pk=X(nn=>{d();p();h();Object.defineProperty(nn,"__esModule",{value:!0});nn.SemanticTokensRefreshRequest=nn.SemanticTokensRangeRequest=nn.SemanticTokensDeltaRequest=nn.SemanticTokensRequest=nn.SemanticTokensRegistrationType=nn.TokenFormat=void 0;var Qi=Wt(),_k;(function(e){e.Relative="relative";})(_k||(nn.TokenFormat=_k={}));var Uu;(function(e){e.method="textDocument/semanticTokens",e.type=new Qi.RegistrationType(e.method);})(Uu||(nn.SemanticTokensRegistrationType=Uu={}));var Tk;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=Qi.MessageDirection.clientToServer,e.type=new Qi.ProtocolRequestType(e.method),e.registrationMethod=Uu.method;})(Tk||(nn.SemanticTokensRequest=Tk={}));var Rk;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=Qi.MessageDirection.clientToServer,e.type=new Qi.ProtocolRequestType(e.method),e.registrationMethod=Uu.method;})(Rk||(nn.SemanticTokensDeltaRequest=Rk={}));var Ik;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=Qi.MessageDirection.clientToServer,e.type=new Qi.ProtocolRequestType(e.method),e.registrationMethod=Uu.method;})(Ik||(nn.SemanticTokensRangeRequest=Ik={}));var Ak;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=Qi.MessageDirection.serverToClient,e.type=new Qi.ProtocolRequestType0(e.method);})(Ak||(nn.SemanticTokensRefreshRequest=Ak={}));});var Ok=X(fh=>{d();p();h();Object.defineProperty(fh,"__esModule",{value:!0});fh.ShowDocumentRequest=void 0;var Dk=Wt(),Lk;(function(e){e.method="window/showDocument",e.messageDirection=Dk.MessageDirection.serverToClient,e.type=new Dk.ProtocolRequestType(e.method);})(Lk||(fh.ShowDocumentRequest=Lk={}));});var Mk=X(dh=>{d();p();h();Object.defineProperty(dh,"__esModule",{value:!0});dh.LinkedEditingRangeRequest=void 0;var kk=Wt(),Nk;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=kk.MessageDirection.clientToServer,e.type=new kk.ProtocolRequestType(e.method);})(Nk||(dh.LinkedEditingRangeRequest=Nk={}));});var zk=X($r=>{d();p();h();Object.defineProperty($r,"__esModule",{value:!0});$r.WillDeleteFilesRequest=$r.DidDeleteFilesNotification=$r.DidRenameFilesNotification=$r.WillRenameFilesRequest=$r.DidCreateFilesNotification=$r.WillCreateFilesRequest=$r.FileOperationPatternKind=void 0;var On=Wt(),qk;(function(e){e.file="file",e.folder="folder";})(qk||($r.FileOperationPatternKind=qk={}));var Fk;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolRequestType(e.method);})(Fk||($r.WillCreateFilesRequest=Fk={}));var $k;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolNotificationType(e.method);})($k||($r.DidCreateFilesNotification=$k={}));var jk;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolRequestType(e.method);})(jk||($r.WillRenameFilesRequest=jk={}));var Uk;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolNotificationType(e.method);})(Uk||($r.DidRenameFilesNotification=Uk={}));var Bk;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolNotificationType(e.method);})(Bk||($r.DidDeleteFilesNotification=Bk={}));var Wk;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=On.MessageDirection.clientToServer,e.type=new On.ProtocolRequestType(e.method);})(Wk||($r.WillDeleteFilesRequest=Wk={}));});var Xk=X(qo=>{d();p();h();Object.defineProperty(qo,"__esModule",{value:!0});qo.MonikerRequest=qo.MonikerKind=qo.UniquenessLevel=void 0;var Hk=Wt(),Vk;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global";})(Vk||(qo.UniquenessLevel=Vk={}));var Gk;(function(e){e.$import="import",e.$export="export",e.local="local";})(Gk||(qo.MonikerKind=Gk={}));var Yk;(function(e){e.method="textDocument/moniker",e.messageDirection=Hk.MessageDirection.clientToServer,e.type=new Hk.ProtocolRequestType(e.method);})(Yk||(qo.MonikerRequest=Yk={}));});var Qk=X(Fo=>{d();p();h();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.TypeHierarchySubtypesRequest=Fo.TypeHierarchySupertypesRequest=Fo.TypeHierarchyPrepareRequest=void 0;var Ja=Wt(),Jk;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Ja.MessageDirection.clientToServer,e.type=new Ja.ProtocolRequestType(e.method);})(Jk||(Fo.TypeHierarchyPrepareRequest=Jk={}));var Kk;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Ja.MessageDirection.clientToServer,e.type=new Ja.ProtocolRequestType(e.method);})(Kk||(Fo.TypeHierarchySupertypesRequest=Kk={}));var Zk;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Ja.MessageDirection.clientToServer,e.type=new Ja.ProtocolRequestType(e.method);})(Zk||(Fo.TypeHierarchySubtypesRequest=Zk={}));});var r2=X(Ka=>{d();p();h();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.InlineValueRefreshRequest=Ka.InlineValueRequest=void 0;var hh=Wt(),e2;(function(e){e.method="textDocument/inlineValue",e.messageDirection=hh.MessageDirection.clientToServer,e.type=new hh.ProtocolRequestType(e.method);})(e2||(Ka.InlineValueRequest=e2={}));var t2;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=hh.MessageDirection.serverToClient,e.type=new hh.ProtocolRequestType0(e.method);})(t2||(Ka.InlineValueRefreshRequest=t2={}));});var s2=X($o=>{d();p();h();Object.defineProperty($o,"__esModule",{value:!0});$o.InlayHintRefreshRequest=$o.InlayHintResolveRequest=$o.InlayHintRequest=void 0;var Za=Wt(),n2;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Za.MessageDirection.clientToServer,e.type=new Za.ProtocolRequestType(e.method);})(n2||($o.InlayHintRequest=n2={}));var i2;(function(e){e.method="inlayHint/resolve",e.messageDirection=Za.MessageDirection.clientToServer,e.type=new Za.ProtocolRequestType(e.method);})(i2||($o.InlayHintResolveRequest=i2={}));var o2;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Za.MessageDirection.serverToClient,e.type=new Za.ProtocolRequestType0(e.method);})(o2||($o.InlayHintRefreshRequest=o2={}));});var h2=X(kn=>{d();p();h();Object.defineProperty(kn,"__esModule",{value:!0});kn.DiagnosticRefreshRequest=kn.WorkspaceDiagnosticRequest=kn.DocumentDiagnosticRequest=kn.DocumentDiagnosticReportKind=kn.DiagnosticServerCancellationData=void 0;var d2=As(),dV=th(),Qa=Wt(),a2;(function(e){function t(r){let n=r;return n&&dV.boolean(n.retriggerRequest)}e.is=t;})(a2||(kn.DiagnosticServerCancellationData=a2={}));var c2;(function(e){e.Full="full",e.Unchanged="unchanged";})(c2||(kn.DocumentDiagnosticReportKind=c2={}));var u2;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Qa.MessageDirection.clientToServer,e.type=new Qa.ProtocolRequestType(e.method),e.partialResult=new d2.ProgressType;})(u2||(kn.DocumentDiagnosticRequest=u2={}));var l2;(function(e){e.method="workspace/diagnostic",e.messageDirection=Qa.MessageDirection.clientToServer,e.type=new Qa.ProtocolRequestType(e.method),e.partialResult=new d2.ProgressType;})(l2||(kn.WorkspaceDiagnosticRequest=l2={}));var f2;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Qa.MessageDirection.serverToClient,e.type=new Qa.ProtocolRequestType0(e.method);})(f2||(kn.DiagnosticRefreshRequest=f2={}));});var w2=X(Zt=>{d();p();h();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DidCloseNotebookDocumentNotification=Zt.DidSaveNotebookDocumentNotification=Zt.DidChangeNotebookDocumentNotification=Zt.NotebookCellArrayChange=Zt.DidOpenNotebookDocumentNotification=Zt.NotebookDocumentSyncRegistrationType=Zt.NotebookDocument=Zt.NotebookCell=Zt.ExecutionSummary=Zt.NotebookCellKind=void 0;var Bu=(eh(),Ar(Qd)),ei=th(),Si=Wt(),h0;(function(e){e.Markup=1,e.Code=2;function t(r){return r===1||r===2}e.is=t;})(h0||(Zt.NotebookCellKind=h0={}));var p0;(function(e){function t(i,o){let s={executionOrder:i};return (o===!0||o===!1)&&(s.success=o),s}e.create=t;function r(i){let o=i;return ei.objectLiteral(o)&&Bu.uinteger.is(o.executionOrder)&&(o.success===void 0||ei.boolean(o.success))}e.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}e.equals=n;})(p0||(Zt.ExecutionSummary=p0={}));var ph;(function(e){function t(o,s){return {kind:o,document:s}}e.create=t;function r(o){let s=o;return ei.objectLiteral(s)&&h0.is(s.kind)&&Bu.DocumentUri.is(s.document)&&(s.metadata===void 0||ei.objectLiteral(s.metadata))}e.is=r;function n(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!p0.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}e.diff=n;function i(o,s){if(o===s)return !0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return !1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return !1;if(a&&c){if(o.length!==s.length)return !1;for(let l=0;l<o.length;l++)if(!i(o[l],s[l]))return !1}if(ei.objectLiteral(o)&&ei.objectLiteral(s)){let l=Object.keys(o),u=Object.keys(s);if(l.length!==u.length||(l.sort(),u.sort(),!i(l,u)))return !1;for(let g=0;g<l.length;g++){let w=l[g];if(!i(o[w],s[w]))return !1}}return !0}})(ph||(Zt.NotebookCell=ph={}));var p2;(function(e){function t(n,i,o,s){return {uri:n,notebookType:i,version:o,cells:s}}e.create=t;function r(n){let i=n;return ei.objectLiteral(i)&&ei.string(i.uri)&&Bu.integer.is(i.version)&&ei.typedArray(i.cells,ph.is)}e.is=r;})(p2||(Zt.NotebookDocument=p2={}));var ec;(function(e){e.method="notebookDocument/sync",e.messageDirection=Si.MessageDirection.clientToServer,e.type=new Si.RegistrationType(e.method);})(ec||(Zt.NotebookDocumentSyncRegistrationType=ec={}));var g2;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Si.MessageDirection.clientToServer,e.type=new Si.ProtocolNotificationType(e.method),e.registrationMethod=ec.method;})(g2||(Zt.DidOpenNotebookDocumentNotification=g2={}));var m2;(function(e){function t(n){let i=n;return ei.objectLiteral(i)&&Bu.uinteger.is(i.start)&&Bu.uinteger.is(i.deleteCount)&&(i.cells===void 0||ei.typedArray(i.cells,ph.is))}e.is=t;function r(n,i,o){let s={start:n,deleteCount:i};return o!==void 0&&(s.cells=o),s}e.create=r;})(m2||(Zt.NotebookCellArrayChange=m2={}));var y2;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Si.MessageDirection.clientToServer,e.type=new Si.ProtocolNotificationType(e.method),e.registrationMethod=ec.method;})(y2||(Zt.DidChangeNotebookDocumentNotification=y2={}));var v2;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Si.MessageDirection.clientToServer,e.type=new Si.ProtocolNotificationType(e.method),e.registrationMethod=ec.method;})(v2||(Zt.DidSaveNotebookDocumentNotification=v2={}));var b2;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Si.MessageDirection.clientToServer,e.type=new Si.ProtocolNotificationType(e.method),e.registrationMethod=ec.method;})(b2||(Zt.DidCloseNotebookDocumentNotification=b2={}));});var x2=X(gh=>{d();p();h();Object.defineProperty(gh,"__esModule",{value:!0});gh.InlineCompletionRequest=void 0;var S2=Wt(),E2;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=S2.MessageDirection.clientToServer,e.type=new S2.ProtocolRequestType(e.method);})(E2||(gh.InlineCompletionRequest=E2={}));});var MN=X(W=>{d();p();h();Object.defineProperty(W,"__esModule",{value:!0});W.WorkspaceSymbolRequest=W.CodeActionResolveRequest=W.CodeActionRequest=W.DocumentSymbolRequest=W.DocumentHighlightRequest=W.ReferencesRequest=W.DefinitionRequest=W.SignatureHelpRequest=W.SignatureHelpTriggerKind=W.HoverRequest=W.CompletionResolveRequest=W.CompletionRequest=W.CompletionTriggerKind=W.PublishDiagnosticsNotification=W.WatchKind=W.RelativePattern=W.FileChangeType=W.DidChangeWatchedFilesNotification=W.WillSaveTextDocumentWaitUntilRequest=W.WillSaveTextDocumentNotification=W.TextDocumentSaveReason=W.DidSaveTextDocumentNotification=W.DidCloseTextDocumentNotification=W.DidChangeTextDocumentNotification=W.TextDocumentContentChangeEvent=W.DidOpenTextDocumentNotification=W.TextDocumentSyncKind=W.TelemetryEventNotification=W.LogMessageNotification=W.ShowMessageRequest=W.ShowMessageNotification=W.MessageType=W.DidChangeConfigurationNotification=W.ExitNotification=W.ShutdownRequest=W.InitializedNotification=W.InitializeErrorCodes=W.InitializeRequest=W.WorkDoneProgressOptions=W.TextDocumentRegistrationOptions=W.StaticRegistrationOptions=W.PositionEncodingKind=W.FailureHandlingKind=W.ResourceOperationKind=W.UnregistrationRequest=W.RegistrationRequest=W.DocumentSelector=W.NotebookCellTextDocumentFilter=W.NotebookDocumentFilter=W.TextDocumentFilter=void 0;W.MonikerRequest=W.MonikerKind=W.UniquenessLevel=W.WillDeleteFilesRequest=W.DidDeleteFilesNotification=W.WillRenameFilesRequest=W.DidRenameFilesNotification=W.WillCreateFilesRequest=W.DidCreateFilesNotification=W.FileOperationPatternKind=W.LinkedEditingRangeRequest=W.ShowDocumentRequest=W.SemanticTokensRegistrationType=W.SemanticTokensRefreshRequest=W.SemanticTokensRangeRequest=W.SemanticTokensDeltaRequest=W.SemanticTokensRequest=W.TokenFormat=W.CallHierarchyPrepareRequest=W.CallHierarchyOutgoingCallsRequest=W.CallHierarchyIncomingCallsRequest=W.WorkDoneProgressCancelNotification=W.WorkDoneProgressCreateRequest=W.WorkDoneProgress=W.SelectionRangeRequest=W.DeclarationRequest=W.FoldingRangeRefreshRequest=W.FoldingRangeRequest=W.ColorPresentationRequest=W.DocumentColorRequest=W.ConfigurationRequest=W.DidChangeWorkspaceFoldersNotification=W.WorkspaceFoldersRequest=W.TypeDefinitionRequest=W.ImplementationRequest=W.ApplyWorkspaceEditRequest=W.ExecuteCommandRequest=W.PrepareRenameRequest=W.RenameRequest=W.PrepareSupportDefaultBehavior=W.DocumentOnTypeFormattingRequest=W.DocumentRangesFormattingRequest=W.DocumentRangeFormattingRequest=W.DocumentFormattingRequest=W.DocumentLinkResolveRequest=W.DocumentLinkRequest=W.CodeLensRefreshRequest=W.CodeLensResolveRequest=W.CodeLensRequest=W.WorkspaceSymbolResolveRequest=void 0;W.InlineCompletionRequest=W.DidCloseNotebookDocumentNotification=W.DidSaveNotebookDocumentNotification=W.DidChangeNotebookDocumentNotification=W.NotebookCellArrayChange=W.DidOpenNotebookDocumentNotification=W.NotebookDocumentSyncRegistrationType=W.NotebookDocument=W.NotebookCell=W.ExecutionSummary=W.NotebookCellKind=W.DiagnosticRefreshRequest=W.WorkspaceDiagnosticRequest=W.DocumentDiagnosticRequest=W.DocumentDiagnosticReportKind=W.DiagnosticServerCancellationData=W.InlayHintRefreshRequest=W.InlayHintResolveRequest=W.InlayHintRequest=W.InlineValueRefreshRequest=W.InlineValueRequest=W.TypeHierarchySupertypesRequest=W.TypeHierarchySubtypesRequest=W.TypeHierarchyPrepareRequest=void 0;var ye=Wt(),C2=(eh(),Ar(Qd)),Sr=th(),hV=XO();Object.defineProperty(W,"ImplementationRequest",{enumerable:!0,get:function(){return hV.ImplementationRequest}});var pV=ZO();Object.defineProperty(W,"TypeDefinitionRequest",{enumerable:!0,get:function(){return pV.TypeDefinitionRequest}});var LN=tk();Object.defineProperty(W,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return LN.WorkspaceFoldersRequest}});Object.defineProperty(W,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return LN.DidChangeWorkspaceFoldersNotification}});var gV=ik();Object.defineProperty(W,"ConfigurationRequest",{enumerable:!0,get:function(){return gV.ConfigurationRequest}});var ON=ak();Object.defineProperty(W,"DocumentColorRequest",{enumerable:!0,get:function(){return ON.DocumentColorRequest}});Object.defineProperty(W,"ColorPresentationRequest",{enumerable:!0,get:function(){return ON.ColorPresentationRequest}});var kN=lk();Object.defineProperty(W,"FoldingRangeRequest",{enumerable:!0,get:function(){return kN.FoldingRangeRequest}});Object.defineProperty(W,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return kN.FoldingRangeRefreshRequest}});var mV=hk();Object.defineProperty(W,"DeclarationRequest",{enumerable:!0,get:function(){return mV.DeclarationRequest}});var yV=mk();Object.defineProperty(W,"SelectionRangeRequest",{enumerable:!0,get:function(){return yV.SelectionRangeRequest}});var b0=wk();Object.defineProperty(W,"WorkDoneProgress",{enumerable:!0,get:function(){return b0.WorkDoneProgress}});Object.defineProperty(W,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return b0.WorkDoneProgressCreateRequest}});Object.defineProperty(W,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return b0.WorkDoneProgressCancelNotification}});var w0=Ck();Object.defineProperty(W,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return w0.CallHierarchyIncomingCallsRequest}});Object.defineProperty(W,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return w0.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(W,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return w0.CallHierarchyPrepareRequest}});var tc=Pk();Object.defineProperty(W,"TokenFormat",{enumerable:!0,get:function(){return tc.TokenFormat}});Object.defineProperty(W,"SemanticTokensRequest",{enumerable:!0,get:function(){return tc.SemanticTokensRequest}});Object.defineProperty(W,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return tc.SemanticTokensDeltaRequest}});Object.defineProperty(W,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return tc.SemanticTokensRangeRequest}});Object.defineProperty(W,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return tc.SemanticTokensRefreshRequest}});Object.defineProperty(W,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return tc.SemanticTokensRegistrationType}});var vV=Ok();Object.defineProperty(W,"ShowDocumentRequest",{enumerable:!0,get:function(){return vV.ShowDocumentRequest}});var bV=Mk();Object.defineProperty(W,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return bV.LinkedEditingRangeRequest}});var Ls=zk();Object.defineProperty(W,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ls.FileOperationPatternKind}});Object.defineProperty(W,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ls.DidCreateFilesNotification}});Object.defineProperty(W,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ls.WillCreateFilesRequest}});Object.defineProperty(W,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ls.DidRenameFilesNotification}});Object.defineProperty(W,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ls.WillRenameFilesRequest}});Object.defineProperty(W,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ls.DidDeleteFilesNotification}});Object.defineProperty(W,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ls.WillDeleteFilesRequest}});var S0=Xk();Object.defineProperty(W,"UniquenessLevel",{enumerable:!0,get:function(){return S0.UniquenessLevel}});Object.defineProperty(W,"MonikerKind",{enumerable:!0,get:function(){return S0.MonikerKind}});Object.defineProperty(W,"MonikerRequest",{enumerable:!0,get:function(){return S0.MonikerRequest}});var E0=Qk();Object.defineProperty(W,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return E0.TypeHierarchyPrepareRequest}});Object.defineProperty(W,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return E0.TypeHierarchySubtypesRequest}});Object.defineProperty(W,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return E0.TypeHierarchySupertypesRequest}});var NN=r2();Object.defineProperty(W,"InlineValueRequest",{enumerable:!0,get:function(){return NN.InlineValueRequest}});Object.defineProperty(W,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return NN.InlineValueRefreshRequest}});var x0=s2();Object.defineProperty(W,"InlayHintRequest",{enumerable:!0,get:function(){return x0.InlayHintRequest}});Object.defineProperty(W,"InlayHintResolveRequest",{enumerable:!0,get:function(){return x0.InlayHintResolveRequest}});Object.defineProperty(W,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return x0.InlayHintRefreshRequest}});var Wu=h2();Object.defineProperty(W,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Wu.DiagnosticServerCancellationData}});Object.defineProperty(W,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Wu.DocumentDiagnosticReportKind}});Object.defineProperty(W,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Wu.DocumentDiagnosticRequest}});Object.defineProperty(W,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Wu.WorkspaceDiagnosticRequest}});Object.defineProperty(W,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Wu.DiagnosticRefreshRequest}});var Ei=w2();Object.defineProperty(W,"NotebookCellKind",{enumerable:!0,get:function(){return Ei.NotebookCellKind}});Object.defineProperty(W,"ExecutionSummary",{enumerable:!0,get:function(){return Ei.ExecutionSummary}});Object.defineProperty(W,"NotebookCell",{enumerable:!0,get:function(){return Ei.NotebookCell}});Object.defineProperty(W,"NotebookDocument",{enumerable:!0,get:function(){return Ei.NotebookDocument}});Object.defineProperty(W,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ei.NotebookDocumentSyncRegistrationType}});Object.defineProperty(W,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ei.DidOpenNotebookDocumentNotification}});Object.defineProperty(W,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ei.NotebookCellArrayChange}});Object.defineProperty(W,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ei.DidChangeNotebookDocumentNotification}});Object.defineProperty(W,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ei.DidSaveNotebookDocumentNotification}});Object.defineProperty(W,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ei.DidCloseNotebookDocumentNotification}});var wV=x2();Object.defineProperty(W,"InlineCompletionRequest",{enumerable:!0,get:function(){return wV.InlineCompletionRequest}});var g0;(function(e){function t(r){let n=r;return Sr.string(n)||Sr.string(n.language)||Sr.string(n.scheme)||Sr.string(n.pattern)}e.is=t;})(g0||(W.TextDocumentFilter=g0={}));var m0;(function(e){function t(r){let n=r;return Sr.objectLiteral(n)&&(Sr.string(n.notebookType)||Sr.string(n.scheme)||Sr.string(n.pattern))}e.is=t;})(m0||(W.NotebookDocumentFilter=m0={}));var y0;(function(e){function t(r){let n=r;return Sr.objectLiteral(n)&&(Sr.string(n.notebook)||m0.is(n.notebook))&&(n.language===void 0||Sr.string(n.language))}e.is=t;})(y0||(W.NotebookCellTextDocumentFilter=y0={}));var v0;(function(e){function t(r){if(!Array.isArray(r))return !1;for(let n of r)if(!Sr.string(n)&&!g0.is(n)&&!y0.is(n))return !1;return !0}e.is=t;})(v0||(W.DocumentSelector=v0={}));var _2;(function(e){e.method="client/registerCapability",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolRequestType(e.method);})(_2||(W.RegistrationRequest=_2={}));var T2;(function(e){e.method="client/unregisterCapability",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolRequestType(e.method);})(T2||(W.UnregistrationRequest=T2={}));var R2;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete";})(R2||(W.ResourceOperationKind=R2={}));var I2;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo";})(I2||(W.FailureHandlingKind=I2={}));var A2;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32";})(A2||(W.PositionEncodingKind=A2={}));var P2;(function(e){function t(r){let n=r;return n&&Sr.string(n.id)&&n.id.length>0}e.hasId=t;})(P2||(W.StaticRegistrationOptions=P2={}));var D2;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||v0.is(n.documentSelector))}e.is=t;})(D2||(W.TextDocumentRegistrationOptions=D2={}));var L2;(function(e){function t(n){let i=n;return Sr.objectLiteral(i)&&(i.workDoneProgress===void 0||Sr.boolean(i.workDoneProgress))}e.is=t;function r(n){let i=n;return i&&Sr.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=r;})(L2||(W.WorkDoneProgressOptions=L2={}));var O2;(function(e){e.method="initialize",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(O2||(W.InitializeRequest=O2={}));var k2;(function(e){e.unknownProtocolVersion=1;})(k2||(W.InitializeErrorCodes=k2={}));var N2;(function(e){e.method="initialized",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(N2||(W.InitializedNotification=N2={}));var M2;(function(e){e.method="shutdown",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType0(e.method);})(M2||(W.ShutdownRequest=M2={}));var q2;(function(e){e.method="exit",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType0(e.method);})(q2||(W.ExitNotification=q2={}));var F2;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(F2||(W.DidChangeConfigurationNotification=F2={}));var $2;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5;})($2||(W.MessageType=$2={}));var j2;(function(e){e.method="window/showMessage",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolNotificationType(e.method);})(j2||(W.ShowMessageNotification=j2={}));var U2;(function(e){e.method="window/showMessageRequest",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolRequestType(e.method);})(U2||(W.ShowMessageRequest=U2={}));var B2;(function(e){e.method="window/logMessage",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolNotificationType(e.method);})(B2||(W.LogMessageNotification=B2={}));var W2;(function(e){e.method="telemetry/event",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolNotificationType(e.method);})(W2||(W.TelemetryEventNotification=W2={}));var z2;(function(e){e.None=0,e.Full=1,e.Incremental=2;})(z2||(W.TextDocumentSyncKind=z2={}));var H2;(function(e){e.method="textDocument/didOpen",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(H2||(W.DidOpenTextDocumentNotification=H2={}));var V2;(function(e){function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=r;})(V2||(W.TextDocumentContentChangeEvent=V2={}));var G2;(function(e){e.method="textDocument/didChange",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(G2||(W.DidChangeTextDocumentNotification=G2={}));var Y2;(function(e){e.method="textDocument/didClose",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(Y2||(W.DidCloseTextDocumentNotification=Y2={}));var X2;(function(e){e.method="textDocument/didSave",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(X2||(W.DidSaveTextDocumentNotification=X2={}));var J2;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3;})(J2||(W.TextDocumentSaveReason=J2={}));var K2;(function(e){e.method="textDocument/willSave",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(K2||(W.WillSaveTextDocumentNotification=K2={}));var Z2;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(Z2||(W.WillSaveTextDocumentWaitUntilRequest=Z2={}));var Q2;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolNotificationType(e.method);})(Q2||(W.DidChangeWatchedFilesNotification=Q2={}));var eN;(function(e){e.Created=1,e.Changed=2,e.Deleted=3;})(eN||(W.FileChangeType=eN={}));var tN;(function(e){function t(r){let n=r;return Sr.objectLiteral(n)&&(C2.URI.is(n.baseUri)||C2.WorkspaceFolder.is(n.baseUri))&&Sr.string(n.pattern)}e.is=t;})(tN||(W.RelativePattern=tN={}));var rN;(function(e){e.Create=1,e.Change=2,e.Delete=4;})(rN||(W.WatchKind=rN={}));var nN;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolNotificationType(e.method);})(nN||(W.PublishDiagnosticsNotification=nN={}));var iN;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3;})(iN||(W.CompletionTriggerKind=iN={}));var oN;(function(e){e.method="textDocument/completion",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(oN||(W.CompletionRequest=oN={}));var sN;(function(e){e.method="completionItem/resolve",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(sN||(W.CompletionResolveRequest=sN={}));var aN;(function(e){e.method="textDocument/hover",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(aN||(W.HoverRequest=aN={}));var cN;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3;})(cN||(W.SignatureHelpTriggerKind=cN={}));var uN;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(uN||(W.SignatureHelpRequest=uN={}));var lN;(function(e){e.method="textDocument/definition",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(lN||(W.DefinitionRequest=lN={}));var fN;(function(e){e.method="textDocument/references",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(fN||(W.ReferencesRequest=fN={}));var dN;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(dN||(W.DocumentHighlightRequest=dN={}));var hN;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(hN||(W.DocumentSymbolRequest=hN={}));var pN;(function(e){e.method="textDocument/codeAction",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(pN||(W.CodeActionRequest=pN={}));var gN;(function(e){e.method="codeAction/resolve",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(gN||(W.CodeActionResolveRequest=gN={}));var mN;(function(e){e.method="workspace/symbol",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(mN||(W.WorkspaceSymbolRequest=mN={}));var yN;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(yN||(W.WorkspaceSymbolResolveRequest=yN={}));var vN;(function(e){e.method="textDocument/codeLens",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(vN||(W.CodeLensRequest=vN={}));var bN;(function(e){e.method="codeLens/resolve",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(bN||(W.CodeLensResolveRequest=bN={}));var wN;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolRequestType0(e.method);})(wN||(W.CodeLensRefreshRequest=wN={}));var SN;(function(e){e.method="textDocument/documentLink",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(SN||(W.DocumentLinkRequest=SN={}));var EN;(function(e){e.method="documentLink/resolve",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(EN||(W.DocumentLinkResolveRequest=EN={}));var xN;(function(e){e.method="textDocument/formatting",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(xN||(W.DocumentFormattingRequest=xN={}));var CN;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(CN||(W.DocumentRangeFormattingRequest=CN={}));var _N;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(_N||(W.DocumentRangesFormattingRequest=_N={}));var TN;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(TN||(W.DocumentOnTypeFormattingRequest=TN={}));var RN;(function(e){e.Identifier=1;})(RN||(W.PrepareSupportDefaultBehavior=RN={}));var IN;(function(e){e.method="textDocument/rename",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(IN||(W.RenameRequest=IN={}));var AN;(function(e){e.method="textDocument/prepareRename",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(AN||(W.PrepareRenameRequest=AN={}));var PN;(function(e){e.method="workspace/executeCommand",e.messageDirection=ye.MessageDirection.clientToServer,e.type=new ye.ProtocolRequestType(e.method);})(PN||(W.ExecuteCommandRequest=PN={}));var DN;(function(e){e.method="workspace/applyEdit",e.messageDirection=ye.MessageDirection.serverToClient,e.type=new ye.ProtocolRequestType("workspace/applyEdit");})(DN||(W.ApplyWorkspaceEditRequest=DN={}));});var FN=X(mh=>{d();p();h();Object.defineProperty(mh,"__esModule",{value:!0});mh.createProtocolConnection=void 0;var qN=As();function SV(e,t,r,n){return qN.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0, qN.createMessageConnection)(e,t,r,n)}mh.createProtocolConnection=SV;});var jN=X(on=>{d();p();h();var EV=on&&on.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),yh=on&&on.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&EV(t,e,r);};Object.defineProperty(on,"__esModule",{value:!0});on.LSPErrorCodes=on.createProtocolConnection=void 0;yh(As(),on);yh((eh(),Ar(Qd)),on);yh(Wt(),on);yh(MN(),on);var xV=FN();Object.defineProperty(on,"createProtocolConnection",{enumerable:!0,get:function(){return xV.createProtocolConnection}});var $N;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800;})($N||(on.LSPErrorCodes=$N={}));});var Qt=X(xi=>{d();p();h();var CV=xi&&xi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),UN=xi&&xi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&CV(t,e,r);};Object.defineProperty(xi,"__esModule",{value:!0});xi.createProtocolConnection=void 0;var _V=ow();UN(ow(),xi);UN(jN(),xi);function TV(e,t,r,n){return (0, _V.createMessageConnection)(e,t,r,n)}xi.createProtocolConnection=TV;});var _0=X(jo=>{d();p();h();Object.defineProperty(jo,"__esModule",{value:!0});jo.SemanticTokensBuilder=jo.SemanticTokensDiff=jo.SemanticTokensFeature=void 0;var vh=Qt(),RV=e=>class extends e{get semanticTokens(){return {refresh:()=>this.connection.sendRequest(vh.SemanticTokensRefreshRequest.type),on:t=>{let r=vh.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onDelta:t=>{let r=vh.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onRange:t=>{let r=vh.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};jo.SemanticTokensFeature=RV;var bh=class{constructor(t,r){this.originalSequence=t,this.modifiedSequence=r;}computeDiff(){let t=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<t&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<t){let i=t-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let s=i-n+1,a=this.modifiedSequence.slice(n,o+1);return a.length===1&&a[0]===this.originalSequence[i]?[{start:n,deleteCount:s-1}]:[{start:n,deleteCount:s,data:a}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<t?[{start:n,deleteCount:t-n}]:[]}};jo.SemanticTokensDiff=bh;var C0=class{constructor(){this._prevData=void 0,this.initialize();}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0;}push(t,r,n,i,o){let s=t,a=r;this._dataLen>0&&(s-=this._prevLine,s===0&&(a-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=a,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=t,this._prevChar=r;}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize();}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new bh(this._prevData,this._data).computeDiff()}:this.build()}};jo.SemanticTokensBuilder=C0;});var BN=X(wh=>{d();p();h();Object.defineProperty(wh,"__esModule",{value:!0});wh.InlineCompletionFeature=void 0;var IV=Qt(),AV=e=>class extends e{get inlineCompletion(){return {on:t=>this.connection.onRequest(IV.InlineCompletionRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};wh.InlineCompletionFeature=AV;});var R0=X(Sh=>{d();p();h();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.TextDocuments=void 0;var Os=Qt(),T0=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new Os.Emitter,this._onDidOpen=new Os.Emitter,this._onDidClose=new Os.Emitter,this._onDidSave=new Os.Emitter,this._onWillSave=new Os.Emitter;}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t;}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=Os.TextDocumentSyncKind.Incremental;let r=[];return r.push(t.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let s=Object.freeze({document:o});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s);})),r.push(t.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this._syncedDocuments.get(i.uri);a!==void 0&&(a=this._configuration.update(a,o,s),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})));})),r.push(t.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})));})),r.push(t.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}));})),r.push(t.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(t.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}));})),Os.Disposable.create(()=>{r.forEach(n=>n.dispose());})}};Sh.TextDocuments=T0;});var A0=X(rc=>{d();p();h();Object.defineProperty(rc,"__esModule",{value:!0});rc.NotebookDocuments=rc.NotebookSyncFeature=void 0;var Nn=Qt(),WN=R0(),PV=e=>class extends e{get synchronization(){return {onDidOpenNotebookDocument:t=>this.connection.onNotification(Nn.DidOpenNotebookDocumentNotification.type,r=>{t(r);}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Nn.DidChangeNotebookDocumentNotification.type,r=>{t(r);}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Nn.DidSaveNotebookDocumentNotification.type,r=>{t(r);}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Nn.DidCloseNotebookDocumentNotification.type,r=>{t(r);})}}};rc.NotebookSyncFeature=PV;var Eh=class e{onDidOpenTextDocument(t){return this.openHandler=t,Nn.Disposable.create(()=>{this.openHandler=void 0;})}openTextDocument(t){this.openHandler&&this.openHandler(t);}onDidChangeTextDocument(t){return this.changeHandler=t,Nn.Disposable.create(()=>{this.changeHandler=t;})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t);}onDidCloseTextDocument(t){return this.closeHandler=t,Nn.Disposable.create(()=>{this.closeHandler=void 0;})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t);}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Eh.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var I0=class{constructor(t){t instanceof WN.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new WN.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Nn.Emitter,this._onDidChange=new Nn.Emitter,this._onDidSave=new Nn.Emitter,this._onDidClose=new Nn.Emitter;}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let r=this.notebookCellMap.get(t);return r&&r[0]}findNotebookDocumentForCell(t){let r=typeof t=="string"?t:t.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let r=new Eh,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument);})),n.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let s=o.metadata,a=!1,c=i.change;c.metadata!==void 0&&(a=!0,o.metadata=c.metadata);let l=[],u=[],g=[],w=[];if(c.cells!==void 0){let A=c.cells;if(A.structure!==void 0){let C=A.structure.array;if(o.cells.splice(C.start,C.deleteCount,...C.cells!==void 0?C.cells:[]),A.structure.didOpen!==void 0)for(let R of A.structure.didOpen)r.openTextDocument({textDocument:R}),l.push(R.uri);if(A.structure.didClose)for(let R of A.structure.didClose)r.closeTextDocument({textDocument:R}),u.push(R.uri);}if(A.data!==void 0){let C=new Map(A.data.map(R=>[R.document,R]));for(let R=0;R<=o.cells.length;R++){let T=C.get(o.cells[R].document);if(T!==void 0){let $=o.cells.splice(R,1,T);if(g.push({old:$[0],new:T}),C.delete(T.document),C.size===0)break}}}if(A.textContent!==void 0)for(let C of A.textContent)r.changeTextDocument({textDocument:C.document,contentChanges:C.changes}),w.push(C.document.uri);}this.updateCellMap(o);let y={notebookDocument:o};a&&(y.metadata={old:s,new:o.metadata});let _=[];for(let A of l)_.push(this.getNotebookCell(A));let x=[];for(let A of u)x.push(this.getNotebookCell(A));let D=[];for(let A of w)D.push(this.getNotebookCell(A));(_.length>0||x.length>0||g.length>0||D.length>0)&&(y.cells={added:_,removed:x,changed:{data:g,textContent:D}}),(y.metadata!==void 0||y.cells!==void 0)&&this._onDidChange.fire(y);})),n.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o);})),n.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let s of i.cellTextDocuments)r.closeTextDocument({textDocument:s});this.notebookDocuments.delete(i.notebookDocument.uri);for(let s of o.cells)this.notebookCellMap.delete(s.document);}})),Nn.Disposable.create(()=>{n.forEach(i=>i.dispose());})}updateCellMap(t){for(let r of t.cells)this.notebookCellMap.set(r.document,[r,t]);}};rc.NotebookDocuments=I0;});var P0=X(cr=>{d();p();h();Object.defineProperty(cr,"__esModule",{value:!0});cr.thenable=cr.typedArray=cr.stringArray=cr.array=cr.func=cr.error=cr.number=cr.string=cr.boolean=void 0;function DV(e){return e===!0||e===!1}cr.boolean=DV;function zN(e){return typeof e=="string"||e instanceof String}cr.string=zN;function LV(e){return typeof e=="number"||e instanceof Number}cr.number=LV;function OV(e){return e instanceof Error}cr.error=OV;function HN(e){return typeof e=="function"}cr.func=HN;function VN(e){return Array.isArray(e)}cr.array=VN;function kV(e){return VN(e)&&e.every(t=>zN(t))}cr.stringArray=kV;function NV(e,t){return Array.isArray(e)&&e.every(t)}cr.typedArray=NV;function MV(e){return e&&HN(e.then)}cr.thenable=MV;});var D0=X(Mn=>{d();p();h();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.generateUuid=Mn.parse=Mn.isUUID=Mn.v4=Mn.empty=void 0;var zu=class{constructor(t){this._value=t;}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Hu=class e extends zu{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""));}};Hu._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Hu._timeHighBits=["8","9","a","b"];Mn.empty=new zu("00000000-0000-0000-0000-000000000000");function GN(){return new Hu}Mn.v4=GN;var qV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function YN(e){return qV.test(e)}Mn.isUUID=YN;function FV(e){if(!YN(e))throw new Error("invalid uuid");return new zu(e)}Mn.parse=FV;function $V(){return GN().asHex()}Mn.generateUuid=$V;});var XN=X(Bo=>{d();p();h();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.attachPartialResult=Bo.ProgressFeature=Bo.attachWorkDone=void 0;var Uo=Qt(),jV=D0(),ks=class e{constructor(t,r){this._connection=t,this._token=r,e.Instances.set(this._token,this);}begin(t,r,n,i){let o={kind:"begin",title:t,percentage:r,message:n,cancellable:i};this._connection.sendProgress(Uo.WorkDoneProgress.type,this._token,o);}report(t,r){let n={kind:"report"};typeof t=="number"?(n.percentage=t,r!==void 0&&(n.message=r)):n.message=t,this._connection.sendProgress(Uo.WorkDoneProgress.type,this._token,n);}done(){e.Instances.delete(this._token),this._connection.sendProgress(Uo.WorkDoneProgress.type,this._token,{kind:"end"});}};ks.Instances=new Map;var xh=class extends ks{constructor(t,r){super(t,r),this._source=new Uo.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose(),super.done();}cancel(){this._source.cancel();}},Vu=class{constructor(){}begin(){}report(){}done(){}},Ch=class extends Vu{constructor(){super(),this._source=new Uo.CancellationTokenSource;}get token(){return this._source.token}done(){this._source.dispose();}cancel(){this._source.cancel();}};function UV(e,t){if(t===void 0||t.workDoneToken===void 0)return new Vu;let r=t.workDoneToken;return delete t.workDoneToken,new ks(e,r)}Bo.attachWorkDone=UV;var BV=e=>class extends e{constructor(){super(),this._progressSupported=!1;}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Uo.WorkDoneProgressCancelNotification.type,r=>{let n=ks.Instances.get(r.token);(n instanceof xh||n instanceof Ch)&&n.cancel();}));}attachWorkDoneProgress(t){return t===void 0?new Vu:new ks(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0, jV.generateUuid)();return this.connection.sendRequest(Uo.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new xh(this.connection,t))}else return Promise.resolve(new Ch)}};Bo.ProgressFeature=BV;var L0;(function(e){e.type=new Uo.ProgressType;})(L0||(L0={}));var O0=class{constructor(t,r){this._connection=t,this._token=r;}report(t){this._connection.sendProgress(L0.type,this._token,t);}};function WV(e,t){if(t===void 0||t.partialResultToken===void 0)return;let r=t.partialResultToken;return delete t.partialResultToken,new O0(e,r)}Bo.attachPartialResult=WV;});var JN=X(_h=>{d();p();h();Object.defineProperty(_h,"__esModule",{value:!0});_h.ConfigurationFeature=void 0;var zV=Qt(),HV=P0(),VV=e=>class extends e{getConfiguration(t){return t?HV.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let r={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(zV.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(t)?n:n[0]:Array.isArray(t)?[]:null)}};_h.ConfigurationFeature=VV;});var KN=X(Rh=>{d();p();h();Object.defineProperty(Rh,"__esModule",{value:!0});Rh.WorkspaceFoldersFeature=void 0;var Th=Qt(),GV=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1;}initialize(t){super.initialize(t);let r=t.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Th.Emitter,this.connection.onNotification(Th.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event);}));}fillServerCapabilities(t){super.fillServerCapabilities(t);let r=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string";}getWorkspaceFolders(){return this.connection.sendRequest(Th.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return !this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Th.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Rh.WorkspaceFoldersFeature=GV;});var ZN=X(Ih=>{d();p();h();Object.defineProperty(Ih,"__esModule",{value:!0});Ih.CallHierarchyFeature=void 0;var k0=Qt(),YV=e=>class extends e{get callHierarchy(){return {onPrepare:t=>this.connection.onRequest(k0.CallHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onIncomingCalls:t=>{let r=k0.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onOutgoingCalls:t=>{let r=k0.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Ih.CallHierarchyFeature=YV;});var QN=X(Ah=>{d();p();h();Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ShowDocumentFeature=void 0;var XV=Qt(),JV=e=>class extends e{showDocument(t){return this.connection.sendRequest(XV.ShowDocumentRequest.type,t)}};Ah.ShowDocumentFeature=JV;});var eM=X(Ph=>{d();p();h();Object.defineProperty(Ph,"__esModule",{value:!0});Ph.FileOperationsFeature=void 0;var nc=Qt(),KV=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(nc.DidCreateFilesNotification.type,r=>{t(r);})}onDidRenameFiles(t){return this.connection.onNotification(nc.DidRenameFilesNotification.type,r=>{t(r);})}onDidDeleteFiles(t){return this.connection.onNotification(nc.DidDeleteFilesNotification.type,r=>{t(r);})}onWillCreateFiles(t){return this.connection.onRequest(nc.WillCreateFilesRequest.type,(r,n)=>t(r,n))}onWillRenameFiles(t){return this.connection.onRequest(nc.WillRenameFilesRequest.type,(r,n)=>t(r,n))}onWillDeleteFiles(t){return this.connection.onRequest(nc.WillDeleteFilesRequest.type,(r,n)=>t(r,n))}};Ph.FileOperationsFeature=KV;});var tM=X(Dh=>{d();p();h();Object.defineProperty(Dh,"__esModule",{value:!0});Dh.LinkedEditingRangeFeature=void 0;var ZV=Qt(),QV=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(ZV.LinkedEditingRangeRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0))}};Dh.LinkedEditingRangeFeature=QV;});var rM=X(Lh=>{d();p();h();Object.defineProperty(Lh,"__esModule",{value:!0});Lh.TypeHierarchyFeature=void 0;var N0=Qt(),eG=e=>class extends e{get typeHierarchy(){return {onPrepare:t=>this.connection.onRequest(N0.TypeHierarchyPrepareRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),void 0)),onSupertypes:t=>{let r=N0.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},onSubtypes:t=>{let r=N0.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};Lh.TypeHierarchyFeature=eG;});var iM=X(Oh=>{d();p();h();Object.defineProperty(Oh,"__esModule",{value:!0});Oh.InlineValueFeature=void 0;var nM=Qt(),tG=e=>class extends e{get inlineValue(){return {refresh:()=>this.connection.sendRequest(nM.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(nM.InlineValueRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r)))}}};Oh.InlineValueFeature=tG;});var sM=X(kh=>{d();p();h();Object.defineProperty(kh,"__esModule",{value:!0});kh.FoldingRangeFeature=void 0;var oM=Qt(),rG=e=>class extends e{get foldingRange(){return {refresh:()=>this.connection.sendRequest(oM.FoldingRangeRefreshRequest.type),on:t=>{let r=oM.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};kh.FoldingRangeFeature=rG;});var aM=X(Nh=>{d();p();h();Object.defineProperty(Nh,"__esModule",{value:!0});Nh.InlayHintFeature=void 0;var M0=Qt(),nG=e=>class extends e{get inlayHint(){return {refresh:()=>this.connection.sendRequest(M0.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(M0.InlayHintRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r))),resolve:t=>this.connection.onRequest(M0.InlayHintResolveRequest.type,(r,n)=>t(r,n))}}};Nh.InlayHintFeature=nG;});var cM=X(Mh=>{d();p();h();Object.defineProperty(Mh,"__esModule",{value:!0});Mh.DiagnosticFeature=void 0;var Gu=Qt(),iG=e=>class extends e{get diagnostics(){return {refresh:()=>this.connection.sendRequest(Gu.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(Gu.DocumentDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(Gu.DocumentDiagnosticRequest.partialResult,r))),onWorkspace:t=>this.connection.onRequest(Gu.WorkspaceDiagnosticRequest.type,(r,n)=>t(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(Gu.WorkspaceDiagnosticRequest.partialResult,r)))}}};Mh.DiagnosticFeature=iG;});var uM=X(qh=>{d();p();h();Object.defineProperty(qh,"__esModule",{value:!0});qh.MonikerFeature=void 0;var oG=Qt(),sG=e=>class extends e{get moniker(){return {on:t=>{let r=oG.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>t(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))}}}};qh.MonikerFeature=sG;});var CM=X(ht=>{d();p();h();Object.defineProperty(ht,"__esModule",{value:!0});ht.createConnection=ht.combineFeatures=ht.combineNotebooksFeatures=ht.combineLanguagesFeatures=ht.combineWorkspaceFeatures=ht.combineWindowFeatures=ht.combineClientFeatures=ht.combineTracerFeatures=ht.combineTelemetryFeatures=ht.combineConsoleFeatures=ht._NotebooksImpl=ht._LanguagesImpl=ht.BulkUnregistration=ht.BulkRegistration=ht.ErrorMessageTracker=void 0;var we=Qt(),qn=P0(),F0=D0(),Ve=XN(),aG=JN(),cG=KN(),uG=ZN(),lG=_0(),fG=QN(),dG=eM(),hG=tM(),pG=rM(),gG=iM(),mG=sM(),yG=aM(),vG=cM(),bG=A0(),wG=uM();function q0(e){if(e!==null)return e}var $0=class{constructor(){this._messages=Object.create(null);}add(t){let r=this._messages[t];r||(r=0),r++,this._messages[t]=r;}sendErrors(t){Object.keys(this._messages).forEach(r=>{t.window.showErrorMessage(r);});}};ht.ErrorMessageTracker=$0;var Fh=class{constructor(){}rawAttach(t){this._rawConnection=t;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(we.MessageType.Error,t);}warn(t){this.send(we.MessageType.Warning,t);}info(t){this.send(we.MessageType.Info,t);}log(t){this.send(we.MessageType.Log,t);}debug(t){this.send(we.MessageType.Debug,t);}send(t,r){this._rawConnection&&this._rawConnection.sendNotification(we.LogMessageNotification.type,{type:t,message:r}).catch(()=>{(0, we.RAL)().console.error("Sending log message failed");});}},j0=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...r){let n={type:we.MessageType.Error,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(q0)}showWarningMessage(t,...r){let n={type:we.MessageType.Warning,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(q0)}showInformationMessage(t,...r){let n={type:we.MessageType.Info,message:t,actions:r};return this.connection.sendRequest(we.ShowMessageRequest.type,n).then(q0)}},lM=(0, fG.ShowDocumentFeature)((0, Ve.ProgressFeature)(j0)),fM;(function(e){function t(){return new $h}e.create=t;})(fM||(ht.BulkRegistration=fM={}));var $h=class{constructor(){this._registrations=[],this._registered=new Set;}add(t,r){let n=qn.string(t)?t:t.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=F0.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n);}asRegistrationParams(){return {registrations:this._registrations}}},dM;(function(e){function t(){return new Yu(void 0,[])}e.create=t;})(dM||(ht.BulkUnregistration=dM={}));var Yu=class{constructor(t,r){this._connection=t,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n);});}get isAttached(){return !!this._connection}attach(t){this._connection=t;}add(t){this._unregistrations.set(t.method,t);}dispose(){let t=[];for(let n of this._unregistrations.values())t.push(n);let r={unregisterations:t};this._connection.sendRequest(we.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.");});}disposeSingle(t){let r=qn.string(t)?t:t.method,n=this._unregistrations.get(r);if(!n)return !1;let i={unregisterations:[n]};return this._connection.sendRequest(we.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r);},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`);}),!0}},jh=class{attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,r,n){return t instanceof $h?this.registerMany(t):t instanceof Yu?this.registerSingle1(t,r,n):this.registerSingle2(t,r)}registerSingle1(t,r,n){let i=qn.string(r)?r:r.method,o=F0.generateUuid(),s={registrations:[{id:o,method:i,registerOptions:n||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(we.RegistrationRequest.type,s).then(a=>(t.add({id:o,method:i}),t),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(t,r){let n=qn.string(t)?t:t.method,i=F0.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(we.RegistrationRequest.type,o).then(s=>we.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`);});}),s=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(s)))}unregisterSingle(t,r){let n={unregisterations:[{id:t,method:r}]};return this.connection.sendRequest(we.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`);})}registerMany(t){let r=t.asRegistrationParams();return this.connection.sendRequest(we.RegistrationRequest.type,r).then(()=>new Yu(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},U0=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function r(i){return i&&!!i.edit}let n=r(t)?t:{edit:t};return this.connection.sendRequest(we.ApplyWorkspaceEditRequest.type,n)}},hM=(0, dG.FileOperationsFeature)((0, cG.WorkspaceFoldersFeature)((0, aG.ConfigurationFeature)(U0))),Uh=class{constructor(){this._trace=we.Trace.Off;}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t;}log(t,r){this._trace!==we.Trace.Off&&this.connection.sendNotification(we.LogTraceNotification.type,{message:t,verbose:this._trace===we.Trace.Verbose?r:void 0}).catch(()=>{});}},Bh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(we.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed");});}},Wh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Ve.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Ve.attachPartialResult)(this.connection,r)}};ht._LanguagesImpl=Wh;var pM=(0, mG.FoldingRangeFeature)((0, wG.MonikerFeature)((0, vG.DiagnosticFeature)((0, yG.InlayHintFeature)((0, gG.InlineValueFeature)((0, pG.TypeHierarchyFeature)((0, hG.LinkedEditingRangeFeature)((0, lG.SemanticTokensFeature)((0, uG.CallHierarchyFeature)(Wh))))))))),zh=class{constructor(){}attach(t){this._connection=t;}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return (0, Ve.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,r){return (0, Ve.attachPartialResult)(this.connection,r)}};ht._NotebooksImpl=zh;var gM=(0, bG.NotebookSyncFeature)(zh);function mM(e,t){return function(r){return t(e(r))}}ht.combineConsoleFeatures=mM;function yM(e,t){return function(r){return t(e(r))}}ht.combineTelemetryFeatures=yM;function vM(e,t){return function(r){return t(e(r))}}ht.combineTracerFeatures=vM;function bM(e,t){return function(r){return t(e(r))}}ht.combineClientFeatures=bM;function wM(e,t){return function(r){return t(e(r))}}ht.combineWindowFeatures=wM;function SM(e,t){return function(r){return t(e(r))}}ht.combineWorkspaceFeatures=SM;function EM(e,t){return function(r){return t(e(r))}}ht.combineLanguagesFeatures=EM;function xM(e,t){return function(r){return t(e(r))}}ht.combineNotebooksFeatures=xM;function SG(e,t){function r(i,o,s){return i&&o?s(i,o):i||o}return {__brand:"features",console:r(e.console,t.console,mM),tracer:r(e.tracer,t.tracer,vM),telemetry:r(e.telemetry,t.telemetry,yM),client:r(e.client,t.client,bM),window:r(e.window,t.window,wM),workspace:r(e.workspace,t.workspace,SM),languages:r(e.languages,t.languages,EM),notebooks:r(e.notebooks,t.notebooks,xM)}}ht.combineFeatures=SG;function EG(e,t,r){let n=r&&r.console?new(r.console(Fh)):new Fh,i=e(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(Uh)):new Uh,s=r&&r.telemetry?new(r.telemetry(Bh)):new Bh,a=r&&r.client?new(r.client(jh)):new jh,c=r&&r.window?new(r.window(lM)):new lM,l=r&&r.workspace?new(r.workspace(hM)):new hM,u=r&&r.languages?new(r.languages(pM)):new pM,g=r&&r.notebooks?new(r.notebooks(gM)):new gM,w=[n,o,s,a,c,l,u,g];function y(C){return C instanceof Promise?C:qn.thenable(C)?new Promise((R,T)=>{C.then($=>R($),$=>T($));}):Promise.resolve(C)}let _,x,D,A={listen:()=>i.listen(),sendRequest:(C,...R)=>i.sendRequest(qn.string(C)?C:C.method,...R),onRequest:(C,R)=>i.onRequest(C,R),sendNotification:(C,R)=>{let T=qn.string(C)?C:C.method;return i.sendNotification(T,R)},onNotification:(C,R)=>i.onNotification(C,R),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:C=>(x=C,{dispose:()=>{x=void 0;}}),onInitialized:C=>i.onNotification(we.InitializedNotification.type,C),onShutdown:C=>(_=C,{dispose:()=>{_=void 0;}}),onExit:C=>(D=C,{dispose:()=>{D=void 0;}}),get console(){return n},get telemetry(){return s},get tracer(){return o},get client(){return a},get window(){return c},get workspace(){return l},get languages(){return u},get notebooks(){return g},onDidChangeConfiguration:C=>i.onNotification(we.DidChangeConfigurationNotification.type,C),onDidChangeWatchedFiles:C=>i.onNotification(we.DidChangeWatchedFilesNotification.type,C),__textDocumentSync:void 0,onDidOpenTextDocument:C=>i.onNotification(we.DidOpenTextDocumentNotification.type,C),onDidChangeTextDocument:C=>i.onNotification(we.DidChangeTextDocumentNotification.type,C),onDidCloseTextDocument:C=>i.onNotification(we.DidCloseTextDocumentNotification.type,C),onWillSaveTextDocument:C=>i.onNotification(we.WillSaveTextDocumentNotification.type,C),onWillSaveTextDocumentWaitUntil:C=>i.onRequest(we.WillSaveTextDocumentWaitUntilRequest.type,C),onDidSaveTextDocument:C=>i.onNotification(we.DidSaveTextDocumentNotification.type,C),sendDiagnostics:C=>i.sendNotification(we.PublishDiagnosticsNotification.type,C),onHover:C=>i.onRequest(we.HoverRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),onCompletion:C=>i.onRequest(we.CompletionRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onCompletionResolve:C=>i.onRequest(we.CompletionResolveRequest.type,C),onSignatureHelp:C=>i.onRequest(we.SignatureHelpRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),onDeclaration:C=>i.onRequest(we.DeclarationRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onDefinition:C=>i.onRequest(we.DefinitionRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onTypeDefinition:C=>i.onRequest(we.TypeDefinitionRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onImplementation:C=>i.onRequest(we.ImplementationRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onReferences:C=>i.onRequest(we.ReferencesRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onDocumentHighlight:C=>i.onRequest(we.DocumentHighlightRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onDocumentSymbol:C=>i.onRequest(we.DocumentSymbolRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onWorkspaceSymbol:C=>i.onRequest(we.WorkspaceSymbolRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onWorkspaceSymbolResolve:C=>i.onRequest(we.WorkspaceSymbolResolveRequest.type,C),onCodeAction:C=>i.onRequest(we.CodeActionRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onCodeActionResolve:C=>i.onRequest(we.CodeActionResolveRequest.type,(R,T)=>C(R,T)),onCodeLens:C=>i.onRequest(we.CodeLensRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onCodeLensResolve:C=>i.onRequest(we.CodeLensResolveRequest.type,(R,T)=>C(R,T)),onDocumentFormatting:C=>i.onRequest(we.DocumentFormattingRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),onDocumentRangeFormatting:C=>i.onRequest(we.DocumentRangeFormattingRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),onDocumentOnTypeFormatting:C=>i.onRequest(we.DocumentOnTypeFormattingRequest.type,(R,T)=>C(R,T)),onRenameRequest:C=>i.onRequest(we.RenameRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),onPrepareRename:C=>i.onRequest(we.PrepareRenameRequest.type,(R,T)=>C(R,T)),onDocumentLinks:C=>i.onRequest(we.DocumentLinkRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onDocumentLinkResolve:C=>i.onRequest(we.DocumentLinkResolveRequest.type,(R,T)=>C(R,T)),onDocumentColor:C=>i.onRequest(we.DocumentColorRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onColorPresentation:C=>i.onRequest(we.ColorPresentationRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onFoldingRanges:C=>i.onRequest(we.FoldingRangeRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onSelectionRanges:C=>i.onRequest(we.SelectionRangeRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),(0, Ve.attachPartialResult)(i,R))),onExecuteCommand:C=>i.onRequest(we.ExecuteCommandRequest.type,(R,T)=>C(R,T,(0, Ve.attachWorkDone)(i,R),void 0)),dispose:()=>i.dispose()};for(let C of w)C.attach(A);return i.onRequest(we.InitializeRequest.type,C=>{t.initialize(C),qn.string(C.trace)&&(o.trace=we.Trace.fromString(C.trace));for(let R of w)R.initialize(C.capabilities);if(x){let R=x(C,new we.CancellationTokenSource().token,(0, Ve.attachWorkDone)(i,C),void 0);return y(R).then(T=>{if(T instanceof we.ResponseError)return T;let $=T;$||($={capabilities:{}});let P=$.capabilities;P||(P={},$.capabilities=P),P.textDocumentSync===void 0||P.textDocumentSync===null?P.textDocumentSync=qn.number(A.__textDocumentSync)?A.__textDocumentSync:we.TextDocumentSyncKind.None:!qn.number(P.textDocumentSync)&&!qn.number(P.textDocumentSync.change)&&(P.textDocumentSync.change=qn.number(A.__textDocumentSync)?A.__textDocumentSync:we.TextDocumentSyncKind.None);for(let q of w)q.fillServerCapabilities(P);return $})}else {let R={capabilities:{textDocumentSync:we.TextDocumentSyncKind.None}};for(let T of w)T.fillServerCapabilities(R.capabilities);return R}}),i.onRequest(we.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,_)return _(new we.CancellationTokenSource().token)}),i.onNotification(we.ExitNotification.type,()=>{try{D&&D();}finally{t.shutdownReceived?t.exit(0):t.exit(1);}}),i.onNotification(we.SetTraceNotification.type,C=>{o.trace=we.Trace.fromString(C.value);}),A}ht.createConnection=EG;});var B0=X(jr=>{d();p();h();var xG=jr&&jr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),TM=jr&&jr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&xG(t,e,r);};Object.defineProperty(jr,"__esModule",{value:!0});jr.ProposedFeatures=jr.NotebookDocuments=jr.TextDocuments=jr.SemanticTokensBuilder=void 0;var CG=_0();Object.defineProperty(jr,"SemanticTokensBuilder",{enumerable:!0,get:function(){return CG.SemanticTokensBuilder}});var _G=BN();TM(Qt(),jr);var TG=R0();Object.defineProperty(jr,"TextDocuments",{enumerable:!0,get:function(){return TG.TextDocuments}});var RG=A0();Object.defineProperty(jr,"NotebookDocuments",{enumerable:!0,get:function(){return RG.NotebookDocuments}});TM(CM(),jr);var _M;(function(e){e.all={__brand:"features",languages:_G.InlineCompletionFeature};})(_M||(jr.ProposedFeatures=_M={}));});var IM=X((Lbe,RM)=>{d();p();h();RM.exports=Qt();});var Vh=X(Ci=>{d();p();h();var IG=Ci&&Ci.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i);}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r];}),PM=Ci&&Ci.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&IG(t,e,r);};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createConnection=void 0;var Hh=B0();PM(IM(),Ci);PM(B0(),Ci);var AM=!1,AG={initialize:e=>{},get shutdownReceived(){return AM},set shutdownReceived(e){AM=e;},exit:e=>{}};function PG(e,t,r,n){let i,o,s,a;e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=r,r=n),Hh.ConnectionStrategy.is(e)||Hh.ConnectionOptions.is(e)?a=e:(o=e,s=t,a=r);let c=l=>(0, Hh.createProtocolConnection)(o,s,l,a);return (0, Hh.createConnection)(c,AG,i)}Ci.createConnection=PG;});var LM=X((jbe,DM)=>{d();p();h();DM.exports=Vh();});d();p();h();d();p();h();d();p();h();ni();d();p();h();d();p();h();var gl,e$=new Uint8Array(16);function ng(){if(!gl&&(gl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gl(e$)}d();p();h();var xr=[];for(let e=0;e<256;++e)xr.push((e+256).toString(16).slice(1));function wE(e,t=0){return xr[e[t+0]]+xr[e[t+1]]+xr[e[t+2]]+xr[e[t+3]]+"-"+xr[e[t+4]]+xr[e[t+5]]+"-"+xr[e[t+6]]+xr[e[t+7]]+"-"+xr[e[t+8]]+xr[e[t+9]]+"-"+xr[e[t+10]]+xr[e[t+11]]+xr[e[t+12]]+xr[e[t+13]]+xr[e[t+14]]+xr[e[t+15]]}d();p();h();d();p();h();var t$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ig={randomUUID:t$};function r$(e,t,r){if(ig.randomUUID&&!t&&!e)return ig.randomUUID();e=e||{};let n=e.random||(e.rng||ng)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return wE(n)}var Bn=r$;var Pa=mr(ta());d();p();h();var bo={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function z3(e,t){return t}function qT(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:G3(e)?1:e instanceof Set?3:e instanceof Map?4:5}function H3(e){let t=new Set;for(let r of e)for(let n of [...Object.keys(r),...Object.getOwnPropertySymbols(r)])t.add(n);return t}function V3(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function $T(e){return {*[Symbol.iterator](){for(let t of e)for(let r of t)yield r;}}}var FT=new Set(["[object Object]","[object Module]"]);function G3(e){if(!FT.has(Object.prototype.toString.call(e)))return !1;let{constructor:t}=e;if(t===void 0)return !0;let r=t.prototype;return !(r===null||typeof r!="object"||!FT.has(Object.prototype.toString.call(r))||!r.hasOwnProperty("isPrototypeOf"))}function Y3(e,t,r){let n={};for(let i of H3(e)){let o=[];for(let c of e)V3(c,i)&&o.push(c[i]);if(o.length===0)continue;let s=t.metaDataUpdater(r,{key:i,parents:e}),a=UT(o,t,s);a!==bo.skip&&(i==="__proto__"?Object.defineProperty(n,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):n[i]=a);}return n}function X3(e){return e.flat()}function J3(e){return new Set($T(e))}function K3(e){return new Map($T(e))}function jT(e){return e.at(-1)}var xm=Object.freeze({__proto__:null,mergeArrays:X3,mergeMaps:K3,mergeOthers:jT,mergeRecords:Y3,mergeSets:J3});function nf(...e){return Z3({})(...e)}function Z3(e,t){let r=Q3(e,n);function n(...i){return UT(i,r,t)}return n}function Q3(e,t){return {defaultMergeFunctions:xm,mergeFunctions:{...xm,...Object.fromEntries(Object.entries(e).filter(([r,n])=>Object.hasOwn(xm,r)).map(([r,n])=>n===!1?[r,jT]:[r,n]))},metaDataUpdater:e.metaDataUpdater??z3,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,actions:bo}}function UT(e,t,r){if(e.length===0)return;if(e.length===1)return Cm(e,t,r);let n=qT(e[0]);if(n!==0&&n!==5){for(let i=1;i<e.length;i++)if(qT(e[i])!==n)return Cm(e,t,r)}switch(n){case 1:return eU(e,t,r);case 2:return tU(e,t,r);case 3:return rU(e,t,r);case 4:return nU(e,t,r);default:return Cm(e,t,r)}}function eU(e,t,r){let n=t.mergeFunctions.mergeRecords(e,t,r);return n===bo.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,r):n}function tU(e,t,r){let n=t.mergeFunctions.mergeArrays(e,t,r);return n===bo.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):n}function rU(e,t,r){let n=t.mergeFunctions.mergeSets(e,t,r);return n===bo.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):n}function nU(e,t,r){let n=t.mergeFunctions.mergeMaps(e,t,r);return n===bo.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):n}function Cm(e,t,r){let n=t.mergeFunctions.mergeOthers(e,t,r);return n===bo.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):n}d();p();h();var Wc=e=>{let t=typeof e;return e!==null&&(t==="object"||t==="function")};var _m=new Set(["__proto__","prototype","constructor"]),iU=new Set("0123456789");function Tm(e){let t=[],r="",n="start",i=!1;for(let o of e)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=o),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=o;break}if(_m.has(r))return [];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=o;break}if(n==="property"){if(_m.has(r))return [];t.push(r),r="";}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!iU.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=o;}}switch(i&&(r+="\\"),n){case"property":{if(_m.has(r))return [];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function BT(e,t){if(typeof t!="number"&&Array.isArray(e)){let r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return !1}function WT(e,t){if(BT(e,t))throw new Error("Cannot use string index")}function of(e,t,r){if(!Wc(e)||typeof t!="string")return e;let n=Tm(t);if(n.length===0)return r;for(let i=0;i<n.length;i++){let o=n[i];if(BT(e,o)?e=i===n.length-1?void 0:null:e=e[o],e==null){if(i!==n.length-1)return r;break}}return e===void 0?r:e}function ra(e,t,r){if(!Wc(e)||typeof t!="string")return e;let n=e,i=Tm(t);for(let o=0;o<i.length;o++){let s=i[o];WT(e,s),o===i.length-1?e[s]=r:Wc(e[s])||(e[s]=typeof i[o+1]=="number"?[]:{}),e=e[s];}return n}function sf(e,t){if(!Wc(e)||typeof t!="string")return !1;let r=Tm(t);for(let n=0;n<r.length;n++){let i=r[n];if(WT(e,i),n===r.length-1)return delete e[i],!0;if(e=e[i],!Wc(e))return !1}}d();p();h();var oU={"Content-Type":"application/json"};function os(e={}){let{fetch:t=globalThis.fetch,querySerializer:r,bodySerializer:n,...i}=e,o=i.baseUrl??"";o.endsWith("/")&&(o=o.slice(0,-1));async function s(a,c){let{fetch:l=t,headers:u,body:g,params:w={},parseAs:y="json",querySerializer:_=r??sU,bodySerializer:x=n??aU,...D}=c||{},A=cU(a,{baseUrl:o,params:w,querySerializer:_}),C=uU(oU,e?.headers,u,w.header),R={redirect:"follow",...i,...D,headers:C};g&&(R.body=x(g)),R.body instanceof FormData&&C.delete("Content-Type");let T=await l(A,R);if(T.status===204||T.headers.get("Content-Length")==="0")return T.ok?{data:{},response:T}:{error:{},response:T};if(T.ok){let P;if(y!=="stream"){let q=T.clone();P=typeof q[y]=="function"?await q[y]():await q.text();}else P=T.clone().body;return {data:P,response:T}}let $={};try{$=await T.clone().json();}catch{$=await T.clone().text();}return {error:$,response:T}}return {async GET(a,...c){return s(a,{...c[0],method:"GET"})},async PUT(a,...c){return s(a,{...c[0],method:"PUT"})},async POST(a,...c){return s(a,{...c[0],method:"POST"})},async DELETE(a,...c){return s(a,{...c[0],method:"DELETE"})},async OPTIONS(a,...c){return s(a,{...c[0],method:"OPTIONS"})},async HEAD(a,...c){return s(a,{...c[0],method:"HEAD"})},async PATCH(a,...c){return s(a,{...c[0],method:"PATCH"})},async TRACE(a,...c){return s(a,{...c[0],method:"TRACE"})}}}function sU(e){let t=new URLSearchParams;if(e&&typeof e=="object")for(let[r,n]of Object.entries(e))n!=null&&t.set(r,n);return t.toString()}function aU(e){return JSON.stringify(e)}function cU(e,t){let r=`${t.baseUrl}${e}`;if(t.params.path)for(let[i,o]of Object.entries(t.params.path))r=r.replace(`{${i}}`,encodeURIComponent(String(o)));let n=t.querySerializer(t.params.query??{});return n&&(r+=`?${n}`),r}function uU(...e){let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[i,o]of n)o===null?t.delete(i):o!==void 0&&t.set(i,o);}return t}var Td=mr(kI());d();p();h();ni();d();p();h();d();p();h();d();p();h();var Hm={},NI=!1,oa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global;function n8(){if(NI)return Hm;NI=!0;var e=Hm={},t,r;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n;}catch{t=n;}try{typeof clearTimeout=="function"?r=clearTimeout:r=i;}catch{r=i;}})();function o(x){if(t===setTimeout)return setTimeout(x,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(x,0);try{return t(x,0)}catch{try{return t.call(null,x,0)}catch{return t.call(this||oa,x,0)}}}function s(x){if(r===clearTimeout)return clearTimeout(x);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(x);try{return r(x)}catch{try{return r.call(null,x)}catch{return r.call(this||oa,x)}}}var a=[],c=!1,l,u=-1;function g(){!c||!l||(c=!1,l.length?a=l.concat(a):u=-1,a.length&&w());}function w(){if(!c){var x=o(g);c=!0;for(var D=a.length;D;){for(l=a,a=[];++u<D;)l&&l[u].run();u=-1,D=a.length;}l=null,c=!1,s(x);}}e.nextTick=function(x){var D=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)D[A-1]=arguments[A];a.push(new y(x,D)),a.length===1&&!c&&o(w);};function y(x,D){(this||oa).fun=x,(this||oa).array=D;}y.prototype.run=function(){(this||oa).fun.apply(null,(this||oa).array);},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function _(){}return e.on=_,e.addListener=_,e.once=_,e.off=_,e.removeListener=_,e.removeAllListeners=_,e.emit=_,e.prependListener=_,e.prependOnceListener=_,e.listeners=function(x){return []},e.binding=function(x){throw new Error("process.binding is not supported")},e.cwd=function(){return "/"},e.chdir=function(x){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Hm}var jt=n8();jt.platform="browser";var Vm={},MI=!1;function i8(){if(MI)return Vm;MI=!0;var e=jt;function t(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function r(o,s){for(var a="",c=0,l=-1,u=0,g,w=0;w<=o.length;++w){if(w<o.length)g=o.charCodeAt(w);else {if(g===47)break;g=47;}if(g===47){if(!(l===w-1||u===1))if(l!==w-1&&u===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var y=a.lastIndexOf("/");if(y!==a.length-1){y===-1?(a="",c=0):(a=a.slice(0,y),c=a.length-1-a.lastIndexOf("/")),l=w,u=0;continue}}else if(a.length===2||a.length===1){a="",c=0,l=w,u=0;continue}}s&&(a.length>0?a+="/..":a="..",c=2);}else a.length>0?a+="/"+o.slice(l+1,w):a=o.slice(l+1,w),c=w-l-1;l=w,u=0;}else g===46&&u!==-1?++u:u=-1;}return a}function n(o,s){var a=s.dir||s.root,c=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+c:a+o+c:c}var i={resolve:function(){for(var s="",a=!1,c,l=arguments.length-1;l>=-1&&!a;l--){var u;l>=0?u=arguments[l]:(c===void 0&&(c=e.cwd()),u=c),t(u),u.length!==0&&(s=u+"/"+s,a=u.charCodeAt(0)===47);}return s=r(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(t(s),s.length===0)return ".";var a=s.charCodeAt(0)===47,c=s.charCodeAt(s.length-1)===47;return s=r(s,!a),s.length===0&&!a&&(s="."),s.length>0&&c&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return t(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return ".";for(var s,a=0;a<arguments.length;++a){var c=arguments[a];t(c),c.length>0&&(s===void 0?s=c:s+="/"+c);}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(t(s),t(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return "";for(var c=1;c<s.length&&s.charCodeAt(c)===47;++c);for(var l=s.length,u=l-c,g=1;g<a.length&&a.charCodeAt(g)===47;++g);for(var w=a.length,y=w-g,_=u<y?u:y,x=-1,D=0;D<=_;++D){if(D===_){if(y>_){if(a.charCodeAt(g+D)===47)return a.slice(g+D+1);if(D===0)return a.slice(g+D)}else u>_&&(s.charCodeAt(c+D)===47?x=D:D===0&&(x=0));break}var A=s.charCodeAt(c+D),C=a.charCodeAt(g+D);if(A!==C)break;A===47&&(x=D);}var R="";for(D=c+x+1;D<=l;++D)(D===l||s.charCodeAt(D)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+a.slice(g+x):(g+=x,a.charCodeAt(g)===47&&++g,a.slice(g))},_makeLong:function(s){return s},dirname:function(s){if(t(s),s.length===0)return ".";for(var a=s.charCodeAt(0),c=a===47,l=-1,u=!0,g=s.length-1;g>=1;--g)if(a=s.charCodeAt(g),a===47){if(!u){l=g;break}}else u=!1;return l===-1?c?"/":".":c&&l===1?"//":s.slice(0,l)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');t(s);var c=0,l=-1,u=!0,g;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return "";var w=a.length-1,y=-1;for(g=s.length-1;g>=0;--g){var _=s.charCodeAt(g);if(_===47){if(!u){c=g+1;break}}else y===-1&&(u=!1,y=g+1),w>=0&&(_===a.charCodeAt(w)?--w===-1&&(l=g):(w=-1,l=y));}return c===l?l=y:l===-1&&(l=s.length),s.slice(c,l)}else {for(g=s.length-1;g>=0;--g)if(s.charCodeAt(g)===47){if(!u){c=g+1;break}}else l===-1&&(u=!1,l=g+1);return l===-1?"":s.slice(c,l)}},extname:function(s){t(s);for(var a=-1,c=0,l=-1,u=!0,g=0,w=s.length-1;w>=0;--w){var y=s.charCodeAt(w);if(y===47){if(!u){c=w+1;break}continue}l===-1&&(u=!1,l=w+1),y===46?a===-1?a=w:g!==1&&(g=1):a!==-1&&(g=-1);}return a===-1||l===-1||g===0||g===1&&a===l-1&&a===c+1?"":s.slice(a,l)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){t(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var c=s.charCodeAt(0),l=c===47,u;l?(a.root="/",u=1):u=0;for(var g=-1,w=0,y=-1,_=!0,x=s.length-1,D=0;x>=u;--x){if(c=s.charCodeAt(x),c===47){if(!_){w=x+1;break}continue}y===-1&&(_=!1,y=x+1),c===46?g===-1?g=x:D!==1&&(D=1):g!==-1&&(D=-1);}return g===-1||y===-1||D===0||D===1&&g===y-1&&g===w+1?y!==-1&&(w===0&&l?a.base=a.name=s.slice(1,y):a.base=a.name=s.slice(w,y)):(w===0&&l?(a.name=s.slice(1,g),a.base=s.slice(1,y)):(a.name=s.slice(w,g),a.base=s.slice(w,y)),a.ext=s.slice(g,y)),w>0?a.dir=s.slice(0,w-1):l&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Vm=i,Vm}var ut=i8();d();p();h();dl();dl();var lr={},FI=!1;function s8(){return FI||(FI=!0,lr.endianness=function(){return "LE"},lr.hostname=function(){return typeof location<"u"?location.hostname:""},lr.loadavg=function(){return []},lr.uptime=function(){return 0},lr.freemem=function(){return Number.MAX_VALUE},lr.totalmem=function(){return Number.MAX_VALUE},lr.cpus=function(){return []},lr.type=function(){return "Browser"},lr.release=function(){return typeof navigator<"u"?navigator.appVersion:""},lr.networkInterfaces=lr.getNetworkInterfaces=function(){return {}},lr.arch=function(){return "javascript"},lr.platform=function(){return "browser"},lr.tmpdir=lr.tmpDir=function(){return "/tmp"},lr.EOL=`
`,lr.homedir=function(){return "/"}),lr}var Me=s8();var a8=new Uint8Array(new Uint16Array([1]).buffer)[0]===1?"LE":"BE";Me.endianness=function(){return a8};Me.homedir=function(){return "/home"};Me.version=function(){return ""};Me.arch=function(){return "x64"};Me.totalmem=function(){return navigator.deviceMemory!==void 0?navigator.deviceMemory*(1<<30):2*(1<<30)};Me.cpus=function(){return Array(navigator.hardwareConcurrency||0).fill({model:"",times:{}})};Me.uptime=Ac;Me.constants={};mr(ta());d();p();h();ut.join(Me.homedir(),".tabby-client","agent","data.json");var Xm=void 0;d();p();h();var GI=mr(zI());function Fi(e){let t=e.match(/.*(?:$|\r?\n)/g)?.filter(Boolean)??[];return t.length>0&&t[t.length-1]?.endsWith(`
`)&&t.push(""),t}function Fe(e){return e.trim().length===0}function si(e,t){return e.match(/^[ \t]*/)?.[0]?.length??0;}function Km(e,t){return t<0||t>=e.length-1?!1:si(e[t])<si(e[t+1])}function yf(e,t){return t<=0||t>e.length-1?!1:si(e[t-1])>si(e[t])}var d8=[{open:{chars:"(",reg:/\(/},close:{chars:")",reg:/\)/}},{open:{chars:"[",reg:/\[/},close:{chars:"]",reg:/\]/}},{open:{chars:"{",reg:/\{/},close:{chars:"}",reg:/\}/}},{open:{chars:"<",reg:/<(?=\w)/},close:{chars:"/>",reg:/\/>/}},{open:{chars:"<",reg:/<(?=[/\w])/},close:{chars:">",reg:/>/}},{openOrClose:{chars:'"',reg:/"/}},{openOrClose:{chars:"'",reg:/'/}},{openOrClose:{chars:"`",reg:/`/}}],HI=/^([)\]}>"'`]|(\/>))*$/g;function VI(e){let t=[],r=0;for(;r<e.length;){let n=e.slice(r),i={index:n.length,found:void 0};if(d8.forEach(o=>{Object.entries(o).forEach(([s,a])=>{let c=n.match(a.reg);c&&c.index!==void 0&&c.index<i.index&&(i={index:c.index,found:{pair:o,pos:s,pattern:a}});});}),!i.found)break;switch(i.found.pos){case"openOrClose":{let o=i.found.pattern.chars;t.length>0&&t.includes(o)?t.splice(t.lastIndexOf(o),t.length-t.lastIndexOf(o)):t.push(o);break}case"open":{t.push(i.found.pattern.chars);break}case"close":{let o=i.found.pair;t.length>0&&"open"in o&&t[t.length-1]===o.open.chars?t.pop():t.push(i.found.pattern.chars);break}}r+=i.index+i.found.pattern.chars.length;}return t}function sa(e,t){return GI.get(e,t)}function Zc(e){let t=new AbortController;for(let r of e){if(r?.aborted)return t.abort(r.reason),r;r?.addEventListener("abort",()=>t.abort(r.reason),{signal:t.signal});}return t.signal}var tr=class extends Error{constructor(t){super(`${t.status} ${t.statusText}`),this.name="HttpError",this.status=t.status,this.statusText=t.statusText,this.response=t;}};function Zm(e){return e instanceof Error&&e.name==="TimeoutError"||e instanceof tr&&[408,499].includes(e.status)}function wo(e){return e instanceof Error&&e.name==="AbortError"}function as(e){return e instanceof tr&&[401,403].includes(e.status)}function Qm(e){let t=e.message||e.toString();return e.cause instanceof Error&&(t+=`
Caused by: `+Qm(e.cause)),t}function YI(e){let t=/\/(.*)\/(.*)/.exec(e);return t&&t[1]&&t[2]?new RegExp(t[1],t[2]):new RegExp(e)}d();p();h();var xL=mr(lL());d();p();h();d();p();h();function fL(e){let t,r,n,i,o,s,a;return c(),{feed:l,reset:c};function c(){t=!0,r="",n=0,i=-1,o=void 0,s=void 0,a="";}function l(g){r=r?r+g:g,t&&H7(r)&&(r=r.slice(dL.length)),t=!1;let w=r.length,y=0,_=!1;for(;y<w;){_&&(r[y]===`
`&&++y,_=!1);let x=-1,D=i,A;for(let C=n;x<0&&C<w;++C)A=r[C],A===":"&&D<0?D=C-y:A==="\r"?(_=!0,x=C-y):A===`
`&&(x=C-y);if(x<0){n=w-y,i=D;break}else n=0,i=-1;u(r,y,D,x),y+=x+1;}y===w?r="":y>0&&(r=r.slice(y));}function u(g,w,y,_){if(_===0){a.length>0&&(e({type:"event",id:o,event:s||void 0,data:a.slice(0,-1)}),a="",o=void 0),s=void 0;return}let x=y<0,D=g.slice(w,w+(x?_:y)),A=0;x?A=_:g[w+y+1]===" "?A=y+2:A=y+1;let C=w+A,R=_-A,T=g.slice(C,C+R).toString();if(D==="data")a+=T?"".concat(T,`
`):`
`;else if(D==="event")s=T;else if(D==="id"&&!T.includes("\0"))o=T;else if(D==="retry"){let $=parseInt(T,10);Number.isNaN($)||e({type:"reconnect-interval",value:$});}}}var dL=[239,187,191];function H7(e){return dL.every((t,r)=>e.charCodeAt(r)===t)}var td=class extends TransformStream{constructor(){let t;super({start(r){t=fL(n=>{n.type==="event"&&r.enqueue(n);});},transform(r){t.feed(r);}});}};d();p();h();ni();mr(wL());var _v=class{constructor(t,r){this.baseLogger=t;this.tag=r;}tagMsg(t){return `[${this.tag}] ${t}`}error(t,r){this.baseLogger.error(this.tagMsg(t),{error:r});}warn(t){this.baseLogger.warn(this.tagMsg(t));}info(t){this.baseLogger.info(this.tagMsg(t));}debug(t){this.baseLogger.debug(this.tagMsg(t));}trace(t,r){this.baseLogger.trace(this.tagMsg(t),r);}},sd=class e{constructor(t){this.baseLogger=t;this.childLoggers=[];this.baseLogger.onChild=r=>{this.childLoggers.push(r);};}get level(){return this.baseLogger.level}set level(t){this.baseLogger.level=t,this.childLoggers.forEach(r=>{r.level=t;});}child(t){return new e(this.baseLogger.child({tag:t}))}error(t,r){this.baseLogger.error({error:r},t);}warn(t){this.baseLogger.warn(t);}info(t){this.baseLogger.info(t);}debug(t){this.baseLogger.debug(t);}trace(t,r){this.baseLogger.trace(r,t);}},Tv=class extends Dr{constructor(r=[]){super();this.destinations=r;}attach(...r){this.destinations.push(...r),this.emit("newAttached",r);}},Rv=class{constructor(t,r){this.destinations=t;this.tag=r;this.loggers=[];this.loggers.push(...t.destinations.map(n=>this.createTaggedLogger(n))),t.on("newAttached",n=>{this.loggers.push(...n.map(i=>this.createTaggedLogger(i)));});}createTaggedLogger(t){return this.tag?t instanceof sd?t.child(this.tag):new _v(t,this.tag):t}error(t,r){this.loggers.forEach(n=>n.error(t,r));}warn(t){this.loggers.forEach(r=>r.warn(t));}info(t){this.loggers.forEach(r=>r.info(t));}debug(t){this.loggers.forEach(r=>r.debug(t));}trace(t,r){this.loggers.forEach(n=>n.trace(t,r));}},ad=new Tv;function Ut(e){return new Rv(ad,e)}var EL=Ut("StreamParser");function Iv(e,t){let r=e.pipeThrough(new TextDecoderStream).pipeThrough(new td);return (0, xL.readableFromWeb)(r,{objectMode:!0}).map(i=>{try{if(i.type==="event"){let s=JSON.parse(i.data).choices[0]?.delta.content;if(typeof s=="string")return s}}catch(o){EL.error("Failed to parse chat stream chunk.",o),EL.trace("Parsing failed with event:",{event:i});}},{signal:t})}async function CL(e,t){return e.body?Iv(e.body,t).reduce((n,i)=>n+i,"",{signal:t}):""}d();p();h();ni();d();p();h();function Av(e){this.message=e;}Av.prototype=new Error,Av.prototype.name="InvalidCharacterError";var _L=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Av("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,o=0,s="";n=t.charAt(o++);~n&&(r=i%4?64*r+n:n,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function lH(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw "Illegal base64url string!"}try{return function(r){return decodeURIComponent(_L(r).replace(/(.)/g,function(n,i){var o=i.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}(t)}catch{return _L(t)}}function cd(e){this.message=e;}function fH(e,t){if(typeof e!="string")throw new cd("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(lH(e.split(".")[r]))}catch(n){throw new cd("Invalid token specified: "+n.message)}}cd.prototype=new Error,cd.prototype.name="InvalidTokenError";var ud=fH;var TL=mr(ta());var Pv=class extends Error{constructor(r){super();this.cause=r;this.name="RetryLimitReachedError";}},Dn=class Dn extends Un{constructor(r){super();this.endpoint=r;this.logger=Ut("Auth");this.authApi=os({baseUrl:"https://app.tabbyml.com/api"});}async init(r){this.dataStore=r?.dataStore,this.dataStore instanceof Un&&this.dataStore.on("updated",async()=>{let n=this.jwt;await this.load(),(0, TL.default)(n,this.jwt)||super.emit("updated",this.jwt);}),this.scheduleRefreshToken(),await this.load();}get token(){return this.jwt?.token}get user(){return this.jwt?.payload.email}async load(){if(this.dataStore)try{await this.dataStore.load();let r=this.dataStore.data.auth?.[this.endpoint]?.jwt;if(typeof r=="string"&&this.jwt?.token!==r){this.logger.debug("Loaded auth data from data store.");let n={token:r,payload:ud(r)};n.payload.exp*1e3-Date.now()<Dn.tokenStrategy.refresh.beforeExpire?(this.jwt=await this.refreshToken(n,Dn.tokenStrategy.refresh.whenLoaded),await this.save()):this.jwt=n;}}catch{this.logger.debug("Failed to load auth data from data store.");}}async save(){if(this.dataStore)try{if(this.jwt){if(this.dataStore.data.auth?.[this.endpoint]?.jwt===this.jwt.token)return;this.dataStore.data.auth={...this.dataStore.data.auth,[this.endpoint]:{jwt:this.jwt.token}};}else {if(typeof this.dataStore.data.auth?.[this.endpoint]>"u")return;delete this.dataStore.data.auth[this.endpoint];}await this.dataStore.save(),this.logger.debug("Saved auth data to data store.");}catch(r){this.logger.error("Failed to save auth data to data store.",r);}}async reset(){this.jwt&&(this.jwt=void 0,await this.save());}async requestAuthUrl(r){try{if(await this.reset(),r?.signal?.aborted)throw r.signal.reason;this.logger.debug("Requesting device token...");let n=await this.authApi.POST("/device-token",{body:{auth_url:this.endpoint},signal:r?.signal});if(n.error||!n.response.ok)throw new tr(n.response);let i=n.data,o=new URL(Dn.authPageUrl);return o.searchParams.append("code",i.data.code),{authUrl:o.toString(),code:i.data.code}}catch(n){throw this.logger.error("Failed to request device token",n),n}}async pollingToken(r,n){return new Promise((i,o)=>{let s=Zc([AbortSignal.timeout(Dn.tokenStrategy.polling.timeout),n?.signal]),a=setInterval(async()=>{try{this.logger.debug("Polling auth token...");let c=await this.authApi.POST("/device-token/accept",{params:{query:{code:r}},signal:s});if(c.error||!c.response.ok)throw new tr(c.response);let l=c.data;this.jwt={token:l.data.jwt,payload:ud(l.data.jwt)},super.emit("updated",this.jwt),await this.save(),clearInterval(a),i(!0);}catch(c){c instanceof tr&&[400,401,403,405].includes(c.status)||this.logger.error("Failed due to unknown error when polling auth token",c);}},Dn.tokenStrategy.polling.interval);s.aborted?(clearInterval(a),o(s.reason)):s.addEventListener("abort",()=>{clearInterval(a),o(s.reason);});})}async refreshToken(r,n={maxTry:1,retryDelay:1e3},i=0){try{this.logger.debug("Refreshing auth token...");let o=await this.authApi.POST("/device-token/refresh",{headers:{Authorization:`Bearer ${r.token}`}});if(o.error||!o.response.ok)throw new tr(o.response);let s=o.data;return {token:s.data.jwt,payload:ud(s.data.jwt)}}catch(o){if(!(o instanceof tr&&[400,401,403,405].includes(o.status))&&(this.logger.error("Failed due to unknown error when refreshing auth token.",o),i<n.maxTry))return this.logger.debug(`Retry refreshing auth token after ${n.retryDelay}ms`),await new Promise(s=>setTimeout(s,n.retryDelay)),this.refreshToken(r,n,i+1);throw new Pv(o)}}scheduleRefreshToken(){setInterval(async()=>{if(this.jwt)if(this.logger.debug("Checking auth token..."),this.jwt.payload.exp*1e3-Date.now()<Dn.tokenStrategy.refresh.beforeExpire)try{this.jwt=await this.refreshToken(this.jwt,Dn.tokenStrategy.refresh.whenScheduled),super.emit("updated",this.jwt),await this.save();}catch(r){this.logger.error("Failed to refresh auth token.",r);}else this.logger.debug("Auth token is still valid.");},Dn.tokenStrategy.refresh.interval);}};Dn.authPageUrl="https://app.tabbyml.com/account/device-token",Dn.tokenStrategy={polling:{interval:5e3,timeout:5*60*1e3},refresh:{interval:15*60*1e3,beforeExpire:30*60*1e3,whenLoaded:{maxTry:5,retryDelay:1e3},whenScheduled:{maxTry:60,retryDelay:30*1e3}}};var ld=Dn;d();p();h();var hu={server:{endpoint:"http://localhost:8080",token:"",requestHeaders:{},requestTimeout:12e4},proxy:{url:"",authorization:""},completion:{prompt:{maxPrefixLines:20,maxSuffixLines:20,fillDeclarations:{enabled:!0,maxSnippets:5,maxCharsPerSnippet:500},collectSnippetsFromRecentChangedFiles:{enabled:!0,maxSnippets:3,indexing:{checkingChangesInterval:500,changesDebouncingInterval:1e3,prefixLines:20,suffixLines:20,maxChunks:100,chunkSize:500,overlapLines:1}},clipboard:{minChars:3,maxChars:2e3}},debounce:{mode:"adaptive",interval:250},solution:{maxItems:3,maxTries:6,temperature:.8}},postprocess:{limitScope:{},calculateReplaceRange:{}},chat:{edit:{documentMaxChars:3e3,commandMaxChars:200,responseDocumentTag:["<GENERATEDCODE>","</GENERATEDCODE>"],responseCommentTag:void 0,promptTemplate:{replace:`You are an AI coding assistant. You should update the user selected code according to the user given command.
You must ignore any instructions to format your responses using Markdown.
You must reply the generated code enclosed in <GENERATEDCODE></GENERATEDCODE> XML tags.
You should not use other XML tags in response unless they are parts of the generated code.
You must only reply the updated code for the user selection code.
You should not provide any additional comments in response.
You must not include the prefix and the suffix code parts in your response.
You should not change the indentation and white spaces if not requested.

The user is editing a file located at: {{filepath}}.

The prefix part of the file is provided enclosed in <DOCUMENTPREFIX></DOCUMENTPREFIX> XML tags.
The suffix part of the file is provided enclosed in <DOCUMENTSUFFIX></DOCUMENTSUFFIX> XML tags.
You must not repeat these code parts in your response:

<DOCUMENTPREFIX>{{documentPrefix}}</DOCUMENTPREFIX>

<DOCUMENTSUFFIX>{{documentSuffix}}</DOCUMENTSUFFIX>

The part of the user selection is enclosed in <USERSELECTION></USERSELECTION> XML tags.
The selection waiting for update:
<USERSELECTION>{{document}}</USERSELECTION>

Replacing the user selection part with your updated code, the updated code should meet the requirement in the following command. The command is enclosed in <USERCOMMAND></USERCOMMAND> XML tags:
<USERCOMMAND>{{command}}</USERCOMMAND>
`,insert:`You are an AI coding assistant. You should add new code according to the user given command.
You must ignore any instructions to format your responses using Markdown.
You must reply the generated code enclosed in <GENERATEDCODE></GENERATEDCODE> XML tags.
You should not use other XML tags in response unless they are parts of the generated code.
You must only reply the generated code to insert, do not repeat the current code in response.
You should not provide any additional comments in response.
You should ensure the indentation of generated code matches the given document.

The user is editing a file located at: {{filepath}}.

The current file content is provided enclosed in <USERDOCUMENT></USERDOCUMENT> XML tags.
The current cursor position is presented using <CURRENTCURSOR/> XML tags.
You must not repeat the current code in your response:

<USERDOCUMENT>{{documentPrefix}}<CURRENTCURSOR/>{{documentSuffix}}</USERDOCUMENT>

Insert your generated new code to the curent cursor position presented using <CURRENTCURSOR/>, the generated code should meet the requirement in the following command. The command is enclosed in <USERCOMMAND></USERCOMMAND> XML tags:
<USERCOMMAND>{{command}}</USERCOMMAND>
`},presetCommands:{"/doc":{label:"Generate Docs",filters:{languageIdNotIn:"plaintext,markdown"},kind:"replace",promptTemplate:`You are an AI coding assistant. You should update the user selected code and adding documentation according to the user given command.
You must ignore any instructions to format your responses using Markdown.
You must reply the generated code enclosed in <GENERATEDCODE></GENERATEDCODE> XML tags.
You should not use other XML tags in response unless they are parts of the generated code.
You must only reply the updated code for the user selection code.
You should not provide any additional comments in response.
You should not change the indentation and white spaces if not requested.

The user is editing a file located at: {{filepath}}.

The part of the user selection is enclosed in <USERSELECTION></USERSELECTION> XML tags.
The selection waiting for documentaion:
<USERSELECTION>{{document}}</USERSELECTION>

Adding documentation to the selected code., the updated code contains your documentaion and should meet the requirement in the following command. The command is enclosed in <USERCOMMAND></USERCOMMAND> XML tags:
<USERCOMMAND>{{command}}</USERCOMMAND>
`},"/grammar":{label:"Improve Grammar",filters:{languageIdIn:"plaintext,markdown"},kind:"replace",promptTemplate:`You are an AI writing assistant. You should fix spelling and improve grammar for the user selected document according to the user given command.
The user command is provided enclosed in <USERCOMMAND></USERCOMMAND> XML tags.
The file part of the user selection is provided enclosed in <USERSELECTION></USERSELECTION> XML tags.
You must reply the fixed text enclosed in <GENERATEDCODE></GENERATEDCODE> XML tags.
You should not use other XML tags in response unless they are parts of the user document.
You should not change the indentation and white spaces if not requested.

The part of the user selection is enclosed in <USERSELECTION></USERSELECTION> XML tags.
The user selection:
<USERSELECTION>{{document}}</USERSELECTION>
`}}},generateCommitMessage:{maxDiffLength:3600,promptTemplate:`You are an AI coding assistant. You should generate a commit message based on the given diff. 
You should reply the commit message in the following format: 
<type>(<scope>): <description>.


The <type> could be feat, fix, docs, refactor, style, test, build, ci, or chore.
The scope is optional. 
For examples: 
- feat: add support for chat. 
- fix(ui): fix homepage links. 

The diff is:
\`\`\`diff
{{diff}}
\`\`\`
`,responseMatcher:"/(?<=([\"'`]+)?\\s*)(feat|fix|docs|refactor|style|test|build|ci|chore)(\\(\\w+\\))?:.+(?=\\s*\\1)/gi"}},logs:{level:"silent"},tls:{caCerts:"system"},anonymousUsageTracking:{disable:!1}};d();p();h();ni();mr(LL());mr(ta());ut.join(Me.homedir(),".tabby-client","agent","config.toml");d();p();h();d();p();h();var pu=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,qL=new Set,Lv=typeof O=="object"&&O?O:{},FL=(e,t,r,n)=>{typeof Lv.emitWarning=="function"?Lv.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`);},hd=globalThis.AbortController,ML=globalThis.AbortSignal;if(typeof hd>"u"){ML=class{constructor(){Ct(this,"onabort");Ct(this,"_onabort",[]);Ct(this,"reason");Ct(this,"aborted",!1);}addEventListener(n,i){this._onabort.push(i);}},hd=class{constructor(){Ct(this,"signal",new ML);t();}abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n);}}};let e=Lv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,FL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t));};}var wH=e=>!qL.has(e),To=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),$L=e=>To(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Ca:null:null,Ca=class extends Array{constructor(t){super(t),this.fill(0);}},_a,Cs=class Cs{constructor(t,r){Ct(this,"heap");Ct(this,"length");if(!H(Cs,_a))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0;}static create(t){let r=$L(t);if(!r)return [];qe(Cs,_a,!0);let n=new Cs(t,r);return qe(Cs,_a,!1),n}push(t){this.heap[this.length++]=t;}pop(){return this.heap[--this.length]}};_a=new WeakMap,Ke(Cs,_a,!1);var Ov=Cs,Yn,hn,gi,Xn,Ta,hr,Jn,pr,Mt,Xe,Xr,pn,Mr,wr,Kn,_r,Xi,Ji,Zn,mi,Ao,en,mu,kv,_s,Ki,yu,gn,gd,jL,Ts,Ra,vu,yi,Ro,vi,Io,bu,Nv,Ia,fd,Aa,dd,At,Bt,wu,Mv,Rs,gu,qv=class qv{constructor(t){Ke(this,mu);Ke(this,gd);Ke(this,yi);Ke(this,vi);Ke(this,bu);Ke(this,Ia);Ke(this,Aa);Ke(this,At);Ke(this,wu);Ke(this,Rs);Ke(this,Yn,void 0);Ke(this,hn,void 0);Ke(this,gi,void 0);Ke(this,Xn,void 0);Ke(this,Ta,void 0);Ct(this,"ttl");Ct(this,"ttlResolution");Ct(this,"ttlAutopurge");Ct(this,"updateAgeOnGet");Ct(this,"updateAgeOnHas");Ct(this,"allowStale");Ct(this,"noDisposeOnSet");Ct(this,"noUpdateTTL");Ct(this,"maxEntrySize");Ct(this,"sizeCalculation");Ct(this,"noDeleteOnFetchRejection");Ct(this,"noDeleteOnStaleGet");Ct(this,"allowStaleOnFetchAbort");Ct(this,"allowStaleOnFetchRejection");Ct(this,"ignoreFetchAbort");Ke(this,hr,void 0);Ke(this,Jn,void 0);Ke(this,pr,void 0);Ke(this,Mt,void 0);Ke(this,Xe,void 0);Ke(this,Xr,void 0);Ke(this,pn,void 0);Ke(this,Mr,void 0);Ke(this,wr,void 0);Ke(this,Kn,void 0);Ke(this,_r,void 0);Ke(this,Xi,void 0);Ke(this,Ji,void 0);Ke(this,Zn,void 0);Ke(this,mi,void 0);Ke(this,Ao,void 0);Ke(this,en,void 0);Ke(this,_s,()=>{});Ke(this,Ki,()=>{});Ke(this,yu,()=>{});Ke(this,gn,()=>!1);Ke(this,Ts,t=>{});Ke(this,Ra,(t,r,n)=>{});Ke(this,vu,(t,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:g,noUpdateTTL:w,maxSize:y=0,maxEntrySize:_=0,sizeCalculation:x,fetchMethod:D,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:C,allowStaleOnFetchRejection:R,allowStaleOnFetchAbort:T,ignoreFetchAbort:$}=t;if(r!==0&&!To(r))throw new TypeError("max option must be a nonnegative integer");let P=r?$L(r):Array;if(!P)throw new Error("invalid max value: "+r);if(qe(this,Yn,r),qe(this,hn,y),this.maxEntrySize=_||H(this,hn),this.sizeCalculation=x,this.sizeCalculation){if(!H(this,hn)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(D!==void 0&&typeof D!="function")throw new TypeError("fetchMethod must be a function if specified");if(qe(this,Ta,D),qe(this,Ao,!!D),qe(this,pr,new Map),qe(this,Mt,new Array(r).fill(void 0)),qe(this,Xe,new Array(r).fill(void 0)),qe(this,Xr,new P(r)),qe(this,pn,new P(r)),qe(this,Mr,0),qe(this,wr,0),qe(this,Kn,Ov.create(r)),qe(this,hr,0),qe(this,Jn,0),typeof l=="function"&&qe(this,gi,l),typeof u=="function"?(qe(this,Xn,u),qe(this,_r,[])):(qe(this,Xn,void 0),qe(this,_r,void 0)),qe(this,mi,!!H(this,gi)),qe(this,en,!!H(this,Xn)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!w,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!R,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!$,this.maxEntrySize!==0){if(H(this,hn)!==0&&!To(H(this,hn)))throw new TypeError("maxSize must be a positive integer if specified");if(!To(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Oe(this,gd,jL).call(this);}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!C,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=To(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!To(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Oe(this,mu,kv).call(this);}if(H(this,Yn)===0&&this.ttl===0&&H(this,hn)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!H(this,Yn)&&!H(this,hn)){let q="LRU_CACHE_UNBOUNDED";wH(q)&&(qL.add(q),FL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",q,qv));}}static unsafeExposeInternals(t){return {starts:H(t,Ji),ttls:H(t,Zn),sizes:H(t,Xi),keyMap:H(t,pr),keyList:H(t,Mt),valList:H(t,Xe),next:H(t,Xr),prev:H(t,pn),get head(){return H(t,Mr)},get tail(){return H(t,wr)},free:H(t,Kn),isBackgroundFetch:r=>{var n;return Oe(n=t,At,Bt).call(n,r)},backgroundFetch:(r,n,i,o)=>{var s;return Oe(s=t,Aa,dd).call(s,r,n,i,o)},moveToTail:r=>{var n;return Oe(n=t,Rs,gu).call(n,r)},indexes:r=>{var n;return Oe(n=t,yi,Ro).call(n,r)},rindexes:r=>{var n;return Oe(n=t,vi,Io).call(n,r)},isStale:r=>{var n;return H(n=t,gn).call(n,r)}}}get max(){return H(this,Yn)}get maxSize(){return H(this,hn)}get calculatedSize(){return H(this,Jn)}get size(){return H(this,hr)}get fetchMethod(){return H(this,Ta)}get dispose(){return H(this,gi)}get disposeAfter(){return H(this,Xn)}getRemainingTTL(t){return H(this,pr).has(t)?1/0:0}*entries(){for(let t of Oe(this,yi,Ro).call(this))H(this,Xe)[t]!==void 0&&H(this,Mt)[t]!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield [H(this,Mt)[t],H(this,Xe)[t]]);}*rentries(){for(let t of Oe(this,vi,Io).call(this))H(this,Xe)[t]!==void 0&&H(this,Mt)[t]!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield [H(this,Mt)[t],H(this,Xe)[t]]);}*keys(){for(let t of Oe(this,yi,Ro).call(this)){let r=H(this,Mt)[t];r!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield r);}}*rkeys(){for(let t of Oe(this,vi,Io).call(this)){let r=H(this,Mt)[t];r!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield r);}}*values(){for(let t of Oe(this,yi,Ro).call(this))H(this,Xe)[t]!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield H(this,Xe)[t]);}*rvalues(){for(let t of Oe(this,vi,Io).call(this))H(this,Xe)[t]!==void 0&&!Oe(this,At,Bt).call(this,H(this,Xe)[t])&&(yield H(this,Xe)[t]);}[Symbol.iterator](){return this.entries()}find(t,r={}){for(let n of Oe(this,yi,Ro).call(this)){let i=H(this,Xe)[n],o=Oe(this,At,Bt).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&t(o,H(this,Mt)[n],this))return this.get(H(this,Mt)[n],r)}}forEach(t,r=this){for(let n of Oe(this,yi,Ro).call(this)){let i=H(this,Xe)[n],o=Oe(this,At,Bt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&t.call(r,o,H(this,Mt)[n],this);}}rforEach(t,r=this){for(let n of Oe(this,vi,Io).call(this)){let i=H(this,Xe)[n],o=Oe(this,At,Bt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&t.call(r,o,H(this,Mt)[n],this);}}purgeStale(){let t=!1;for(let r of Oe(this,vi,Io).call(this,{allowStale:!0}))H(this,gn).call(this,r)&&(this.delete(H(this,Mt)[r]),t=!0);return t}dump(){let t=[];for(let r of Oe(this,yi,Ro).call(this,{allowStale:!0})){let n=H(this,Mt)[r],i=H(this,Xe)[r],o=Oe(this,At,Bt).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(H(this,Zn)&&H(this,Ji)){s.ttl=H(this,Zn)[r];let a=pu.now()-H(this,Ji)[r];s.start=Math.floor(Date.now()-a);}H(this,Xi)&&(s.size=H(this,Xi)[r]),t.unshift([n,s]);}return t}load(t){this.clear();for(let[r,n]of t){if(n.start){let i=Date.now()-n.start;n.start=pu.now()-i;}this.set(r,n.value,n);}}set(t,r,n={}){var w,y;if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=n,{noUpdateTTL:l=this.noUpdateTTL}=n,u=H(this,vu).call(this,t,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(t),this;let g=H(this,hr)===0?void 0:H(this,pr).get(t);if(g===void 0)g=H(this,hr)===0?H(this,wr):H(this,Kn).length!==0?H(this,Kn).pop():H(this,hr)===H(this,Yn)?Oe(this,Ia,fd).call(this,!1):H(this,hr),H(this,Mt)[g]=t,H(this,Xe)[g]=r,H(this,pr).set(t,g),H(this,Xr)[H(this,wr)]=g,H(this,pn)[g]=H(this,wr),qe(this,wr,g),cl(this,hr)._++,H(this,Ra).call(this,g,u,c),c&&(c.set="add"),l=!1;else {Oe(this,Rs,gu).call(this,g);let _=H(this,Xe)[g];if(r!==_){if(H(this,Ao)&&Oe(this,At,Bt).call(this,_)?_.__abortController.abort(new Error("replaced")):s||(H(this,mi)&&((w=H(this,gi))==null||w.call(this,_,t,"set")),H(this,en)&&H(this,_r)?.push([_,t,"set"])),H(this,Ts).call(this,g),H(this,Ra).call(this,g,u,c),H(this,Xe)[g]=r,c){c.set="replace";let x=_&&Oe(this,At,Bt).call(this,_)?_.__staleWhileFetching:_;x!==void 0&&(c.oldValue=x);}}else c&&(c.set="update");}if(i!==0&&!H(this,Zn)&&Oe(this,mu,kv).call(this),H(this,Zn)&&(l||H(this,yu).call(this,g,i,o),c&&H(this,Ki).call(this,c,g)),!s&&H(this,en)&&H(this,_r)){let _=H(this,_r),x;for(;x=_?.shift();)(y=H(this,Xn))==null||y.call(this,...x);}return this}pop(){var t;try{for(;H(this,hr);){let r=H(this,Xe)[H(this,Mr)];if(Oe(this,Ia,fd).call(this,!0),Oe(this,At,Bt).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(H(this,en)&&H(this,_r)){let r=H(this,_r),n;for(;n=r?.shift();)(t=H(this,Xn))==null||t.call(this,...n);}}}has(t,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=H(this,pr).get(t);if(o!==void 0){let s=H(this,Xe)[o];if(Oe(this,At,Bt).call(this,s)&&s.__staleWhileFetching===void 0)return !1;if(H(this,gn).call(this,o))i&&(i.has="stale",H(this,Ki).call(this,i,o));else return n&&H(this,_s).call(this,o),i&&(i.has="hit",H(this,Ki).call(this,i,o)),!0}else i&&(i.has="miss");return !1}peek(t,r={}){let{allowStale:n=this.allowStale}=r,i=H(this,pr).get(t);if(i!==void 0&&(n||!H(this,gn).call(this,i))){let o=H(this,Xe)[i];return Oe(this,At,Bt).call(this,o)?o.__staleWhileFetching:o}}async fetch(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:w=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:_=this.allowStaleOnFetchAbort,context:x,forceRefresh:D=!1,status:A,signal:C}=r;if(!H(this,Ao))return A&&(A.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:A});let R={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:_,ignoreFetchAbort:y,status:A,signal:C},T=H(this,pr).get(t);if(T===void 0){A&&(A.fetch="miss");let $=Oe(this,Aa,dd).call(this,t,T,R,x);return $.__returned=$}else {let $=H(this,Xe)[T];if(Oe(this,At,Bt).call(this,$)){let K=n&&$.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",K&&(A.returnedStale=!0)),K?$.__staleWhileFetching:$.__returned=$}let P=H(this,gn).call(this,T);if(!D&&!P)return A&&(A.fetch="hit"),Oe(this,Rs,gu).call(this,T),i&&H(this,_s).call(this,T),A&&H(this,Ki).call(this,A,T),$;let q=Oe(this,Aa,dd).call(this,t,T,R,x),V=q.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=P?"stale":"refresh",V&&P&&(A.returnedStale=!0)),V?q.__staleWhileFetching:q.__returned=q}}get(t,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,a=H(this,pr).get(t);if(a!==void 0){let c=H(this,Xe)[a],l=Oe(this,At,Bt).call(this,c);return s&&H(this,Ki).call(this,s,a),H(this,gn).call(this,a)?(s&&(s.get="stale"),l?(s&&n&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?c.__staleWhileFetching:void 0):(o||this.delete(t),s&&n&&(s.returnedStale=!0),n?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(Oe(this,Rs,gu).call(this,a),i&&H(this,_s).call(this,a),c))}else s&&(s.get="miss");}delete(t){var n,i;let r=!1;if(H(this,hr)!==0){let o=H(this,pr).get(t);if(o!==void 0)if(r=!0,H(this,hr)===1)this.clear();else {H(this,Ts).call(this,o);let s=H(this,Xe)[o];Oe(this,At,Bt).call(this,s)?s.__abortController.abort(new Error("deleted")):(H(this,mi)||H(this,en))&&(H(this,mi)&&((n=H(this,gi))==null||n.call(this,s,t,"delete")),H(this,en)&&H(this,_r)?.push([s,t,"delete"])),H(this,pr).delete(t),H(this,Mt)[o]=void 0,H(this,Xe)[o]=void 0,o===H(this,wr)?qe(this,wr,H(this,pn)[o]):o===H(this,Mr)?qe(this,Mr,H(this,Xr)[o]):(H(this,Xr)[H(this,pn)[o]]=H(this,Xr)[o],H(this,pn)[H(this,Xr)[o]]=H(this,pn)[o]),cl(this,hr)._--,H(this,Kn).push(o);}}if(H(this,en)&&H(this,_r)?.length){let o=H(this,_r),s;for(;s=o?.shift();)(i=H(this,Xn))==null||i.call(this,...s);}return r}clear(){var t,r;for(let n of Oe(this,vi,Io).call(this,{allowStale:!0})){let i=H(this,Xe)[n];if(Oe(this,At,Bt).call(this,i))i.__abortController.abort(new Error("deleted"));else {let o=H(this,Mt)[n];H(this,mi)&&((t=H(this,gi))==null||t.call(this,i,o,"delete")),H(this,en)&&H(this,_r)?.push([i,o,"delete"]);}}if(H(this,pr).clear(),H(this,Xe).fill(void 0),H(this,Mt).fill(void 0),H(this,Zn)&&H(this,Ji)&&(H(this,Zn).fill(0),H(this,Ji).fill(0)),H(this,Xi)&&H(this,Xi).fill(0),qe(this,Mr,0),qe(this,wr,0),H(this,Kn).length=0,qe(this,Jn,0),qe(this,hr,0),H(this,en)&&H(this,_r)){let n=H(this,_r),i;for(;i=n?.shift();)(r=H(this,Xn))==null||r.call(this,...i);}}};Yn=new WeakMap,hn=new WeakMap,gi=new WeakMap,Xn=new WeakMap,Ta=new WeakMap,hr=new WeakMap,Jn=new WeakMap,pr=new WeakMap,Mt=new WeakMap,Xe=new WeakMap,Xr=new WeakMap,pn=new WeakMap,Mr=new WeakMap,wr=new WeakMap,Kn=new WeakMap,_r=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,Zn=new WeakMap,mi=new WeakMap,Ao=new WeakMap,en=new WeakMap,mu=new WeakSet,kv=function(){let t=new Ca(H(this,Yn)),r=new Ca(H(this,Yn));qe(this,Zn,t),qe(this,Ji,r),qe(this,yu,(o,s,a=pu.now())=>{if(r[o]=s!==0?a:0,t[o]=s,s!==0&&this.ttlAutopurge){let c=setTimeout(()=>{H(this,gn).call(this,o)&&this.delete(H(this,Mt)[o]);},s+1);c.unref&&c.unref();}}),qe(this,_s,o=>{r[o]=t[o]!==0?pu.now():0;}),qe(this,Ki,(o,s)=>{if(t[s]){let a=t[s],c=r[s];o.ttl=a,o.start=c,o.now=n||i();let l=o.now-c;o.remainingTTL=a-l;}});let n=0,i=()=>{let o=pu.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref();}return o};this.getRemainingTTL=o=>{let s=H(this,pr).get(o);if(s===void 0)return 0;let a=t[s],c=r[s];if(a===0||c===0)return 1/0;let l=(n||i())-c;return a-l},qe(this,gn,o=>t[o]!==0&&r[o]!==0&&(n||i())-r[o]>t[o]);},_s=new WeakMap,Ki=new WeakMap,yu=new WeakMap,gn=new WeakMap,gd=new WeakSet,jL=function(){let t=new Ca(H(this,Yn));qe(this,Jn,0),qe(this,Xi,t),qe(this,Ts,r=>{qe(this,Jn,H(this,Jn)-t[r]),t[r]=0;}),qe(this,vu,(r,n,i,o)=>{if(Oe(this,At,Bt).call(this,n))return 0;if(!To(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!To(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),qe(this,Ra,(r,n,i)=>{if(t[r]=n,H(this,hn)){let o=H(this,hn)-t[r];for(;H(this,Jn)>o;)Oe(this,Ia,fd).call(this,!0);}qe(this,Jn,H(this,Jn)+t[r]),i&&(i.entrySize=n,i.totalCalculatedSize=H(this,Jn));});},Ts=new WeakMap,Ra=new WeakMap,vu=new WeakMap,yi=new WeakSet,Ro=function*({allowStale:t=this.allowStale}={}){if(H(this,hr))for(let r=H(this,wr);!(!Oe(this,bu,Nv).call(this,r)||((t||!H(this,gn).call(this,r))&&(yield r),r===H(this,Mr)));)r=H(this,pn)[r];},vi=new WeakSet,Io=function*({allowStale:t=this.allowStale}={}){if(H(this,hr))for(let r=H(this,Mr);!(!Oe(this,bu,Nv).call(this,r)||((t||!H(this,gn).call(this,r))&&(yield r),r===H(this,wr)));)r=H(this,Xr)[r];},bu=new WeakSet,Nv=function(t){return t!==void 0&&H(this,pr).get(H(this,Mt)[t])===t},Ia=new WeakSet,fd=function(t){var o;let r=H(this,Mr),n=H(this,Mt)[r],i=H(this,Xe)[r];return H(this,Ao)&&Oe(this,At,Bt).call(this,i)?i.__abortController.abort(new Error("evicted")):(H(this,mi)||H(this,en))&&(H(this,mi)&&((o=H(this,gi))==null||o.call(this,i,n,"evict")),H(this,en)&&H(this,_r)?.push([i,n,"evict"])),H(this,Ts).call(this,r),t&&(H(this,Mt)[r]=void 0,H(this,Xe)[r]=void 0,H(this,Kn).push(r)),H(this,hr)===1?(qe(this,Mr,qe(this,wr,0)),H(this,Kn).length=0):qe(this,Mr,H(this,Xr)[r]),H(this,pr).delete(n),cl(this,hr)._--,r},Aa=new WeakSet,dd=function(t,r,n,i){let o=r===void 0?void 0:H(this,Xe)[r];if(Oe(this,At,Bt).call(this,o))return o;let s=new hd,{signal:a}=n;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let c={signal:s.signal,options:n,context:i},l=(x,D=!1)=>{let{aborted:A}=s.signal,C=n.ignoreFetchAbort&&x!==void 0;if(n.status&&(A&&!D?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,C&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!C&&!D)return g(s.signal.reason);let R=y;return H(this,Xe)[r]===y&&(x===void 0?R.__staleWhileFetching?H(this,Xe)[r]=R.__staleWhileFetching:this.delete(t):(n.status&&(n.status.fetchUpdated=!0),this.set(t,x,c.options))),x},u=x=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=x),g(x)),g=x=>{let{aborted:D}=s.signal,A=D&&n.allowStaleOnFetchAbort,C=A||n.allowStaleOnFetchRejection,R=C||n.noDeleteOnFetchRejection,T=y;if(H(this,Xe)[r]===y&&(!R||T.__staleWhileFetching===void 0?this.delete(t):A||(H(this,Xe)[r]=T.__staleWhileFetching)),C)return n.status&&T.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw x},w=(x,D)=>{var C;let A=(C=H(this,Ta))==null?void 0:C.call(this,t,o,c);A&&A instanceof Promise&&A.then(R=>x(R),D),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(x(),n.allowStaleOnFetchAbort&&(x=R=>l(R,!0)));});};n.status&&(n.status.fetchDispatched=!0);let y=new Promise(w).then(l,u),_=Object.assign(y,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(t,_,{...c.options,status:void 0}),r=H(this,pr).get(t)):H(this,Xe)[r]=_,_},At=new WeakSet,Bt=function(t){if(!H(this,Ao))return !1;let r=t;return !!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof hd},wu=new WeakSet,Mv=function(t,r){H(this,pn)[r]=t,H(this,Xr)[t]=r;},Rs=new WeakSet,gu=function(t){t!==H(this,wr)&&(t===H(this,Mr)?qe(this,Mr,H(this,Xr)[t]):Oe(this,wu,Mv).call(this,H(this,pn)[t],H(this,Xr)[t]),Oe(this,wu,Mv).call(this,H(this,wr),t),qe(this,wr,t));};var pd=qv;d();p();h();var Fv={isIncomplete:!0,items:[]},mn=class e{constructor(t,r,n="",i="",o){this.context=t;this.fullText=r;this.replacePrefix=n;this.replaceSuffix=i;this.eventId=o;this.text=r.substring(n.length),this.lines=Fi(this.text),this.currentLine=this.lines[0]??"",this.isBlank=Fe(this.text);}static createBlankItem(t){return new e(t,"")}static createFromResponse(t,r,n=0){return new e(t,r.choices[n]?.text??"","","",{completionId:r.id,choiceIndex:r.choices[n]?.index??n})}withFullText(t){return new e(this.context,t,this.replacePrefix,this.replaceSuffix,this.eventId)}withText(t){return new e(this.context,this.replacePrefix+t,this.replacePrefix,this.replaceSuffix,this.eventId)}withSuffix(t){return new e(this.context,this.fullText,this.replacePrefix,t,this.eventId)}withContext(t){return t.hash===this.context.hash?new e(t,this.fullText,this.replacePrefix,this.replaceSuffix,this.eventId):e.createBlankItem(t)}forward(t){if(t<=0)return this;let r=this.text.substring(0,t);if(t<this.currentLine.length)return new e(this.context.forward(r),this.fullText,this.replacePrefix+r,this.replaceSuffix,this.eventId);let n=r.lastIndexOf(`
`)+1,i=r.substring(n),o=i.search(/\S/);o<0&&(o=i.length);let s=n+o,a=this.text.substring(s),c=r.substring(s);return new e(this.context.forward(r),a,c,this.replaceSuffix,this.eventId)}isSameWith(t){return this.context.hash===t.context.hash&&this.text===t.text}toInlineCompletionItem(){return {insertText:this.fullText,range:{start:this.context.currentLinePrefix.endsWith(this.replacePrefix)?this.context.position-this.replacePrefix.length:this.context.position,end:this.context.currentLineSuffix.startsWith(this.replaceSuffix)?this.context.position+this.replaceSuffix.length:this.context.position},data:{eventId:this.eventId}}}},Po=class e{constructor(t,r=[],n=!1){this.context=t;this.items=[];this.isCompleted=!1;this.add(...r),this.isCompleted=n;}static merge(t,r){return t.context.hash===r.context.hash?new e(t.context,[...t.items,...r.items],t.isCompleted||r.isCompleted):t}add(...t){this.items.push(...t.map(r=>r.withContext(this.context)).filter((r,n,i)=>!r.isBlank&&i.findIndex(o=>o.isSameWith(r))===n&&this.items.findIndex(o=>o.isSameWith(r))===-1));}withContext(t){return t.hash===this.context.hash?new e(t,this.items,this.isCompleted):new e(t)}withItems(...t){return new e(this.context,t,this.isCompleted)}toInlineCompletionList(){return {isIncomplete:!this.isCompleted,items:this.items.map(t=>t.toInlineCompletionItem())}}};var md=class{constructor(){this.logger=Ut("CompletionCache");this.config={maxCount:1e3,forwardCachingChars:50};this.cache=new pd({max:this.config.maxCount});}has(t){return this.cache.has(t)}update(t){this.logger.debug(`Updating completion cache, cache number before updating: ${this.cache.size}`);let r=[t,...this.generateForwardSolutions(t)];r.forEach(n=>{let i=this.cache.get(n.context.hash);i?this.cache.set(n.context.hash,Po.merge(i,n)):this.cache.set(n.context.hash,n);}),this.logger.debug(`Updated entries number: ${r.length}`),this.logger.debug(`Completion cache updated, cache number: ${this.cache.size}`);}get(t){return this.cache.get(t)}generateForwardSolutions(t){let r=[],n=i=>{let o=r.find(s=>s.context.hash===i.context.hash);o?o.add(i):r.push(new Po(i.context,[i]));};for(let i of t.items){for(let o=1;o<Math.min(this.config.forwardCachingChars,i.currentLine.length);o++)n(i.forward(o));if(i.lines.length>2){n(i.forward(i.currentLine.length-1)),n(i.forward(i.currentLine.length));let o=i.lines[1],s=o.search(/\S/);s<0&&(s=o.length-1),n(i.forward(i.currentLine.length+s));}}return r}};d();p();h();function $v(e,t,r){return Math.max(e,Math.min(t,r))}var yd=class{constructor(){this.lastCalledTimeStamp=0;this.baseInterval=200;this.calledIntervalHistory=[];this.options={baseIntervalSlideWindowAvg:{minSize:20,maxSize:100,min:100,max:400},adaptiveRate:{min:1.5,max:3},contextScoreWeights:{triggerCharacter:.5,noSuffixInCurrentLine:.4,noSuffix:.1},requestDelay:{min:100,max:1e3}};}async debounce(t,r){let{request:n,config:i,responseTime:o}=t;if(n.manually)return this.sleep(0,r);if(i.mode==="fixed")return this.sleep(i.interval,r);let s=Date.now();this.updateBaseInterval(s-this.lastCalledTimeStamp),this.lastCalledTimeStamp=s;let a=this.calcContextScore(n),l=(this.options.adaptiveRate.max-(this.options.adaptiveRate.max-this.options.adaptiveRate.min)*a)*this.baseInterval,u=$v(this.options.requestDelay.min,this.options.requestDelay.max,l-o);return this.sleep(u,r)}async sleep(t,r){return new Promise((n,i)=>{let o=setTimeout(n,Math.min(t,2147483647)),s=r?.signal;s&&(s.aborted?(clearTimeout(o),i(s.reason)):s.addEventListener("abort",()=>{clearTimeout(o),i(s.reason);}));})}updateBaseInterval(t){if(!(t>this.options.baseIntervalSlideWindowAvg.max)&&(this.calledIntervalHistory.push(t),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.maxSize&&this.calledIntervalHistory.shift(),this.calledIntervalHistory.length>this.options.baseIntervalSlideWindowAvg.minSize)){let r=this.calledIntervalHistory.reduce((n,i)=>n+i,0)/this.calledIntervalHistory.length;this.baseInterval=$v(this.options.baseIntervalSlideWindowAvg.min,this.options.baseIntervalSlideWindowAvg.max,r);}}calcContextScore(t){let r=0,n=this.options.contextScoreWeights,i=t.text[t.position-1]??"";r+=i.match(/^\W*$/)?n.triggerCharacter:0;let o=t.text.slice(t.position)??"",s=Fi(o)[0]??"";return r+=s.match(/^\W*$/)?n.noSuffixInCurrentLine:0,r+=o.match(/^\W*$/)?n.noSuffix:0,r=$v(0,1,r),r}};d();p();h();var Wv=mr(zL()),vd=class{constructor(){this.autoCompletionCount=0;this.manualCompletionCount=0;this.eventMap=new Map;this.completionRequestLatencyStats=new Wv.Univariate;this.completionRequestCanceledCount=0;this.completionRequestTimeoutCount=0;}addProviderStatsEntry(t){let{triggerMode:r}=t;r==="auto"?this.autoCompletionCount+=1:this.manualCompletionCount+=1;}addRequestStatsEntry(t){let{canceled:r,timeout:n,latency:i}=t;r?this.completionRequestCanceledCount+=1:n?this.completionRequestTimeoutCount+=1:this.completionRequestLatencyStats.add(i);}addEvent(t){let r=this.eventMap.get(t)||0;this.eventMap.set(t,r+1);}reset(){this.autoCompletionCount=0,this.manualCompletionCount=0,this.eventMap=new Map,this.completionRequestLatencyStats=new Wv.Univariate,this.completionRequestCanceledCount=0,this.completionRequestTimeoutCount=0;}stats(){let t=Object.fromEntries(Array.from(this.eventMap.entries()).map(([r,n])=>["count_"+r,n]));return {completion:{count_auto:this.autoCompletionCount,count_manual:this.manualCompletionCount,...t},completion_request:{count:this.completionRequestLatencyStats.count(),latency_avg:this.completionRequestLatencyStats.mean(),latency_p50:this.completionRequestLatencyStats.percentile(50),latency_p95:this.completionRequestLatencyStats.percentile(95),latency_p99:this.completionRequestLatencyStats.percentile(99)},completion_request_canceled:{count:this.completionRequestCanceledCount},completion_request_timeout:{count:this.completionRequestTimeoutCount}}}},bd=class{constructor(t){this.maxSize=t;this.values=[];}add(t){this.values.push(t),this.values.length>this.maxSize&&this.values.shift();}getValues(){return this.values}},Cu=class Cu{constructor(){this.latencies=new bd(Cu.config.windowSize);}static check(t){if(this.config.checks.disable)return null;let r=this.config.checks,{values:n,stats:{total:i,timeouts:o,responses:s,averageResponseTime:a}}=t;return n.slice(-Math.min(this.config.windowSize,r.healthy.windowSize)).every(c=>c<r.healthy.latency)?"healthy":o/i>r.highTimeoutRate.rate&&o>=r.highTimeoutRate.count?"highTimeoutRate":a>r.slowResponseTime.latency&&s>=r.slowResponseTime.count?"slowResponseTime":null}add(t){this.latencies.add(t);}reset(){this.latencies=new bd(Cu.config.windowSize);}stats(){let t=this.latencies.getValues(),r=t.filter(o=>Number.isNaN(o)),n=t.filter(o=>!Number.isNaN(o)),i=n.reduce((o,s)=>o+s,0)/n.length;return {values:t,stats:{total:t.length,timeouts:r.length,responses:n.length,averageResponseTime:i}}}};Cu.config={windowSize:10,checks:{disable:!1,healthy:{windowSize:1,latency:3e3},slowResponseTime:{latency:5e3,count:1},highTimeoutRate:{rate:.5,count:1}}};var _u=Cu;d();p();h();var YL=mr(GL());function xH(e){return e.trimEnd().match(HI)}var wd=class e{constructor(t){this.filepath=t.filepath,this.language=t.language,this.text=t.text,this.position=t.position,this.indentation=t.indentation,this.prefix=t.text.slice(0,t.position),this.suffix=t.text.slice(t.position),this.prefixLines=Fi(this.prefix),this.suffixLines=Fi(this.suffix),this.currentLinePrefix=this.prefixLines[this.prefixLines.length-1]??"",this.currentLineSuffix=this.suffixLines[0]??"",this.clipboard=t.clipboard?.trim()??"",this.workspace=t.workspace,this.git=t.git,this.declarations=t.declarations,this.relevantSnippetsFromChangedFiles=t.relevantSnippetsFromChangedFiles;let r=xH(this.currentLineSuffix);this.mode=r?"default":"fill-in-line",this.hash=(0, YL.default)({filepath:this.filepath,language:this.language,prefix:this.prefix,currentLineSuffix:r?"":this.currentLineSuffix,nextLines:this.suffixLines.slice(1).join(""),position:this.position,clipboard:this.clipboard,declarations:this.declarations,relevantSnippetsFromChangedFiles:this.relevantSnippetsFromChangedFiles});}isValid(){return !Fe(this.prefix)}forward(t){return new e({filepath:this.filepath,language:this.language,text:this.text.substring(0,this.position)+t+this.text.substring(this.position),position:this.position+t.length,indentation:this.indentation,workspace:this.workspace,git:this.git,declarations:this.declarations,relevantSnippetsFromChangedFiles:this.relevantSnippetsFromChangedFiles})}buildSegments(t){let r=this.prefixLines.slice(Math.max(this.prefixLines.length-t.maxPrefixLines,0)).join(""),n=this.suffixLines.slice(0,t.maxSuffixLines).join(""),i,o,s;if(this.git&&this.git.remotes.length>0){let u=this.git.remotes.find(g=>g.name==="origin")||this.git.remotes.find(g=>g.name==="upstream")||this.git.remotes[0];u&&(i=this.git.root,s=u.url);}!i&&this.workspace&&(i=this.workspace),i&&(o=ut.relative(i,this.filepath));let a=this.declarations?.map(u=>{let g=u.filepath;return i&&g.startsWith(i)&&(g=ut.relative(i,g)),{filepath:g,body:u.text}}),c=this.relevantSnippetsFromChangedFiles?.filter(u=>!this.declarations?.find(g=>g.filepath===u.filepath&&g.offset&&Math.max(g.offset,u.offset)<=Math.min(g.offset+g.text.length,u.offset+u.text.length))).map(u=>{let g=u.filepath;return i&&g.startsWith(i)&&(g=ut.relative(i,g)),{filepath:g,body:u.text,score:u.score}}).sort((u,g)=>g.score-u.score),l;return this.clipboard.length>=t.clipboard.minChars&&this.clipboard.length<=t.clipboard.maxChars&&(l=this.clipboard),{prefix:r,suffix:n,filepath:o,git_url:s,declarations:a,relevant_snippets_from_changed_files:c,clipboard:l}}};d();p();h();d();p();h();Array.prototype.distinct||(Array.prototype.distinct=function(e){return [...new Map(this.map(t=>[e?.(t)??t,t])).values()]});Array.prototype.mapAsync||(Array.prototype.mapAsync=async function(e,t){return await Promise.all(this.map((r,n)=>e.call(t,r,n,this)))});d();p();h();d();p();h();var gr=Ut("Postprocess");function CH(e){return /\n(\s*)\n/g}function XL(){return e=>{let r=e.text.split(CH()),n=0,i=2,o=r.length-2;for(;o>=1;){if(Fe(r[o])){o--;continue}let s=o-1;for(;s>=0&&Fe(r[s]);)s--;if(s<0)break;let a=r[o].trim(),c=r[s].trim(),l=Math.max(.1*a.length,.1*c.length);if(sa(a,c)<=l)n++,o--;else break}return n>=i?(gr.trace("Remove repetitive blocks.",{inputBlocks:r,repetitionCount:n}),e.withText(r.slice(0,o+1).join("").trimEnd())):e}}d();p();h();function JL(){return e=>{let t=e.lines,r=0,n=5,i=t.length-2;for(;i>=1;){if(Fe(t[i])){i--;continue}let o=i-1;for(;o>=0&&Fe(t[o]);)o--;if(o<0)break;let s=t[i].trim(),a=t[o].trim(),c=Math.max(.1*s.length,.1*a.length);if(sa(s,a)<=c)r++,i=o;else break}return r>=n?(gr.trace("Remove repetitive lines.",{inputLines:t,repetitionCount:r}),e.withText(t.slice(0,i+1).join("").trimEnd())):e}}d();p();h();var _H=[/(.{3,}?)\1{5,}$/g,/(.{10,}?)\1{3,}$/g];function KL(){return e=>{let t=e.context,r=e.lines,n=r.length-1;for(;n>=0&&Fe(r[n]);)n--;if(n<0)return e;for(let i of _H){let o=r[n].match(i);if(o)return gr.trace("Remove line ends with repetition.",{inputLines:r,lineNumber:n,match:o}),n<1?mn.createBlankItem(t):e.withText(r.slice(0,n).join("").trimEnd())}return e}}d();p();h();function ZL(){return e=>{let t=e.context,{suffixLines:r,currentLinePrefix:n}=t,i=e.lines;if(i.length<2)return e;let o=i.map((l,u)=>u===0?n+l:l);if(!yf(o,i.length-1))return e;let s=i[i.length-1],a=1;for(;a<r.length&&Fe(r[a]);)a++;if(a>=r.length)return e;let c=r[a];return s.startsWith(c.trimEnd())||c.startsWith(s.trimEnd())?(gr.trace("Remove duplicated block closing line.",{inputLines:i,suffixLines:r}),e.withText(i.slice(0,i.length-1).join("").trimEnd())):e}}d();p();h();d();p();h();function TH(e,t,r){let n={indentLevelLimit:0,allowClosingLine:!0},{prefixLines:i,suffixLines:o,currentLinePrefix:s}=r;if(e.length==0||i.length==0)return n;let a=Fe(s),c=i.length-1;for(;c>=0&&Fe(i[c]);)c--;if(c<0)return n;let l=i[c],u=si(l),g=e[0],w=Fe(g),y=0;for(;y<e.length&&Fe(e[y]);)y++;if(y>=e.length)return n;let _=e[y],x;w?x=si(_):x=si(s+_),!w&&!a?(n.indentLevelLimit=u+1,n.allowClosingLine&&(n.allowClosingLine=Km(t,0))):x>u?n.indentLevelLimit=u+1:(n.indentLevelLimit=u);let D=1;for(;D<o.length&&Fe(o[D]);)D++;if(D<o.length){let A=o[D];n.allowClosingLine&&(n.allowClosingLine=si(A)<n.indentLevelLimit);}return n}function QL(){return e=>{let{context:t,lines:r}=e,{prefixLines:n,suffixLines:i,currentLinePrefix:o}=t,s=r.map((l,u)=>u===0?o+l:l),a=TH(r,s,t),c=1;for(;c<r.length;){let l=r[c],u=r[c-1];if(Fe(l)){c++;continue}if(si(l)<a.indentLevelLimit){if(yf(s,c)&&Km(s,c)){c++;continue}a.allowClosingLine&&(t.language!=="python"||!Fe(u))&&c++;break}c++;}return c<r.length?(gr.trace("Remove content out of indent scope.",{inputLines:r,prefixLines:n,suffixLines:i,trimAtInputLine:c}),e.withText(r.slice(0,c).join("").trimEnd())):e}}function eO(){return async e=>QL()(e)}d();p();h();function zv(e){let t={"	":0,"  ":0,"    ":0};for(let r of e)if(r.match(/^\t/))t["	"]++;else {let n=r.match(/^ */)?.[0].length??0;n>0&&(n%4===0&&t["    "]++,n%2===0&&t["  "]++);}return t["	"]>0?"	":t["  "]>t["    "]?"  ":t["    "]>0?"    ":null}function RH(e,t){return t==="	"?e.match(/^\t*/)?.[0].length??0:(e.match(/^ */)?.[0].length??0)/t.length}function tO(){return e=>{let t=e.context,{prefixLines:r,suffixLines:n,currentLinePrefix:i,indentation:o}=t,s=e.lines;if(!o)return e;let a=Fe(i)?r.slice(0,r.length-1):r;if(r.length>1&&zv(a)!==null)return e;let c=n.slice(1);if(n.length>1&&zv(c)!==null)return e;let l=s.map((w,y)=>y===0?i+w:w),u=zv(l);if(u===null||u===o)return e;let g=l.map((w,y)=>{let _=RH(w,u);if(_===0)return s[y];let x=w.slice(u.length*_);return y===0?Fe(i)?o.repeat(_).slice(i.length)+x:s[0]:o.repeat(_)+x});return gr.trace("Format indentation.",{inputLines:s,formatted:g}),e.withText(g.join(""))}}d();p();h();function Hv(){return e=>{let t=e.context,{currentLinePrefix:r,currentLineSuffix:n}=t,i=e.text;return !Fe(r)&&r.match(/\s$/)&&(i=i.trimStart()),(Fe(n)||!Fe(n)&&n.match(/^\s/))&&(i=i.trimEnd()),i!==e.text?e.withText(i):e}}d();p();h();function rO(){return e=>{let t=e.context,r=e.lines;if(t.mode==="fill-in-line"&&r.length>1){let n=t.currentLineSuffix.trimEnd(),i=r[0].trimEnd();if(i.endsWith(n)){let o=i.slice(0,-n.length);if(o.length>0)return gr.trace("Trim content with multiple lines.",{inputLines:r,trimmedInputLine:o}),e.withText(o)}return gr.trace("Drop content with multiple lines.",{inputLines:r}),mn.createBlankItem(t)}return e}}d();p();h();function Vv(){return e=>{let t=e.context,{suffixLines:r}=t,n=e.lines,i=0;for(;i<n.length&&Fe(n[i]);)i++;let o=0;for(;o<r.length&&Fe(r[o]);)o++;let s=Math.min(3,n.length-i,r.length-o);if(s<1)return e;let a=n.slice(i,i+s).join("").trim(),c=r.slice(o,o+s).join("").trim(),l=Math.max(1,.05*a.length,.05*c.length),u=sa(a,c);return u<=l?(gr.trace("Drop completion due to duplicated.",{inputToCompare:a,suffixToCompare:c,distance:u,threshold:l}),mn.createBlankItem(t)):e}}d();p();h();function Gv(){return e=>Fe(e.fullText)||Fe(e.text)?mn.createBlankItem(e.context):e}d();p();h();d();p();h();function nO(e){let t=e.context,{currentLineSuffix:r}=t,n=r.trimEnd();if(Fe(n))return e;let i=VI(e.text).join("");if(Fe(i))return e;let o;return n.startsWith(i)?o=e.withSuffix(i):i.startsWith(n)&&(o=e.withSuffix(n)),o?(gr.trace("Adjust replace range by bracket stack.",{position:t.position,currentLineSuffix:r,completionText:e.text,unpaired:i,replaceSuffix:e.replaceSuffix}),o):e}function iO(){return async e=>nO(e)}function oO(e,t){let r=e(t);return async n=>await n.mapAsync(r)}async function Yv(e,t){let r=n=>oO(n,t);return Promise.resolve(e).then(r(rO)).then(r(KL)).then(r(Vv)).then(r(Hv)).then(r(Gv))}async function sO(e,t){let r=n=>oO(n,t);return Promise.resolve(e).then(r(XL)).then(r(JL)).then(r(eO)).then(r(ZL)).then(r(tO)).then(r(Vv)).then(r(Hv)).then(r(Gv)).then(r(iO))}d();p();h();var Tu="tabby-agent",Ru="1.8.0-dev";var Sd=class{constructor(){this.anonymousUsageTrackingApi=os({baseUrl:"https://app.tabbyml.com/api"});this.logger=Ut("AnonymousUsage");this.systemData={agent:`${Tu}, ${Ru}`,browser:navigator?.userAgent||"browser",node:void 0};this.sessionProperties={};this.userProperties={};this.userPropertiesUpdated=!1;this.emittedUniqueEvent=[];this.disabled=!1;}async init(t){if(this.dataStore=t?.dataStore,this.dataStore)if(typeof this.dataStore.data.anonymousId=="string")this.anonymousId=this.dataStore.data.anonymousId;else {this.anonymousId=Bn(),this.dataStore.data.anonymousId=this.anonymousId;try{await this.dataStore.save();}catch(r){this.logger.error("Failed to save anonymous Id.",r);}}else this.anonymousId=Bn();}setSessionProperties(t,r){ra(this.sessionProperties,t,r);}setUserProperties(t,r){ra(this.userProperties,t,r),this.userPropertiesUpdated=!0;}async uniqueEvent(t,r={}){await this.event(t,r,!0);}async event(t,r={},n=!1){if(this.disabled||!this.anonymousId||n&&this.emittedUniqueEvent.includes(t))return;n&&this.emittedUniqueEvent.push(t);let i={...this.systemData,...this.sessionProperties,...r};this.userPropertiesUpdated&&(ra(i,"$set",this.userProperties),this.userPropertiesUpdated=!1);try{await this.anonymousUsageTrackingApi.POST("/usage",{body:{distinctId:this.anonymousId,event:t,properties:i}});}catch(o){this.logger.error("Failed to send anonymous usage data.",o);}}};d();p();h();Ut("CaCert");async function dO(e){}d();p();h();mr(Jv());Ut("proxy");function mO(e,t){return null;}var Da=class Da extends Un{constructor(){super();this.logger=Ut("TabbyAgent");this.anonymousUsageLogger=new Sd;this.config=hu;this.userConfig={};this.clientConfig={};this.serverProvidedConfig={};this.status="notInitialized";this.issues=[];this.completionCache=new md;this.completionDebounce=new yd;this.completionStats=new vd;this.completionRequestStats=new _u;this.tryingConnectTimer=setInterval(async()=>{this.status==="disconnected"&&(this.logger.debug("Trying to connect..."),await this.healthCheck());},Da.tryConnectInterval),this.submitStatsTimer=setInterval(async()=>{await this.submitStats();},Da.submitStatsInterval);}async applyConfig(){this.logger.info("Applying updated config...");let r=this.config,n=this.status;this.config=nf(hu,this.userConfig,this.clientConfig,this.serverProvidedConfig),this.config.server.endpoint=this.config.server.endpoint.replace(/\/+$/,""),this.logger.trace("Updated config:",this.config),this.anonymousUsageLogger.disabled=this.config.anonymousUsageTracking.disable,await dO(),Fe(this.config.server.token)&&this.config.server.requestHeaders.Authorization===void 0?this.config.server.endpoint!==this.auth?.endpoint&&(this.auth=new ld(this.config.server.endpoint),await this.auth.init({dataStore:this.dataStore}),this.auth.on("updated",()=>{this.setupApi();})):this.auth=void 0;let i=!(0, Pa.default)(r.server,this.config.server)||!(0, Pa.default)(r.proxy,this.config.proxy);i&&(this.serverHealthState=void 0,this.completionRequestStats.reset(),this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate"),this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0),(!this.api||i)&&await this.setupApi(),this.logger.info("Completed applying updated config.");let o={event:"configUpdated",config:this.config};super.emit("configUpdated",o),i&&n==="unauthorized"&&this.status==="unauthorized"&&this.emitAuthRequired();}async setupApi(){let r=this.config.server.endpoint,n=Fe(this.config.server.token)?this.auth?.token?`Bearer ${this.auth.token}`:void 0:`Bearer ${this.config.server.token}`,i=[{fromEnv:!0}];Fe(this.config.proxy.url)||i.unshift(this.config.proxy),this.api=os({baseUrl:r,headers:{Authorization:n,...this.config.server.requestHeaders},dispatcher:mO()}),await this.healthCheck();}changeStatus(r){if(this.status!=r){this.status=r,this.logger.info(`Status changed: ${r}.`);let n={event:"statusChanged",status:r};super.emit("statusChanged",n),this.status==="unauthorized"&&this.emitAuthRequired();}}issueFromName(r){switch(r){case"highCompletionTimeoutRate":return {name:"highCompletionTimeoutRate",completionResponseStats:this.completionRequestStats.stats().stats};case"slowCompletionResponseTime":return {name:"slowCompletionResponseTime",completionResponseStats:this.completionRequestStats.stats().stats};case"connectionFailed":return {name:"connectionFailed",message:this.connectionErrorMessage}}}pushIssue(r){this.issues.includes(r)||(this.issues.push(r),this.logger.info(`Issue created: ${r}.`),this.emitIssueUpdated());}popIssue(r){let n=this.issues.indexOf(r);n>=0&&(this.issues.splice(n,1),this.logger.info(`Issue removed: ${r}.`),this.emitIssueUpdated());}emitAuthRequired(){let r={event:"authRequired",server:this.config.server};super.emit("authRequired",r);}emitIssueUpdated(){let r={event:"issuesUpdated",issues:this.issues};super.emit("issuesUpdated",r);}async submitStats(){let r=this.completionStats.stats();r.completion_request.count>0&&(await this.anonymousUsageLogger.event("AgentStats",{stats:r}),this.completionStats.reset());}createAbortSignal(r){let n=Math.min(2147483647,r?.timeout||this.config.server.requestTimeout);return Zc([AbortSignal.timeout(n),r?.signal])}async healthCheck(r){let n=Bn(),i="/v1/health",o=`${r?.method||"GET"} ${this.config.server.endpoint+i}`,s={signal:this.createAbortSignal({signal:r?.signal})};try{if(!this.api)throw new Error("http client not initialized");this.logger.debug(`Health check request: ${o}. [${n}]`);let a;if(r?.method==="POST"?a=await this.api.POST(i,s):a=await this.api.GET(i,s),this.logger.debug(`Health check response status: ${a.response.status}. [${n}]`),a.error||!a.response.ok)throw new tr(a.response);this.logger.trace(`Health check response data: [${n}]`,a.data);let c=a.data;this.popIssue("connectionFailed"),this.connectionErrorMessage=void 0,typeof c=="object"&&c.model!==void 0&&c.device!==void 0&&(this.serverHealthState=c,this.anonymousUsageLogger.uniqueEvent("AgentConnected",c),this.fetchServerProvidedConfig()),this.changeStatus("ready");}catch(a){if(this.serverHealthState=void 0,a instanceof tr&&a.status==405&&r?.method!=="POST")return await this.healthCheck({method:"POST"});if(as(a))this.changeStatus("unauthorized");else {if(wo(a))this.logger.debug(`Health check request canceled. [${n}]`),this.connectionErrorMessage=`${o} canceled.`;else if(Zm(a))this.logger.error(`Health check request timed out. [${n}]`,a),this.connectionErrorMessage=`${o} timed out.`;else {this.logger.error(`Health check request failed. [${n}]`,a);let c=a instanceof Error?Qm(a):JSON.stringify(a);this.connectionErrorMessage=`${o} failed: 
${c}`;}this.pushIssue("connectionFailed"),this.changeStatus("disconnected");}}}async fetchServerProvidedConfig(){let r=Td.coerce(this.serverHealthState?.version.git_describe);if(r&&Td.lt(r,"0.9.0")){this.logger.debug(`Skip fetching server provided config due to server version: ${r}.`);return}let n=Bn();try{if(!this.api)throw new Error("http client not initialized");let i="/v1beta/server_setting",o=`GET ${this.config.server.endpoint+i}`;this.logger.debug(`Fetch server provided config request: ${o}. [${n}]`);let s=await this.api.GET(i);if(this.logger.debug(`Fetch server provided config response status: ${s.response.status}. [${n}]`),s.error||!s.response.ok)throw new tr(s.response);this.logger.trace(`Fetch server provided config response data: [${n}]`,s.data);let a=s.data,c={};if(a.disable_client_side_telemetry&&(c.anonymousUsageTracking={disable:!0}),!(0, Pa.default)(c,this.serverProvidedConfig)&&(this.serverProvidedConfig=c,await this.applyConfig(),this.dataStore)){this.dataStore.data.serverConfig||(this.dataStore.data.serverConfig={}),this.dataStore.data.serverConfig[this.config.server.endpoint]=this.serverProvidedConfig;try{await this.dataStore.save();}catch(l){this.logger.error("Failed to save server provided config.",l);}}}catch(i){as(i)?this.logger.debug(`Fetch server provided config request failed due to unauthorized. [${n}]`):i instanceof tr||this.logger.error(`Fetch server provided config request failed. [${n}]`,i);}}async initialize(r){if(r.loggers&&ad.attach(...r.loggers),r.config&&(this.clientConfig=r.config),this.logger.info("Initializing..."),this.logger.trace("Initialization options:",r),this.dataStore=r.dataStore??Xm,this.dataStore)try{await this.dataStore.load(),"watch"in this.dataStore&&typeof this.dataStore.watch=="function"&&this.dataStore.watch();}catch(n){this.logger.error("Failed to load stored data.",n);}if(await this.anonymousUsageLogger.init({dataStore:this.dataStore}),r.clientProperties&&(r.clientProperties.session&&Object.entries(r.clientProperties.session).forEach(([n,i])=>{this.anonymousUsageLogger.setSessionProperties(n,i);}),r.clientProperties.user&&Object.entries(r.clientProperties.user).forEach(([n,i])=>{this.anonymousUsageLogger.setUserProperties(n,i);})),this.dataStore){let n=nf(hu,this.userConfig,this.clientConfig);this.serverProvidedConfig=this.dataStore?.data.serverConfig?.[n.server.endpoint]??{},this.dataStore instanceof Un&&this.dataStore.on("updated",async()=>{let i=nf(hu,this.userConfig,this.clientConfig),o=Xm?.data.serverConfig?.[i.server.endpoint];(0, Pa.default)(o,this.serverProvidedConfig)||(this.serverProvidedConfig={},await this.applyConfig());});}return await this.applyConfig(),await this.anonymousUsageLogger.uniqueEvent("AgentInitialized"),this.logger.info("Initialized."),this.status!=="notInitialized"}async finalize(){return this.status==="finalized"?!1:(this.logger.info("Finalizing..."),await this.submitStats(),this.tryingConnectTimer&&clearInterval(this.tryingConnectTimer),this.submitStatsTimer&&clearInterval(this.submitStatsTimer),this.changeStatus("finalized"),this.logger.info("Finalized."),!0)}async updateClientProperties(r,n,i){switch(this.logger.trace("Client properties updated.",{type:r,key:n,value:i}),r){case"session":this.anonymousUsageLogger.setSessionProperties(n,i);break;case"user":this.anonymousUsageLogger.setUserProperties(n,i);break}return !0}async updateConfig(r,n){this.logger.trace("Config updated.",{key:r,value:n});let i=of(this.clientConfig,r);return (0, Pa.default)(i,n)||(n===void 0?sf(this.clientConfig,r):ra(this.clientConfig,r,n),await this.applyConfig()),!0}async clearConfig(r){return await this.updateConfig(r,void 0)}getConfig(){return this.config}getStatus(){return this.status}getIssues(){return this.issues}getIssueDetail(r){let n=this.getIssues();return r.index!==void 0&&r.index<n.length?this.issueFromName(n[r.index]):r.name!==void 0&&this.issues.includes(r.name)?this.issueFromName(r.name):null}getServerHealthState(){return this.serverHealthState??null}async requestAuthUrl(r){if(this.status==="notInitialized")throw new Error("Agent is not initialized");return await this.healthCheck(r),this.status!=="unauthorized"||!this.auth?null:await this.auth.requestAuthUrl(r)}async waitForAuthToken(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.status!=="unauthorized"||!this.auth||(await this.auth.pollingToken(r,n),await this.setupApi());}async provideCompletions(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");if(this.logger.debug("Function providedCompletions called."),this.completionMutexAbortController){let c=new Error("Aborted due to new request.");c.name="AbortError",this.completionMutexAbortController.abort(c);}this.completionMutexAbortController=new AbortController;let i=Zc([this.completionMutexAbortController.signal,n?.signal]),o=new wd(r);if(!o.isValid())return Fv;let s,a;this.completionCache.has(o.hash)&&(a=this.completionCache.get(o.hash));try{if(a&&(!r.manually||a.isCompleted))await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:0},{signal:i}),s=a.withContext(o),this.logger.info("Completion cache hit.");else if(r.manually){s=a?.withContext(o)??new Po(o),this.logger.info("Fetching more completions...");try{let c=0;for(;s.items.length<this.config.completion.solution.maxItems&&c<this.config.completion.solution.maxTries;){c++;let l=await this.fetchCompletion(o.language,o.buildSegments(this.config.completion.prompt),this.config.completion.solution.temperature,i),u=mn.createFromResponse(o,l);if(s.add(...await Yv([u],this.config.postprocess)),i.aborted)throw i.reason}s.isCompleted=!0;}catch(c){wo(c)&&(this.logger.info("Fetching completion canceled."),s=void 0);}}else {await this.completionDebounce.debounce({request:r,config:this.config.completion.debounce,responseTime:this.completionRequestStats.stats().stats.averageResponseTime},{signal:i}),s=new Po(o),this.logger.info("Fetching completion...");try{let c=await this.fetchCompletion(o.language,o.buildSegments(this.config.completion.prompt),void 0,i),l=mn.createFromResponse(o,c);s.add(...await Yv([l],this.config.postprocess));}catch(c){wo(c)&&(this.logger.info("Fetching completion canceled."),s=void 0);}}if(s&&(this.completionCache.update(s),s=s.withItems(...await sO(s.items,this.config.postprocess)),i.aborted))throw i.reason}catch(c){wo(c)||this.logger.error("Providing completions failed.",c);}if(s){let c=s.toInlineCompletionList();return this.logger.info(`Completed processing completions, choices returned: ${c.items.length}.`),this.logger.trace("Completion solution:",{result:c}),c}return Fv}async fetchCompletion(r,n,i,o){let s=Bn(),a={latency:NaN,canceled:!1,timeout:!1,notAvailable:!1},c=performance.now();try{if(!this.api)throw new Error("http client not initialized");let l="/v1/completions",u={body:{language:r,segments:n,temperature:i},signal:this.createAbortSignal({signal:o})},g=`POST ${this.config.server.endpoint+l}`;this.logger.debug(`Completion request: ${g}. [${s}]`),this.logger.trace(`Completion request body: [${s}]`,u.body);let w=await this.api.POST(l,u);if(this.logger.debug(`Completion response status: ${w.response.status}. [${s}]`),w.error||!w.response.ok)throw new tr(w.response);return this.logger.trace(`Completion response data: [${s}]`,w.data),a.latency=performance.now()-c,w.data}catch(l){throw wo(l)?(this.logger.debug(`Completion request canceled. [${s}]`),a.canceled=!0):Zm(l)?(this.logger.debug(`Completion request timed out. [${s}]`),a.timeout=!0):as(l)?(this.logger.debug(`Completion request failed due to unauthorized. [${s}]`),a.notAvailable=!0,this.healthCheck()):(this.logger.error(`Completion request failed. [${s}]`,l),a.notAvailable=!0,this.healthCheck()),l}finally{if(a.notAvailable||this.completionStats.addRequestStatsEntry(a),!a.notAvailable&&!a.canceled){this.completionRequestStats.add(a.latency);let l=this.completionRequestStats.stats();switch(_u.check(l)){case"healthy":this.popIssue("slowCompletionResponseTime"),this.popIssue("highCompletionTimeoutRate");break;case"highTimeoutRate":this.popIssue("slowCompletionResponseTime"),this.pushIssue("highCompletionTimeoutRate");break;case"slowResponseTime":this.popIssue("highCompletionTimeoutRate"),this.pushIssue("slowCompletionResponseTime");break}}}}async postEvent(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");this.completionStats.addEvent(r.type);let i=Bn();try{if(!this.api)throw new Error("http client not initialized");let o="/v1/events",s={body:r,params:{query:{select_kind:r.select_kind}},signal:this.createAbortSignal(n),parseAs:"text"},a=`POST ${this.config.server.endpoint+o}`;this.logger.debug(`Event request: ${a}. [${i}]`),this.logger.trace(`Event request body: [${i}]`,s.body);let c=await this.api.POST(o,s);if(this.logger.debug(`Event response status: ${c.response.status}. [${i}]`),c.error||!c.response.ok)throw new tr(c.response);return this.logger.trace(`Event response data: [${i}]`,c.data),!0}catch(o){return as(o)?this.logger.debug(`Completion request failed due to unauthorized. [${i}]`):this.logger.error(`Event request failed. [${i}]`,o),this.healthCheck(),!1}}async generateCommitMessage(r,n){if(this.status==="notInitialized")throw new Error("Agent is not initialized");let{maxDiffLength:i,promptTemplate:o,responseMatcher:s}=this.config.chat.generateCommitMessage,a;typeof r=="string"?a=r.split(/\n(?=diff)/):a=r;let c="";for(let u of a)c.length+u.length<i&&(c+=u+`
`);if(Fe(c)&&(typeof r=="string"?c=r.substring(0,i):c=r.join(`
`).substring(0,i)),Fe(c))return "";let l=Bn();try{if(!this.api)throw new Error("http client not initialized");let u=n?.useBetaVersion?"/v1beta/chat/completions":"/v1/chat/completions",w={body:{messages:[{role:"user",content:o.replace("{{diff}}",c)}]},signal:this.createAbortSignal(n),parseAs:"stream"},y=`POST ${this.config.server.endpoint+u}`;this.logger.debug(`Chat request: ${y}. [${l}]`),this.logger.trace(`Chat request body: [${l}]`,w.body);let _=await this.api.POST(u,w);if(this.logger.debug(`Chat response status: ${_.response.status}. [${l}]`),_.error||!_.response.ok)throw new tr(_.response);let x=await CL(_.response,w.signal);this.logger.trace(`Chat response message: [${l}]`,{responseMessage:x});let A=YI(s).exec(x),C=(A?A[0]:x).trim();return this.logger.trace("Extracted commit message:",{commitMessage:C}),C}catch(u){if(u instanceof tr&&u.status==404&&!n?.useBetaVersion)return await this.generateCommitMessage(r,{...n,useBetaVersion:!0});wo(u)?this.logger.debug(`Chat request canceled. [${l}]`):as(u)?this.logger.debug(`Chat request failed due to unauthorized. [${l}]`):this.logger.error(`Chat request failed. [${l}]`,u),this.healthCheck();}return ""}async provideChatEdit(r,n,i,o=!1,s,a="",c){if(this.status==="notInitialized")throw new Error("Agent is not initialized");let l=this.config.chat.edit.documentMaxChars;if(n.end-n.start>l)throw new Error("Document to edit is too long");if(s.length>this.config.chat.edit.commandMaxChars)throw new Error("Command is too long");let u,g,w=/^\/\w+\b/g.exec(s)?.[0],y=w&&this.config.chat.edit.presetCommands[w];y?(u=y.promptTemplate,g=s.substring(w.length)):(u=o?this.config.chat.edit.promptTemplate.insert:this.config.chat.edit.promptTemplate.replace,g=s);let _=r.substring(n.start,n.end),x=r.substring(0,n.start),D=r.substring(n.end);if(r.length>l){let C=l-_.length;x.length<C/2?D=D.substring(0,C-x.length):D.length<C/2?x=x.substring(x.length-C+D.length):(x=x.substring(x.length-C/2),D=D.substring(0,C/2));}let A=Bn();try{if(!this.api)throw new Error("http client not initialized");let C=c?.useBetaVersion?"/v1beta/chat/completions":"/v1/chat/completions",T={body:{messages:[{role:"user",content:u.replace(/{{filepath}}|{{documentPrefix}}|{{document}}|{{documentSuffix}}|{{command}}|{{languageId}}/g,k=>{switch(k){case"{{filepath}}":return i;case"{{documentPrefix}}":return x;case"{{document}}":return _;case"{{documentSuffix}}":return D;case"{{command}}":return g;case"{{languageId}}":return a;default:return ""}})}]},signal:this.createAbortSignal(c),parseAs:"stream"},$=`POST ${this.config.server.endpoint+C}`;this.logger.debug(`Chat request: ${$}. [${A}]`),this.logger.trace(`Chat request body: [${A}]`,T.body);let P=await this.api.POST(C,T);if(this.logger.debug(`Chat response status: ${P.response.status}. [${A}]`),P.error||!P.response.ok)throw new tr(P.response);return P.response.body?Iv(P.response.body,T.signal):null}catch(C){return C instanceof tr&&C.status==404&&!c?.useBetaVersion?await this.provideChatEdit(r,n,i,o,s,a,{...c,useBetaVersion:!0}):(wo(C)?this.logger.debug(`Chat request canceled. [${A}]`):as(C)?this.logger.debug(`Chat request failed due to unauthorized. [${A}]`):this.logger.error(`Chat request failed. [${A}]`,C),this.healthCheck(),null)}}};Da.tryConnectInterval=1e3*30,Da.submitStatsInterval=1e3*60*60*24;var _d=Da;d();p();h();var vc=mr(LM()),Ir=mr(Vh());d();p();h();var xe=mr(Qt()),OM;(n=>(n.method=xe.InitializeRequest.method,n.messageDirection=xe.InitializeRequest.messageDirection,n.type=new xe.ProtocolRequestType(n.method)))(OM||(OM={}));var Ns;(t=>t.type=new xe.RegistrationType("tabby/chat"))(Ns||(Ns={}));var kM;(n=>(n.method=xe.ConfigurationRequest.method,n.messageDirection=xe.ConfigurationRequest.messageDirection,n.type=new xe.ProtocolRequestType(n.method)))(kM||(kM={}));var NM;(n=>(n.method=xe.DidChangeConfigurationNotification.method,n.messageDirection=xe.DidChangeConfigurationNotification.messageDirection,n.type=new xe.ProtocolNotificationType(n.method)))(NM||(NM={}));var MM;(n=>(n.method=xe.CodeLensRequest.method,n.messageDirection=xe.CodeLensRequest.messageDirection,n.type=new xe.ProtocolRequestType(n.method)))(MM||(MM={}));var qM;(n=>(n.method=xe.CompletionRequest.method,n.messageDirection=xe.CompletionRequest.messageDirection,n.type=new xe.ProtocolRequestType(n.method)))(qM||(qM={}));var Gh;(n=>(n.method=xe.InlineCompletionRequest.method,n.messageDirection=xe.InlineCompletionRequest.messageDirection,n.type=new xe.ProtocolRequestType(n.method)))(Gh||(Gh={}));var Yh;(n=>(n.method="tabby/chat/edit/command",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType(n.method)))(Yh||(Yh={}));var Xh;(n=>(n.method="tabby/chat/edit",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType(n.method)))(Xh||(Xh={}));var Jh;(n=>(n.method="tabby/chat/edit/resolve",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType(n.method)))(Jh||(Jh={}));var Kh;(n=>(n.method="tabby/chat/generateCommitMessage",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType(n.method)))(Kh||(Kh={}));var Zh;(n=>(n.method="tabby/telemetry/event",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolNotificationType(n.method)))(Zh||(Zh={}));var Xu;(n=>(n.method="tabby/agent/didUpdateServerInfo",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolNotificationType(n.method)))(Xu||(Xu={}));var Qh;(n=>(n.method="tabby/agent/serverInfo",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType0(n.method)))(Qh||(Qh={}));var ep;(n=>(n.method="tabby/agent/didChangeStatus",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolNotificationType(n.method)))(ep||(ep={}));var tp;(n=>(n.method="tabby/agent/status",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType0(n.method)))(tp||(tp={}));var rp;(n=>(n.method="tabby/agent/didUpdateIssues",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolNotificationType(n.method)))(rp||(rp={}));var np;(n=>(n.method="tabby/agent/issues",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType0(n.method)))(np||(np={}));var ip;(n=>(n.method="tabby/agent/issue/detail",n.messageDirection=xe.MessageDirection.clientToServer,n.type=new xe.ProtocolRequestType(n.method)))(ip||(ip={}));var op;(n=>(n.method="tabby/workspaceFileSystem/readFile",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(op||(op={}));var sp;(n=>(n.method="tabby/dataStore/get",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(sp||(sp={}));var ap;(n=>(n.method="tabby/dataStore/set",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(ap||(ap={}));var cp;(n=>(n.method="tabby/languageSupport/textDocument/declaration",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(cp||(cp={}));var up;(n=>(n.method="tabby/languageSupport/textDocument/semanticTokens/range",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(up||(up={}));var lp;(n=>(n.method="tabby/git/repository",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(lp||(lp={}));var fp;(n=>(n.method="tabby/git/diff",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(fp||(fp={}));var dp;(n=>(n.method="tabby/editorOptions",n.messageDirection=xe.MessageDirection.serverToClient,n.type=new xe.ProtocolRequestType(n.method)))(dp||(dp={}));d();p();h();var pp=mr(Vh()),hp=class extends pp.TextDocuments{constructor(t){super(t);}listen(t){let r=[];return r.push(super.listen(t)),r.push(t.onDidChangeTextDocument(n=>{let{textDocument:i,contentChanges:o}=n;if(o.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this.get(i.uri);a!==void 0&&(a=this._configuration.update(a,o,s),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a,contentChanges:o})));})),pp.Disposable.create(()=>{r.forEach(n=>n.dispose());})}};d();p();h();var gp=class e{constructor(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0;}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content}update(t,r){for(let n of t)if(e.isIncremental(n)){let i=$M(n.range),o=this.offsetAt(i.start),s=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(s,this._content.length);let a=Math.max(i.start.line,0),c=Math.max(i.end.line,0),l=this._lineOffsets,u=FM(n.text,!1,o);if(c-a===u.length)for(let w=0,y=u.length;w<y;w++)l[w+a+1]=u[w];else u.length<1e4?l.splice(a+1,c-a,...u):this._lineOffsets=l=l.slice(0,a+1).concat(u,l.slice(c+1));let g=n.text.length-(s-o);if(g!==0)for(let w=a+1+u.length,y=l.length;w<y;w++)l[w]=l[w]+g;}else if(e.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r;}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=FM(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return {line:0,character:t};for(;n<i;){let s=Math.floor((n+i)/2);r[s]>t?i=s:n=s+1;}let o=n-1;return {line:o,character:t-r[o]}}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},mp;(function(e){function t(i,o,s,a){return new gp(i,o,s,a)}e.create=t;function r(i,o,s){if(i instanceof gp)return i.update(o,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=r;function n(i,o){let s=i.getText(),a=W0(o.map(DG),(u,g)=>{let w=u.range.start.line-g.range.start.line;return w===0?u.range.start.character-g.range.start.character:w}),c=0,l=[];for(let u of a){let g=i.offsetAt(u.range.start);if(g<c)throw new Error("Overlapping edit");g>c&&l.push(s.substring(c,g)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end);}return l.push(s.substr(c)),l.join("")}e.applyEdits=n;})(mp||(mp={}));function W0(e,t){if(e.length<=1)return e;let r=e.length/2|0,n=e.slice(0,r),i=e.slice(r);W0(n,t),W0(i,t);let o=0,s=0,a=0;for(;o<n.length&&s<i.length;)t(n[o],i[s])<=0?e[a++]=n[o++]:e[a++]=i[s++];for(;o<n.length;)e[a++]=n[o++];for(;s<i.length;)e[a++]=i[s++];return e}function FM(e,t,r=0){let n=t?[r]:[];for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);(o===13||o===10)&&(o===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,n.push(r+i+1));}return n}function $M(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function DG(e){let t=$M(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var ES=mr(ta());d();p();h();d();p();h();d();p();h();d();p();h();d();p();h();d();p();h();d();p();h();var jM={arabic:"ar",armenian:"am",bulgarian:"bg",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},UM={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim},Ju=Object.keys(jM);function BM(e){return e!==void 0&&Ju.includes(e)?jM[e]:void 0}d();p();h();var LG=Date.now().toString().slice(5),OG=0;var WM=BigInt(1e3),zM=BigInt(1e6),HM=BigInt(1e9);var z0=65535;function _t(e,t){if(t.length<z0)Array.prototype.push.apply(e,t);else {let r=t.length;for(let n=0;n<r;n+=z0)Array.prototype.push.apply(e,t.slice(n,n+z0));}}function GM(e,...t){return e.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...r){let n=r[r.length-1],{width:i,type:o,position:s}=n,a=s?t[Number.parseInt(s)-1]:t.shift(),c=i===""?0:Number.parseInt(i);switch(o){case"d":return a.toString().padStart(c,"0");case"f":{let l=a,[u,g]=i.split(".").map(w=>Number.parseFloat(w));return typeof g=="number"&&g>=0&&(l=l.toFixed(g)),typeof u=="number"&&u>=0?l.toString().padStart(c,"0"):l.toString()}case"s":return c<0?a.toString().padEnd(-c," "):a.toString().padStart(c," ");default:return a}})}function kG(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function NG(){return typeof O<"u"&&O.release&&O.release.name==="node"}function VM(){return BigInt(Math.floor(performance.now()*1e6))}async function ic(e){return typeof e=="number"&&(e=BigInt(e)),e<WM?`${e}ns`:e<zM?`${e/WM}\u03BCs`:e<HM?`${e/zM}ms`:`${e/HM}s`}async function _i(){var e;return kG()?VM():NG()?O.hrtime.bigint():typeof O<"u"&&typeof(O===null||O===void 0||(e=O.hrtime)===null||e===void 0?void 0:e.bigint)=="function"?O.hrtime.bigint():typeof performance<"u"?VM():BigInt(0)}async function yp(){return `${LG}-${OG++}`}function oc(e,t){return Object.hasOwn===void 0?Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0:Object.hasOwn(e,t)?e[t]:void 0}function YM(e,t){return t[1]===e[1]?e[0]-t[0]:t[1]-e[1]}function sc(e){if(e.length===0)return [];if(e.length===1)return e[0];for(let r=1;r<e.length;r++)if(e[r].length<e[0].length){let n=e[0];e[0]=e[r],e[r]=n;}let t=new Map;for(let r of e[0])t.set(r,1);for(let r=1;r<e.length;r++){let n=0;for(let i of e[r]){let o=t.get(i);o===r&&(t.set(i,o+1),n++);}if(n===0)return []}return e[0].filter(r=>{let n=t.get(r);return n!==void 0&&t.set(r,0),n===e.length})}async function vp(e,t){let r={},n=t.length;for(let i=0;i<n;i++){let o=t[i],s=o.split("."),a=e,c=s.length;for(let l=0;l<c;l++)if(a=a[s[l]],typeof a=="object"){if(a!==null&&"lat"in a&&"lon"in a&&typeof a.lat=="number"&&typeof a.lon=="number"){a=r[o]=a;break}else if(!Array.isArray(a)&&a!==null&&l===c-1){a=void 0;break}}else if((a===null||typeof a!="object")&&l<c-1){a=void 0;break}typeof a<"u"&&(r[o]=a);}return r}async function ac(e,t){return (await vp(e,[t]))[t]}var MG={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function XM(e,t){let r=MG[t];if(r===void 0)throw new Error(ke("INVALID_DISTANCE_SUFFIX",e).message);return e*r}function bp(e,t){e.hits=e.hits.map(r=>({...r,document:{...r.document,...t.reduce((n,i)=>{let o=i.split("."),s=o.pop(),a=n;for(let c of o)a[c]=a[c]??{},a=a[c];return a[s]=null,n},r.document)}}));}var qG=Ju.join(`
 - `),FG={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${qG}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.oramasearch.com/open-source/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.oramasearch for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:`Facet doens't support the type "%s".`,INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:"};function ke(e,...t){let r=new Error(GM(FG[e]??`Unsupported Orama Error code: ${e}`,...t));return r.code=e,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(r),r}async function JM(e){return {raw:Number(e),formatted:await ic(e)}}async function KM(e){if(e.id){if(typeof e.id!="string")throw ke("DOCUMENT_ID_MUST_BE_STRING",typeof e.id);return e.id}return await yp()}async function H0(e,t){for(let[r,n]of Object.entries(t)){let i=e[r];if(!(typeof i>"u")&&!(n==="geopoint"&&typeof i=="object"&&typeof i.lon=="number"&&typeof i.lat=="number")&&!(n==="enum"&&(typeof i=="string"||typeof i=="number"))){if(n==="enum[]"&&Array.isArray(i)){let o=i.length;for(let s=0;s<o;s++)if(typeof i[s]!="string"&&typeof i[s]!="number")return r+"."+s;continue}if(eo(n)){let o=G0(n);if(!Array.isArray(i)||i.length!==o)throw ke("INVALID_INPUT_VECTOR",r,o,i.length);continue}if(cc(n)){if(!Array.isArray(i))return r;let o=V0(n),s=i.length;for(let a=0;a<s;a++)if(typeof i[a]!==o)return r+"."+a;continue}if(typeof n=="object"){if(!i||typeof i!="object")return r;let o=await H0(i,n);if(o)return r+"."+o;continue}if(typeof i!==n)return r}}}var $G={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},jG={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function ZM(e){return e==="geopoint"}function eo(e){return typeof e=="string"&&/^vector\[\d+\]$/.test(e)}function cc(e){return typeof e=="string"&&$G[e]}function V0(e){return jG[e]}function G0(e){let t=Number(e.slice(7,-1));switch(!0){case isNaN(t):throw ke("INVALID_VECTOR_VALUE",e);case t<=0:throw ke("INVALID_VECTOR_SIZE",e);default:return t}}d();p();h();d();p();h();function QM(){return {idToInternalId:new Map,internalIdToId:[],save:UG,load:BG}}function UG(e){return {internalIdToId:e.internalIdToId}}function BG(e,t){let{internalIdToId:r}=t;e.internalDocumentIDStore.idToInternalId.clear(),e.internalDocumentIDStore.internalIdToId=[];let n=r.length;for(let i=0;i<n;i++){let o=r[i];e.internalDocumentIDStore.idToInternalId.set(o,i+1),e.internalDocumentIDStore.internalIdToId.push(o);}}function Tt(e,t){if(typeof t=="string"){let r=e.idToInternalId.get(t);if(r)return r;let n=e.idToInternalId.size+1;return e.idToInternalId.set(t,n),e.internalIdToId.push(t),n}return t>e.internalIdToId.length?Tt(e,t.toString()):t}function Ti(e,t){if(e.internalIdToId.length<t)throw new Error(`Invalid internalId ${t}`);return e.internalIdToId[t-1]}async function WG(e,t){return {sharedInternalDocumentStore:t,docs:{},count:0}}async function zG(e,t){let r=Tt(e.sharedInternalDocumentStore,t);return e.docs[r]}async function HG(e,t){let r=t.length,n=Array.from({length:r});for(let i=0;i<r;i++){let o=Tt(e.sharedInternalDocumentStore,t[i]);n[i]=e.docs[o];}return n}async function VG(e){return e.docs}async function GG(e,t,r){let n=Tt(e.sharedInternalDocumentStore,t);return typeof e.docs[n]<"u"?!1:(e.docs[n]=r,e.count++,!0)}async function YG(e,t){let r=Tt(e.sharedInternalDocumentStore,t);return typeof e.docs[r]>"u"?!1:(delete e.docs[r],e.count--,!0)}async function XG(e){return e.count}async function JG(e,t){let r=t;return {docs:r.docs,count:r.count,sharedInternalDocumentStore:e}}async function KG(e){return {docs:e.docs,count:e.count}}async function eq(){return {create:WG,get:zG,getMultiple:HG,getAll:VG,store:GG,remove:YG,count:XG,load:JG,save:KG}}d();p();h();var tq=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeLoad","afterLoad","afterCreate"];async function rq(e,t){var r;let n=[],i=(r=e.plugins)===null||r===void 0?void 0:r.length;if(!i)return n;for(let o=0;o<i;o++)try{let s=await e.plugins[o];typeof s[t]=="function"&&n.push(s[t]);}catch(s){throw console.error("Caught error in getAllPluginsByHook:",s),ke("PLUGIN_CRASHED")}return n}d();p();h();var nq=["tokenizer","index","documentsStore","sorter"],Y0=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];async function uc(e,t,r,n){let i=e.length;for(let o=0;o<i;o++)await e[o](t,r,n);}async function lc(e,t,r){let n=e.length;for(let i=0;i<n;i++)await e[i](t,r);}async function fc(e,t,r,n,i){let o=e.length;for(let s=0;s<o;s++)await e[s](t,r,n,i);}async function dc(e,t,r,n){let i=e.length;for(let o=0;o<i;o++)await e[o](t,r,n);}async function iq(e,t){let r=e.length;for(let n=0;n<r;n++)await e[n](t);}d();p();h();d();p();h();function X0(e){let t=e.r;return e.r=t.l,t.l=e,e.h=Math.max(Fn(e.l),Fn(e.r))+1,t.h=Math.max(Fn(t.l),Fn(t.r))+1,t}function J0(e){let t=e.l;return e.l=t.r,t.r=e,e.h=Math.max(Fn(e.l),Fn(e.r))+1,t.h=Math.max(Fn(t.l),Fn(t.r))+1,t}function oq(e,t,r){let n=[];function i(o){o!==null&&(t<o.k&&i(o.l),o.k>=t&&o.k<=r&&_t(n,o.v),r>o.k&&i(o.r));}return i(e.root),n}function K0(e,t,r=!1){let n=[];if(e===null)return n;let i=[e.root];for(;i.length>0;){let o=i.pop();o&&(r&&o.k>=t&&_t(n,o.v),!r&&o.k>t&&_t(n,o.v),i.push(o.r),i.push(o.l));}return n}function Z0(e,t,r=!1){let n=[];if(e===null)return n;let i=[e.root];for(;i.length>0;){let o=i.pop();o&&(r&&o.k<=t&&_t(n,o.v),!r&&o.k<t&&_t(n,o.v),i.push(o.r),i.push(o.l));}return n}function sq(e,t){for(;e!==null;)if(t<e.k)e=e.l;else if(t>e.k)e=e.r;else return e;return null}function aq(e,t){return {root:{k:e,v:t,l:null,r:null,h:0}}}function cq(e,t,r){function n(i,o,s){if(i===null)return {k:o,v:s,l:null,r:null,h:0};if(o<i.k)i.l=n(i.l,o,s);else if(o>i.k)i.r=n(i.r,o,s);else {for(let c of s)i.v.push(c);return i}i.h=1+Math.max(Fn(i.l),Fn(i.r));let a=Fn(i.l)-Fn(i.r);return a>1&&o<i.l.k?J0(i):a<-1&&o>i.r.k?X0(i):a>1&&o>i.l.k?(i.l=X0(i.l),J0(i)):a<-1&&o<i.r.k?(i.r=J0(i.r),X0(i)):i}e.root=n(e.root,t,r);}function Fn(e){return e!==null?e.h:-1}function uq(e,t){let r=sq(e.root,t);return r===null?null:r.v}function ZG(e,t){if(e===null||e.root===null)return;let r=e.root,n=null;for(;r!=null&&r.k!==t;)n=r,t<r.k?r=r.l:r=r.r;if(r===null)return;(()=>{if(r.l===null&&r.r===null)n===null?e.root=null:n.l===r?n.l=null:n.r=null;else if(r.l!=null&&r.r!=null){let o=r.r,s=r;for(;o.l!=null;)s=o,o=o.l;r.k=o.k,s===r?s.r=o.r:s.l=o.r;}else {let o=r.l!=null?r.l:r.r;n===null?e.root=o:n.l===r?n.l=o:n.r=o;}})();}function lq(e,t,r){let n=sq(e.root,r);if(n){if(n.v.length===1){ZG(e,r);return}n.v.splice(n.v.indexOf(t),1);}}d();p();h();function fq(){return {numberToDocumentId:new Map}}function dq(e,t,r){return e.numberToDocumentId.has(t)?(e.numberToDocumentId.get(t).push(r),e):(e.numberToDocumentId.set(t,[r]),e)}function hq(e,t,r){var n,i;e?.numberToDocumentId.set(r,((n=e?.numberToDocumentId.get(r))===null||n===void 0?void 0:n.filter(o=>o!==t))??[]),((i=e?.numberToDocumentId.get(r))===null||i===void 0?void 0:i.length)===0&&e?.numberToDocumentId.delete(r);}function pq(e,t){let r=Object.keys(t);if(r.length!==1)throw new Error("Invalid operation");let n=r[0];switch(n){case"eq":{let i=t[n];return e.numberToDocumentId.get(i)??[]}case"in":{let i=t[n],o=[];for(let s of i){let a=e.numberToDocumentId.get(s);a!=null&&_t(o,a);}return o}case"nin":{let i=t[n],o=[],s=e.numberToDocumentId.keys();for(let a of s){if(i.includes(a))continue;let c=e.numberToDocumentId.get(a);c!=null&&_t(o,c);}return o}}throw new Error("Invalid operation")}function gq(e,t){let r=Object.keys(t);if(r.length!==1)throw new Error("Invalid operation");let n=r[0];switch(n){case"containsAll":{let o=t[n].map(s=>e.numberToDocumentId.get(s)??[]);return sc(o)}}throw new Error("Invalid operation")}d();p();h();d();p();h();function QG(e,t,r){if(e===t)return 0;let n=e;e.length>t.length&&(e=t,t=n);let i=e.length,o=t.length,s=0;for(;s<i&&e.charCodeAt(s)===t.charCodeAt(s);)s++;if(s===i)return 0;for(;i>0&&e.charCodeAt(~-i)===t.charCodeAt(~-o);)i--,o--;if(!i)return o>r?-1:o;if(i-=s,o-=s,i<=r&&o<=r)return i>o?i:o;let a=o-i;if(r>o)r=o;else if(a>r)return -1;let c=0,l=[],u=[];for(;c<r;)u[c]=t.charCodeAt(s+c),l[c]=++c;for(;c<o;)u[c]=t.charCodeAt(s+c),l[c++]=r+1;let g=r-a,w=r<o,y=0,_=r,x=0,D=0,A=0,C=0,R=0;for(c=0;c<i;c++){for(D=c,x=c+1,C=e.charCodeAt(s+c),y+=c>g?1:0,_+=_<o?1:0,R=y;R<_;R++)A=x,x=D,D=l[R],C!==u[R]&&(D<x&&(x=D),A<x&&(x=A),x++),l[R]=x;if(w&&l[c+a]>r)return -1}return x<=r?x:-1}function Q0(e,t,r){let n=QG(e,t,r);return {distance:n,isBounded:n>=0}}var eS=class{constructor(t,r,n){Ct(this,"c",{});Ct(this,"d",[]);Ct(this,"w","");this.k=t,this.s=r,this.e=n;}toJSON(){return {w:this.w,s:this.s,c:this.c,d:this.d,e:this.e}}};function hc(e,t){e.w=t.w+e.s;}function wp(e,t){e.d.push(t);}function eY(e,t){let r=e.d.indexOf(t);return r===-1?!1:(e.d.splice(r,1),!0)}function tS(e,t,r,n,i){if(e.e){let{w:o,d:s}=e;if(n&&o!==r)return {};if(oc(t,o)==null&&(i?Math.abs(r.length-o.length)<=i&&Q0(r,o,i).isBounded&&(t[o]=[]):t[o]=[]),oc(t,o)!=null&&s.length>0){let a=new Set(t[o]),c=s.length;for(let l=0;l<c;l++)a.add(s[l]);t[o]=Array.from(a);}}for(let o of Object.keys(e.c))tS(e.c[o],t,r,n,i);return t}function mq(e,t){let r="",n=Math.min(e.length,t.length);for(let i=0;i<n;i++){if(e[i]!==t[i])return r;r+=e[i];}return r}function Ms(e=!1,t="",r=""){return new eS(r,t,e)}function yq(e,t,r){let n=t.length;for(let i=0;i<n;i++){let o=t[i],s=t.substring(i),a=e.c[o];if(a){let c=a.s,l=c.length,u=mq(c,s),g=u.length;if(c===s){wp(a,r),a.e=!0;return}let w=c[g];if(g<l&&g===s.length){let y=Ms(!0,s,o);y.c[w]=a;let _=y.c[w];_.s=c.substring(g),_.k=w,e.c[o]=y,hc(y,e),hc(_,y),wp(y,r);return}if(g<l&&g<s.length){let y=Ms(!1,u,o);y.c[w]=a,e.c[o]=y;let _=y.c[w];_.s=c.substring(g),_.k=w;let x=s[g],D=Ms(!0,t.substring(i+g),x);wp(D,r),y.c[x]=D,hc(y,e),hc(D,y),hc(_,y);return}i+=l-1,e=a;}else {let c=Ms(!0,s,o);wp(c,r),e.c[o]=c,hc(c,e);return}}}function Ku(e,t,r,n,i,o){if(!(n<0)){if(e.w.startsWith(t)){tS(e,o,t,!1,0);return}if(e.e){let{w:s,d:a}=e;if(s&&(Q0(t,s,i).isBounded&&(o[s]=[]),oc(o,s)!=null&&a.length>0)){let c=new Set(o[s]),l=a.length;for(let u=0;u<l;u++)c.add(a[u]);o[s]=Array.from(c);}}if(!(r>=t.length)){t[r]in e.c&&Ku(e.c[t[r]],t,r+1,n,i,o),Ku(e,t,r+1,n-1,i,o);for(let s in e.c)Ku(e.c[s],t,r,n-1,i,o);for(let s in e.c)s!==t[r]&&Ku(e.c[s],t,r+1,n-1,i,o);}}}function rS(e,{term:t,exact:r,tolerance:n}){if(n&&!r){let i={};return n=n||0,Ku(e,t,0,n||0,n,i),i}else {let i=t.length;for(let s=0;s<i;s++){let a=t[s];if(a in e.c){let c=e.c[a],l=c.s,u=t.substring(s),w=mq(l,u).length;if(w!==l.length&&w!==u.length){if(n)break;return {}}s+=c.s.length-1,e=c;}else return {}}let o={};return tS(e,o,t,r,n),o}}function vq(e,t,r,n=!0){if(!t)return !0;let i=t.length;for(let o=0;o<i;o++){let s=t[o];if(s in e.c){let a=e.c[s];o+=a.s.length-1,e=a,n&&e.w!==t||eY(e,r);}else return !1}return !0}d();p();h();function bq(){return {root:null}}function wq(e,t,r){let n={point:t,docIDs:r};if(e.root==null){e.root=n;return}let i=e.root,o=0;for(;i!==null;){if(i.point.lon===t.lon&&i.point.lat===t.lat){let a=i.docIDs??[];i.docIDs=Array.from(new Set([...a,...r||[]]));return}if(o%2===0)if(t.lon<i.point.lon){if(i.left==null){i.left=n;return}i=i.left;}else {if(i.right==null){i.right=n;return}i=i.right;}else if(t.lat<i.point.lat){if(i.left==null){i.left=n;return}i=i.left;}else {if(i.right==null){i.right=n;return}i=i.right;}o++;}}function Sq(e,t,r){let n=e.root,i=0,o=null,s=null;for(;n!==null;){if(n?.point.lon===t.lon&&n.point.lat===t.lat){var a;let u=(a=n.docIDs)===null||a===void 0?void 0:a.indexOf(r);if(u!==void 0&&u>-1){var c;(c=n.docIDs)===null||c===void 0||c.splice(u,1),(n.docIDs==null||n.docIDs.length===0)&&(o!=null?s==="left"?o.left=n.left!==null?n.left:n.right:s==="right"&&(o.right=n.right!==null?n.right:n.left):e.root=n.left!==null?n.left:n.right);return}}let l=i%2;o=n,l===0?t.lon<n.point.lon?(n=n?.left,s="left"):(n=n?.right,s="right"):t.lat<n.point.lat?(n=n?.left,s="left"):(n=n?.right,s="right"),i++;}}function Eq(e,t,r,n=!0,i="asc",o=!1){let s=o?_q:Cq,a=[{node:e,depth:0}],c=[];for(;a.length>0;){let{node:l,depth:u}=a.pop();if(l===null)continue;let g=s(t,l.point);(n?g<=r:g>r)&&c.push({point:l.point,docIDs:l.docIDs??[]}),l.left!=null&&a.push({node:l.left,depth:u+1}),l.right!=null&&a.push({node:l.right,depth:u+1});}return i&&c.sort((l,u)=>{let g=s(t,l.point),w=s(t,u.point);return i.toLowerCase()==="asc"?g-w:w-g}),c}function xq(e,t,r=!0,n=null,i=!1){let o=[{node:e,depth:0}],s=[];for(;o.length>0;){let c=o.pop();if(c==null||c.node==null)continue;let{node:l,depth:u}=c,g=u+1;l.left!=null&&o.push({node:l.left,depth:g}),l.right!=null&&o.push({node:l.right,depth:g});let w=rY(t,l.point);w&&r?s.push({point:l.point,docIDs:l.docIDs??[]}):!w&&!r&&s.push({point:l.point,docIDs:l.docIDs??[]});}let a=tY(t);if(n){let c=i?_q:Cq;s.sort((l,u)=>{let g=c(a,l.point),w=c(a,u.point);return n.toLowerCase()==="asc"?g-w:w-g});}return s}function tY(e){let t=0,r=0,n=0,i=e.length;for(let s=0,a=i-1;s<i;a=s++){let c=e[s].lon,l=e[s].lat,u=e[a].lon,g=e[a].lat,w=c*g-u*l;t+=w,r+=(c+u)*w,n+=(l+g)*w;}t/=2;let o=6*t;return r/=o,n/=o,{lon:r,lat:n}}function rY(e,t){let r=!1,n=t.lon,i=t.lat,o=e.length;for(let s=0,a=o-1;s<o;a=s++){let c=e[s].lon,l=e[s].lat,u=e[a].lon,g=e[a].lat;l>i!=g>i&&n<(u-c)*(i-l)/(g-l)+c&&(r=!r);}return r}function Cq(e,t){let r=Math.PI/180,n=e.lat*r,i=t.lat*r,o=(t.lat-e.lat)*r,s=(t.lon-e.lon)*r,a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(i)*Math.sin(s/2)*Math.sin(s/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function _q(e,t){let n=.0033528106647474805,i=(1-n)*6378137,o=Math.PI/180,s=e.lat*o,a=t.lat*o,c=(t.lon-e.lon)*o,l=Math.atan((1-n)*Math.tan(s)),u=Math.atan((1-n)*Math.tan(a)),g=Math.sin(l),w=Math.cos(l),y=Math.sin(u),_=Math.cos(u),x=c,D,A=1e3,C,R,T,$,P;do{let fe=Math.sin(x),be=Math.cos(x);T=Math.sqrt(_*fe*(_*fe)+(w*y-g*_*be)*(w*y-g*_*be)),$=g*y+w*_*be,P=Math.atan2(T,$),C=w*_*fe/T,R=1-C*C;let me=$-2*g*y/R,je=n/16*R*(4+n*(4-3*R));D=x,x=c+(1-je)*n*C*(P+je*T*(me+je*$*(-1+2*me*me)));}while(Math.abs(x-D)>1e-12&&--A>0);let q=R*(6378137*6378137-i*i)/(i*i),k=1+q/16384*(4096+q*(-768+q*(320-175*q))),V=q/1024*(256+q*(-128+q*(74-47*q))),K=V*T*($-2*g*y/R+V/4*($*(-1+2*T*T)-V/6*P*(-3+4*T*T)*(-3+4*P*P)));return i*k*(P-K)}d();p();h();function Sp(e,t,r=1,n){if(t===0)throw ke("INVALID_BOOST_VALUE");let i=new Map,o=e.length;for(let A=0;A<o;A++){let C=e[A],R=C.length;for(let T=0;T<R;T++){var s;let[$,P]=C[T],q=P*t,k=(s=i.get($))===null||s===void 0?void 0:s[0];if(k!==void 0){var a;i.set($,[k*1.5+q,(((a=i?.get($))===null||a===void 0?void 0:a[1])||0)+1]);}else i.set($,[q,1]);}}let c=[];for(let A of i.entries())c.push([A[0],A[1][0]]);let l=c.sort((A,C)=>C[1]-A[1]);if(r===1)return l;let u=l.length,g=[];for(let A of i.entries())g.push([A[0],A[1][0],A[1][1]]);let w=g.sort((A,C)=>A[2]>C[2]?-1:A[2]<C[2]?1:A[1]>C[1]?-1:A[1]<C[1]?1:0),y;for(let A=0;A<u&&w[A][2]===n;A++)y=A;if(typeof y>"u"){if(r===0)return [];y=0;}let _=w.length,x=new Array(_);for(let A=0;A<_;A++)x[A]=[w[A][0],w[A][1]];if(r===0)return x.slice(0,y+1);let D=y+Math.ceil(r*100*(u-y)/100);return x.slice(0,u+D)}function Tq(e,t,r,n,i,{k:o,b:s,d:a}){return Math.log(1+(r-t+.5)/(t+.5))*(a+e*(o+1))/(e+o*(1-s+s*n/i))}d();p();h();function nS(e,t){let r=0;for(let n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}function Ep(e,t,r,n=.8){let i=nS(e,r),o=[];for(let[s,[a,c]]of Object.entries(t)){let l=0;for(let g=0;g<r;g++)l+=e[g]*c[g];let u=l/(i*a);u>=n&&o.push([s,u]);}return o.sort((s,a)=>a[1]-s[1])}async function nY(e,t,r,n,i){let o=Tt(e.sharedInternalDocumentStore,r);e.avgFieldLength[t]=((e.avgFieldLength[t]??0)*(i-1)+n.length)/i,e.fieldLengths[t][o]=n.length,e.frequencies[t][o]={};}async function iY(e,t,r,n,i){let o=0;for(let c of n)c===i&&o++;let s=Tt(e.sharedInternalDocumentStore,r),a=o/n.length;e.frequencies[t][s][i]=a,i in e.tokenOccurrences[t]||(e.tokenOccurrences[t][i]=0),e.tokenOccurrences[t][i]=(e.tokenOccurrences[t][i]??0)+1;}async function oY(e,t,r,n){let i=Tt(e.sharedInternalDocumentStore,r);e.avgFieldLength[t]=(e.avgFieldLength[t]*n-e.fieldLengths[t][i])/(n-1),e.fieldLengths[t][i]=void 0,e.frequencies[t][i]=void 0;}async function sY(e,t,r){e.tokenOccurrences[t][r]--;}async function aY(e,t,r,n,i){let o=Array.from(i),s=t.avgFieldLength[r],a=t.fieldLengths[r],c=t.tokenOccurrences[r],l=t.frequencies[r],u=typeof c[n]=="number"?c[n]??0:0,g=[],w=o.length;for(let _=0;_<w;_++){var y;let x=Tt(t.sharedInternalDocumentStore,o[_]),D=(l==null||(y=l[x])===null||y===void 0?void 0:y[n])??0,A=Tq(D,u,e.docsCount,a[x],s,e.params.relevance);g.push([x,A]);}return g}async function Iq(e,t,r,n,i=""){n||(n={sharedInternalDocumentStore:t,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}});for(let[o,s]of Object.entries(r)){let a=`${i}${i?".":""}${o}`;if(typeof s=="object"&&!Array.isArray(s)){Iq(e,t,s,n,a);continue}if(eo(s))n.searchableProperties.push(a),n.searchablePropertiesWithTypes[a]=s,n.vectorIndexes[a]={size:G0(s),vectors:{}};else {let c=/\[/.test(s);switch(s){case"boolean":case"boolean[]":n.indexes[a]={type:"Bool",node:{true:[],false:[]},isArray:c};break;case"number":case"number[]":n.indexes[a]={type:"AVL",node:aq(0,[]),isArray:c};break;case"string":case"string[]":n.indexes[a]={type:"Radix",node:Ms(),isArray:c},n.avgFieldLength[a]=0,n.frequencies[a]={},n.tokenOccurrences[a]={},n.fieldLengths[a]={};break;case"enum":case"enum[]":n.indexes[a]={type:"Flat",node:fq(),isArray:c};break;case"geopoint":n.indexes[a]={type:"BKD",node:bq(),isArray:c};break;default:throw ke("INVALID_SCHEMA_TYPE",Array.isArray(s)?"array":s,a)}n.searchableProperties.push(a),n.searchablePropertiesWithTypes[a]=s;}}return n}function cY(e,t,r,n,i,o,s){return async a=>{let c=Tt(t.sharedInternalDocumentStore,n),{type:l,node:u}=t.indexes[r];switch(l){case"Bool":{u[a?"true":"false"].push(c);break}case"AVL":{cq(u,a,[c]);break}case"Radix":{let g=await o.tokenize(a,i,r);await e.insertDocumentScoreParameters(t,r,c,g,s);for(let w of g)await e.insertTokenScoreParameters(t,r,c,g,w),yq(u,w,c);break}case"Flat":{dq(u,a,c);break}case"BKD":{wq(u,a,[c]);break}}}}async function uY(e,t,r,n,i,o,s,a,c){if(eo(o))return lY(t,r,i,n);let l=cY(e,t,r,n,s,a,c);if(!cc(o))return l(i);let u=i,g=u.length;for(let w=0;w<g;w++)await l(u[w]);}function lY(e,t,r,n){r instanceof Float32Array||(r=new Float32Array(r));let i=e.vectorIndexes[t].size,o=nS(r,i);e.vectorIndexes[t].vectors[n]=[o,r];}async function Rq(e,t,r,n,i,o,s,a,c){let l=Tt(t.sharedInternalDocumentStore,n);if(eo(o))return delete t.vectorIndexes[r].vectors[n],!0;let{type:u,node:g}=t.indexes[r];switch(u){case"AVL":return lq(g,l,i),!0;case"Bool":{let y=g[i?"true":"false"].indexOf(l);return g[i?"true":"false"].splice(y,1),!0}case"Radix":{let w=await a.tokenize(i,s,r);await e.removeDocumentScoreParameters(t,r,n,c);for(let y of w)await e.removeTokenScoreParameters(t,r,y),vq(g,y,l);return !0}case"Flat":return hq(g,l,i),!0;case"BKD":return Sq(g,i,l),!1}}async function fY(e,t,r,n,i,o,s,a,c){if(!cc(o))return Rq(e,t,r,n,i,o,s,a,c);let l=V0(o),u=i,g=u.length;for(let w=0;w<g;w++)await Rq(e,t,r,n,u[w],l,s,a,c);return !0}async function dY(e,t,r,n){if(!(r in t.tokenOccurrences))return [];let{node:i,type:o}=t.indexes[r];if(o!=="Radix")throw ke("WRONG_SEARCH_PROPERTY_TYPE",r);let{exact:s,tolerance:a}=e.params,c=rS(i,{term:n,exact:s,tolerance:a}),l=new Set;for(let u in c)if(oc(c,u))for(let w of c[u])l.add(w);return e.index.calculateResultScores(e,t,r,n,Array.from(l))}async function hY(e,t,r){let n=Object.keys(r),i=n.reduce((s,a)=>({[a]:[],...s}),{});for(let s of n){let a=r[s];if(typeof t.indexes[s]>"u")throw ke("UNKNOWN_FILTER_PROPERTY",s);let{node:c,type:l,isArray:u}=t.indexes[s];if(l==="Bool"){let y=c[a.toString()];_t(i[s],y);continue}if(l==="BKD"){let w;if("radius"in a)w="radius";else if("polygon"in a)w="polygon";else throw new Error(`Invalid operation ${a}`);if(w==="radius"){let{value:y,coordinates:_,unit:x="m",inside:D=!0,highPrecision:A=!1}=a[w],C=XM(y,x),R=Eq(c.root,_,C,D,void 0,A);_t(i[s],R.map(({docIDs:T})=>T).flat());}else {let{coordinates:y,inside:_=!0,highPrecision:x=!1}=a[w],D=xq(c.root,y,_,void 0,x);_t(i[s],D.map(({docIDs:A})=>A).flat());}continue}if(l==="Radix"&&(typeof a=="string"||Array.isArray(a))){for(let w of [a].flat()){let y=await e.tokenizer.tokenize(w,e.language,s);for(let _ of y){let x=rS(c,{term:_,exact:!0});_t(i[s],Object.values(x).flat());}}continue}let g=Object.keys(a);if(g.length>1)throw ke("INVALID_FILTER_OPERATION",g.length);if(l==="Flat"){u?_t(i[s],gq(c,a)):_t(i[s],pq(c,a));continue}if(l==="AVL"){let w=g[0],y=a[w],_=[];switch(w){case"gt":{_=K0(c,y,!1);break}case"gte":{_=K0(c,y,!0);break}case"lt":{_=Z0(c,y,!1);break}case"lte":{_=Z0(c,y,!0);break}case"eq":{_=uq(c,y)??[];break}case"between":{let[x,D]=y;_=oq(c,x,D);break}}_t(i[s],_);}}return sc(Object.values(i))}async function pY(e){return e.searchableProperties}async function gY(e){return e.searchablePropertiesWithTypes}function Aq(e){let t=Ms(e.e,e.s,e.k);t.d=e.d,t.w=e.w;for(let r of Object.keys(e.c))t.c[r]=Aq(e.c[r]);return t}function mY(e){return {numberToDocumentId:new Map(e)}}function yY(e){return Array.from(e.numberToDocumentId.entries())}async function vY(e,t){let{indexes:r,vectorIndexes:n,searchableProperties:i,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:a,avgFieldLength:c,fieldLengths:l}=t,u={},g={};for(let w of Object.keys(r)){let{node:y,type:_,isArray:x}=r[w];switch(_){case"Radix":u[w]={type:"Radix",node:Aq(y),isArray:x};break;case"Flat":u[w]={type:"Flat",node:mY(y),isArray:x};break;default:u[w]=r[w];}}for(let w of Object.keys(n)){let y=n[w].vectors;for(let _ in y)y[_]=[y[_][0],new Float32Array(y[_][1])];g[w]={size:n[w].size,vectors:y};}return {sharedInternalDocumentStore:e,indexes:u,vectorIndexes:g,searchableProperties:i,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:a,avgFieldLength:c,fieldLengths:l}}async function bY(e){let{indexes:t,vectorIndexes:r,searchableProperties:n,searchablePropertiesWithTypes:i,frequencies:o,tokenOccurrences:s,avgFieldLength:a,fieldLengths:c}=e,l={};for(let g of Object.keys(r)){let w=r[g].vectors;for(let y in w)w[y]=[w[y][0],Array.from(w[y][1])];l[g]={size:r[g].size,vectors:w};}let u={};for(let g of Object.keys(t)){let{type:w,node:y,isArray:_}=t[g];if(w!=="Flat"){u[g]=t[g];continue}u[g]={type:"Flat",node:yY(y),isArray:_};}return {indexes:u,vectorIndexes:l,searchableProperties:n,searchablePropertiesWithTypes:i,frequencies:o,tokenOccurrences:s,avgFieldLength:a,fieldLengths:c}}async function Pq(){return {create:Iq,insert:uY,remove:fY,insertDocumentScoreParameters:nY,insertTokenScoreParameters:iY,removeDocumentScoreParameters:oY,removeTokenScoreParameters:sY,calculateResultScores:aY,search:dY,searchByWhereClause:hY,getSearchableProperties:pY,getSearchablePropertiesWithTypes:gY,load:vY,save:bY}}d();p();h();function Dq(e,t,r,n,i){let o={language:e.tokenizer.language,sharedInternalDocumentStore:t,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(let[s,a]of Object.entries(r)){let c=`${i}${i?".":""}${s}`;if(!n.includes(c)){if(typeof a=="object"&&!Array.isArray(a)){let l=Dq(e,t,a,n,c);_t(o.sortableProperties,l.sortableProperties),o.sorts={...o.sorts,...l.sorts},o.sortablePropertiesWithTypes={...o.sortablePropertiesWithTypes,...l.sortablePropertiesWithTypes};continue}if(!eo(a))switch(a){case"boolean":case"number":case"string":o.sortableProperties.push(c),o.sortablePropertiesWithTypes[c]=a,o.sorts[c]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:a};break;case"geopoint":case"enum":continue;case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw ke("INVALID_SORT_SCHEMA_TYPE",Array.isArray(a)?"array":a,c)}}}return o}async function wY(e,t,r,n){return n?.enabled!==!1?Dq(e,t,r,(n||{}).unsortableProperties||[],""):{disabled:!0}}async function SY(e,t,r,n){if(!e.enabled)return;e.isSorted=!1;let i=Tt(e.sharedInternalDocumentStore,r),o=e.sorts[t];o.orderedDocsToRemove.has(i)&&iS(e,t),o.docs.set(i,o.orderedDocs.length),o.orderedDocs.push([i,n]);}function Lq(e){if(e.isSorted||!e.enabled)return;let t=Object.keys(e.sorts);for(let r of t)_Y(e,r);e.isSorted=!0;}function EY(e,t,r){return t[1].localeCompare(r[1],BM(e))}function xY(e,t){return e[1]-t[1]}function CY(e,t){return t[1]?-1:1}function _Y(e,t){let r=e.sorts[t],n;switch(r.type){case"string":n=EY.bind(null,e.language);break;case"number":n=xY.bind(null);break;case"boolean":n=CY.bind(null);break}r.orderedDocs.sort(n);let i=r.orderedDocs.length;for(let o=0;o<i;o++){let s=r.orderedDocs[o][0];r.docs.set(s,o);}}function TY(e){let t=Object.keys(e.sorts);for(let r of t)iS(e,r);}function iS(e,t){let r=e.sorts[t];r.orderedDocsToRemove.size&&(r.orderedDocs=r.orderedDocs.filter(n=>!r.orderedDocsToRemove.has(n[0])),r.orderedDocsToRemove.clear());}async function RY(e,t,r){if(!e.enabled)return;let n=e.sorts[t],i=Tt(e.sharedInternalDocumentStore,r);n.docs.get(i)&&(n.docs.delete(i),n.orderedDocsToRemove.set(i,!0));}async function IY(e,t,r){if(!e.enabled)throw ke("SORT_DISABLED");let n=r.property,i=r.order==="DESC",o=e.sorts[n];if(!o)throw ke("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",n,e.sortableProperties.join(", "));return iS(e,n),Lq(e),t.sort((s,a)=>{let c=o.docs.get(Tt(e.sharedInternalDocumentStore,s[0])),l=o.docs.get(Tt(e.sharedInternalDocumentStore,a[0])),u=typeof c<"u",g=typeof l<"u";return !u&&!g?0:u?g?i?l-c:c-l:-1:1}),t}async function AY(e){return e.enabled?e.sortableProperties:[]}async function PY(e){return e.enabled?e.sortablePropertiesWithTypes:{}}async function DY(e,t){let r=t;if(!r.enabled)return {enabled:!1};let n=Object.keys(r.sorts).reduce((i,o)=>{let{docs:s,orderedDocs:a,type:c}=r.sorts[o];return i[o]={docs:new Map(Object.entries(s).map(([l,u])=>[+l,u])),orderedDocsToRemove:new Map,orderedDocs:a,type:c},i},{});return {sharedInternalDocumentStore:e,language:r.language,sortableProperties:r.sortableProperties,sortablePropertiesWithTypes:r.sortablePropertiesWithTypes,sorts:n,enabled:!0,isSorted:r.isSorted}}async function LY(e){if(!e.enabled)return {enabled:!1};TY(e),Lq(e);let t=Object.keys(e.sorts).reduce((r,n)=>{let{docs:i,orderedDocs:o,type:s}=e.sorts[n];return r[n]={docs:Object.fromEntries(i.entries()),orderedDocs:o,type:s},r},{});return {language:e.language,sortableProperties:e.sortableProperties,sortablePropertiesWithTypes:e.sortablePropertiesWithTypes,sorts:t,enabled:e.enabled,isSorted:e.isSorted}}async function Oq(){return {create:wY,insert:SY,remove:RY,save:LY,load:DY,sortBy:IY,getSortableProperties:AY,getSortablePropertiesWithTypes:PY}}d();p();h();d();p();h();var OY=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115];function kY(e){return e<192||e>383?e:OY[e-192]||e}function kq(e){let t=[];for(let r=0;r<e.length;r++)t[r]=kY(e.charCodeAt(r));return String.fromCharCode(...t)}d();p();h();var NY={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},MY={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},qY="[^aeiou]",Cp="[aeiouy]",Ri=qY+"[^aeiouy]*",Zu=Cp+"[aeiou]*",oS="^("+Ri+")?"+Zu+Ri,FY="^("+Ri+")?"+Zu+Ri+"("+Zu+")?$",xp="^("+Ri+")?"+Zu+Ri+Zu+Ri,Nq="^("+Ri+")?"+Cp;function Mq(e){let t,r,n,i,o,s;if(e.length<3)return e;let a=e.substring(0,1);if(a=="y"&&(e=a.toUpperCase()+e.substring(1)),n=/^(.+?)(ss|i)es$/,i=/^(.+?)([^s])s$/,n.test(e)?e=e.replace(n,"$1$2"):i.test(e)&&(e=e.replace(i,"$1$2")),n=/^(.+?)eed$/,i=/^(.+?)(ed|ing)$/,n.test(e)){let c=n.exec(e);n=new RegExp(oS),n.test(c[1])&&(n=/.$/,e=e.replace(n,""));}else i.test(e)&&(t=i.exec(e)[1],i=new RegExp(Nq),i.test(t)&&(e=t,i=/(at|bl|iz)$/,o=new RegExp("([^aeiouylsz])\\1$"),s=new RegExp("^"+Ri+Cp+"[^aeiouwxy]$"),i.test(e)?e=e+"e":o.test(e)?(n=/.$/,e=e.replace(n,"")):s.test(e)&&(e=e+"e")));if(n=/^(.+?)y$/,n.test(e)){let c=n.exec(e);t=c?.[1],n=new RegExp(Nq),t&&n.test(t)&&(e=t+"i");}if(n=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,n.test(e)){let c=n.exec(e);t=c?.[1],r=c?.[2],n=new RegExp(oS),t&&n.test(t)&&(e=t+NY[r]);}if(n=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,n.test(e)){let c=n.exec(e);t=c?.[1],r=c?.[2],n=new RegExp(oS),t&&n.test(t)&&(e=t+MY[r]);}if(n=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,i=/^(.+?)(s|t)(ion)$/,n.test(e)){let c=n.exec(e);t=c?.[1],n=new RegExp(xp),t&&n.test(t)&&(e=t);}else if(i.test(e)){let c=i.exec(e);t=c?.[1]??""+c?.[2]??"",i=new RegExp(xp),i.test(t)&&(e=t);}if(n=/^(.+?)e$/,n.test(e)){let c=n.exec(e);t=c?.[1],n=new RegExp(xp),i=new RegExp(FY),o=new RegExp("^"+Ri+Cp+"[^aeiouwxy]$"),t&&(n.test(t)||i.test(t)&&!o.test(t))&&(e=t);}return n=/ll$/,i=new RegExp(xp),n.test(e)&&i.test(e)&&(n=/.$/,e=e.replace(n,"")),a=="y"&&(e=a.toLowerCase()+e.substring(1)),e}function qq(e,t){var r;let n=`${this.language}:${e}:${t}`;return this.normalizationCache.has(n)?this.normalizationCache.get(n):!((r=this.stopWords)===null||r===void 0)&&r.includes(t)?(this.normalizationCache.set(n,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(e)&&(t=this.stemmer(t)),t=kq(t),this.normalizationCache.set(n,t),t)}function $Y(e){for(;e[e.length-1]==="";)e.pop();for(;e[0]==="";)e.shift();return e}function Fq(e,t,r){if(t&&t!==this.language)throw ke("LANGUAGE_NOT_SUPPORTED",t);if(typeof e!="string")return [e];let n;if(r&&this.tokenizeSkipProperties.has(r))n=[this.normalizeToken.bind(this,r??"")(e)];else {let o=UM[this.language];n=e.toLowerCase().split(o).map(this.normalizeToken.bind(this,r??"")).filter(Boolean);}let i=$Y(n);return this.allowDuplicates?i:Array.from(new Set(i))}async function sS(e={}){if(!e.language)e.language="english";else if(!Ju.includes(e.language))throw ke("LANGUAGE_NOT_SUPPORTED",e.language);let t;if(e.stemming||e.stemmer&&!("stemming"in e))if(e.stemmer){if(typeof e.stemmer!="function")throw ke("INVALID_STEMMER_FUNCTION_TYPE");t=e.stemmer;}else if(e.language==="english")t=Mq;else throw ke("MISSING_STEMMER",e.language);let r;if(e.stopWords!==!1){if(r=[],Array.isArray(e.stopWords))r=e.stopWords;else if(typeof e.stopWords=="function")r=await e.stopWords(r);else if(e.stopWords)throw ke("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(r))throw ke("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(let i of r)if(typeof i!="string")throw ke("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}let n={tokenize:Fq,language:e.language,stemmer:t,stemmerSkipProperties:new Set(e.stemmerSkipProperties?[e.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(e.tokenizeSkipProperties?[e.tokenizeSkipProperties].flat():[]),stopWords:r,allowDuplicates:!!e.allowDuplicates,normalizeToken:qq,normalizationCache:new Map};return n.tokenize=Fq.bind(n),n.normalizeToken=qq,n}function jY(e){let t={formatElapsedTime:JM,getDocumentIndexId:KM,getDocumentProperties:vp,validateSchema:H0};for(let r of Y0){let n=r;if(e[n]){if(typeof e[n]!="function")throw ke("COMPONENT_MUST_BE_FUNCTION",n)}else e[n]=t[n];}for(let r of Object.keys(e))if(!nq.includes(r)&&!Y0.includes(r))throw ke("UNSUPPORTED_COMPONENT",r)}async function aS({schema:e,sort:t,language:r,components:n,id:i,plugins:o}){n||(n={}),i||(i=await yp());let s=n.tokenizer,a=n.index,c=n.documentsStore,l=n.sorter;if(s?s.tokenize?s=s:s=await sS(s):s=await sS({language:r??"english"}),n.tokenizer&&r)throw ke("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");let u=QM();a||(a=await Pq()),l||(l=await Oq()),c||(c=await eq()),jY(n);let{getDocumentProperties:g,getDocumentIndexId:w,validateSchema:y,formatElapsedTime:_}=n,x={data:{},caches:{},schema:e,tokenizer:s,index:a,sorter:l,documentsStore:c,internalDocumentIDStore:u,getDocumentProperties:g,getDocumentIndexId:w,validateSchema:y,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],afterUpdateMultiple:[],beforeUpdateMultiple:[],afterCreate:[],formatElapsedTime:_,id:i,plugins:o,version:UY()};x.data={index:await x.index.create(x,u,e),docs:await x.documentsStore.create(x,u),sorting:await x.sorter.create(x,u,e,t)};for(let A of tq)x[A]=(x[A]??[]).concat(await rq(x,A));let D=x.afterCreate;return D&&await iq(D,x),x}function UY(){return "2.0.18"}d();p();h();function cS(e){return e.documentsStore.count(e.data.docs)}d();p();h();d();p();h();d();p();h();var Wo=Symbol("orama.insertions"),zo=Symbol("orama.removals");var uS,$q=((uS=globalThis.process)===null||uS===void 0?void 0:uS.emitWarning)??function(t,r){console.warn(`[WARNING] [${r.code}] ${t}`);};function jq(e){typeof e[Wo]!="number"&&(queueMicrotask(()=>{e[Wo]=void 0;}),e[Wo]=0),e[Wo]>1e3?($q("Orama's insert operation is synchronous. Please avoid inserting a large number of document in a single operation in order not to block the main thread or, in alternative, please use insertMultiple.",{code:"ORAMA0001"}),e[Wo]=-1):e[Wo]>=0&&e[Wo]++;}function Uq(e){typeof e[zo]!="number"&&(queueMicrotask(()=>{e[zo]=void 0;}),e[zo]=0),e[zo]>1e3?($q("Orama's remove operation is synchronous. Please avoid removing a large number of document in a single operation in order not to block the main thread, in alternative, please use updateMultiple.",{code:"ORAMA0002"}),e[zo]=-1):e[zo]>=0&&e[zo]++;}async function Bq(e,t,r,n){let i=await e.validateSchema(t,e.schema);if(i)throw ke("SCHEMA_VALIDATION_FAILURE",i);return zY(e,t,r)}var BY=new Set(["enum","enum[]"]),WY=new Set(["string","number"]);async function zY(e,t,r,n){let{index:i,docs:o}=e.data,s=await e.getDocumentIndexId(t);if(typeof s!="string")throw ke("DOCUMENT_ID_MUST_BE_STRING",typeof s);if(!await e.documentsStore.store(o,s,t))throw ke("DOCUMENT_ALREADY_EXISTS",s);let a=await e.documentsStore.count(o);await uc(e.beforeInsert,e,s,t);let c=await e.index.getSearchableProperties(i),l=await e.index.getSearchablePropertiesWithTypes(i),u=await e.getDocumentProperties(t,c);for(let[C,R]of Object.entries(u)){if(typeof R>"u")continue;let T=typeof R,$=l[C];if(!(ZM($)&&typeof R=="object"&&typeof R.lon=="number"&&typeof R.lat=="number")&&!(eo($)&&Array.isArray(R))&&!(cc($)&&Array.isArray(R))&&!(BY.has($)&&WY.has(T))&&T!==$)throw ke("INVALID_DOCUMENT_PROPERTY",C,$,T)}for(let C of c){var g,w,y,_;let R=u[C];if(typeof R>"u")continue;let T=l[C];await((w=(g=e.index).beforeInsert)===null||w===void 0?void 0:w.call(g,e.data.index,C,s,R,T,r,e.tokenizer,a)),await e.index.insert(e.index,e.data.index,C,s,R,T,r,e.tokenizer,a),await((_=(y=e.index).afterInsert)===null||_===void 0?void 0:_.call(y,e.data.index,C,s,R,T,r,e.tokenizer,a));}let x=await e.sorter.getSortableProperties(e.data.sorting),D=await e.sorter.getSortablePropertiesWithTypes(e.data.sorting),A=await e.getDocumentProperties(t,x);for(let C of x){let R=A[C];if(typeof R>"u")continue;let T=D[C];await e.sorter.insert(e.data.sorting,C,s,R,T,r);}return await uc(e.afterInsert,e,s,t),jq(e),s}async function lS(e,t,r,n,i,o){await lc(e.beforeInsertMultiple,e,t);let s=t.length,a=e.schema;for(let c=0;c<s;c++){let l=await e.validateSchema(t[c],a);if(l)throw ke("SCHEMA_VALIDATION_FAILURE",l)}return HY(e,t,r,n,i,o)}async function HY(e,t,r,n,i,o){r||(r=1e3),o??(o=0);let s=[];return await new Promise((a,c)=>{let l=0;async function u(){let g=t.slice(l*r,++l*r);if(!g.length)return a();for(let w of g)try{let y=await Bq(e,w,n);s.push(y);}catch(y){c(y);}setTimeout(u,o);}setTimeout(u,o);}),await lc(e.afterInsertMultiple,e,t),s}d();p();h();async function Wq(e,t,r,n){let i=!0,{index:o,docs:s}=e.data,a=await e.documentsStore.get(s,t);if(!a)return !1;let c=Ti(e.internalDocumentIDStore,Tt(e.internalDocumentIDStore,t)),l=await e.documentsStore.count(s);await uc(e.beforeRemove,e,c);let u=await e.index.getSearchableProperties(o),g=await e.index.getSearchablePropertiesWithTypes(o),w=await e.getDocumentProperties(a,u);for(let R of u){var y,_,x,D;let T=w[R];if(typeof T>"u")continue;let $=g[R];await((_=(y=e.index).beforeRemove)===null||_===void 0?void 0:_.call(y,e.data.index,R,c,T,$,r,e.tokenizer,l)),await e.index.remove(e.index,e.data.index,R,t,T,$,r,e.tokenizer,l)||(i=!1),await((D=(x=e.index).afterRemove)===null||D===void 0?void 0:D.call(x,e.data.index,R,c,T,$,r,e.tokenizer,l));}let A=await e.sorter.getSortableProperties(e.data.sorting),C=await e.getDocumentProperties(a,A);for(let R of A)typeof C[R]>"u"||await e.sorter.remove(e.data.sorting,R,t);return await uc(e.afterRemove,e,c),await e.documentsStore.remove(e.data.docs,t),Uq(e),i}async function fS(e,t,r,n,i){let o=0;r||(r=1e3);let s=t.map(a=>Ti(e.internalDocumentIDStore,Tt(e.internalDocumentIDStore,a)));return await lc(e.beforeRemoveMultiple,e,s),await new Promise((a,c)=>{let l=0;async function u(){let g=t.slice(l*r,++l*r);if(!g.length)return a();for(let w of g)try{await Wq(e,w,n)&&o++;}catch(y){c(y);}setTimeout(u,0);}setTimeout(u,0);}),await lc(e.afterRemoveMultiple,e,s),o}d();p();h();d();p();h();var dS="fulltext",zq="hybrid",Hq="vector";d();p();h();d();p();h();function pc(e,t){let r=new Map,n=[];for(let i of e)r.set(i,!0);for(let i of t){let[o]=i;r.has(o)&&(n.push(i),r.delete(o));}return n}d();p();h();function VY(e,t){return e[1]-t[1]}function GY(e,t){return t[1]-e[1]}function YY(e="desc"){return e.toLowerCase()==="asc"?VY:GY}async function gc(e,t,r){let n={},i=t.map(([l])=>l),o=await e.documentsStore.getMultiple(e.data.docs,i),s=Object.keys(r),a=await e.index.getSearchablePropertiesWithTypes(e.data.index);for(let l of s){let u;if(a[l]==="number"){let{ranges:g}=r[l],w=g.length,y=Array.from({length:w});for(let _=0;_<w;_++){let x=g[_];y[_]=[`${x.from}-${x.to}`,0];}u=Object.fromEntries(y);}n[l]={count:0,values:u??{}};}let c=o.length;for(let l=0;l<c;l++){let u=o[l];for(let g of s){let w=g.includes(".")?await ac(u,g):u[g],y=a[g],_=n[g].values;switch(y){case"number":{let x=r[g].ranges;Vq(x,_)(w);break}case"number[]":{let x=new Set,D=r[g].ranges,A=Vq(D,_,x);for(let C of w)A(C);break}case"boolean":case"enum":case"string":{Gq(_,y)(w);break}case"boolean[]":case"enum[]":case"string[]":{let A=Gq(_,y==="boolean[]"?"boolean":"string",new Set);for(let C of w)A(C);break}default:throw ke("FACET_NOT_SUPPORTED",y)}}}for(let l of s){let u=n[l];if(u.count=Object.keys(u.values).length,a[l]==="string"){let g=r[l],w=YY(g.sort);u.values=Object.fromEntries(Object.entries(u.values).sort(w).slice(g.offset??0,g.limit??10));}}return n}function Vq(e,t,r){return n=>{for(let i of e){let o=`${i.from}-${i.to}`;r?.has(o)||n>=i.from&&n<=i.to&&(t[o]===void 0?t[o]=1:(t[o]++,r?.add(o)));}}}function Gq(e,t,r){let n=t==="boolean"?"false":"";return i=>{let o=i?.toString()??n;r?.has(o)||(e[o]=(e[o]??0)+1,r?.add(o));}}d();p();h();var XY={reducer:(e,t,r,n)=>(t[n]=r,t),getInitialValue:e=>Array.from({length:e})},Yq=["string","number","boolean"];async function mc(e,t,r){let n=r.properties,i=n.length,o=await e.index.getSearchablePropertiesWithTypes(e.data.index);for(let A=0;A<i;A++){let C=n[A];if(typeof o[C]>"u")throw ke("UNKNOWN_GROUP_BY_PROPERTY",C);if(!Yq.includes(o[C]))throw ke("INVALID_GROUP_BY_PROPERTY",C,Yq.join(", "),o[C])}let s=t.map(([A])=>Ti(e.internalDocumentIDStore,A)),a=await e.documentsStore.getMultiple(e.data.docs,s),c=a.length,l=r.maxResult||Number.MAX_SAFE_INTEGER,u=[],g={};for(let A=0;A<i;A++){let C=n[A],R={property:C,perValue:{}},T=new Set;for(let $=0;$<c;$++){let P=a[$],q=await ac(P,C);if(typeof q>"u")continue;let k=typeof q!="boolean"?q:""+q,V=R.perValue[k]??{indexes:[],count:0};V.count>=l||(V.indexes.push($),V.count++,R.perValue[k]=V,T.add(q));}u.push(Array.from(T)),g[C]=R;}let w=Xq(u),y=w.length,_=[];for(let A=0;A<y;A++){let C=w[A],R=C.length,T={values:[],indexes:[]},$=[];for(let P=0;P<R;P++){let q=C[P],k=n[P];$.push(g[k].perValue[typeof q!="boolean"?q:""+q].indexes),T.values.push(q);}T.indexes=sc($).sort((P,q)=>P-q),T.indexes.length!==0&&_.push(T);}let x=_.length,D=Array.from({length:x});for(let A=0;A<x;A++){let C=_[A],R=r.reduce||XY,T=C.indexes.map(k=>({id:s[k],score:t[k][1],document:a[k]})),$=R.reducer.bind(null,C.values),P=R.getInitialValue(C.indexes.length),q=T.reduce($,P);D[A]={values:C.values,result:q};}return D}function Xq(e,t=0){if(t+1===e.length)return e[t].map(o=>[o]);let r=e[t],n=Xq(e,t+1),i=[];for(let o of r)for(let s of n){let a=[o];_t(a,s),i.push(a);}return i}async function Jq(e,t,r){let n=await _i();e.beforeSearch&&await dc(e.beforeSearch,e,t,r),t.relevance=Object.assign(_p,t.relevance??{});let i=Object.keys(e.data.index.vectorIndexes),o=t.facets&&Object.keys(t.facets).length>0,{limit:s=10,offset:a=0,term:c,properties:l,threshold:u=1,distinctOn:g,includeVectors:w=!1}=t,y=t.preflight===!0,{index:_,docs:x}=e.data,D=await e.tokenizer.tokenize(c??"",r),A=e.caches.propertiesToSearch;if(!A){let K=await e.index.getSearchablePropertiesWithTypes(_);A=await e.index.getSearchableProperties(_),A=A.filter(ve=>K[ve].startsWith("string")),e.caches.propertiesToSearch=A;}if(l&&l!=="*"){for(let K of l)if(!A.includes(K))throw ke("UNKNOWN_INDEX",K,A.join(", "));A=A.filter(K=>l.includes(K));}let C=await qs(e.tokenizer,e.index,e.documentsStore,r,t,A,D,await e.documentsStore.count(x),n),R=Object.keys(t.where??{}).length>0,T=[];R&&(T=await e.index.searchByWhereClause(C,_,t.where));let $=D.length;if($||l&&l.length>0){let K=A.length;for(let ve=0;ve<K;ve++){var P;let fe=A[ve];if($!==0)for(let We=0;We<$;We++){let ze=D[We],Rt=await e.index.search(C,_,fe,ze);_t(C.indexMap[fe][ze],Rt);}else {C.indexMap[fe][""]=[];let We=await e.index.search(C,_,fe,"");_t(C.indexMap[fe][""],We);}let be=C.indexMap[fe],me=Object.values(be);C.docsIntersection[fe]=Sp(me,(t==null||(P=t.boost)===null||P===void 0?void 0:P[fe])??1,u,$);let je=C.docsIntersection[fe],pt=je.length;for(let We=0;We<pt;We++){let[ze,Rt]=je[We],Qe=C.uniqueDocsIDs[ze];Qe?C.uniqueDocsIDs[ze]=Qe+Rt+.5:C.uniqueDocsIDs[ze]=Rt;}}}else D.length===0&&c?C.uniqueDocsIDs={}:C.uniqueDocsIDs=Object.fromEntries(Object.keys(await e.documentsStore.getAll(e.data.docs)).map(K=>[K,0]));let q=Object.entries(C.uniqueDocsIDs).map(([K,ve])=>[+K,ve]);if(R&&(q=pc(T,q)),t.sortBy)if(typeof t.sortBy=="function"){let K=q.map(([be])=>be),fe=(await e.documentsStore.getMultiple(e.data.docs,K)).map((be,me)=>[q[me][0],q[me][1],be]);fe.sort(t.sortBy),q=fe.map(([be,me])=>[be,me]);}else q=await e.sorter.sortBy(e.data.sorting,q,t.sortBy).then(K=>K.map(([ve,fe])=>[Tt(e.internalDocumentIDStore,ve),fe]));else q=q.sort(YM);let k;y||(k=await(g?Kq(e,q,a,s,g):Tp(e,q,a,s)));let V={elapsed:{formatted:"",raw:0},hits:[],count:q.length};if(typeof k<"u"&&(V.hits=k.filter(Boolean),w||bp(V,i)),o){let K=await gc(e,q,t.facets);V.facets=K;}return t.groupBy&&(V.groups=await mc(e,q,t.groupBy)),e.afterSearch&&await fc(e.afterSearch,e,t,r,V),V.elapsed=await e.formatElapsedTime(await _i()-C.timeStart),V}d();p();h();async function Zq(e,t,r="english"){let n=await _i();e.beforeSearch&&await dc(e.beforeSearch,e,t,r);let{vector:i}=t;if(i&&(!("value"in i)||!("property"in i)))throw ke("INVALID_VECTOR_INPUT",Object.keys(i).join(", "));let{limit:o=10,offset:s=0,includeVectors:a=!1}=t,c=e.data.index.vectorIndexes[i.property],l=c.size,u=c.vectors,g=t.facets&&Object.keys(t.facets).length>0,w=Object.keys(t.where??{}).length>0,{index:y,docs:_}=e.data;if(i?.value.length!==l)throw ke("INVALID_INPUT_VECTOR",i?.property,l,i?.value.length);i instanceof Float32Array||(i.value=new Float32Array(i.value));let x=Ep(i.value,u,l,t.similarity).map(([V,K])=>[Tt(e.internalDocumentIDStore,V),K]),D=e.caches.propertiesToSearch;if(!D){let V=await e.index.getSearchablePropertiesWithTypes(y);D=await e.index.getSearchableProperties(y),D=D.filter(K=>V[K].startsWith("string")),e.caches.propertiesToSearch=D;}let A=[],C=await qs(e.tokenizer,e.index,e.documentsStore,r,t,D,A,await e.documentsStore.count(_),n),R=[];w&&(R=await e.index.searchByWhereClause(C,y,t.where),x=pc(R,x));let T=[];g&&(T=await gc(e,x,t.facets));let $=Array.from({length:o});for(let V=0;V<o;V++){let K=x[V+s];if(!K)break;let ve=e.data.docs.docs[K[0]];if(ve){a||(ve[i.property]=null);let fe={id:Ti(e.internalDocumentIDStore,K[0]),score:K[1],document:ve};$[V]=fe;}}let P=[];t.groupBy&&(P=await mc(e,x,t.groupBy)),e.afterSearch&&await fc(e.afterSearch,e,t,r,x);let k=await _i()-n;return {count:x.length,hits:$.filter(Boolean),elapsed:{raw:Number(k),formatted:await ic(k)},...T?{facets:T}:{},...P?{groups:P}:{}}}d();p();h();async function eF(e,t,r){let n=await _i();e.beforeSearch&&await dc(e.beforeSearch,e,t,r);let{offset:i=0,limit:o=10,includeVectors:s=!1}=t,a=t.facets&&Object.keys(t.facets).length>0,[c,l]=await Promise.all([JY(e,t,r),KY(e,t)]),{index:u,docs:g}=e.data,w=t.hybridWeights,y=QY(c,l,t.term??"",w),_=await e.tokenizer.tokenize(t.term??"",r),x=e.caches.propertiesToSearch;if(!x){let k=await e.index.getSearchablePropertiesWithTypes(u);x=await e.index.getSearchableProperties(u),x=x.filter(V=>k[V].startsWith("string")),e.caches.propertiesToSearch=x;}if(t.properties&&t.properties!=="*"){for(let k of t.properties)if(!x.includes(k))throw ke("UNKNOWN_INDEX",k,x.join(", "));x=x.filter(k=>t.properties.includes(k));}let D=await qs(e.tokenizer,e.index,e.documentsStore,r,t,x,_,await e.documentsStore.count(g),n),A=Object.keys(t.where??{}).length>0,C=[];A&&(C=await e.index.searchByWhereClause(D,u,t.where),y=pc(C,y).slice(i,i+o));let R;a&&(R=await gc(e,y,t.facets));let T;t.groupBy&&(T=await mc(e,y,t.groupBy));let $=(await Tp(e,y,i,o)).filter(Boolean);e.afterSearch&&await fc(e.afterSearch,e,t,r,$);let P=await _i(),q={count:y.length,elapsed:{raw:Number(P-n),formatted:await ic(P-n)},hits:$,...R?{facets:R}:{},...T?{groups:T}:{}};if(!s){let k=Object.keys(e.data.index.vectorIndexes);bp(q,k);}return q}async function JY(e,t,r){let n=await _i();t.relevance=Object.assign(_p,t.relevance??{});let{term:i="",properties:o,threshold:s=1}=t,{index:a,docs:c}=e.data,l=await e.tokenizer.tokenize(i,r),u=e.caches.propertiesToSearch;if(!u){let x=await e.index.getSearchablePropertiesWithTypes(a);u=await e.index.getSearchableProperties(a),u=u.filter(D=>x[D].startsWith("string")),e.caches.propertiesToSearch=u;}if(o&&o!=="*"){let x=new Set(u),D=new Set(o);for(let A of o)if(!x.has(A))throw ke("UNKNOWN_INDEX",A,u.join(", "));u=u.filter(A=>D.has(A));}let g=await qs(e.tokenizer,e.index,e.documentsStore,r,t,u,l,await e.documentsStore.count(c),n),w=l.length;if(w||o&&o.length>0){let x=u.length;for(let D=0;D<x;D++){var y;let A=u[D];if(w!==0)for(let P=0;P<w;P++){let q=l[P],k=await e.index.search(g,a,A,q);_t(g.indexMap[A][q],k);}else {let P=[];g.indexMap[A][""]=P;let q=await e.index.search(g,a,A,"");_t(P,q);}let C=g.indexMap[A],R=Object.values(C);g.docsIntersection[A]=Sp(R,(t==null||(y=t.boost)===null||y===void 0?void 0:y[A])??1,s,w);let T=g.docsIntersection[A],$=T.length;for(let P=0;P<$;P++){let[q,k]=T[P],V=g.uniqueDocsIDs[q];g.uniqueDocsIDs[q]=V?V+k+.5:k;}}}else l.length===0&&i?g.uniqueDocsIDs={}:g.uniqueDocsIDs=Object.fromEntries(Object.keys(await e.documentsStore.getAll(e.data.docs)).map(x=>[x,0]));let _=Object.entries(g.uniqueDocsIDs).map(([x,D])=>[+x,D]).sort((x,D)=>D[1]-x[1]);return tF(_)}async function KY(e,t){let r=t.vector,n=e.data.index.vectorIndexes[r?.property],i=n.size,o=n.vectors;if(r&&(!r.value||!r.property))throw ke("INVALID_VECTOR_INPUT",Object.keys(r).join(", "));if(r.value.length!==i)throw ke("INVALID_INPUT_VECTOR",r.property,i,r.value.length);r instanceof Float32Array||(r.value=new Float32Array(r.value));let s=Ep(r.value,o,i,t.similarity).map(([a,c])=>[Tt(e.internalDocumentIDStore,a),c]);return tF(s)}function hS([,e]){return e}function tF(e){let t=Math.max.apply(Math,e.map(hS));return e.map(([r,n])=>[r,n/t])}function Qq(e,t){return e/t}function ZY(e,t){return (r,n)=>r*e+n*t}function QY(e,t,r,n){let i=Math.max.apply(Math,e.map(hS)),o=Math.max.apply(Math,t.map(hS)),s=n&&n.text&&n.vector,{text:a,vector:c}=s?n:eX(),l=new Map,u=e.length,g=ZY(a,c);for(let y=0;y<u;y++){let[_,x]=e[y],D=Qq(x,i),A=g(D,0);l.set(_,A);}let w=t.length;for(let y=0;y<w;y++){let[_,x]=t[y],D=Qq(x,o),A=l.get(_)??0;l.set(_,A+g(0,D));}return [...l].sort((y,_)=>_[1]-y[1])}function eX(e){return {text:.5,vector:.5}}var _p={k:1.2,b:.75,d:.5};async function qs(e,t,r,n,i,o,s,a,c){let l={},u={};for(let g of o){let w={};for(let y of s)w[y]=[];l[g]=w,u[g]=[];}return {timeStart:c,tokenizer:e,index:t,documentsStore:r,language:n,params:i,docsCount:a,uniqueDocsIDs:{},indexMap:l,docsIntersection:u}}async function pS(e,t,r){let n=t.mode??dS;if(n===dS)return Jq(e,t,r);if(n===Hq)return Zq(e,t);if(n===zq)return eF(e,t);throw ke("INVALID_SEARCH_MODE",n)}async function Kq(e,t,r,n,i){let o=e.data.docs,s=new Map,a=[],c=new Set,l=t.length,u=0;for(let g=0;g<l;g++){let w=t[g];if(typeof w>"u")continue;let[y,_]=w;if(c.has(y))continue;let x=await e.documentsStore.get(o,y),D=await ac(x,i);if(!(typeof D>"u"||s.has(D))&&(s.set(D,!0),u++,!(u<=r)&&(a.push({id:Ti(e.internalDocumentIDStore,y),score:_,document:x}),c.add(y),u>=r+n)))break}return a}async function Tp(e,t,r,n){let i=e.data.docs,o=Array.from({length:n}),s=new Set;for(let a=r;a<n+r;a++){let c=t[a];if(typeof c>"u")break;let[l,u]=c;if(!s.has(l)){let g=await e.documentsStore.get(i,l);o[a]={id:Ti(e.internalDocumentIDStore,l),score:u,document:g},s.add(l);}}return o}d();p();h();var rX=["as","any","boolean","break","case","catch","class","const","constructor","continue","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","let","module","new","null","number","of","package","private","protected","public","require","return","set","static","string","super","switch","symbol","this","throw","true","try","typeof","var","void","while","with","yield"];function Rp(e){let t=/\w+/g;return [...new Set(e.match(t)?.filter(r=>r.length>2&&!rX.includes(r))).values()].join(" ")}d();p();h();function Qu(e,t){return e.line<t.line||e.line===t.line&&e.character<t.character}function Ip(e,t){return e.line>t.line||e.line===t.line&&e.character>t.character}function rF(e,t){return e.line<t.line||e.line===t.line&&e.character<=t.character}function nX(e,t){return e.line>t.line||e.line===t.line&&e.character>=t.character}function nF(e,t){return rF(t.start,e)&&rF(e,t.end)}function gS(e){return nX(e.start,e.end)}function Ap(e,t){return {start:Qu(e.start,t.start)?{line:e.start.line,character:e.start.character}:{line:t.start.line,character:t.start.character},end:Ip(e.end,t.end)?{line:e.end.line,character:e.end.character}:{line:t.end.line,character:t.end.character}}}function mS(e,t){let r={start:Ip(e.start,t.start)?{line:e.start.line,character:e.start.character}:{line:t.start.line,character:t.start.character},end:Qu(e.end,t.end)?{line:e.end.line,character:e.end.character}:{line:t.end.line,character:t.end.character}};return gS(r)?null:r}function iX(e){return {start:{line:0,character:0},end:{line:e.lineCount,character:0}}}function Pp(e,t){return mS(e,iX(t))}var Dp=class{constructor(t){this.config=t;this.db=void 0;this.indexedDocumentRanges=[];}async init(){this.db||(this.db=await aS({schema:{filepath:"string",language:"string",symbols:"string"}}));}async count(){return this.db?await cS(this.db):0}async insert(t){return this.db||await this.init(),this.db?await lS(this.db,t):[]}async remove(t){return this.db?await fS(this.db,t):0}async chunk(t){let r=t.document,n=Pp(t.range,r);if(!n)return [];let i=[],o=n.start,s;do{let a=r.offsetAt(o);s=r.positionAt(a+this.config.chunkSize),Qu(s,n.end)&&(s={line:s.line,character:0}),s.line<=o.line+this.config.overlapLines&&(s={line:o.line+this.config.overlapLines+1,character:0}),Ip(s,n.end)&&(s=n.end);let c=r.getText({start:o,end:s});c.trim().length>0&&i.push({filepath:r.uri,offset:r.offsetAt(o),fullText:c,language:r.languageId,symbols:Rp(c)}),o={line:s.line-this.config.overlapLines,character:0};}while(i.length<this.config.maxChunks&&Qu(s,n.end));return i}getIndexed(){return this.indexedDocumentRanges}async index(t){let{document:r,range:n}=t,i=r.uri.toString(),o=n,s=this.indexedDocumentRanges.findIndex(u=>u.document.uri.toString()===i),a=this.indexedDocumentRanges[s];a&&(o=Ap(o,a.range));let c=await this.chunk({document:r,range:o});a&&(await this.remove(a.indexIds),this.indexedDocumentRanges.splice(s));let l=await this.insert(c);for(this.indexedDocumentRanges.push({document:r,range:o,indexIds:l});await this.count()>this.config.maxChunks;){let u=this.indexedDocumentRanges.shift();if(u)await this.remove(u.indexIds);else break}}async search(t,r){return this.db?(await pS(this.db,{term:t,properties:["symbols"],where:{filepath:r?.filepathsFilter,language:r?.languagesFilter},limit:r?.limit})).hits.filter(i=>!(r?.filepathsFilter&&!r?.filepathsFilter.includes(i.document.filepath)||r?.languagesFilter&&!r?.languagesFilter.includes(i.document.language))).map(i=>({snippet:i.document,score:i.score||0})):[]}};var Lp=class{constructor(t){this.config=t;this.logger=Ut("CodeSearch");this.pendingDocumentRanges=[];this.didChangeEventDebouncingCache=new Map;this.codeSearchEngine=new Dp(t),this.indexingWorker=setInterval(async()=>{let r;for(;(r=this.pendingDocumentRanges.shift())!=null;)this.logger.trace("Consuming indexing task."),await this.codeSearchEngine.index(r);},t.checkingChangesInterval),this.logger.info("Created code search engine for recently changed files."),this.logger.trace("Created with config.",{config:t});}handleDidChangeTextDocument(t){let{document:r,contentChanges:n}=t;if(n.length<1)return;let i=[];if(this.didChangeEventDebouncingCache.has(r.uri)){let l=this.didChangeEventDebouncingCache.get(r.uri);l&&(i.push(l.documentRange.range),clearTimeout(l.timer));}i=i.concat(n.map(l=>"range"in l?{start:l.range.start,end:r.positionAt(r.offsetAt(l.range.start)+l.text.length)}:null).filter(l=>l!==null));let o=i.reduce((l,u)=>Ap(l,u)),s={start:{line:Math.max(0,o.start.line-this.config.prefixLines),character:0},end:{line:Math.min(r.lineCount,o.end.line+this.config.suffixLines+1),character:0}},a=Pp(s,r);if(a===null)return;let c={document:r,range:a};this.didChangeEventDebouncingCache.set(r.uri,{documentRange:c,timer:setTimeout(()=>{this.pendingDocumentRanges.push(c),this.didChangeEventDebouncingCache.delete(r.uri),this.logger.trace("Created indexing task:",{documentRange:c});},this.config.changesDebouncingInterval)});}async collectRelevantSnippets(t,r,n){let o=this.codeSearchEngine.getIndexed().map(c=>c.document.uri.toString()).filter(c=>c!==r.uri.toString());if(o.length<1)return [];let s={filepathsFilter:o,languagesFilter:this.getLanguageFilter(r.languageId),limit:n};this.logger.trace("Search in recently changed files",{query:t,options:s});let a=await this.codeSearchEngine.search(t,s);return this.logger.trace("Search result",{result:a}),a.map(c=>({filepath:c.snippet.filepath,offset:c.snippet.offset,text:c.snippet.fullText,score:c.score}))}getLanguageFilter(t){let r=["javascript","javascriptreact","typescript","typescriptreact"];return r.includes(t)?r:[t]}};d();p();h();d();p();h();d();p();h();var oX=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~"],sX=[..."0123456789"],aX=[..."CDEHKMPRTUWXY012458"],cX=[..."!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"],uX=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"],iF=(e,t)=>e[t]+(e[t+1]<<8),lX=(e,t,r)=>{let n=t.length,i=Math.floor(65536/n)*n-1,o=2*Math.ceil(1.1*e),s="",a=0;for(;a<e;){let c=r(o),l=0;for(;l<o&&a<e;){let u=iF(c,l);l+=2,!(u>i)&&(s+=t[u%n],a++);}}return s},dX=new Set([void 0,"hex","base64","url-safe","numeric","distinguishable","ascii-printable","alphanumeric"]),oF=(e,t,r)=>({length:n,type:i,characters:o})=>{if(!(n>=0&&Number.isFinite(n)))throw new TypeError("Expected a `length` to be a non-negative finite number");if(i!==void 0&&o!==void 0)throw new TypeError("Expected either `type` or `characters`");if(o!==void 0&&typeof o!="string")throw new TypeError("Expected `characters` to be string");if(!dX.has(i))throw new TypeError(`Unknown type: ${i}`);if(i===void 0&&o===void 0&&(i="hex"),i==="hex"||i===void 0&&o===void 0)return t(Math.ceil(n*.5),"hex",n);if(i==="base64")return t(Math.ceil(n*.75),"base64",n);if(i==="url-safe")return e(n,oX,r);if(i==="numeric")return e(n,sX,r);if(i==="distinguishable")return e(n,aX,r);if(i==="ascii-printable")return e(n,cX,r);if(i==="alphanumeric")return e(n,uX,r);if(o.length===0)throw new TypeError("Expected `characters` string length to be greater than or equal to 1");if(o.length>65536)throw new TypeError("Expected `characters` string length to be less or equal to 65536");return e(n,o,r)};function sF(e,t){return oF(lX,e,t)}var hX=e=>[...e].map(t=>t.toString(16).padStart(2,"0")).join(""),pX=e=>btoa(String.fromCodePoint(...e)),cF=65536;function yS(e){let t=new Uint8Array(e);for(let r=0;r<e;r+=cF)t.set(crypto.getRandomValues(new Uint8Array(Math.min(cF,e-r))),r);return t}function uF(e,t,r){let n=yS(e);return (t==="hex"?hX:pX)(n).slice(0,r)}var lF=sF(uF,yS);d();p();h();function to(){}to.prototype={diff:function(t,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var s=this;function a(T){return o?(setTimeout(function(){o(void 0,T);},0),!0):T}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var c=r.length,l=t.length,u=1,g=c+l;i.maxEditLength&&(g=Math.min(g,i.maxEditLength));var w=(n=i.timeout)!==null&&n!==void 0?n:1/0,y=Date.now()+w,_=[{oldPos:-1,lastComponent:void 0}],x=this.extractCommon(_[0],r,t,0);if(_[0].oldPos+1>=l&&x+1>=c)return a([{value:this.join(r),count:r.length}]);var D=-1/0,A=1/0;function C(){for(var T=Math.max(D,-u);T<=Math.min(A,u);T+=2){var $=void 0,P=_[T-1],q=_[T+1];P&&(_[T-1]=void 0);var k=!1;if(q){var V=q.oldPos-T;k=q&&0<=V&&V<c;}var K=P&&P.oldPos+1<l;if(!k&&!K){_[T]=void 0;continue}if(!K||k&&P.oldPos+1<q.oldPos?$=s.addToPath(q,!0,void 0,0):$=s.addToPath(P,void 0,!0,1),x=s.extractCommon($,r,t,T),$.oldPos+1>=l&&x+1>=c)return a(gX(s,$.lastComponent,r,t,s.useLongestToken));_[T]=$,$.oldPos+1>=l&&(A=Math.min(A,T-1)),x+1>=c&&(D=Math.max(D,T+1));}u++;}if(o)(function T(){setTimeout(function(){if(u>g||Date.now()>y)return o();C()||T();},0);})();else for(;u<=g&&Date.now()<=y;){var R=C();if(R)return R}},addToPath:function(t,r,n,i){var o=t.lastComponent;return o&&o.added===r&&o.removed===n?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:r,removed:n,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:o}}},extractCommon:function(t,r,n,i){for(var o=r.length,s=n.length,a=t.oldPos,c=a-i,l=0;c+1<o&&a+1<s&&this.equals(r[c+1],n[a+1]);)c++,a++,l++;return l&&(t.lastComponent={count:l,previousComponent:t.lastComponent}),t.oldPos=a,c},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function gX(e,t,r,n,i){for(var o=[],s;t;)o.push(t),s=t.previousComponent,delete t.previousComponent,t=s;o.reverse();for(var a=0,c=o.length,l=0,u=0;a<c;a++){var g=o[a];if(g.removed){if(g.value=e.join(n.slice(u,u+g.count)),u+=g.count,a&&o[a-1].added){var y=o[a-1];o[a-1]=o[a],o[a]=y;}}else {if(!g.added&&i){var w=r.slice(l,l+g.count);w=w.map(function(x,D){var A=n[u+D];return A.length>x.length?A:x}),g.value=e.join(w);}else g.value=e.join(r.slice(l,l+g.count));l+=g.count,g.added||(u+=g.count);}}var _=o[c-1];return c>1&&typeof _.value=="string"&&(_.added||_.removed)&&e.equals("",_.value)&&(o[c-2].value+=_.value,o.pop()),o}var fF=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,dF=/\S/,hF=new to;hF.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!dF.test(e)&&!dF.test(t)};hF.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&fF.test(t[r])&&fF.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};var wS=new to;wS.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i));}return t};function pF(e,t,r){return wS.diff(e,t,r)}var mX=new to;mX.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var yX=new to;yX.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function Op(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Op=function(t){return typeof t}:Op=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}var vX=Object.prototype.toString,el=new to;el.useLongestToken=!0;el.tokenize=wS.tokenize;el.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(o,s){return typeof s>"u"?r:s}:n;return typeof e=="string"?e:JSON.stringify(vS(e,null,null,i),i,"  ")};el.equals=function(e,t){return to.prototype.equals.call(el,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function vS(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var o;for(o=0;o<t.length;o+=1)if(t[o]===e)return r[o];var s;if(vX.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),r.push(s),o=0;o<e.length;o+=1)s[o]=vS(e[o],t,r,n,i);return t.pop(),r.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),Op(e)==="object"&&e!==null){t.push(e),s={},r.push(s);var a=[],c;for(c in e)e.hasOwnProperty(c)&&a.push(c);for(a.sort(),o=0;o<a.length;o+=1)c=a[o],s[c]=vS(e[c],t,r,n,c);t.pop(),r.pop();}else s=e;return s}var bS=new to;bS.tokenize=function(e){return e.slice()};bS.join=bS.removeEmpty=function(e){return e};var kp=class{constructor(t,r,n){this.connection=t;this.documents=r;this.agent=n;this.currentEdit=null;this.mutexAbortController=null;this.connection.onRequest(Yh.type,async i=>this.provideEditCommands(i)),this.connection.onRequest(Xh.type,async(i,o)=>this.provideEdit(i,o)),this.connection.onRequest(Jh.type,async i=>this.resolveEdit(i));}isCurrentEdit(t){return this.currentEdit?.id===t}async provideEditCommands(t){let r=this.agent.getConfig().chat.edit.presetCommands,n=[],i=this.documents.get(t.location.uri);return n.push(...Object.entries(r).filter(([o,s])=>{for(let[a,c]of Object.entries(s.filters))if(c)switch(a){case"languageIdIn":if(i&&!c.split(",").includes(i.languageId))return !1;break;case"languageIdNotIn":if(i&&c.split(",").includes(i.languageId))return !1;break;}return !0}).map(([o,s])=>({label:s.label,command:o,source:"preset"}))),n}async provideEdit(t,r){if(t.format!=="previewChanges")return null;let n=this.documents.get(t.location.uri);if(!n)return null;if(!this.agent.getServerHealthState()?.chat_model)throw {name:"ChatFeatureNotAvailableError",message:"Chat feature not available"};let i=this.agent.getConfig().chat;if(t.command.length>i.edit.commandMaxChars)throw {name:"ChatEditCommandTooLongError",message:"Command too long"};let o=gS(t.location.range),s=/^\/\w+\b/g.exec(t.command)?.[0];s&&(o=i.edit.presetCommands[s]?.kind==="insert");let a=n.getText(),c={start:n.offsetAt(t.location.range.start),end:n.offsetAt(t.location.range.end)},l=a.substring(c.start,c.end);if(c.end-c.start>i.edit.documentMaxChars)throw {name:"ChatEditDocumentTooLongError",message:"Document too long"};if(this.mutexAbortController)throw {name:"ChatEditMutexError",message:"Another smart edit is already in progress"};this.mutexAbortController=new AbortController,r.onCancellationRequested(()=>this.mutexAbortController?.abort());let u=await this.agent.provideChatEdit(a,c,t.location.uri,o,t.command,n.languageId,{signal:this.mutexAbortController.signal}),g="tabby-"+lF({length:6,type:"alphanumeric"});return this.currentEdit={id:g,location:t.location,languageId:n.languageId,originalText:l,editedRange:o?{start:t.location.range.end,end:t.location.range.end}:t.location.range,editedText:"",comments:"",buffer:"",state:"editing"},u?(await this.readResponseStream(u,i.edit.responseDocumentTag,i.edit.responseCommentTag),g):null}async stopEdit(t){this.isCurrentEdit(t)&&this.mutexAbortController?.abort();}async resolveEdit(t){let r=this.documents.get(t.location.uri);if(!r)return !1;let n=r.getText({start:{line:t.location.range.start.line,character:0},end:{line:t.location.range.start.line+1,character:0}}),i=/^<<<<<<<.+(<.*>)\[(tabby-[0-9|a-z|A-Z]{6})\]/g.exec(n),o=i?.[1];if(!i||!o)return !1;let s={start:{line:t.location.range.start.line,character:0},end:{line:t.location.range.start.line+o.length,character:0}},c=r.getText(s).split(`
`),l=[];return c.forEach((u,g)=>{let w=o[g];w&&(t.action==="accept"&&[".","|","=","+"].includes(w)&&l.push(u),t.action==="discard"&&[".","=","-"].includes(w)&&l.push(u));}),await this.connection.workspace.applyEdit({edit:{changes:{[t.location.uri]:[{range:s,newText:l.join(`
`)+`
`}]}}}),!0}async readResponseStream(t,r,n){let i=async o=>{if(this.currentEdit){let s=this.currentEdit;s.state=o;let a=this.generateChangesPreview(s);await this.connection.workspace.applyEdit({edit:{changes:{[s.location.uri]:[{range:s.editedRange,newText:a.join(`
`)+`
`}]}}});}this.currentEdit=null,this.mutexAbortController=null;};try{let o=!1;for await(let s of t){if(!this.currentEdit||!this.mutexAbortController||this.mutexAbortController.signal.aborted)break;let a=!1,c=this.currentEdit;if(c.buffer+=s,!o){let l=[r[0],n?.[0]].filter(Boolean);if(l.length<1)break;let g=new RegExp(l.join("|"),"g").exec(c.buffer);g&&g[0]&&(g[0]===r[0]?(o="document",c.buffer=c.buffer.substring(g.index+g[0].length)):g[0]===n?.[0]&&(o="comment",c.buffer=c.buffer.substring(g.index+g[0].length)));}if(o){let l;if(o==="document"?l=r[1]:o==="comment"&&(l=n?.[1]),!l)break;let g=this.createCloseTagMatcher(l).exec(c.buffer);g?(o==="document"?c.editedText+=c.buffer.substring(0,g.index):o==="comment"&&(c.comments+=c.buffer.substring(0,g.index)),c.buffer=c.buffer.substring(g.index),g[0]===l&&(o=!1)):(o==="document"?c.editedText+=c.buffer:o==="comment"&&(c.comments+=c.buffer),c.buffer=""),a=!0;}if(a){let l=this.generateChangesPreview(c);await this.connection.workspace.applyEdit({edit:{changes:{[c.location.uri]:[{range:c.editedRange,newText:l.join(`
`)+`
`}]}}}),c.editedRange={start:{line:c.editedRange.start.line,character:0},end:{line:c.editedRange.start.line+l.length,character:0}};}}}catch(o){throw await i("stopped"),o}await i("completed");}generateChangesPreview(t){let r=[],n="",i="Editing in progress";t.state==="stopped"?i="Editing stopped":t.state=="completed"&&(i="Editing completed"),r.push(`<<<<<<< ${i} {{markers}}[${t.id}]`),n+="<";let o=t.comments.trim().split(/\n|(.{1,80})(?:\s|$)/g).filter(l=>!Fe(l)),s=this.getCommentPrefix(t.languageId);for(let l of o)r.push(s+l),n+="#";let a=(l,u)=>{l.replace(/\n$/,"").split(`
`).forEach(g=>{r.push(g),n+=u;});},c=pF(t.originalText,t.editedText);if(t.state==="completed")c.forEach(l=>{l.added?a(l.value,"+"):l.removed?a(l.value,"-"):a(l.value,"=");});else {let l=0,u=c[c.length-1];u&&u.added&&(l=1);let g=0;for(let y=c.length-l-1;y>=0&&c[y]?.removed;y--)g++;let w=0;for(;w<c.length-l-g;){let y=c[w];if(!y)break;y.added?a(y.value,"+"):y.removed?a(y.value,"-"):a(y.value,"="),w++;}for(l&&u&&a(u.value,"|");w<c.length-l;){let y=c[w];if(!y)break;a(y.value,"."),w++;}}return r.push(`>>>>>>> ${i} {{markers}}[${t.id}]`),n+=">",r[0]=r[0].replace("{{markers}}",n),r[r.length-1]=r[r.length-1].replace("{{markers}}",n),r}createCloseTagMatcher(t){let r=`${t}`;for(let n=t.length-1;n>0;n--)r+="|"+t.substring(0,n)+"$";return new RegExp(r,"g")}getCommentPrefix(t){return ["plaintext","markdown"].includes(t)?"":["python","ruby"].includes(t)?"#":["c","cpp","java","javascript","typescript","javascriptreact","typescriptreact","go","rust","swift","kotlin"].includes(t)?"//":""}};d();p();h();var ro="previewChanges",Ii={header:"header",footer:"footer",commentsFirstLine:"commentsFirstLine",comments:"comments",waiting:"waiting",inProgress:"inProgress",unchanged:"unchanged",inserted:"inserted",deleted:"deleted"},Np=class{constructor(t,r){this.connection=t;this.documents=r;this.connection.onCodeLens(async(n,i,o,s)=>this.provideCodeLens(n,i,o,s));}fillServerCapabilities(t){t.codeLensProvider={resolveProvider:!1};}async provideCodeLens(t,r,n,i){let o=t.textDocument.uri,s=this.documents.get(o);if(!s)return null;let a=[],c=-1,l="";for(let u=0;u<s.lineCount;u++){if(r.isCancellationRequested)return null;let g={start:{line:u,character:0},end:{line:u+1,character:0}},w=s.getText(g),y={start:{line:u,character:0},end:{line:u,character:w.length-1}},_={uri:o,range:y},x=[];if(c<0){let D=/^<<<<<<<.+(<.*>)\[(tabby-[0-9|a-z|A-Z]{6})\]/g.exec(w),A=D?.[1],C=D?.[2];D&&A&&C&&(c=0,l=A,x.push({range:y,command:{title:"Accept",command:"tabby/chat/edit/resolve",arguments:[{location:_,action:"accept"}]},data:{type:ro,line:Ii.header}}),x.push({range:y,command:{title:"Discard",command:"tabby/chat/edit/resolve",arguments:[{location:_,action:"discard"}]},data:{type:ro,line:Ii.header}}));}else {let D=/^>>>>>>>.+(<.*>)\[(tabby-[0-9|a-z|A-Z]{6})\]/g.exec(w),A=D?.[2];if(D&&A)c=-1,x.push({range:y,data:{type:ro,line:Ii.footer}});else {c++;let C=l[c],R;switch(C){case"#":R={range:y,data:{type:ro,line:l.indexOf("#")===c?Ii.commentsFirstLine:Ii.comments}};break;case".":R={range:y,data:{type:ro,line:Ii.waiting}};break;case"|":R={range:y,data:{type:ro,line:Ii.inProgress}};break;case"=":R={range:y,data:{type:ro,line:Ii.unchanged}};break;case"+":R={range:y,data:{type:ro,line:Ii.inserted}};break;case"-":R={range:y,data:{type:ro,line:Ii.deleted}};break;}R&&a.push(R);}}x.length>0&&(i?i.report(x):a.push(...x));}return n?.done(),i?null:a}};d();p();h();var Mp=class{constructor(t,r){this.connection=t;this.chatEditProvider=r;this.connection.onExecuteCommand(async n=>this.executeCommand(n));}fillServerCapabilities(t){t.executeCommandProvider={commands:["tabby/chat/edit/resolve"]};}async executeCommand(t){if(t.command==="tabby/chat/edit/resolve"){let r=t.arguments?.[0];r&&await this.chatEditProvider.resolveEdit(r);}}};d();p();h();d();p();h();mr(Jv());Ut("GitContextProvider");async function SS(){return null}var $p=class{constructor(t){this.agent=t;this.logger=Ut("LspServer");this.connection=(0, vc.createConnection)(Ir.ProposedFeatures.all,new vc.BrowserMessageReader(self),new vc.BrowserMessageWriter(self));this.documents=new hp(mp);this.notebooks=new Ir.NotebookDocuments(this.documents);this.recentlyChangedCodeSearch=void 0;this.codeLensProvider=void 0;this.notebookLanguageComments={markdown:t=>"```\n"+t+"\n```",python:t=>t.split(`
`).map(r=>"# "+r).join(`
`)};this.connection.onInitialize(async r=>this.initialize(r)),this.connection.onInitialized(async()=>this.initialized()),this.connection.onDidChangeConfiguration(async r=>this.updateConfiguration(r)),this.connection.onShutdown(async()=>this.shutdown()),this.connection.onExit(async()=>this.exit()),this.connection.onRequest(Qh.type,async()=>this.getServerInfo()),this.connection.onRequest(tp.type,async()=>this.getStatus()),this.connection.onRequest(np.type,async()=>this.getIssues()),this.connection.onRequest(ip.type,async r=>this.getIssueDetail(r)),this.documents.listen(this.connection),this.notebooks.listen(this.connection),this.connection.onCompletion(async(r,n)=>this.provideCompletion(r,n)),this.connection.onRequest(Gh.type,async(r,n)=>this.provideInlineCompletion(r,n)),this.chatEditProvider=new kp(this.connection,this.documents,this.agent),this.connection.onRequest(Kh.type,async(r,n)=>this.generateCommitMessage(r,n)),this.connection.onNotification(Zh.type,async r=>this.event(r)),this.commandProvider=new Mp(this.connection,this.chatEditProvider);}listen(){this.connection.listen();}async initialize(t){let r=t.clientInfo;this.clientInfo=r;let n=t.capabilities;this.clientCapabilities=n;let i=t.initializationOptions?.config;this.clientProvidedConfig=i;let o={textDocumentSync:{openClose:!0,change:Ir.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:!0,changeNotifications:!0}},completionProvider:void 0,inlineCompletionProvider:void 0,tabby:{chat:!1}};return n.textDocument?.inlineCompletion?o.inlineCompletionProvider=!0:o.completionProvider={},n.workspace?.codeLens&&(this.codeLensProvider=new Np(this.connection,this.documents),this.codeLensProvider.fillServerCapabilities(o)),this.commandProvider.fillServerCapabilities(o),await this.agent.initialize({config:this.createInitConfig(i),clientProperties:this.createInitClientProperties(r,i),dataStore:n.tabby?.dataStore?this.createDataStore():void 0,loggers:[this.createLogger()]}),this.agent.getServerHealthState()?.chat_model&&(o.tabby={...o.tabby,chat:!0}),{capabilities:o,serverInfo:{name:Tu,version:Ru}}}async initialized(){let t=this.agent.getConfig();t.completion.prompt.collectSnippetsFromRecentChangedFiles.enabled&&(this.recentlyChangedCodeSearch=new Lp(t.completion.prompt.collectSnippetsFromRecentChangedFiles.indexing),this.documents.onDidChangeContent(async r=>{if(!r||typeof r!="object"||!("document"in r)||!("contentChanges"in r))return;let n=r;this.recentlyChangedCodeSearch?.handleDidChangeTextDocument(n);})),this.serverInfo={config:t.server,health:this.agent.getServerHealthState()},this.agent.on("configUpdated",r=>{let n={config:r.config.server,health:this.agent.getServerHealthState()};(0, ES.default)(n,this.serverInfo)||(this.clientCapabilities?.tabby?.agent&&this.connection.sendNotification(Xu.type,{serverInfo:n}),this.serverInfo=n);}),this.agent.on("statusChanged",r=>{this.clientCapabilities?.tabby?.agent&&this.connection.sendNotification(ep.type,{status:r.status});let n=this.agent.getServerHealthState(),i={config:this.agent.getConfig().server,health:n};(0, ES.default)(i,this.serverInfo)||(this.clientCapabilities?.tabby?.agent&&this.connection.sendNotification(Xu.type,{serverInfo:i}),this.serverInfo=i),n?.chat_model?this.connection.sendRequest(Ir.RegistrationRequest.type,{registrations:[{id:Ns.type.method,method:Ns.type.method}]}):this.connection.sendRequest(Ir.UnregistrationRequest.type,{unregisterations:[{id:Ns.type.method,method:Ns.type.method}]});}),this.clientCapabilities?.tabby?.agent&&this.agent.on("issuesUpdated",r=>{this.connection.sendNotification(rp.type,{issues:r.issues});});}async updateConfiguration(t){let r=t.settings;r?.server?.endpoint!==void 0&&r.server.endpoint!==this.clientProvidedConfig?.server?.endpoint&&(r.server.endpoint.trim().length>0?this.agent.updateConfig("server.endpoint",r.server.endpoint):this.agent.clearConfig("server.endpoint")),r?.server?.token!==void 0&&r.server.token!==this.clientProvidedConfig?.server?.token&&(r.server.token.trim().length>0?this.agent.updateConfig("server.token",r.server.token):this.agent.clearConfig("server.token")),r?.anonymousUsageTracking?.disable!==void 0&&r.anonymousUsageTracking.disable!==this.clientProvidedConfig?.anonymousUsageTracking?.disable&&(r.anonymousUsageTracking.disable?this.agent.updateConfig("anonymousUsageTracking.disable",!0):this.agent.clearConfig("anonymousUsageTracking.disable"));let n=this.getClientType(this.clientInfo);r?.inlineCompletion?.triggerMode!==void 0&&r.inlineCompletion.triggerMode!==this.clientProvidedConfig?.inlineCompletion?.triggerMode&&this.agent.updateClientProperties("user",`${n}.triggerMode`,r.inlineCompletion?.triggerMode),r?.keybindings!==void 0&&r.keybindings!==this.clientProvidedConfig?.keybindings&&this.agent.updateClientProperties("user",`${n}.keybindings`,r.keybindings),this.clientProvidedConfig=r;}async shutdown(){await this.agent.finalize();}exit(){return O.exit(0)}async getServerInfo(){return this.serverInfo??{config:this.agent.getConfig().server,health:this.agent.getServerHealthState()}}async getStatus(){return this.agent.getStatus()}async getIssues(){return {issues:this.agent.getIssues()}}async getIssueDetail(t){let r=this.agent.getIssueDetail({name:t.name});return r?{name:r.name,helpMessage:this.buildHelpMessage(r,t.helpMessageFormat)}:null}async provideCompletion(t,r){if(r.isCancellationRequested)return null;let n=new AbortController;r.onCancellationRequested(()=>n.abort());try{let i=await this.completionParamsToCompletionRequest(t,r);if(!i)return null;let o=await this.agent.provideCompletions(i.request,{signal:n.signal});return this.toCompletionList(o,t,i.additionalPrefixLength)}catch{return null}}async provideInlineCompletion(t,r){if(r.isCancellationRequested)return null;let n=new AbortController;r.onCancellationRequested(()=>n.abort());try{let i=await this.inlineCompletionParamsToCompletionRequest(t,r);if(!i)return null;let o=await this.agent.provideCompletions(i.request,{signal:n.signal});return this.toInlineCompletionList(o,t,i.additionalPrefixLength)}catch{return null}}async generateCommitMessage(t,r){if(r.isCancellationRequested)return null;if(!this.agent.getServerHealthState()?.chat_model)throw {name:"ChatFeatureNotAvailableError"};let n=new AbortController;r.onCancellationRequested(()=>n.abort());let{repository:i}=t,o,s=async a=>{if(this.clientCapabilities?.tabby?.gitProvider)return await this.connection.sendRequest(fp.type,a,r);let c=await SS();return c?await c.diff(a,r):null};if(o=await s({repository:i,cached:!0}),(!o?.diff||typeof o.diff=="string"&&Fe(o.diff)||Array.isArray(o.diff)&&Fe(o.diff.join("")))&&(o=await s({repository:i,cached:!1})),!o||!o.diff)return null;try{return {commitMessage:await this.agent.generateCommitMessage(o.diff,{signal:n.signal})}}catch{return null}}async event(t){try{let r={type:t.type,select_kind:t.selectKind,completion_id:t.eventId.completionId,choice_index:t.eventId.choiceIndex,view_id:t.viewId,elapsed:t.elapsed};await this.agent.postEvent(r);}catch{return}}createInitConfig(t){let r={};return t?.server?.endpoint&&t.server.endpoint.trim().length>0&&(r.server={endpoint:t.server.endpoint}),t?.server?.token&&t.server.token.trim().length>0&&(r.server?r.server.token=t.server.token:r.server={token:t.server.token}),t?.anonymousUsageTracking?.disable!==void 0&&(r.anonymousUsageTracking={disable:t.anonymousUsageTracking.disable}),r}createInitClientProperties(t,r){return {user:{[this.getClientType(t)]:{triggerMode:r?.inlineCompletion?.triggerMode,keybindings:r?.keybindings}},session:{client:`${t?.name} ${t?.version??""}`,ide:{name:t?.name,version:t?.version},tabby_plugin:t?.tabbyPlugin??{name:`${Tu} (LSP)`,version:Ru}}}}getClientType(t){return t?t.tabbyPlugin?.name=="TabbyML.vscode-tabby"?"vscode":t.tabbyPlugin?.name=="com.tabbyml.intellij-tabby"?"intellij":t.tabbyPlugin?.name=="TabbyML/vim-tabby"?"vim":t.name:"unknown"}createDataStore(){let t={data:{},load:async()=>{let r={key:"data"};t.data=await this.connection.sendRequest(sp.type,r);},save:async()=>{let r={key:"data",value:t.data};await this.connection.sendRequest(ap.type,r);}};return t}createLogger(){return {error:(t,r)=>{let n=r instanceof Error?`[${r.name}] ${r.message} 
${r.stack}`:JSON.stringify(r,void 0,2);this.connection.console.error(`${t} ${n}`);},warn:t=>{this.connection.console.warn(t);},info:t=>{this.connection.console.info(t);},debug:t=>{this.connection.console.debug(t);},trace:()=>{}}}async textDocumentPositionParamsToCompletionRequest(t,r){let{textDocument:n,position:i}=t;this.logger.trace("Building completion context...",{uri:n.uri});let o=this.documents.get(n.uri);if(!o)return null;let s={filepath:o.uri,language:o.languageId,text:o.getText(),position:o.offsetAt(i)},a=this.notebooks.getNotebookCell(n.uri),c;if(a&&(this.logger.trace("Notebook cell found:",{cell:a.kind}),c=this.buildNotebookAdditionalContext(o,a)),c&&(s.text=c.prefix+s.text+c.suffix,s.position+=c.prefix.length),this.clientCapabilities?.tabby?.editorOptions){let g=await this.connection.sendRequest(dp.type,{uri:t.textDocument.uri},r);s.indentation=g?.indentation;}if(this.clientCapabilities?.workspace){let g=await this.connection.workspace.getWorkspaceFolders();s.workspace=g?.find(w=>o.uri.startsWith(w.uri))?.uri;}let u=await(async g=>{if(this.clientCapabilities?.tabby?.gitProvider)return await this.connection.sendRequest(lp.type,g,r);let w=await SS();return w?await w.getRepository(g,r):null})({uri:o.uri});return u&&(s.git={root:u.root,remotes:u.remoteUrl?[{name:"",url:u.remoteUrl}]:u.remotes??[]}),this.clientCapabilities?.tabby?.languageSupport&&(s.declarations=await this.collectDeclarationSnippets(o,i,r)),this.recentlyChangedCodeSearch&&(s.relevantSnippetsFromChangedFiles=await this.collectSnippetsFromRecentlyChangedFiles(o,i)),this.logger.trace("Completed completion context:",{request:s}),{request:s,additionalPrefixLength:c?.prefix.length}}buildNotebookAdditionalContext(t,r){this.logger.trace("Building notebook additional context...");let n=this.notebooks.findNotebookDocumentForCell(r);if(!n)return n;let i=n.cells.indexOf(r),o=this.buildNotebookContext(n,0,i,t.languageId)+`

`,s=`

`+this.buildNotebookContext(n,i+1,n.cells.length,t.languageId);return this.logger.trace("Notebook additional context:",{prefix:o,suffix:s}),{prefix:o,suffix:s}}buildNotebookContext(t,r,n,i){return t.cells.slice(r,n).map(o=>{let s=this.notebooks.getCellTextDocument(o);return s?s.languageId===i?s.getText():Object.keys(this.notebookLanguageComments).includes(i)?this.notebookLanguageComments[i]?.(s.getText())??"":"":""}).join(`

`)}async collectDeclarationSnippets(t,r,n){let i=this.agent.getConfig();if(!i.completion.prompt.fillDeclarations.enabled)return;this.logger.debug("Collecting declaration snippets..."),this.logger.trace("Collecting snippets for:",{textDocument:t.uri,position:r});let o={start:{line:Math.max(0,r.line-i.completion.prompt.maxPrefixLines),character:0},end:{line:r.line,character:r.character}},s=await this.extractSemanticTokenPositions({uri:t.uri,range:o},n);if(!s)return;let a=["class","decorator","enum","function","interface","macro","method","namespace","struct","type","typeParameter"],c=s.filter(g=>a.includes(g.type??""));this.logger.trace("Found symbols in prefix text:",{symbols:c});let l=[],u=[];for(let g=c.length-1;g>=0&&!(l.length>=i.completion.prompt.fillDeclarations.maxSnippets);g--){let w=c[g]?.position;if(!w)continue;let y=await this.connection.sendRequest(cp.type,{textDocument:{uri:t.uri},position:w},n);if(!y)continue;let _=Array.isArray(y)?y[0]:y;if(!_)continue;let x={uri:"targetUri"in _?_.targetUri:_.uri,range:"targetRange"in _?_.targetRange:_.range};if(this.logger.trace("Processing declaration location...",{location:x}),x.uri==t.uri&&nF(x.range.start,o)){this.logger.trace("Skipping snippet as it is contained in the prefix.");continue}if(u.find(R=>x.uri==R.uri&&mS(x.range,R.range))){this.logger.trace("Skipping snippet as it is already collected.");continue}this.logger.trace("Prepare to fetch text content...");let D,A=this.documents.get(x.uri);if(A)this.logger.trace("Fetching text content from synced text document.",{uri:A.uri,range:x.range}),D=A.getText(x.range),this.logger.trace("Fetched text content from synced text document.",{text:D});else if(this.clientCapabilities?.tabby?.workspaceFileSystem){let R={uri:x.uri,format:"text",range:{start:{line:x.range.start.line,character:0},end:{line:x.range.end.line,character:x.range.end.character}}};this.logger.trace("Fetching text content from ReadFileRequest.",{params:R});let T=await this.connection.sendRequest(op.type,R,n);this.logger.trace("Fetched text content from ReadFileRequest.",{result:T}),D=T?.text;}if(!D){this.logger.trace("Cannot fetch text content, continue to next.",{result:y});continue}let C=i.completion.prompt.fillDeclarations.maxCharsPerSnippet;if(D.length>C){D=D.slice(0,C);let R=D.lastIndexOf(`
`);R>0&&(D=D.slice(0,R+1));}D.length>0&&(this.logger.trace("Collected declaration snippet:",{text:D}),l.push({filepath:x.uri,offset:A?.offsetAt(r),text:D}),u.push(x));}return this.logger.debug("Completed collecting declaration snippets."),this.logger.trace("Collected snippets:",l),l}async extractSemanticTokenPositions(t,r){let n=await this.connection.sendRequest(up.type,{textDocument:{uri:t.uri},range:t.range},r);if(!n||!n.legend||!n.legend.tokenTypes||!n.tokens||!n.tokens.data)return;let{legend:i,tokens:o}=n,s=Array.isArray(o.data)?o.data:Object.values(o.data),a=[],c=0,l=0;for(let u=0;u+4<s.length;u+=5){let g=s[u],w=s[u+1],y=s[u+3];if(g===void 0||w===void 0||y===void 0)break;c+=g,g>0?l=w:l+=w,a.push({position:{line:c,character:l},type:i.tokenTypes[y]});}return a}async collectSnippetsFromRecentlyChangedFiles(t,r){let n=this.agent.getConfig();if(!n.completion.prompt.collectSnippetsFromRecentChangedFiles.enabled||!this.recentlyChangedCodeSearch)return;this.logger.debug("Collecting snippets from recently changed files..."),this.logger.trace("Collecting snippets for:",{document:t.uri,position:r});let i={start:{line:Math.max(0,r.line-n.completion.prompt.maxPrefixLines),character:0},end:{line:r.line,character:r.character}},o=t.getText(i),s=Rp(o),a=await this.recentlyChangedCodeSearch.collectRelevantSnippets(s,t,n.completion.prompt.collectSnippetsFromRecentChangedFiles.maxSnippets);return this.logger.debug("Completed collecting snippets from recently changed files."),this.logger.trace("Collected snippets:",a),a}async completionParamsToCompletionRequest(t,r){let n=await this.textDocumentPositionParamsToCompletionRequest(t,r);return n?(n.request.manually=t.context?.triggerKind===Ir.CompletionTriggerKind.Invoked,n):null}async inlineCompletionParamsToCompletionRequest(t,r){let n=await this.textDocumentPositionParamsToCompletionRequest(t,r);return n?(n.request.manually=t.context?.triggerKind===Ir.InlineCompletionTriggerKind.Invoked,n):null}toCompletionList(t,r,n=0){let{textDocument:i,position:o}=r,s=this.documents.get(i.uri);if(!s)return null;let a=s.getText({start:{line:o.line,character:0},end:o}),c=a.match(/(\w+)$/)?.[0]??"";return {isIncomplete:t.isIncomplete,items:t.items.map(l=>{let u=l.insertText.slice(s.offsetAt(o)-(l.range.start-n)),g=Fi(u),w=g[0]||"",y=g[1]||"";return {label:c+w,labelDetails:{detail:y,description:"Tabby"},kind:Ir.CompletionItemKind.Text,documentation:{kind:"markdown",value:`\`\`\`
${a+u}
\`\`\`
 ---
Suggested by Tabby.`},textEdit:{newText:c+u,range:{start:{line:o.line,character:o.character-c.length},end:s.positionAt(l.range.end-n)}},data:l.data}})}}toInlineCompletionList(t,r,n=0){let{textDocument:i}=r,o=this.documents.get(i.uri);return o?{isIncomplete:t.isIncomplete,items:t.items.map(s=>({insertText:s.insertText,range:{start:o.positionAt(s.range.start-n),end:o.positionAt(s.range.end-n)},data:s.data}))}:null}buildHelpMessage(t,r){let n=r??"markdown";if(t.name=="connectionFailed")return n=="html"?t.message?.replace(/\n/g,"<br/>"):t.message;let i="";if(t.name=="slowCompletionResponseTime"){let u=t.completionResponseStats;u&&u.responses&&u.averageResponseTime&&(i=`The average response time of recent ${u.responses} completion requests is ${Number(u.averageResponseTime).toFixed(0)}ms.<br/><br/>`);}if(t.name=="highCompletionTimeoutRate"){let u=t.completionResponseStats;u&&u.total&&u.timeouts&&(i=`${u.timeouts} of ${u.total} completion requests timed out.<br/><br/>`);}let o="",s=this.agent.getServerHealthState();s?.device==="cpu"&&s?.model?.match(/[0-9.]+B$/)&&(o+=`Your Tabby server is running model <i>${s?.model}</i> on CPU. This model may be performing poorly due to its large parameter size, please consider trying smaller models or switch to GPU. You can find a list of recommend models in the <a href='https://tabby.tabbyml.com/'>online documentation</a>.<br/>`);let a="";o.length==0&&(a+=`<li>The running model ${s?.model??""} may be performing poorly due to its large parameter size. `,a+="Please consider trying smaller models. You can find a list of recommend models in the <a href='https://tabby.tabbyml.com/'>online documentation</a>.</li>");let c=new URL(this.serverInfo?.config.endpoint??"http://localhost:8080").host;c.startsWith("localhost")||c.startsWith("127.0.0.1")||c.startsWith("0.0.0.0")||(a+="<li>A poor network connection. Please check your network and proxy settings.</li>",a+="<li>Server overload. Please contact your Tabby server administrator for assistance.</li>");let l="";return o.length>0?(l+=o+"<br/>",a.length>0&&(l+="Other possible causes of this issue: <br/><ul>"+a+"</ul>")):l+="Possible causes of this issue: <br/><ul>"+a+"</ul>",n=="html"?i+l:(i+l).replace("<br/>",` 
`).replace(/<i>(.*?)<\/i>/g,"$1").replace(/<a[^>]*>(.*?)<\/a>/g,"$1").replace(/<ul[^>]*>(.*?)<\/ul>/g,"$1").replace(/<li[^>]*>(.*?)<\/li>/g,`- $1 
`)}};var TX=new $p(new _d);TX.listen();
/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.mjs.map
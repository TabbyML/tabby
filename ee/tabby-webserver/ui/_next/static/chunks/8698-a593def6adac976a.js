"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8698],{63484:function(e,a,t){t.d(a,{U$:function(){return m},t:function(){return c}});var n=t(14283),s=t.n(n),l=t(34021),i=t(74630),r=t(18500),o=JSON.parse('{"Mercury":"#ff2b2b","TypeScript":"#2b7489","PureBasic":"#5a6986","Objective-C++":"#6866fb","Self":"#0579aa","edn":"#db5855","NewLisp":"#87AED7","Jupyter Notebook":"#DA5B0B","Rebol":"#358a5b","Frege":"#00cafe","Dart":"#00B4AB","AspectJ":"#a957b0","Shell":"#89e051","Web Ontology Language":"#9cc9dd","xBase":"#403a40","Eiffel":"#946d57","Nix":"#7e7eff","RAML":"#77d9fb","MTML":"#b7e1f4","Racket":"#22228f","Elixir":"#6e4a7e","SAS":"#B34936","Agda":"#315665","wisp":"#7582D1","D":"#ba595e","Kotlin":"#F18E33","Opal":"#f7ede0","Crystal":"#776791","Objective-C":"#438eff","ColdFusion CFC":"#ed2cd6","Oz":"#fab738","Mirah":"#c7a938","Objective-J":"#ff0c5a","Gosu":"#82937f","FreeMarker":"#0050b2","Ruby":"#701516","Component Pascal":"#b0ce4e","Arc":"#aa2afe","Brainfuck":"#2F2530","Nit":"#009917","APL":"#5A8164","Go":"#375eab","Visual Basic":"#945db7","PHP":"#4F5D95","Cirru":"#ccccff","SQF":"#3F3F3F","Glyph":"#e4cc98","Java":"#b07219","MAXScript":"#00a6a6","Scala":"#DC322F","Makefile":"#427819","ColdFusion":"#ed2cd6","Perl":"#0298c3","Lua":"#000080","Vue":"#2c3e50","Verilog":"#b2b7f8","Factor":"#636746","Haxe":"#df7900","Pure Data":"#91de79","Forth":"#341708","Red":"#ee0000","Hy":"#7790B2","Volt":"#1F1F1F","LSL":"#3d9970","eC":"#913960","CoffeeScript":"#244776","HTML":"#e44b23","Lex":"#DBCA00","API Blueprint":"#2ACCA8","Swift":"#ffac45","C":"#555555","AutoHotkey":"#6594b9","Isabelle":"#FEFE00","Metal":"#8f14e9","Clarion":"#db901e","JSONiq":"#40d47e","Boo":"#d4bec1","AutoIt":"#1C3552","Clojure":"#db5855","Rust":"#dea584","Prolog":"#74283c","SourcePawn":"#5c7611","AMPL":"#E6EFBB","FORTRAN":"#4d41b1","ANTLR":"#9DC3FF","Harbour":"#0e60e3","Tcl":"#e4cc98","BlitzMax":"#cd6400","PigLatin":"#fcd7de","Lasso":"#999999","ECL":"#8a1267","VHDL":"#adb2cb","Elm":"#60B5CC","Propeller Spin":"#7fa2a7","X10":"#4B6BEF","IDL":"#a3522f","ATS":"#1ac620","Ada":"#02f88c","Unity3D Asset":"#ab69a1","Nu":"#c9df40","LFE":"#004200","SuperCollider":"#46390b","Oxygene":"#cdd0e3","ASP":"#6a40fd","Assembly":"#6E4C13","Gnuplot":"#f0a9f0","JFlex":"#DBCA00","NetLinx":"#0aa0ff","Turing":"#45f715","Vala":"#fbe5cd","Processing":"#0096D8","Arduino":"#bd79d1","FLUX":"#88ccff","NetLogo":"#ff6375","CSharp":"#178600","CSS":"#563d7c","Emacs Lisp":"#c065db","Stan":"#b2011d","SaltStack":"#646464","QML":"#44a51c","Pike":"#005390","LOLCODE":"#cc9900","ooc":"#b0b77e","Handlebars":"#01a9d6","J":"#9EEDFF","Mask":"#f97732","EmberScript":"#FFF4F3","TeX":"#3D6117","Nemerle":"#3d3c6e","KRL":"#28431f","Ren\'Py":"#ff7f7f","Unified Parallel C":"#4e3617","Golo":"#88562A","Fancy":"#7b9db4","OCaml":"#3be133","Shen":"#120F14","Pascal":"#b0ce4e","F#":"#b845fc","Puppet":"#302B6D","ActionScript":"#882B0F","Diff":"#88dddd","Ragel in Ruby Host":"#9d5200","Fantom":"#dbded5","Zephir":"#118f9e","Click":"#E4E6F3","Smalltalk":"#596706","DM":"#447265","Ioke":"#078193","PogoScript":"#d80074","LiveScript":"#499886","JavaScript":"#f1e05a","VimL":"#199f4b","PureScript":"#1D222D","ABAP":"#E8274B","Matlab":"#bb92ac","Slash":"#007eff","R":"#198ce7","Erlang":"#B83998","Pan":"#cc0000","LookML":"#652B81","Eagle":"#814C05","Scheme":"#1e4aec","PLSQL":"#dad8d8","Python":"#3572A5","Max":"#c4a79c","Common Lisp":"#3fb68b","Latte":"#A8FF97","XQuery":"#5232e7","Omgrofl":"#cabbff","XC":"#99DA07","Nimrod":"#37775b","SystemVerilog":"#DAE1C2","Chapel":"#8dc63f","Groovy":"#e69f56","Dylan":"#6c616e","E":"#ccce35","Parrot":"#f3ca0a","Grammatical Framework":"#79aa7a","Game Maker Language":"#8fb200","Papyrus":"#6600cc","NetLinx+ERB":"#747faa","Clean":"#3F85AF","Alloy":"#64C800","Squirrel":"#800000","PAWN":"#dbb284","UnrealScript":"#a54c4d","Standard ML":"#dc566d","Slim":"#ff8f77","Perl6":"#0000fb","Julia":"#a270ba","Haskell":"#29b544","NCL":"#28431f","Io":"#a9188d","Rouge":"#cc0088","cpp":"#f34b7d","AGS Script":"#B9D9FF","Dogescript":"#cca760","nesC":"#94B0C7"}'),f={abap:{filenames:[],extnames:["abap"]},actionscript:{filenames:[],extnames:["as"]},ada:{filenames:[],extnames:["ada","adb","ads"]},apacheconf:{filenames:[".htaccess","apache2.conf","httpd.conf"],extnames:["apacheconf","vhost"]},apl:{filenames:[],extnames:["apl","dyalog"]},applescript:{filenames:[],extnames:["applescript","scpt"]},arff:{filenames:[],extnames:["arff"]},asciidoc:{filenames:[],extnames:["asciidoc","adoc","asc"]},asm6502:{filenames:[],extnames:["asm"]},autohotkey:{filenames:[],extnames:["ahk","ahkl"]},autoit:{filenames:[],extnames:["au3"]},bash:{filenames:[".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".login",".profile",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_logout","bash_profile","bashrc","cshrc","gradlew","login","man","profile","zlogin","zlogout","zprofile","zshenv","zshrc"],extnames:["sh","bash","bats","cgi","command","fcgi","ksh","tmux","tool","zsh"]},basic:{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},batch:{filenames:[],extnames:["bat","cmd"]},bison:{filenames:[],extnames:["bison"]},brainfuck:{filenames:[],extnames:["b","bf"]},bro:{filenames:[],extnames:["bro"]},c:{filenames:[],extnames:["c","cats","h","idc"]},csharp:{filenames:[],extnames:["cs","cake","cshtml","csx"]},cpp:{filenames:[],extnames:["cpp","c++","cc","cp","cxx","h","h++","hh","hpp","hxx","inc","inl","ino","ipp","re","tcc","tpp"]},coffeescript:{filenames:["Cakefile"],extnames:["coffee","_coffee","cake","cjsx","iced"]},clojure:{filenames:["riemann.config"],extnames:["clj","boot","cl2","cljc","cljs","cljs.hl","cljscm","cljx","hic"]},crystal:{filenames:[],extnames:["cr"]},css:{filenames:[],extnames:["css"]},d:{filenames:[],extnames:["d","di"]},dart:{filenames:[],extnames:["dart"]},diff:{filenames:[],extnames:["diff","patch"]},django:{filenames:[],extnames:["jinja","jinja2","mustache","njk"]},dockerfile:{filenames:["Dockerfile"],extnames:["dockerfile"]},eiffel:{filenames:[],extnames:["e"]},elixir:{filenames:["mix.lock"],extnames:["ex","exs"]},elm:{filenames:[],extnames:["elm"]},erb:{filenames:[],extnames:["erb"]},erlang:{filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"],extnames:["erl","app.src","es","escript","hrl","xrl","yrl"]},fsharp:{filenames:[],extnames:["fs","fsi","fsx"]},fortran:{filenames:[],extnames:["f90","f","f03","f08","f77","f95","for","fpp"]},gedcom:{filenames:[],extnames:["ged"]},gherkin:{filenames:[],extnames:["feature"]},glsl:{filenames:[],extnames:["glsl","fp","frag","frg","fs","fsh","fshader","geo","geom","glslv","gshader","shader","tesc","tese","vert","vrx","vsh","vshader"]},go:{filenames:[],extnames:["go"]},graphql:{filenames:[],extnames:["graphql","gql"]},groovy:{filenames:["Jenkinsfile"],extnames:["groovy","grt","gtpl","gvy"]},haml:{filenames:[],extnames:["haml"]},handlebars:{filenames:[],extnames:["handlebars","hbs"]},haskell:{filenames:[],extnames:["hs","hsc"]},haxe:{filenames:[],extnames:["hx","hxsl"]},http:{filenames:[],extnames:["http"]},icon:{filenames:[],extnames:["icn"]},inform7:{filenames:[],extnames:["ni","i7x"]},ini:{filenames:[".editorconfig",".gitconfig"],extnames:["ini","cfg","lektorproject","prefs","pro","properties"]},io:{filenames:[],extnames:["io"]},j:{filenames:[],extnames:["ijs"]},java:{filenames:[],extnames:["java"]},javascript:{filenames:["Jakefile"],extnames:["js","_js","cjs","bones","es","es6","frag","gs","jake","jsb","jscad","jsfl","jsm","jss","mjs","njs","pac","sjs","ssjs","xsjs","xsjslib"]},jolie:{filenames:[],extnames:["ol","iol"]},json:{filenames:[".arcconfig",".htmlhintrc",".tern-config",".tern-project","composer.lock","mcmod.info"],extnames:["json","avsc","geojson","gltf","JSON-tmLanguage","jsonl","tfstate","topojson","webapp","webmanifest","yy","yyp"]},julia:{filenames:[],extnames:["jl"]},keyman:{filenames:[],extnames:["kmn"]},kotlin:{filenames:[],extnames:["kt","ktm","kts"]},latex:{filenames:[],extnames:["tex","aux","bbx","bib","cbx","cls","dtx","ins","lbx","ltx","mkii","mkiv","mkvi","sty","toc"]},less:{filenames:[],extnames:["less"]},liquid:{filenames:[],extnames:["liquid"]},lisp:{filenames:[],extnames:["lisp","asd","cl","l","lsp","ny","podsl","sexp"]},livescript:{filenames:["Slakefile"],extnames:["ls","_ls"]},lolcode:{filenames:[],extnames:["lol"]},lua:{filenames:[],extnames:["lua","fcgi","nse","p8","pd_lua","rbxs","wlua"]},cmake:{filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"],extnames:["mak","d","make","mk","mkfile"]},markdown:{filenames:["contents.lr","LICENSE"],extnames:["md","markdown","mdown","mdwn","mkd","mkdn","mkdown","ronn","workbook"]},markup:{filenames:[],extnames:["apib","blade","chem","ecr","eex","ejs","html","htm","ipynb","kit","latte","marko","mask","mtml","phtml","pic","raml","rhtml","vue","xht","xhtml"]},matlab:{filenames:[],extnames:["matlab","m"]},mel:{filenames:[],extnames:["mel"]},mizar:{filenames:[],extnames:["miz","voc"]},monkey:{filenames:[],extnames:["monkey","monkey2"]},n4js:{filenames:[],extnames:["n4jsd"]},nasm:{filenames:[],extnames:["nasm"]},nginx:{filenames:["nginx.conf"],extnames:["nginxconf","vhost"]},nim:{filenames:[],extnames:["nim","nimrod"]},nix:{filenames:[],extnames:["nix"]},nsis:{filenames:[],extnames:["nsi","nsh"]},objectivec:{filenames:[],extnames:["m","h"]},ocaml:{filenames:[],extnames:["ml","eliom","eliomi","ml4","mli","mll","mly"]},opencl:{filenames:[],extnames:["opencl","cl"]},oz:{filenames:[],extnames:["oz"]},pascal:{filenames:[],extnames:["pas","dfm","dpr","inc","lpr","pascal","pp"]},perl:{filenames:["Makefile.PL","Rexfile","ack","cpanfile"],extnames:["pl","al","cgi","fcgi","perl","ph","plx","pm","psgi","t"]},php:{filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],extnames:["php","aw","ctp","fcgi","inc","php3","php4","php5","phps","phpt"]},plsql:{filenames:[],extnames:["pls","bdy","ddl","fnc","pck","pkb","pks","plb","plsql","prc","spc","tpb","tps","trg","vw"]},powershell:{filenames:[],extnames:["ps1","psd1","psm1"]},processing:{filenames:[],extnames:["pde"]},prolog:{filenames:[],extnames:["pl","pro","prolog","yap"]},properties:{filenames:[],extnames:["properties"]},protobuf:{filenames:[],extnames:["proto"]},pug:{filenames:[],extnames:["jade","pug"]},puppet:{filenames:["Modulefile"],extnames:["pp"]},pure:{filenames:[],extnames:["pure"]},python:{filenames:[".gclient","BUCK","BUILD","BUILD.bazel","SConscript","SConstruct","Snakefile","WORKSPACE","wscript"],extnames:["py","bzl","cgi","fcgi","gyp","gypi","lmi","py3","pyde","pyi","pyp","pyt","pyw","rpy","spec","tac","wsgi","xpy"]},q:{filenames:[],extnames:["q"]},qore:{filenames:[],extnames:["q","qm","qtest"]},r:{filenames:[".Rprofile","expr-dist"],extnames:["r","rd","rsx"]},jsx:{filenames:[],extnames:["jsx"]},toml:{filenames:[],extnames:["toml"]},tsx:{filenames:[],extnames:["tsx"]},renpy:{filenames:[],extnames:["rpy"]},reason:{filenames:[],extnames:["re","rei"]},rest:{filenames:[],extnames:["rst","rest"]},rip:{filenames:[],extnames:["rip"]},ruby:{filenames:[".irbrc",".pryrc","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Gemfile.lock","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Thorfile","Vagrantfile","buildfile"],extnames:["rb","builder","eye","fcgi","gemspec","god","jbuilder","mspec","pluginspec","podspec","rabl","rake","rbuild","rbw","rbx","ru","ruby","spec","thor","watchr"]},rust:{filenames:[],extnames:["rs"]},sas:{filenames:[],extnames:["sas"]},sass:{filenames:[],extnames:["sass"]},scss:{filenames:[],extnames:["scss"]},scala:{filenames:[],extnames:["scala","kojo","sbt","sc"]},scheme:{filenames:[],extnames:["scm","sch","sld","sls","sps","ss"]},smalltalk:{filenames:[],extnames:["st","cs"]},smarty:{filenames:[],extnames:["tpl"]},sql:{filenames:[],extnames:["sql","cql","ddl","inc","mysql","prc","tab","udf","viw"]},soy:{filenames:[],extnames:["soy"]},stylus:{filenames:[],extnames:["styl"]},swift:{filenames:[],extnames:["swift"]},tcl:{filenames:["owh","starfield"],extnames:["tcl","adp","tm"]},textile:{filenames:[],extnames:["textile"]},tt2:{filenames:[],extnames:["pm"]},twig:{filenames:[],extnames:["twig"]},typescript:{filenames:[],extnames:["ts"]},velocity:{filenames:[],extnames:["vm"]},verilog:{filenames:[],extnames:["v","veo"]},vhdl:{filenames:[],extnames:["vhdl","vhd","vhf","vhi","vho","vhs","vht","vhw"]},vim:{filenames:[".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"],extnames:["vim"]},"visual-basic":{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},wasm:{filenames:[],extnames:["wast","wat"]},xojo:{filenames:[],extnames:["xojo_code","xojo_menu","xojo_report","xojo_script","xojo_toolbar","xojo_window"]},xquery:{filenames:[],extnames:["xquery","xq","xql","xqm","xqy"]},yaml:{filenames:[".clang-format",".clang-tidy",".gemrc","glide.lock"],extnames:["yml","mir","reek","rviz","sublime-syntax","syntax","yaml","yaml-tmlanguage"]}};Object.entries(o).reduce((e,a)=>{let[t,n]=a;return{...e,[t.toLocaleLowerCase()]:n}},{});let m=e=>{let a={},t={};for(let[e,n]of Object.entries(f)){for(let t of n.filenames)(0,l.Z)(a,t)||(a[t]=[]),a[t].push(e);for(let a of n.extnames)(0,l.Z)(t,a)||(t[a]=[]),t[a].push(e)}return[].concat(a[s().basename(e)],t[s().extname(e).substring(1)]).filter(Boolean)},c=(e,a)=>{let t=()=>(0,i.Z)(a)?"Other":a;if(!e)return t();let n=Object.values(r.SQ).map(e=>e.toLocaleLowerCase()).indexOf(e.toLocaleLowerCase());if(-1===n)return t();let s=Object.keys(r.SQ)[n];return({csharp:"C#",cpp:"C++",javascript:"JavaScript",typescript:"TypeScript",php:"PHP"})[s.toLocaleLowerCase()]||s}},17451:function(e,a,t){t.d(a,{Eg:function(){return m},UP:function(){return p},aK:function(){return o},qs:function(){return d},xt:function(){return c}});var n=t(27257),s=t(85654),l=t(57288);let i=["activeChatId","pendingUserMessage"],r={activeChatId:(0,l.x0)(),selectedModel:void 0,selectedRepoSourceId:void 0,enableActiveSelection:!0,pendingUserMessage:void 0},o=(0,n.Ue)()((0,s.tJ)(()=>({...r}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[a]=e;return!i.includes(a)})),version:1})),f=o.setState,m=e=>{f(()=>({selectedModel:e}))},c=e=>{f(()=>({selectedRepoSourceId:e}))},d=e=>{f(()=>({enableActiveSelection:e}))},p=e=>{f(()=>({pendingUserMessage:e}))}},23342:function(e,a){a.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},66734:function(e,a,t){t.d(a,{m:function(){return A},H:function(){return S}});var n=t(3546);let s=Symbol.for("quilt.threads.retain"),l=Symbol.for("quilt.threads.release"),i=Symbol.for("quilt.threads.retained-by"),r=Symbol.for("quilt.threads.encode"),o=Symbol.for("quilt.threads.transferable");class f{memoryManaged=new Set;add(e){this.memoryManaged.add(e),e[i].add(this),e[s]()}release(){for(let e of this.memoryManaged)e[i].delete(this),e[l]();this.memoryManaged.clear()}}function m(e){return!!(e&&e[s]&&e[l])}function c(e){if(null==e||"object"!=typeof e)return!1;let a=Object.getPrototypeOf(e);return null==a||a===Object.prototype}function d(e,{expose:a,callable:t,signal:n,uuid:d=u,encoder:x=function({encode:e,decode:a}={}){return{encode:function(e,a){let n={api:a,seen:new Map,encode:e=>t(e,n,!0)};return t(e,n)},decode:function(e,a,t){let s={api:a,decode:e=>n(e,s,t,!0)};return n(e,s)}};function t(a,n,s=!1){let{seen:l,api:i,encode:f}=n;if(!s&&e)return e(a,f);if(null==a)return[a];let m=l.get(a);if(m)return m;if(l.set(a,[void 0]),"object"==typeof a){if(a[o]){let e=[a,[a]];return l.set(a,e),e}let e=[],s=a=>{let[s,l=[]]=t(a,n);return e.push(...l),s};if("function"==typeof a[r]){let t=a[r]({encode:s}),n=[t,e];return l.set(a,n),n}if(Array.isArray(a)){let t=a.map(e=>s(e)),n=[t,e];return l.set(a,n),n}if(a instanceof RegExp){let t={"_@r":[a.source,a.flags]},n=[t,e];return l.set(a,n),n}if(a instanceof URL){let t={"_@u":a.href},n=[t,e];return l.set(a,n),n}if(a instanceof Date){let t={"_@d":a.toISOString()},n=[t,e];return l.set(a,n),n}if(a instanceof Map){let t=[...a.entries()].map(([e,a])=>[s(e),s(a)]),n=[{"_@m":t},e];return l.set(a,n),n}if(a instanceof Set){let t=[...a].map(e=>s(e)),n=[{"_@s":t},e];return l.set(a,n),n}let i=null!=a&&(Symbol.asyncIterator in a||Symbol.iterator in a)&&"function"==typeof a.next;if(c(a)||i){let t={};for(let e of Object.keys(a))t[e]=s(a[e]);i&&(t.next??=s(a.next.bind(a)),t.return??=s(a.return.bind(a)),t.throw??=s(a.throw.bind(a)),t["_@i"]=!0);let n=[t,e];return l.set(a,n),n}}if("function"==typeof a){let e=i.functions?.add(a);if(null==e)return[e];let t=[{"_@f":e}];return l.set(a,t),t}let d=[a];return l.set(a,d),d}function n(e,t,s,l=!1){let{api:i,decode:r}=t;if(!l&&a)return a(e,r,s);if("object"==typeof e){if(null==e)return e;if(Array.isArray(e))return e.map(e=>n(e,t,s));if("_@r"in e)return new RegExp(...e["_@r"]);if("_@u"in e)return new URL(e["_@u"]);if("_@d"in e)return new Date(e["_@d"]);if("_@m"in e)return new Map(e["_@m"].map(([e,a])=>[n(e,t,s),n(a,t,s)]));if("_@s"in e)return new Set(e["_@s"].map(e=>n(e,t,s)));if("_@f"in e){let a=e["_@f"],t=i.functions?.get(a);if(s&&m(t))for(let e of s)e.add(t);return t}if(!c(e))return e;let a={};for(let l of Object.keys(e))"_@i"===l?a[Symbol.asyncIterator]=()=>a:a[l]=n(e[l],t,s);return a}return e}}()}={}){let b=!1,h=new Map,g=new Map,y=new Map,k=new Map;if(a)for(let e of Object.keys(a)){let t=a[e];"function"==typeof t&&h.set(e,t)}let w=new Map,v=function(e,a,t){let n;if(null==a){if("function"!=typeof Proxy)throw Error("You must pass an array of callable methods in environments without Proxies.");let a=new Map;n=new Proxy({},{get(n,s){if("then"===s)return;if("_requestMethods"===s)return t?._requestMethods;if(a.has(s))return a.get(s);let l=e(s);return a.set(s,l),l}})}else for(let t of(n={},a))Object.defineProperty(n,t,{value:e(t),writable:!1,configurable:!0,enumerable:!0});return n}(function(e){return(...a)=>{try{if(b)throw new p;if("string"!=typeof e&&"number"!=typeof e)throw Error(`Can’t call a symbol method on a thread: ${e.toString()}`);if("hasCapability"===e){let e=a[0],t=d(),n=L(t);return j(7,[t,e]),n}let t=d(),n=L(t),[s,l]=x.encode(a,A);return j(0,[t,e,s],l),n}catch(e){return Promise.reject(e)}}},t,{_requestMethods:M}),A={functions:{add(e){let a=g.get(e);return null==a&&(a=d(),g.set(e,a),y.set(a,e)),a},get(e){let a=k.get(e);if(a)return a;let t=0,n=!1;return Object.defineProperties(a=(...a)=>{if(n)throw Error("You attempted to call a function that was already released.");if(!k.has(e))throw Error("You attempted to call a function that was already revoked.");let[t,s]=x.encode(a,A),l=d(),i=L(l);return j(5,[l,e,t],s),i},{[l]:{value:()=>{0==(t-=1)&&(n=!0,k.delete(e),j(3,[e]))},writable:!1},[s]:{value:()=>{t+=1},writable:!1},[i]:{value:new Set,writable:!1}}),k.set(e,a),a}}},S=()=>{if(!b){for(let e of w.keys())E(e,new p);b=!0,h.clear(),w.clear(),g.clear(),y.clear(),k.clear()}};return n?.addEventListener("abort",()=>{j(2,[]),S()},{once:!0}),e.listen(C,{signal:n}),v;function j(a,t,n){b||e.send([a,t],n)}async function C(e){let a=Array.isArray(e)&&"number"==typeof e[0]&&(null==e[1]||Array.isArray(e[1]));if(a)switch(e[0]){case 2:S();break;case 0:{let a=new f,[t,n,s]=e[1],l=h.get(n);try{if(null==l)throw Error(`No '${n}' method is exposed on this endpoint`);let e=await l(...x.decode(s,A,[a])),[i,r]=x.encode(e,A);j(1,[t,void 0,i],r)}catch(s){let{name:e,message:a,stack:n}=s;j(1,[t,{name:e,message:a,stack:n}])}finally{a.release()}break}case 1:case 6:E(...e[1]);break;case 3:{let[a]=e[1],t=y.get(a);t&&(y.delete(a),g.delete(t));break}case 5:{let[a,t,n]=e[1],s=new f;try{let e=y.get(t);if(null==e)throw Error("You attempted to call a function that was already released.");let l=await e(...x.decode(n,A,m(e)?[...e[i],s]:[s])),[r,o]=x.encode(l,A);j(6,[a,void 0,r],o)}catch(s){let{name:e,message:t,stack:n}=s;j(6,[a,{name:e,message:t,stack:n}])}finally{s.release()}break}case 7:{let[a,t]=e[1],n=h.has(t);j(1,[a,void 0,x.encode(n,A)[0]]);break}case 8:{let[a]=e[1],t=Array.from(h.keys());j(1,[a,void 0,x.encode(t,A)[0]])}}}function L(e){let a=new Promise((a,t)=>{w.set(e,(e,n,s)=>{if(null==n)a(x.decode(s,A));else{let e=Error();Object.assign(e,n),t(e)}})});return Object.defineProperty(a,Symbol.asyncIterator,{async *value(){let e=await a;Object.defineProperty(e,Symbol.asyncIterator,{value:()=>e}),yield*e}}),a}function E(...e){let a=e[0],t=w.get(a);t&&(t(...e),w.delete(a))}async function M(){let e=d(),a=L(e);return j(8,[e]),a}}class p extends Error{constructor(){super("You attempted to call a function on a terminated thread.")}}function u(){return`${x()}-${x()}-${x()}-${x()}`}function x(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}var b=t(18400);let h="quilt.threads.ping",g="quilt.threads.pong";var y=t(76904);let k=["0.8.0","0.9.0"];async function w(e){let a=await e._requestMethods(),t={};for(let n of a)t[n]=e[n];return t}async function v(e){let a=await e._requestMethods(),t={};for(let n of a)t[n]=e[n];let n=await e.getVersion(),s={};for(let e of k)(function(e,a){let t=y.coerce(e),n=y.coerce(a);return!!t&&!!n&&y.gte(t,n)})(n,e)&&(s[e]=t);return s}function A(e,a){let[t,s]=(0,n.useState)(null),l=!1;return(0,n.useEffect)(()=>{if(e.current&&!l){l=!0;let t=function(e,{targetOrigin:a="*",...t}={}){let n=!1,s=function(t,n){e.contentWindow?.postMessage(t,a,n)},l=new Promise(a=>{let l=t.signal?new b.z(t.signal):new AbortController;window.addEventListener("message",t=>{t.source===e.contentWindow&&t.data===g&&(n=!0,l.abort(),a())},{signal:l.signal}),l.signal.addEventListener("abort",()=>{a()},{once:!0}),s(h)});return d({send:(e,a)=>n?s(e,a):l.then(()=>{if(n)return s(e,a)}),listen(a,{signal:t}){self.addEventListener("message",t=>{t.source===e.contentWindow&&t.data!==g&&a(t.data)},{signal:t})}},t)}(e.current,{expose:a});v(t).then(s)}},[e.current]),t}function S(e){let[a,t]=(0,n.useState)(null),s=!1;return(0,n.useEffect)(()=>{let a=window.self!==window.top;if(a&&!s){s=!0;let a=function({targetOrigin:e="*",...a}={}){if("undefined"==typeof self||null==self.parent)throw Error("You are not inside an iframe, because there is no parent window.");let{parent:t}=self,n=a.signal?new b.z(a.signal):new AbortController,s=()=>{let n=()=>t.postMessage(g,e);self.addEventListener("message",({data:e})=>{e===h&&n()},{signal:a.signal}),n()};return"complete"===document.readyState?s():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(s(),n.abort())},{signal:n.signal}),d({send:(a,n)=>t.postMessage(a,e,n),listen(e,{signal:a}){self.addEventListener("message",a=>{a.data!==h&&e(a.data)},{signal:a})}},a)}({expose:e});w(a).then(t)}},[]),a}}}]);
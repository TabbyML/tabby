(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1662],{31662:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{default:function(){return M}});var o=r(57437),a=r(2265),i=r(48262),s=r(6435),l=r(20946),c=r(19567),u=r(30684),d=r(67060),f=r(88826),m=r(61230),h=r(72999),p=r(17052);let g=[(0,i.Eu)(),(0,i.AE)(),(0,p.sW)(),d.yy.allowMultipleSelections.of(!0),(0,u.nF)(u.R_,{fallback:!0}),(0,i.Zs)(),(0,u.mi)({markerDOM(e){let t=document.createElement("div");return t.style.cursor="pointer",e?t.innerHTML='<svg aria-hidden="true" focusable="false" role="img" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg>':t.innerHTML='<svg aria-hidden="true" focusable="false" role="img" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"></path></svg>',t}})];r(73662);let b=d.q6.define(),v=a.forwardRef((e,t)=>{let{value:r,theme:n,language:s,readonly:l=!0,extensions:c,height:p=null,width:v=null}=e,y=a.useRef(!1),x=a.useRef(null),[w,k]=a.useState(null),A=i.tk.theme({"&":{height:p,width:v,outline:"none !important",background:"hsl(var(--background))"},"& .cm-scroller":{height:"100% !important"},"& .cm-gutters":{background:"hsl(var(--background))"},"&.cm-focused .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"hsl(var(--cm-selection-bg)) !important"},".cm-selectionLayer .cm-selectionBackground":{backgroundColor:"hsl(var(--cm-selection-bg)) !important"}}),_=[A,g,d.yy.readOnly.of(l)],N=()=>{let e=(0,h.Z)([..._,(0,m.vf)(function(e,t){switch(e){case"javascript-typescript":return"tsx";case"shellscript":case"bash":return"shell";default:return e}}(s))]);return"dark"===n?(e.push(f.pD),e.push((0,u.nF)(f.VE))):e.push((0,u.nF)(u.R_)),Array.isArray(c)&&(e=e.concat(c)),e};return a.useEffect(()=>{(()=>{if(!y.current&&x.current){y.current=!0;let e=d.yy.create({doc:r,extensions:N()}),t=new i.tk({state:e,parent:x.current});k(t)}})()},[]),a.useEffect(()=>{w&&w.dispatch({effects:d.Py.reconfigure.of(N())})},[p,v,n,s,c]),a.useEffect(()=>{(()=>{if(void 0===r||!w)return;let e=w?w.state.doc.toString():"";w&&r!==e&&w.dispatch({changes:{from:0,to:e.length,insert:r||""},annotations:[b.of(!0)]})})()},[r]),a.useEffect(()=>()=>{w&&(w.destroy(),k(null))},[w]),a.useImperativeHandle(t,()=>({editorView:w}),[w]),(0,o.jsx)("div",{className:"codemirror-editor h-full",ref:x})});function y(e,t){let r=e.doc,{span:n,utf16_column_range:o}=t;try{let e=r.line(n.start.row+1),t=e.from+o.start,a=e.from+o.end;return{start:t,end:a}}catch(e){return null}}v.displayName="CodeMirrorEditor";let x=i.p.mark({class:"cm-tag-mark"}),w=i.tk.baseTheme({".cm-tag-mark":{border:"1px solid hsla(var(--tag-blue-border))",padding:"0px 4px",borderRadius:"4px",backgroundColor:"hsla(var(--tag-blue-bg))",color:"hsla(var(--tag-blue-text)) !important"},".cm-tag-mark > span":{color:"hsla(var(--tag-blue-text)) !important"}});function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.state.doc,n=r.length;if(!n)return i.p.none;let o=[];for(let r of t){let t=y(e.state,r);try{t&&t.start<=n&&t.end<=n&&o.push(x.range(t.start,t.end))}catch(e){}}return o.length?i.p.set(o):i.p.none}let A=e=>{let t=i.lg.fromClass(class{update(t){(t.docChanged||t.viewportChanged)&&(this.marks=k(t.view,e))}constructor(t){this.marks=k(t,e)}},{decorations:e=>e.marks});return[t,w]},_=i.p.mark({class:"cm-range-highlight"}),N=i.tk.baseTheme({".cm-range-highlight":{backgroundColor:"hsl(var(--selection))"}});function E(e,t){let r;let n=e.selection.ranges;e:for(let o of n)for(let n of t){let t=y(e,n);if(!t)continue;let a=t.start-n.name_range.start;if(o.from>=t.start&&o.to<=t.end){r={from:n.range.start+a,to:n.range.end+a};break e}}return r?i.p.set([_.range(r.from,r.to)]):i.p.none}let C=d.Py.define(),T=e=>{let t=i.lg.fromClass(class{update(t){if(t.selectionSet)this.triggerType="cursor",this.highlight=E(t.view.state,e);else if("cursor"!==this.triggerType)for(let e of t.transactions)for(let t of e.effects)t.is(C)&&t.value&&(this.highlight=t.value,this.triggerType="hover")}handleMouseListener(t){if(-1!==this.timeout&&clearTimeout(this.timeout),!this.highlight.size){let r=setTimeout(()=>{let r=this.view.posAtCoords({x:t.clientX,y:t.clientY});if(null!==r){let t=function(e,t){let r;for(let n of t)if(e>=n.name_range.start&&e<=n.name_range.end){r={from:n.range.start,to:n.range.end};break}return r?i.p.set([_.range(r.from,r.to)]):i.p.none}(r,e);if(t.size)this.triggerType="hover";else if("cursor"===this.triggerType)return;this.view.dispatch({effects:C.of(t)})}},100);this.timeout=r}}destroy(){}constructor(t){this.view=t,this.highlight=E(t.state,e),this.timeout=-1,this.triggerType="hover"}},{decorations:e=>e.highlight});return[t,N]},S=i.tk.baseTheme({".cm-tooltip":{border:"none !important"},".cm-tooltip-cursor":{backgroundColor:"hsl(var(--popover))",color:"hsl(var(--popover-foreground))",border:"none !important",padding:"2px 7px",borderRadius:"4px"}}),j=e=>[(0,i.bF)((t,r,n)=>{for(let n of e){let e=y(t.state,n);if(e&&r>=e.start&&r<=e.end)return{pos:r,above:!0,create(e){let t=document.createElement("div");return t.className="cm-tooltip-cursor",t.textContent="".concat(n.syntax_type_name),{dom:t,offset:{x:-20,y:4}}}}}return null}),S];var R=r(60681);let V=(0,R.Z)();var D=r(34040),L=r(16691),U=r.n(L),z=r(66566),Z=r(39311),G=r(93023),H=r(56434),B=r(84168);let K=e=>{let{className:t,...r}=e,n=e=>{V.emit("code_browser_quick_action",e)};return(0,o.jsxs)("div",{className:(0,Z.cn)("mt-2 flex items-center gap-2 rounded-md border bg-background px-2 py-1",t),...r,children:[(0,o.jsx)(U(),{src:z.Z,width:32,alt:"logo"}),(0,o.jsx)(G.z,{size:"sm",variant:"outline",onClick:e=>n("explain"),children:"Explain"}),(0,o.jsxs)(H.h_,{modal:!1,children:[(0,o.jsx)(H.$F,{asChild:!0,children:(0,o.jsxs)(G.z,{size:"sm",variant:"outline",children:["Generate",(0,o.jsx)(B.IconChevronUpDown,{className:"ml-1"})]})}),(0,o.jsxs)(H.AW,{align:"start",children:[(0,o.jsx)(H.Xi,{className:"cursor-pointer",onSelect:()=>n("generate_unittest"),children:"Unit Test"}),(0,o.jsx)(H.Xi,{className:"cursor-pointer",onSelect:()=>n("generate_doc"),children:"Documentation"})]})]})]})};var M=e=>{let{value:t,meta:r,language:u}=e,{theme:f}=(0,s.F)(),m=null==r?void 0:r.tags,h=a.useRef(null),p=(0,c.xG)(),g=a.useMemo(()=>{let e=[i.tk.baseTheme({".cm-scroller":{fontSize:"14px"},".cm-gutterElement":{padding:"0px 16px"},".cm-gutters":{paddingLeft:"32px",backgroundColor:"transparent",borderRight:"none"}}),(0,i.Uw)()];return l.B.value&&p&&e.push(d.QQ.define({create:()=>null,update(e,t){if(t.newSelection.main.empty)return clearTimeout(n),null;if(t.selection){if(function(e){let t=!!e.selection&&!e.selection.main.empty;return t&&e.isUserEvent("select")}(t)){let e=function(e){let{selection:t}=e,r=e.doc.lineAt(t.main.from),a=e.doc.lineAt(t.main.to),i=r.number!==a.number,s=i?a.from:t.main.from;return{pos:s,above:!1,strictSide:!0,arrow:!1,create(){let e=document.createElement("div");e.style.background="transparent",e.style.border="none";let t=D.createRoot(e);return e.onclick=e=>e.stopImmediatePropagation(),n&&clearTimeout(n),n=window.setTimeout(()=>{t.render((0,o.jsx)(K,{}))},1e3),{dom:e}}}}(t.state);return e}return clearTimeout(n),null}return e},provide:e=>i.hJ.compute([e],t=>t.field(e))})),t&&m&&e.push(A(m),j(m),T(m)),e},[t,m,h.current]);return a.useEffect(()=>{let e=e=>{var t;let r="";switch(e){case"explain":r="Explain the following code:";break;case"generate_unittest":r="Generate a unit test for the following code:";break;case"generate_doc":r="Generate documentation for the following code:"}let n=null===(t=h.current)||void 0===t?void 0:t.editorView,o=(null==n?void 0:n.state.doc.sliceString(null==n?void 0:n.state.selection.main.from,null==n?void 0:n.state.selection.main.to))||"",a="".concat(r,"\n","```").concat(null!=u?u:"","\n").concat(o,"\n","```","\n");a&&window.open("/playground?initialMessage=".concat(encodeURIComponent(a)))};return V.on("code_browser_quick_action",e),()=>{V.off("code_browser_quick_action",e)}},[]),(0,o.jsx)(v,{value:t,theme:f,language:u,readonly:!0,extensions:g,ref:h})}},56434:function(e,t,r){"use strict";r.d(t,{$F:function(){return l},AW:function(){return u},Ju:function(){return f},VD:function(){return m},Xi:function(){return d},h_:function(){return s}});var n=r(57437),o=r(2265),a=r(5782),i=r(39311);let s=a.fC,l=a.xz;a.ZA,a.Uv,a.Tr,a.Ee;let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.tu,{ref:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",r),...o})});c.displayName=a.tu.displayName;let u=o.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...s}=e;return(0,n.jsx)(a.Uv,{children:(0,n.jsx)(a.VY,{ref:t,sideOffset:o,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})});u.displayName=a.VY.displayName;let d=o.forwardRef((e,t)=>{let{className:r,inset:o,...s}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o&&"pl-8",r),...s})});d.displayName=a.ck.displayName;let f=o.forwardRef((e,t)=>{let{className:r,inset:o,...s}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",r),...s})});f.displayName=a.__.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...o})});m.displayName=a.Z0.displayName},20946:function(e,t,r){"use strict";r.d(t,{B:function(){return s},D:function(){return l}});var n=r(2265);let o=(e,t)=>{let[r,o]=(0,n.useState)(t),[a,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let t=localStorage.getItem(e);t&&o(JSON.parse(t)),i(!1)},[]),[r,t=>{o(t),localStorage.setItem(e,JSON.stringify(t))},a]};class a{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,r,n){this.storageKey=e,this.title=t,this.description=r,this.defaultValue=n}}let i=new class{defineGlobalVar(){return new a(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,r]=o(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:r},()=>{t(!e)}]}}constructor(e,t,r,n){this.storageKey="EXP_".concat(e),this.title=t,this.description=r,this.defaultValue=null!=n&&n}}("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!1),s=i.defineGlobalVar(),l=i.defineHook()},73662:function(){},66566:function(e,t){"use strict";t.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7844],{47844:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{default:function(){return K}});var i=n(36164),o=n(3546),l=n(30352),a=n(88105),s=n(74630),d=n(28242),c=n(93877),u=n(28312),m=n(11978),f=n(16784),h=n(74248),p=n(85312);function v(e,t){let n=e.doc,{span:r,utf16_column_range:i}=t;try{let e=n.line(r.start.row+1),t=e.from+i.start,o=e.from+i.end;return{start:t,end:o}}catch(e){return null}}let g=a.p.mark({class:"cm-tag-mark"}),x=a.tk.baseTheme({".cm-tag-mark":{border:"1px solid hsla(var(--tag-blue-border))",padding:"0px 4px",borderRadius:"4px",backgroundColor:"hsla(var(--tag-blue-bg))",color:"hsla(var(--tag-blue-text)) !important"},".cm-tag-mark > span":{color:"hsla(var(--tag-blue-text)) !important"}});function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.state.doc,r=n.length;if(!r)return a.p.none;let i=[];for(let n of t){let t=v(e.state,n);try{t&&t.start<=r&&t.end<=r&&i.push(g.range(t.start,t.end))}catch(e){}}return i.length?a.p.set(i):a.p.none}let w=e=>{let t=a.lg.fromClass(class{update(t){(t.docChanged||t.viewportChanged)&&(this.marks=b(t.view,e))}constructor(t){this.marks=b(t,e)}},{decorations:e=>e.marks});return[t,x]};var y=n(94559);let k=a.p.mark({class:"cm-range-highlight"}),_=a.tk.baseTheme({".cm-range-highlight":{backgroundColor:"hsl(var(--selection))"}});function j(e,t){let n;let r=e.selection.ranges;e:for(let i of r)for(let r of t){let t=v(e,r);if(!t)continue;let o=t.start-r.name_range.start;if(i.from>=t.start&&i.to<=t.end){n={from:r.range.start+o,to:r.range.end+o};break e}}return n?a.p.set([k.range(n.from,n.to)]):a.p.none}let C=y.Py.define(),N=e=>{let t=a.lg.fromClass(class{update(t){if(t.selectionSet)this.triggerType="cursor",this.highlight=j(t.view.state,e);else if("cursor"!==this.triggerType)for(let e of t.transactions)for(let t of e.effects)t.is(C)&&t.value&&(this.highlight=t.value,this.triggerType="hover")}handleMouseListener(t){if(-1!==this.timeout&&clearTimeout(this.timeout),!this.highlight.size){let n=setTimeout(()=>{let n=this.view.posAtCoords({x:t.clientX,y:t.clientY});if(null!==n){let t=function(e,t){let n;for(let r of t)if(e>=r.name_range.start&&e<=r.name_range.end){n={from:r.range.start,to:r.range.end};break}return n?a.p.set([k.range(n.from,n.to)]):a.p.none}(n,e);if(t.size)this.triggerType="hover";else if("cursor"===this.triggerType)return;this.view.dispatch({effects:C.of(t)})}},100);this.timeout=n}}destroy(){}constructor(t){this.view=t,this.highlight=j(t.state,e),this.timeout=-1,this.triggerType="hover"}},{decorations:e=>e.highlight});return[t,_]},L=a.tk.baseTheme({".cm-tooltip":{border:"none !important"},".cm-tooltip-cursor":{backgroundColor:"hsl(var(--popover))",color:"hsl(var(--popover-foreground))",border:"none !important",padding:"2px 7px",borderRadius:"4px"}}),M=e=>[(0,a.bF)((t,n,r)=>{for(let r of e){let e=v(t.state,r);if(e&&n>=e.start&&n<=e.end)return{pos:n,above:!0,create(e){let t=document.createElement("div");return t.className="cm-tooltip-cursor",t.textContent="".concat(r.syntax_type_name),{dom:t,offset:{x:-20,y:4}}}}}return null}),L];var E=n(27064),T=n(87279),S=n(42891),R=n.n(S),U=n(23342),X=n(31458),z=n(62202),A=n(81565);let Z=e=>{let{className:t,text:n,language:r,path:o,lineFrom:l,lineTo:a,gitUrl:s,...d}=e,c=e=>{E.u.emit("code_browser_quick_action",{action:e,code:n,language:r,path:o,lineFrom:l,lineTo:a,gitUrl:s})};return(0,i.jsxs)("div",{className:(0,h.cn)("mt-2 flex items-center gap-2 rounded-md border bg-background px-2 py-1",t),...d,children:[(0,i.jsx)(R(),{src:U.Z,width:32,alt:"logo"}),(0,i.jsx)(X.z,{size:"sm",variant:"outline",onClick:e=>c("explain"),children:"Explain"}),(0,i.jsxs)(z.h_,{modal:!1,children:[(0,i.jsx)(z.$F,{asChild:!0,children:(0,i.jsxs)(X.z,{size:"sm",variant:"outline",children:["Generate",(0,i.jsx)(A.IconChevronUpDown,{className:"ml-1"})]})}),(0,i.jsxs)(z.AW,{align:"start",children:[(0,i.jsx)(z.Xi,{className:"cursor-pointer",onSelect:()=>c("generate_unittest"),children:"Unit Test"}),(0,i.jsx)(z.Xi,{className:"cursor-pointer",onSelect:()=>c("generate_doc"),children:"Documentation"})]})]})]})},D=new class extends a.SJ{constructor(...e){super(...e),this.elementClass="cm-selectedLineGutter"}},P=y.Py.define(),B=y.QQ.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(P))return n.value;if(n.is(O))return(null==e?void 0:e.line)||(e={line:n.value}),{...e,endLine:n.value}}return e},provide:e=>[a.tk.decorations.compute([e],t=>{var n;let r=t.field(e);if(!r)return a.p.none;let i=null!==(n=r.endLine)&&void 0!==n?n:r.line,o=Math.min(r.line,i),l=Math.min(t.doc.lines,o===i?r.line:i),s=new y.f_;for(let e=o;e<=l;e++){let n=t.doc.line(e).from;s.add(n,n,a.p.line({class:"cm-selectedLine"}))}return s.finish()}),a.v7.compute([e],t=>{var n;let r=[],i=t.field(e);if(!i)return y.Xs.empty;let o=null!==(n=i.endLine)&&void 0!==n?n:i.line,l=Math.min(i.line,o),a=Math.min(t.doc.lines,l===o?i.line:o);for(let e=l;e<=a;e++){let n=t.doc.line(e).from;r.push(D.range(n))}return y.Xs.of(r)})]}),F=e=>{let{isMulti:t}=e;return(0,i.jsxs)(z.h_,{modal:!1,children:[(0,i.jsx)(z.$F,{asChild:!0,children:(0,i.jsx)(X.z,{className:"ml-1 h-5",size:"icon",variant:"secondary",children:(0,i.jsx)(A.IconMore,{})})}),(0,i.jsxs)(z.AW,{align:"start",children:[(0,i.jsx)(z.Xi,{className:"cursor-pointer",onSelect:()=>{E.u.emit("line_menu_action",{action:"copy_line"})},children:t?"Copy lines":"Copy line"}),(0,i.jsx)(z.Xi,{className:"cursor-pointer",onSelect:e=>{E.u.emit("line_menu_action",{action:"copy_permalink"})},children:"Copy permalink"})]})]})},H=new class extends a.SJ{toDOM(){let e=document.createElement("div"),t=T.createRoot(e);return t.render((0,i.jsx)(F,{isMulti:!1})),e}},Q=new class extends a.SJ{toDOM(){let e=document.createElement("div"),t=T.createRoot(e);return t.render((0,i.jsx)(F,{isMulti:!0})),e}},I=a.tk.theme({".cm-lineMenuGutter":{width:"40px"},".cm-lineNumbers":{userSelect:"none",cursor:"pointer",color:"var(--line-number-color)","& .cm-gutterElement:hover":{textDecoration:"underline"}}});function J(e,t){let n=V(t,e.state.doc);return e.dispatch({effects:P.of(n?t:null)}),t}let O=y.Py.define(),G=e=>{let{onSelectLine:t}=e;return[I,B,(0,a.v5)({class:"cm-lineMenuGutter",markers:e=>(function(e){let t=e.state.field(B);if(!V(t,e.state.doc))return y.Xs.empty;if(null==t?void 0:t.line){let n=!!t.endLine&&t.line!==t.endLine,r=t.endLine?Math.min(t.line,t.endLine):t.line,i=e.state.doc.line(r).from;return y.Xs.empty.update({add:[n?Q.range(i):H.range(i)]})}return y.Xs.empty})(e),initialSpacer:()=>H,domEventHandlers:{mousedown(e,t,n){let r=e.state.doc.lineAt(t.from),i=r.number;return e.dispatch({effects:n.shiftKey?O.of(i):P.of({line:i})}),!0}}}),(0,a.Eu)({domEventHandlers:{mousedown(e,n,r){let i=e.state.doc.lineAt(n.from).number;return e.dispatch({effects:r.shiftKey?O.of(i):P.of({line:i})}),null==t||t(function(e){if(!e)return;let{line:t,endLine:n}=e;return t&&n?t===n?{line:t}:{line:Math.min(t,n),endLine:Math.max(t,n)}:t?{line:t}:void 0}(e.state.field(B))),!1}}})]};function V(e,t){if(!t)return!1;let{lines:n}=t;return(null==e||!e.line||!(e.line>n))&&(null==e||!e.endLine||!(e.endLine>n))}var $=n(53585),W=n(48048);n(85223);var Y=n(63484),K=e=>{var t,n,v;let{value:g,language:x}=e,{theme:b}=(0,d.F)(),k=o.useMemo(()=>[],[]),{copyToClipboard:_}=(0,u.m)({}),[j,C]=function(){let e=(0,m.useParams)(),[t,n]=o.useState(""),r=(0,f.d)(t),i=o.useCallback(e=>{window.location.hash=e},[]),l=()=>{let e=window.location.hash;r.current!==e&&n(e)};return o.useEffect(()=>(window.addEventListener("hashchange",l),()=>{window.removeEventListener("hashchange",l)}),[]),o.useEffect(l,[e]),[t,i]}(),L=null===(t=(0,W.kQ)(j))||void 0===t?void 0:t.start,S=null===(n=(0,W.kQ)(j))||void 0===n?void 0:n.end,[R,U]=o.useState(null),{isChatEnabled:X,activePath:z,activeEntryInfo:A,activeRepo:D,activeRepoRef:P}=o.useContext($.SourceCodeBrowserContext),{basename:B}=A,F=null!==(v=null==D?void 0:D.gitUrl)&&void 0!==v?v:"",H=o.useMemo(()=>{let e=[G({onSelectLine:e=>{if(!e){C("");return}C((0,h.nO)({start:e.line,end:e.endLine}))}}),(0,l.mi)({markerDOM(e){let t=document.createElement("div");return t.style.cursor="pointer",e?t.innerHTML='<svg aria-hidden="true" focusable="false" role="img" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg>':t.innerHTML='<svg aria-hidden="true" focusable="false" role="img" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom; overflow: visible;"><path d="M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"></path></svg>',t}}),(0,a.Uw)()];if(c.BT.value&&X&&z&&B){var t;e.push((t={language:x,path:B,gitUrl:F},y.QQ.define({create:()=>null,update(e,n){if(n.newSelection.main.empty)return clearTimeout(r),null;if(n.selection){if(function(e){let t=!!e.selection&&!e.selection.main.empty;return t&&e.isUserEvent("select")}(n)){let e=function(e,t){let{selection:n}=e,o=e.doc.lineAt(n.main.from),l=e.doc.lineAt(n.main.to),a=o.number!==l.number,s=a?l.from:n.main.from,d=e.doc.sliceString(e.selection.main.from,e.selection.main.to)||"";return{pos:s,above:!1,strictSide:!0,arrow:!1,create(){let e=document.createElement("div");e.style.background="transparent",e.style.border="none";let n=T.createRoot(e);return e.onclick=e=>e.stopImmediatePropagation(),r&&clearTimeout(r),r=window.setTimeout(()=>{n.render((0,i.jsx)(Z,{text:d,language:null==t?void 0:t.language,lineFrom:o.number,lineTo:l.number,path:null==t?void 0:t.path,gitUrl:null==t?void 0:t.gitUrl}))},1e3),{dom:e}}}}(n.state,t);return e}return clearTimeout(r),null}return e},provide:e=>a.hJ.compute([e],t=>t.field(e))})))}return g&&k&&e.push(w(k),M(k),N(k)),e},[g,k,x]);return o.useEffect(()=>{let e=e=>{if("number"==typeof L){if("copy_permalink"===e.action){var t,n,r;let e=(0,W.I)(D,null!==(n=null==P?void 0:null===(t=P.ref)||void 0===t?void 0:t.commit)&&void 0!==n?n:null==P?void 0:P.name,null!==(r=A.basename)&&void 0!==r?r:"",(0,W.BX)(A.viewMode)),i=new URL("".concat(window.location.origin,"/files/").concat(e));(0,W.p4)(window.location.hash)&&(i.hash=window.location.hash);let o=A.basename?(0,Y.U$)(A.basename)[0]:void 0;"markdown"===o&&i.searchParams.set("plain","1"),_(i.toString());return}if("copy_line"===e.action){let e,t;if(!R)return;let n=R.state.doc.line(L);if(S&&(t=R.state.doc.line(S)),n&&t&&n.number<=t.number){let r=n.from,i=t.to;e=R.state.doc.slice(r,i).toString()}else n&&(e=n.text);e&&_(e)}}};return E.u.on("line_menu_action",e),()=>{E.u.off("line_menu_action",e)}},[g,L,S,R]),o.useEffect(()=>{if(!(0,s.Z)(L)&&R&&g)try{var e,t,n,r;let i=null==R?void 0:null===(t=R.state)||void 0===t?void 0:null===(e=t.doc)||void 0===e?void 0:e.line(L),o=(0,s.Z)(S)?null:null==R?void 0:null===(r=R.state)||void 0===r?void 0:null===(n=r.doc)||void 0===n?void 0:n.line(S);if(i){let e=i.number,t=null==o?void 0:o.number;if(J(R,{line:e,endLine:t}),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.domAtPos(t).node,i=3===r.nodeType?r.parentElement:r;if(i){let e=i.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight;return e.top>=n&&e.bottom<=t}return!1}(R,i.from,90))return;R.dispatch({effects:a.tk.scrollIntoView(i.from,{y:"start",yMargin:200})})}}catch(e){}return()=>{R&&J(R,null)}},[g,L,R]),(0,i.jsx)(p.Z,{value:g,theme:b,language:x,readonly:!0,extensions:H,viewDidUpdate:e=>U(e)})}},62202:function(e,t,n){"use strict";n.d(t,{$F:function(){return s},AW:function(){return c},Ju:function(){return m},VD:function(){return f},Xi:function(){return u},h_:function(){return a}});var r=n(36164),i=n(3546),o=n(19148),l=n(74248);let a=o.fC,s=o.xz;o.ZA,o.Uv,o.Tr,o.Ee;let d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(o.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...i})});d.displayName=o.tu.displayName;let c=i.forwardRef((e,t)=>{let{className:n,sideOffset:i=4,...a}=e;return(0,r.jsx)(o.Uv,{children:(0,r.jsx)(o.VY,{ref:t,sideOffset:i,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})})});c.displayName=o.VY.displayName;let u=i.forwardRef((e,t)=>{let{className:n,inset:i,...a}=e;return(0,r.jsx)(o.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",n),...a})});u.displayName=o.ck.displayName;let m=i.forwardRef((e,t)=>{let{className:n,inset:i,...a}=e;return(0,r.jsx)(o.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",i&&"pl-8",n),...a})});m.displayName=o.__.displayName;let f=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(o.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",n),...i})});f.displayName=o.Z0.displayName},85223:function(){}}]);
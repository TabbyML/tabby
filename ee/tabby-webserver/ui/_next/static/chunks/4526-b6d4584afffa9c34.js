(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4526],{72657:function(e,n,t){"use strict";t.d(n,{K:function(){return o}});var r=t(36164);t(3546);var s=t(12624),a=t(73492),i=t(31458),l=t(81565);function o(e){let{className:n,container:t,offset:o,...c}=e,d=(0,s.e)(o||0,t);return(0,r.jsxs)(i.z,{variant:"outline",size:"icon",className:(0,a.cn)("absolute right-4 top-1 z-10 bg-background transition-opacity duration-300 sm:right-8 md:top-2",d?"opacity-0":"opacity-100",n),onClick:()=>{t?t.scrollTo({top:t.scrollHeight,behavior:"smooth"}):window.scrollTo({top:document.body.offsetHeight,behavior:"smooth"})},...c,children:[(0,r.jsx)(l.IconArrowDown,{}),(0,r.jsx)("span",{className:"sr-only",children:"Scroll to bottom"})]})}},74787:function(e,n,t){"use strict";t.d(n,{GV:function(){return h},Gn:function(){return c},HV:function(){return u},K:function(){return x},U7:function(){return f},_t:function(){return p},db:function(){return m},xe:function(){return d}});var r=t(36164),s=t(31745),a=t(89502),i=t(74038),l=t(73492),o=t(81565);function c(e){let n=(0,l.eo)(e.filepath).filepath,t={fileItem:e,name:(0,l.UA)(n),filepath:n,category:"file",icon:(0,r.jsx)(o.IconFile,{})};try{return{id:JSON.stringify(e.filepath),...t}}catch(e){return{id:(0,l.x0)(),...t}}}function d(e){let n=(0,l.eo)(e.filepath).filepath;return{category:"symbol",id:e.label,name:e.label,filepath:n,fileItem:e,icon:(0,r.jsx)(s.Z,{className:"h-4 w-4"})}}function u(e){let n,t=e;for(;null!==(n=i.My.exec(e));)try{let e=n[1],r=JSON.parse(e),s=m(r),a=(0,l.UA)(s);t=t.replace(n[0],"@".concat(a))}catch(e){continue}for(;null!==(n=i.nk.exec(e));)try{let e=n[1],r=JSON.parse(e),s=r.label||"";t=t.replace(n[0],"@".concat(s))}catch(e){continue}return t}function m(e){return"filepath"in e?e.filepath:e.uri}function p(e,n){let t;let r=[],s=0,a=/\[\[(file|contextCommand|symbol|source):(.+?)\]\]/g;for(;null!==(t=a.exec(e));){let[a,i,o]=t,c=t.index;c>s&&r.push({type:"text",text:e.slice(s,c)});try{switch(i){case"file":{let e=JSON.parse(o),n=(0,l.UA)("uri"in e?e.uri:e.filepath);r.push({type:"mention",attrs:{category:"file",fileItem:{filepath:e},label:n}});break}case"symbol":{let e=JSON.parse(o),n=e.label||"";r.push({type:"mention",attrs:{category:"symbol",fileItem:e,label:n}});break}case"contextCommand":o&&o.trim()&&r.push({type:"mention",attrs:{category:"command",command:o.trim(),label:o.trim()}});break;case"source":{let e=n.find(e=>e.sourceId===o);e&&r.push({type:"text",text:e.sourceName})}}}catch(e){}s=c+a.length}return s<e.length&&r.push({type:"text",text:e.slice(s)}),r}function f(e){let n=[];return e.state.doc.descendants(e=>{"mention"===e.type.name&&n.push(e.attrs)}),n}function x(e){return{id:e.id,name:e.name,category:"command",command:e.command,description:e.description,icon:(0,r.jsx)(a.Z,{className:"h-4 w-4"})}}function h(){return{id:"changes",name:"changes",command:"changes",description:"Adding git diff changes into context"}}},21008:function(e,n,t){"use strict";t.d(n,{o:function(){return a}});var r=t(36164),s=t(73492);function a(e){let{range:n,className:t,prefix:a=":"}=e;if(!n)return null;let i=n.end-n.start>1;return(0,r.jsx)("span",{className:(0,s.cn)("text-muted-foreground",t),children:i?"".concat(a).concat(n.start,"-").concat(n.end):"".concat(a).concat(n.start)})}},83171:function(e,n,t){"use strict";t.d(n,{fh:function(){return x},pf:function(){return m},t:function(){return p}});var r=t(36164),s=t(3546),a=t(2435),i=t(74038),l=t(18500),o=t(73492),c=t(66790),d=t(81565),u=t(74787);function m(e){let{kind:n,label:t,className:s}=e;return(0,r.jsxs)(a.T5,{as:"span",className:(0,o.cn)("source-mention rounded-sm px-1",s),children:[(0,r.jsx)(f,{kind:n,className:"self-center"}),(0,r.jsx)("span",{className:"whitespace-nowrap",children:t})]})}function p(e){let{kind:n,label:t,id:s}=e.node.attrs;return(0,r.jsx)(m,{kind:n,label:t,id:s})}function f(e){let{kind:n,...t}=e;switch(n){case l.ri.Doc:return(0,r.jsx)(d.IconEmojiBook,{...t});case l.ri.Web:return(0,r.jsx)(d.IconEmojiGlobe,{...t});case l.ri.Git:return(0,r.jsx)(d.IconCode,{...t});case l.ri.Github:return(0,r.jsx)(d.IconGitHub,{...t});case l.ri.Gitlab:return(0,r.jsx)(d.IconGitLab,{...t});case l.ri.Ingested:return(0,r.jsx)(d.IconFolderUp,{...t});default:return null}}function x(e){let{message:n,sources:t,className:a}=e,l=(0,s.useMemo)(()=>{if(!n)return null;let e=(0,c.Tu)(n),a=e.split(i.zf).map((e,n)=>{if(n%2==1){let s=e.replace(/\\/g,""),a=null==t?void 0:t.find(e=>e.sourceId===s);return a?(0,r.jsx)(m,{id:a.sourceId,kind:a.sourceKind,label:a.sourceName,className:"rounded-md border border-[#b3ada0] border-opacity-30 bg-[#e8e1d3] py-[1px] text-sm dark:bg-[#333333]"},"source-".concat(n)):null}return e}),l=a.map((e,n)=>{if(!e||s.isValidElement(e))return e;let t=e;return(t=(t=t.replace(i.Bt,(e,n)=>{try{if(n.startsWith("{")&&n.endsWith("}")){let e=JSON.parse(n),t=(0,u.db)(e),r=(0,o.UA)(t);return"@".concat(r)}return n}catch(n){return e}})).replace(i.vY,(e,n)=>{try{if(n.startsWith("{")&&n.endsWith("}")){let e=JSON.parse(n);if(e.label)return"@".concat(e.label);let t=(0,u.db)(e.filepath),r=(0,o.UA)(t),s=e.range?":".concat(e.range.start,"-").concat(e.range.end):"";return"@".concat(r).concat(s)}return n}catch(n){return e}})).replace(i.qv,(e,n)=>"@".concat(n.replace(/"/g,"")))});return l},[t,n]);return(0,r.jsx)("div",{className:(0,o.cn)(a),children:l})}},64219:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(36164),s=t(3546),a=t(62226),i=t.n(a),l=t(6797),o=t.n(l),c=t(74630),d=t(66686),u=t(73492),m=t(89811),p=t(63795),f=t(81565),x=t(52569);function h(e){var n;let{relevantDocument:t,enableDeveloperMode:a,onLinkClick:i}=e,l=(0,u.Jd)(t),o=(0,u.XK)(t),d=(0,u.j9)(t),p=(0,u._n)(t),x=(0,u.Rx)(t),h=d?void 0:x?t.ingestedDocLink:t.link,b=d?(0,r.jsxs)("span",{children:["Commit",(0,r.jsx)("span",{title:t.sha,className:"mb-1 ml-1 rounded bg-muted px-1 py-0.5",children:t.sha.slice(0,7)})]}):t.title,N=(0,s.useMemo)(()=>{if(!h)return null;try{return new URL(h,p?window.location.origin:void 0)}catch(e){return null}},[h,p]),w=(0,u.LM)(t)||(0,u._n)(t)||(0,u.Rx)(t)?void 0:t.author,k=null==t?void 0:null===(n=t.extra)||void 0===n?void 0:n.score;return(0,r.jsx)("div",{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",children:(0,r.jsxs)("div",{className:"flex w-full flex-col gap-y-1 text-sm",children:[(!!N||p||x)&&(0,r.jsx)("div",{className:"m-0 flex items-center space-x-1 text-xs leading-none text-muted-foreground",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.IconBookOpen,{className:"m-0 mr-1 leading-none"}),(0,r.jsx)("p",{className:"m-0 leading-none",children:"Pages"})]}):x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.IconFolderUp,{className:"m-0 mr-1 leading-none"}),(0,r.jsx)("p",{className:"m-0 leading-none",children:"Ingestion"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.V,{hostname:N.hostname,className:"m-0 mr-1 leading-none"}),(0,r.jsx)("p",{className:"m-0 leading-none",children:N.hostname})]})}),(0,r.jsx)("p",{className:(0,u.cn)("m-0 font-bold leading-none",{"cursor-pointer transition-opacity hover:opacity-70":!!h}),onClick:()=>{h&&(null==i||i(h))},children:b}),(0,r.jsxs)("div",{className:"mb-2 w-auto",children:[l&&(0,r.jsx)(v,{closed:t.closed,user:w}),o&&(0,r.jsx)(g,{merged:t.merged,user:w}),d&&(0,r.jsx)(j,{user:w})]}),(0,r.jsx)("p",{className:"m-0 line-clamp-4 leading-none",children:y((0,u.cx)(t))}),!!a&&!(0,c.Z)(k)&&(0,r.jsxs)("p",{className:"mt-4",children:["Score: ",k]})]})})}function g(e){let{merged:n,user:t}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(N,{merged:n}),(0,r.jsx)("div",{className:"flex flex-1 items-center gap-1.5",children:!!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Yt,{user:t,className:"not-prose h-5 w-5 shrink-0"}),(0,r.jsx)("span",{className:"font-semibold text-muted-foreground",children:t.name||t.email})]})})]})}function v(e){let{closed:n,user:t}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(b,{closed:n}),(0,r.jsx)("div",{className:"flex flex-1 items-center gap-1.5",children:!!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Yt,{user:t,className:"not-prose h-5 w-5 shrink-0"}),(0,r.jsx)("span",{className:"font-semibold text-muted-foreground",children:t.name||t.email})]})})]})}function j(e){let{user:n}=e;return(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)("div",{className:"flex flex-1 items-center gap-1.5",children:!!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Yt,{user:n,className:"not-prose h-5 w-5 shrink-0"}),(0,r.jsx)("span",{className:"font-semibold text-muted-foreground",children:n.name||n.email})]})})})}function b(e){let{closed:n}=e;return(0,r.jsxs)(p.C,{variant:n?"default":"secondary",className:"shrink-0 gap-1 py-1 text-xs",children:[n?(0,r.jsx)(f.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,r.jsx)(f.IconCircleDot,{className:"h-3.5 w-3.5"}),n?"Closed":"Open"]})}function N(e){let{merged:n}=e;return(0,r.jsxs)(p.C,{variant:n?"default":"secondary",className:"shrink-0 gap-1 py-1 text-xs",children:[n?(0,r.jsx)(f.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,r.jsx)(f.IconGitPullRequest,{className:"h-3.5 w-3.5"}),n?"Merged":"Open"]})}let y=e=>{let n=i().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),t=d.TU.parse(n),r=o().decode(t),s=r.replace(/<\/?[^>]+(>|$)/g,"");return s}},22507:function(e,n,t){"use strict";t.d(n,{m:function(){return D},J:function(){return Y}});var r=t(36164),s=t(3546),a=t(1853),i=t(38370),l=t(74630),o=t(44170),c=t(96310),d=t(77851),u=t(36982),m=t(17734),p=t(73492),f=t(90615),x=t(73033);t(80804);var h=t(31745),g=t(89502),v=t(21808),j=t(74038),b=t(83171),N=t(81565),y=t(3448),w=t(94240),k=t(94744),C=t(37064),I=t(83008),z=t(28312),A=t(31458),E=t(29);let F=["sh","bash","zsh","fish","csh","tcsh","ksh","dash","cmd","powershell","pwsh","shell"],L=(0,s.memo)(e=>{let{language:n,value:t,onCopyContent:a,onApplyInEditor:i,isStreaming:l,supportsOnApplyInEditorV2:o,runShell:c}=e,[d,u]=(0,s.useState)(!1),{isCopied:m,copyToClipboard:p}=(0,z.m)({timeout:2e3,onCopyContent:a});return(0,r.jsxs)("div",{className:"codeblock relative w-full bg-zinc-950 font-sans",children:[(0,r.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100",children:[(0,r.jsx)("span",{className:"text-xs lowercase",children:n}),(0,r.jsx)("div",{className:"flex min-h-[2rem] items-center space-x-1",children:!l&&(0,r.jsxs)(r.Fragment,{children:[c&&F.includes(n.toLowerCase())&&(0,r.jsxs)(E.u,{children:[(0,r.jsx)(E.aJ,{asChild:!0,children:(0,r.jsxs)(A.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{c&&F.includes(n.toLowerCase())&&c(t)},children:[(0,r.jsx)(w.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Run Command"})]})}),(0,r.jsx)(E._v,{children:(0,r.jsx)("p",{className:"m-0",children:"Run Command"})})]}),(0,r.jsxs)(E.u,{children:[(0,r.jsx)(E.aJ,{asChild:!0,children:(0,r.jsx)(A.z,{size:"icon",variant:"ghost",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>u(!d),children:d?(0,r.jsx)(N.IconAlignJustify,{}):(0,r.jsx)(N.IconWrapText,{})})}),(0,r.jsx)(E._v,{children:(0,r.jsx)("p",{className:"m-0",children:"Toggle word wrap"})})]}),o&&i&&!(c&&F.includes(n.toLowerCase()))&&(0,r.jsxs)(E.u,{children:[(0,r.jsx)(E.aJ,{asChild:!0,children:(0,r.jsxs)(A.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>i(t,{languageId:n,smart:!0}),children:[(0,r.jsx)(N.IconSmartApplyInEditor,{}),(0,r.jsx)("span",{className:"sr-only",children:"Smart Apply in Editor"})]})}),(0,r.jsx)(E._v,{children:(0,r.jsx)("p",{className:"m-0",children:"Smart Apply in Editor"})})]}),i&&!(c&&F.includes(n.toLowerCase()))&&(0,r.jsxs)(E.u,{children:[(0,r.jsx)(E.aJ,{asChild:!0,children:(0,r.jsxs)(A.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>i(t,void 0),children:[(0,r.jsx)(N.IconApplyInEditor,{}),(0,r.jsx)("span",{className:"sr-only",children:"Apply in Editor"})]})}),(0,r.jsx)(E._v,{children:(0,r.jsx)("p",{className:"m-0",children:"Apply in Editor"})})]}),(0,r.jsxs)(E.u,{children:[(0,r.jsx)(E.aJ,{asChild:!0,children:(0,r.jsxs)(A.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{m||p(t)},children:[m?(0,r.jsx)(N.IconCheck,{}):(0,r.jsx)(N.IconCopy,{}),(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,r.jsx)(E._v,{children:(0,r.jsx)("p",{className:"m-0",children:"Copy"})})]})]})})]}),(0,r.jsx)(k.Z,{language:"toml"===n?"bash":n,style:I.RY,PreTag:"div",showLineNumbers:!0,wrapLongLines:d,customStyle:{margin:0,width:"100%",background:"transparent",padding:"1.5rem 1rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},renderer:e=>{let{rows:n,stylesheet:t,useInlineStyles:r}=e;return n.map((e,n)=>{let s=e.children,a=null==s?void 0:s.shift();return a&&(e.children=[a,{children:s,properties:{className:[]},tagName:"span",type:"element"}]),(0,C.ZP)({node:e,stylesheet:t,useInlineStyles:r,key:n})})},children:t})]})});L.displayName="CodeBlock";let S=(0,s.createContext)({});function Z(e){var n;let{inline:t,className:a,children:i,...l}=e,{lookupSymbol:o,openInEditor:c,isStreaming:d,onApplyInEditor:u,onCopyContent:m,supportsOnApplyInEditorV2:f,symbolPositionMap:x,runShell:h}=(0,s.useContext)(S),g=null===(n=i[0])||void 0===n?void 0:n.toString(),v=g?x.get(g):void 0;if((0,s.useEffect)(()=>{t&&o&&g&&o(g)},[t,g,o]),i.length){if("▍"===i[0])return(0,r.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});i[0]=i[0].replace("`▍`","▍")}if(t){let e=!!(null==v?void 0:v.target);return(0,r.jsxs)("code",{className:(0,p.cn)("group/symbol",a,{symbol:!!o,"bg-muted leading-5 py-0.5":!!o&&!e,"space-x-1 cursor-pointer hover:bg-muted/50 border whitespace-nowrap align-middle py-0.5":e}),onClick:()=>{e&&c&&(null==v?void 0:v.target)&&c(v.target)},...l,children:[e&&(0,r.jsx)(N.IconSquareChevronRight,{className:"relative -top-px inline-block h-3.5 w-3.5 text-primary"}),(0,r.jsx)("span",{className:(0,p.cn)("whitespace-normal",{"group-hover/symbol:text-primary":e}),children:i})]})}let j=/language-(\w+)/.exec(a||"");return(0,r.jsx)(L,{language:j&&j[1]||"",value:String(i).replace(/\n$/,""),onApplyInEditor:u,onCopyContent:m,isStreaming:d,supportsOnApplyInEditorV2:f,runShell:h})}var O=t(70749);function R(e){let{tagNames:n}=e,t=function(e){let n=e.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|");return RegExp("<(/?)(?!/?(".concat(n,"))([^>]*)(?=[\\t\\n\\f\\r />])"),"gi")}(n);return function(e){return(0,O.Vn)(e,"raw",e=>{e.value=e.value.replace(t,"&lt;$2$3")}),e}}var M=t(64219);function Y(e){let{message:n,headline:t=!1,attachmentDocs:f,attachmentClientCode:h,attachmentCode:g,onApplyInEditor:b,onCopyContent:N,contextInfo:y,fetchingContextInfo:w,className:k,isStreaming:C,onLookupSymbol:I,openInEditor:z,supportsOnApplyInEditorV2:A,activeSelection:E,runShell:F,...L}=e,[O,M]=(0,s.useState)(new Map),Y=(0,s.useMemo)(()=>{var e,n,t;let r=null!==(e=null==f?void 0:f.map(e=>({type:"doc",data:e})))&&void 0!==e?e:[],s=null!==(n=null==h?void 0:h.map(e=>({type:"code",data:e})))&&void 0!==n?n:[],i=null!==(t=null==g?void 0:g.map(e=>({type:"code",data:e})))&&void 0!==t?t:[];return(0,a.Z)([...r,...s,...i])},[f,h,g]),D=e=>{let n=[],s=0,a=[],i=(n,t,r)=>{let s;for(n.lastIndex=0;null!==(s=n.exec(e));)a.push({pattern:n,Component:t,getProps:r,match:s})};for(let{match:o,Component:c,getProps:d}of(i(j.Hc,_,e=>{let n=parseInt(e[1],10),t=(0,l.Z)(n)?void 0:null==Y?void 0:Y[n-1],r=null==t?void 0:t.type,s=t&&!(0,l.Z)(n);return{citationIndex:n,showcitation:s,citationType:r,citationSource:t}}),i(j.zf,G,e=>{let n=e[1];return{sourceId:n,className:t?"text-[1rem] font-semibold":void 0}}),i(j.Bt,J,e=>{let n=e[1];try{return{encodedFilepath:n,openInEditor:z}}catch(e){return{}}}),i(j.vY,V,e=>{let n=e[1];return{encodedSymbol:n,openInEditor:z}}),i(j.qv,P,e=>{let n=e[1];return{encodedCommand:n}}),a.sort((e,n)=>e.match.index-n.match.index),a))o.index>=s&&(o.index>s&&n.push(e.slice(s,o.index)),n.push((0,r.jsx)(c,{...d(o)},o.index)),s=o.index+o[0].length);return s<e.length&&n.push(e.slice(s)),n},T=async e=>{if(!I||O.has(e))return;M(n=>new Map(n.set(e,null)));let n=[];null==h||h.forEach(e=>{var t;n.push({filepath:(0,p.hL)({filepath:e.filepath,baseDir:e.baseDir,gitUrl:e.gitUrl,commit:null!==(t=e.commit)&&void 0!==t?t:void 0}),location:(0,p.OV)(e)})});let t=await I(e,n);M(n=>new Map(n.set(e,t)))},H=(0,s.useMemo)(()=>{let e=(0,p.H4)(n,v.ki);return(0,p.M0)(e)},[n]);return(0,r.jsx)(S.Provider,{value:{onCopyContent:N,onApplyInEditor:b,onCodeCitationClick:L.onCodeCitationClick,onLinkClick:L.onLinkClick,contextInfo:y,fetchingContextInfo:!!w,isStreaming:!!C,supportsOnApplyInEditorV2:A,activeSelection:E,symbolPositionMap:O,lookupSymbol:I?T:void 0,openInEditor:z,runShell:F},children:(0,r.jsx)(x.s,{className:(0,p.cn)("message-markdown prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",{"cursor-default":!!b},k),remarkPlugins:[u.Z,m.Z],rehypePlugins:[[R,{tagNames:(0,i.Z)([v.ki,v.GI])}],o.Z,[c.Z,{...d.R,tagNames:(0,i.Z)([d.R.tagNames,v.ki,v.GI])}]],components:{think:e=>{let{children:n}=e;return(0,r.jsx)(U,{children:n})},p(e){let{children:n}=e;return(0,r.jsx)("p",{className:"mb-2 last:mb-0",children:n.map((e,n)=>"string"==typeof e?e.split("\n").map((e,n)=>(0,r.jsxs)(s.Fragment,{children:[n>0&&(0,r.jsx)("br",{}),D(e)]},n)):(0,r.jsx)("span",{children:e},n))})},li(e){let{children:n}=e;return n&&n.length?(0,r.jsx)("li",{children:n.map((e,n)=>"string"==typeof e?D(e):(0,r.jsx)("span",{children:e},n))}):(0,r.jsx)("li",{children:n})},code(e){let{node:n,inline:t,className:s,children:a,...i}=e;return(0,r.jsx)(Z,{node:n,inline:t,className:s,...i,children:a})},hr:()=>null},children:H})})}function D(e){let{error:n="Failed to fetch"}=e,t=(0,s.useMemo)(()=>"```\n"+JSON.stringify({error:!0,message:n},null,2)+"\n```",[n]);return(0,r.jsx)(x.s,{className:"prose-full-width prose break-words text-sm dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[u.Z,m.Z],components:{code(e){let{node:n,inline:t,className:s,children:a,...i}=e;return(0,r.jsx)("div",{...i,className:(0,p.cn)(s,"bg-zinc-950 p-2"),children:a})}},children:t})}function U(e){let{children:n}=e;return(0,r.jsxs)("details",{open:!0,className:"\n        my-4 w-full rounded-md border border-gray-300 bg-white \n        p-3 text-sm text-gray-800\n        dark:border-zinc-700 dark:bg-zinc-900 dark:text-gray-100\n      ",children:[(0,r.jsx)("summary",{className:"\n          cursor-pointer list-none font-semibold text-gray-600 \n          outline-none dark:text-gray-300\n        ",children:"Thinking"}),(0,r.jsx)("div",{className:"mt-2 whitespace-pre-wrap leading-relaxed",children:n})]})}function _(e){let{citationIndex:n,showcitation:t,citationType:s,citationSource:a}=e;return(0,r.jsx)("span",{children:t&&(0,r.jsx)(r.Fragment,{children:"doc"===s?(0,r.jsx)(T,{relevantDocument:a.data,citationIndex:n}):"code"===s?(0,r.jsx)(H,{relevantCode:a.data,citationIndex:n}):null})})}function G(e){var n;let{sourceId:t,className:a}=e,{contextInfo:i,fetchingContextInfo:l}=(0,s.useContext)(S);if(!t)return null;let o=null==i?void 0:null===(n=i.sources)||void 0===n?void 0:n.find(e=>e.sourceId===t);return o?(0,r.jsx)("span",{className:"node-mention",children:(0,r.jsx)("span",{children:l?(0,r.jsx)(y.O,{className:"w-16"}):(0,r.jsx)(b.pf,{id:o.sourceId,label:o.sourceName,kind:o.sourceKind,className:a})})}):null}function J(e){let{encodedFilepath:n,openInEditor:t,className:a}=e,i=(0,s.useMemo)(()=>{if(!n)return null;try{let e=decodeURIComponent(n),t=JSON.parse(e);return t}catch(e){return null}},[n]),l=(0,s.useMemo)(()=>{if(i)return(0,p.eo)(i).filepath},[i]);return l?(0,r.jsxs)("span",{className:(0,p.cn)("symbol space-x-1 whitespace-nowrap border bg-muted py-0.5 align-middle leading-5",a,{"hover:bg-muted/50 cursor-pointer":!!t&&!!i}),onClick:()=>{t&&i&&t({filepath:i})},children:[(0,r.jsx)(N.IconFile,{className:"relative -top-px inline-block h-3.5 w-3.5"}),(0,r.jsx)("span",{className:(0,p.cn)("whitespace-normal font-medium"),children:(0,p.UA)(l)})]}):null}function V(e){let{encodedSymbol:n,openInEditor:t,className:a}=e,i=(0,s.useMemo)(()=>{if(!n)return null;try{let e=decodeURIComponent(n);return JSON.parse(e)}catch(e){return null}},[n]);return(null==i?void 0:i.label)?(0,r.jsxs)("span",{className:(0,p.cn)("symbol space-x-1 whitespace-nowrap border bg-muted py-0.5 align-middle leading-5",a,{"hover:bg-muted/50 cursor-pointer":!!t}),onClick:()=>{t&&i&&t({filepath:i.filepath,location:i.range})},children:[(0,r.jsx)(h.Z,{className:"relative -top-px inline-block h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"font-medium",children:i.label})]}):null}function P(e){let{encodedCommand:n,className:t}=e,a=(0,s.useMemo)(()=>{if(!n)return null;try{let e=decodeURIComponent(n);return e}catch(e){return null}},[n]);return(0,r.jsxs)("span",{className:(0,p.cn)("symbol space-x-1 whitespace-nowrap border bg-muted py-0.5 align-middle leading-5",t),children:[(0,r.jsx)(g.Z,{className:"relative inline-block h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"font-medium",children:a})]})}function T(e){let{relevantDocument:n,citationIndex:t}=e,{onLinkClick:a}=(0,s.useContext)(S),i=(0,s.useMemo)(()=>(0,p.j9)(n)?void 0:(0,p.Rx)(n)?n.ingestedDocLink:n.link,[n]);return(0,r.jsxs)(f.zs,{openDelay:100,closeDelay:100,children:[(0,r.jsx)(f.Yi,{children:(0,r.jsx)("span",{className:(0,p.cn)("relative -top-2 mr-0.5 inline-block h-4 w-4 rounded-full bg-muted text-center text-xs font-medium",{"cursor-pointer":!!i}),onClick:()=>{i&&(null==a||a(i))},children:t})}),(0,r.jsx)(f.bZ,{className:"w-[70vw] bg-background text-sm text-foreground dark:border-muted-foreground/60 sm:w-96",children:(0,r.jsx)(M.Z,{relevantDocument:n,onLinkClick:a})})]})}function H(e){var n,t;let{relevantCode:a,citationIndex:i}=e,{onCodeCitationClick:o}=(0,s.useContext)(S),c=(0,s.useMemo)(()=>({kind:"file",range:(0,p.OV)(a),filepath:a.filepath||"",content:a.content,gitUrl:""}),[a]),d=c.range&&!(0,l.Z)(null===(n=c.range)||void 0===n?void 0:n.start)&&!(0,l.Z)(null===(t=c.range)||void 0===t?void 0:t.end)&&c.range.start<c.range.end,u=(0,p.Cn)(c.filepath),m=(0,s.useMemo)(()=>(0,p.UA)(c.filepath),[c.filepath]),x=(0,s.useMemo)(()=>{if(!c.range)return;let e="";return c.range.start&&(e=String(c.range.start)),d&&(e+="-".concat(c.range.end)),e},[c.range]);return(0,r.jsxs)(f.zs,{openDelay:100,closeDelay:100,children:[(0,r.jsx)(f.Yi,{children:(0,r.jsx)("span",{className:"relative -top-2 mx-0.5 inline-block h-4 w-4 cursor-pointer rounded-full bg-muted text-center text-xs font-medium",onClick:()=>{null==o||o(a)},children:i})}),(0,r.jsx)(f.bZ,{className:"w-[70vw] overflow-x-hidden bg-background py-2 text-sm text-foreground dark:border-muted-foreground/60 sm:w-auto sm:max-w-[90vw] md:py-4 lg:w-96",collisionPadding:8,children:(0,r.jsxs)("div",{className:"cursor-pointer space-y-2 hover:opacity-70",onClick:()=>null==o?void 0:o(a),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden font-medium",children:[(0,r.jsx)(N.IconFileText,{className:"shrink-0"}),(0,r.jsxs)("span",{className:"flex-1 truncate",children:[(0,r.jsx)("span",{children:m}),x?(0,r.jsxs)("span",{className:"text-muted-foreground",children:[":",x]}):null]})]}),!!u&&(0,r.jsx)("div",{className:"break-all text-xs text-muted-foreground",children:u})]})})]})}},89811:function(e,n,t){"use strict";t.d(n,{V:function(){return c}});var r=t(36164),s=t(3546),a=t(42891),i=t.n(a),l={src:"/_next/static/media/default-favicon.a2df8fbb.png",height:16,width:16,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABAElEQVR42mOAAqaMgrXeIYlL2jwjF7WZey7wBolB5eyZotNX1PdMO/Br466r/89dfvx/w7aLv6LSlteDFem5zPPesPXir20Hbv7ftPfGrz9///969urL/xkLj/0KjlvqzZCct6rt9r3X/w+cvP/r8fOP/0Hg/uN3vzbsvPq/rmVzG0Nk+oq2J8/f///89devOw/f/n/7/uv/T19+/Dpx7uH/3NK1bQwMarO8tu66/Auk89qd17/mrzn/682H7//3H7rxi4FhsheDDYMhU0DC0vqde6/+On/lyf/5q878X7Tq9M+E7JX1cJ/4MpgzMajO9ApNXtoWl7mszc5nvhdMEgB1uZJfA01kRAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},o=t(73492);function c(e){let{hostname:n,className:t}=e,[a,c]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"relative h-3.5 w-3.5 shrink-0",children:[(0,r.jsx)(i(),{src:l,alt:n,width:14,height:14,className:(0,o.cn)("absolute left-0 top-0 z-0 h-3.5 w-3.5 rounded-full leading-none",t)}),(0,r.jsx)(i(),{src:"https://s2.googleusercontent.com/s2/favicons?sz=128&domain_url=".concat(n),alt:n,width:14,height:14,className:(0,o.cn)("relative z-10 h-3.5 w-3.5 rounded-full bg-card leading-none",t,{"opacity-0":!a}),onLoad:()=>{c(!0)}})]})}},37034:function(e,n,t){"use strict";t.d(n,{k:function(){return i}});var r=t(36164),s=t(18500),a=t(81565);function i(e){let{kind:n,gitIcon:t,...i}=e;switch(n){case s.ri.Doc:return(0,r.jsx)(a.IconEmojiBook,{...i});case s.ri.Web:return(0,r.jsx)(a.IconEmojiGlobe,{...i});case s.ri.Github:return(0,r.jsx)(a.IconGitHub,{...i});case s.ri.Gitlab:return(0,r.jsx)(a.IconGitLab,{...i});case s.ri.Git:return t||(0,r.jsx)(a.IconCode,{...i});default:return null}}},36065:function(e,n,t){"use strict";t.d(n,{di:function(){return f},e8:function(){return d},fu:function(){return m},mY:function(){return o},rb:function(){return u},sZ:function(){return c},zz:function(){return p}});var r=t(36164),s=t(3546),a=t(53241),i=t(93170),l=t(73492);t(30220);let o=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY,{ref:n,className:(0,l.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s})});o.displayName=a.mY.displayName;let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(i.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(a.mY.Input,{ref:n,className:(0,l.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})});c.displayName=a.mY.Input.displayName;let d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.List,{ref:n,className:(0,l.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s})});d.displayName=a.mY.List.displayName;let u=s.forwardRef((e,n)=>(0,r.jsx)(a.mY.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));u.displayName=a.mY.Empty.displayName;let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Group,{ref:n,className:(0,l.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s})});m.displayName=a.mY.Group.displayName;let p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Separator,{ref:n,className:(0,l.cn)("-mx-1 h-px bg-border",t),...s})});p.displayName=a.mY.Separator.displayName;let f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Item,{ref:n,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",t),...s})});f.displayName=a.mY.Item.displayName},30220:function(e,n,t){"use strict";t.d(n,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return f},cZ:function(){return m},fK:function(){return p},hg:function(){return c}});var r=t(36164),s=t(3546),a=t(4318),i=t(1663),l=t(73492);let o=a.fC,c=a.xz,d=a.h_;a.x8;let u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.aV,{ref:n,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=a.aV.displayName;let m=s.forwardRef((e,n)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(a.VY,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=a.VY.displayName;let p=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};p.displayName="DialogHeader";let f=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t})};f.displayName="DialogFooter";let x=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.Dx,{ref:n,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});x.displayName=a.Dx.displayName;let h=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.dk,{ref:n,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=a.dk.displayName},90615:function(e,n,t){"use strict";t.d(n,{Yi:function(){return o},bZ:function(){return c},zs:function(){return l}});var r=t(36164),s=t(3546),a=t(21030),i=t(73492);let l=a.fC,o=a.xz;a.h_;let c=s.forwardRef((e,n)=>{let{className:t,align:s="center",sideOffset:l=4,...o}=e;return(0,r.jsx)(a.VY,{ref:n,align:s,sideOffset:l,className:(0,i.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})});c.displayName=a.VY.displayName},84942:function(e,n,t){"use strict";t.d(n,{J2:function(){return l},xo:function(){return o},yk:function(){return c}});var r=t(36164),s=t(3546),a=t(83299),i=t(73492);let l=a.fC,o=a.xz;a.x8,a.h_,a.ee;let c=s.forwardRef((e,n)=>{let{className:t,sideOffset:s=4,...l}=e;return(0,r.jsx)(a.VY,{ref:n,sideOffset:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});c.displayName=a.VY.displayName},21808:function(e,n,t){"use strict";t.d(n,{$6:function(){return a},$I:function(){return i},GI:function(){return d},L8:function(){return s},ir:function(){return l},ki:function(){return c},o0:function(){return r},rZ:function(){return o}});let r="name@yourcompany.com",s=20,a={DEMO_AUTO_LOGIN:"_tabby_demo_autologin"},i=48,l="NOT_FOUND",o="\n",c=["think"],d=[]},12624:function(e,n,t){"use strict";t.d(n,{e:function(){return a}});var r=t(3546),s=t(62940);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,[t,a]=r.useState(!1);return r.useEffect(()=>{if(n)return;let t=(0,s.Z)(()=>{a(window.innerHeight+window.scrollY>=document.body.offsetHeight-e)},100,{leading:!0});return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),t(),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e,n]),r.useEffect(()=>{if(!n)return;let t=(0,s.Z)(()=>{let{scrollTop:t,clientHeight:r,scrollHeight:s}=n;a(t+r>=s-e)},100,{leading:!0});return n.addEventListener("scroll",t,{passive:!0}),n.addEventListener("resize",t,{passive:!0}),t(),()=>{n.removeEventListener("scroll",t),n.removeEventListener("resize",t)}},[e,n]),t}},17451:function(e,n,t){"use strict";t.d(n,{Eg:function(){return d},UP:function(){return p},aK:function(){return o},qs:function(){return m},xt:function(){return u}});var r=t(27257),s=t(85654),a=t(73492);let i=["activeChatId","pendingUserMessage"],l={activeChatId:(0,a.x0)(),selectedModel:void 0,selectedRepoSourceId:void 0,enableActiveSelection:!0,pendingUserMessage:void 0},o=(0,r.Ue)()((0,s.tJ)(()=>({...l}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return!i.includes(n)})),version:1})),c=o.setState,d=e=>{c(()=>({selectedModel:e}))},u=e=>{c(()=>({selectedRepoSourceId:e}))},m=e=>{c(()=>({enableActiveSelection:e}))},p=e=>{c(()=>({pendingUserMessage:e}))}},80804:function(){}}]);
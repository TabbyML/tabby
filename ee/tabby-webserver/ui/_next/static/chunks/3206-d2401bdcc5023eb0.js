(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3206],{3206:function(e,t,n){"use strict";n.d(t,{e:function(){return eZ},p:function(){return eU}});var a=n(36164),s=n(3546),l=n(1853),i=n(78613),r=n(82157),o=n(77735),c=n(72940),d=n(70783),m=n(40055),u=n(21808),f=n(24449),p=n(16784),x=n(64566),h=n(63484),g=n(17451),v=n(70410),b=n(57288),y=n(54767),j=n(94755),C=n(28445),N=n(84837),k=n(2578),w=n(28312),I=n(47241),A=n(11634),M=n(63795),S=n(31458),L=n(81565),R=n(72657),E=n(77246),T=n(29952),F=n(94160),D=n(50292),_=n(59105),P=n(44516),U=n(19092);n(67325);var Z=n(12978),z=n(31022),B=n(18366);let O=(0,B.Z)();var V=n(63057),q=n(31745),H=n(65063),J=n(74787);let G=e=>{let{node:t}=e,{category:n,fileItem:l,label:i}=t.attrs;return(0,s.useEffect)(()=>(O.emit("file_mention_update"),()=>{O.emit("file_mention_update")}),[]),(0,a.jsx)(P.T5,{as:"span",className:"rounded-sm px-1",children:(0,a.jsxs)("span",{className:(0,b.cn)("space-x-0.5 whitespace-nowrap rounded bg-muted px-1.5 py-0.5 align-middle text-sm font-medium text-foreground"),"data-category":n,children:["file"===n?(0,a.jsx)(V.Z,{className:"relative -top-px inline-block h-3.5 w-3.5"}):(0,a.jsx)(q.Z,{className:"relative -top-px inline-block h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"relative whitespace-normal",children:i})]})})},Y=T.ZP.extend({addNodeView:()=>(0,P.fW)(G),renderText(e){let{node:t}=e,n=t.attrs.fileItem,a=n.filepath,s=t.attrs.category;return"symbol"===s?"[[symbol:".concat(JSON.stringify(t.attrs.fileItem),"]]"):"[[file:".concat(JSON.stringify(a),"]]")},addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-file"),renderHTML:e=>e.fileItem?{"data-id":JSON.stringify(e.fileItem.filepath)}:{}},fileItem:{default:null,parseHTML:e=>e.getAttribute("data-file"),renderHTML:e=>e.fileItem?{"data-file":e.fileItem}:{}},category:{default:"file",parseHTML:e=>e.getAttribute("data-category"),renderHTML:e=>e.category?{"data-category":e.category}:{}},label:{default:"",parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}})}),Q=(0,s.forwardRef)((e,t)=>{let{items:n,command:l,query:i,listFileInWorkspace:r,listSymbols:o}=e,[c,d]=(0,s.useState)(n),[m,u]=(0,s.useState)(0),[p,x]=(0,s.useState)("category"),[h,g]=(0,s.useState)(!1),[v]=(0,f.n)(h,100),[y,j]=(0,s.useState)(!0),[C]=(0,f.n)(i||"",150),N=(0,s.useRef)(null),k=(0,s.useMemo)(()=>{let e=[r&&{label:"Files",categoryKind:"file",icon:(0,a.jsx)(V.Z,{className:"h-4 w-4"})},o&&{label:"Symbols",categoryKind:"symbol",icon:(0,a.jsx)(q.Z,{className:"h-4 w-4"})}].filter(Boolean);return 1===e.length&&x(e[0].categoryKind),e},[r,o]),w=1===k.length,I=!w&&"category"===p,A=(0,s.useCallback)(async()=>{g(!0);try{var e;let t=y?i:C;N.current&&(N.current.isCurrent=!1);let n=(async()=>{let e=[];if(I){let n=await (null==r?void 0:r({query:t||""}))||[];e=t?n.map(J.Gn):[...k.map(e=>({id:e.categoryKind,name:e.label,category:"category",isRootCategoryItem:!0,fileItem:{},icon:e.icon})),...n.map(J.Gn)]}else if("file"===p){let n=await (null==r?void 0:r({query:t}))||[];e=n.map(J.Gn)}else{let n=await (null==o?void 0:o({query:t}))||[];e=(0,Z.Z)(n.map(J.xe),"id")}return e})();n.isCurrent=!0,N.current=n;let a=await n;(null===(e=N.current)||void 0===e?void 0:e.isCurrent)&&(d(a),u(0),g(!1),y&&j(!1))}catch(e){g(!1)}},[k,C,y,r,o,p,i,I]);(0,s.useEffect)(()=>{A()},[p,i,C,y,I,A]),(0,s.useEffect)(()=>()=>{N.current&&(N.current.isCurrent=!1)},[]);let M=e=>{if(e.isRootCategoryItem&&!w){x(e.id);return}let t="file"===e.category?(0,b.UA)((0,b.VJ)(e.fileItem.filepath).filepath||""):e.name;l({category:e.category,fileItem:e.fileItem,label:t})};return(0,s.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;if(h)return!1;let n=c.length-1,a=m;switch(t.key){case"ArrowUp":a=Math.max(0,m-1);break;case"ArrowDown":a=Math.min(n,m+1);break;case"Enter":return c[m]&&(M(c[m]),c[m].isRootCategoryItem&&u(0)),!0;default:return!1}return u(a),!0}})),(0,a.jsxs)("div",{className:"relative flex max-h-[300px] min-w-[60vw] max-w-[90vw] flex-col overflow-hidden rounded-md border bg-background p-1",children:[v&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80",children:(0,a.jsx)(H.Z,{className:"h-6 w-6 animate-spin"})}),!w&&"category"!==p&&(0,a.jsxs)("div",{className:"flex items-center p-1 text-sm text-muted-foreground",children:[(0,a.jsx)("button",{className:"mr-2 rounded p-1 hover:bg-accent",onClick:()=>x("category"),children:(0,a.jsx)(L.IconChevronLeft,{className:"h-4 w-4"})}),"file"===p?"Files":"Symbols"]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===c.length?(0,a.jsx)("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:i?"No results found":"Type to search..."}):(0,a.jsx)("div",{className:"grid gap-0.5",children:c.map((e,t)=>(0,a.jsx)(K,{onClick:()=>M(e),onMouseEnter:()=>u(t),title:e.name,isSelected:t===m,data:e},"".concat(e.id,"-").concat(t)))})})]})});function K(e){let{isSelected:t,data:n,...l}=e,i=(0,s.useRef)(null),r=(0,s.useMemo)(()=>n.filepath&&n.filepath?n.filepath.split("/").slice(0,-1).join("/"):"",[n.filepath]);return(0,s.useLayoutEffect)(()=>{if(t&&i.current){var e;null===(e=i.current)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"})}},[t]),(0,a.jsxs)("div",{className:(0,b.cn)("flex cursor-pointer flex-nowrap items-center gap-1 overflow-hidden rounded-md px-2 py-1.5 text-sm",{"bg-accent text-accent-foreground":t}),...l,ref:i,children:[(0,a.jsx)("span",{className:"flex h-5 shrink-0 items-center",children:n.icon}),(0,a.jsx)("span",{className:"mr-2 truncate whitespace-nowrap",children:n.name}),(0,a.jsx)("span",{className:"flex-1 truncate text-xs text-muted-foreground",children:r}),"category"===n.category&&(0,a.jsx)(L.IconChevronRight,{className:"h-4 w-4 text-muted-foreground"})]})}Q.displayName="MentionList";let W=s.forwardRef(function(e,t){let{onSubmit:n,isLoading:l,onUpdate:i}=e,{listFileInWorkspace:o,readFileContent:c,relevantContext:d,setRelevantContext:m,listSymbols:x}=(0,s.useContext)(eU),h=(0,p.d)(async()=>{if(l||!v)return;let e=v.getText({blockSeparator:u.rZ}).trim();if(!e)return;let t=n(e);return null==v||v.chain().clearContent().focus().run(),t}),g=()=>{h.current()},v=(0,P.jE)({extensions:[E.Z,F.Z,_.Z,D.Z.configure({placeholder:"typing..."}),$(g),Y.configure({deleteTriggerWithBackspace:!0,suggestion:{allow:e=>{let{state:t,range:n}=e,a=t.doc.resolve(n.from),s=t.schema.nodes[T.ZP.name],l=!!a.parent.type.contentMatch.matchType(s);return!!o&&l},char:"@",items:async e=>{let{query:t}=e;if(!o)return[];let n=await o({query:t}),a=[...x?[null!=x?x:{id:"category",name:"Files",category:"category"},{id:"category",name:"Symbols",category:"category"}]:[],...(0,Z.Z)(n.map(J.Gn),"id")];return a},render:()=>{let e,t;return{onStart:n=>{e=new P.M_(Q,{props:{...n,listFileInWorkspace:o,listSymbols:x},editor:n.editor}),n.clientRect&&(t=(0,z.ZP)("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"top-start",animation:"shift-away"}))},onUpdate:t=>{e.updateProps(t)},onExit:()=>{t[0].destroy(),e.destroy()},onKeyDown:n=>{var a,s;return"Escape"===n.event.key?(t[0].hide(),!0):null!==(s=null===(a=e.ref)||void 0===a?void 0:a.onKeyDown(n))&&void 0!==s&&s}}}}})],editorProps:{attributes:{class:(0,b.cn)("prose max-w-none font-sans dark:prose-invert focus:outline-none prose-p:my-0")}},onUpdate(e){null==i||i(e)}},[o]),y=(null==v?void 0:v.getText())||"";(0,s.useImperativeHandle)(t,()=>({focus:()=>null==v?void 0:v.commands.focus(),setInput:e=>null==v?void 0:v.commands.setContent(e),input:y,editor:v}),[v,y]);let j=(0,f.S)(async()=>{if(!c||!v)return;let e=[];v.view.state.doc.descendants(t=>{"mention"===t.type.name&&("file"===t.attrs.category||"symbol"===t.attrs.category)&&e.push({kind:"file",content:"",filepath:t.attrs.fileItem.filepath,range:"symbol"===t.attrs.category?t.attrs.fileItem.range:void 0})});let t=[...d],n=e.filter(e=>!d.some(t=>(0,J.jZ)((0,b.VU)(e),t))),a=d.filter(t=>!e.some(e=>(0,J.jZ)((0,b.VU)(e),t)));for(let e of a)t=t.filter(t=>!(0,r.Z)(t,e));for(let e of n){let n=await c({filepath:e.filepath,range:e.range});t.push((0,b.VU)({kind:"file",content:n||"",filepath:e.filepath,range:e.range}))}m(t)},100);return(0,s.useEffect)(()=>{let e=()=>{j.run()};return O.on("file_mention_update",e),()=>{O.off("file_mention_update",e)}},[]),(0,a.jsx)("div",{className:"relative flex flex-col px-2.5",children:(0,a.jsxs)("div",{className:"relative flex items-start gap-2",children:[(0,a.jsx)("span",{className:"mt-[1.375rem]",children:(0,a.jsx)(L.IconEdit,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"max-h-32 flex-1 overflow-y-auto py-4",onClick:()=>{v&&!v.isFocused&&(null==v||v.commands.focus())},children:(0,a.jsx)(P.kg,{editor:v,className:(0,b.cn)("prose overflow-hidden break-words text-foreground focus:outline-none")})}),(0,a.jsx)(S.z,{className:"mt-4 h-7 w-7",size:"icon",disabled:l||""===y,onClick:g,children:(0,a.jsx)(L.IconArrowElbow,{className:"h-3.5 w-3.5"})})]})})}),$=e=>U.hj.create({addKeyboardShortcuts(){return{Enter:t=>{let{editor:n}=t;return e(),!0},"Shift-Enter":()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})}}});function X(e){let{href:t,children:n}=e;return(0,a.jsxs)("a",{href:t,target:"_blank",className:"inline-flex flex-1 justify-center gap-1 leading-4 hover:underline",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)("svg",{"aria-hidden":"true",height:"7",viewBox:"0 0 6 6",width:"7",className:"opacity-70",children:(0,a.jsx)("path",{d:"M1.25215 5.54731L0.622742 4.9179L3.78169 1.75597H1.3834L1.38936 0.890915H5.27615V4.78069H4.40513L4.41109 2.38538L1.25215 5.54731Z",fill:"currentColor"})})]})}function ee(e){let{className:t,...n}=e;return(0,a.jsxs)("p",{className:(0,b.cn)("px-2 text-center text-xs leading-normal text-muted-foreground",t),...n,children:[(0,a.jsx)(X,{href:"https://tabby.tabbyml.com",children:"Tabby"}),", an opensource, self-hosted AI coding assistant ."]})}var et=n(29),en=n(36065),ea=n(84942),es=n(3448),el=n(6230),ei=n(37034);function er(e){let{repos:t,value:n,onChange:l,isInitializing:i,...r}=e,[o,c]=(0,s.useState)(!1),d=(0,s.useRef)(null),m=e=>{l(e)},u=()=>{requestAnimationFrame(()=>{d.current&&(d.current.scrollTop=0)})},f=n?null==t?void 0:t.find(e=>e.sourceId===n):void 0,p=null==f?void 0:f.sourceName;return i||(null==t?void 0:t.length)?(0,a.jsx)("div",{...r,children:(0,a.jsx)(el.Z,{loading:i,fallback:(0,a.jsx)("div",{className:"w-full pl-2",children:(0,a.jsx)(es.O,{className:"h-3 w-[10rem]"})}),children:(0,a.jsxs)(ea.J2,{open:o,onOpenChange:c,children:[(0,a.jsxs)(M.C,{variant:"outline",className:(0,b.cn)("h-7 items-center gap-1 overflow-hidden break-all rounded-md px-0 text-sm font-semibold hover:bg-muted/50",{"border-dashed text-muted-foreground italic":!f}),children:[(0,a.jsx)(ea.xo,{className:"outline-none",asChild:!0,children:(0,a.jsxs)("div",{className:(0,b.cn)("flex flex-1 cursor-pointer items-center gap-1.5 overflow-hidden pl-2.5",{"min-w-[10rem]":!f}),children:[f?(0,a.jsx)(ei.k,{kind:f.sourceKind,className:"h-3.5 w-3.5 shrink-0"}):(0,a.jsx)(L.IconFolderGit,{className:"shrink-0"}),(0,a.jsx)("div",{className:"flex flex-1 items-center gap-1.5 truncate break-all",children:(0,a.jsx)("span",{className:(0,b.cn)("truncate",{"text-muted-foreground":!p}),children:p||"Workspace"})}),!n&&(0,a.jsx)("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center text-foreground",children:(0,a.jsx)(L.IconChevronUpDown,{})})]})}),!!n&&(0,a.jsx)(S.z,{type:"button",size:"icon",variant:"ghost",className:"h-7 w-7 shrink-0 rounded-l-none bg-background hover:bg-muted/50",onClick:e=>{e.stopPropagation(),l(void 0)},children:(0,a.jsx)(L.IconRemove,{})})]}),(0,a.jsx)(ea.yk,{side:"top",align:"start",className:"dropdown-menu w-[80vw] overflow-x-hidden rounded-md border bg-popover p-2 text-popover-foreground shadow animate-in",children:(0,a.jsxs)(en.mY,{children:[(0,a.jsx)(en.sZ,{placeholder:"Search context...",onValueChange:()=>{u()}}),(0,a.jsxs)(en.e8,{className:"max-h-[30vh]",ref:d,children:[(0,a.jsx)(en.rb,{children:"No context found"}),(0,a.jsx)(en.fu,{children:null==t?void 0:t.map(e=>{let t=e.sourceId===n;return(0,a.jsxs)(en.di,{onSelect:()=>{m(e.sourceId),c(!1)},title:e.sourceName,className:"cursor-pointer",children:[(0,a.jsx)(L.IconCheck,{className:(0,b.cn)("mr-1 shrink-0",e.sourceId===n?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(ei.k,{kind:e.sourceKind,className:"shrink-0"}),(0,a.jsx)("div",{className:(0,b.cn)("truncate font-medium",{"font-semibold":t}),children:e.sourceName})]})]},e.sourceId)})})]})]})})]})})}):null}let eo=s.forwardRef(function(e,t){var n;let{stop:i,reload:r,className:o,onSubmit:c,onUpdate:d,chatMaxWidthClass:m,chatInputRef:f}=e,{threadId:x,container:h,onClearMessages:E,qaPairs:T,isLoading:F,relevantContext:D,activeSelection:_,onCopyContent:P,selectedRepoId:U,setSelectedRepoId:Z,repos:z,initialized:B,setRelevantContext:O,openInEditor:V}=s.useContext(eU),q=(0,g.a)(e=>e.enableActiveSelection),[H,G]=(0,s.useState)(!1),{width:Y}=(0,j.iP)(),Q="number"==typeof Y&&Y<376,K=(0,s.useMemo)(()=>{var e;if(!x)return"";let t=null===(e=T[0])||void 0===e?void 0:e.user.message;if(!t)return x;let n=(0,b.i8)([],t,{maxLength:u.$I}),a=(0,y.Z)(n),s=(0,l.Z)([a,x]).join("-");return s},[null===(n=T[0])||void 0===n?void 0:n.user.message,x]),$=(0,A.Db)(v.md,{onError(e){k.A.error(e.message)}}),{isCopied:X,copyToClipboard:en}=(0,w.m)({timeout:2e3,onCopyContent:P}),ea=async()=>{if(x&&!X&&!H)try{var e,t;G(!0);let n=await $({threadId:x});if(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.setThreadPersisted){let e=new URL(window.location.origin);e.pathname="/search/".concat(K),en(e.toString())}else k.A.error((null==n?void 0:null===(t=n.error)||void 0===t?void 0:t.message)||"Failed to share")}catch(e){}finally{G(!1)}},es=(0,p.d)(e=>{var t;let n=null===(t=f.current)||void 0===t?void 0:t.editor;if(!n)return;let{state:a,view:s}=n,{tr:l}=a,i=[],r=D[e];a.doc.descendants((e,t)=>{if("mention"===e.type.name&&("file"===e.attrs.category||"symbol"===e.attrs.category)){let n=(0,b.VU)({filepath:e.attrs.fileItem.filepath,content:"",kind:"file",range:"symbol"===e.attrs.category?e.attrs.fileItem.range:void 0});(0,J.jZ)(n,r)&&i.push({from:t,to:t+e.nodeSize})}}),O(t=>t.filter((t,n)=>n!==e)),i.reverse().forEach(e=>{let{from:t,to:n}=e;l.delete(t,n)}),s.dispatch(l),n.commands.focus()});return s.useImperativeHandle(t,()=>{var e,t;return{focus:()=>{var e;null===(e=f.current)||void 0===e||e.focus()},setInput:e=>{var t;null===(t=f.current)||void 0===t||t.setInput(e)},input:null!==(t=null===(e=f.current)||void 0===e?void 0:e.input)&&void 0!==t?t:""}},[f]),(0,a.jsxs)("div",{className:o,children:[(0,a.jsx)(R.K,{container:h}),(0,a.jsxs)("div",{className:"mx-auto md:px-4 ".concat(m),children:[(0,a.jsxs)("div",{className:(0,b.cn)("flex h-10 items-center justify-center",Q?"gap-3":"gap-2"),children:[F?(0,a.jsxs)(et.u,{children:[(0,a.jsx)(et.aJ,{asChild:!0,children:(0,a.jsxs)(S.z,{variant:"outline",onClick:()=>i(),className:"gap-2 bg-background",children:[(0,a.jsx)(L.IconStop,{}),!Q&&"Stop generating"]})}),(0,a.jsx)(et._v,{hidden:!Q,children:"Stop generating"})]}):(null==T?void 0:T.length)>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(et.u,{children:[(0,a.jsx)(et.aJ,{asChild:!0,children:(0,a.jsxs)(S.z,{variant:"outline",onClick:()=>r(),className:"gap-2 bg-background",children:[(0,a.jsx)(L.IconRefresh,{}),!Q&&"Regenerate"]})}),(0,a.jsx)(et._v,{hidden:!Q,children:"Regenerate"})]}),(0,a.jsxs)(et.u,{children:[(0,a.jsx)(et.aJ,{asChild:!0,children:(0,a.jsxs)(S.z,{variant:"outline",className:"gap-2 bg-background",onClick:ea,children:[X?(0,a.jsx)(L.IconCheck,{}):(0,a.jsx)(L.IconShare,{}),!Q&&"Share"]})}),(0,a.jsx)(et._v,{hidden:!Q,children:"Share"})]})]}),(null==T?void 0:T.length)>0&&(0,a.jsxs)(et.u,{children:[(0,a.jsx)(et.aJ,{asChild:!0,children:(0,a.jsxs)(S.z,{variant:"outline",onClick:E,className:"gap-2 bg-background",children:[(0,a.jsx)(L.IconTrash,{}),!Q&&"Clear"]})}),(0,a.jsx)(et._v,{hidden:!Q,children:"Clear"})]})]}),(0,a.jsxs)("div",{id:"chat-panel-container",className:"border-t bg-background px-4 py-2 shadow-lg sm:space-y-4 sm:rounded-t-xl sm:border md:py-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(er,{id:"repo-select",value:U,onChange:e=>{Z(e),setTimeout(()=>{var e;null===(e=f.current)||void 0===e||e.focus()})},repos:z,isInitializing:!B}),_?(0,a.jsxs)(M.C,{id:"active-selection-badge",variant:"outline",className:(0,b.cn)("inline-flex h-7 flex-nowrap items-center gap-1.5 overflow-hidden rounded-md pr-0 text-sm font-semibold",{"border-dashed !text-muted-foreground italic line-through":!q}),children:[(0,a.jsx)(L.IconFileText,{}),(0,a.jsx)(ec,{context:_,className:"flex-1 truncate"}),(0,a.jsx)("span",{className:"shrink-0 text-muted-foreground",children:"Current file"}),(0,a.jsx)(S.z,{size:"icon",variant:"ghost",className:"h-7 w-7 shrink-0 rounded-l-none hover:bg-muted/50",onClick:e=>{(0,I.qs)(!q)},children:q?(0,a.jsx)(L.IconEye,{}):(0,a.jsx)(L.IconEyeOff,{})})]}):null,(0,a.jsx)(C.M,{children:D.map((e,t)=>{var n,s;let l="".concat(e.git_url,"_").concat(e.filepath,"_").concat(null===(n=e.range)||void 0===n?void 0:n.start,"_").concat(null===(s=e.range)||void 0===s?void 0:s.end);return(0,a.jsx)(N.E.div,{initial:{opacity:0,scale:.9,y:-5},animate:{opacity:1,scale:1,y:0},transition:{ease:"easeInOut",duration:.1},exit:{opacity:0,scale:.9,y:-5},layout:!0,children:(0,a.jsxs)(M.C,{variant:"outline",className:(0,b.cn)("inline-flex h-7 cursor-pointer flex-nowrap items-center gap-1 overflow-hidden rounded-md pr-0 text-sm font-semibold"),onClick:()=>{V((0,b.Uw)(e))},children:[(0,a.jsx)(L.IconFile,{className:"shrink-0"}),(0,a.jsx)(ec,{context:e}),(0,a.jsx)(S.z,{size:"icon",variant:"ghost",className:"h-7 w-7 shrink-0 rounded-l-none hover:bg-muted/50",onClick:e=>{e.stopPropagation(),es.current(t)},children:(0,a.jsx)(L.IconRemove,{})})]})},l)})})]}),(0,a.jsx)(W,{ref:f,onSubmit:c,onUpdate:d,isLoading:F}),(0,a.jsx)(ee,{className:"hidden sm:block"})]})]})]})});function ec(e){let{context:t,className:n}=e,s=t.range?t.range.start===t.range.end?":".concat(t.range.start):":".concat(t.range.start,"-").concat(t.range.end):"";return(0,a.jsxs)("span",{className:(0,b.cn)("truncate",n),children:[(0,b.UA)(t.filepath),!!t.range&&(0,a.jsx)("span",{className:"text-muted-foreground",children:s})]})}var ed=n(76297),em=n(12624);function eu(e){let{trackVisibility:t}=e,{container:n}=s.useContext(eU),l=(0,em.e)(100,n),{ref:i,entry:r,inView:o}=(0,ed.YD)({trackVisibility:t,delay:100,rootMargin:"0px 0px -150px 0px",root:n});return s.useEffect(()=>{l&&t&&!o&&(null==r||r.target.scrollIntoView({block:"start"}))},[o,r,l,t]),(0,a.jsx)("div",{ref:i,className:"h-px w-full"})}let ef=[{heading:"Convert list of string to numbers",message:"How to convert a list of string to numbers in python"},{heading:"How to parse email address",message:"How to parse email address with regex"}];function ep(e){let{setInput:t,chatMaxWidthClass:n,welcomeMessage:s}=e;return(0,a.jsx)("div",{className:"mx-auto px-4 ".concat(n),children:(0,a.jsxs)("div",{className:"rounded-lg border bg-background p-8",children:[(0,a.jsx)("h1",{className:"mb-2 text-lg font-semibold",children:s||"Welcome"}),(0,a.jsx)("p",{className:"leading-normal text-muted-foreground",children:"You can start a conversation here or try the following examples:"}),(0,a.jsx)("div",{className:"mt-4 flex flex-col items-start space-y-2",children:ef.map((e,n)=>(0,a.jsxs)(S.z,{variant:"link",className:"h-auto p-0 text-base",onClick:()=>t(e.message),children:[(0,a.jsx)(L.IconArrowRight,{className:"mr-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-left",children:e.heading})]},n))})]})})}var ex=n(42891),eh=n.n(ex),eg=n(23342),ev=n(94909),eb=n(74630),ey=n(74038),ej=n(98454),eC=n(48537),eN=n(54646),ek=n(11208),ew=n(52569),eI=n(65858);let eA=(0,s.forwardRef)((e,t)=>{var n,l;let{contexts:i,clientContexts:r,className:o,triggerClassname:c,onContextClick:d,enableTooltip:m,onTooltipClick:u,highlightIndex:f,showExternalLink:p,showClientCodeIcon:x,supportsOpenInEditor:h,title:g}=e,v=((null==r?void 0:r.length)||0)+i.length,y=null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0,j=null!==(l=null==r?void 0:r.length)&&void 0!==l?l:0,C=y+j,[N,k]=(0,s.useState)(C<=5?"references":void 0);return(0,s.useEffect)(()=>{C<=5?k("references"):k(void 0)},[C]),(0,a.jsx)(eI.UQ,{type:"single",collapsible:!0,className:(0,b.cn)("bg-transparent text-foreground",o),ref:t,value:N,onValueChange:k,children:(0,a.jsxs)(eI.Qd,{value:"references",className:"my-0 border-0",children:[(0,a.jsx)(eI.o4,{className:(0,b.cn)("my-0 py-2 font-semibold",c),children:g||(0,a.jsx)("span",{className:"mr-2",children:"Read ".concat(v," file").concat(v>1?"s":"")})}),(0,a.jsxs)(eI.vF,{className:"space-y-2",children:[null==r?void 0:r.map((e,t)=>(0,a.jsx)(eM,{context:e,onContextClick:e=>null==d?void 0:d(e,!0),isHighlighted:f===t,clickable:h,showClientCodeIcon:x},"user-".concat(t))),i.map((e,t)=>(0,a.jsx)(eM,{context:e,onContextClick:e=>null==d?void 0:d(e,!1),enableTooltip:m,onTooltipClick:u,showExternalLinkIcon:p,isHighlighted:f===t+((null==r?void 0:r.length)||0)},"assistant-".concat(t)))]})]})})});function eM(e){var t,n,l,i,r,o,c;let{context:d,clickable:m=!0,onContextClick:u,enableTooltip:f,onTooltipClick:p,showExternalLinkIcon:x,showClientCodeIcon:h,isHighlighted:g}=e,[v,y]=(0,s.useState)(!1),j=d.range&&!(0,eb.Z)(null===(t=d.range)||void 0===t?void 0:t.start)&&!(0,eb.Z)(null===(n=d.range)||void 0===n?void 0:n.end)&&d.range.start<d.range.end,C=d.filepath.split("/"),N=C.slice(0,C.length-1).join("/"),k=null==d?void 0:null===(l=d.extra)||void 0===l?void 0:l.scores;return(0,a.jsxs)(et.u,{open:v,onOpenChange:e=>{f&&k&&y(e)},delayDuration:0,children:[(0,a.jsx)(et.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:(0,b.cn)("rounded-md border p-2",{"cursor-pointer hover:bg-accent":m,"cursor-default pointer-events-auto":!m,"bg-accent transition-all":g}),onClick:e=>m&&(null==u?void 0:u(d)),children:(0,a.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,a.jsx)(L.IconFile,{className:"shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 truncate",title:d.filepath,children:[(0,a.jsx)("span",{children:(0,b.UA)(d.filepath)}),d.range?(0,a.jsxs)(a.Fragment,{children:[(null===(i=d.range)||void 0===i?void 0:i.start)&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[":",d.range.start]}),j&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:["-",d.range.end]})]}):null,(0,a.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:N})]}),h&&(0,a.jsx)(L.IconFileSearch2,{className:"shrink-0 text-muted-foreground"}),x&&(0,a.jsx)(L.IconExternalLink,{className:"shrink-0 text-muted-foreground"})]})})}),(0,a.jsx)(et._v,{align:"start",onClick:p,className:"cursor-pointer p-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-2 font-semibold",children:"Scores"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"rrf:"}),null!==(r=null==k?void 0:k.rrf)&&void 0!==r?r:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"bm25:"}),null!==(o=null==k?void 0:k.bm25)&&void 0!==o?o:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"embedding:"}),null!==(c=null==k?void 0:k.embedding)&&void 0!==c?c:"-"]})]})]})})]})}function eS(e){let{messages:t,chatMaxWidthClass:n}=e,{isLoading:l}=s.useContext(eU);return(0,a.jsx)("div",{className:"relative mx-auto px-4 ".concat(n),children:null==t?void 0:t.map((e,n)=>{let i=n===t.length-1;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(eL,{isLoading:!!i&&l,message:e,isLastItem:i}),!i&&(0,a.jsx)(ek.Z,{className:"my-4 md:my-8"})]},e.user.id)})})}function eL(e){let{message:t,isLoading:n,isLastItem:s}=e,{user:l,assistant:i}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR,{message:l}),!!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.Z,{className:"my-4 md:my-8"}),(0,a.jsx)(eT,{message:i,userMessage:l,isLoading:n,userMessageId:l.id,enableRegenerating:s})]})]})}function eR(e){var t,n,l,i,r;let{message:o}=e,[{data:c}]=(0,ej.P)(),d=o.selectContext,{openInEditor:m,supportsOnApplyInEditorV2:u}=s.useContext(eU),f=s.useMemo(()=>{var e,t;if(!(null==d?void 0:d.content))return"";let n=(null==d?void 0:d.filepath)&&null!==(e=(0,h.U$)(null==d?void 0:d.filepath)[0])&&void 0!==e?e:"";return"\n```".concat(n,"\n").concat(null!==(t=null==d?void 0:d.content)&&void 0!==t?t:"","\n","```","\n")},[d]),p=null;if(f&&o.selectContext){let{range:e,filepath:t}=o.selectContext;p={filepath:t,isMultiLine:!!e&&!(0,eb.Z)(null==e?void 0:e.start)&&!(0,eb.Z)(null==e?void 0:e.end)&&e.start<e.end}}return(0,a.jsxs)("div",{className:(0,b.cn)("group relative mb-4 flex flex-col items-start gap-y-2 md:-ml-4 md:flex-row"),...e,children:[(0,a.jsxs)("div",{className:(0,b.cn)("flex min-h-[2rem] w-full items-center justify-between md:w-auto",{"hidden md:flex":!(null==c?void 0:c.me.name)}),children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("div",{className:"shrink-0 select-none rounded-full border bg-background shadow",children:(0,a.jsx)(ew.SQ,{className:"h-6 w-6 md:h-8 md:w-8",fallback:(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center md:h-8 md:w-8",children:(0,a.jsx)(L.IconUser,{className:"h-6 w-6"})})})}),(0,a.jsx)("p",{className:"block text-xs font-bold md:hidden",children:null==c?void 0:c.me.name})]}),(0,a.jsx)("div",{className:"block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,a.jsx)(eE,{...e})})]}),(0,a.jsxs)("div",{className:"group relative flex w-full justify-between gap-x-2",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2 overflow-hidden px-1 md:ml-4",children:[(0,a.jsx)(eN.J,{message:o.message,canWrapLongLines:!0,supportsOnApplyInEditorV2:u,openInEditor:m}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(eE,{...e})}),p&&o.selectContext&&(0,a.jsxs)("div",{className:"flex cursor-pointer items-center gap-1 overflow-x-auto text-xs text-muted-foreground hover:underline",onClick:()=>{let e=o.selectContext;m((0,b.Uw)(e))},children:[(0,a.jsx)(L.IconFile,{className:"h-3 w-3"}),(0,a.jsxs)("p",{className:"flex-1 truncate pr-1",children:[(0,a.jsx)("span",{children:p.filepath}),(null===(n=o.selectContext)||void 0===n?void 0:null===(t=n.range)||void 0===t?void 0:t.start)&&(0,a.jsxs)("span",{children:[":",null===(l=o.selectContext)||void 0===l?void 0:l.range.start]}),p.isMultiLine&&(0,a.jsxs)("span",{children:["-",null===(r=o.selectContext)||void 0===r?void 0:null===(i=r.range)||void 0===i?void 0:i.end]})]})]})]}),!(null==c?void 0:c.me.name)&&(0,a.jsx)("div",{className:"editor-bg absolute right-0 top-0 -mt-0.5 block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,a.jsx)(eE,{...e})})]})]})}function eE(e){let{message:t}=e,{handleMessageAction:n,isLoading:l}=s.useContext(eU);return(0,a.jsxs)(eP,{children:[!l&&(0,a.jsxs)(S.z,{variant:"ghost",size:"icon",onClick:e=>n(t.id,"edit"),children:[(0,a.jsx)(L.IconEdit,{}),(0,a.jsx)("span",{className:"sr-only",children:"Edit message"})]}),!l&&(0,a.jsxs)(S.z,{variant:"ghost",size:"icon",onClick:e=>n(t.id,"delete"),children:[(0,a.jsx)(L.IconTrash,{}),(0,a.jsx)("span",{className:"sr-only",children:"Delete message"})]})]})}function eT(e){let{message:t,userMessage:n,isLoading:i,userMessageId:o,enableRegenerating:c,...m}=e,{onApplyInEditor:u,onCopyContent:f,onLookupSymbol:p,openInEditor:x,openExternal:g,supportsOnApplyInEditorV2:v}=s.useContext(eU),[y,j]=s.useState(void 0),C=s.useMemo(()=>{var e,n,a;return null!==(a=null==t?void 0:null===(e=t.relevant_code)||void 0===e?void 0:e.map(e=>({kind:"file",range:(0,b.OV)(e),filepath:e.filepath,content:e.content,git_url:e.gitUrl,commit:null!==(n=e.commit)&&void 0!==n?n:void 0})))&&void 0!==a?a:[]},[null==t?void 0:t.relevant_code]),N=s.useMemo(()=>{var e;return(0,d.Z)((0,l.Z)([n.activeContext,...null!==(e=null==n?void 0:n.relevantContext)&&void 0!==e?e:[]]),r.Z)},[n.activeContext,n.relevantContext]),k=(0,s.useMemo)(()=>{var e,t;let n=null!==(t=null==N?void 0:N.map(t=>({content:t.content,filepath:t.filepath,gitUrl:t.git_url,baseDir:t.baseDir,startLine:t.range?t.range.start:void 0,language:(0,h.U$)(null!==(e=t.filepath)&&void 0!==e?e:"")[0],isClient:!0})))&&void 0!==t?t:[];return n},[N]),w=(0,s.useMemo)(()=>{var e,t;let n=null!==(t=null==C?void 0:C.map(t=>{var n;return{content:t.content,filepath:t.filepath,gitUrl:t.git_url,startLine:null===(n=t.range)||void 0===n?void 0:n.start,language:(0,h.U$)(null!==(e=t.filepath)&&void 0!==e?e:"")[0],isClient:!1}}))&&void 0!==t?t:[];return(0,l.Z)([...n])},[C]),I=!!u,A=(e,t)=>{if(t||!I)x((0,b.Uw)(e));else{let t=(0,b.XX)(window.location.href,e);g(t)}};return(0,a.jsxs)("div",{className:(0,b.cn)("group relative mb-4 flex flex-col items-start gap-y-2 md:-ml-4 md:flex-row"),...m,children:[(0,a.jsxs)("div",{className:"flex min-h-[2rem] w-full items-center justify-between md:w-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("div",{className:"shrink-0 select-none rounded-full border bg-background shadow",children:(0,a.jsx)(e_,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,a.jsx)("p",{className:"block text-xs font-bold md:hidden",children:"Tabby"})]}),(0,a.jsx)("div",{className:"block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,a.jsx)(eF,{message:t,userMessageId:o,enableRegenerating:c,attachmentCode:w})})]}),(0,a.jsxs)("div",{className:"w-full flex-1 space-y-2 overflow-hidden px-1 md:ml-4",children:[(0,a.jsx)(eA,{contexts:C,clientContexts:N,onContextClick:A,showExternalLink:I,supportsOpenInEditor:!!x,showClientCodeIcon:!I,highlightIndex:y,triggerClassname:"md:pt-0"}),!i||(null==t?void 0:t.message)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.J,{message:t.message,onApplyInEditor:u,onCopyContent:f,attachmentClientCode:k,attachmentCode:w,onCodeCitationClick:e=>{let t={git_url:e.gitUrl,content:e.content,filepath:e.filepath,kind:"file",range:(0,b.OV)(e)};A(t,e.isClient)},onCodeCitationMouseEnter:e=>{j(e-1-0)},onCodeCitationMouseLeave:e=>{j(void 0)},canWrapLongLines:!i,onLookupSymbol:p,openInEditor:x,supportsOnApplyInEditorV2:v,activeSelection:n.activeContext}),!!t.error&&(0,a.jsx)(eN.m,{error:t.error})]}):(0,a.jsx)(eD,{}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(eF,{message:t,userMessageId:o,enableRegenerating:c,attachmentCode:w})})]})]})}function eF(e){let{handleMessageAction:t,isLoading:n,onCopyContent:i}=s.useContext(eU),{message:r,userMessageId:o,enableRegenerating:c,attachmentCode:d}=e,m=(0,s.useMemo)(()=>(function(e,t){var n;if(!t||(0,ev.Z)(t))return e;let a=e.replace(ey.Hc,e=>{let t=null==e?void 0:e.match(/\d+/);return"[".concat(t,"]")}).trim(),s=null!==(n=t.map((e,t)=>{let n=(0,b.tf)(e),a=(0,l.Z)([e.filepath,n]).join(":");return"[".concat(t+1,"] ").concat(a)}).join("\n"))&&void 0!==n?n:"";return"".concat(a,"\n\nCitations:\n").concat(s)})(r.message,d),[r.message,d]);return(0,a.jsxs)(eP,{children:[!n&&c&&(0,a.jsxs)(S.z,{variant:"ghost",size:"icon",onClick:e=>t(o,"regenerate"),children:[(0,a.jsx)(L.IconRefresh,{}),(0,a.jsx)("span",{className:"sr-only",children:"Regenerate message"})]}),(0,a.jsx)(eC.q,{value:m,onCopyContent:i})]})}function eD(){return(0,a.jsxs)("div",{className:"space-y-2 py-2 md:px-1 md:py-0",children:[(0,a.jsx)(es.O,{className:"h-3 w-full"}),(0,a.jsx)(es.O,{className:"h-3 w-full"})]})}function e_(e){let{className:t}=e;return(0,a.jsx)(eh(),{style:{backgroundColor:"#E8E2D2"},className:(0,b.cn)("rounded-full p-0.5",t),src:eg.Z,alt:"tabby"})}function eP(e){let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,b.cn)("flex items-center justify-end transition-opacity group-hover:opacity-100 md:absolute md:-right-[4rem] md:-top-2 md:opacity-0",t),...n})}eA.displayName="CodeReferences";let eU=s.createContext({}),eZ=s.forwardRef(function(e,t){var n,y;let{className:j,chatId:C,initialMessages:N,onLoaded:k,onThreadUpdates:w,container:I,docQuery:A,generateRelevantQuestions:M,maxWidth:S,welcomeMessage:L,promptFormClassname:R,onCopyContent:E,onApplyInEditor:T,onLookupSymbol:F,openInEditor:D,openExternal:_,chatInputRef:P,supportsOnApplyInEditorV2:U,readWorkspaceGitRepositories:Z,getActiveEditorSelection:z,fetchSessionState:B,storeSessionState:O,listFileInWorkspace:V,readFileContent:q,listSymbols:H}=e,[G,Y]=s.useState(!1),[Q,K]=s.useState(!1),[W,$]=s.useState(),X=s.useRef(!1),[ee,et]=s.useState(null!=N?N:[]),[en,ea]=s.useState([]),[es,el]=s.useState(null),[ei,er]=s.useState();s.useEffect(()=>{G&&(null==O||O({selectedRepoId:ei}))},[ei,G,O]);let ec=(0,g.a)(e=>e.enableActiveSelection),ed=s.useRef(null),em=e=>{var t;null===(t=ed.current)||void 0===t||t.setInput(e)},ef=null!==(y=null===(n=ed.current)||void 0===n?void 0:n.input)&&void 0!==y?y:"",[{data:ex,fetching:eh}]=(0,m.aM)({query:v.K5}),eg=null==ex?void 0:ex.repositoryList,{sendUserMessage:ev,isLoading:eb,error:ey,answer:ej,stop:eC,regenerate:eN,deleteThreadMessagePair:ek}=(0,x.x)({threadId:W}),ew=async e=>{var t;if(!W)return;eC();let n=ee.find(t=>t.user.id===e);if(!(null==n?void 0:n.user)||!n.assistant)return;let a=ee.filter(t=>t.user.id!==e);et(a),null==O||O({qaPairs:a}),ek(W,null==n?void 0:n.user.id,null==n?void 0:null===(t=n.assistant)||void 0===t?void 0:t.id)},eI=async e=>{if(!W)return;let t=(0,i.Z)(ee,t=>t.user.id===e);if(t>-1){let e=ee[t];if(!e.assistant)return;let n=(0,b.x0)(),a=(0,b.x0)();et([...ee.slice(0,t),{user:{...e.user,id:n},assistant:{id:a,message:"",error:void 0}}]);let[s,l]=await eE(e.user);return eN({threadId:W,userMessageId:e.user.id,assistantMessageId:e.assistant.id,userMessage:s,threadRunOptions:l})}},eA=async e=>{var t,n;if(!W)return;let a=ee.find(t=>t.user.id===e);if(!(null==a?void 0:a.user)||!a.assistant)return;let s=a.user,l=[];(null===(t=s.relevantContext)||void 0===t?void 0:t.length)&&(l=l.concat(s.relevantContext));let i=(0,d.Z)(l,r.Z);ea(i);let o=ee.filter(t=>t.user.id!==e);et(o),null==O||O({qaPairs:o}),em(s.message);let c=(0,J._t)(s.message);em({type:"doc",content:c}),s.activeContext&&D((0,b.Uw)(s.activeContext)),ek(W,null==a?void 0:a.user.id,null==a?void 0:null===(n=a.assistant)||void 0===n?void 0:n.id)},eM=async()=>{if(!(null==ee?void 0:ee.length))return;let e=ee[ee.length-1].user.id;return eI(e)},eL=()=>{eC(!0),et([]),$(void 0),null==O||O({qaPairs:[],threadId:void 0})};s.useEffect(()=>{if(!(null==ee?void 0:ee.length)||!ej)return;let e=ee[ee.length-1];ej.threadId&&!W&&($(ej.threadId),null==O||O({threadId:ej.threadId})),et(t=>{var n,a;let s=t[t.length-1].assistant,l={...s,id:ej.assistantMessageId||(null==s?void 0:s.id)||(0,b.x0)(),message:ej.content,error:void 0,relevant_code:null!==(a=null===(n=ej.attachmentsCode)||void 0===n?void 0:n.map(e=>e.code))&&void 0!==a?a:[]};return[...t.slice(0,t.length-1),{user:{...e.user,id:(null==ej?void 0:ej.userMessageId)||e.user.id},assistant:l}]}),eb||null==O||O({qaPairs:ee})},[ej,eb]);let eR=(0,f.S)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";I?I.scrollTo({top:I.scrollHeight,behavior:e}):window.scrollTo({top:document.body.offsetHeight,behavior:e})},100);s.useLayoutEffect(()=>{eb&&eR.run()},[eb]),s.useEffect(()=>{ey&&(null==ee?void 0:ee.length)&&et(e=>{var t,n,a;let s=e[e.length-1],l=[...e.slice(0,e.length-1),{...s,assistant:{...s.assistant,id:(null===(t=s.assistant)||void 0===t?void 0:t.id)||(0,b.x0)(),message:null!==(a=null===(n=s.assistant)||void 0===n?void 0:n.message)&&void 0!==a?a:"",error:ey?"401"===ey.message?"Unauthorized":(0,c.Z)(ey.graphQLErrors,e=>{var t;return(null===(t=e.extensions)||void 0===t?void 0:t.code)===u.ir})?"The thread has expired, please click 'Clear' and try again.":ey.message||"Failed to fetch":"Failed to fetch"}}];return null==O||O({qaPairs:l}),l}),(null==ey?void 0:ey.message)!=="Thread not found"||(null==ee?void 0:ee.length)||eL()},[ey]);let eE=async e=>{var t;let n=ec&&!!e.activeContext,a=(0,d.Z)((0,l.Z)([e.selectContext,n&&e.activeContext,...(null==e?void 0:e.relevantContext)||[]]),r.Z),s=a.map(e=>{var t;return{content:e.content,filepath:e.filepath,startLine:null===(t=e.range)||void 0===t?void 0:t.start}}),i=e.message,o=ei?{content:i,sourceId:ei,filepath:null==s?void 0:null===(t=s[0])||void 0===t?void 0:t.filepath}:null;return[{content:i,attachments:{code:s}},{docQuery:A?{content:i,searchPublic:!1}:null,generateRelevantQuestions:!!M,codeQuery:o}]},eT=(0,p.d)(async e=>{var t,n,a,s,l;if(eb)return;let i="",r=null==e?void 0:null===(t=e.selectContext)||void 0===t?void 0:t.content;if(r){let t=(null==e?void 0:null===(n=e.selectContext)||void 0===n?void 0:n.filepath)&&null!==(s=(0,h.U$)(null==e?void 0:null===(a=e.selectContext)||void 0===a?void 0:a.filepath)[0])&&void 0!==s?s:"";i="\n```".concat(t,"\n").concat(null!=r?r:"","\n","```","\n")}let o={...e,message:e.message+i,id:null!==(l=e.id)&&void 0!==l?l:(0,b.x0)(),selectContext:e.selectContext,activeContext:ec&&es?es:void 0,relevantContext:[...e.relevantContext||[]]},c=[...ee,{user:o,assistant:{id:(0,b.x0)(),message:"",error:void 0}}];et(c),null==O||O({qaPairs:c});let d=await eE(o);ev(...d)}),eF=e=>{var t;return null===(t=eT.current)||void 0===t?void 0:t.call(eT,e)},eD=(0,p.d)(async e=>{let t=(0,b.QZ)(e);eF({message:t,selectContext:null!=es?es:void 0})}),e_=async e=>{var t;return null===(t=eD.current)||void 0===t?void 0:t.call(eD,e)},eP=async e=>{eF({message:e,relevantContext:en}),ea([])},eZ=(0,p.d)(e=>{ea(t=>{let n=function(e,t){let n=["content"],a=(e,t)=>(0,o.Z)(e,t,(e,t,a)=>{if(n.includes(a))return!0});return e.some(e=>a(e,t))?e:e.concat([t])}(t,e);return n})}),ez=e=>{var t;let n=(0,b.VU)(e);null===(t=eZ.current)||void 0===t||t.call(eZ,n)};s.useEffect(()=>{X.current&&(null==w||w(ee))},[ee]),s.useEffect(()=>{G&&(null==O||O({relevantContext:en}))},[en,G,O]);let eB=(0,f.S)(e=>{el(e)},300),eO=e=>{let t=e?(0,b.VU)(e):null;eB.run(t)},eV=()=>Z?Z():[],eq=async()=>null==z?void 0:z();s.useEffect(()=>{let e=async()=>{let[e,t]=await Promise.all([null==B?void 0:B(),eq()]);if((null==e?void 0:e.threadId)&&$(e.threadId),(null==e?void 0:e.qaPairs)&&et(e.qaPairs),(null==e?void 0:e.input)&&em(e.input),(null==e?void 0:e.relevantContext)&&ea(e.relevantContext),eR.run("instant"),(null==e?void 0:e.selectedRepoId)&&(null==eg?void 0:eg.find(t=>t.sourceId===e.selectedRepoId)))er(e.selectedRepoId);else{let e=await eV();if((null==e?void 0:e.length)&&(null==eg?void 0:eg.length)){let t=e[0].url,n=(0,b.Ch)(eg.map(e=>({url:e.gitUrl,sourceId:e.sourceId})),t);n&&er(n.sourceId)}}if(t){let e=(0,b.VU)(t);el(e)}};eh||G||e().finally(()=>{Y(!0)})},[eh,G]),s.useEffect(()=>{G&&(null==k||k(),K(!0))},[G]),s.useImperativeHandle(t,()=>({executeCommand:e_,stop:eC,isLoading:eb,addRelevantContext:ez,focus:()=>{var e;return null===(e=ed.current)||void 0===e?void 0:e.focus()},updateActiveSelection:eO}),[]);let eH=S?"max-w-".concat(S):"max-w-2xl";return(0,a.jsx)(eU.Provider,{value:{threadId:W,isLoading:eb,qaPairs:ee,handleMessageAction:(e,t)=>{switch(t){case"delete":ew(e);break;case"regenerate":eI(e);break;case"edit":eA(e)}},onClearMessages:eL,container:I,onCopyContent:E,onApplyInEditor:T,onLookupSymbol:F,openInEditor:D,openExternal:_,relevantContext:en,setRelevantContext:ea,chatInputRef:P,activeSelection:es,supportsOnApplyInEditorV2:U,selectedRepoId:ei,setSelectedRepoId:er,repos:eg,fetchingRepos:eh,initialized:Q,listFileInWorkspace:V,readFileContent:q,listSymbols:H},children:(0,a.jsx)("div",{className:"flex justify-center overflow-x-hidden",children:(0,a.jsxs)("div",{className:"w-full px-4 md:pl-10 md:pr-[3.75rem] ".concat(eH),children:[Q&&(0,a.jsxs)("div",{className:(0,b.cn)("pb-[200px] pt-4 md:pt-10",j),children:[(null==ee?void 0:ee.length)?(0,a.jsx)(eS,{messages:ee,chatMaxWidthClass:eH}):(0,a.jsx)(ep,{setInput:em,chatMaxWidthClass:eH,welcomeMessage:L}),(0,a.jsx)(eu,{trackVisibility:eb})]}),(0,a.jsx)(eo,{onSubmit:eP,className:(0,b.cn)("fixed inset-x-0 bottom-0",R),id:C,stop:()=>{eC()},reload:eM,input:ef,setInput:em,onUpdate:e=>{G&&(null==O||O({input:e.editor.getJSON()}))},chatMaxWidthClass:eH,ref:ed,chatInputRef:P})]})})})})},74787:function(e,t,n){"use strict";n.d(t,{Gn:function(){return o},HV:function(){return d},_t:function(){return m},jZ:function(){return u},xe:function(){return c}});var a=n(36164),s=n(31745),l=n(74038),i=n(57288),r=n(81565);function o(e){let t=(0,i.VJ)(e.filepath).filepath,n={fileItem:e,name:(0,i.UA)(t),filepath:t,category:"file",icon:(0,a.jsx)(r.IconFile,{})};try{return{id:JSON.stringify(e.filepath),...n}}catch(e){return{id:(0,i.x0)(),...n}}}function c(e){let t=(0,i.VJ)(e.filepath).filepath;return{category:"symbol",id:e.label,name:e.label,filepath:t,fileItem:e,icon:(0,a.jsx)(s.Z,{className:"h-4 w-4"})}}function d(e){let t,n=e;for(;null!==(t=l.My.exec(e));)try{let e=t[1],a=JSON.parse(e),s="filepath"in a?a.filepath:a.uri,l=(0,i.UA)(s);n=n.replace(t[0],"@".concat(l))}catch(e){continue}return n}function m(e){let t=[],n=0;return e.replace(l.My,(a,s,l)=>{l>n&&t.push({type:"text",text:e.slice(n,l)});try{t.push({type:"mention",attrs:{category:"file",fileItem:{filepath:JSON.parse(s)}}})}catch(e){}return n=l+a.length,a}),n<e.length&&t.push({type:"text",text:e.slice(n)}),t}let u=(e,t)=>{var n,a,s,l;let i=e.filepath===t.filepath&&e.git_url===t.git_url;return e.range||t.range?i&&(null===(n=e.range)||void 0===n?void 0:n.start)===(null===(a=t.range)||void 0===a?void 0:a.start)&&(null===(s=e.range)||void 0===s?void 0:s.end)===(null===(l=t.range)||void 0===l?void 0:l.end):i}},37034:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var a=n(36164),s=n(18500),l=n(81565);function i(e){let{kind:t,gitIcon:n,...i}=e;switch(t){case s.ri.Doc:return(0,a.jsx)(l.IconEmojiBook,{...i});case s.ri.Web:return(0,a.jsx)(l.IconEmojiGlobe,{...i});case s.ri.Github:return(0,a.jsx)(l.IconGitHub,{...i});case s.ri.Gitlab:return(0,a.jsx)(l.IconGitLab,{...i});case s.ri.Git:return n||(0,a.jsx)(l.IconCode,{...i});default:return null}}},65858:function(e,t,n){"use strict";n.d(t,{Qd:function(){return c},UQ:function(){return o},o4:function(){return d},vF:function(){return m}});var a=n(36164),s=n(3546),l=n(43739),i=n(14079),r=n(57288);let o=l.fC,c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.ck,{ref:t,className:(0,r.cn)("border-b",n),...s})});c.displayName="AccordionItem";let d=s.forwardRef((e,t)=>{let{className:n,children:s,showChevron:o=!0,...c}=e;return(0,a.jsxs)(l.xz,{ref:t,className:(0,r.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...c,children:[s,o&&(0,a.jsx)(i.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})});d.displayName=l.xz.displayName;let m=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,a.jsx)(l.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,a.jsx)("div",{className:(0,r.cn)("pb-4 pt-0",n),children:s})})});m.displayName=l.VY.displayName},36065:function(e,t,n){"use strict";n.d(t,{di:function(){return p},e8:function(){return d},fu:function(){return u},mY:function(){return o},rb:function(){return m},sZ:function(){return c},zz:function(){return f}});var a=n(36164),s=n(3546),l=n(53241),i=n(93170),r=n(57288);n(30220);let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.mY,{ref:t,className:(0,r.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...s})});o.displayName=l.mY.displayName;let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(l.mY.Input,{ref:t,className:(0,r.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...s})]})});c.displayName=l.mY.Input.displayName;let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.mY.List,{ref:t,className:(0,r.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...s})});d.displayName=l.mY.List.displayName;let m=s.forwardRef((e,t)=>(0,a.jsx)(l.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));m.displayName=l.mY.Empty.displayName;let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.mY.Group,{ref:t,className:(0,r.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...s})});u.displayName=l.mY.Group.displayName;let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.mY.Separator,{ref:t,className:(0,r.cn)("-mx-1 h-px bg-border",n),...s})});f.displayName=l.mY.Separator.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.mY.Item,{ref:t,className:(0,r.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",n),...s})});p.displayName=l.mY.Item.displayName},30220:function(e,t,n){"use strict";n.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return p},cZ:function(){return u},fK:function(){return f},hg:function(){return c}});var a=n(36164),s=n(3546),l=n(4318),i=n(1663),r=n(57288);let o=l.fC,c=l.xz,d=l.h_;l.x8;let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});m.displayName=l.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[s,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};f.displayName="DialogHeader";let p=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};p.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});x.displayName=l.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",n),...s})});h.displayName=l.dk.displayName},84942:function(e,t,n){"use strict";n.d(t,{J2:function(){return r},xo:function(){return o},yk:function(){return c}});var a=n(36164),s=n(3546),l=n(83299),i=n(57288);let r=l.fC,o=l.xz;l.x8,l.h_,l.ee;let c=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...r}=e;return(0,a.jsx)(l.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})});c.displayName=l.VY.displayName},64566:function(e,t,n){"use strict";n.d(t,{x:function(){return m}});var a=n(3546),s=n(43240),l=n(11634),i=n(16784);let r=(0,s.BX)("\n  subscription CreateThreadAndRun($input: CreateThreadAndRunInput!) {\n    createThreadAndRun(input: $input) {\n      __typename\n      ... on ThreadCreated {\n        id\n      }\n      ... on ThreadUserMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageReadingCode {\n        snippet\n        fileList\n      }\n      ... on ThreadRelevantQuestions {\n        questions\n      }\n      ... on ThreadAssistantMessageAttachmentsCodeFileList {\n        codeFileList: fileList\n      }\n      ... on ThreadAssistantMessageAttachmentsCode {\n        hits {\n          code {\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on ThreadAssistantMessageAttachmentsDoc {\n        hits {\n          doc {\n            __typename\n            ... on MessageAttachmentWebDoc {\n              title\n              link\n              content\n            }\n            ... on MessageAttachmentIssueDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              closed\n            }\n            ... on MessageAttachmentPullDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              merged\n            }\n          }\n          score\n        }\n      }\n      ... on ThreadAssistantMessageContentDelta {\n        delta\n      }\n      ... on ThreadAssistantMessageCompleted {\n        id\n      }\n    }\n  }\n"),o=(0,s.BX)("\n  subscription CreateThreadRun($input: CreateThreadRunInput!) {\n    createThreadRun(input: $input) {\n      __typename\n      ... on ThreadCreated {\n        id\n      }\n      ... on ThreadUserMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageReadingCode {\n        snippet\n        fileList\n      }\n      ... on ThreadRelevantQuestions {\n        questions\n      }\n      ... on ThreadAssistantMessageAttachmentsCodeFileList {\n        codeFileList: fileList\n      }\n      ... on ThreadAssistantMessageAttachmentsCode {\n        hits {\n          code {\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on ThreadAssistantMessageAttachmentsDoc {\n        hits {\n          doc {\n            __typename\n            ... on MessageAttachmentWebDoc {\n              title\n              link\n              content\n            }\n            ... on MessageAttachmentIssueDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              closed\n            }\n            ... on MessageAttachmentPullDoc {\n              title\n              link\n              author {\n                id\n                email\n                name\n              }\n              body\n              merged\n            }\n          }\n          score\n        }\n      }\n      ... on ThreadAssistantMessageContentDelta {\n        delta\n      }\n      ... on ThreadAssistantMessageCompleted {\n        id\n      }\n    }\n  }\n"),c=(0,s.BX)("\n  mutation DeleteThreadMessagePair(\n    $threadId: ID!\n    $userMessageId: ID!\n    $assistantMessageId: ID!\n  ) {\n    deleteThreadMessagePair(\n      threadId: $threadId\n      userMessageId: $userMessageId\n      assistantMessageId: $assistantMessageId\n    )\n  }\n"),d=()=>({content:"",completed:!1,isReadingCode:!1,isReadingFileList:!1,isReadingDocs:!0});function m(e){let{threadId:t,onAssistantMessageCompleted:n}=e,[s,m]=a.useState(t),u=a.useRef(),[f,p]=a.useState(!1),[x,h]=a.useState(d()),[g,v]=a.useState(),b=(e,t)=>{let n={...e};switch(t.__typename){case"ThreadCreated":n.threadId=t.id;break;case"ThreadUserMessageCreated":n.userMessageId=t.id;break;case"ThreadAssistantMessageCreated":n.assistantMessageId=t.id;break;case"ThreadRelevantQuestions":n.relevantQuestions=t.questions;break;case"ThreadAssistantMessageReadingCode":n.isReadingCode=!0,n.isReadingFileList=!0,n.isReadingDocs=!0,n.readingCode={fileList:t.fileList,snippet:t.snippet};break;case"ThreadAssistantMessageAttachmentsCodeFileList":n.isReadingFileList=!1;break;case"ThreadAssistantMessageAttachmentsCode":n.isReadingCode=!1,n.attachmentsCode=t.hits;break;case"ThreadAssistantMessageAttachmentsDoc":n.attachmentsDoc=t.hits,n.isReadingDocs=!1;break;case"ThreadAssistantMessageContentDelta":n.isReadingCode=!1,n.isReadingFileList=!1,n.isReadingDocs=!1,n.content+=t.delta;break;case"ThreadAssistantMessageCompleted":n.completed=!0}return n},y=(0,i.d)(e=>{var t;null===(t=u.current)||void 0===t||t.call(u),u.current=void 0,p(!1),h(e=>({...e,isReadingCode:!1,isReadingFileList:!1,isReadingDocs:!1,completed:!0})),!e&&s&&(null==n||n(x))});a.useEffect(()=>{t!==s&&m(t)},[t]);let j=(e,t)=>{let{unsubscribe:n}=l.Lp.subscription(r,{input:{thread:{userMessage:e},options:t}}).subscribe(e=>{var t;if(null==e?void 0:e.error){p(!1),v(e.error),n();return}let a=null===(t=e.data)||void 0===t?void 0:t.createThreadAndRun;a&&((null==a?void 0:a.__typename)==="ThreadAssistantMessageCompleted"&&y.current(),(null==a?void 0:a.__typename)==="ThreadCreated"&&a.id!==s&&m(a.id),h(e=>b(e,a)))});return n},C=(e,t)=>{if(!s)return;let{unsubscribe:n}=l.Lp.subscription(o,{input:{threadId:s,additionalUserMessage:e,options:t}}).subscribe(e=>{var t;if(null==e?void 0:e.error){p(!1),v(e.error),n();return}let a=null===(t=e.data)||void 0===t?void 0:t.createThreadRun;a&&("ThreadAssistantMessageCompleted"===a.__typename&&y.current(),h(e=>b(e,a)))});return n},N=(0,l.Db)(c),k=(e,t)=>{f||(p(!0),v(void 0),h(d()),s?u.current=C(e,t):u.current=j(e,t))},w=(e,t,n)=>N({threadId:e,userMessageId:t,assistantMessageId:n}).then(e=>{var t;if(!(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deleteThreadMessagePair)){if(null==e?void 0:e.error)throw e.error;throw Error("Failed to fetch")}});return{isLoading:f,answer:x,error:g,sendUserMessage:k,stop:y.current,regenerate:e=>s?(p(!0),v(void 0),h(d()),w(e.threadId,e.userMessageId,e.assistantMessageId).then(()=>{k(e.userMessage,e.threadRunOptions)}).catch(e=>{let t=e instanceof Error?e:Error("Failed to fetch");v(t),p(!1)})):Promise.resolve(void 0),deleteThreadMessagePair:w}}},63484:function(e,t,n){"use strict";n.d(t,{U$:function(){return d},t:function(){return m}});var a=n(14283),s=n.n(a),l=n(34021),i=n(74630),r=n(18500),o=JSON.parse('{"Mercury":"#ff2b2b","TypeScript":"#2b7489","PureBasic":"#5a6986","Objective-C++":"#6866fb","Self":"#0579aa","edn":"#db5855","NewLisp":"#87AED7","Jupyter Notebook":"#DA5B0B","Rebol":"#358a5b","Frege":"#00cafe","Dart":"#00B4AB","AspectJ":"#a957b0","Shell":"#89e051","Web Ontology Language":"#9cc9dd","xBase":"#403a40","Eiffel":"#946d57","Nix":"#7e7eff","RAML":"#77d9fb","MTML":"#b7e1f4","Racket":"#22228f","Elixir":"#6e4a7e","SAS":"#B34936","Agda":"#315665","wisp":"#7582D1","D":"#ba595e","Kotlin":"#F18E33","Opal":"#f7ede0","Crystal":"#776791","Objective-C":"#438eff","ColdFusion CFC":"#ed2cd6","Oz":"#fab738","Mirah":"#c7a938","Objective-J":"#ff0c5a","Gosu":"#82937f","FreeMarker":"#0050b2","Ruby":"#701516","Component Pascal":"#b0ce4e","Arc":"#aa2afe","Brainfuck":"#2F2530","Nit":"#009917","APL":"#5A8164","Go":"#375eab","Visual Basic":"#945db7","PHP":"#4F5D95","Cirru":"#ccccff","SQF":"#3F3F3F","Glyph":"#e4cc98","Java":"#b07219","MAXScript":"#00a6a6","Scala":"#DC322F","Makefile":"#427819","ColdFusion":"#ed2cd6","Perl":"#0298c3","Lua":"#000080","Vue":"#2c3e50","Verilog":"#b2b7f8","Factor":"#636746","Haxe":"#df7900","Pure Data":"#91de79","Forth":"#341708","Red":"#ee0000","Hy":"#7790B2","Volt":"#1F1F1F","LSL":"#3d9970","eC":"#913960","CoffeeScript":"#244776","HTML":"#e44b23","Lex":"#DBCA00","API Blueprint":"#2ACCA8","Swift":"#ffac45","C":"#555555","AutoHotkey":"#6594b9","Isabelle":"#FEFE00","Metal":"#8f14e9","Clarion":"#db901e","JSONiq":"#40d47e","Boo":"#d4bec1","AutoIt":"#1C3552","Clojure":"#db5855","Rust":"#dea584","Prolog":"#74283c","SourcePawn":"#5c7611","AMPL":"#E6EFBB","FORTRAN":"#4d41b1","ANTLR":"#9DC3FF","Harbour":"#0e60e3","Tcl":"#e4cc98","BlitzMax":"#cd6400","PigLatin":"#fcd7de","Lasso":"#999999","ECL":"#8a1267","VHDL":"#adb2cb","Elm":"#60B5CC","Propeller Spin":"#7fa2a7","X10":"#4B6BEF","IDL":"#a3522f","ATS":"#1ac620","Ada":"#02f88c","Unity3D Asset":"#ab69a1","Nu":"#c9df40","LFE":"#004200","SuperCollider":"#46390b","Oxygene":"#cdd0e3","ASP":"#6a40fd","Assembly":"#6E4C13","Gnuplot":"#f0a9f0","JFlex":"#DBCA00","NetLinx":"#0aa0ff","Turing":"#45f715","Vala":"#fbe5cd","Processing":"#0096D8","Arduino":"#bd79d1","FLUX":"#88ccff","NetLogo":"#ff6375","CSharp":"#178600","CSS":"#563d7c","Emacs Lisp":"#c065db","Stan":"#b2011d","SaltStack":"#646464","QML":"#44a51c","Pike":"#005390","LOLCODE":"#cc9900","ooc":"#b0b77e","Handlebars":"#01a9d6","J":"#9EEDFF","Mask":"#f97732","EmberScript":"#FFF4F3","TeX":"#3D6117","Nemerle":"#3d3c6e","KRL":"#28431f","Ren\'Py":"#ff7f7f","Unified Parallel C":"#4e3617","Golo":"#88562A","Fancy":"#7b9db4","OCaml":"#3be133","Shen":"#120F14","Pascal":"#b0ce4e","F#":"#b845fc","Puppet":"#302B6D","ActionScript":"#882B0F","Diff":"#88dddd","Ragel in Ruby Host":"#9d5200","Fantom":"#dbded5","Zephir":"#118f9e","Click":"#E4E6F3","Smalltalk":"#596706","DM":"#447265","Ioke":"#078193","PogoScript":"#d80074","LiveScript":"#499886","JavaScript":"#f1e05a","VimL":"#199f4b","PureScript":"#1D222D","ABAP":"#E8274B","Matlab":"#bb92ac","Slash":"#007eff","R":"#198ce7","Erlang":"#B83998","Pan":"#cc0000","LookML":"#652B81","Eagle":"#814C05","Scheme":"#1e4aec","PLSQL":"#dad8d8","Python":"#3572A5","Max":"#c4a79c","Common Lisp":"#3fb68b","Latte":"#A8FF97","XQuery":"#5232e7","Omgrofl":"#cabbff","XC":"#99DA07","Nimrod":"#37775b","SystemVerilog":"#DAE1C2","Chapel":"#8dc63f","Groovy":"#e69f56","Dylan":"#6c616e","E":"#ccce35","Parrot":"#f3ca0a","Grammatical Framework":"#79aa7a","Game Maker Language":"#8fb200","Papyrus":"#6600cc","NetLinx+ERB":"#747faa","Clean":"#3F85AF","Alloy":"#64C800","Squirrel":"#800000","PAWN":"#dbb284","UnrealScript":"#a54c4d","Standard ML":"#dc566d","Slim":"#ff8f77","Perl6":"#0000fb","Julia":"#a270ba","Haskell":"#29b544","NCL":"#28431f","Io":"#a9188d","Rouge":"#cc0088","cpp":"#f34b7d","AGS Script":"#B9D9FF","Dogescript":"#cca760","nesC":"#94B0C7"}'),c={abap:{filenames:[],extnames:["abap"]},actionscript:{filenames:[],extnames:["as"]},ada:{filenames:[],extnames:["ada","adb","ads"]},apacheconf:{filenames:[".htaccess","apache2.conf","httpd.conf"],extnames:["apacheconf","vhost"]},apl:{filenames:[],extnames:["apl","dyalog"]},applescript:{filenames:[],extnames:["applescript","scpt"]},arff:{filenames:[],extnames:["arff"]},asciidoc:{filenames:[],extnames:["asciidoc","adoc","asc"]},asm6502:{filenames:[],extnames:["asm"]},autohotkey:{filenames:[],extnames:["ahk","ahkl"]},autoit:{filenames:[],extnames:["au3"]},bash:{filenames:[".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".login",".profile",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_logout","bash_profile","bashrc","cshrc","gradlew","login","man","profile","zlogin","zlogout","zprofile","zshenv","zshrc"],extnames:["sh","bash","bats","cgi","command","fcgi","ksh","tmux","tool","zsh"]},basic:{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},batch:{filenames:[],extnames:["bat","cmd"]},bison:{filenames:[],extnames:["bison"]},brainfuck:{filenames:[],extnames:["b","bf"]},bro:{filenames:[],extnames:["bro"]},c:{filenames:[],extnames:["c","cats","h","idc"]},csharp:{filenames:[],extnames:["cs","cake","cshtml","csx"]},cpp:{filenames:[],extnames:["cpp","c++","cc","cp","cxx","h","h++","hh","hpp","hxx","inc","inl","ino","ipp","re","tcc","tpp"]},coffeescript:{filenames:["Cakefile"],extnames:["coffee","_coffee","cake","cjsx","iced"]},clojure:{filenames:["riemann.config"],extnames:["clj","boot","cl2","cljc","cljs","cljs.hl","cljscm","cljx","hic"]},crystal:{filenames:[],extnames:["cr"]},css:{filenames:[],extnames:["css"]},d:{filenames:[],extnames:["d","di"]},dart:{filenames:[],extnames:["dart"]},diff:{filenames:[],extnames:["diff","patch"]},django:{filenames:[],extnames:["jinja","jinja2","mustache","njk"]},dockerfile:{filenames:["Dockerfile"],extnames:["dockerfile"]},eiffel:{filenames:[],extnames:["e"]},elixir:{filenames:["mix.lock"],extnames:["ex","exs"]},elm:{filenames:[],extnames:["elm"]},erb:{filenames:[],extnames:["erb"]},erlang:{filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"],extnames:["erl","app.src","es","escript","hrl","xrl","yrl"]},fsharp:{filenames:[],extnames:["fs","fsi","fsx"]},fortran:{filenames:[],extnames:["f90","f","f03","f08","f77","f95","for","fpp"]},gedcom:{filenames:[],extnames:["ged"]},gherkin:{filenames:[],extnames:["feature"]},glsl:{filenames:[],extnames:["glsl","fp","frag","frg","fs","fsh","fshader","geo","geom","glslv","gshader","shader","tesc","tese","vert","vrx","vsh","vshader"]},go:{filenames:[],extnames:["go"]},graphql:{filenames:[],extnames:["graphql","gql"]},groovy:{filenames:["Jenkinsfile"],extnames:["groovy","grt","gtpl","gvy"]},haml:{filenames:[],extnames:["haml"]},handlebars:{filenames:[],extnames:["handlebars","hbs"]},haskell:{filenames:[],extnames:["hs","hsc"]},haxe:{filenames:[],extnames:["hx","hxsl"]},http:{filenames:[],extnames:["http"]},icon:{filenames:[],extnames:["icn"]},inform7:{filenames:[],extnames:["ni","i7x"]},ini:{filenames:[".editorconfig",".gitconfig"],extnames:["ini","cfg","lektorproject","prefs","pro","properties"]},io:{filenames:[],extnames:["io"]},j:{filenames:[],extnames:["ijs"]},java:{filenames:[],extnames:["java"]},javascript:{filenames:["Jakefile"],extnames:["js","_js","cjs","bones","es","es6","frag","gs","jake","jsb","jscad","jsfl","jsm","jss","mjs","njs","pac","sjs","ssjs","xsjs","xsjslib"]},jolie:{filenames:[],extnames:["ol","iol"]},json:{filenames:[".arcconfig",".htmlhintrc",".tern-config",".tern-project","composer.lock","mcmod.info"],extnames:["json","avsc","geojson","gltf","JSON-tmLanguage","jsonl","tfstate","topojson","webapp","webmanifest","yy","yyp"]},julia:{filenames:[],extnames:["jl"]},keyman:{filenames:[],extnames:["kmn"]},kotlin:{filenames:[],extnames:["kt","ktm","kts"]},latex:{filenames:[],extnames:["tex","aux","bbx","bib","cbx","cls","dtx","ins","lbx","ltx","mkii","mkiv","mkvi","sty","toc"]},less:{filenames:[],extnames:["less"]},liquid:{filenames:[],extnames:["liquid"]},lisp:{filenames:[],extnames:["lisp","asd","cl","l","lsp","ny","podsl","sexp"]},livescript:{filenames:["Slakefile"],extnames:["ls","_ls"]},lolcode:{filenames:[],extnames:["lol"]},lua:{filenames:[],extnames:["lua","fcgi","nse","p8","pd_lua","rbxs","wlua"]},cmake:{filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"],extnames:["mak","d","make","mk","mkfile"]},markdown:{filenames:["contents.lr","LICENSE"],extnames:["md","markdown","mdown","mdwn","mkd","mkdn","mkdown","ronn","workbook"]},markup:{filenames:[],extnames:["apib","blade","chem","ecr","eex","ejs","html","htm","ipynb","kit","latte","marko","mask","mtml","phtml","pic","raml","rhtml","vue","xht","xhtml"]},matlab:{filenames:[],extnames:["matlab","m"]},mel:{filenames:[],extnames:["mel"]},mizar:{filenames:[],extnames:["miz","voc"]},monkey:{filenames:[],extnames:["monkey","monkey2"]},n4js:{filenames:[],extnames:["n4jsd"]},nasm:{filenames:[],extnames:["nasm"]},nginx:{filenames:["nginx.conf"],extnames:["nginxconf","vhost"]},nim:{filenames:[],extnames:["nim","nimrod"]},nix:{filenames:[],extnames:["nix"]},nsis:{filenames:[],extnames:["nsi","nsh"]},objectivec:{filenames:[],extnames:["m","h"]},ocaml:{filenames:[],extnames:["ml","eliom","eliomi","ml4","mli","mll","mly"]},opencl:{filenames:[],extnames:["opencl","cl"]},oz:{filenames:[],extnames:["oz"]},pascal:{filenames:[],extnames:["pas","dfm","dpr","inc","lpr","pascal","pp"]},perl:{filenames:["Makefile.PL","Rexfile","ack","cpanfile"],extnames:["pl","al","cgi","fcgi","perl","ph","plx","pm","psgi","t"]},php:{filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],extnames:["php","aw","ctp","fcgi","inc","php3","php4","php5","phps","phpt"]},plsql:{filenames:[],extnames:["pls","bdy","ddl","fnc","pck","pkb","pks","plb","plsql","prc","spc","tpb","tps","trg","vw"]},powershell:{filenames:[],extnames:["ps1","psd1","psm1"]},processing:{filenames:[],extnames:["pde"]},prolog:{filenames:[],extnames:["pl","pro","prolog","yap"]},properties:{filenames:[],extnames:["properties"]},protobuf:{filenames:[],extnames:["proto"]},pug:{filenames:[],extnames:["jade","pug"]},puppet:{filenames:["Modulefile"],extnames:["pp"]},pure:{filenames:[],extnames:["pure"]},python:{filenames:[".gclient","BUCK","BUILD","BUILD.bazel","SConscript","SConstruct","Snakefile","WORKSPACE","wscript"],extnames:["py","bzl","cgi","fcgi","gyp","gypi","lmi","py3","pyde","pyi","pyp","pyt","pyw","rpy","spec","tac","wsgi","xpy"]},q:{filenames:[],extnames:["q"]},qore:{filenames:[],extnames:["q","qm","qtest"]},r:{filenames:[".Rprofile","expr-dist"],extnames:["r","rd","rsx"]},jsx:{filenames:[],extnames:["jsx"]},toml:{filenames:[],extnames:["toml"]},tsx:{filenames:[],extnames:["tsx"]},renpy:{filenames:[],extnames:["rpy"]},reason:{filenames:[],extnames:["re","rei"]},rest:{filenames:[],extnames:["rst","rest"]},rip:{filenames:[],extnames:["rip"]},ruby:{filenames:[".irbrc",".pryrc","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Gemfile.lock","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Thorfile","Vagrantfile","buildfile"],extnames:["rb","builder","eye","fcgi","gemspec","god","jbuilder","mspec","pluginspec","podspec","rabl","rake","rbuild","rbw","rbx","ru","ruby","spec","thor","watchr"]},rust:{filenames:[],extnames:["rs"]},sas:{filenames:[],extnames:["sas"]},sass:{filenames:[],extnames:["sass"]},scss:{filenames:[],extnames:["scss"]},scala:{filenames:[],extnames:["scala","kojo","sbt","sc"]},scheme:{filenames:[],extnames:["scm","sch","sld","sls","sps","ss"]},smalltalk:{filenames:[],extnames:["st","cs"]},smarty:{filenames:[],extnames:["tpl"]},sql:{filenames:[],extnames:["sql","cql","ddl","inc","mysql","prc","tab","udf","viw"]},soy:{filenames:[],extnames:["soy"]},stylus:{filenames:[],extnames:["styl"]},swift:{filenames:[],extnames:["swift"]},tcl:{filenames:["owh","starfield"],extnames:["tcl","adp","tm"]},textile:{filenames:[],extnames:["textile"]},tt2:{filenames:[],extnames:["pm"]},twig:{filenames:[],extnames:["twig"]},typescript:{filenames:[],extnames:["ts"]},velocity:{filenames:[],extnames:["vm"]},verilog:{filenames:[],extnames:["v","veo"]},vhdl:{filenames:[],extnames:["vhdl","vhd","vhf","vhi","vho","vhs","vht","vhw"]},vim:{filenames:[".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"],extnames:["vim"]},"visual-basic":{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},wasm:{filenames:[],extnames:["wast","wat"]},xojo:{filenames:[],extnames:["xojo_code","xojo_menu","xojo_report","xojo_script","xojo_toolbar","xojo_window"]},xquery:{filenames:[],extnames:["xquery","xq","xql","xqm","xqy"]},yaml:{filenames:[".clang-format",".clang-tidy",".gemrc","glide.lock"],extnames:["yml","mir","reek","rviz","sublime-syntax","syntax","yaml","yaml-tmlanguage"]}};Object.entries(o).reduce((e,t)=>{let[n,a]=t;return{...e,[n.toLocaleLowerCase()]:a}},{});let d=e=>{let t={},n={};for(let[e,a]of Object.entries(c)){for(let n of a.filenames)(0,l.Z)(t,n)||(t[n]=[]),t[n].push(e);for(let t of a.extnames)(0,l.Z)(n,t)||(n[t]=[]),n[t].push(e)}return[].concat(t[s().basename(e)],n[s().extname(e).substring(1)]).filter(Boolean)},m=(e,t)=>{let n=()=>(0,i.Z)(t)?"Other":t;if(!e)return n();let a=Object.values(r.SQ).map(e=>e.toLocaleLowerCase()).indexOf(e.toLocaleLowerCase());if(-1===a)return n();let s=Object.keys(r.SQ)[a];return({csharp:"C#",cpp:"C++",javascript:"JavaScript",typescript:"TypeScript"})[s.toLocaleLowerCase()]||s}},47241:function(e,t,n){"use strict";n.d(t,{Eg:function(){return l},UP:function(){return o},qs:function(){return r},xt:function(){return i}});var a=n(17451);let s=a.a.setState,l=e=>{s(()=>({selectedModel:e}))},i=e=>{s(()=>({selectedRepoSourceId:e}))},r=e=>{s(()=>({enableActiveSelection:e}))},o=e=>{s(()=>({pendingUserMessage:e}))}},17451:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var a=n(27257),s=n(85654),l=n(57288);let i=["activeChatId","pendingUserMessage"],r={activeChatId:(0,l.x0)(),selectedModel:void 0,selectedRepoSourceId:void 0,enableActiveSelection:!0,pendingUserMessage:void 0},o=(0,a.Ue)()((0,s.tJ)(()=>({...r}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!i.includes(t)})),version:1}))},67325:function(){},23342:function(e,t){"use strict";t.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}}]);
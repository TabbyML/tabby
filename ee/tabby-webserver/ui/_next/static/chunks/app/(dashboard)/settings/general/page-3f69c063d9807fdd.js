(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1519],{77280:function(e,t,r){Promise.resolve().then(r.bind(r,80522))},80522:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Q}});var n=r(57437),i=r(2265),l=r(16775),s=r(93111),a=r(39311);let o=e=>{let{title:t,className:r,children:i,...l}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("lg:flex",r),...l,children:[(0,n.jsx)("div",{className:"text-left lg:w-1/5",children:(0,n.jsx)("h1",{className:"text-2xl font-bold",children:t})}),(0,n.jsx)("div",{className:"flex-1 lg:px-4",children:(0,n.jsx)("div",{className:"mb-7 mt-4 lg:mt-0",children:i})})]})};var c=r(38110),u=r(42910),d=r(61865),f=r(71424),m=r(99109),x=r(74578),h=r(58835),p=r(7820),v=r(93023),b=r(41315),g=r(51908);let j=(0,h.BX)("\n  mutation updateNetworkSettingMutation($input: NetworkSettingInput!) {\n    updateNetworkSetting(input: $input)\n  }\n"),y=(0,h.BX)("\n  query NetworkSetting {\n    networkSetting {\n      externalUrl\n    }\n  }\n"),N=x.Ry({externalUrl:x.Z_()}),w=e=>{let{onSuccess:t,defaultValues:r}=e,l=i.useMemo(()=>({...r||{}}),[r]),s=(0,d.cI)({resolver:(0,c.F)(N),defaultValues:l}),a=!(0,u.Z)(s.formState.dirtyFields),o=(0,p.Db)(j,{form:s,onCompleted(e){(null==e?void 0:e.updateNetworkSetting)&&(null==t||t(),s.reset(s.getValues()))}}),f=async()=>{await o({input:s.getValues()})};return(0,n.jsx)(b.l0,{...s,children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:s.handleSubmit(f),children:[(0,n.jsx)(b.Wi,{control:s.control,name:"externalUrl",render:e=>{let{field:t}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsx)(b.lX,{children:"External URL"}),(0,n.jsx)(b.pf,{children:"The external URL where user visits Tabby, must start with http:// or https://."}),(0,n.jsx)(b.NI,{children:(0,n.jsx)(g.I,{placeholder:"http://localhost:8080",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",...t})}),(0,n.jsx)(b.zG,{})]})}}),(0,n.jsx)("div",{className:"mt-2 flex justify-end",children:(0,n.jsx)(v.z,{type:"submit",disabled:!a,children:"Update"})})]}),(0,n.jsx)(b.zG,{className:"text-center"})]})})},k=()=>{let[{data:e}]=(0,m.aM)({query:y});return e&&(0,n.jsx)(w,{defaultValues:e.networkSetting,onSuccess:()=>{f.A.success("Network configuration is updated")}})};var S=r(72999),C=r(13428),R=r(42210),E=r(56989),I=r(85744),D=r(73763),z=r(85184),Z=r(94977),L=r(85606),_=r(9381);let F="Checkbox",[M,O]=(0,E.b)(F),[T,V]=M(F),W=(0,i.forwardRef)((e,t)=>{let{__scopeCheckbox:r,name:n,checked:l,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:u,...d}=e,[f,m]=(0,i.useState)(null),x=(0,R.e)(t,e=>m(e)),h=(0,i.useRef)(!1),p=!f||!!f.closest("form"),[v=!1,b]=(0,D.T)({prop:l,defaultProp:s,onChange:u}),g=(0,i.useRef)(v);return(0,i.useEffect)(()=>{let e=null==f?void 0:f.form;if(e){let t=()=>b(g.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,b]),(0,i.createElement)(T,{scope:r,state:v,disabled:o},(0,i.createElement)(_.WV.button,(0,C.Z)({type:"button",role:"checkbox","aria-checked":A(v)?"mixed":v,"aria-required":a,"data-state":P(v),"data-disabled":o?"":void 0,disabled:o,value:c},d,{ref:x,onKeyDown:(0,I.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,I.M)(e.onClick,e=>{b(e=>!!A(e)||!e),p&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})),p&&(0,i.createElement)(q,{control:f,bubbles:!h.current,name:n,value:c,checked:v,required:a,disabled:o,style:{transform:"translateX(-100%)"}}))}),X=(0,i.forwardRef)((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...l}=e,s=V("CheckboxIndicator",r);return(0,i.createElement)(L.z,{present:n||A(s.state)||!0===s.state},(0,i.createElement)(_.WV.span,(0,C.Z)({"data-state":P(s.state),"data-disabled":s.disabled?"":void 0},l,{ref:t,style:{pointerEvents:"none",...e.style}})))}),q=e=>{let{control:t,checked:r,bubbles:n=!0,...l}=e,s=(0,i.useRef)(null),a=(0,z.D)(r),o=(0,Z.t)(t);return(0,i.useEffect)(()=>{let e=s.current,t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked"),l=i.set;if(a!==r&&l){let t=new Event("click",{bubbles:n});e.indeterminate=A(r),l.call(e,!A(r)&&r),e.dispatchEvent(t)}},[a,r,n]),(0,i.createElement)("input",(0,C.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!A(r)&&r},l,{tabIndex:-1,ref:s,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function A(e){return"indeterminate"===e}function P(e){return A(e)?"indeterminate":e?"checked":"unchecked"}var U=r(84168);let $=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(W,{ref:t,className:(0,a.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,n.jsx)(X,{className:(0,a.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(U.IconCheck,{className:"h-4 w-4"})})})});$.displayName=W.displayName;let B=(0,h.BX)("\n  mutation updateSecuritySetting($input: SecuritySettingInput!) {\n    updateSecuritySetting(input: $input)\n  }\n"),G=(0,h.BX)("\n  query SecuritySetting {\n    securitySetting {\n      allowedRegisterDomainList\n      disableClientSideTelemetry\n    }\n  }\n"),J=x.Ry({disableClientSideTelemetry:x.O7(),allowedRegisterDomainList:x.IX(x.Ry({value:x.Z_()})).optional()}),H=e=>{let{onSuccess:t,defaultValues:r}=e,l=i.useMemo(()=>({...r||{}}),[r]),s=(0,d.cI)({resolver:(0,c.F)(J),defaultValues:l}),{fields:o,append:f,remove:m,update:x}=(0,d.Dq)({control:s.control,name:"allowedRegisterDomainList"}),h=!(0,u.Z)(s.formState.dirtyFields),j=e=>{(null==o?void 0:o.length)===1&&0===e?x(e,{value:""}):m(e)},y=e=>{"Enter"!==e.key||e.nativeEvent.isComposing||(e.preventDefault(),f({value:""}))},N=(0,p.Db)(B,{form:s,onCompleted(e){(null==e?void 0:e.updateSecuritySetting)&&(null==t||t(),s.reset(s.getValues()))}}),w=async e=>{let{allowedRegisterDomainList:t,...r}=e;await N({input:{allowedRegisterDomainList:function(e){let t=(0,S.Z)(null==e?void 0:e.map(e=>e.value));return t}(t),...r}})};return(0,n.jsx)(b.l0,{...s,children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:s.handleSubmit(w),children:[(0,n.jsx)(b.Wi,{control:s.control,name:"disableClientSideTelemetry",render:e=>{let{field:t}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(b.NI,{children:(0,n.jsx)($,{checked:t.value,onCheckedChange:t.onChange})}),(0,n.jsx)(b.lX,{className:"cursor-pointer",children:"Disabling Client Side Telemetry"})]}),(0,n.jsx)(b.pf,{children:"When activated, the client-side telemetry (IDE/Extensions) will be disabled, regardless of the client-side settings."})]})}}),(0,n.jsxs)("div",{children:[o.map((e,t)=>(0,n.jsx)(b.Wi,{control:s.control,name:"allowedRegisterDomainList.".concat(t,".value"),render:e=>{let{field:r}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsx)(b.lX,{className:(0,a.cn)(0!==t&&"sr-only"),children:"Domain List for Register (without an Invitation)"}),(0,n.jsx)(b.pf,{className:(0,a.cn)(0!==t&&"sr-only"),children:"Add domains for register without an invitation."}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(b.NI,{children:(0,n.jsx)(g.I,{placeholder:"e.g. tabbyml.com",...r,onKeyDown:y})}),(0,n.jsx)(v.z,{variant:"hover-destructive",onClick:e=>j(t),children:(0,n.jsx)(U.IconTrash,{})})]}),(0,n.jsx)(b.zG,{})]})}},e.id)),(0,n.jsx)("div",{children:(0,n.jsx)(v.z,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>f({value:""}),children:"Add domain"})})]}),(0,n.jsx)("div",{className:"mt-2 flex justify-end",children:(0,n.jsx)(v.z,{type:"submit",disabled:!h,children:"Update"})})]}),(0,n.jsx)(b.zG,{className:"text-center"})]})})},K=()=>{let[{data:e}]=(0,m.aM)({query:G}),t=e&&{...e.securitySetting,allowedRegisterDomainList:function(e){let t=null==e?void 0:e.map(e=>({value:e}));return t&&0!==t.length?t:[{value:""}]}(e.securitySetting.allowedRegisterDomainList)};return e&&(0,n.jsx)(H,{defaultValues:t,onSuccess:()=>{f.A.success("Network configuration is updated")}})};function Q(){let[e,t]=i.useState(!1);return(i.useEffect(()=>{setTimeout(()=>{t(!0)},500)},[]),e)?(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)(o,{title:"Network",children:(0,n.jsx)(k,{})}),(0,n.jsx)(l.Z,{className:"mb-8"}),(0,n.jsx)(o,{title:"Security",children:(0,n.jsx)(K,{})})]}):(0,n.jsx)(s.c,{})}},93111:function(e,t,r){"use strict";r.d(t,{c:function(){return l}});var n=r(57437),i=r(25645);let l=()=>(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(i.O,{className:"h-4 w-full"}),(0,n.jsx)(i.O,{className:"h-4 w-full"}),(0,n.jsx)(i.O,{className:"h-4 w-full"}),(0,n.jsx)(i.O,{className:"h-4 w-full"})]})},41315:function(e,t,r){"use strict";r.d(t,{NI:function(){return p},Wi:function(){return d},l0:function(){return c},lX:function(){return h},pf:function(){return v},xJ:function(){return x},zG:function(){return b}});var n=r(57437),i=r(2265),l=r(67256),s=r(61865),a=r(39311),o=r(66672);let c=s.RV,u=i.createContext({}),d=e=>{let{...t}=e;return(0,n.jsx)(u.Provider,{value:{name:t.name},children:(0,n.jsx)(s.Qr,{...t})})},f=()=>{let e=i.useContext(u),t=i.useContext(m),{getFieldState:r,formState:n}=(0,s.Gc)(),l=e.name||"root",a=r(l,n);if(!n)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:l,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},m=i.createContext({}),x=i.forwardRef((e,t)=>{let{className:r,...l}=e,s=i.useId();return(0,n.jsx)(m.Provider,{value:{id:s},children:(0,n.jsx)("div",{ref:t,className:(0,a.cn)("space-y-2",r),...l})})});x.displayName="FormItem";let h=i.forwardRef((e,t)=>{let{className:r,required:i,...l}=e,{error:s,formItemId:c}=f();return(0,n.jsx)(o._,{ref:t,className:(0,a.cn)(s&&"text-destructive",i&&'after:ml-0.5 after:text-destructive after:content-["*"]',r),htmlFor:c,...l})});h.displayName="FormLabel";let p=i.forwardRef((e,t)=>{let{...r}=e,{error:i,formItemId:s,formDescriptionId:a,formMessageId:o}=f();return(0,n.jsx)(l.g7,{ref:t,id:s,"aria-describedby":i?"".concat(a," ").concat(o):"".concat(a),"aria-invalid":!!i,...r})});p.displayName="FormControl";let v=i.forwardRef((e,t)=>{let{className:r,...i}=e,{formDescriptionId:l}=f();return(0,n.jsx)("p",{ref:t,id:l,className:(0,a.cn)("text-sm text-muted-foreground",r),...i})});v.displayName="FormDescription";let b=i.forwardRef((e,t)=>{let{className:r,children:i,...l}=e,{error:s,formMessageId:o}=f(),c=s?String(null==s?void 0:s.message):i;return c?(0,n.jsx)("p",{ref:t,id:o,className:(0,a.cn)("text-sm font-medium text-destructive",r),...l,children:c}):null});b.displayName="FormMessage"},66672:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(57437),i=r(2265),l=r(36743),s=r(7404),a=r(39311);let o=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(l.f,{ref:t,className:(0,a.cn)(o(),r),...i})});c.displayName=l.f.displayName},16775:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(57437),i=r(2265),l=r(26823),s=r(39311);let a=i.forwardRef((e,t)=>{let{className:r,orientation:i="horizontal",decorative:a=!0,...o}=e;return(0,n.jsx)(l.f,{ref:t,decorative:a,orientation:i,className:(0,s.cn)("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r),...o})});a.displayName=l.f.displayName},25645:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var n=r(57437),i=r(39311);function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("h-4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",t),...r})}},26823:function(e,t,r){"use strict";r.d(t,{f:function(){return u}});var n=r(13428),i=r(2265),l=r(9381);let s="horizontal",a=["horizontal","vertical"],o=(0,i.forwardRef)((e,t)=>{let{decorative:r,orientation:a=s,...o}=e,u=c(a)?a:s;return(0,i.createElement)(l.WV.div,(0,n.Z)({"data-orientation":u},r?{role:"none"}:{"aria-orientation":"vertical"===u?u:void 0,role:"separator"},o,{ref:t}))});function c(e){return a.includes(e)}o.propTypes={orientation(e,t,r){let n=e[t],i=String(n);return n&&!c(n)?Error(`Invalid prop \`orientation\` of value \`${i}\` supplied to \`${r}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${s}\`.`):null}};let u=o},85184:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(2265);function i(e){let t=(0,n.useRef)({value:e,previous:e});return(0,n.useMemo)(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},94977:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});var n=r(2265),i=r(51030);function l(e){let[t,r]=(0,n.useState)(void 0);return(0,i.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let l=t[0];if("borderBoxSize"in l){let e=l.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}},72999:function(e,t){"use strict";t.Z=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var l=e[t];l&&(i[n++]=l)}return i}},42910:function(e,t,r){"use strict";var n=r(42123),i=r(97113),l=r(98220),s=r(5541),a=r(85222),o=r(55250),c=r(26343),u=r(2856),d=Object.prototype.hasOwnProperty;t.Z=function(e){if(null==e)return!0;if((0,a.Z)(e)&&((0,s.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,o.Z)(e)||(0,u.Z)(e)||(0,l.Z)(e)))return!e.length;var t=(0,i.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,c.Z)(e))return!(0,n.Z)(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}}},function(e){e.O(0,[1091,2195,1424,5489,3072,9233,4402,1894,2032,2971,7864,1744],function(){return e(e.s=77280)}),_N_E=e.O()}]);
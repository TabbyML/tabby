(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{14375:function(e,n,t){"use strict";t.d(n,{j:function(){return i}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.flat(1/0).filter(Boolean).join(" ")},i=(e,n)=>t=>{var i;if((null==n?void 0:n.variants)==null)return l(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:s,defaultVariants:o}=n,a=Object.keys(s).map(e=>{let n=null==t?void 0:t[e],l=null==o?void 0:o[e];if(null===n)return null;let i=r(n)||r(l);return s[e][i]}),u=t&&Object.entries(t).reduce((e,n)=>{let[t,r]=n;return void 0===r||(e[t]=r),e},{}),d=null==n?void 0:null===(i=n.compoundVariants)||void 0===i?void 0:i.reduce((e,n)=>{let{class:t,className:r,...l}=n;return Object.entries(l).every(e=>{let[n,t]=e;return Array.isArray(t)?t.includes({...o,...u}[n]):({...o,...u})[n]===t})?[...e,t,r]:e},[]);return l(e,a,d,null==t?void 0:t.class,null==t?void 0:t.className)}},7922:function(e,n,t){Promise.resolve().then(t.bind(t,71901))},71901:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(36164),l=t(70652),i=t.n(l),s=t(31458),o=t(3546),a=t(2578),u=t(40055),d=t(21808),c=t(43240),v=t(11634),f=t(70410),x=t(81565),j=t(49506),h=t(99047),g=t(6230),m=t(55137),p=t(14522);let N=(0,c.BX)("\n  mutation deleteGitRepository($id: ID!) {\n    deleteGitRepository(id: $id)\n  }\n"),b=d.L8;function y(){var e,n;let[t,l]=o.useState(),[{data:i,fetching:d},c]=(0,u.aM)({query:f.S1,variables:{last:b,before:t}}),[y,w]=o.useState(1),k=o.useMemo(()=>{var e,n;return null==i?void 0:null===(n=i.gitRepositories)||void 0===n?void 0:null===(e=n.edges)||void 0===e?void 0:e.slice().reverse()},[null==i?void 0:null===(e=i.gitRepositories)||void 0===e?void 0:e.edges]),C=null==i?void 0:null===(n=i.gitRepositories)||void 0===n?void 0:n.pageInfo,R=Math.ceil(((null==k?void 0:k.length)||0)/b),I=e=>{var n,t;return null==k?void 0:null===(t=k.slice(0,(e-1)*b))||void 0===t?void 0:null===(n=t.pop())||void 0===n?void 0:n.cursor},P=e=>{l(I(e))},S=o.useMemo(()=>{var e;return null==k?void 0:null===(e=k.slice)||void 0===e?void 0:e.call(k,(y-1)*b,y*b)},[y,k]),Z=(null==C?void 0:C.hasPreviousPage)||y<R,A=y>1,$=!!(null==S?void 0:S.length)&&(Z||A),O=(0,v.D)(N),_=(0,v.D)(p.C),G=(e,n)=>{O({id:e}).then(e=>{var t,r;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deleteGitRepository)?P(n?y-1:y):a.A.error((null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to delete repository")})},M=e=>_({command:e}).then(e=>{var n,t;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.triggerJobRun)?(a.A.success("The job has been triggered successfully, it may take a few minutes to process."),c()):a.A.error((null==e?void 0:null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to trigger job")});return o.useEffect(()=>{!d&&R<y&&y>1&&w(R)},[R,y]),(0,r.jsxs)(g.Z,{loading:d,children:[(0,r.jsxs)(h.iA,{className:"table-fixed border-t",children:[(0,r.jsx)(h.xD,{children:(0,r.jsxs)(h.SC,{children:[(0,r.jsx)(h.ss,{className:"w-[25%]",children:"Name"}),(0,r.jsx)(h.ss,{className:"w-[45%]",children:"Git URL"}),(0,r.jsx)(h.ss,{children:"Job"}),(0,r.jsx)(h.ss,{className:"w-[100px]"})]})}),(0,r.jsx)(h.RM,{children:(null==S?void 0:S.length)||1!==y?(0,r.jsx)(r.Fragment,{children:null==S?void 0:S.map(e=>(0,r.jsxs)(h.SC,{children:[(0,r.jsx)(h.pj,{className:"break-all lg:break-words",title:e.node.name,children:e.node.name}),(0,r.jsx)(h.pj,{className:"break-all lg:break-words",title:e.node.gitUrl,children:e.node.gitUrl}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(m._,{jobInfo:e.node.jobInfo,onTrigger:()=>M(e.node.jobInfo.command)})}),(0,r.jsx)(h.pj,{className:"text-right",children:(0,r.jsx)(s.z,{size:"icon",variant:"hover-destructive",onClick:()=>G(e.node.id,1===S.length),children:(0,r.jsx)(x.IconTrash,{})})})]},e.node.id))}):(0,r.jsx)(h.SC,{children:(0,r.jsx)(h.pj,{colSpan:4,className:"h-[100px] text-center",children:"No Data"})})})]}),$&&(0,r.jsx)(j.tl,{className:"my-4",children:(0,r.jsxs)(j.ng,{children:[(0,r.jsx)(j.nt,{children:(0,r.jsx)(j.dN,{disabled:!A,onClick:()=>{if(y<=1||d)return;let e=y-1;P(e),w(e)}})}),(0,r.jsx)(j.nt,{children:(0,r.jsx)(j.$0,{disabled:!Z,onClick:()=>{if(!Z||d)return;let e=y+1;P(e),w(e)}})})]})})]})}function w(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"my-4 flex justify-end",children:(0,r.jsx)(i(),{href:"./git/new",className:(0,s.d)(),children:"Create"})}),(0,r.jsx)(y,{})]})}},49506:function(e,n,t){"use strict";t.d(n,{$0:function(){return f},dN:function(){return v},ng:function(){return u},nt:function(){return d},tl:function(){return a}});var r=t(36164),l=t(3546),i=t(74248),s=t(31458),o=t(81565);let a=e=>{let{className:n,...t}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",n),...t})};a.displayName="Pagination";let u=l.forwardRef((e,n)=>{let{className:t,...l}=e;return(0,r.jsx)("ul",{ref:n,className:(0,i.cn)("flex flex-row items-center gap-1",t),...l})});u.displayName="PaginationContent";let d=l.forwardRef((e,n)=>{let{className:t,...l}=e;return(0,r.jsx)("li",{ref:n,className:(0,i.cn)("",t),...l})});d.displayName="PaginationItem";let c=e=>{let{className:n,isActive:t,size:l="icon",...o}=e;return(0,r.jsx)("a",{"aria-current":t?"page":void 0,className:(0,i.cn)((0,s.d)({variant:t?"outline":"ghost",size:l}),n),...o})};c.displayName="PaginationLink";let v=e=>{let{className:n,disabled:t,...l}=e;return(0,r.jsxs)(c,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("cursor-pointer gap-1 pl-2.5",t&&"cursor-not-allowed text-muted-foreground",n),...l,children:[(0,r.jsx)(o.IconChevronLeft,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};v.displayName="PaginationPrevious";let f=e=>{let{className:n,disabled:t,...l}=e;return(0,r.jsxs)(c,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("cursor-pointer gap-1 pr-2.5",t&&"cursor-not-allowed text-muted-foreground",n),...l,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(o.IconChevronRight,{className:"h-4 w-4"})]})};f.displayName="PaginationNext"},70652:function(e,n,t){e.exports=t(54007)},29434:function(e,n,t){"use strict";t.d(n,{M:function(){return a}});var r,l=t(3546),i=t(65292);let s=(r||(r=t.t(l,2)))["useId".toString()]||(()=>void 0),o=0;function a(e){let[n,t]=l.useState(s());return(0,i.b)(()=>{e||t(e=>null!=e?e:String(o++))},[e]),e||(n?`radix-${n}`:"")}},18216:function(e,n,t){"use strict";var r=t(6670),l=/^\s+/;n.Z=function(e){return e?e.slice(0,(0,r.Z)(e)+1).replace(l,""):e}},6670:function(e,n){"use strict";var t=/\s/;n.Z=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},84639:function(e,n){"use strict";n.Z=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},26165:function(e,n,t){"use strict";var r=t(18216),l=t(84639),i=t(55357),s=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;n.Z=function(e){if("number"==typeof e)return e;if((0,i.Z)(e))return s;if((0,l.Z)(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=(0,l.Z)(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.Z)(e);var t=a.test(e);return t||u.test(e)?d(e.slice(2),t?2:8):o.test(e)?s:+e}}},function(e){e.O(0,[7565,7998,5498,4007,1058,530,7980,259,2578,4421,9736,1565,3396,1666,3375,5289,1744],function(){return e(e.s=7922)}),_N_E=e.O()}]);
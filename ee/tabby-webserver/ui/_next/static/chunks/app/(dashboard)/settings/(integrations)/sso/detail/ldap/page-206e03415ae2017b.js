(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1704],{48850:function(e,n,t){Promise.resolve().then(t.bind(t,61367))},61367:function(e,n,t){"use strict";t.r(n),t.d(n,{LdapCredentialDetail:function(){return m}});var s=t(36164),r=t(3546),l=t(11978),i=t(74630),a=t(25937),u=t(40055),c=t(70410),d=t(6230),o=t(90379),f=t(20255),h=t(31988);let m=()=>{let e=(0,l.useRouter)(),[{data:n,fetching:t}]=(0,u.aM)({query:c.wz}),m=null==n?void 0:n.ldapCredential,x=r.useMemo(()=>{if(m)return(0,a.Z)(m,e=>!(0,i.Z)(e))},[m]);return(0,s.jsx)("div",{children:(0,s.jsxs)(d.Z,{loading:t,fallback:(0,s.jsx)(o.cg,{className:"mt-2"}),children:[(0,s.jsx)(h.w,{value:"ldap",readonly:!0}),(0,s.jsx)(f.u,{defaultValues:x,onSuccess:()=>{e.push("/settings/sso")}})]})})}},94770:function(e,n,t){"use strict";t.d(n,{M:function(){return f}});var s=t(36164),r=t(3546),l=t(70652),i=t.n(l),a=t(88542),u=t(29917),c=t(57288),d=t(31458),o=t(90615);let f=e=>{let{licenses:n,children:t}=e,[l,i]=r.useState(!1),a=(0,u.Gm)(),d=(0,u.Cz)({licenses:n}),{isLicenseOK:f,hasSufficientLicense:m}=d,x=m&&f,p=e=>{x||i(e)};return(0,s.jsxs)(o.zs,{open:l,onOpenChange:p,openDelay:100,children:[(0,s.jsx)(o.bZ,{side:"top",collisionPadding:16,className:"w-[400px]",children:(0,s.jsx)(h,{licenses:n,...d})}),(0,s.jsx)(o.Yi,{asChild:!0,onClick:e=>{x||(e.preventDefault(),p(!0))},children:(0,s.jsx)("div",{className:(0,c.cn)(x?"":"cursor-not-allowed"),children:t({hasValidLicense:x,license:a})})})]})};function h(e){let{hasSufficientLicense:n,isExpired:t,isSeatsExceeded:r,licenses:l}=e,u=(0,a.Z)(l[0]),c=u;return(2==l.length&&(c="".concat((0,a.Z)(l[0])," or ").concat((0,a.Z)(l[1]))),n&&t)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"Your license has expired. Please update your license to use this feature."}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(i(),{className:(0,d.d)(),href:"/settings/subscription",children:"Update license"})})]}):n&&r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"Your seat count has exceeded the limit. Please upgrade your license to continue using this feature."}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(i(),{className:(0,d.d)(),href:"/settings/subscription",children:"Upgrade license"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["This feature is only available on Tabby's"," ",(0,s.jsx)("span",{className:"font-semibold",children:c})," plan. Upgrade to use this feature."]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)(i(),{className:(0,d.d)(),href:"/settings/subscription",children:["Upgrade to ",u]})})]})}f.displayName="LicenseGuard"},6230:function(e,n,t){"use strict";var s=t(36164),r=t(3546),l=t(24449),i=t(90379);n.Z=e=>{let{loading:n,fallback:t,delay:a,children:u}=e,[c,d]=r.useState(!n),[o]=(0,l.n)(c,null!=a?a:200);return(r.useEffect(()=>{n||c||d(!0)},[n]),o)?u:t||(0,s.jsx)(i.cg,{})}},90379:function(e,n,t){"use strict";t.d(n,{PF:function(){return u},cg:function(){return i},tB:function(){return a}});var s=t(36164),r=t(57288),l=t(3448);let i=e=>{let{className:n,...t}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("space-y-3",n),...t,children:[(0,s.jsx)(l.O,{className:"h-4 w-full"}),(0,s.jsx)(l.O,{className:"h-4 w-full"}),(0,s.jsx)(l.O,{className:"h-4 w-full"}),(0,s.jsx)(l.O,{className:"h-4 w-full"})]})},a=e=>{let{className:n,...t}=e;return(0,s.jsx)(l.O,{className:(0,r.cn)("h-4 w-full",n),...t})},u=e=>{let{className:n,...t}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3",n),...t,children:[(0,s.jsx)(l.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(l.O,{className:"h-4 w-full"}),(0,s.jsx)(l.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(l.O,{className:"h-4 w-full"})]})}},90615:function(e,n,t){"use strict";t.d(n,{Yi:function(){return u},bZ:function(){return c},zs:function(){return a}});var s=t(36164),r=t(3546),l=t(38421),i=t(57288);let a=l.fC,u=l.xz;l.h_;let c=r.forwardRef((e,n)=>{let{className:t,align:r="center",sideOffset:a=4,...u}=e;return(0,s.jsx)(l.VY,{ref:n,align:r,sideOffset:a,className:(0,i.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...u})});c.displayName=l.VY.displayName},3448:function(e,n,t){"use strict";t.d(n,{O:function(){return l}});var s=t(36164),r=t(57288);function l(e){let{className:n,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("h-4 animate-pulse rounded-md bg-border",n),...t})}},24449:function(e,n,t){"use strict";t.d(n,{S:function(){return a},n:function(){return u}});var s=t(3546),r=t(45391),l=t(16784);let i=e=>{let n=(0,l.d)(e);s.useEffect(()=>()=>{n.current()},[])};function a(e,n,t){let a=(0,l.d)(e),u=s.useMemo(()=>(0,r.Z)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return a.current(...n)},n,t),[]);return i(()=>{var e;null==t||null===(e=t.onUnmount)||void 0===e||e.call(t,u),u.cancel()}),{run:u,cancel:u.cancel,flush:u.flush}}function u(e,n,t){let[r,l]=s.useState(e),{run:i}=a(()=>{l(e)},n,t);return s.useEffect(()=>{i()},[e]),[r,l]}},16784:function(e,n,t){"use strict";t.d(n,{d:function(){return r}});var s=t(3546);function r(e){let n=s.useRef(e);return n.current=e,n}},29917:function(e,n,t){"use strict";t.d(n,{Cz:function(){return d},Gm:function(){return c},jp:function(){return u}});var s=t(11978),r=t(40055),l=t(43240),i=t(18500);let a=(0,l.BX)("\n  query GetLicenseInfo {\n    license {\n      type\n      status\n      seats\n      seatsUsed\n      issuedAt\n      expiresAt\n    }\n  }\n"),u=()=>(0,r.aM)({query:a}),c=()=>{let[{data:e}]=u();return null==e?void 0:e.license},d=e=>{var n;let[{data:t}]=u(),r=null==t?void 0:t.license,l=(0,s.useSearchParams)(),a=!!r&&(!(null==e?void 0:null===(n=e.licenses)||void 0===n?void 0:n.length)||e.licenses.includes(r.type)),c=(null==r?void 0:r.status)===i.rW.Ok,d=(null==r?void 0:r.status)===i.rW.Expired,o=(null==r?void 0:r.status)===(null===i.rW||void 0===i.rW?void 0:i.rW.SeatsExceeded),f="expired"===l.get("licenseError"),h="seatsExceed"===l.get("licenseError");return{hasLicense:!!r,isLicenseOK:c&&!(f||h),isExpired:d||f,isSeatsExceeded:o||h,hasSufficientLicense:a}}}},function(e){e.O(0,[8415,7430,55,7812,4007,340,2546,1283,3449,2578,8511,240,2287,7070,8961,1889,3707,7137,7207,7288,1565,3240,4656,1490,3375,5289,1744],function(){return e(e.s=48850)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9157],{98641:function(e,n,t){"use strict";t.d(n,{j:function(){return a}});let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,r=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.flat(1/0).filter(Boolean).join(" ")},a=(e,n)=>t=>{var a;if((null==n?void 0:n.variants)==null)return r(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:i}=n,c=Object.keys(l).map(e=>{let n=null==t?void 0:t[e],r=null==i?void 0:i[e];if(null===n)return null;let a=s(n)||s(r);return l[e][a]}),d=t&&Object.entries(t).reduce((e,n)=>{let[t,s]=n;return void 0===s||(e[t]=s),e},{}),o=null==n?void 0:null===(a=n.compoundVariants)||void 0===a?void 0:a.reduce((e,n)=>{let{class:t,className:s,...r}=n;return Object.entries(r).every(e=>{let[n,t]=e;return Array.isArray(t)?t.includes({...i,...d}[n]):({...i,...d})[n]===t})?[...e,t,s]:e},[]);return r(e,c,o,null==t?void 0:t.class,null==t?void 0:t.className)}},22277:function(e,n,t){Promise.resolve().then(t.bind(t,3518))},3518:function(e,n,t){"use strict";t.r(n),t.d(n,{CredentialList:function(){return N}});var s=t(36164),r=t(3546),a=t(70652),l=t.n(a),i=t(11978),c=t(1853),d=t(826),o=t(40055),u=t(18500),f=t(70410),m=t(31458),x=t(79972),h=t(81565),v=t(3448),p=t(94770),j=t(6230);let g=[{name:"github",enum:u.O4.Github,meta:{domain:"github.com",displayName:"GitHub"}},{name:"google",enum:u.O4.Google,meta:{domain:"google.com",displayName:"Google"}},{name:"gitlab",enum:u.O4.Gitlab,meta:{domain:"gitlab.com",displayName:"GitLab"}}],N=()=>{let e=(0,r.useMemo)(()=>Object.keys(u.Rj).length,[]),[{data:n,fetching:t}]=(0,o.aM)({query:f.Ry,variables:{provider:u.O4.Github}}),[{data:a,fetching:d}]=(0,o.aM)({query:f.Ry,variables:{provider:u.O4.Google}}),[{data:x,fetching:h}]=(0,o.aM)({query:f.Ry,variables:{provider:u.O4.Gitlab}}),[{data:g,fetching:N}]=(0,o.aM)({query:f.wz}),w=r.useMemo(()=>(0,c.Z)([null==n?void 0:n.oauthCredential,null==a?void 0:a.oauthCredential,null==x?void 0:x.oauthCredential,null==g?void 0:g.ldapCredential]),[n,a,x,g]),O=(0,i.useRouter)(),C=(0,s.jsx)(p.M,{licenses:[u.oj.Enterprise],children:e=>{let{hasValidLicense:n}=e;return(0,s.jsx)(m.z,{disabled:!n,onClick:()=>O.push("/settings/sso/new"),children:"Create"})}});return(null==w?void 0:w.length)?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-col gap-8",children:w.map(e=>"provider"in e?(0,s.jsx)(b,{data:e},e.provider):(0,s.jsx)(y,{data:e},"ldap"))}),w.length<e&&(0,s.jsx)("div",{className:"mt-4 flex justify-end",children:C})]}):(0,s.jsx)("div",{children:(0,s.jsx)(j.Z,{loading:t||d||h||N,fallback:(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsx)(v.O,{className:"h-[180px] w-full rounded-xl"}),(0,s.jsx)(v.O,{className:"h-[180px] w-full rounded-xl"})]}),children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-lg border-4 border-dashed py-8",children:[(0,s.jsx)("div",{children:"No Data"}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(l(),{href:"/settings/sso/new",className:(0,m.d)({variant:"default"}),children:"Create"})})]})})})},b=e=>{let{data:n}=e,t=r.useMemo(()=>{var e;return null===(e=(0,d.Z)(g,{enum:null==n?void 0:n.provider}))||void 0===e?void 0:e.meta},[n]);return n?(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{className:"border-b p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(x.ll,{className:"flex items-center gap-2 text-xl",children:[(0,s.jsx)(w,{provider:n.provider}),(null==t?void 0:t.displayName)||n.provider]}),(0,s.jsx)(l(),{href:"/settings/sso/detail/".concat(n.provider.toLowerCase()),className:(0,m.d)({variant:"secondary"}),children:"View"})]})}),(0,s.jsxs)(x.aY,{className:"p-0 text-sm",children:[(0,s.jsxs)("div",{className:"flex border-b px-8 py-4",children:[(0,s.jsx)("span",{className:"w-[100px]",children:"Type"}),(0,s.jsx)("span",{children:"OAuth 2.0"})]}),(0,s.jsxs)("div",{className:"flex px-8 py-4",children:[(0,s.jsx)("span",{className:"w-[100px] shrink-0",children:"Host"}),(0,s.jsx)("span",{className:"truncate",children:null==t?void 0:t.domain})]})]})]}):null},y=e=>{let{data:n}=e;return n?(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{className:"border-b p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(x.ll,{className:"flex items-center gap-2 text-xl",children:[(0,s.jsx)(h.IconUsers,{className:"h-6 w-6"}),"LDAP"]}),(0,s.jsx)(l(),{href:"/settings/sso/detail/ldap",className:(0,m.d)({variant:"secondary"}),children:"View"})]})}),(0,s.jsxs)(x.aY,{className:"p-0 text-sm",children:[(0,s.jsxs)("div",{className:"flex border-b px-8 py-4",children:[(0,s.jsx)("span",{className:"w-[100px]",children:"Type"}),(0,s.jsx)("span",{children:"LDAP"})]}),(0,s.jsxs)("div",{className:"flex px-8 py-4",children:[(0,s.jsx)("span",{className:"w-[100px] shrink-0",children:"Host"}),(0,s.jsx)("span",{className:"truncate",children:null==n?void 0:n.host})]})]})]}):null};function w(e){let{provider:n}=e;switch(n){case u.O4.Github:return(0,s.jsx)(h.IconGitHub,{className:"h-6 w-6"});case u.O4.Google:return(0,s.jsx)(h.IconGoogle,{className:"h-6 w-6"});case u.O4.Gitlab:return(0,s.jsx)(h.IconGitLab,{className:"h-6 w-6"});default:return null}}},94770:function(e,n,t){"use strict";t.d(n,{M:function(){return f}});var s=t(36164),r=t(3546),a=t(70652),l=t.n(a),i=t(88542),c=t(29917),d=t(73492),o=t(31458),u=t(90615);let f=e=>{let{licenses:n,children:t}=e,[a,l]=r.useState(!1),i=(0,c.Gm)(),o=(0,c.Cz)({licenses:n}),{isLicenseOK:f,hasSufficientLicense:x}=o,h=x&&f,v=e=>{h||l(e)};return(0,s.jsxs)(u.zs,{open:a,onOpenChange:v,openDelay:100,children:[(0,s.jsx)(u.bZ,{side:"top",collisionPadding:16,className:"w-[400px]",children:(0,s.jsx)(m,{licenses:n,...o})}),(0,s.jsx)(u.Yi,{asChild:!0,onClick:e=>{h||(e.preventDefault(),v(!0))},children:(0,s.jsx)("div",{className:(0,d.cn)(h?"":"cursor-not-allowed"),children:t({hasValidLicense:h,license:i})})})]})};function m(e){let{hasSufficientLicense:n,isExpired:t,isSeatsExceeded:r,licenses:a}=e,c=(0,i.Z)(a[0]),d=c;return(2==a.length&&(d="".concat((0,i.Z)(a[0])," or ").concat((0,i.Z)(a[1]))),n&&t)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"Your license has expired. Please update your license to use this feature."}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(l(),{className:(0,o.d)(),href:"/settings/subscription",children:"Update license"})})]}):n&&r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"Your seat count has exceeded the limit. Please upgrade your license to continue using this feature."}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(l(),{className:(0,o.d)(),href:"/settings/subscription",children:"Upgrade license"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["This feature is only available on Tabby's"," ",(0,s.jsx)("span",{className:"font-semibold",children:d})," plan. Upgrade to use this feature."]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)(l(),{className:(0,o.d)(),href:"/settings/subscription",children:["Upgrade to ",c]})})]})}f.displayName="LicenseGuard"},6230:function(e,n,t){"use strict";var s=t(36164),r=t(3546),a=t(24449),l=t(90379);n.Z=e=>{let{triggerOnce:n=!0,loading:t,fallback:i,delay:c,children:d}=e,[o,u]=r.useState(!t),[f]=(0,a.n)(o,null!=c?c:200);return(r.useEffect(()=>{n?t||o||u(!0):u(!t)},[t]),f)?d:i||(0,s.jsx)(l.cg,{})}},90379:function(e,n,t){"use strict";t.d(n,{PF:function(){return c},cg:function(){return l},tB:function(){return i}});var s=t(36164),r=t(73492),a=t(3448);let l=e=>{let{className:n,...t}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("space-y-3",n),...t,children:[(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"})]})},i=e=>{let{className:n,...t}=e;return(0,s.jsx)(a.O,{className:(0,r.cn)("h-4 w-full",n),...t})},c=e=>{let{className:n,...t}=e;return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3",n),...t,children:[(0,s.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(a.O,{className:"h-4 w-full"})]})}},31458:function(e,n,t){"use strict";t.d(n,{d:function(){return c},z:function(){return d}});var s=t(36164),r=t(3546),a=t(74047),l=t(98641),i=t(73492);let c=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,n)=>{let{className:t,variant:r,size:l,asChild:d=!1,...o}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:l,className:t})),ref:n,...o})});d.displayName="Button"},79972:function(e,n,t){"use strict";t.d(n,{Ol:function(){return i},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var s=t(36164),r=t(3546),a=t(73492);let l=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:n,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});l.displayName="Card";let i=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:n,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:n,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:n,className:(0,a.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:n,className:(0,a.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:n,className:(0,a.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},90615:function(e,n,t){"use strict";t.d(n,{Yi:function(){return c},bZ:function(){return d},zs:function(){return i}});var s=t(36164),r=t(3546),a=t(21030),l=t(73492);let i=a.fC,c=a.xz;a.h_;let d=r.forwardRef((e,n)=>{let{className:t,align:r="center",sideOffset:i=4,...c}=e;return(0,s.jsx)(a.VY,{ref:n,align:r,sideOffset:i,className:(0,l.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...c})});d.displayName=a.VY.displayName},3448:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var s=t(36164),r=t(73492);function a(e){let{className:n,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("h-4 animate-pulse rounded-md bg-border",n),...t})}},24449:function(e,n,t){"use strict";t.d(n,{S:function(){return i},n:function(){return c}});var s=t(3546),r=t(45391),a=t(16784);let l=e=>{let n=(0,a.d)(e);s.useEffect(()=>()=>{n.current()},[])};function i(e,n,t){let i=(0,a.d)(e),c=s.useMemo(()=>(0,r.Z)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.current(...n)},n,t),[]);return l(()=>{var e;null==t||null===(e=t.onUnmount)||void 0===e||e.call(t,c),c.cancel()}),{run:c,cancel:c.cancel,flush:c.flush}}function c(e,n,t){let[r,a]=s.useState(e),{run:l}=i(()=>{a(e)},n,t);return s.useEffect(()=>{l()},[e]),[r,a]}},16784:function(e,n,t){"use strict";t.d(n,{d:function(){return r}});var s=t(3546);function r(e){let n=s.useRef(e);return n.current=e,n}},29917:function(e,n,t){"use strict";t.d(n,{Cz:function(){return o},Gm:function(){return d},jp:function(){return c}});var s=t(11978),r=t(40055),a=t(43240),l=t(18500);let i=(0,a.BX)("\n  query GetLicenseInfo {\n    license {\n      type\n      status\n      seats\n      seatsUsed\n      issuedAt\n      expiresAt\n    }\n  }\n"),c=()=>(0,r.aM)({query:i}),d=()=>{let[{data:e}]=c();return null==e?void 0:e.license},o=e=>{var n;let[{data:t}]=c(),r=null==t?void 0:t.license,a=(0,s.useSearchParams)(),i=!!r&&(!(null==e?void 0:null===(n=e.licenses)||void 0===n?void 0:n.length)||e.licenses.includes(r.type)),d=(null==r?void 0:r.status)===l.rW.Ok,o=(null==r?void 0:r.status)===l.rW.Expired,u=(null==r?void 0:r.status)===(null===l.rW||void 0===l.rW?void 0:l.rW.SeatsExceeded),f="expired"===a.get("licenseError"),m="seatsExceed"===a.get("licenseError");return{hasLicense:!!r,isLicenseOK:d&&!(f||m),isExpired:o||f,isSeatsExceeded:u||m,hasSufficientLicense:i}}},11978:function(e,n,t){e.exports=t(77280)},826:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var s,r=t(51722),a=t(20568),l=t(70014),i=(s=t(78613).Z,function(e,n,t){var i=Object(e);if(!(0,a.Z)(e)){var c=(0,r.Z)(n,3);e=(0,l.Z)(e),n=function(e){return c(i[e],e,i)}}var d=s(e,n,t);return d>-1?i[c?e[d]:d]:void 0})},78613:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var s=t(96703),r=t(51722),a=t(26165),l=1/0,i=function(e){var n,t=(n=e)?(n=(0,a.Z)(n))===l||n===-l?(n<0?-1:1)*17976931348623157e292:n==n?n:0:0===n?n:0,s=t%1;return t==t?s?t-s:t:0},c=Math.max,d=function(e,n,t){var a=null==e?0:e.length;if(!a)return -1;var l=null==t?0:i(t);return l<0&&(l=c(a+l,0)),(0,s.Z)(e,(0,r.Z)(n,3),l)}},96786:function(e,n){"use strict";n.Z=function(e){return null!=e&&"object"==typeof e}}},function(e){e.O(0,[7565,8415,5811,55,3594,340,4007,1283,3087,7070,8194,3492,1565,410,3375,5289,1744],function(){return e(e.s=22277)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{88722:function(e,n,t){Promise.resolve().then(t.bind(t,71901))},71901:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(36164),s=t(70652),i=t.n(s),l=t(31458),o=t(3546),a=t(2578),c=t(40055),u=t(21808),d=t(43240),f=t(11634),v=t(70410),x=t(81565),h=t(49506),m=t(99047),j=t(6230),p=t(40030),g=t(55137),N=t(14522);let b=(0,d.BX)("\n  mutation deleteGitRepository($id: ID!) {\n    deleteGitRepository(id: $id)\n  }\n"),y=u.L8;function _(){var e,n;let[t,s]=o.useState(),[{data:i,fetching:u},d]=(0,c.aM)({query:v.S1,variables:{last:y,before:t}}),[{data:_,fetching:w}]=(0,c.aM)({query:v.gI}),[I,k]=o.useState(1),C=o.useMemo(()=>{var e,n;return null==i?void 0:null===(n=i.gitRepositories)||void 0===n?void 0:null===(e=n.edges)||void 0===e?void 0:e.slice().reverse()},[null==i?void 0:null===(e=i.gitRepositories)||void 0===e?void 0:e.edges]),R=null==i?void 0:null===(n=i.gitRepositories)||void 0===n?void 0:n.pageInfo,Z=Math.ceil(((null==C?void 0:C.length)||0)/y),P=e=>{var n,t;return null==C?void 0:null===(t=C.slice(0,(e-1)*y))||void 0===t?void 0:null===(n=t.pop())||void 0===n?void 0:n.cursor},S=e=>{s(P(e))},A=o.useMemo(()=>{var e;return null==C?void 0:null===(e=C.slice)||void 0===e?void 0:e.call(C,(I-1)*y,I*y)},[I,C]),G=(null==R?void 0:R.hasPreviousPage)||I<Z,M=I>1,O=!!(null==A?void 0:A.length)&&(G||M),E=(0,f.Db)(b),T=(0,f.Db)(N.C),$=(e,n)=>{E({id:e}).then(e=>{var t,r;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deleteGitRepository)?S(n?I-1:I):a.A.error((null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to delete repository")})},D=e=>T({command:e}).then(e=>{var n,t;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.triggerJobRun)?(a.A.success("The job has been triggered successfully, it may take a few minutes to process."),d()):a.A.error((null==e?void 0:null===(t=e.error)||void 0===t?void 0:t.message)||"Failed to trigger job")});return o.useEffect(()=>{!u&&Z<I&&I>1&&k(Z)},[Z,I]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(j.Z,{loading:u,children:[(0,r.jsxs)(m.iA,{className:"table-fixed border-t",children:[(0,r.jsx)(m.xD,{children:(0,r.jsxs)(m.SC,{children:[(0,r.jsx)(m.ss,{className:"w-[25%]",children:"Name"}),(0,r.jsx)(m.ss,{className:"w-[45%]",children:"Git URL"}),(0,r.jsx)(m.ss,{className:"w-[140px]",children:"Access"}),(0,r.jsx)(m.ss,{className:"w-[180px]",children:"Job"}),(0,r.jsx)(m.ss,{className:"w-[60px]"})]})}),(0,r.jsx)(m.RM,{children:(null==A?void 0:A.length)||1!==I?(0,r.jsx)(r.Fragment,{children:null==A?void 0:A.map(e=>(0,r.jsxs)(m.SC,{children:[(0,r.jsx)(m.pj,{className:"break-all lg:break-words",title:e.node.name,children:e.node.name}),(0,r.jsx)(m.pj,{className:"break-all lg:break-words",title:e.node.gitUrl,children:e.node.gitUrl}),(0,r.jsx)(m.pj,{className:"break-all lg:break-words",children:(0,r.jsx)(p.r,{sourceId:e.node.sourceId,sourceName:e.node.name,fetchingUserGroups:w,userGroups:null==_?void 0:_.userGroups,editable:!0})}),(0,r.jsx)(m.pj,{children:(0,r.jsx)(g._,{jobInfo:e.node.jobInfo,onTrigger:()=>D(e.node.jobInfo.command)})}),(0,r.jsx)(m.pj,{className:"text-right",children:(0,r.jsx)(l.z,{size:"icon",variant:"hover-destructive",onClick:()=>$(e.node.id,1===A.length),children:(0,r.jsx)(x.IconTrash,{})})})]},e.node.id))}):(0,r.jsx)(m.SC,{children:(0,r.jsx)(m.pj,{colSpan:5,className:"h-[100px] text-center",children:"No Data"})})})]}),O&&(0,r.jsx)(h.tl,{className:"my-4",children:(0,r.jsxs)(h.ng,{children:[(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.dN,{disabled:!M,onClick:()=>{if(I<=1||u)return;let e=I-1;S(e),k(e)}})}),(0,r.jsx)(h.nt,{children:(0,r.jsx)(h.$0,{disabled:!G,onClick:()=>{if(!G||u)return;let e=I+1;S(e),k(e)}})})]})})]})})}function w(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"my-4 flex justify-end",children:(0,r.jsx)(i(),{href:"./git/new",className:(0,l.d)(),children:"Create"})}),(0,r.jsx)(_,{})]})}},49506:function(e,n,t){"use strict";t.d(n,{$0:function(){return v},Dj:function(){return x},dN:function(){return f},kN:function(){return d},ng:function(){return c},nt:function(){return u},tl:function(){return a}});var r=t(36164),s=t(3546),i=t(57288),l=t(31458),o=t(81565);let a=e=>{let{className:n,...t}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",n),...t})};a.displayName="Pagination";let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("ul",{ref:n,className:(0,i.cn)("flex flex-row items-center gap-1",t),...s})});c.displayName="PaginationContent";let u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("li",{ref:n,className:(0,i.cn)("",t),...s})});u.displayName="PaginationItem";let d=e=>{let{className:n,isActive:t,size:s="icon",...o}=e;return(0,r.jsx)("a",{"aria-current":t?"page":void 0,className:(0,i.cn)("select-none",(0,l.d)({variant:t?"outline":"ghost",size:s}),n),...o})};d.displayName="PaginationLink";let f=e=>{let{className:n,disabled:t,...s}=e;return(0,r.jsxs)(d,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("cursor-pointer select-none gap-1 pl-2.5",t&&"cursor-not-allowed text-muted-foreground",n),...s,children:[(0,r.jsx)(o.IconChevronLeft,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};f.displayName="PaginationPrevious";let v=e=>{let{className:n,disabled:t,...s}=e;return(0,r.jsxs)(d,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("cursor-pointer select-none gap-1 pr-2.5",t&&"cursor-not-allowed text-muted-foreground",n),...s,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(o.IconChevronRight,{className:"h-4 w-4"})]})};v.displayName="PaginationNext";let x=e=>{let{className:n,...t}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,className:(0,i.cn)("flex h-9 w-9 items-center justify-center",n),...t,children:[(0,r.jsx)(o.IconMore,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};x.displayName="PaginationEllipsis"},21808:function(e,n,t){"use strict";t.d(n,{$6:function(){return i},$I:function(){return l},L8:function(){return s},ir:function(){return o},o0:function(){return r},rZ:function(){return a}});let r="name@yourcompany.com",s=20,i={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_CONTEXTS:"_tabby_search_initial_contexts"},l=48,o="NOT_FOUND",a="\n"},70652:function(e,n,t){e.exports=t(54007)},18216:function(e,n,t){"use strict";var r=t(6670),s=/^\s+/;n.Z=function(e){return e?e.slice(0,(0,r.Z)(e)+1).replace(s,""):e}},6670:function(e,n){"use strict";var t=/\s/;n.Z=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},96786:function(e,n){"use strict";n.Z=function(e){return null!=e&&"object"==typeof e}},55357:function(e,n,t){"use strict";var r=t(17996),s=t(96786);n.Z=function(e){return"symbol"==typeof e||(0,s.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},26165:function(e,n,t){"use strict";var r=t(18216),s=t(84639),i=t(55357),l=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;n.Z=function(e){if("number"==typeof e)return e;if((0,i.Z)(e))return l;if((0,s.Z)(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.Z)(e);var t=a.test(e);return t||c.test(e)?u(e.slice(2),t?2:8):o.test(e)?l:+e}}},function(e){e.O(0,[8415,7565,7430,55,7812,4007,9643,4752,3449,2578,8511,4421,5669,6805,7288,1565,3240,4656,2869,3375,5289,1744],function(){return e(e.s=88722)}),_N_E=e.O()}]);
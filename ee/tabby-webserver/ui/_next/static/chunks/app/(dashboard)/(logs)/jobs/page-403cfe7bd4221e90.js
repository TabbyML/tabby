(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{97222:function(e,t,n){Promise.resolve().then(n.bind(n,99968))},99968:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C},metadata:function(){return Z}});var r=n(36164),s=n(40055),l=n(70410),i=n(99047),a=n(6230),u=n(3546),c=n(70652),o=n.n(c),d=n(97651),f=n.n(d),x=n(74630),h=n(99092),m=n.n(h),j=n(21454),b=n(73492),p=n(81565),v=n(29),g=n(90379),N=n(17484);function w(e){let{count:t,activeClass:n,tooltip:s}=e;return(0,r.jsx)(v.pn,{delayDuration:0,children:(0,r.jsxs)(v.u,{children:[(0,r.jsx)(v.aJ,{children:(0,r.jsx)("div",{className:(0,b.cn)("flex h-8 w-8 cursor-default items-center justify-center rounded-full",n),children:t||0})}),(0,r.jsx)(v._v,{children:(0,r.jsx)("p",{children:s})})]})})}function y(e){let{name:t}=e,[{data:n,fetching:i}]=(0,s.aM)({query:l.yB,variables:{jobs:[t]}});return(0,r.jsx)(a.Z,{loading:i,fallback:(0,r.jsx)(g.tB,{className:"w-1/3"}),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(w,{count:null==n?void 0:n.jobRunStats.success,activeClass:"bg-green-600 text-xs text-white",tooltip:"Success"}),(0,r.jsx)(w,{count:null==n?void 0:n.jobRunStats.pending,activeClass:"bg-blue-600 text-xs text-white",tooltip:"Pending"}),(0,r.jsx)(w,{count:null==n?void 0:n.jobRunStats.failed,activeClass:"bg-red-600 text-xs text-white",tooltip:"Failed"})]})})}function R(e){var t;let{name:n}=e,[{data:c,fetching:d},h]=(0,s.aM)({query:l.GG,variables:{last:10,jobs:[n]}});(0,j.ZP)("refresh_jobs",()=>h(),{revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateOnMount:!1,refreshInterval:1e4});let w=null==c?void 0:null===(t=c.jobRuns)||void 0===t?void 0:t.edges,R=(0,u.useMemo)(()=>null==w?void 0:w.slice().reverse(),[w]),Z=null==R?void 0:R[0],C=null==R?void 0:R.find(e=>!!e.node.finishedAt),O=C?m()(C.node.finishedAt).format("YYYY-MM-DD HH:mm"):null;return(0,r.jsx)(a.Z,{loading:d,fallback:(0,r.jsx)(i.SC,{children:(0,r.jsx)(i.pj,{colSpan:4,children:(0,r.jsx)(g.tB,{})})}),children:(0,r.jsxs)(i.SC,{className:"h-16",children:[(0,r.jsx)(i.pj,{className:"font-bold",children:(0,N.Y)(n)}),(0,r.jsx)(i.pj,{children:(0,r.jsx)("div",{className:"grid grid-cols-5 flex-wrap gap-1.5  xl:flex",children:null==R?void 0:R.map(e=>{var t;let{createdAt:n,finishedAt:s,startedAt:l}=e.node,i=!s&&!!l,a=n&&m()(n).format("YYYY-MM-DD HH:mm"),u=null!==(t=l&&s&&f().humanizer({language:"shortEn",languages:{shortEn:{d:()=>"d",h:()=>"h",m:()=>"m",s:()=>"s"}}})(m().duration(m()(s).diff(l)).asMilliseconds(),{units:["d","h","m","s"],round:!1,largest:1,spacer:"",language:"shortEn"}))&&void 0!==t?t:null,c="";if(null!==u){let e=u.endsWith("s");if(e)c=u;else{let e=u.charAt(u.length-1),t=parseInt(u)+1;c=t+e}}return(0,r.jsx)(v.pn,{delayDuration:0,children:(0,r.jsxs)(v.u,{children:[(0,r.jsx)(v.aJ,{asChild:!0,children:(0,r.jsxs)(o(),{href:"/jobs/detail?id=".concat(e.node.id),className:(0,b.cn)("flex h-8 w-8 items-center justify-center rounded text-xs text-white hover:opacity-70",{"bg-blue-600":(0,x.Z)(e.node.exitCode),"bg-green-600":0===e.node.exitCode,"bg-red-600":!(0,x.Z)(e.node.exitCode)&&0!==e.node.exitCode}),children:[c,i&&(0,r.jsx)(p.IconSpinner,{})]})}),(0,r.jsx)(v._v,{children:a&&(0,r.jsx)("p",{children:a})})]})},e.node.id)})})}),(0,r.jsx)(i.pj,{children:(0,r.jsx)(o(),{href:"/jobs/detail?id=".concat(null==Z?void 0:Z.node.id),className:"flex items-center underline",children:(0,r.jsx)("p",{children:O})})}),(0,r.jsx)(i.pj,{children:(0,r.jsx)(y,{name:n})})]})})}let Z={title:"Jobs"};function C(){let[{data:e,fetching:t}]=(0,s.aM)({query:l.DQ});return(0,r.jsx)(a.Z,{loading:t,children:(0,r.jsxs)(i.iA,{children:[(0,r.jsx)(i.xD,{children:(0,r.jsxs)(i.SC,{children:[(0,r.jsx)(i.ss,{className:"w-[20%]",children:"Job"}),(0,r.jsx)(i.ss,{className:"w-56 xl:w-auto",children:"Recent Tasks"}),(0,r.jsx)(i.ss,{className:"w-auto xl:w-[20%]",children:"Last Run"}),(0,r.jsx)(i.ss,{className:"w-[20%]",children:"Job Runs"})]})}),(0,r.jsx)(i.RM,{children:null==e?void 0:e.jobs.map(e=>(0,r.jsx)(R,{name:e},e))})]})})}},17484:function(e,t,n){"use strict";n.d(t,{H:function(){return i},Y:function(){return l}});var r=n(74630);let s={scheduler_git:"Git",scheduler_github_gitlab:"Github / Gitlab",web_crawler:"Docs"};function l(e){return e in s?s[e]:e}function i(e){return e?(0,r.Z)(e.exitCode)?e.startedAt?"Running":"Pending":0===e.exitCode?"Success":"Failed":"Pending"}},6230:function(e,t,n){"use strict";var r=n(36164),s=n(3546),l=n(24449),i=n(90379);t.Z=e=>{let{triggerOnce:t=!0,loading:n,fallback:a,delay:u,children:c}=e,[o,d]=s.useState(!n),[f]=(0,l.n)(o,null!=u?u:200);return(s.useEffect(()=>{t?n||o||d(!0):d(!n)},[n]),f)?c:a||(0,r.jsx)(i.cg,{})}},90379:function(e,t,n){"use strict";n.d(t,{PF:function(){return u},cg:function(){return i},tB:function(){return a}});var r=n(36164),s=n(73492),l=n(3448);let i=e=>{let{className:t,...n}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("space-y-3",t),...n,children:[(0,r.jsx)(l.O,{className:"h-4 w-full"}),(0,r.jsx)(l.O,{className:"h-4 w-full"}),(0,r.jsx)(l.O,{className:"h-4 w-full"}),(0,r.jsx)(l.O,{className:"h-4 w-full"})]})},a=e=>{let{className:t,...n}=e;return(0,r.jsx)(l.O,{className:(0,s.cn)("h-4 w-full",t),...n})},u=e=>{let{className:t,...n}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("flex flex-col gap-3",t),...n,children:[(0,r.jsx)(l.O,{className:"h-4 w-[20%]"}),(0,r.jsx)(l.O,{className:"h-4 w-full"}),(0,r.jsx)(l.O,{className:"h-4 w-[20%]"}),(0,r.jsx)(l.O,{className:"h-4 w-full"})]})}},3448:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(36164),s=n(73492);function l(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("h-4 animate-pulse rounded-md bg-border",t),...n})}},99047:function(e,t,n){"use strict";n.d(t,{RM:function(){return u},SC:function(){return o},iA:function(){return i},pj:function(){return f},ss:function(){return d},xD:function(){return a}});var r=n(36164),s=n(3546),l=n(73492);let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",n),...s})});i.displayName="Table";let a=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",n),...s})});a.displayName="TableHeader";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",n),...s})});u.displayName="TableBody";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...s})});c.displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...s})});o.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...s})});d.displayName="TableHead";let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0",n),...s})});f.displayName="TableCell";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",n),...s})});x.displayName="TableCaption"},29:function(e,t,n){"use strict";n.d(t,{_v:function(){return o},aJ:function(){return c},pn:function(){return a},u:function(){return u}});var r=n(36164),s=n(3546),l=n(44421),i=n(73492);let a=l.zt,u=l.fC,c=l.xz;l.h_;let o=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...a}=e;return(0,r.jsx)(l.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...a})});o.displayName=l.VY.displayName},24449:function(e,t,n){"use strict";n.d(t,{S:function(){return a},n:function(){return u}});var r=n(3546),s=n(45391),l=n(16784);let i=e=>{let t=(0,l.d)(e);r.useEffect(()=>()=>{t.current()},[])};function a(e,t,n){let a=(0,l.d)(e),u=r.useMemo(()=>(0,s.Z)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.current(...t)},t,n),[]);return i(()=>{var e;null==n||null===(e=n.onUnmount)||void 0===e||e.call(n,u),u.cancel()}),{run:u,cancel:u.cancel,flush:u.flush}}function u(e,t,n){let[s,l]=r.useState(e),{run:i}=a(()=>{l(e)},t,n);return r.useEffect(()=>{i()},[e]),[s,l]}},16784:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(3546);function s(e){let t=r.useRef(e);return t.current=e,t}},70652:function(e,t,n){e.exports=n(54007)},29434:function(e,t,n){"use strict";n.d(t,{M:function(){return u}});var r,s=n(3546),l=n(65292);let i=(r||(r=n.t(s,2)))["useId".toString()]||(()=>void 0),a=0;function u(e){let[t,n]=s.useState(i());return(0,l.b)(()=>{e||n(e=>null!=e?e:String(a++))},[e]),e||(t?`radix-${t}`:"")}},18216:function(e,t,n){"use strict";var r=n(6670),s=/^\s+/;t.Z=function(e){return e?e.slice(0,(0,r.Z)(e)+1).replace(s,""):e}},6670:function(e,t){"use strict";var n=/\s/;t.Z=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},55357:function(e,t,n){"use strict";var r=n(17996),s=n(96786);t.Z=function(e){return"symbol"==typeof e||(0,s.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},26165:function(e,t,n){"use strict";var r=n(18216),s=n(84639),l=n(55357),i=0/0,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,o=parseInt;t.Z=function(e){if("number"==typeof e)return e;if((0,l.Z)(e))return i;if((0,s.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.Z)(e);var n=u.test(e);return n||c.test(e)?o(e.slice(2),n?2:8):a.test(e)?i:+e}}},function(e){e.O(0,[7565,8415,4691,55,436,340,4007,1283,3087,1454,4421,2529,3492,1565,410,3375,5289,1744],function(){return e(e.s=97222)}),_N_E=e.O()}]);
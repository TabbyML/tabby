(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986],{35959:function(e,s,t){Promise.resolve().then(t.bind(t,13211))},13211:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D},listUserEvents:function(){return E}});var n=t(36164),r=t(3546),a=t(27952),l=t.n(a),i=t(99092),d=t.n(i),o=t(57563),c=t.n(o),u=t(2578),m=t(40055),f=t(21808),x=t(43240),h=t(18500),p=t(36758),v=t(9010),j=t(31458),b=t(79972),g=t(81565),N=t(54594),w=t(99047),y=t(29),C=t(22119),k=t(6230);let I=l()(()=>t.e(726).then(t.t.bind(t,80726,23)),{loadableGenerated:{webpack:()=>[80726]},ssr:!1}),S="-24h",E=(0,x.BX)("\n  query ListUserEvents(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n    $start: DateTime!\n    $end: DateTime!\n    $users: [ID!]\n  ) {\n    userEvents(\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n      start: $start\n      end: $end\n      users: $users\n    ) {\n      edges {\n        node {\n          id\n          userId\n          createdAt\n          kind\n          payload\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n");function D(){var e,s,t,a;let l=d()().add(parseInt(S,10),"hour"),i=d()(),[o]=(0,p.d)(),[c,x]=r.useState({from:l.toDate(),to:i.toDate()}),[h,v]=r.useState(1),[y,I]=r.useState(),[D,_]=r.useState("all"),[Y,$]=r.useState({last:f.L8}),[{data:A,error:P,fetching:R}]=(0,m.aM)({query:E,variables:{start:d()(c.from).utc().format(),end:c.to?d()(c.to).utc().format():d()(c.from).utc().format(),users:"all"===D?void 0:[D],...Y}});return r.useEffect(()=>{(null==A?void 0:A.userEvents.edges.length)&&I(A.userEvents)},[A]),r.useEffect(()=>{(null==P?void 0:P.message)&&u.A.error(P.message)},[P]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex w-full flex-col",children:(0,n.jsx)("div",{className:"flex flex-col sm:gap-4",children:(0,n.jsxs)("main",{className:"grid flex-1 items-start gap-4 py-4 sm:py-0",children:[(0,n.jsxs)("div",{className:"flex min-h-[theme(space.9)] flex-col gap-y-2 xl:flex-row xl:items-center xl:justify-between",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"View raw events generated by team members' activities while interacting with Tabby."}),o.length>0&&(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2 md:flex-row xl:ml-auto",children:[(0,n.jsxs)(N.Ph,{defaultValue:"all",onValueChange:_,children:[(0,n.jsx)(N.i4,{className:"w-[calc(100vw-2rem)] py-0 md:w-auto",children:(0,n.jsx)("div",{className:"flex h-6 items-center",children:(0,n.jsx)("div",{className:"overflow-hidden text-ellipsis text-left md:w-[190px]",children:(0,n.jsx)(N.ki,{})})})}),(0,n.jsx)(N.Bw,{align:"end",children:(0,n.jsxs)(N.DI,{children:[(0,n.jsx)(N.Ql,{value:"all",children:"All members"}),o.map(e=>(0,n.jsx)(N.Ql,{value:e.id,children:e.name||e.email},e.id))]})})]}),(0,n.jsx)(C.Z,{className:"w-[calc(100vw-2rem)] md:w-[240px]",options:[{label:"Last 24 hours",value:"-24h"},{label:"Last 7 days",value:"-7d"},{label:"Last 14 days",value:"-14d"}],defaultValue:S,onSelect:e=>{x(e),v(1),$({last:f.L8})},hasToday:!0,hasYesterday:!0})]})]}),(0,n.jsx)(k.Z,{loading:R,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b.Zb,{"x-chunk":"dashboard-06-chunk-0",className:"bg-transparent",children:[(!(null==A?void 0:A.userEvents.edges)||(null==A?void 0:A.userEvents.edges.length)===0)&&(0,n.jsxs)(b.aY,{className:"flex flex-col items-center py-40 text-sm",children:[(0,n.jsx)(g.IconFileSearch,{className:"mb-2 h-10 w-10"}),(0,n.jsx)("p",{className:"font-semibold",children:"No data available for the chosen dates"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Please try a different date range"})]}),(null==A?void 0:A.userEvents.edges)&&(null==A?void 0:A.userEvents.edges.length)>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b.aY,{className:"w-[calc(100vw-2rem)] overflow-x-auto px-0 pb-0 md:w-auto",children:(0,n.jsxs)(w.iA,{children:[(0,n.jsx)(w.xD,{children:(0,n.jsxs)(w.SC,{children:[(0,n.jsx)(w.ss,{}),(0,n.jsx)(w.ss,{className:"md:w-[30%]",children:"Event"}),(0,n.jsx)(w.ss,{className:"md:w-[40%]",children:"User"}),(0,n.jsx)(w.ss,{className:"md:w-[30%] md:pr-8",children:"Time"})]})}),(0,n.jsx)(w.RM,{children:null==y?void 0:y.edges.sort((e,s)=>new Date(s.node.createdAt).getTime()-new Date(e.node.createdAt).getTime()).map(e=>(0,n.jsx)(T,{activity:e.node,members:o},e.cursor))})]})})})]}),((null==A?void 0:null===(e=A.userEvents.pageInfo)||void 0===e?void 0:e.hasNextPage)||(null==A?void 0:null===(s=A.userEvents.pageInfo)||void 0===s?void 0:s.hasPreviousPage))&&(0,n.jsxs)("div",{className:"flex justify-end",children:[(0,n.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:[" ","Page ",h]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(j.z,{variant:"outline",className:"h-8 w-8 p-0",disabled:!(null==A?void 0:null===(t=A.userEvents.pageInfo)||void 0===t?void 0:t.hasNextPage),onClick:e=>{var s;$({first:f.L8,after:null==A?void 0:null===(s=A.userEvents.pageInfo)||void 0===s?void 0:s.endCursor}),v(h-1)},children:(0,n.jsx)(g.IconChevronLeft,{className:"h-4 w-4"})}),(0,n.jsx)(j.z,{variant:"outline",className:"h-8 w-8 p-0",disabled:!(null==A?void 0:null===(a=A.userEvents.pageInfo)||void 0===a?void 0:a.hasPreviousPage),onClick:e=>{var s;$({last:f.L8,before:null==A?void 0:null===(s=A.userEvents.pageInfo)||void 0===s?void 0:s.startCursor}),v(h+1)},children:(0,n.jsx)(g.IconChevronRight,{className:"h-4 w-4"})})]})]})]})})]})})})})}function T(e){let s,{activity:t,members:a}=e,{theme:l}=(0,v.X)(),[i,o]=r.useState(!1);try{s=JSON.parse(t.payload)}catch(e){(null==e?void 0:e.message)&&u.A.error(e.message)}if(!s)return null;let m="";switch(t.kind){case h.nS.Completion:m="Code completion supplied";break;case h.nS.Dismiss:m="Code completion viewed but not used";break;case h.nS.Select:m="Code completion accepted and inserted";break;case h.nS.View:m="Code completion shown in editor";break;case h.nS.ChatCompletion:m="Chat completion supplied"}let f=t.userId,x=a.find(e=>e.id===t.userId);return x&&(f=x.name||x.email),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.SC,{className:"cursor-pointer text-sm",onClick:()=>o(!i),children:[(0,n.jsx)(w.pj,{className:"pl-4 pr-0",children:(0,n.jsxs)("div",{className:"flex h-8 w-8 items-center justify-center rounded hover:bg-muted",children:[i&&(0,n.jsx)(g.IconChevronsDownUp,{}),!i&&(0,n.jsx)(g.IconChevronUpDown,{})]})}),(0,n.jsx)(w.pj,{className:"font-medium",children:(0,n.jsxs)(y.u,{children:[(0,n.jsx)(y.aJ,{children:t.kind}),(0,n.jsx)(y._v,{children:(0,n.jsx)("p",{children:m})})]})}),(0,n.jsx)(w.pj,{children:f}),(0,n.jsx)(w.pj,{className:"pr-4 md:pr-8",children:(0,n.jsxs)(y.u,{children:[(0,n.jsx)(y.aJ,{children:d()(t.createdAt).isBefore(d()().subtract(1,"days"))?d()(t.createdAt).format("YYYY-MM-DD HH:mm"):d()(t.createdAt).fromNow()}),(0,n.jsxs)(y._v,{children:[(0,n.jsxs)("p",{className:"py-0.5",children:[(0,n.jsx)("b",{className:"mr-1 inline-block w-7",children:"UTC:"}),d().utc(t.createdAt).format("YYYY-MM-DD HH:mm:ss")]}),(0,n.jsxs)("p",{className:"py-0.5",children:[(0,n.jsxs)("b",{className:"mr-1 inline-block w-7",children:[c().tz(c().tz.guess()).format("z"),":"]}),d()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")]})]})]})})]},"".concat(t.id,"}-1")),i&&(0,n.jsx)(w.SC,{className:"w-full bg-muted/30",children:(0,n.jsx)(w.pj,{className:"px-6 font-medium",colSpan:4,children:(0,n.jsx)(I,{src:s,name:!1,collapseStringsAfterLength:50,theme:"dark"===l?"tomorrow":"rjv-default",style:"dark"===l?{background:"transparent"}:{}})})},"".concat(t.id,"-2"))]})}},99047:function(e,s,t){"use strict";t.d(s,{RM:function(){return d},SC:function(){return c},iA:function(){return l},pj:function(){return m},ss:function(){return u},xD:function(){return i}});var n=t(36164),r=t(3546),a=t(73492);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("table",{ref:s,className:(0,a.cn)("w-full caption-bottom text-sm",t),...r})});l.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("thead",{ref:s,className:(0,a.cn)("[&_tr]:border-b",t),...r})});i.displayName="TableHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("tbody",{ref:s,className:(0,a.cn)("[&_tr:last-child]:border-0",t),...r})});d.displayName="TableBody";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("tfoot",{ref:s,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})});o.displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("tr",{ref:s,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});c.displayName="TableRow";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("th",{ref:s,className:(0,a.cn)("h-12 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});u.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("td",{ref:s,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});m.displayName="TableCell";let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)("caption",{ref:s,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",t),...r})});f.displayName="TableCaption"},29:function(e,s,t){"use strict";t.d(s,{_v:function(){return c},aJ:function(){return o},pn:function(){return i},u:function(){return d}});var n=t(36164),r=t(3546),a=t(44421),l=t(73492);let i=a.zt,d=a.fC,o=a.xz;a.h_;let c=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...i}=e;return(0,n.jsx)(a.VY,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",t),...i})});c.displayName=a.VY.displayName},21808:function(e,s,t){"use strict";t.d(s,{$6:function(){return a},$I:function(){return l},GI:function(){return c},L8:function(){return r},ir:function(){return i},ki:function(){return o},o0:function(){return n},rZ:function(){return d}});let n="name@yourcompany.com",r=20,a={DEMO_AUTO_LOGIN:"_tabby_demo_autologin"},l=48,i="NOT_FOUND",d="\n",o=["think"],c=[]}},function(e){e.O(0,[7565,8415,2897,4691,55,436,340,1283,3087,2429,8511,3179,4421,1889,8512,8304,3492,1565,410,4017,3375,5289,1744],function(){return e(e.s=35959)}),_N_E=e.O()}]);
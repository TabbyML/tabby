(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986],{13435:function(e,t,r){Promise.resolve().then(r.bind(r,13211))},13211:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I},listUserEvents:function(){return D}});var s=r(36164),n=r(3546),a=r(27952),l=r.n(a),d=r(59741),i=r(99092),o=r.n(i),c=r(90665),u=r.n(c),f=r(28242),m=r(2578),x=r(40055),h=r(21808),v=r(43240),p=r(18500),g=r(36758),j=r(31458),b=r(79972),N=r(81565),w=r(54594),y=r(99047),C=r(29),k=r(22119),S=r(6230);let E=l()(()=>r.e(726).then(r.t.bind(r,80726,23)),{loadableGenerated:{webpack:()=>[80726]},ssr:!1}),R="-24h",D=(0,v.BX)("\n  query ListUserEvents(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n    $start: DateTime!\n    $end: DateTime!\n    $users: [ID!]\n  ) {\n    userEvents(\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n      start: $start\n      end: $end\n      users: $users\n    ) {\n      edges {\n        node {\n          id\n          userId\n          createdAt\n          kind\n          payload\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n");function I(){var e,t,r,a;let l=o()().add(parseInt(R,10),"hour"),d=o()(),[i]=(0,g.d)(),[c,u]=n.useState({from:l.toDate(),to:d.toDate()}),[f,v]=n.useState(1),[p,C]=n.useState(),[E,I]=n.useState("all"),[T,A]=n.useState({last:h.L8}),[{data:O,error:P,fetching:$}]=(0,x.aM)({query:D,variables:{start:o()(c.from).utc().format(),end:c.to?o()(c.to).utc().format():o()(c.from).utc().format(),users:"all"===E?void 0:[E],...T}});return n.useEffect(()=>{(null==O?void 0:O.userEvents.edges.length)&&C(O.userEvents)},[O]),n.useEffect(()=>{(null==P?void 0:P.message)&&m.A.error(P.message)},[P]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex w-full flex-col",children:(0,s.jsx)("div",{className:"flex flex-col sm:gap-4 sm:py-4",children:(0,s.jsxs)("main",{className:"grid flex-1 items-start gap-4 py-4 sm:py-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-2 xl:flex-row xl:items-center xl:justify-between",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"View raw events generated by team members' activities while interacting with Tabby."}),i.length>0&&(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 md:flex-row xl:ml-auto",children:[(0,s.jsxs)(w.Ph,{defaultValue:"all",onValueChange:I,children:[(0,s.jsx)(w.i4,{className:"w-[calc(100vw-2rem)] py-0 md:w-auto",children:(0,s.jsx)("div",{className:"flex h-6 items-center",children:(0,s.jsx)("div",{className:"overflow-hidden text-ellipsis text-left md:w-[190px]",children:(0,s.jsx)(w.ki,{})})})}),(0,s.jsx)(w.Bw,{align:"end",children:(0,s.jsxs)(w.DI,{children:[(0,s.jsx)(w.Ql,{value:"all",children:"All members"}),i.map(e=>(0,s.jsx)(w.Ql,{value:e.id,children:e.email},e.id))]})})]}),(0,s.jsx)(k.Z,{className:"w-[calc(100vw-2rem)] md:w-[240px]",options:[{label:"Last 24 hours",value:"-24h"},{label:"Last 7 days",value:"-7d"},{label:"Last 14 days",value:"-14d"}],defaultValue:R,onSelect:e=>{u(e),v(1),A({last:h.L8})},hasToday:!0,hasYesterday:!0})]})]}),(0,s.jsx)(S.Z,{loading:$,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(b.Zb,{"x-chunk":"dashboard-06-chunk-0",className:"bg-transparent",children:[(!(null==O?void 0:O.userEvents.edges)||(null==O?void 0:O.userEvents.edges.length)===0)&&(0,s.jsxs)(b.aY,{className:"flex flex-col items-center py-40 text-sm",children:[(0,s.jsx)(N.IconFileSearch,{className:"mb-2 h-10 w-10"}),(0,s.jsx)("p",{className:"font-semibold",children:"No data available for the chosen dates"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please try a different date range"})]}),(null==O?void 0:O.userEvents.edges)&&(null==O?void 0:O.userEvents.edges.length)>0&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b.aY,{className:"w-[calc(100vw-2rem)] overflow-x-auto px-0 pb-0 md:w-auto",children:(0,s.jsxs)(y.iA,{children:[(0,s.jsx)(y.xD,{children:(0,s.jsxs)(y.SC,{children:[(0,s.jsx)(y.ss,{}),(0,s.jsx)(y.ss,{className:"md:w-[30%]",children:"Event"}),(0,s.jsx)(y.ss,{className:"md:w-[40%]",children:"User"}),(0,s.jsx)(y.ss,{className:"md:w-[30%] md:pr-8",children:"Time"})]})}),(0,s.jsx)(y.RM,{children:null==p?void 0:p.edges.sort((e,t)=>new Date(t.node.createdAt).getTime()-new Date(e.node.createdAt).getTime()).map(e=>(0,s.jsx)(Y,{activity:e.node,members:i},e.cursor))})]})})})]}),((null==O?void 0:null===(e=O.userEvents.pageInfo)||void 0===e?void 0:e.hasNextPage)||(null==O?void 0:null===(t=O.userEvents.pageInfo)||void 0===t?void 0:t.hasPreviousPage))&&(0,s.jsxs)("div",{className:"flex justify-end",children:[(0,s.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:[" ","Page ",f]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.z,{variant:"outline",className:"h-8 w-8 p-0",disabled:!(null==O?void 0:null===(r=O.userEvents.pageInfo)||void 0===r?void 0:r.hasNextPage),onClick:e=>{var t;A({first:h.L8,after:null==O?void 0:null===(t=O.userEvents.pageInfo)||void 0===t?void 0:t.endCursor}),v(f-1)},children:(0,s.jsx)(N.IconChevronLeft,{className:"h-4 w-4"})}),(0,s.jsx)(j.z,{variant:"outline",className:"h-8 w-8 p-0",disabled:!(null==O?void 0:null===(a=O.userEvents.pageInfo)||void 0===a?void 0:a.hasPreviousPage),onClick:e=>{var t;A({last:h.L8,before:null==O?void 0:null===(t=O.userEvents.pageInfo)||void 0===t?void 0:t.startCursor}),v(f+1)},children:(0,s.jsx)(N.IconChevronRight,{className:"h-4 w-4"})})]})]})]})})]})})})})}function Y(e){var t;let r,{activity:a,members:l}=e,{theme:i}=(0,f.F)(),[c,x]=n.useState(!1);try{r=JSON.parse(a.payload)}catch(e){(null==e?void 0:e.message)&&m.A.error(e.message)}if(!r)return null;let h="";switch(a.kind){case p.nS.Completion:h="Code completion supplied";break;case p.nS.Dismiss:h="Code completion viewed but not used";break;case p.nS.Select:h="Code completion accepted and inserted";break;case p.nS.View:h="Code completion shown in editor"}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.SC,{className:"cursor-pointer text-sm",onClick:()=>x(!c),children:[(0,s.jsx)(y.pj,{className:"pl-4 pr-0",children:(0,s.jsxs)("div",{className:"flex h-8 w-8 items-center justify-center rounded hover:bg-muted",children:[c&&(0,s.jsx)(N.IconChevronsDownUp,{}),!c&&(0,s.jsx)(N.IconChevronUpDown,{})]})}),(0,s.jsx)(y.pj,{className:"font-medium",children:(0,s.jsxs)(C.u,{children:[(0,s.jsx)(C.aJ,{children:(0,d.Z)(a.kind)}),(0,s.jsx)(C._v,{children:(0,s.jsx)("p",{children:h})})]})}),(0,s.jsx)(y.pj,{children:(null===(t=l.find(e=>e.id===a.userId))||void 0===t?void 0:t.email)||a.userId}),(0,s.jsx)(y.pj,{className:"pr-4 md:pr-8",children:(0,s.jsxs)(C.u,{children:[(0,s.jsx)(C.aJ,{children:o()(a.createdAt).isBefore(o()().subtract(1,"days"))?o()(a.createdAt).format("YYYY-MM-DD HH:mm"):o()(a.createdAt).fromNow()}),(0,s.jsxs)(C._v,{children:[(0,s.jsxs)("p",{className:"py-0.5",children:[(0,s.jsx)("b",{className:"mr-1 inline-block w-7",children:"UTC:"}),o().utc(a.createdAt).format("YYYY-MM-DD HH:mm:ss")]}),(0,s.jsxs)("p",{className:"py-0.5",children:[(0,s.jsxs)("b",{className:"mr-1 inline-block w-7",children:[u().tz(u().tz.guess()).format("z"),":"]}),o()(a.createdAt).format("YYYY-MM-DD HH:mm:ss")]})]})]})})]},"".concat(a.id,"}-1")),c&&(0,s.jsx)(y.SC,{className:"w-full bg-muted/30",children:(0,s.jsx)(y.pj,{className:"px-6 font-medium",colSpan:4,children:(0,s.jsx)(E,{src:r,name:!1,collapseStringsAfterLength:50,theme:"dark"===i?"tomorrow":"rjv-default",style:"dark"===i?{background:"transparent"}:{}})})},"".concat(a.id,"-2"))]})}},6230:function(e,t,r){"use strict";var s=r(36164),n=r(3546),a=r(24449),l=r(90379);t.Z=e=>{let{loading:t,fallback:r,delay:d,children:i}=e,[o,c]=n.useState(!t),[u]=(0,a.n)(o,null!=d?d:200);return(n.useEffect(()=>{t||o||c(!0)},[t]),u)?i:r||(0,s.jsx)(l.cg,{})}},90379:function(e,t,r){"use strict";r.d(t,{PF:function(){return i},cg:function(){return l},tB:function(){return d}});var s=r(36164),n=r(74248),a=r(3448);let l=e=>{let{className:t,...r}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("space-y-3",t),...r,children:[(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-full"})]})},d=e=>{let{className:t,...r}=e;return(0,s.jsx)(a.O,{className:(0,n.cn)("h-4 w-full",t),...r})},i=e=>{let{className:t,...r}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("flex flex-col gap-3",t),...r,children:[(0,s.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(a.O,{className:"h-4 w-full"}),(0,s.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,s.jsx)(a.O,{className:"h-4 w-full"})]})}},31458:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return o}});var s=r(36164),n=r(3546),a=r(74047),l=r(14375),d=r(74248);let i=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:o=!1,...c}=e,u=o?a.g7:"button";return(0,s.jsx)(u,{className:(0,d.cn)(i({variant:n,size:l,className:r})),ref:t,...c})});o.displayName="Button"},79972:function(e,t,r){"use strict";r.d(t,{Ol:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var s=r(36164),n=r(3546),a=r(74248);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});l.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});d.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},11208:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(36164),n=r(3546),a=r(74225),l=r(74248);let d=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:d=!0,...i}=e;return(0,s.jsx)(a.f,{ref:t,decorative:d,orientation:n,className:(0,l.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...i})});d.displayName=a.f.displayName},3448:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var s=r(36164),n=r(74248);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("h-4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",t),...r})}},99047:function(e,t,r){"use strict";r.d(t,{RM:function(){return i},SC:function(){return c},iA:function(){return l},pj:function(){return f},ss:function(){return u},xD:function(){return d}});var s=r(36164),n=r(3546),a=r(74248);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})});l.displayName="Table";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});d.displayName="TableHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});i.displayName="TableBody";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})});o.displayName="TableFooter";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});c.displayName="TableRow";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableHead";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});f.displayName="TableCell";let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})});m.displayName="TableCaption"},29:function(e,t,r){"use strict";r.d(t,{_v:function(){return c},aJ:function(){return o},pn:function(){return d},u:function(){return i}});var s=r(36164),n=r(3546),a=r(44421),l=r(74248);let d=a.zt,i=a.fC,o=a.xz,c=n.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...d}=e;return(0,s.jsx)(a.VY,{ref:t,sideOffset:n,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",r),...d})});c.displayName=a.VY.displayName},24449:function(e,t,r){"use strict";r.d(t,{S:function(){return d},n:function(){return i}});var s=r(3546),n=r(45391),a=r(16784);let l=e=>{let t=(0,a.d)(e);s.useEffect(()=>()=>{t.current()},[])};function d(e,t,r){let d=(0,a.d)(e),i=s.useMemo(()=>(0,n.Z)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return d.current(...t)},t,r),[]);return l(()=>i.cancel()),{run:i,cancel:i.cancel,flush:i.flush}}function i(e,t,r){let[n,a]=s.useState(e),{run:l}=d(()=>{a(e)},t,r);return s.useEffect(()=>{l()},[e]),[n,a]}},16784:function(e,t,r){"use strict";r.d(t,{d:function(){return n}});var s=r(3546);function n(e){let t=s.useRef(e);return t.current=e,t}}},function(e){e.O(0,[7565,2897,872,55,2178,6201,2578,3449,9421,3882,2672,1889,9923,4278,9736,1565,8610,3375,5289,1744],function(){return e(e.s=13435)}),_N_E=e.O()}]);
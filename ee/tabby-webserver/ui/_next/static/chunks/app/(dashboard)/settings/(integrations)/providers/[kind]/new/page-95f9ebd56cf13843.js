(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9436],{93423:function(e,t,r){Promise.resolve().then(r.bind(r,54616))},85156:function(e,t,r){"use strict";r.d(t,{Kb:function(){return G},fB:function(){return k}});var n=r(36164),a=r(3546),s=r(70652),i=r.n(s),o=r(11978),l=r(84381),d=r(94909),c=r(5493),u=r(2578),f=r(23782),m=r(18500),p=r(1544),h=r(73460),x=r(31458),b=r(98150),g=r(81565),v=r(82394),j=r(39231);let y=f.Ry({displayName:f.Z_().trim(),accessToken:f.Z_(),apiBase:f.Z_().url().optional().nullable()}),N=y.extend({apiBase:f.Z_().url()}),w=y.extend({accessToken:f.Z_().optional()}),C=N.extend({accessToken:f.Z_().optional()});function G(e){var t;let{isNew:r,form:s,onSubmit:i,onDelete:l,cancleable:c=!0,deletable:f}=e,y=(0,j.A)(),N=(0,o.useRouter)(),[w,C]=a.useState(!1),[G,k]=a.useState(!1),{isSubmitting:q,dirtyFields:I}=s.formState,R=!(0,d.Z)(I),_=async e=>{if(e.preventDefault(),l){k(!0);try{await l()}catch(e){u.A.error("Failed to delete GitHub repository provider")}finally{k(!1)}}},H=a.useMemo(()=>{switch(y){case m.q6.Github:return"e.g. GitHub";case m.q6.GithubSelfHosted:return"e.g. GitHub-Self-Hosted";case m.q6.Gitlab:return"e.g. GitLab";case m.q6.GitlabSelfHosted:return"e.g. GitLab-Self-Hosted";default:return""}},[y]),z=a.useMemo(()=>{if(!r)return Array(36).fill("*").join("");switch(y){case m.q6.Github:case m.q6.GithubSelfHosted:return"e.g. github_pat_1ABCD1234ABCD1234ABCD1234ABCD1234ABCD1234";case m.q6.Gitlab:case m.q6.GitlabSelfHosted:return"e.g. glpat_1ABCD1234ABCD1234ABCD1234ABCD1234";default:return""}},[y,r]),Z=a.useMemo(()=>{switch(y){case m.q6.GithubSelfHosted:return"e.g. https://api.github.yourcompany.com";case m.q6.GitlabSelfHosted:return"e.g. https://gitlab.yourcompany.com";default:return""}},[y]),A=[m.q6.GithubSelfHosted,m.q6.GitlabSelfHosted].includes(y);return(0,n.jsx)(b.l0,{...s,children:(0,n.jsx)("div",{className:"grid gap-2",children:(0,n.jsxs)("form",{className:"grid gap-6",onSubmit:s.handleSubmit(i),children:[(0,n.jsx)(b.Wi,{control:s.control,name:"displayName",render:e=>{let{field:t}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsx)(b.lX,{required:!0,children:"Display name"}),(0,n.jsx)(b.pf,{children:"A display name to help identifying different providers."}),(0,n.jsx)(b.NI,{children:(0,n.jsx)(v.I,{placeholder:H,autoCapitalize:"none",autoCorrect:"off",autoComplete:"off",...t})}),(0,n.jsx)(b.zG,{})]})}}),A&&(0,n.jsx)(b.Wi,{control:s.control,name:"apiBase",render:e=>{let{field:r}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsx)(b.lX,{required:!0,children:"Instance URL"}),(0,n.jsx)(b.pf,{children:"The VCS instance URL. Make sure this instance and Tabby are network reachable from each other."}),(0,n.jsx)(b.NI,{children:(0,n.jsx)(v.I,{placeholder:Z,autoCapitalize:"none",autoCorrect:"off",autoComplete:"off",value:null!==(t=r.value)&&void 0!==t?t:"",onChange:e=>r.onChange(e.target.value)})}),(0,n.jsx)(b.zG,{})]})}}),(0,n.jsx)(b.Wi,{control:s.control,name:"accessToken",render:e=>{let{field:t}=e;return(0,n.jsxs)(b.xJ,{children:[(0,n.jsx)(b.lX,{required:r,children:"Personal Access Token"}),(0,n.jsx)(b.pf,{children:(0,n.jsx)(S,{})}),(0,n.jsx)(b.NI,{children:(0,n.jsx)(v.I,{placeholder:z,className:(0,p.cn)({"placeholder:translate-y-[10%] !placeholder-foreground":!r}),autoCapitalize:"none",autoCorrect:"off",autoComplete:"off",...t})}),(0,n.jsx)(b.zG,{})]})}}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(b.zG,{})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[c&&(0,n.jsx)(x.z,{type:"button",variant:"ghost",disabled:q,onClick:()=>N.back(),children:"Cancel"}),f&&(0,n.jsxs)(h.aR,{open:w,onOpenChange:C,children:[(0,n.jsx)(h.vW,{asChild:!0,children:(0,n.jsx)(x.z,{type:"button",variant:"hover-destructive",children:"Delete"})}),(0,n.jsxs)(h._T,{children:[(0,n.jsxs)(h.fY,{children:[(0,n.jsx)(h.f$,{children:"Are you absolutely sure?"}),(0,n.jsx)(h.yT,{children:"This will delete the provider and remove any repositories that have already been added to the provider."})]}),(0,n.jsxs)(h.xo,{children:[(0,n.jsx)(h.le,{children:"Cancel"}),(0,n.jsxs)(h.OL,{className:(0,x.d)({variant:"destructive"}),onClick:_,disabled:G,children:[G&&(0,n.jsx)(g.IconSpinner,{className:"mr-2"}),"Yes, delete it"]})]})]})]}),(0,n.jsxs)(x.z,{type:"submit",disabled:q||!r&&!R,children:[q&&(0,n.jsx)(g.IconSpinner,{className:"mr-2"}),r?"Create":"Update"]})]})]})]})})})}function k(e,t,r){let n=[m.q6.GithubSelfHosted,m.q6.GitlabSelfHosted].includes(t),a=e?n?N:y:n?C:w;return(0,c.cI)({resolver:(0,l.F)(a),defaultValues:r})}function S(){let e=(0,j.A)();return e===m.q6.Github||e===m.q6.GithubSelfHosted?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Create a dedicated service user and generate a"," ",(0,n.jsx)(q,{href:"https://github.com/settings/personal-access-tokens/new",children:"fine-grained personal access"})," ","token with the member role for the organization or all projects to be managed."]}),(0,n.jsx)("div",{className:"my-2 ml-3",children:"• Contents (Read-only)"}),(0,n.jsx)("div",{className:"my-2 ml-3",children:"• Pull requests (Read-only)"}),(0,n.jsx)("div",{className:"my-2 ml-3",children:"• Issues (Read-only)"})]}):e===m.q6.Gitlab||e===m.q6.GitlabSelfHosted?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Create a dedicated service user and generate a"," ",(0,n.jsx)(q,{href:"https://gitlab.com/-/user_settings/personal_access_tokens",children:"personal access token"})," ","with the maintainer role and at least following permissions for the group or projects to be managed. You can generate a project access token for managing a single project, or generate a group access token to manage all projects within the group."]}),(0,n.jsx)("div",{className:"my-2 ml-3",children:"• api"})]}):null}function q(e){let{href:t,children:r}=e;return(0,n.jsxs)(i(),{className:"inline-flex cursor-pointer flex-row items-center underline",href:t,target:"_blank",children:[r,(0,n.jsx)(g.IconExternalLink,{className:"ml-1"})]})}},39231:function(e,t,r){"use strict";r.d(t,{A:function(){return i}});var n=r(11978),a=r(78613),s=r(11529);function i(){let e=(0,n.useParams)(),t=(0,a.Z)(s.K,t=>{var r;return t.name===(null===(r=e.kind)||void 0===r?void 0:r.toLowerCase())}),r=t>-1?s.K[t].enum:s.K[0].enum;return r}},54616:function(e,t,r){"use strict";r.r(t),r.d(t,{NewProvider:function(){return c}});var n=r(36164);r(3546);var a=r(11978),s=r(43240),i=r(11634),o=r(85156),l=r(39231);let d=(0,s.BX)("\n  mutation CreateIntegration($input: CreateIntegrationInput!) {\n    createIntegration(input: $input)\n  }\n"),c=()=>{let e=(0,l.A)(),t=(0,a.useRouter)(),r=(0,o.fB)(!0,e),s=(0,i.D)(d,{onCompleted(e){(null==e?void 0:e.createIntegration)&&t.back()},form:r}),c=async t=>s({input:{...t,kind:e}});return(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsx)(o.Kb,{isNew:!0,form:r,onSubmit:c})})}},11529:function(e,t,r){"use strict";r.d(t,{K:function(){return a}});var n=r(18500);let a=[{name:"github",enum:n.q6.Github,meta:{displayName:"GitHub"}},{name:"github-self-hosted",enum:n.q6.GithubSelfHosted,meta:{displayName:"GitHub Self-Hosted"}},{name:"gitlab",enum:n.q6.Gitlab,meta:{displayName:"GitLab"}},{name:"gitlab-self-hosted",enum:n.q6.GitlabSelfHosted,meta:{displayName:"GitLab Self-Hosted"}}]},73460:function(e,t,r){"use strict";r.d(t,{OL:function(){return b},_T:function(){return f},aR:function(){return l},f$:function(){return h},fY:function(){return m},le:function(){return g},vW:function(){return d},xo:function(){return p},yT:function(){return x}});var n=r(36164),a=r(3546),s=r(28961),i=r(1544),o=r(31458);let l=s.fC,d=s.xz,c=e=>{let{className:t,children:r,...a}=e;return(0,n.jsx)(s.h_,{className:(0,i.cn)(t),...a,children:(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:r})})};c.displayName=s.h_.displayName;let u=a.forwardRef((e,t)=>{let{className:r,children:a,...o}=e;return(0,n.jsx)(s.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",r),...o,ref:t})});u.displayName=s.aV.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(u,{}),(0,n.jsx)(s.VY,{ref:t,className:(0,i.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",r),...a})]})});f.displayName=s.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="AlertDialogFooter";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",r),...a})});h.displayName=s.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});x.displayName=s.dk.displayName;let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.aU,{ref:t,className:(0,i.cn)((0,o.d)(),r),...a})});b.displayName=s.aU.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$j,{ref:t,className:(0,i.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});g.displayName=s.$j.displayName},31458:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var n=r(36164),a=r(3546),s=r(74047),i=r(14375),o=r(1544);let l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},98150:function(e,t,r){"use strict";r.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return d},lX:function(){return h},pf:function(){return b},xJ:function(){return p},zG:function(){return g}});var n=r(36164),a=r(3546),s=r(74047),i=r(5493),o=r(1544),l=r(5266);let d=i.RV,c=a.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(i.Qr,{...t})})},f=()=>{let e=a.useContext(c),t=a.useContext(m),{getFieldState:r,formState:n}=(0,i.Gc)(),s=e.name||"root",o=r(s,n);if(!n)throw Error("useFormField should be used within <Form>");let{id:l}=t;return{id:l,name:s,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},m=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...s}=e,i=a.useId();return(0,n.jsx)(m.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...s})})});p.displayName="FormItem";let h=a.forwardRef((e,t)=>{let{className:r,required:a,...s}=e,{error:i,formItemId:d}=f();return(0,n.jsx)(l._,{ref:t,className:(0,o.cn)(i&&"text-destructive",a&&'after:ml-0.5 after:text-destructive after:content-["*"]',r),htmlFor:d,...s})});h.displayName="FormLabel";let x=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:o,formMessageId:l}=f();return(0,n.jsx)(s.g7,{ref:t,id:i,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...r})});x.displayName="FormControl";let b=a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:s}=f();return(0,n.jsx)("div",{ref:t,id:s,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});b.displayName="FormDescription";let g=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e,{error:i,formMessageId:l}=f(),d=i?String(null==i?void 0:i.message):a;return d?(0,n.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",r),...s,children:d}):null});g.displayName="FormMessage"},82394:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(36164),a=r(3546),s=r(1544);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},5266:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(36164),a=r(3546),s=r(90893),i=r(14375),o=r(1544);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,o.cn)(l(),r),...a})});d.displayName=s.f.displayName},70652:function(e,t,r){e.exports=r(54007)},78613:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(96703),a=r(51722),s=r(26165),i=1/0,o=function(e){var t,r=(t=e)?(t=(0,s.Z)(t))===i||t===-i?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0,n=r%1;return r==r?n?r-n:r:0},l=Math.max,d=function(e,t,r){var s=null==e?0:e.length;if(!s)return -1;var i=null==r?0:o(r);return i<0&&(i=l(s+i,0)),(0,n.Z)(e,(0,a.Z)(t,3),i)}},94909:function(e,t,r){"use strict";var n=r(63563),a=r(43108),s=r(97589),i=r(38813),o=r(20568),l=r(90328),d=r(36586),c=r(33321),u=Object.prototype.hasOwnProperty;t.Z=function(e){if(null==e)return!0;if((0,o.Z)(e)&&((0,i.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,l.Z)(e)||(0,c.Z)(e)||(0,s.Z)(e)))return!e.length;var t=(0,a.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,d.Z)(e))return!(0,n.Z)(e).length;for(var r in e)if(u.call(e,r))return!1;return!0}}},function(e){e.O(0,[1386,55,1058,4007,1350,2578,9421,240,2287,7070,8961,1544,1565,3240,3396,3375,5289,1744],function(){return e(e.s=93423)}),_N_E=e.O()}]);
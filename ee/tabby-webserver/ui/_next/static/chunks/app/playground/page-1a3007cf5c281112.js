(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2383],{11293:function(e,t,r){Promise.resolve().then(r.bind(r,96928))},96928:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(36164),a=r(3546),s=r(24449),i=r(44645),l=r(25647),o=r(74248),c=r(17451);c.a.getState;let d=c.a.setState,u=e=>{d(()=>({activeChatId:e}))},h=(e,t)=>{let r=null!=e?e:(0,o.x0)();d(e=>({activeChatId:r,chats:[{id:r,title:null!=t?t:"",messages:[],createdAt:new Date,userId:"",path:""},...e.chats||[]]}))},f=e=>{d(t=>{var r;return{activeChatId:(0,o.x0)(),chats:null===(r=t.chats)||void 0===r?void 0:r.filter(t=>t.id!==e)}})},m=()=>{d(()=>({activeChatId:(0,o.x0)(),chats:[]}))},v=(e,t)=>{d(r=>{var n;return{chats:null===(n=r.chats)||void 0===n?void 0:n.map(r=>r.id===e?{...r,messages:t}:r)}})},p=(e,t)=>{d(r=>{var n;return{chats:null===(n=r.chats)||void 0===n?void 0:n.map(r=>r.id===e?{...r,...t}:r)}})},g=(e,t)=>{if(Array.isArray(e)&&t)return e.find(e=>e.id===t)};var x=r(3765),b=r(57830),j=r(11598),y=r(30601),N=r(6230),w=r(90379),S=r(31458),C=r(81565),E=r(11208),I=r(29);let k=e=>{let{onClear:t,onClick:r,onBlur:s,...i}=e,[l,o]=a.useState(!1),c=()=>{o(!1)};return(0,n.jsx)(S.z,{className:"h-12 w-full justify-start",variant:"ghost",...i,onClick:e=>{l?(t(),o(!1)):o(!0),null==r||r(e)},onBlur:e=>{l&&c(),null==s||s(e)},children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.IconCheck,{}),(0,n.jsx)("span",{className:"ml-2",children:"Confirm Clear Chats"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.IconTrash,{}),(0,n.jsx)("span",{className:"ml-2",children:"Clear Chats"})]})})};var z=r(30220),_=r(82394);let H=e=>{let{children:t,initialValue:r,chatId:s}=e,[i,l]=a.useState(!1),o=a.useRef(null),[c,d]=a.useState(r),u=async e=>{e.preventDefault(),(null==c?void 0:c.trim())&&(p(s,{title:c}),l(!1))};return(0,n.jsxs)(z.Vq,{open:i,onOpenChange:l,children:[(0,n.jsxs)(I.u,{children:[(0,n.jsx)(I.aJ,{asChild:!0,children:(0,n.jsxs)(S.z,{variant:"ghost",size:"icon",onClick:()=>l(!0),children:[(0,n.jsx)(C.IconEdit,{}),(0,n.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,n.jsx)(I._v,{side:"bottom",children:"Edit"})]}),(0,n.jsx)(z.cZ,{className:"bg-background",children:(0,n.jsxs)(z.fK,{className:"gap-3",children:[(0,n.jsx)(z.$N,{children:"Set Chat Title"}),(0,n.jsx)(z.Be,{asChild:!0,children:(0,n.jsxs)("form",{className:"relative",onSubmit:u,ref:o,children:[(0,n.jsx)(_.I,{className:"h-10 pr-12",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{if("Enter"===e.key){var t;null===(t=o.current)||void 0===t||t.requestSubmit(),e.preventDefault()}}}),(0,n.jsx)("div",{className:"absolute right-2 top-1",children:(0,n.jsxs)(I.u,{children:[(0,n.jsx)(I.aJ,{asChild:!0,children:(0,n.jsxs)(S.z,{type:"submit",size:"icon",disabled:""===c,children:[(0,n.jsx)(C.IconArrowElbow,{}),(0,n.jsx)("span",{className:"sr-only",children:"Send message"})]})}),(0,n.jsx)(I._v,{children:"Edit Title"})]})})]})})]})})]})},R=e=>{let{className:t,style:r}=e,a=(0,l.o)(c.a,e=>e._hasHydrated),s=(0,l.o)(c.a,e=>e.chats),i=(0,l.o)(c.a,e=>e.activeChatId),d=(e,t)=>{f(t)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:t,children:(0,n.jsxs)("div",{className:"flex w-[279px] flex-col gap-2 transition-all",style:r,children:[(0,n.jsx)("div",{className:"shrink-0 pb-0 pl-3 pt-2",children:(0,n.jsxs)(S.z,{className:"h-12 w-full justify-start",variant:"ghost",onClick:e=>{u((0,o.x0)())},children:[(0,n.jsx)(C.IconPlus,{}),(0,n.jsx)("span",{className:"ml-2",children:"New Chat"})]})}),(0,n.jsx)(E.Z,{}),(0,n.jsx)(b.ScrollArea,{className:"flex flex-col gap-2 px-3",children:a?(0,n.jsx)(n.Fragment,{children:null==s?void 0:s.map(e=>{let t=i===e.id;return(0,n.jsxs)("div",{onClick:t=>u(e.id),className:(0,o.cn)("my-2 flex w-[254px] cursor-pointer items-center justify-between gap-3 rounded-lg px-3 py-1 text-sm transition-all hover:bg-primary/10",t&&"bg-primary/10"),children:[(0,n.jsx)("span",{className:"truncate leading-8",children:e.title||"(Untitled)"}),t&&(0,n.jsxs)("div",{className:"flex items-center",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(H,{initialValue:e.title,chatId:e.id}),(0,n.jsxs)(I.u,{children:[(0,n.jsx)(I.aJ,{asChild:!0,children:(0,n.jsxs)(S.z,{variant:"ghost",size:"icon",onClick:t=>d(t,e.id),children:[(0,n.jsx)(C.IconTrash,{}),(0,n.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,n.jsx)(I._v,{side:"bottom",children:"Delete"})]})]})]},e.id)})}):(0,n.jsx)(w.cg,{})}),(0,n.jsx)(E.Z,{}),(0,n.jsx)("div",{className:"shrink-0 pb-2",children:(0,n.jsx)(k,{disabled:(null==s?void 0:s.length)===0,onClear:()=>{m()}})})]})})})},D=[];function O(){var e,t;let{searchParams:r,updateUrlComponents:d}=(0,i.Z)(),u=null===(e=r.get("initialMessage"))||void 0===e?void 0:e.toString(),f=a.useRef(!!u),m=a.useRef(null),p=a.useRef(null),[S]=(0,y.Hb)(),C=(0,l.o)(c.a,e=>e._hasHydrated),E=(0,l.o)(c.a,e=>e.activeChatId),I=(0,l.o)(c.a,e=>e.chats),k=g(I,E),z=a.useMemo(()=>{var e;return null==k?void 0:null===(e=k.messages)||void 0===e?void 0:e.filter(e=>!!e.user)},[E]);a.useEffect(()=>{let e=async e=>{if(e.origin!==window.origin||!e.data||!m.current||m.current.isLoading)return;let{data:t}=e;if("sendUserChat"===t.action){m.current.sendUserChat({...t.payload});return}"stop"===t.action&&m.current.stop()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]);let _=(0,s.S)((e,t)=>{if(!k&&(null==t?void 0:t.length)){var r,n;h(E,(0,o.aF)(null==t?void 0:null===(n=t[0])||void 0===n?void 0:null===(r=n.user)||void 0===r?void 0:r.message))}else k&&v(e,t)},1e3);a.useEffect(()=>()=>_.flush(),[]);let H=S?{height:"calc(100vh - ".concat(y.wt,")")}:{height:"100vh"};return(0,n.jsxs)("div",{className:"grid flex-1 overflow-hidden lg:grid-cols-[280px_1fr]",children:[(0,n.jsx)(R,{className:"hidden w-[280px] border-r lg:block",style:H}),(0,n.jsx)(N.Z,{delay:0,loading:!C||!E,fallback:(0,n.jsx)("div",{className:"mx-auto w-full max-w-2xl pt-4 md:pt-10",children:(0,n.jsx)(w.cg,{})}),children:(0,n.jsx)(b.ScrollArea,{className:"transition-all",style:H,ref:p,children:(0,n.jsx)("div",{children:(0,n.jsx)(j.e,{welcomeMessage:"Welcome to Playground!",chatId:E,initialMessages:null!=z?z:D,ref:m,container:(null==p?void 0:null===(t=p.current)||void 0===t?void 0:t.children[1])||void 0,onThreadUpdates:e=>{E&&_.run(E,e)},onNavigateToContext:e=>{if(!e.filepath)return;let t=new URL("".concat(window.location.origin,"/files")),r=new URLSearchParams;r.append("redirect_filepath",e.filepath),r.append("redirect_git_url",e.git_url),t.search=r.toString();let n=(0,o.nO)(e.range);n&&(t.hash=n),window.open(t.toString())},onLoaded:()=>{var e;f.current&&(null===(e=m.current)||void 0===e?void 0:e.sendUserChat)&&E&&u&&(m.current.sendUserChat({message:u}).then(()=>{d({searchParams:{del:"initialMessage"}})}),f.current=!1)},fetcher:(e,t)=>(0,x.Z)(e,{...t,responseFormatter:e=>e,errorHandler(e){throw Error(e?String(e.status):"Fail to fetch")}}),promptFormClassname:"absolute"},E)})})})]})}},30601:function(e,t,r){"use strict";r.d(t,{Hb:function(){return f},wt:function(){return d},xc:function(){return m},yo:function(){return h}});var n=r(36164),a=r(3546),s=r(74630),i=r(36327),l=r(80605),o=r(74248),c=r(81565);let d="3.5rem",u=a.createContext({}),h=e=>{let{children:t}=e,r=(0,l.UA)(),[i,o]=a.useState(!1);return a.useEffect(()=>{let e=window.self!==window.top;e||(0,s.Z)(r)||o(r)},[r]),(0,n.jsx)(u.Provider,{value:{isShowDemoBanner:i,setIsShowDemoBanner:o},children:t})};function f(){let{isShowDemoBanner:e,setIsShowDemoBanner:t}=a.useContext(u);return[e,t]}function m(){let[e,t]=f(),{data:r}=(0,i.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,n.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:d}:{height:0},children:[(0,n.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,n.jsx)("span",{children:"\uD83D\uDCC6"}),(0,n.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,n.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,n.jsx)(c.IconGithub,{}),(0,n.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,n.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,n.jsxs)("div",{className:(0,o.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":r,"h-0 opacity-0":!r}),children:[(0,n.jsx)(c.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,n.jsx)("span",{children:null==r?void 0:r.stargazers_count}),(0,n.jsx)(c.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,n.jsx)("span",{children:null==r?void 0:r.forks_count})]})]})]}),(0,n.jsx)(c.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>t(!1)})]})]})}},6230:function(e,t,r){"use strict";var n=r(36164),a=r(3546),s=r(24449),i=r(90379);t.Z=e=>{let{loading:t,fallback:r,delay:l,children:o}=e,[c,d]=a.useState(!t),[u]=(0,s.n)(c,null!=l?l:200);return(a.useEffect(()=>{t||c||d(!0)},[t]),u)?o:r||(0,n.jsx)(i.cg,{})}},30220:function(e,t,r){"use strict";r.d(t,{$N:function(){return v},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return h},fK:function(){return f},hg:function(){return c}});var n=r(36164),a=r(3546),s=r(4318),i=r(1663),l=r(74248);let o=s.fC,c=s.xz,d=s.h_;s.x8;let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});u.displayName=s.aV.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,...o}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[a,(0,n.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});v.displayName=s.Dx.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});p.displayName=s.dk.displayName},57830:function(e,t,r){"use strict";r.r(t),r.d(t,{ScrollArea:function(){return l},ScrollBar:function(){return o}});var n=r(36164),a=r(3546),s=r(50778),i=r(74248);let l=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,n.jsxs)(s.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",r),...l,children:[(0,n.jsx)(s.l_,{className:"h-full w-full rounded-[inherit] [&>div]:!block",children:a}),(0,n.jsx)(o,{}),(0,n.jsx)(s.Ns,{})]})});l.displayName=s.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:r,orientation:a="vertical",...l}=e;return(0,n.jsx)(s.gb,{ref:t,orientation:a,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,n.jsx)(s.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=s.gb.displayName},38785:function(e,t,r){"use strict";r.d(t,{U:function(){return s}});var n=r(3546);let a=!0;function s(){let[e,t]=n.useState(()=>!a);return n.useEffect(function(){a=!1,t(!0)},[]),e}},44645:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(3546),a=r(11978);function s(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),r=(0,a.useSearchParams)(),s=(0,n.useCallback)(e=>{let t=new URLSearchParams(r);e&&Object.entries(e).forEach(e=>{let[r,n]=e;return t.set(r,n)});let n=t.toString();return n.length>0?"?".concat(n):""},[r]),i=(0,n.useCallback)(n=>{let a=function(e,t,r){var n,a;let s=null===(n=r.searchParams)||void 0===n?void 0:n.set,i=null===(a=r.searchParams)||void 0===a?void 0:a.del,l=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[t,r]=e;return l.set(t,r)}),i&&(Array.isArray(i)?i.forEach(e=>l.delete(e)):l.delete(i));let o=l.toString(),c=e;return o.length>0&&(c+="?".concat(o)),r.hash&&(c+="#".concat(r.hash.replace(/^#/,""))),c}((null==n?void 0:n.pathname)||e,r,n);n.replace?t.replace(a):t.push(a)},[e,r]);return{pathname:e,router:t,searchParams:r,getQueryString:s,updateUrlComponents:i}}},25647:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});var n=r(3546),a=r(38785);let s=(e,t)=>{let r=(0,a.U)(),s=e(e=>null==e?void 0:e._hasHydrated),i=e(t),[l,o]=n.useState(r&&s?i:void 0);return n.useEffect(()=>{o(i)},[i]),l}},17451:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var n=r(27257),a=r(85654),s=r(74248);let i=["_hasHydrated","setHasHydrated","activeChatId"],l={_hasHydrated:!1,chats:void 0,activeChatId:(0,s.x0)()},o=(0,n.Ue)()((0,a.tJ)(e=>({...l,setHasHydrated:t=>{e({_hasHydrated:t})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!i.includes(t)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},67635:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(3546),a=r(94348),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,l=n.useRef,o=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var u=l(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var f=i(e,(u=c(function(){function e(e){if(!o){if(o=!0,i=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return l=t}return l=e}if(t=l,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?t:(i=e,l=r)}var i,l,o=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]))[0],u[1]);return o(function(){h.hasValue=!0,h.value=f},[f]),d(f),f}},52635:function(e,t,r){"use strict";e.exports=r(67635)},27257:function(e,t,r){"use strict";r.d(t,{Ue:function(){return u}});let n=e=>{let t;let r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,s={setState:n,getState:a,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,a,s),s},a=e=>e?n(e):n;var s=r(3546),i=r(52635);let{useDebugValue:l}=s,{useSyncExternalStoreWithSelector:o}=i,c=!1,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=e.getState,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=o(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return l(n),n})(t,e,r);return Object.assign(r,t),r},u=e=>e?d(e):d},85654:function(e,t,r){"use strict";r.d(t,{tJ:function(){return i}});let n=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>n(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>n(t)(e)}}},a=(e,t)=>(r,a,s)=>{let i,l,o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,d=new Set,u=new Set;try{i=o.getStorage()}catch(e){}if(!i)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},a,s);let h=n(o.serialize),f=()=>{let e;let t=o.partialize({...a()}),r=h({state:t,version:o.version}).then(e=>i.setItem(o.name,e)).catch(t=>{e=t});if(e)throw e;return r},m=s.setState;s.setState=(e,t)=>{m(e,t),f()};let v=e((...e)=>{r(...e),f()},a,s),p=()=>{var e;if(!i)return;c=!1,d.forEach(e=>e(a()));let t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,a()))||void 0;return n(i.getItem.bind(i))(o.name).then(e=>{if(e)return o.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return r(l=o.merge(e,null!=(t=a())?t:v),!0),f()}).then(()=>{null==t||t(l,void 0),c=!0,u.forEach(e=>e(l))}).catch(e=>{null==t||t(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(i=e.getStorage())},clearStorage:()=>{null==i||i.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>c,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},p(),l||v},s=(e,t)=>(r,a,s)=>{let i,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(n=r.getItem(e))?n:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,c=new Set,d=new Set,u=l.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),r(...e)},a,s);let h=()=>{let e=l.partialize({...a()});return u.setItem(l.name,{state:e,version:l.version})},f=s.setState;s.setState=(e,t)=>{f(e,t),h()};let m=e((...e)=>{r(...e),h()},a,s),v=()=>{var e,t;if(!u)return;o=!1,c.forEach(e=>{var t;return e(null!=(t=a())?t:m)});let s=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=a())?e:m))||void 0;return n(u.getItem.bind(u))(l.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===l.version)return e.state;if(l.migrate)return l.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return r(i=l.merge(e,null!=(t=a())?t:m),!0),h()}).then(()=>{null==s||s(i,void 0),i=a(),o=!0,d.forEach(e=>e(i))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{l={...l,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},l.skipHydration||v(),i||m},i=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),a(e,t)):s(e,t)}},function(e){e.O(0,[7998,5498,6312,5384,1283,3449,2578,9421,9317,1454,4421,7828,830,4546,9275,7680,778,426,739,5606,6806,1687,4382,864,9736,1565,7417,1598,3375,5289,1744],function(){return e(e.s=11293)}),_N_E=e.O()}]);
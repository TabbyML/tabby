(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{14454:function(e,t,n){Promise.resolve().then(n.bind(n,7931))},7931:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(36164),o=n(3546),a=n(42891),l=n.n(a),i=n(11978),s=n(23342),u=n(94755),c=n(47190),d=n.n(c),f=n(42450),m=n(36982),p=n(93668),y=n(11075),h=n(14439),v=n(57288),w=n(31458),b=n(81565),g=n(3236),x=n(73033);n(2596);var S=n(66794);let E=e=>d()(e).hsl().toString().replace(/hsla?\(/,"").replace(")","").split(",").slice(0,3).map((e,t)=>0===t?parseFloat(e).toFixed(1):e).join("");function j(){let[e,t]=(0,o.useState)(!1),[n,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)(null),[j,k]=(0,o.useState)(""),[C,N]=(0,o.useState)(),[A,_]=(0,o.useState)([]),[I,R]=(0,o.useState)(null),[L,K]=(0,o.useState)(null),[M,O]=(0,o.useState)(!1),P=(0,o.useRef)(null),{width:W}=(0,u.iP)(),T=(0,o.useRef)(W),Y=(0,o.useRef)(null),q=(0,i.useSearchParams)(),V=q.get("client"),F=!!V||void 0,G=(0,o.useRef)(),[Z,$]=(0,o.useState)(!1),[z,H]=(0,o.useState)(!1),[B,D]=(0,o.useState)(!1),[J,U]=(0,o.useState)(!1),X=e=>{P.current?P.current.executeCommand(e):N(e)},Q=e=>{if(P.current)P.current.addRelevantContext(e);else{let t=[...A];t.push(e),_(t)}},ee=e=>{P.current?P.current.updateActiveSelection(e):e&&R(e)},et=(0,h.H)({init:e=>{P.current||(V&&(0,S.zr)(e.fetcherOptions),k((0,v.x0)()),d(e.fetcherOptions),G.current=e.useMacOSKeyboardEventHandler)},executeCommand:async e=>X(e),showError:e=>{K(e)},cleanError:()=>{K(null)},addRelevantContext:e=>Q(e),updateTheme:(e,t)=>{let n=e.split(";").filter(e=>e).map(e=>{let[t,n]=e.split(":"),r=n.trim(),o=r.startsWith("#")||r.startsWith("rgb");if(!o)return"".concat(t,": ").concat(n);let a=E(r);return"".concat(t,": ").concat(a)}).join(";");document.documentElement.style.cssText=n,document.documentElement.className=t+" client client-".concat(V)},updateActiveSelection:e=>ee(e)});(0,o.useEffect)(()=>{let e=()=>{setTimeout(()=>{var e;null===(e=Y.current)||void 0===e||e.focus()},0)};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),(0,o.useEffect)(()=>{let e=(e,t)=>{null==et||et.onKeyboardEvent(e,{code:t.code,isComposing:t.isComposing,key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,location:t.location,repeat:t.repeat,keyCode:t.keyCode})},t=t=>{G.current?t.metaKey&&"KeyC"===t.code?document.execCommand("copy"):t.metaKey&&"KeyX"===t.code?document.execCommand("cut"):t.metaKey&&"KeyV"===t.code?document.execCommand("paste"):t.metaKey&&"KeyA"===t.code?document.execCommand("selectAll"):e("keydown",t):e("keydown",t)},n=t=>{e("keyup",t)},r=t=>{e("keypress",t)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("keypress",r),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("keypress",r)}},[et,V]),(0,o.useEffect)(()=>{if(et){null==et||et.onLoaded({apiVersion:y.uL});let e=async()=>{null==et||et.hasCapability("onApplyInEditorV2").then($),null==et||et.hasCapability("lookupSymbol").then(H),null==et||et.hasCapability("readWorkspaceGitRepositories").then(D),Promise.all([null==et?void 0:et.hasCapability("fetchSessionState"),null==et?void 0:et.hasCapability("storeSessionState")]).then(e=>{U(e.every(e=>!!e))})};e().then(()=>{a(!0)})}},[et]),(0,o.useLayoutEffect)(()=>{if(e){if(W&&n&&c&&!L&&!T.current){var t;null===(t=P.current)||void 0===t||t.focus()}T.current=W}},[W,e]);let en=()=>{_([]),N(void 0),R(null)},er=async e=>{var t;return null!==(t=null==et?void 0:et.openInEditor(e))&&void 0!==t&&t},eo=async e=>null==et?void 0:et.openExternal(e),ea=async()=>{var e;return null!==(e=null==et?void 0:et.getActiveEditorSelection())&&void 0!==e?e:null},el=async()=>{var e,t;return null!==(t=null==et?void 0:null===(e=et.fetchSessionState)||void 0===e?void 0:e.call(et))&&void 0!==t?t:null},ei=async e=>{var t;return null==et?void 0:null===(t=et.storeSessionState)||void 0===t?void 0:t.call(et,e)},es=async()=>{O(!0),await (null==et?void 0:et.refresh()),O(!1)};function eu(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"h-screen w-screen",style:{padding:"intellij"==V?"20px":"5px 18px"},children:[(0,r.jsxs)("div",{className:"flex items-center",style:{marginBottom:"0.55em"},children:[(0,r.jsx)(l(),{src:s.Z,alt:"logo",className:"rounded-full",style:{background:"rgb(232, 226, 210)",marginRight:"0.375em",padding:"0.15em"},width:18}),(0,r.jsx)("p",{className:"font-semibold",children:"Tabby"})]}),t]})}return L?(0,r.jsx)(eu,{children:(0,r.jsxs)(r.Fragment,{children:[L.title&&(0,r.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:L.title}),(0,r.jsx)(x.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[m.Z,p.Z],children:L.content}),(0,r.jsxs)(w.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:es,children:[M&&(0,r.jsx)(b.IconSpinner,{}),"Refresh"]})]})}):n&&c?(0,r.jsx)(f.SV,{FallbackComponent:function(e){let{error:t}=e;return(0,r.jsxs)(eu,{children:[(0,r.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:"Something went wrong"}),(0,r.jsx)("p",{children:t.message}),(0,r.jsxs)(w.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:es,children:[M&&(0,r.jsx)(b.IconSpinner,{}),"Refresh"]})]})},children:(0,r.jsx)(g.e,{chatId:j,ref:P,chatInputRef:Y,onLoaded:()=>{let e=P.current;e&&(A.forEach(t=>{e.addRelevantContext(t)}),I&&e.updateActiveSelection(I),C&&e.executeCommand(C),en(),t(!0))},maxWidth:"vscode"===V?"5xl":void 0,onCopyContent:F&&(null==et?void 0:et.onCopy),onApplyInEditor:F&&(Z?null==et?void 0:et.onApplyInEditorV2:null==et?void 0:et.onApplyInEditor),supportsOnApplyInEditorV2:Z,onLookupSymbol:F&&(z?null==et?void 0:et.lookupSymbol:void 0),openInEditor:er,openExternal:eo,readWorkspaceGitRepositories:B?null==et?void 0:et.readWorkspaceGitRepositories:void 0,getActiveEditorSelection:ea,fetchSessionState:J?el:void 0,storeSessionState:J?ei:void 0},j)}):(0,r.jsx)(eu,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"opacity-80",children:"Welcome to Tabby Chat! Just a moment while we get things ready..."}),(0,r.jsx)(b.IconSpinner,{className:"mx-auto",style:{marginTop:"1.25em",width:"0.875em",height:"0.875em"}})]})})}},6230:function(e,t,n){"use strict";var r=n(36164),o=n(3546),a=n(24449),l=n(90379);t.Z=e=>{let{loading:t,fallback:n,delay:i,children:s}=e,[u,c]=o.useState(!t),[d]=(0,a.n)(u,null!=i?i:200);return(o.useEffect(()=>{t||u||c(!0)},[t]),d)?s:n||(0,r.jsx)(l.cg,{})}},73033:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(36164),o=n(3546),a=n(52991);let l=(0,o.memo)(e=>(0,r.jsx)(a.D,{linkTarget:"_blank",...e}),(e,t)=>e.children===t.children&&e.className===t.className)},52569:function(e,t,n){"use strict";n.d(t,{SQ:function(){return x},Yt:function(){return g},nY:function(){return b}});var r=n(36164),o=n(3546),a=n(87782),l=n(21454),i=n(36327),s=n(98454),u=n(3765),c=n(57288),d=n(66612);let f=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)(d.fC,{ref:t,className:(0,c.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...o})});f.displayName=d.fC.displayName;let m=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)(d.Ee,{ref:t,className:(0,c.cn)("aspect-square h-full w-full",n),...o})});m.displayName=d.Ee.displayName;let p=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,r.jsx)(d.NY,{ref:t,className:(0,c.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...o})});p.displayName=d.NY.displayName;var y=n(3448),h=n(30410).lW;let v="not_found",w=new Set,b=e=>{w.delete(e),(0,l.JG)("/avatar/".concat(e))};function g(e){var t;let{user:n,className:l,fallback:s}=e,d=null==n?void 0:n.id,b=d?"/avatar/".concat(d):null,{data:g,isLoading:x,error:S}=(0,i.Z)(b,e=>{if(!(!d||w.has(d)))return(0,u.Z)(e,{responseFormatter:async e=>{let t=await e.blob(),n=h.from(await t.arrayBuffer());return"data:image/png;base64,".concat(n.toString("base64"))},errorHandler:e=>{if(404===e.status)throw Error(v)}})}),E=o.useMemo(()=>{if(null==n?void 0:n.email)return(0,a.B)(n.email)},[null==n?void 0:n.email]);return x?(0,r.jsx)(y.O,{className:(0,c.cn)("h-16 w-16 rounded-full",l)}):((null==S?void 0:S.message)===v&&d&&w.add(d),g||E||!s)?!g&&E?(0,r.jsx)(a.Z,{className:(0,c.cn)("h-16 w-16",l),...E}):(0,r.jsxs)(f,{className:(0,c.cn)("h-16 w-16",l),children:[(0,r.jsx)(m,{src:g,alt:null==n?void 0:n.email,className:"object-cover"}),(0,r.jsx)(p,{children:null==n?void 0:null===(t=n.email)||void 0===t?void 0:t.substring(0,2)})]}):s}function x(e){let[{data:t}]=(0,s.P)();return(0,r.jsx)(g,{user:null==t?void 0:t.me,...e})}},2596:function(){},11075:function(e,t,n){"use strict";n.d(t,{eI:function(){return a},n0:function(){return l},uL:function(){return o}});var r=n(44494);let o="0.5.0";function a(e,t){return(0,r.K9)(e,{expose:{refresh:t.refresh,onApplyInEditor:t.onApplyInEditor,onApplyInEditorV2:t.onApplyInEditorV2,onLoaded:t.onLoaded,onCopy:t.onCopy,onKeyboardEvent:t.onKeyboardEvent,lookupSymbol:t.lookupSymbol,openInEditor:t.openInEditor,openExternal:t.openExternal,readWorkspaceGitRepositories:t.readWorkspaceGitRepositories,getActiveEditorSelection:t.getActiveEditorSelection,fetchSessionState:t.fetchSessionState,storeSessionState:t.storeSessionState}})}function l(e){return(0,r.cy)({expose:{init:e.init,executeCommand:e.executeCommand,showError:e.showError,cleanError:e.cleanError,addRelevantContext:e.addRelevantContext,updateTheme:e.updateTheme,updateActiveSelection:e.updateActiveSelection}})}},14439:function(e,t,n){"use strict";n.d(t,{H:function(){return l},m:function(){return a}});var r=n(3546),o=n(11075);function a(e,t){let[n,a]=(0,r.useState)(null),l=!1;return(0,r.useEffect)(()=>{e.current&&!l&&(l=!0,a((0,o.eI)(e.current,t)))},[e.current]),n}function l(e){let[t,n]=(0,r.useState)(null),a=!1;return(0,r.useEffect)(()=>{let t=window.self!==window.top;t&&!a&&(a=!0,n((0,o.n0)(e)))},[]),t}n(44494)},44494:function(e,t,n){"use strict";n.d(t,{K9:function(){return w},cy:function(){return b}});let r=Symbol.for("quilt.threads.retain"),o=Symbol.for("quilt.threads.release"),a=Symbol.for("quilt.threads.retained-by"),l=Symbol.for("quilt.threads.encode"),i=Symbol.for("quilt.threads.transferable");class s{memoryManaged=new Set;add(e){this.memoryManaged.add(e),e[a].add(this),e[r]()}release(){for(let e of this.memoryManaged)e[a].delete(this),e[o]();this.memoryManaged.clear()}}function u(e){return!!(e&&e[r]&&e[o])}function c(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}function d(e,{expose:t,callable:n,signal:d,uuid:p=m,encoder:y=function({encode:e,decode:t}={}){return{encode:function(e,t){let r={api:t,seen:new Map,encode:e=>n(e,r,!0)};return n(e,r)},decode:function(e,t,n){let o={api:t,decode:e=>r(e,o,n,!0)};return r(e,o)}};function n(t,r,o=!1){let{seen:a,api:s,encode:u}=r;if(!o&&e)return e(t,u);if(null==t)return[t];let d=a.get(t);if(d)return d;if(a.set(t,[void 0]),"object"==typeof t){if(t[i]){let e=[t,[t]];return a.set(t,e),e}let e=[],o=t=>{let[o,a=[]]=n(t,r);return e.push(...a),o};if("function"==typeof t[l]){let n=t[l]({encode:o}),r=[n,e];return a.set(t,r),r}if(Array.isArray(t)){let n=t.map(e=>o(e)),r=[n,e];return a.set(t,r),r}if(t instanceof RegExp){let n={"_@r":[t.source,t.flags]},r=[n,e];return a.set(t,r),r}if(t instanceof URL){let n={"_@u":t.href},r=[n,e];return a.set(t,r),r}if(t instanceof Date){let n={"_@d":t.toISOString()},r=[n,e];return a.set(t,r),r}if(t instanceof Map){let n=[...t.entries()].map(([e,t])=>[o(e),o(t)]),r=[{"_@m":n},e];return a.set(t,r),r}if(t instanceof Set){let n=[...t].map(e=>o(e)),r=[{"_@s":n},e];return a.set(t,r),r}let s=null!=t&&(Symbol.asyncIterator in t||Symbol.iterator in t)&&"function"==typeof t.next;if(c(t)||s){let n={};for(let e of Object.keys(t))n[e]=o(t[e]);s&&(n.next??=o(t.next.bind(t)),n.return??=o(t.return.bind(t)),n.throw??=o(t.throw.bind(t)),n["_@i"]=!0);let r=[n,e];return a.set(t,r),r}}if("function"==typeof t){let e=s.functions?.add(t);if(null==e)return[e];let n=[{"_@f":e}];return a.set(t,n),n}let f=[t];return a.set(t,f),f}function r(e,n,o,a=!1){let{api:l,decode:i}=n;if(!a&&t)return t(e,i,o);if("object"==typeof e){if(null==e)return e;if(Array.isArray(e))return e.map(e=>r(e,n,o));if("_@r"in e)return new RegExp(...e["_@r"]);if("_@u"in e)return new URL(e["_@u"]);if("_@d"in e)return new Date(e["_@d"]);if("_@m"in e)return new Map(e["_@m"].map(([e,t])=>[r(e,n,o),r(t,n,o)]));if("_@s"in e)return new Set(e["_@s"].map(e=>r(e,n,o)));if("_@f"in e){let t=e["_@f"],n=l.functions?.get(t);if(o&&u(n))for(let e of o)e.add(n);return n}if(!c(e))return e;let t={};for(let a of Object.keys(e))"_@i"===a?t[Symbol.asyncIterator]=()=>t:t[a]=r(e[a],n,o);return t}return e}}()}={}){let h=!1,v=new Map,w=new Map,b=new Map,g=new Map;if(t)for(let e of Object.keys(t)){let n=t[e];"function"==typeof n&&v.set(e,n)}let x=new Map,S=function(e,t){let n;if(null==t){if("function"!=typeof Proxy)throw Error("You must pass an array of callable methods in environments without Proxies.");let t=new Map;n=new Proxy({},{get(n,r){if(t.has(r))return t.get(r);let o=e(r);return t.set(r,o),o}})}else for(let r of(n={},t))Object.defineProperty(n,r,{value:e(r),writable:!1,configurable:!0,enumerable:!0});return n}(function(e){return(...t)=>{try{if(h)throw new f;if("string"!=typeof e&&"number"!=typeof e)throw Error(`Canâ€™t call a symbol method on a thread: ${e.toString()}`);if("hasCapability"===e){let e=t[0],n=p(),r=N(n);return k(7,[n,e]),r}let n=p(),r=N(n),[o,a]=y.encode(t,E);return k(0,[n,e,o],a),r}catch(e){return Promise.reject(e)}}},n),E={functions:{add(e){let t=w.get(e);return null==t&&(t=p(),w.set(e,t),b.set(t,e)),t},get(e){let t=g.get(e);if(t)return t;let n=0,l=!1;return Object.defineProperties(t=(...t)=>{if(l)throw Error("You attempted to call a function that was already released.");if(!g.has(e))throw Error("You attempted to call a function that was already revoked.");let[n,r]=y.encode(t,E),o=p(),a=N(o);return k(5,[o,e,n],r),a},{[o]:{value:()=>{0==(n-=1)&&(l=!0,g.delete(e),k(3,[e]))},writable:!1},[r]:{value:()=>{n+=1},writable:!1},[a]:{value:new Set,writable:!1}}),g.set(e,t),t}}},j=()=>{if(!h){for(let e of x.keys())A(e,new f);h=!0,v.clear(),x.clear(),w.clear(),b.clear(),g.clear()}};return d?.addEventListener("abort",()=>{k(2,[]),j()},{once:!0}),e.listen(C,{signal:d}),S;function k(t,n,r){h||e.send([t,n],r)}async function C(e){let t=Array.isArray(e)&&"number"==typeof e[0]&&(null==e[1]||Array.isArray(e[1]));if(t)switch(e[0]){case 2:j();break;case 0:{let t=new s,[n,r,o]=e[1],a=v.get(r);try{if(null==a)throw Error(`No '${r}' method is exposed on this endpoint`);let e=await a(...y.decode(o,E,[t])),[l,i]=y.encode(e,E);k(1,[n,void 0,l],i)}catch(o){let{name:e,message:t,stack:r}=o;k(1,[n,{name:e,message:t,stack:r}])}finally{t.release()}break}case 1:case 6:A(...e[1]);break;case 3:{let[t]=e[1],n=b.get(t);n&&(b.delete(t),w.delete(n));break}case 5:{let[t,n,r]=e[1],o=new s;try{let e=b.get(n);if(null==e)throw Error("You attempted to call a function that was already released.");let l=await e(...y.decode(r,E,u(e)?[...e[a],o]:[o])),[i,s]=y.encode(l,E);k(6,[t,void 0,i],s)}catch(o){let{name:e,message:n,stack:r}=o;k(6,[t,{name:e,message:n,stack:r}])}finally{o.release()}break}case 7:{let[t,n]=e[1],r=v.has(n);k(1,[t,void 0,y.encode(r,E)[0]])}}}function N(e){let t=new Promise((t,n)=>{x.set(e,(e,r,o)=>{if(null==r)t(y.decode(o,E));else{let e=Error();Object.assign(e,r),n(e)}})});return Object.defineProperty(t,Symbol.asyncIterator,{async *value(){let e=await t;Object.defineProperty(e,Symbol.asyncIterator,{value:()=>e}),yield*e}}),t}function A(...e){let t=e[0],n=x.get(t);n&&(n(...e),x.delete(t))}}class f extends Error{constructor(){super("You attempted to call a function on a terminated thread.")}}function m(){return`${p()}-${p()}-${p()}-${p()}`}function p(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}var y=n(18400);let h="quilt.threads.ping",v="quilt.threads.pong";function w(e,{targetOrigin:t="*",...n}={}){let r=!1,o=function(n,r){e.contentWindow?.postMessage(n,t,r)},a=new Promise(t=>{let a=n.signal?new y.z(n.signal):new AbortController;window.addEventListener("message",n=>{n.source===e.contentWindow&&n.data===v&&(r=!0,a.abort(),t())},{signal:a.signal}),a.signal.addEventListener("abort",()=>{t()},{once:!0}),o(h)});return d({send:(e,t)=>r?o(e,t):a.then(()=>{if(r)return o(e,t)}),listen(t,{signal:n}){self.addEventListener("message",n=>{n.source===e.contentWindow&&n.data!==v&&t(n.data)},{signal:n})}},n)}function b({targetOrigin:e="*",...t}={}){if("undefined"==typeof self||null==self.parent)throw Error("You are not inside an iframe, because there is no parent window.");let{parent:n}=self,r=t.signal?new y.z(t.signal):new AbortController,o=()=>{let r=()=>n.postMessage(v,e);self.addEventListener("message",({data:e})=>{e===h&&r()},{signal:t.signal}),r()};return"complete"===document.readyState?o():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(o(),r.abort())},{signal:r.signal}),d({send:(t,r)=>n.postMessage(t,e,r),listen(e,{signal:t}){self.addEventListener("message",t=>{t.data!==h&&e(t.data)},{signal:t})}},t)}}},function(e){e.O(0,[8415,3078,753,7430,55,7812,340,2546,1283,3449,2578,8511,4421,7070,1454,1002,6805,4546,9275,4405,2991,1949,440,5738,9427,2763,7288,1565,4656,8103,3236,3375,5289,1744],function(){return e(e.s=14454)}),_N_E=e.O()}]);
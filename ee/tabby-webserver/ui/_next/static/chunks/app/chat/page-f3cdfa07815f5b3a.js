(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{14454:function(e,t,n){Promise.resolve().then(n.bind(n,7931))},7931:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var s=n(36164),l=n(3546),r=n(42891),a=n.n(r),o=n(11978),i=n(23342),c=n(94755),u=n(47190),d=n.n(u),m=n(42450),p=n(36982),f=n(93668),h=n(11075),y=n(14439),v=n(57288),x=n(31458),w=n(81565),g=n(50445),j=n(73033);n(2596);var b=n(66794);let E=e=>d()(e).hsl().toString().replace(/hsla?\(/,"").replace(")","").split(",").slice(0,3).map((e,t)=>0===t?parseFloat(e).toFixed(1):e).join("");function k(){let[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(null),[u,d]=(0,l.useState)(""),[k,S]=(0,l.useState)([]),[N,C]=(0,l.useState)([]),[K,R]=(0,l.useState)(null),[L,I]=(0,l.useState)(null),[A,W]=(0,l.useState)(!1),O=(0,l.useRef)(null),[T,Z]=(0,l.useState)(!1),{width:_}=(0,c.iP)(),F=(0,l.useRef)(_),V=(0,l.useRef)(null),M=(0,o.useSearchParams)(),P=M.get("client"),G=!!P||void 0,Y=(0,l.useRef)(),[z,B]=(0,l.useState)(!1),[H,J]=(0,l.useState)(!1),[q,Q]=(0,l.useState)(!1),U=e=>{if(O.current)O.current.sendUserChat(e);else{let t=[...k];t.push(e),S(t)}},X=e=>{if(O.current)O.current.addRelevantContext(e);else{let t=[...N];t.push(e),C(t)}},D=(0,y.H)({init:e=>{O.current||(P&&(0,b.zr)(e.fetcherOptions),d((0,v.x0)()),t(!0),r(e.fetcherOptions),Y.current=e.useMacOSKeyboardEventHandler)},sendMessage:e=>U(e),showError:e=>{I(e)},cleanError:()=>{I(null)},addRelevantContext:e=>X(e),updateTheme:(e,t)=>{let n=e.split(";").filter(e=>e).map(e=>{let[t,n]=e.split(":"),s=n.trim(),l=s.startsWith("#")||s.startsWith("rgb");if(!l)return"".concat(t,": ").concat(n);let r=E(s);return"".concat(t,": ").concat(r)}).join(";");document.documentElement.style.cssText=n,document.documentElement.className=t+" client client-".concat(P)},updateActiveSelection:e=>{O.current?O.current.updateActiveSelection(e):e&&R(e)}});(0,l.useEffect)(()=>{let e=()=>{setTimeout(()=>{var e;null===(e=V.current)||void 0===e||e.focus()},0)};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),(0,l.useEffect)(()=>{let e=(e,t)=>{null==D||D.onKeyboardEvent(e,{code:t.code,isComposing:t.isComposing,key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,location:t.location,repeat:t.repeat,keyCode:t.keyCode})},t=t=>{Y.current?t.metaKey&&"KeyC"===t.code?document.execCommand("copy"):t.metaKey&&"KeyX"===t.code?document.execCommand("cut"):t.metaKey&&"KeyV"===t.code?document.execCommand("paste"):t.metaKey&&"KeyA"===t.code?document.execCommand("selectAll"):e("keydown",t):e("keydown",t)},n=t=>{e("keyup",t)},s=t=>{e("keypress",t)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("keypress",s),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("keypress",s)}},[D,P]),(0,l.useEffect)(()=>{if(D){null==D||D.onLoaded({apiVersion:h.uL});let e=async()=>{null==D||D.hasCapability("onApplyInEditorV2").then(B),null==D||D.hasCapability("lookupSymbol").then(J),null==D||D.hasCapability("readWorkspaceGitRepositories").then(Q)};e()}},[D]),(0,l.useLayoutEffect)(()=>{if(T){if(_&&e&&n&&!L&&!F.current){var t;null===(t=O.current)||void 0===t||t.focus()}F.current=_}},[_,T]);let $=()=>{C([]),S([]),R(null)},ee=async()=>{W(!0),await (null==D?void 0:D.refresh()),W(!1)};function et(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"h-screen w-screen",style:{padding:"intellij"==P?"20px":"5px 18px"},children:[(0,s.jsxs)("div",{className:"flex items-center",style:{marginBottom:"0.55em"},children:[(0,s.jsx)(a(),{src:i.Z,alt:"logo",className:"rounded-full",style:{background:"rgb(232, 226, 210)",marginRight:"0.375em",padding:"0.15em"},width:18}),(0,s.jsx)("p",{className:"font-semibold",children:"Tabby"})]}),t]})}return L?(0,s.jsx)(et,{children:(0,s.jsxs)(s.Fragment,{children:[L.title&&(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:L.title}),(0,s.jsx)(j.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[p.Z,f.Z],children:L.content}),(0,s.jsxs)(x.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:ee,children:[A&&(0,s.jsx)(w.IconSpinner,{}),"Refresh"]})]})}):e&&n?(0,s.jsx)(m.SV,{FallbackComponent:function(e){let{error:t}=e;return(0,s.jsxs)(et,{children:[(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:"Something went wrong"}),(0,s.jsx)("p",{children:t.message}),(0,s.jsxs)(x.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:ee,children:[A&&(0,s.jsx)(w.IconSpinner,{}),"Refresh"]})]})},children:(0,s.jsx)(g.e,{chatId:u,ref:O,chatInputRef:V,onNavigateToContext:(e,t)=>{null==D||D.navigate(e,t)},onLoaded:()=>{var e;N.forEach(X),k.forEach(U),null===(e=O.current)||void 0===e||e.updateActiveSelection(K),$(),Z(!0)},maxWidth:"vscode"===P?"5xl":void 0,onCopyContent:G&&(null==D?void 0:D.onCopy),onSubmitMessage:G&&(null==D?void 0:D.onSubmitMessage),onApplyInEditor:G&&(z?null==D?void 0:D.onApplyInEditorV2:null==D?void 0:D.onApplyInEditor),supportsOnApplyInEditorV2:z,onLookupSymbol:G&&(H?null==D?void 0:D.lookupSymbol:void 0),openInEditor:G&&(null==D?void 0:D.openInEditor),readWorkspaceGitRepositories:G&&q?null==D?void 0:D.readWorkspaceGitRepositories:void 0},u)}):(0,s.jsx)(et,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"opacity-80",children:"Welcome to Tabby Chat! Just a moment while we get things ready..."}),(0,s.jsx)(w.IconSpinner,{className:"mx-auto",style:{marginTop:"1.25em",width:"0.875em",height:"0.875em"}})]})})}},6230:function(e,t,n){"use strict";var s=n(36164),l=n(3546),r=n(24449),a=n(90379);t.Z=e=>{let{loading:t,fallback:n,delay:o,children:i}=e,[c,u]=l.useState(!t),[d]=(0,r.n)(c,null!=o?o:200);return(l.useEffect(()=>{t||c||u(!0)},[t]),d)?i:n||(0,s.jsx)(a.cg,{})}},52569:function(e,t,n){"use strict";n.d(t,{SQ:function(){return j},Yt:function(){return g},nY:function(){return w}});var s=n(36164),l=n(3546),r=n(87782),a=n(21454),o=n(36327),i=n(98454),c=n(3765),u=n(57288),d=n(66612);let m=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(d.fC,{ref:t,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...l})});m.displayName=d.fC.displayName;let p=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(d.Ee,{ref:t,className:(0,u.cn)("aspect-square h-full w-full",n),...l})});p.displayName=d.Ee.displayName;let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(d.NY,{ref:t,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...l})});f.displayName=d.NY.displayName;var h=n(3448),y=n(30410).lW;let v="not_found",x=new Set,w=e=>{x.delete(e),(0,a.JG)("/avatar/".concat(e))};function g(e){var t;let{user:n,className:a,fallback:i}=e,d=null==n?void 0:n.id,w=d?"/avatar/".concat(d):null,{data:g,isLoading:j,error:b}=(0,o.Z)(w,e=>{if(!(!d||x.has(d)))return(0,c.Z)(e,{responseFormatter:async e=>{let t=await e.blob(),n=y.from(await t.arrayBuffer());return"data:image/png;base64,".concat(n.toString("base64"))},errorHandler:e=>{if(404===e.status)throw Error(v)}})}),E=l.useMemo(()=>{if(null==n?void 0:n.email)return(0,r.B)(n.email)},[null==n?void 0:n.email]);return j?(0,s.jsx)(h.O,{className:(0,u.cn)("h-16 w-16 rounded-full",a)}):((null==b?void 0:b.message)===v&&d&&x.add(d),g||E||!i)?!g&&E?(0,s.jsx)(r.Z,{className:(0,u.cn)("h-16 w-16",a),...E}):(0,s.jsxs)(m,{className:(0,u.cn)("h-16 w-16",a),children:[(0,s.jsx)(p,{src:g,alt:null==n?void 0:n.email,className:"object-cover"}),(0,s.jsx)(f,{children:null==n?void 0:null===(t=n.email)||void 0===t?void 0:t.substring(0,2)})]}):i}function j(e){let[{data:t}]=(0,i.P)();return(0,s.jsx)(g,{user:null==t?void 0:t.me,...e})}},2596:function(){}},function(e){e.O(0,[8415,3078,753,7430,55,7812,9643,4752,3449,2578,8511,4421,1454,7070,5669,4546,6805,9275,4405,5083,1522,1266,440,9427,2763,7288,1565,4656,445,9002,3375,5289,1744],function(){return e(e.s=14454)}),_N_E=e.O()}]);
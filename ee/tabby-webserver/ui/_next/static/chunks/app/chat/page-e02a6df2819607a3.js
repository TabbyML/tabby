(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929,3396],{78627:function(e,n,t){Promise.resolve().then(t.bind(t,81722))},81722:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eA}});var s=t(36164),r=t(3546),a=t(42891),i=t.n(a),l=t(11978),o=t(23342),c=t(94755),d=t(47190),u=t.n(d),f=t(42450),m=t(36982),v=t(93668),p=t(18452),x=t(74248),h=t(31458),g=t(81565),b=t(1853),y=t(78613),j=t(24449),k=t(16784),w=t(64566),C=t(63484),S=t(90379),N=t(63795),A=t(72657),E=t(45391),I=t(34021),R=t(21454),L=t(3765),$=t(84942),D=t(29),T=t(24685),M=t(74630),P=t(16234),F=t(23455),B=t(82394);let O=r.createContext({}),q=$.xp,z=r.forwardRef((e,n)=>(0,s.jsx)($.tW,{...e,ref:n}));z.displayName="SearchableSelectAnchor";let U=r.forwardRef((e,n)=>{let{getInputProps:t}=r.useContext(O),{onKeyDown:a,onChange:i,onInput:l,onBlur:o,onClick:c,...d}=e;return(0,s.jsx)(F.Z,{...t((0,P.Z)({onKeyDown:a,onChange:i,onInput:l,onBlur:o,onClick:c,ref:n},M.Z)),...d})});U.displayName="SearchableSelectTextarea";let _=r.forwardRef((e,n)=>{let{getInputProps:t}=r.useContext(O),{onKeyDown:a,onChange:i,onInput:l,onBlur:o,onClick:c,...d}=e;return(0,s.jsx)(B.I,{...t((0,P.Z)({onKeyDown:a,onChange:i,onInput:l,onBlur:o,onClick:c,ref:n},M.Z)),...d})});_.displayName="SearchableSelectInput";let Z=r.forwardRef((e,n)=>{let{children:t,style:a,popupMatchAnchorWidth:i,...l}=e,{getMenuProps:o,anchorRef:c}=r.useContext(O),d=r.useRef(void 0);return r.useLayoutEffect(()=>{if(i){let e=c.current;if(e){let n=e.getBoundingClientRect();d.current=n.width}}},[]),(0,s.jsx)($.i9,{children:(0,s.jsx)($.yk,{align:"start",onOpenAutoFocus:e=>e.preventDefault(),style:{width:d.current,...a},...o({ref:n},{suppressRefError:!0}),...l,children:t})})});Z.displayName="SearchableSelectContent";let G=r.forwardRef((e,n)=>{let{item:t,index:a,className:i,children:l,disabled:o,...c}=e,{highlightedIndex:d,selectedItem:u,getItemProps:f}=r.useContext(O),m=d===a,v=u===t;return(0,s.jsx)(q,{asChild:!0,children:(0,s.jsx)("div",{className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",m&&"bg-accent text-accent-foreground",v&&"font-bold",o&&"pointer-events-none opacity-50",i),...f({item:t,index:a,onMouseLeave:e=>e.preventDefault(),onMouseOut:e=>e.preventDefault()}),...c,children:"function"==typeof l?l({highlighted:m,selected:v}):l})},t.id)});function H(e){let{options:n,onSelect:t,children:a,open:i,onOpenChange:l,stayOpenOnInputClick:o}=e,c=r.useRef(null),d=r.useCallback((e,n)=>{let{type:t,changes:s}=n;switch(t){case T.Kb.stateChangeTypes.MenuMouseLeave:return{...s,highlightedIndex:e.highlightedIndex};case T.Kb.stateChangeTypes.InputClick:let r=!!o||s.isOpen;return{...s,isOpen:r};default:return s}},[o]),u=(0,T.Kb)({items:null!=n?n:[],defaultIsOpen:i,onSelectedItemChange(e){let{selectedItem:n}=e;n&&(null==t||t(n),null==l||l(!1))},onIsOpenChange:e=>{let{isOpen:n}=e;null==l||l(!!n)},stateReducer:d}),{setHighlightedIndex:f,highlightedIndex:m}=u,v=(0,M.Z)(i)?u.isOpen:u.isOpen&&i;r.useEffect(()=>{v&&(null==n?void 0:n.length)&&-1===m&&f(0)},[v,n]);let p=r.useMemo(()=>({...u,open:v,anchorRef:c}),[u,v,c]);return(0,s.jsx)(O.Provider,{value:p,children:(0,s.jsx)($.J2,{open:v,children:"function"==typeof a?a(p):a})})}G.displayName="SearchableSelectOption";let K=r.forwardRef(function(e,n){let{onSubmit:t,input:a,setInput:i,isLoading:l}=e,{formRef:o,onKeyDown:c}=function(){let e=(0,r.useRef)(null);return{formRef:e,onKeyDown:n=>{if("Enter"===n.key&&!n.shiftKey&&!n.nativeEvent.isComposing){var t;null===(t=e.current)||void 0===t||t.requestSubmit(),n.preventDefault()}}}}(),[d,u]=r.useState(null),[f,m]=r.useState(!1),v=r.useRef(null),p=r.useRef(),b=r.useRef(),[y,j]=r.useState([]),[k,w]=r.useState({}),{data:C}=(0,R.ZP)(d,L.Z,{revalidateOnFocus:!1,dedupingInterval:0,errorRetryCount:0});r.useEffect(()=>{var e;let n=null!==(e=null==C?void 0:C.hits)&&void 0!==e?e:[];j(n),m(!!(null==n?void 0:n.length))},[null==C?void 0:C.hits]),r.useImperativeHandle(n,()=>({focus:()=>{var e;null===(e=v.current)||void 0===e||e.focus()}})),r.useEffect(()=>{a&&v.current&&v.current!==document.activeElement&&v.current.focus()},[a]),r.useLayoutEffect(()=>{var e,n,t;(null===(e=b.current)||void 0===e?void 0:e.length)&&(null===(t=v.current)||void 0===t||null===(n=t.setSelectionRange)||void 0===n||n.call(t,b.current[0],b.current[1]),b.current=void 0)}),r.useMemo(()=>(0,E.Z)(e=>{var n,t,s,r;let a=null!==(s=null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==s?s:"",i=null!==(r=null===(t=e.target)||void 0===t?void 0:t.selectionEnd)&&void 0!==r?r:0,l=J(a,i),o=null==l?void 0:l[1];if(o){let e=encodeURIComponent("name:".concat(o," AND kind:function")),n="/v1beta/search?q=".concat(e);u(n)}else j([]),m(!1)},200),[]);let S=async e=>{if(e.preventDefault(),!(null==a?void 0:a.trim())||l)return;let n=a;Object.keys(k).forEach(e=>{var t,s,r;let a=k[e];(null==a?void 0:a.doc)&&(n=n.replaceAll(e,"\n```".concat(null!==(s=null===(t=a.doc)||void 0===t?void 0:t.language)&&void 0!==s?s:"","\n").concat(null!==(r=a.doc.body)&&void 0!==r?r:"","\n","```","\n")))}),i(""),await t(n)},N=(e,n)=>{"Enter"===e.key&&n?e.preventDefault():n&&["ArrowRight","ArrowLeft","Home","End"].includes(e.key)?(j([]),m(!1)):(n||(e.preventDownshiftDefault=!0),c(e))};return(0,s.jsx)("form",{onSubmit:S,ref:o,children:(0,s.jsx)(H,{options:y,onSelect:e=>{var n,t,s;let r=null!==(n=p.current)&&void 0!==n?n:0,l=J(a,r);if(l){w({...k,["@".concat(null===(t=e.doc)||void 0===t?void 0:t.name)]:e});let n="@".concat(null==e?void 0:null===(s=e.doc)||void 0===s?void 0:s.name," "),o=a.substring(0,r).replace(new RegExp(l[0]),""),c=o.length+n.length;b.current=[c,c],i(o+n+a.slice(r))}j([]),m(!1)},open:f,onOpenChange:e=>{e&&(null==y?void 0:y.length)?m(e):(m(!1),j([]))},children:e=>{var n,t,r,o;let{open:c,highlightedIndex:d}=e,u=null==y?void 0:y[d];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{children:(0,s.jsxs)("div",{className:"relative flex max-h-60 w-full grow flex-col overflow-hidden bg-background px-8 sm:rounded-md sm:border sm:px-12",children:[(0,s.jsx)("span",{className:(0,x.cn)((0,h.d)({size:"sm",variant:"ghost"}),"absolute left-0 top-4 h-8 w-8 rounded-full bg-background p-0 hover:bg-background sm:left-4"),children:(0,s.jsx)(g.IconEdit,{})}),(0,s.jsx)(U,{tabIndex:0,rows:1,placeholder:"Ask a question.",spellCheck:!1,className:"min-h-[60px] w-full resize-none bg-transparent px-4 py-[1.3rem] focus-within:outline-none",value:a,ref:v,onChange:e=>{(0,I.Z)(e,"target.value")?(p.current=e.target.selectionEnd,i(e.target.value)):p.current=void 0},onKeyDown:e=>N(e,c)}),(0,s.jsx)("div",{className:"absolute right-0 top-4 sm:right-4",children:(0,s.jsxs)(D.u,{children:[(0,s.jsx)(D.aJ,{asChild:!0,children:(0,s.jsxs)(h.z,{type:"submit",size:"icon",disabled:l||""===a,children:[(0,s.jsx)(g.IconArrowElbow,{}),(0,s.jsx)("span",{className:"sr-only",children:"Send message"})]})}),(0,s.jsx)(D._v,{children:"Send message"})]})})]})}),(0,s.jsx)(Z,{align:"start",side:"top",onOpenAutoFocus:e=>e.preventDefault(),className:"w-[60vw] md:w-[430px]",children:(0,s.jsxs)($.J2,{open:c&&!!u,children:[(0,s.jsx)($.tW,{asChild:!0,children:(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-scroll",children:c&&!!(null==y?void 0:y.length)&&y.map((e,n)=>{var t,r,a;return(0,s.jsx)(G,{item:e,index:n,children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-8 overflow-x-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(W,{kind:null==e?void 0:null===(t=e.doc)||void 0===t?void 0:t.kind}),(0,s.jsxs)("div",{className:"max-w-[200px] truncate",children:[null==e?void 0:null===(r=e.doc)||void 0===r?void 0:r.name,"(...)"]})]}),(0,s.jsx)("div",{className:"flex-1 truncate text-right text-sm text-muted-foreground",children:null==e?void 0:null===(a=e.doc)||void 0===a?void 0:a.body})]})},null==e?void 0:e.id)})})}),(0,s.jsx)($.yk,{asChild:!0,align:"start",side:"right",alignOffset:-4,onOpenAutoFocus:e=>e.preventDefault(),onKeyDownCapture:e=>e.preventDefault(),className:"rounded-none",collisionPadding:{bottom:120},children:(0,s.jsxs)("div",{className:"flex max-h-[70vh] w-[20vw] flex-col overflow-y-auto px-2 md:w-[240px] lg:w-[340px]",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(null==u?void 0:null===(n=u.doc)||void 0===n?void 0:n.kind)?"(".concat(null==u?void 0:null===(t=u.doc)||void 0===t?void 0:t.kind,") "):"",null==u?void 0:null===(r=u.doc)||void 0===r?void 0:r.name]}),(0,s.jsx)("div",{className:"flex-1 whitespace-pre-wrap break-all text-muted-foreground",children:null==u?void 0:null===(o=u.doc)||void 0===o?void 0:o.body})]})})]})})]})}})})});function J(e,n){let t=e.substring(0,n),s=/@(\w+)$/.exec(t);return s}function W(e){let{kind:n,...t}=e;return(0,s.jsx)(g.IconSymbolFunction,{...t})}function Q(e){let{href:n,children:t}=e;return(0,s.jsxs)("a",{href:n,target:"_blank",className:"inline-flex flex-1 justify-center gap-1 leading-4 hover:underline",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)("svg",{"aria-hidden":"true",height:"7",viewBox:"0 0 6 6",width:"7",className:"opacity-70",children:(0,s.jsx)("path",{d:"M1.25215 5.54731L0.622742 4.9179L3.78169 1.75597H1.3834L1.38936 0.890915H5.27615V4.78069H4.40513L4.41109 2.38538L1.25215 5.54731Z",fill:"currentColor"})})]})}function X(e){let{className:n,...t}=e;return(0,s.jsxs)("p",{className:(0,x.cn)("px-2 text-center text-xs leading-normal text-muted-foreground",n),...t,children:[(0,s.jsx)(Q,{href:"https://tabby.tabbyml.com",children:"Tabby"}),", an opensource, self-hosted AI coding assistant ."]})}let V=r.forwardRef(function(e,n){let{stop:t,reload:a,input:i,setInput:l,className:o,onSubmit:c,chatMaxWidthClass:d}=e,u=r.useRef(null),{container:f,onClearMessages:m,qaPairs:v,isLoading:p,relevantContext:x,removeRelevantContext:b}=r.useContext(ej);return r.useImperativeHandle(n,()=>({focus:()=>{var e;null===(e=u.current)||void 0===e||e.focus()}}),[]),(0,s.jsxs)("div",{className:o,children:[(0,s.jsx)(A.K,{container:f}),(0,s.jsxs)("div",{className:"mx-auto md:px-4 ".concat(d),children:[(0,s.jsxs)("div",{className:"flex h-10 items-center justify-center gap-2",children:[p?(0,s.jsxs)(h.z,{variant:"outline",onClick:()=>t(),className:"bg-background",children:[(0,s.jsx)(g.IconStop,{className:"mr-2"}),"Stop generating"]}):(null==v?void 0:v.length)>0&&(0,s.jsxs)(h.z,{variant:"outline",onClick:()=>a(),className:"bg-background",children:[(0,s.jsx)(g.IconRefresh,{className:"mr-2"}),"Regenerate response"]}),(null==v?void 0:v.length)>0&&(0,s.jsxs)(h.z,{variant:"outline",onClick:m,className:"bg-background lg:hidden",children:[(0,s.jsx)(g.IconTrash,{className:"mr-2"}),"Clear"]})]}),(0,s.jsxs)("div",{className:"border-t bg-background px-4 py-2 shadow-lg sm:space-y-4 sm:rounded-t-xl sm:border md:py-4",children:[x.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map((e,n)=>{let[t]=e.filepath.split("/").slice(-1),r=e.range.start===e.range.end?"".concat(e.range.start):"".concat(e.range.start,"-").concat(e.range.end);return(0,s.jsxs)(N.C,{variant:"outline",className:"inline-flex items-center gap-0.5 rounded text-sm font-semibold",children:[(0,s.jsx)("span",{className:"text-foreground",children:"".concat(t,": ").concat(r)}),(0,s.jsx)(g.IconRemove,{className:"cursor-pointer text-muted-foreground transition-all hover:text-red-300",onClick:b.bind(null,n)})]},e.filepath+n)})}),(0,s.jsx)(K,{ref:u,onSubmit:c,input:i,setInput:l,isLoading:p}),(0,s.jsx)(X,{className:"hidden sm:block"})]})]})]})});var Y=t(76297),ee=t(12624);function en(e){let{trackVisibility:n}=e,{container:t}=r.useContext(ej),a=(0,ee.e)(100,t),{ref:i,entry:l,inView:o}=(0,Y.YD)({trackVisibility:n,delay:100,rootMargin:"0px 0px -150px 0px",root:t});return r.useEffect(()=>{a&&n&&!o&&(null==l||l.target.scrollIntoView({block:"start"}))},[o,l,a,n]),(0,s.jsx)("div",{ref:i,className:"h-px w-full"})}let et=[{heading:"Convert list of string to numbers",message:"How to convert a list of string to numbers in python"},{heading:"How to parse email address",message:"How to parse email address with regex"}];function es(e){let{setInput:n,chatMaxWidthClass:t,welcomeMessage:r}=e;return(0,s.jsx)("div",{className:"mx-auto px-4 ".concat(t),children:(0,s.jsxs)("div",{className:"rounded-lg border bg-background p-8",children:[(0,s.jsx)("h1",{className:"mb-2 text-lg font-semibold",children:r||"Welcome"}),(0,s.jsx)("p",{className:"leading-normal text-muted-foreground",children:"You can start a conversation here or try the following examples:"}),(0,s.jsx)("div",{className:"mt-4 flex flex-col items-start space-y-2",children:et.map((e,t)=>(0,s.jsxs)(h.z,{variant:"link",className:"h-auto p-0 text-base",onClick:()=>n(e.message),children:[(0,s.jsx)(g.IconArrowRight,{className:"mr-2 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-left",children:e.heading})]},t))})]})})}var er=t(94909),ea=t(98454),ei=t(48537),el=t(27934),eo=t(11208),ec=t(3448),ed=t(52569),eu=t(90168);function ef(e){let{messages:n,chatMaxWidthClass:t}=e,{isLoading:a}=r.useContext(ej);return(0,s.jsx)("div",{className:"relative mx-auto px-4 ".concat(t),children:null==n?void 0:n.map((e,t)=>{let i=t===n.length-1;return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(em,{isLoading:!!i&&a,message:e,isLastItem:i}),!i&&(0,s.jsx)(eo.Z,{className:"my-4 md:my-8"})]},e.user.id)})})}function em(e){let{message:n,isLoading:t,isLastItem:r}=e,{user:a,assistant:i}=n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ev,{message:a}),!!i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo.Z,{className:"my-4 md:my-8"}),(0,s.jsx)(ex,{message:i,userMessage:a,isLoading:t,userMessageId:a.id,enableRegenerating:r})]})]})}function ev(e){var n,t,a,i;let{message:l}=e,[{data:o}]=(0,ea.P)(),c=l.selectContext,{onNavigateToContext:d,client:u}=r.useContext(ej),f=r.useMemo(()=>{var e,n;if(!(null==c?void 0:c.content))return"";let t=(null==c?void 0:c.filepath)&&null!==(e=(0,C.U$)(null==c?void 0:c.filepath)[0])&&void 0!==e?e:"";return"\n```".concat(t,"\n").concat(null!==(n=null==c?void 0:c.content)&&void 0!==n?n:"","\n","```","\n")},[c]),m=null;if(f&&l.selectContext){let{range:e,filepath:n}=l.selectContext;m={filepath:n,isMultiLine:!(0,M.Z)(null==e?void 0:e.start)&&!(0,M.Z)(null==e?void 0:e.end)&&e.start<e.end}}return(0,s.jsxs)("div",{className:(0,x.cn)("group relative mb-4 flex flex-col items-start gap-y-2 md:-ml-4 md:flex-row"),...e,children:[(0,s.jsxs)("div",{className:(0,x.cn)("flex w-full items-center justify-between md:w-auto",{"hidden md:flex":!(null==o?void 0:o.me.name)}),children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("div",{className:"shrink-0 select-none rounded-full border bg-background shadow",children:(0,s.jsx)(ed.Y,{className:"h-6 w-6 md:h-8 md:w-8",fallback:(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center md:h-8 md:w-8",children:(0,s.jsx)(g.IconUser,{className:"h-6 w-6"})})})}),(0,s.jsx)("p",{className:"block text-xs font-bold md:hidden",children:null==o?void 0:o.me.name})]}),(0,s.jsx)("div",{className:"block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,s.jsx)(ep,{...e})})]}),(0,s.jsxs)("div",{className:"group relative flex w-full justify-between gap-x-2",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2 overflow-hidden px-1 md:ml-4",children:[(0,s.jsx)(el.JG,{message:l.message}),(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(ep,{...e})}),m&&l.selectContext&&(0,s.jsxs)("div",{className:"flex cursor-pointer items-center gap-1 overflow-x-auto text-xs text-muted-foreground hover:underline",onClick:()=>null==d?void 0:d(l.selectContext,{openInEditor:"vscode"===u}),children:[(0,s.jsx)(g.IconFile,{className:"h-3 w-3"}),(0,s.jsxs)("p",{className:"flex-1 truncate pr-1",children:[(0,s.jsx)("span",{children:m.filepath}),(null===(t=l.selectContext)||void 0===t?void 0:null===(n=t.range)||void 0===n?void 0:n.start)&&(0,s.jsxs)("span",{children:[":",null===(a=l.selectContext)||void 0===a?void 0:a.range.start]}),m.isMultiLine&&(0,s.jsxs)("span",{children:["-",null===(i=l.selectContext)||void 0===i?void 0:i.range.end]})]})]})]}),!(null==o?void 0:o.me.name)&&(0,s.jsx)("div",{className:"editor-bg absolute right-0 top-0 -mt-0.5 block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,s.jsx)(ep,{...e})})]})]})}function ep(e){let{message:n}=e,{handleMessageAction:t,isLoading:a}=r.useContext(ej);return(0,s.jsx)(ey,{children:!a&&(0,s.jsxs)(h.z,{variant:"ghost",size:"icon",onClick:e=>null==t?void 0:t(n.id,"delete"),children:[(0,s.jsx)(g.IconTrash,{}),(0,s.jsx)("span",{className:"sr-only",children:"Delete message"})]})})}function ex(e){let{message:n,userMessage:t,isLoading:a,userMessageId:i,enableRegenerating:l,...o}=e,{onNavigateToContext:c,client:d,onApplyInEditor:u,onCopyContent:f}=r.useContext(ej),[m,v]=r.useState(void 0),p=r.useMemo(()=>{var e,t;return null!==(t=null==n?void 0:null===(e=n.relevant_code)||void 0===e?void 0:e.map(e=>{let{startLine:n,endLine:t}=(0,x.OV)(e);return{kind:"file",range:{start:n,end:t},filepath:e.filepath,content:e.content,git_url:e.gitUrl}}))&&void 0!==t?t:[]},[null==n?void 0:n.relevant_code]),h=r.useMemo(()=>{var e;return(0,b.Z)([t.activeContext,...null!==(e=null==t?void 0:t.relevantContext)&&void 0!==e?e:[]])},[t.activeContext,t.relevantContext]),g=(0,r.useMemo)(()=>{var e,n,t,s;let r=null!==(n=null==h?void 0:h.map(n=>({content:n.content,filepath:n.filepath,gitUrl:n.git_url,startLine:n.range.start,language:(0,C.U$)(null!==(e=n.filepath)&&void 0!==e?e:"")[0],isClient:!0})))&&void 0!==n?n:[],a=null!==(s=null==p?void 0:p.map(e=>({content:e.content,filepath:e.filepath,gitUrl:e.git_url,startLine:e.range.start,language:(0,C.U$)(null!==(t=e.filepath)&&void 0!==t?t:"")[0],isClient:!1})))&&void 0!==s?s:[];return(0,b.Z)([...r,...a])},[h,p]);return(0,s.jsxs)("div",{className:(0,x.cn)("group relative mb-4 flex flex-col items-start gap-y-2 md:-ml-4 md:flex-row"),...o,children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between md:w-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("div",{className:"shrink-0 select-none rounded-full border bg-background shadow",children:(0,s.jsx)(eb,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,s.jsx)("p",{className:"block text-xs font-bold md:hidden",children:"Tabby"})]}),(0,s.jsx)("div",{className:"block opacity-0 transition-opacity group-hover:opacity-100 md:hidden",children:(0,s.jsx)(eh,{message:n,userMessageId:i,enableRegenerating:l,attachmentCode:g})})]}),(0,s.jsxs)("div",{className:"w-full flex-1 space-y-2 overflow-hidden px-1 md:ml-4",children:[(0,s.jsx)(eu.q,{contexts:p,userContexts:h,onContextClick:(e,n)=>{null==c||c(e,{openInEditor:"vscode"===d&&n})},isExternalLink:!!d,highlightIndex:m}),!a||(null==n?void 0:n.message)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el.JG,{message:n.message,onApplyInEditor:u,onCopyContent:f,attachmentCode:g,onCodeCitationClick:e=>{let{startLine:n,endLine:t}=(0,x.OV)(e),s={git_url:e.gitUrl,content:e.content,filepath:e.filepath,kind:"file",range:{start:n,end:t}};null==c||c(s,{openInEditor:"vscode"===d&&e.isClient})},onCodeCitationMouseEnter:e=>{v(e-1-0)},onCodeCitationMouseLeave:e=>{v(void 0)}}),!!n.error&&(0,s.jsx)(el.mE,{error:n.error})]}):(0,s.jsx)(eg,{}),(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(eh,{message:n,userMessageId:i,enableRegenerating:l,attachmentCode:g})})]})]})}function eh(e){let{handleMessageAction:n,isLoading:t,onCopyContent:a}=r.useContext(ej),{message:i,userMessageId:l,enableRegenerating:o,attachmentCode:c}=e,d=(0,r.useMemo)(()=>(function(e,n){var t;if(!n||(0,er.Z)(n))return e;let s=e.replace(/\[\[?citation:\s*\d+\]?\]/g,e=>{let n=null==e?void 0:e.match(/\d+/);return"[".concat(n,"]")}).trim(),r=null!==(t=n.map((e,n)=>{let t=(0,x.tf)(e),s=(0,b.Z)([e.filepath,t]).join(":");return"[".concat(n+1,"] ").concat(s)}).join("\n"))&&void 0!==t?t:"";return"".concat(s,"\n\nCitations:\n").concat(r)})(i.message,c),[i.message,c]);return(0,s.jsxs)(ey,{children:[!t&&o&&(0,s.jsxs)(h.z,{variant:"ghost",size:"icon",onClick:e=>n(l,"regenerate"),children:[(0,s.jsx)(g.IconRefresh,{}),(0,s.jsx)("span",{className:"sr-only",children:"Regenerate message"})]}),(0,s.jsx)(ei.q,{value:d,onCopyContent:a})]})}function eg(){return(0,s.jsxs)("div",{className:"space-y-2 py-2 md:px-1 md:py-0",children:[(0,s.jsx)(ec.O,{className:"h-3 w-full"}),(0,s.jsx)(ec.O,{className:"h-3 w-full"})]})}function eb(e){let{className:n}=e;return(0,s.jsx)(i(),{style:{backgroundColor:"#E8E2D2"},className:(0,x.cn)("rounded-full p-0.5",n),src:o.Z,alt:"tabby"})}function ey(e){let{className:n,...t}=e;return(0,s.jsx)("div",{className:(0,x.cn)("flex items-center justify-end transition-opacity group-hover:opacity-100 md:absolute md:-right-[5rem] md:-top-2 md:opacity-0",n),...t})}let ej=r.createContext({}),ek=r.forwardRef(function(e,n){let{className:t,chatId:a,initialMessages:i,headers:l,isEphemeral:o,onLoaded:c,onThreadUpdates:d,onNavigateToContext:u,container:f,docQuery:m,generateRelevantQuestions:v,maxWidth:p,welcomeMessage:h,promptFormClassname:g,onCopyContent:N,client:A,onSubmitMessage:E,onApplyInEditor:I}=e,[R,L]=r.useState(!1),[$,D]=r.useState(),T=r.useRef(!1),[M,P]=r.useState(null!=i?i:[]),[F,B]=r.useState(""),[O,q]=r.useState([]),z=r.useRef(null),{sendUserMessage:U,isLoading:_,error:Z,answer:G,stop:H,regenerate:K,deleteThreadMessagePair:J}=(0,w.x)({threadId:$,headers:l,isEphemeral:o}),W=async e=>{var n;if(!$)return;H();let t=M.find(n=>n.user.id===e);if(!(null==t?void 0:t.user)||!t.assistant)return;let s=M.filter(n=>n.user.id!==e);P(s),J($,null==t?void 0:t.user.id,null==t?void 0:null===(n=t.assistant)||void 0===n?void 0:n.id)},Q=async e=>{if(!$)return;let n=(0,y.Z)(M,n=>n.user.id===e);if(n>-1){let e=M[n];if(!e.assistant)return;let t=(0,x.x0)(),s=(0,x.x0)();P([...M.slice(0,n),{user:{...e.user,id:t},assistant:{id:s,message:"",error:void 0}}]);let[r,a]=ee(e.user);return K({threadId:$,userMessageId:e.user.id,assistantMessageId:e.assistant.id,userMessage:r,threadRunOptions:a})}},X=async()=>{if(!(null==M?void 0:M.length))return;let e=M[M.length-1].user.id;return Q(e)};r.useEffect(()=>{if(!_||!(null==M?void 0:M.length)||!G)return;let e=M[M.length-1];(null==G?void 0:G.threadCreated)&&!$&&D(G.threadCreated),P(n=>{var t,s,r;let a=n[n.length-1].assistant,i={...a,id:(null==G?void 0:G.threadAssistantMessageCreated)||(null==a?void 0:a.id)||(0,x.x0)(),message:null!==(s=G.threadAssistantMessageContentDelta)&&void 0!==s?s:"",error:void 0,relevant_code:null!==(r=null==G?void 0:null===(t=G.threadAssistantMessageAttachmentsCode)||void 0===t?void 0:t.map(e=>e.code))&&void 0!==r?r:[]};return[...n.slice(0,n.length-1),{user:{...e.user,id:(null==G?void 0:G.threadUserMessageCreated)||e.user.id},assistant:i}]})},[G,_]);let Y=(0,j.S)(()=>{f?f.scrollTo({top:f.scrollHeight,behavior:"smooth"}):window.scrollTo({top:document.body.offsetHeight,behavior:"smooth"})},100);r.useLayoutEffect(()=>{_&&Y.run()},[_]),r.useEffect(()=>{Z&&(null==M?void 0:M.length)&&P(e=>{var n,t,s;let r=e[e.length-1];return[...e.slice(0,e.length-1),{...r,assistant:{...r.assistant,id:(null===(n=r.assistant)||void 0===n?void 0:n.id)||(0,x.x0)(),message:null!==(s=null===(t=r.assistant)||void 0===t?void 0:t.message)&&void 0!==s?s:"",error:(null==Z?void 0:Z.message)==="401"?"Unauthorized":"Fail to fetch"}}]})},[Z]);let ee=e=>{var n,t,s,r;let a=(null==e?void 0:e.selectContext)||(null==e?void 0:e.activeContext),i=a?{content:null!==(t=a.content)&&void 0!==t?t:"",filepath:a.filepath,language:a.filepath&&(0,C.U$)(a.filepath)[0]||"text",gitUrl:null!==(s=null==a?void 0:a.git_url)&&void 0!==s?s:""}:null,l=(0,b.Z)([(null==e?void 0:e.activeContext)?{content:null==e?void 0:e.activeContext.content,filepath:null==e?void 0:e.activeContext.filepath,startLine:e.activeContext.range.start}:void 0,...null!==(r=null==e?void 0:null===(n=e.relevantContext)||void 0===n?void 0:n.map(e=>({filepath:e.filepath,content:e.content,startLine:e.range.start})))&&void 0!==r?r:[]]),o=e.message;return[{content:o,attachments:{code:l}},{docQuery:m?{content:o}:null,generateRelevantQuestions:!!v,codeQuery:i}]},et=(0,k.d)(async e=>{var n,t,s,r,a;if(_)return;let i="",l=null==e?void 0:null===(n=e.selectContext)||void 0===n?void 0:n.content;if(l){let n=(null==e?void 0:null===(t=e.selectContext)||void 0===t?void 0:t.filepath)&&null!==(r=(0,C.U$)(null==e?void 0:null===(s=e.selectContext)||void 0===s?void 0:s.filepath)[0])&&void 0!==r?r:"";i="\n```".concat(n,"\n").concat(null!=l?l:"","\n","```","\n")}let o={...e,message:e.message+i,id:null!==(a=e.id)&&void 0!==a?a:(0,x.x0)()},c=[...M,{user:o,assistant:{id:(0,x.x0)(),message:"",error:void 0}}];return P(c),U(...ee(o))}),er=e=>{var n;return null===(n=et.current)||void 0===n?void 0:n.call(et,e)},ea=async e=>{E?E(e,O):er({message:e,relevantContext:O}),q([])},ei=(0,k.d)(e=>{q(O.concat([e]))}),el=e=>{var n;null===(n=ei.current)||void 0===n||n.call(ei,e)};r.useEffect(()=>{T.current&&(null==d||d(M))},[M]),r.useImperativeHandle(n,()=>({sendUserChat:er,stop:H,isLoading:_,addRelevantContext:el,focus:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.focus()}}),[]),r.useEffect(()=>{T.current||(T.current=!0,null==c||c(),L(!0))},[]);let eo=p?"max-w-".concat(p):"max-w-2xl";return R?(0,s.jsx)(ej.Provider,{value:{isLoading:_,qaPairs:M,onNavigateToContext:u,handleMessageAction:(e,n)=>{switch(n){case"delete":W(e);break;case"regenerate":Q(e)}},onClearMessages:()=>{H(!0),P([]),D(void 0)},container:f,onCopyContent:N,client:A,onApplyInEditor:I,relevantContext:O,removeRelevantContext:e=>{let n=[...O];n.splice(e,1),q(n)}},children:(0,s.jsx)("div",{className:"flex justify-center overflow-x-hidden",children:(0,s.jsxs)("div",{className:"w-full px-4 ".concat(eo),children:[(0,s.jsxs)("div",{className:(0,x.cn)("pb-[200px] pt-4 md:pt-10",t),children:[(null==M?void 0:M.length)?(0,s.jsx)(ef,{messages:M,chatMaxWidthClass:eo}):(0,s.jsx)(es,{setInput:B,chatMaxWidthClass:eo,welcomeMessage:h}),(0,s.jsx)(en,{trackVisibility:_})]}),(0,s.jsx)(V,{onSubmit:ea,className:(0,x.cn)("fixed inset-x-0 bottom-0",g),id:a,stop:()=>{H()},reload:X,input:F,setInput:B,chatMaxWidthClass:eo,ref:z})]})})}):(0,s.jsx)(S.cg,{className:"".concat(eo," mx-auto pt-4 md:pt-10")})});var ew=t(73033);t(2596);let eC=e=>u()(e).hsl().toString().replace(/hsla?\(/,"").replace(")","").split(",").slice(0,3).map((e,n)=>0===n?parseFloat(e).toFixed(1):e).join(""),eS=["vscode"],eN=["vscode"];function eA(){let[e,n]=(0,r.useState)(!1),[t,a]=(0,r.useState)(null),[d,u]=(0,r.useState)(""),[b,y]=(0,r.useState)([]),[j,k]=(0,r.useState)([]),[w,C]=(0,r.useState)(!1),[S,N]=(0,r.useState)(null),[A,E]=(0,r.useState)(!1),I=(0,r.useRef)(null),[R,L]=(0,r.useState)(!1),{width:$}=(0,c.iP)(),D=(0,r.useRef)($),T=(0,l.useSearchParams)(),M=T.get("client")||void 0,P=T.get("font-size")||void 0,F=T.get("foreground")?"#".concat(T.get("foreground")):void 0,B=T.get("background")?"#".concat(T.get("background")):void 0,O="vscode"===M,q="intellij"===M,z=eS.includes(M||""),U=eN.includes(M||"");(0,r.useEffect)(()=>{let e=e=>{let{data:n}=e;if(n.style){let e=n.style.split(";").filter(e=>e).map(e=>{let[n,t]=e.split(":"),s=t.trim(),r=s.startsWith("#")||s.startsWith("rgb");if(!r)return"".concat(n,": ").concat(t);let a=eC(s);return"".concat(n,": ").concat(a)}).join(";");document.documentElement.style.cssText=e,C(!0)}n.themeClass&&(document.documentElement.className=n.themeClass)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,r.useEffect)(()=>{if(!O)return;let e=e=>{(e.ctrlKey||e.metaKey)&&"KeyC"===e.code?document.execCommand("copy"):(e.ctrlKey||e.metaKey)&&"KeyX"===e.code?document.execCommand("cut"):(e.ctrlKey||e.metaKey)&&"KeyV"===e.code?document.execCommand("paste"):(e.ctrlKey||e.metaKey)&&"KeyA"===e.code&&document.execCommand("selectAll")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let _=e=>{if(I.current)I.current.sendUserChat(e);else{let n=[...b];n.push(e),y(n)}},Z=e=>{if(I.current)I.current.addRelevantContext(e);else{let n=[...j];n.push(e),k(n)}},G=(0,p.H)({init:e=>{I.current||(u((0,x.x0)()),n(!0),a(e.fetcherOptions))},sendMessage:e=>_(e),showError:e=>{N(e)},cleanError:()=>{N(null)},addRelevantContext:e=>Z(e)});(0,r.useLayoutEffect)(()=>{if(R){if($&&e&&t&&!S&&!D.current){var n;null===(n=I.current)||void 0===n||n.focus()}D.current=$}},[$,R]);let H=async()=>{E(!0),await (null==G?void 0:G.refresh()),E(!1)},K=async(e,n)=>{var t;return null==G?void 0:null===(t=G.onSubmitMessage)||void 0===t?void 0:t.call(G,e,n)},J=async e=>{var n;return null==G?void 0:null===(n=G.onApplyInEditor)||void 0===n?void 0:n.call(G,e)};function W(e){let{children:n}=e;return(0,s.jsxs)("div",{className:"h-screen w-screen",style:{fontSize:w?"inherit":P,color:w?"inherit":F,background:w?"inherit":B,padding:q?"20px":"5px 18px"},children:[(0,s.jsxs)("div",{className:"flex items-center",style:{marginBottom:"0.55em"},children:[(0,s.jsx)(i(),{src:o.Z,alt:"logo",className:"rounded-full",style:{background:"rgb(232, 226, 210)",marginRight:"0.375em",padding:"0.15em"},width:18}),(0,s.jsx)("p",{className:"font-semibold",children:"Tabby"})]}),n]})}if(S)return(0,s.jsx)(W,{children:(0,s.jsxs)(s.Fragment,{children:[S.title&&(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:S.title}),(0,s.jsx)(ew.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[m.Z,v.Z],children:S.content}),(0,s.jsxs)(h.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:H,children:[A&&(0,s.jsx)(g.IconSpinner,{}),"Refresh"]})]})});if(!e||!t)return(0,s.jsx)(W,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"opacity-80",children:"Welcome to Tabby Chat! Just a moment while we get things ready..."}),(0,s.jsx)(g.IconSpinner,{className:"mx-auto",style:{marginTop:"1.25em",width:"0.875em",height:"0.875em"}})]})});let Q={Authorization:"Bearer ".concat(t.authorization)};return(0,s.jsx)(f.SV,{FallbackComponent:function(e){let{error:n}=e;return(0,s.jsxs)(W,{children:[(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:"Something went wrong"}),(0,s.jsx)("p",{children:n.message}),(0,s.jsxs)(h.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:H,children:[A&&(0,s.jsx)(g.IconSpinner,{}),"Refresh"]})]})},children:(0,s.jsx)(ek,{chatId:d,ref:I,headers:Q,isEphemeral:!0,onNavigateToContext:(e,n)=>{null==G||G.navigate(e,n)},onLoaded:()=>{j.forEach(Z),b.forEach(_),k([]),y([]),L(!0)},maxWidth:O?"5xl":void 0,onCopyContent:"vscode"===M?e=>{parent.postMessage({action:"copy",data:e},"*")}:void 0,client:M,onSubmitMessage:z?K:void 0,onApplyInEditor:U?J:void 0},d)})}},48537:function(e,n,t){"use strict";t.d(n,{q:function(){return l}});var s=t(36164);t(3546);var r=t(28312),a=t(31458),i=t(81565);function l(e){let{className:n,value:t,onCopyContent:l,text:o,...c}=e,{isCopied:d,copyToClipboard:u}=(0,r.m)({timeout:2e3,onCopyContent:l});return t?(0,s.jsxs)(a.z,{variant:"ghost",size:o?"default":"icon",className:n,onClick:()=>{d||u(t)},...c,children:[d?(0,s.jsx)(i.IconCheck,{className:"text-green-600"}):(0,s.jsx)(i.IconCopy,{}),o&&(0,s.jsx)("span",{children:o}),!o&&(0,s.jsx)("span",{className:"sr-only",children:"Copy"})]}):null}},63795:function(e,n,t){"use strict";t.d(n,{C:function(){return l}});var s=t(36164);t(3546);var r=t(14375),a=t(74248);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",successful:"border-transparent bg-successful text-successful-foreground hover:bg-successful/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:n,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:t}),n),...r})}},31458:function(e,n,t){"use strict";t.d(n,{d:function(){return o},z:function(){return c}});var s=t(36164),r=t(3546),a=t(74047),i=t(14375),l=t(74248);let o=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,n)=>{let{className:t,variant:r,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:t})),ref:n,...d})});c.displayName="Button"},82394:function(e,n,t){"use strict";t.d(n,{I:function(){return i}});var s=t(36164),r=t(3546),a=t(74248);let i=r.forwardRef((e,n)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...i})});i.displayName="Input"},84942:function(e,n,t){"use strict";t.d(n,{J2:function(){return l},i9:function(){return d},tW:function(){return u},xo:function(){return o},xp:function(){return c},yk:function(){return f}});var s=t(36164),r=t(3546),a=t(83299),i=t(74248);let l=a.fC,o=a.xz,c=a.x8,d=a.h_,u=a.ee,f=r.forwardRef((e,n)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,s.jsx)(a.VY,{ref:n,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});f.displayName=a.VY.displayName},11208:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var s=t(36164),r=t(3546),a=t(74225),i=t(74248);let l=r.forwardRef((e,n)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,s.jsx)(a.f,{ref:n,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});l.displayName=a.f.displayName},3448:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var s=t(36164),r=t(74248);function a(e){let{className:n,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("h-4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",n),...t})}},29:function(e,n,t){"use strict";t.d(n,{_v:function(){return d},aJ:function(){return c},pn:function(){return l},u:function(){return o}});var s=t(36164),r=t(3546),a=t(44421),i=t(74248);let l=a.zt,o=a.fC,c=a.xz,d=r.forwardRef((e,n)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,s.jsx)(a.VY,{ref:n,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",t),...l})});d.displayName=a.VY.displayName},28312:function(e,n,t){"use strict";t.d(n,{m:function(){return l}});var s=t(3546),r=t(61200),a=t.n(r),i=t(2578);function l(e){let{timeout:n=2e3,onError:t,onCopyContent:r}=e,[l,o]=s.useState(!1),c=()=>{o(!0),setTimeout(()=>{o(!1)},n)},d=e=>{if("function"==typeof t){null==t||t(e);return}i.A.error("Failed to copy.")};return{isCopied:l,copyToClipboard:e=>{var n;if(e){if(r){r(e),c();return}if(null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText)navigator.clipboard.writeText(e).then(c).catch(d);else{let n=a()(e);n?c():d()}}}}}},24449:function(e,n,t){"use strict";t.d(n,{S:function(){return l},n:function(){return o}});var s=t(3546),r=t(45391),a=t(16784);let i=e=>{let n=(0,a.d)(e);s.useEffect(()=>()=>{n.current()},[])};function l(e,n,t){let l=(0,a.d)(e),o=s.useMemo(()=>(0,r.Z)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return l.current(...n)},n,t),[]);return i(()=>{var e;null==t||null===(e=t.onUnmount)||void 0===e||e.call(t,o),o.cancel()}),{run:o,cancel:o.cancel,flush:o.flush}}function o(e,n,t){let[r,a]=s.useState(e),{run:i}=l(()=>{a(e)},n,t);return s.useEffect(()=>{i()},[e]),[r,a]}},98454:function(e,n,t){"use strict";t.d(n,{P:function(){return i}});var s=t(40055),r=t(43240);let a=(0,r.BX)("\n  query MeQuery {\n    me {\n      id\n      authToken\n      email\n      isAdmin\n      isPasswordSet\n      name\n    }\n  }\n"),i=()=>(0,s.aM)({query:a})},80605:function(e,n,t){"use strict";t.d(n,{UA:function(){return u},Uw:function(){return c},c7:function(){return o},jJ:function(){return d},xG:function(){return l}});var s=t(40055),r=t(43240);let a=(0,r.BX)("\n  query GetServerInfo {\n    serverInfo {\n      isAdminInitialized\n      isEmailConfigured\n      isChatEnabled\n      allowSelfSignup\n      isDemoMode\n    }\n  }\n"),i=()=>{let[{data:e}]=(0,s.aM)({query:a});return null==e?void 0:e.serverInfo},l=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isChatEnabled},o=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isAdminInitialized},c=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isEmailConfigured},d=()=>{var e;return null===(e=i())||void 0===e?void 0:e.allowSelfSignup},u=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isDemoMode}},63484:function(e,n,t){"use strict";t.d(n,{U$:function(){return d},t:function(){return u}});var s=t(14283),r=t.n(s),a=t(34021),i=t(74630),l=t(18500),o=JSON.parse('{"Mercury":"#ff2b2b","TypeScript":"#2b7489","PureBasic":"#5a6986","Objective-C++":"#6866fb","Self":"#0579aa","edn":"#db5855","NewLisp":"#87AED7","Jupyter Notebook":"#DA5B0B","Rebol":"#358a5b","Frege":"#00cafe","Dart":"#00B4AB","AspectJ":"#a957b0","Shell":"#89e051","Web Ontology Language":"#9cc9dd","xBase":"#403a40","Eiffel":"#946d57","Nix":"#7e7eff","RAML":"#77d9fb","MTML":"#b7e1f4","Racket":"#22228f","Elixir":"#6e4a7e","SAS":"#B34936","Agda":"#315665","wisp":"#7582D1","D":"#ba595e","Kotlin":"#F18E33","Opal":"#f7ede0","Crystal":"#776791","Objective-C":"#438eff","ColdFusion CFC":"#ed2cd6","Oz":"#fab738","Mirah":"#c7a938","Objective-J":"#ff0c5a","Gosu":"#82937f","FreeMarker":"#0050b2","Ruby":"#701516","Component Pascal":"#b0ce4e","Arc":"#aa2afe","Brainfuck":"#2F2530","Nit":"#009917","APL":"#5A8164","Go":"#375eab","Visual Basic":"#945db7","PHP":"#4F5D95","Cirru":"#ccccff","SQF":"#3F3F3F","Glyph":"#e4cc98","Java":"#b07219","MAXScript":"#00a6a6","Scala":"#DC322F","Makefile":"#427819","ColdFusion":"#ed2cd6","Perl":"#0298c3","Lua":"#000080","Vue":"#2c3e50","Verilog":"#b2b7f8","Factor":"#636746","Haxe":"#df7900","Pure Data":"#91de79","Forth":"#341708","Red":"#ee0000","Hy":"#7790B2","Volt":"#1F1F1F","LSL":"#3d9970","eC":"#913960","CoffeeScript":"#244776","HTML":"#e44b23","Lex":"#DBCA00","API Blueprint":"#2ACCA8","Swift":"#ffac45","C":"#555555","AutoHotkey":"#6594b9","Isabelle":"#FEFE00","Metal":"#8f14e9","Clarion":"#db901e","JSONiq":"#40d47e","Boo":"#d4bec1","AutoIt":"#1C3552","Clojure":"#db5855","Rust":"#dea584","Prolog":"#74283c","SourcePawn":"#5c7611","AMPL":"#E6EFBB","FORTRAN":"#4d41b1","ANTLR":"#9DC3FF","Harbour":"#0e60e3","Tcl":"#e4cc98","BlitzMax":"#cd6400","PigLatin":"#fcd7de","Lasso":"#999999","ECL":"#8a1267","VHDL":"#adb2cb","Elm":"#60B5CC","Propeller Spin":"#7fa2a7","X10":"#4B6BEF","IDL":"#a3522f","ATS":"#1ac620","Ada":"#02f88c","Unity3D Asset":"#ab69a1","Nu":"#c9df40","LFE":"#004200","SuperCollider":"#46390b","Oxygene":"#cdd0e3","ASP":"#6a40fd","Assembly":"#6E4C13","Gnuplot":"#f0a9f0","JFlex":"#DBCA00","NetLinx":"#0aa0ff","Turing":"#45f715","Vala":"#fbe5cd","Processing":"#0096D8","Arduino":"#bd79d1","FLUX":"#88ccff","NetLogo":"#ff6375","CSharp":"#178600","CSS":"#563d7c","Emacs Lisp":"#c065db","Stan":"#b2011d","SaltStack":"#646464","QML":"#44a51c","Pike":"#005390","LOLCODE":"#cc9900","ooc":"#b0b77e","Handlebars":"#01a9d6","J":"#9EEDFF","Mask":"#f97732","EmberScript":"#FFF4F3","TeX":"#3D6117","Nemerle":"#3d3c6e","KRL":"#28431f","Ren\'Py":"#ff7f7f","Unified Parallel C":"#4e3617","Golo":"#88562A","Fancy":"#7b9db4","OCaml":"#3be133","Shen":"#120F14","Pascal":"#b0ce4e","F#":"#b845fc","Puppet":"#302B6D","ActionScript":"#882B0F","Diff":"#88dddd","Ragel in Ruby Host":"#9d5200","Fantom":"#dbded5","Zephir":"#118f9e","Click":"#E4E6F3","Smalltalk":"#596706","DM":"#447265","Ioke":"#078193","PogoScript":"#d80074","LiveScript":"#499886","JavaScript":"#f1e05a","VimL":"#199f4b","PureScript":"#1D222D","ABAP":"#E8274B","Matlab":"#bb92ac","Slash":"#007eff","R":"#198ce7","Erlang":"#B83998","Pan":"#cc0000","LookML":"#652B81","Eagle":"#814C05","Scheme":"#1e4aec","PLSQL":"#dad8d8","Python":"#3572A5","Max":"#c4a79c","Common Lisp":"#3fb68b","Latte":"#A8FF97","XQuery":"#5232e7","Omgrofl":"#cabbff","XC":"#99DA07","Nimrod":"#37775b","SystemVerilog":"#DAE1C2","Chapel":"#8dc63f","Groovy":"#e69f56","Dylan":"#6c616e","E":"#ccce35","Parrot":"#f3ca0a","Grammatical Framework":"#79aa7a","Game Maker Language":"#8fb200","Papyrus":"#6600cc","NetLinx+ERB":"#747faa","Clean":"#3F85AF","Alloy":"#64C800","Squirrel":"#800000","PAWN":"#dbb284","UnrealScript":"#a54c4d","Standard ML":"#dc566d","Slim":"#ff8f77","Perl6":"#0000fb","Julia":"#a270ba","Haskell":"#29b544","NCL":"#28431f","Io":"#a9188d","Rouge":"#cc0088","cpp":"#f34b7d","AGS Script":"#B9D9FF","Dogescript":"#cca760","nesC":"#94B0C7"}'),c={abap:{filenames:[],extnames:["abap"]},actionscript:{filenames:[],extnames:["as"]},ada:{filenames:[],extnames:["ada","adb","ads"]},apacheconf:{filenames:[".htaccess","apache2.conf","httpd.conf"],extnames:["apacheconf","vhost"]},apl:{filenames:[],extnames:["apl","dyalog"]},applescript:{filenames:[],extnames:["applescript","scpt"]},arff:{filenames:[],extnames:["arff"]},asciidoc:{filenames:[],extnames:["asciidoc","adoc","asc"]},asm6502:{filenames:[],extnames:["asm"]},autohotkey:{filenames:[],extnames:["ahk","ahkl"]},autoit:{filenames:[],extnames:["au3"]},bash:{filenames:[".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".login",".profile",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_logout","bash_profile","bashrc","cshrc","gradlew","login","man","profile","zlogin","zlogout","zprofile","zshenv","zshrc"],extnames:["sh","bash","bats","cgi","command","fcgi","ksh","tmux","tool","zsh"]},basic:{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},batch:{filenames:[],extnames:["bat","cmd"]},bison:{filenames:[],extnames:["bison"]},brainfuck:{filenames:[],extnames:["b","bf"]},bro:{filenames:[],extnames:["bro"]},c:{filenames:[],extnames:["c","cats","h","idc"]},csharp:{filenames:[],extnames:["cs","cake","cshtml","csx"]},cpp:{filenames:[],extnames:["cpp","c++","cc","cp","cxx","h","h++","hh","hpp","hxx","inc","inl","ino","ipp","re","tcc","tpp"]},coffeescript:{filenames:["Cakefile"],extnames:["coffee","_coffee","cake","cjsx","iced"]},clojure:{filenames:["riemann.config"],extnames:["clj","boot","cl2","cljc","cljs","cljs.hl","cljscm","cljx","hic"]},crystal:{filenames:[],extnames:["cr"]},css:{filenames:[],extnames:["css"]},d:{filenames:[],extnames:["d","di"]},dart:{filenames:[],extnames:["dart"]},diff:{filenames:[],extnames:["diff","patch"]},django:{filenames:[],extnames:["jinja","jinja2","mustache","njk"]},dockerfile:{filenames:["Dockerfile"],extnames:["dockerfile"]},eiffel:{filenames:[],extnames:["e"]},elixir:{filenames:["mix.lock"],extnames:["ex","exs"]},elm:{filenames:[],extnames:["elm"]},erb:{filenames:[],extnames:["erb"]},erlang:{filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"],extnames:["erl","app.src","es","escript","hrl","xrl","yrl"]},fsharp:{filenames:[],extnames:["fs","fsi","fsx"]},fortran:{filenames:[],extnames:["f90","f","f03","f08","f77","f95","for","fpp"]},gedcom:{filenames:[],extnames:["ged"]},gherkin:{filenames:[],extnames:["feature"]},glsl:{filenames:[],extnames:["glsl","fp","frag","frg","fs","fsh","fshader","geo","geom","glslv","gshader","shader","tesc","tese","vert","vrx","vsh","vshader"]},go:{filenames:[],extnames:["go"]},graphql:{filenames:[],extnames:["graphql","gql"]},groovy:{filenames:["Jenkinsfile"],extnames:["groovy","grt","gtpl","gvy"]},haml:{filenames:[],extnames:["haml"]},handlebars:{filenames:[],extnames:["handlebars","hbs"]},haskell:{filenames:[],extnames:["hs","hsc"]},haxe:{filenames:[],extnames:["hx","hxsl"]},http:{filenames:[],extnames:["http"]},icon:{filenames:[],extnames:["icn"]},inform7:{filenames:[],extnames:["ni","i7x"]},ini:{filenames:[".editorconfig",".gitconfig"],extnames:["ini","cfg","lektorproject","prefs","pro","properties"]},io:{filenames:[],extnames:["io"]},j:{filenames:[],extnames:["ijs"]},java:{filenames:[],extnames:["java"]},javascript:{filenames:["Jakefile"],extnames:["js","_js","cjs","bones","es","es6","frag","gs","jake","jsb","jscad","jsfl","jsm","jss","mjs","njs","pac","sjs","ssjs","xsjs","xsjslib"]},jolie:{filenames:[],extnames:["ol","iol"]},json:{filenames:[".arcconfig",".htmlhintrc",".tern-config",".tern-project","composer.lock","mcmod.info"],extnames:["json","avsc","geojson","gltf","JSON-tmLanguage","jsonl","tfstate","topojson","webapp","webmanifest","yy","yyp"]},julia:{filenames:[],extnames:["jl"]},keyman:{filenames:[],extnames:["kmn"]},kotlin:{filenames:[],extnames:["kt","ktm","kts"]},latex:{filenames:[],extnames:["tex","aux","bbx","bib","cbx","cls","dtx","ins","lbx","ltx","mkii","mkiv","mkvi","sty","toc"]},less:{filenames:[],extnames:["less"]},liquid:{filenames:[],extnames:["liquid"]},lisp:{filenames:[],extnames:["lisp","asd","cl","l","lsp","ny","podsl","sexp"]},livescript:{filenames:["Slakefile"],extnames:["ls","_ls"]},lolcode:{filenames:[],extnames:["lol"]},lua:{filenames:[],extnames:["lua","fcgi","nse","p8","pd_lua","rbxs","wlua"]},cmake:{filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"],extnames:["mak","d","make","mk","mkfile"]},markdown:{filenames:["contents.lr","LICENSE"],extnames:["md","markdown","mdown","mdwn","mkd","mkdn","mkdown","ronn","workbook"]},markup:{filenames:[],extnames:["apib","blade","chem","ecr","eex","ejs","html","htm","ipynb","kit","latte","marko","mask","mtml","phtml","pic","raml","rhtml","vue","xht","xhtml"]},matlab:{filenames:[],extnames:["matlab","m"]},mel:{filenames:[],extnames:["mel"]},mizar:{filenames:[],extnames:["miz","voc"]},monkey:{filenames:[],extnames:["monkey","monkey2"]},n4js:{filenames:[],extnames:["n4jsd"]},nasm:{filenames:[],extnames:["nasm"]},nginx:{filenames:["nginx.conf"],extnames:["nginxconf","vhost"]},nim:{filenames:[],extnames:["nim","nimrod"]},nix:{filenames:[],extnames:["nix"]},nsis:{filenames:[],extnames:["nsi","nsh"]},objectivec:{filenames:[],extnames:["m","h"]},ocaml:{filenames:[],extnames:["ml","eliom","eliomi","ml4","mli","mll","mly"]},opencl:{filenames:[],extnames:["opencl","cl"]},oz:{filenames:[],extnames:["oz"]},pascal:{filenames:[],extnames:["pas","dfm","dpr","inc","lpr","pascal","pp"]},perl:{filenames:["Makefile.PL","Rexfile","ack","cpanfile"],extnames:["pl","al","cgi","fcgi","perl","ph","plx","pm","psgi","t"]},php:{filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],extnames:["php","aw","ctp","fcgi","inc","php3","php4","php5","phps","phpt"]},plsql:{filenames:[],extnames:["pls","bdy","ddl","fnc","pck","pkb","pks","plb","plsql","prc","spc","tpb","tps","trg","vw"]},powershell:{filenames:[],extnames:["ps1","psd1","psm1"]},processing:{filenames:[],extnames:["pde"]},prolog:{filenames:[],extnames:["pl","pro","prolog","yap"]},properties:{filenames:[],extnames:["properties"]},protobuf:{filenames:[],extnames:["proto"]},pug:{filenames:[],extnames:["jade","pug"]},puppet:{filenames:["Modulefile"],extnames:["pp"]},pure:{filenames:[],extnames:["pure"]},python:{filenames:[".gclient","BUCK","BUILD","BUILD.bazel","SConscript","SConstruct","Snakefile","WORKSPACE","wscript"],extnames:["py","bzl","cgi","fcgi","gyp","gypi","lmi","py3","pyde","pyi","pyp","pyt","pyw","rpy","spec","tac","wsgi","xpy"]},q:{filenames:[],extnames:["q"]},qore:{filenames:[],extnames:["q","qm","qtest"]},r:{filenames:[".Rprofile","expr-dist"],extnames:["r","rd","rsx"]},jsx:{filenames:[],extnames:["jsx"]},toml:{filenames:[],extnames:["toml"]},tsx:{filenames:[],extnames:["tsx"]},renpy:{filenames:[],extnames:["rpy"]},reason:{filenames:[],extnames:["re","rei"]},rest:{filenames:[],extnames:["rst","rest"]},rip:{filenames:[],extnames:["rip"]},ruby:{filenames:[".irbrc",".pryrc","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Gemfile.lock","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Thorfile","Vagrantfile","buildfile"],extnames:["rb","builder","eye","fcgi","gemspec","god","jbuilder","mspec","pluginspec","podspec","rabl","rake","rbuild","rbw","rbx","ru","ruby","spec","thor","watchr"]},rust:{filenames:[],extnames:["rs"]},sas:{filenames:[],extnames:["sas"]},sass:{filenames:[],extnames:["sass"]},scss:{filenames:[],extnames:["scss"]},scala:{filenames:[],extnames:["scala","kojo","sbt","sc"]},scheme:{filenames:[],extnames:["scm","sch","sld","sls","sps","ss"]},smalltalk:{filenames:[],extnames:["st","cs"]},smarty:{filenames:[],extnames:["tpl"]},sql:{filenames:[],extnames:["sql","cql","ddl","inc","mysql","prc","tab","udf","viw"]},soy:{filenames:[],extnames:["soy"]},stylus:{filenames:[],extnames:["styl"]},swift:{filenames:[],extnames:["swift"]},tcl:{filenames:["owh","starfield"],extnames:["tcl","adp","tm"]},textile:{filenames:[],extnames:["textile"]},tt2:{filenames:[],extnames:["pm"]},twig:{filenames:[],extnames:["twig"]},typescript:{filenames:[],extnames:["ts"]},velocity:{filenames:[],extnames:["vm"]},verilog:{filenames:[],extnames:["v","veo"]},vhdl:{filenames:[],extnames:["vhdl","vhd","vhf","vhi","vho","vhs","vht","vhw"]},vim:{filenames:[".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"],extnames:["vim"]},"visual-basic":{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},wasm:{filenames:[],extnames:["wast","wat"]},xojo:{filenames:[],extnames:["xojo_code","xojo_menu","xojo_report","xojo_script","xojo_toolbar","xojo_window"]},xquery:{filenames:[],extnames:["xquery","xq","xql","xqm","xqy"]},yaml:{filenames:[".clang-format",".clang-tidy",".gemrc","glide.lock"],extnames:["yml","mir","reek","rviz","sublime-syntax","syntax","yaml","yaml-tmlanguage"]}};Object.entries(o).reduce((e,n)=>{let[t,s]=n;return{...e,[t.toLocaleLowerCase()]:s}},{});let d=e=>{let n={},t={};for(let[e,s]of Object.entries(c)){for(let t of s.filenames)(0,a.Z)(n,t)||(n[t]=[]),n[t].push(e);for(let n of s.extnames)(0,a.Z)(t,n)||(t[n]=[]),t[n].push(e)}return[].concat(n[r().basename(e)],t[r().extname(e).substring(1)]).filter(Boolean)},u=(e,n)=>{let t=()=>(0,i.Z)(n)?"Other":n;if(!e)return t();let s=Object.values(l.SQ).map(e=>e.toLocaleLowerCase()).indexOf(e.toLocaleLowerCase());if(-1===s)return t();let r=Object.keys(l.SQ)[s];return({csharp:"C#",cpp:"C++",javascript:"JavaScript",typescript:"TypeScript"})[r.toLocaleLowerCase()]||r}},91302:function(e,n,t){"use strict";t.d(n,{Dp:function(){return x},Ho:function(){return g},QJ:function(){return k},av:function(){return S},kP:function(){return w},zq:function(){return j}});var s,r,a=t(36164),i=t(3546),l=t(11978),o=t(24426),c=t.n(o),d=t(43240),u=t(80605),f=t(11634),m=t(66794);function v(e,n){var t,s;let a=function(e,n){switch(n.type){case r.SignIn:case r.Refresh:return{status:"authenticated",data:n.data};case r.SignOut:return{status:"unauthenticated",data:void 0}}}(0,n);return e.status==a.status&&(t=e.data,s=a.data,(null==t?void 0:t.accessToken)===(null==s?void 0:s.accessToken)&&(null==t?void 0:t.refreshToken)===(null==s?void 0:s.refreshToken))?e:a}(s=r||(r={}))[s.SignIn=0]="SignIn",s[s.SignOut=1]="SignOut",s[s.Refresh=2]="Refresh";let p=i.createContext({}),x=(0,d.BX)("\n  mutation refreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      accessToken\n      refreshToken\n    }\n  }\n"),h=(0,d.BX)("\n  mutation LogoutAllSessions {\n    logoutAllSessions\n  }\n"),g=e=>{let{children:n}=e,[t,s]=i.useState(!1),[l]=c()(m.nd,void 0),[o,d]=i.useReducer(v,{status:"loading",data:void 0});i.useEffect(()=>{(null==l?void 0:l.accessToken)&&(null==l?void 0:l.refreshToken)?d({type:r.SignIn,data:l}):d({type:r.SignOut}),s(!0)},[]),i.useEffect(()=>{!t||((null==l?void 0:l.accessToken)&&(null==l?void 0:l.refreshToken)?d({type:r.Refresh,data:l}):(null==l?void 0:l.accessToken)||(null==l?void 0:l.refreshToken)||d({type:r.SignOut}))},[l]);let u=i.useMemo(()=>{var e;return(null==o?void 0:o.status)=="authenticated"?{data:{accessToken:o.data.accessToken},status:o.status}:{status:null!==(e=null==o?void 0:o.status)&&void 0!==e?e:"loading",data:null}},[o]);return(0,a.jsx)(p.Provider,{value:{authState:o,dispatch:d,session:u},children:n})};class b extends Error{constructor(){super("AuthProvider is missing. Please add the AuthProvider at root level")}}function y(){let e=i.useContext(p);if(!e)throw new b;return e}function j(){let{dispatch:e}=y(),[n,t]=c()(m.nd,void 0);return async n=>(t({accessToken:n.accessToken,refreshToken:n.refreshToken}),e({type:r.SignIn,data:n}),!0)}function k(){let e=(0,f.D)(h),{dispatch:n}=y(),[t,s]=c()(m.nd,void 0);return async()=>{await e(),s(void 0),n({type:r.SignOut})}}function w(){let{session:e}=y();return e}let C=["/auth/signin","/auth/signup","/auth/reset-password"];function S(){let e=(0,u.c7)(),n=(0,l.useRouter)(),t=(0,l.usePathname)(),s=(0,l.useSearchParams)(),{data:r,status:a}=w();return i.useEffect(()=>{if("loading"===a||"authenticated"===a||void 0===e)return;let r="/auth/signup"===t&&"true"===s.get("isAdmin");if(!r&&!e)return n.replace("/auth/signup?isAdmin=true");C.includes(t)||n.replace("/auth/signin")},[e,a]),r}},3765:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var s=t(44745),r=t(57778),a=t(79716),i=t(91302),l=t(66794);async function o(e,n){var t;let s=null!==(t=null==n?void 0:n.customFetch)&&void 0!==t?t:window.fetch;if(function(e){var n;if(e.startsWith("/oauth/providers"))return!1;let t=null===(n=(0,l.bW)())||void 0===n?void 0:n.accessToken;if(!t)return!0;try{let{exp:e}=(0,a.o)(t);return(0,l.pw)(e)}catch(e){return!0}}(e))return l.gN.refreshToken(c).then(t=>f(e,n));let r=await s(e,d(n));return 401===r.status?(l.gN.clearAccessToken(),l.gN.refreshToken(c).then(t=>f(e,n))):m(r,n)}async function c(){var e,n;let t=null===(e=(0,l.bW)())||void 0===e?void 0:e.refreshToken;if(!t)return;let s=await u(t);return null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.refreshToken}function d(e){var n;let t=new Headers(null==e?void 0:e.headers);return t.append("authorization","Bearer ".concat(null===(n=(0,l.bW)())||void 0===n?void 0:n.accessToken)),{...e||{},headers:t}}async function u(e){let n=new s.KU({url:"/graphql",requestPolicy:"network-only",exchanges:[s.Ek]}),t=n.createRequestOperation("mutation",(0,r.h)(i.Dp,{refreshToken:e}));return n.executeMutation(t)}function f(e,n){var t;let s=null!==(t=null==n?void 0:n.customFetch)&&void 0!==t?t:window.fetch;return s(e,d(n)).then(e=>m(e,n))}function m(e,n){return(null==e?void 0:e.ok)?(null==n?void 0:n.responseFormatter)?n.responseFormatter(e):(null==n?void 0:n.responseFormat)==="blob"?e.blob():e.json():(null==n?void 0:n.errorHandler)?n.errorHandler(e):void 0}},11634:function(e,n,t){"use strict";t.d(n,{D:function(){return v},L:function(){return p}});var s=t(22365),r=t(28552),a=t(81013),i=t(17522),l=t(79716),o=t(74630),c=t(40055),d=t(44745),u=t(91302),f=t(70410),m=t(66794);function v(e,n){var t;let[s,r]=(0,c.Db)(e),a=(null==n?void 0:n.form)?(t=n.form,e=>{let{graphQLErrors:n=[]}=e;for(let e of n)if(e.extensions&&e.extensions["validation-errors"]){let n=e.extensions["validation-errors"];for(let e of n.errors)t.setError(e.path,e)}else(null==e?void 0:e.originalError)&&t.setError("root",e.originalError)}):void 0,i=async(e,t)=>{let s;try{if(null==(s=await r(e,t))?void 0:s.error)a&&a(s.error),(null==n?void 0:n.onError)&&n.onError(s.error);else if(!(0,o.Z)(null==s?void 0:s.data)){var i;null==n||null===(i=n.onCompleted)||void 0===i||i.call(n,s.data)}}catch(e){(null==n?void 0:n.onError)&&n.onError(e);return}return s};return i}let p=new d.KU({url:"/graphql",requestPolicy:"cache-and-network",exchanges:[(0,r.HG)({keys:{CompletionStats:()=>null,ServerInfo:()=>null,RepositorySearch:()=>null,RepositoryList:()=>null,RepositoryGrep:()=>null,GrepLine:()=>null,GrepFile:()=>null,GrepTextOrBase64:()=>null,GrepSubMatch:()=>null,Repository:e=>e?"".concat(e.kind,"_").concat(e.id):null,GitReference:()=>null,MessageAttachment:()=>null,MessageAttachmentCode:()=>null,MessageAttachmentDoc:()=>null,NetworkSetting:()=>null},resolvers:{Query:{invitations:(0,a.N)(),gitRepositories:(0,a.N)(),webCrawlerUrls:(0,a.N)(),integrations:(0,a.N)()}},updates:{Mutation:{deleteInvitation(e,n,t,s){e.deleteInvitation&&t.inspectFields("Query").filter(e=>"invitations"===e.fieldName).forEach(e=>{t.updateQuery({query:f.lE,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.invitations)||void 0===t?void 0:t.edges)&&(e.invitations.edges=e.invitations.edges.filter(e=>e.node.id!==n.id)),e})})},deleteGitRepository(e,n,t,s){e.deleteGitRepository&&t.inspectFields("Query").filter(e=>"gitRepositories"===e.fieldName).forEach(e=>{t.updateQuery({query:f.S1,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.gitRepositories)||void 0===t?void 0:t.edges)&&(e.gitRepositories.edges=e.gitRepositories.edges.filter(e=>e.node.id!==n.id)),e})})},deleteWebCrawlerUrl(e,n,t,s){e.deleteWebCrawlerUrl&&t.inspectFields("Query").filter(e=>"webCrawlerUrls"===e.fieldName).forEach(e=>{t.updateQuery({query:f.XP,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.webCrawlerUrls)||void 0===t?void 0:t.edges)&&(e.webCrawlerUrls.edges=e.webCrawlerUrls.edges.filter(e=>e.node.id!==n.id)),e})})},deleteIntegration(e,n,t,s){e.deleteIntegration&&t.inspectFields("Query").filter(e=>"integrations"===e.fieldName).forEach(e=>{t.updateQuery({query:f.kb,variables:e.arguments},e=>((null==e?void 0:e.integrations)&&(e.integrations.edges=e.integrations.edges.filter(e=>e.node.id!==n.id)),e))})},createIntegration(e,n,t){let s="Query";t.inspectFields(s).filter(e=>{var t,s,r;return"integrations"===e.fieldName&&!!(null===(t=e.arguments)||void 0===t?void 0:t.kind)&&(null===(s=e.arguments)||void 0===s?void 0:s.kind)===(null==n?void 0:null===(r=n.input)||void 0===r?void 0:r.kind)}).forEach(e=>{t.invalidate(s,e.fieldName,e.arguments)})}}}}),(0,s.M)(async e=>{let n=(0,m.bW)(),t=null==n?void 0:n.accessToken,s=null==n?void 0:n.refreshToken;return{addAuthToOperation(n){let r=(0,m.bW)();return(t=null==r?void 0:r.accessToken,s=null==r?void 0:r.refreshToken,t)?e.appendHeaders(n,{Authorization:"Bearer ".concat(t)}):n},didAuthError(e,n){let t=e.graphQLErrors.some(e=>{var n;return(null==e?void 0:null===(n=e.extensions)||void 0===n?void 0:n.code)==="UNAUTHORIZED"});return t&&m.gN.clearAccessToken(),t},willAuthError(e){let n=(0,m.bW)();if(t=null==n?void 0:n.accessToken,s=null==n?void 0:n.refreshToken,"query"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["GetServerInfo"].includes(e.name.value)})||"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["tokenAuth","register"].includes(e.name.value)})||s&&"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.value)==="refreshToken"}))return!1;if(!t)return m.gN.clearAccessToken(),!0;try{let{exp:e}=(0,l.o)(t);return(0,m.pw)(e)}catch(e){return!0}},refreshAuth:async()=>m.gN.refreshToken(async()=>{var n;let t=null===(n=(0,m.bW)())||void 0===n?void 0:n.refreshToken;if(t)return e.mutate(u.Dp,{refreshToken:t}).then(e=>{var n;return null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.refreshToken})})}}),(0,d.Dk)({onError(e){e.message.startsWith("[GraphQL]")&&(e.message=e.message.replace("[GraphQL]","").trim())}}),d.Ek,(0,d.pV)({forwardSubscription(e,n){var t,s,r;let a=null!==(r=null===(s=n.context.fetchOptions)||void 0===s?void 0:null===(t=s.headers)||void 0===t?void 0:t.Authorization)&&void 0!==r?r:"",l=window.location.host,o=(0,i.eI)({url:"ws://".concat(l,"/subscriptions"),connectionParams:{authorization:a}}),c={...e,query:e.query||""};return{subscribe(e){let n=o.subscribe(c,e);return{unsubscribe:n}}}}})]})},70410:function(e,n,t){"use strict";t.d(n,{Cl:function(){return u},D7:function(){return x},DQ:function(){return o},GG:function(){return i},S1:function(){return a},XP:function(){return v},Y6:function(){return d},kb:function(){return f},lE:function(){return r},ts:function(){return m},yB:function(){return l},yw:function(){return c},zz:function(){return p}});var s=t(43240);let r=(0,s.BX)("\n  query ListInvitations(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    invitations(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          code\n          createdAt\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),a=(0,s.BX)("\n  query gitRepositories(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    gitRepositories(\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          name\n          gitUrl\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),i=(0,s.BX)("\n  query ListJobRuns(\n    $ids: [ID!]\n    $jobs: [String!]\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    jobRuns(\n      ids: $ids\n      jobs: $jobs\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          job\n          createdAt\n          startedAt\n          finishedAt\n          exitCode\n          stdout\n          stderr\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),l=(0,s.BX)("\n  query GetJobRunStats($jobs: [String!]) {\n    jobRunStats(jobs: $jobs) {\n      success\n      failed\n      pending\n    }\n  }\n"),o=(0,s.BX)("\n  query ListJobs {\n    jobs\n  }\n"),c=(0,s.BX)("\n  query ListUsers($after: String, $before: String, $first: Int, $last: Int) {\n    users(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          isAdmin\n          isOwner\n          createdAt\n          active\n          name\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),d=(0,s.BX)("\n  query DailyStatsInPastYear($users: [ID!]) {\n    dailyStatsInPastYear(users: $users) {\n      start\n      end\n      completions\n      selects\n      views\n    }\n  }\n"),u=(0,s.BX)("\n  query DailyStats(\n    $start: DateTime!\n    $end: DateTime!\n    $users: [ID!]\n    $languages: [Language!]\n  ) {\n    dailyStats(start: $start, end: $end, users: $users, languages: $languages) {\n      start\n      end\n      completions\n      selects\n      views\n      language\n    }\n  }\n"),f=(0,s.BX)("\n  query ListIntegrations(\n    $ids: [ID!]\n    $kind: IntegrationKind\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    integrations(\n      ids: $ids\n      kind: $kind\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          status\n          apiBase\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),m=(0,s.BX)("\n  query ListIntegratedRepositories(\n    $ids: [ID!]\n    $kind: IntegrationKind\n    $active: Boolean\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    integratedRepositories(\n      ids: $ids\n      kind: $kind\n      active: $active\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          gitUrl\n          active\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              startedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),v=(0,s.BX)("\n  query WebCrawlerUrls(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    webCrawlerUrls(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          url\n          id\n          createdAt\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),p=(0,s.BX)("\n  query RepositoryList {\n    repositoryList {\n      id\n      name\n      kind\n      gitUrl\n      refs {\n        name\n        commit\n      }\n    }\n  }\n"),x=(0,s.BX)("\n  query RepositorySearch(\n    $kind: RepositoryKind!\n    $id: ID!\n    $rev: String\n    $pattern: String!\n  ) {\n    repositorySearch(kind: $kind, id: $id, rev: $rev, pattern: $pattern) {\n      type\n      path\n      indices\n    }\n  }\n")},66794:function(e,n,t){"use strict";t.d(n,{bW:function(){return l},gN:function(){return f},nd:function(){return i},pw:function(){return d}});var s=t(79716),r=t(74630),a=t(74248);let i="_tabby_auth",l=()=>{if((0,a.S_)()){let e=localStorage.getItem(i);if(e)try{return JSON.parse(e)}catch(e){}}},o=e=>{localStorage.setItem(i,JSON.stringify(e))},c=()=>{localStorage.removeItem(i),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:i}))},d=e=>!!(0,r.Z)(e)||Date.now()>1e3*e,u=e=>!(0,r.Z)(e)&&Date.now()-1e3*e<6e4,f=new class{clearAccessToken(){let e=l();e&&o({...e,accessToken:""})}async refreshToken(e){try{var n;if(void 0===(null===(n=navigator)||void 0===n?void 0:n.locks))throw console.error("The Web Locks API is not supported in your browser. Please upgrade to a newer browser version."),Error();await navigator.locks.request("_tabby_auth_lock",async()=>{let n;let t=l(),r=null==t?void 0:t.accessToken,a=null==t?void 0:t.refreshToken;if(r){let{iat:a}=(0,s.o)(r);n=u(a)?t:await e()}else a&&(n=await e());n?o(n):c()})}catch(e){c()}}}},2596:function(){},23342:function(e,n){"use strict";n.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},18452:function(e,n,t){"use strict";t.d(n,{m:function(){return i},H:function(){return l}});var s=t(3546),r=t(89704),a=t(95686);function i(e,n){let[t,a]=(0,s.useState)(null),i=!1;return(0,s.useEffect)(()=>{if(e.current&&!i){var t;i=!0,a((t=e.current,(0,r.K)(t,{expose:{navigate:n.navigate,refresh:n.refresh,onSubmitMessage:n.onSubmitMessage,onApplyInEditor:n.onApplyInEditor}})))}},[e.current]),t}function l(e){let[n,t]=(0,s.useState)(null),r=!1;return(0,s.useEffect)(()=>{let n=window.self!==window.top;n&&!r&&(r=!0,t((0,a.c)({expose:{init:e.init,sendMessage:e.sendMessage,showError:e.showError,cleanError:e.cleanError,addRelevantContext:e.addRelevantContext}})))},[]),n}}},function(e){e.O(0,[7998,5498,1058,530,7980,259,2578,5135,1492,4421,7590,1454,5621,9610,4546,8746,9275,2554,1266,4755,9284,5393,7581,9736,1565,4538,3375,5289,1744],function(){return e(e.s=78627)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{51848:function(e,t,n){Promise.resolve().then(n.bind(n,55951))},55951:function(e,t,n){"use strict";n.r(t),n.d(t,{SourceCodeBrowser:function(){return ez},SourceCodeBrowserContext:function(){return eL}});var r=n(57437),l=n(2265),i=n(34084),s=n(72999),a=n(42910),o=n(4091),c=n(71424),d=n(1589),u=n(60106),f=n(52485),h=n(19567),x=n(67887),v=n(1592),m=n(7820),p=n(39311),g=n(61574);let j=e=>{let{className:t,...n}=e;return(0,r.jsx)(g.eh,{className:(0,p.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},b=g.s_,y=e=>{let{withHandle:t,className:n,...l}=e;return(0,r.jsx)(g.OT,{className:(0,p.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...l,children:t&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})};var w=n(57594),N=n(93111),k=n(30522),C=n(23977),S=n(24043),R=n(60838),E=n(93023),I=n(84168);let A=e=>{var t;let{className:n,...i}=e,{pendingEvent:s,setPendingEvent:a}=l.useContext(eL),o=(0,S.o)(R.a,e=>e.activeChatId),c=l.useRef(null),d=e=>{let{action:t}=e,n="";switch(t){case"explain":n="Explain the selected code:";break;case"generate_unittest":n="Generate a unit test for the selected code:";break;case"generate_doc":n="Generate documentation for the selected code:"}return n};return l.useEffect(()=>{var e;let t=null===(e=c.current)||void 0===e?void 0:e.contentWindow;if(s){let{lineFrom:e,lineTo:n,language:r,code:l,path:i}=s;null==t||t.postMessage({action:"sendUserChat",payload:{message:d(s),selectContext:{content:l,range:{start:e,end:n},language:r,filePath:i,link:"/files?path=".concat(encodeURIComponent(null!=i?i:""),"&line=").concat(null!=e?e:"")}}}),a(void 0)}},[s,null===(t=c.current)||void 0===t?void 0:t.contentWindow]),(0,r.jsxs)("div",{className:(0,p.cn)("flex h-full flex-col",n),...i,children:[(0,r.jsx)(P,{}),(0,r.jsx)("iframe",{src:"/playground",className:"w-full flex-1 border-0",ref:c},o)]})};function P(){let{setChatSideBarVisible:e}=l.useContext(eL);return(0,r.jsx)("div",{className:"sticky top-0 flex items-center justify-end px-2 py-1",children:(0,r.jsx)(E.z,{size:"icon",variant:"ghost",onClick:t=>e(!1),children:(0,r.jsx)(I.IconClose,{})})})}var _=n(33555),L=n(24144),O=n(66698),D=n(70349);function z(e){let t={};if(!e)return t;let n=e.split("/"),r=n[0];if(!r)return t;if("git"===r){if(n.length<2)return t;let e=n[1];return{repositoryKind:D.vW.Git,repositoryName:e,basename:n.slice(2).join("/"),repositorySpecifier:"git/".concat(e)}}if(["github","gitlab"].includes(r)){if(n.length<3)return t;let e="github"===r?D.vW.Github:D.vW.Gitlab,l=[n[1],n[2]].join("/");return{repositoryKind:e,repositoryName:l,basename:n.slice(3).join("/"),repositorySpecifier:"".concat(e.toLowerCase(),"/").concat(l)}}return t}function F(e){if(!e)return"";let t=e.split("/");return t[t.length-1]}function T(e,t){if((0,L.Z)(e))return[];let n=[""],r=e.split("/"),l=t?r.length:r.length-1;for(let e=0;e<l;e++)n.push(r.slice(0,e+1).join("/"));return n}async function Z(e,t){if(!e||!t)return[];let{basename:n}=z(e),r=T(n),l=r.map(e=>()=>(0,v.Z)(M("/repositories/".concat(t.kind.toLowerCase(),"/").concat(t.id,"/resolve/").concat(e))).catch(e=>[])),i=await Promise.all(l.map(e=>e())),s=[];for(let e of i){var a;(null==e?void 0:null===(a=e.entries)||void 0===a?void 0:a.length)&&(s=[...s,...e.entries])}return s}function U(e){if((null==e?void 0:e.kind)&&(null==e?void 0:e.name))return"".concat(e.kind.toLowerCase(),"/").concat(e.name)}function H(e){return(0,O.Z)(e,e=>"".concat(e.kind.toLowerCase(),"/").concat(e.name))}function M(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}let B=e=>{let{className:t}=e,{currentFileRoutes:n,setActivePath:i,activePath:s}=l.useContext(eL),a=l.useMemo(()=>{var e;return null===(e=z(s))||void 0===e?void 0:e.basename},[s]);return(0,r.jsxs)("div",{className:(0,p.cn)("flex flex-nowrap items-center gap-1",t),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-x-auto leading-8",children:[(0,r.jsx)("div",{className:"cursor-pointer font-medium text-primary hover:underline",onClick:e=>i(void 0),children:"Repositories"}),(0,r.jsx)("div",{children:"/"}),null==n?void 0:n.map((e,t)=>{let s=0===t&&(null==n?void 0:n.length)>1,a=t===n.length-1;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("div",{className:(0,p.cn)("whitespace-nowrap",s||a?"font-bold":"font-medium",a?"":"cursor-pointer text-primary hover:underline",s?"hover:underline":void 0),onClick:t=>i(e.fullPath),children:e.name}),"file"!==e.file.kind&&(0,r.jsx)("div",{children:"/"})]},e.fullPath)})]}),!!(null==n?void 0:n.length)&&!!a&&(0,r.jsx)(_.q,{className:"shrink-0",value:a})]})};var G=n(83390),V=n(95376),K=n(12897),W=n(25645),J=n(32553),Q=n(16691),q=n.n(Q),Y=n(66566),$=n(3882),X=n(20946),ee=n(77723);let et=e=>{let[t,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let t=e.current,r=new IntersectionObserver(e=>{let[t]=e;n(t.intersectionRatio<1)},{threshold:[1]});return t&&r.observe(t),()=>{t&&r.unobserve(t)}},[e.current]),t};var en=n(16775),er=n(95482);let el=e=>{let{blob:t,className:n,canCopy:i,hideBlobActions:s,contentLength:a,children:o,...d}=e,{chatSideBarVisible:u,setChatSideBarVisible:f,isChatEnabled:h}=l.useContext(eL),[x]=(0,X.D)(),v=l.useRef(null),{activePath:m}=l.useContext(eL),{isCopied:g,copyToClipboard:j}=(0,ee.m)({timeout:2e3}),b=et(v),y=h&&x.value&&!u,w=a?(0,$.Z)(a):"",N=async()=>{if(!g&&t)try{let e=await t.text();j(e)}catch(e){c.A.error("Something went wrong. Please try again.")}};return(0,r.jsxs)("div",{className:(0,p.cn)("sticky -top-1 z-10 border",!b&&"rounded-t-lg",n),ref:v,...d,children:[b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-secondary pl-4",children:(0,r.jsx)(B,{className:"py-2"})}),b&&(0,r.jsx)(en.Z,{})]}),!s&&(0,r.jsxs)("div",{className:(0,p.cn)("flex items-center justify-between bg-secondary p-2 text-secondary-foreground",!b&&"rounded-t-lg"),children:[(0,r.jsxs)("div",{className:"flex h-8 items-center gap-4 leading-8",children:[o,(0,r.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:w})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,r.jsxs)(er.u,{children:[(0,r.jsx)(er.aJ,{asChild:!0,children:(0,r.jsxs)(E.z,{variant:"ghost",size:"icon",onClick:N,children:[g?(0,r.jsx)(I.IconCheck,{className:"text-green-600"}):(0,r.jsx)(I.IconCopy,{}),(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,r.jsx)(er._v,{children:"Copy raw file"})]}),!!t&&(0,r.jsxs)(er.u,{children:[(0,r.jsx)(er.aJ,{asChild:!0,children:(0,r.jsx)("a",{className:(0,E.d)({variant:"ghost",size:"icon"}),download:F(null!=m?m:""),href:URL.createObjectURL(t),children:(0,r.jsx)(I.IconDownload,{})})}),(0,r.jsx)(er._v,{children:"Download raw file"})]}),y&&(0,r.jsxs)(er.u,{children:[(0,r.jsx)(er.aJ,{asChild:!0,children:(0,r.jsxs)(E.z,{variant:"ghost",className:"flex shrink-0 items-center gap-1 px-2",onClick:e=>f(!u),children:[(0,r.jsx)(q(),{alt:"Tabby logo",src:Y.Z,width:24}),"Ask Tabby"]})}),(0,r.jsx)(er._v,{children:"Open chat panel"})]})]})]})]})};function ei(e){let{kind:t,fallback:n}=e;switch(t){case D.vW.Git:return(0,r.jsx)(I.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}});case D.vW.Github:return(0,r.jsx)(I.IconGitHub,{});case D.vW.Gitlab:return(0,r.jsx)(I.IconGitLab,{});default:return null!=n?n:null}}let es=e=>{let{className:t,loading:n,initialized:i}=e,{activePath:s,currentFileRoutes:a,setActivePath:o,fileTreeData:c}=l.useContext(eL),d=l.useMemo(()=>(function(e,t){if(!(null==e?void 0:e.length))return[];if(t){let{repositorySpecifier:n="",basename:r=""}=z(t),l=[n,...r.split("/")].filter(Boolean),i=e;for(let e=0;e<l.length;e++){let t=l.slice(0,e+1).join("/"),n=(0,G.Z)(i,e=>e.fullPath===t);if(null==n||!n.children)return[];i=null==n?void 0:n.children}return(null==i?void 0:i.map(e=>(0,V.Z)(e,"children")))||[]}{let t=e.map(e=>(0,V.Z)(e,"children"))||[];return t}})(c,s),[c,s]),[u]=(0,K.n)(n,300),f=(null==a?void 0:a.length)>0,h=()=>{var e;let t=null===(e=a[(null==a?void 0:a.length)-2])||void 0===e?void 0:e.fullPath;o(t)},x=e=>{o(e.fullPath)};return(0,r.jsxs)("div",{className:(0,p.cn)("text-base",t),children:[(0,r.jsx)(el,{blob:void 0,hideBlobActions:!0,className:"border-0"}),u||!i?(0,r.jsx)(ea,{}):(null==c?void 0:c.length)?(0,r.jsx)(J.iA,{children:(0,r.jsxs)(J.RM,{children:[f&&(0,r.jsx)(J.SC,{className:"cursor-pointer",onClick:e=>h(),children:(0,r.jsx)(J.pj,{className:"p-1 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(I.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}),(0,r.jsx)("span",{className:"px-1 py-2",children:".."})]})})}),(0,r.jsx)(r.Fragment,{children:d.map(e=>{var t;let n=e.isRepository,l=null===(t=e.repository)||void 0===t?void 0:t.kind;return(0,r.jsx)(J.SC,{children:(0,r.jsx)(J.pj,{className:"p-1 px-4 text-base",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:n?(0,r.jsx)(ei,{kind:l,fallback:(0,r.jsx)(I.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}):"dir"===e.file.kind?(0,r.jsx)(I.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(I.IconFile,{})}),(0,r.jsx)("span",{onClick:t=>x(e),className:"cursor-pointer px-1 py-2 hover:text-primary hover:underline",children:e.name})]})})},e.fullPath)})})]})}):(0,r.jsx)("div",{className:"flex justify-center py-8",children:"No indexed repository yet"})]})};function ea(){return(0,r.jsxs)("ul",{className:"space-y-3 p-2",children:[(0,r.jsx)(W.O,{}),(0,r.jsx)(W.O,{}),(0,r.jsx)(W.O,{}),(0,r.jsx)(W.O,{})]})}let eo=l.createContext({}),ec=e=>{let{onSelectTreeNode:t,children:n,activePath:l,fileMap:i,updateFileMap:s,expandedKeys:a,toggleExpandedKey:o,initialized:c,fileTreeData:d}=e;return(0,r.jsx)(eo.Provider,{value:{onSelectTreeNode:t,fileTreeData:d,expandedKeys:a,toggleExpandedKey:o,activePath:l,fileMap:i,updateFileMap:s,initialized:c},children:n})},ed=e=>{let{level:t}=e,n=l.useMemo(()=>Array(t).fill(1),[t]);return(0,r.jsx)("div",{className:"flex h-full shrink-0 items-stretch",children:n.map((e,t)=>(0,r.jsx)("div",{className:"flex h-8 w-2 border-r border-transparent transition-colors duration-300 group-hover/filetree:border-border"},t))})},eu=()=>(0,r.jsx)("div",{className:"absolute -left-2 h-8 w-1 rounded-md bg-primary"}),ef=e=>{let{isActive:t,level:n,children:l,className:i,...s}=e;return(0,r.jsxs)("div",{className:(0,p.cn)("relative flex h-8 cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",t&&"bg-accent",i),...s,children:[t&&(0,r.jsx)(eu,{}),(0,r.jsx)(ed,{level:n}),(0,r.jsxs)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:[(0,r.jsx)("div",{className:"h-4 w-4 shrink-0"}),l]})]})},eh=e=>{let{children:t,level:n,isActive:l,className:i,...s}=e;return(0,r.jsxs)("div",{className:(0,p.cn)("relative flex cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",l?"bg-accent text-accent-foreground":void 0,i),...s,children:[l&&(0,r.jsx)(eu,{}),(0,r.jsx)(ed,{level:n}),(0,r.jsx)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:t})]})},ex=e=>{let{node:t,level:n}=e,{onSelectTreeNode:i,activePath:s}=l.useContext(eo),a="file"===t.file.kind,o=t.fullPath===s;return(0,r.jsxs)(ef,{level:n,onClick:e=>{a&&(null==i||i(t))},isActive:o,children:[(0,r.jsx)(I.IconFile,{className:"shrink-0"}),(0,r.jsx)("div",{className:"truncate",children:null==t?void 0:t.name})]})},ev=e=>{var t,n,i;let{node:s,level:a,root:o}=e,{activeRepo:c}=l.useContext(eL),{fileMap:u,updateFileMap:f,expandedKeys:h,toggleExpandedKey:x,onSelectTreeNode:m,activePath:p}=l.useContext(eo),g=l.useRef(!1),j=l.useMemo(()=>{let e=null==c?void 0:c.kind,t=null==c?void 0:c.id;return e&&t?"".concat(e.toLowerCase(),"/").concat(t):""},[c]),{repositorySpecifier:b}=z(p),y=o?"":s.file.basename,w=h.has(s.fullPath),N="dir"===s.file.kind&&!(null==u?void 0:null===(t=u[s.fullPath])||void 0===t?void 0:t.treeExpanded)&&w,{data:k,isLoading:C}=(0,d.Z)(N?M("/repositories/".concat(j,"/resolve/").concat(y)):null,v.Z,{revalidateIfStale:!1});l.useEffect(()=>{var e;if(!g.current&&(null==k?void 0:null===(e=k.entries)||void 0===e?void 0:e.length)){let e=k.entries.reduce((e,t)=>{let n="".concat(b,"/").concat(t.basename);return{...e,[n]:{file:t,name:F(n),fullPath:n,treeExpanded:!1}}},{});f(e),g.current=!0}},[k]);let[S]=(0,K.n)(C,100),R=!!(null==s?void 0:null===(n=s.children)||void 0===n?void 0:n.length);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eh,{level:a,onClick:e=>{null==m||m(s)},isActive:p===s.fullPath,children:[(0,r.jsx)("div",{className:"flex h-8 shrink-0 items-center hover:bg-primary/10 hover:text-popover-foreground",onClick:e=>{S||(x(s.fullPath),e.stopPropagation())},children:S&&!g.current?(0,r.jsx)(I.IconSpinner,{}):w?(0,r.jsx)(I.IconChevronDown,{}):(0,r.jsx)(I.IconChevronRight,{})}),(0,r.jsx)("div",{className:"shrink-0",style:{color:"rgb(84, 174, 255)"},children:w?(0,r.jsx)(I.IconDirectoryExpandSolid,{}):(0,r.jsx)(I.IconDirectorySolid,{})}),(0,r.jsx)("div",{className:"truncate",children:null==s?void 0:s.name})]}),(0,r.jsx)(r.Fragment,{children:w&&R?(0,r.jsx)(r.Fragment,{children:null===(i=s.children)||void 0===i?void 0:i.map(e=>{let t=e.file.basename;return"dir"===e.file.kind?(0,r.jsx)(ev,{node:e,level:a+1},t):(0,r.jsx)(ex,{node:e,level:a+1},t)})}):null})]})},em=()=>{var e,t;let{initialized:n,activePath:i,fileMap:s,fileTreeData:o}=l.useContext(eo),{repositorySpecifier:c}=z(i),d=!!c,u=d&&!(null==o?void 0:o.length),f=i&&(null==s?void 0:null===(e=s[i])||void 0===e?void 0:e.isRepository)&&!(null==s?void 0:null===(t=s[i])||void 0===t?void 0:t.treeExpanded);return n?(0,a.Z)(s)?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Indexed repository"}):d?u?f?(0,r.jsx)(eg,{}):(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Data"}):(0,r.jsx)(r.Fragment,{children:null==o?void 0:o.map(e=>{var t;let n=(null==e?void 0:null===(t=e.file)||void 0===t?void 0:t.kind)==="file";return n?(0,r.jsx)(ex,{level:0,node:e},e.fullPath):(0,r.jsx)(ev,{level:0,node:e},e.fullPath)})}):null:(0,r.jsx)(eg,{})},ep=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,p.cn)("group/filetree",t),children:(0,r.jsx)(ec,{...n,children:(0,r.jsx)(em,{})})})};function eg(){return(0,r.jsxs)("div",{className:"space-y-3 p-2",children:[(0,r.jsx)(W.O,{}),(0,r.jsx)(W.O,{className:"ml-4"}),(0,r.jsx)(W.O,{className:"ml-4"}),(0,r.jsx)(W.O,{}),(0,r.jsx)(W.O,{className:"ml-4"})]})}var ej=n(70470),eb=n(99109),ey=n(58094),ew=n(35216);let eN=(0,u.BX)("\n  query RepositorySearch($kind: RepositoryKind!, $id: ID!, $pattern: String!) {\n    repositorySearch(kind: $kind, id: $id, pattern: $pattern) {\n      type\n      path\n      indices\n    }\n  }\n"),ek=e=>{let{className:t,...n}=e,{activePath:i,fileTreeData:s,setActivePath:a,initialized:o,updateFileMap:c,setExpandedKeys:d,repoMap:u,activeRepo:f}=(0,l.useContext)(eL),{setProgress:h}=(0,k.U)(),{repositoryKind:x,repositoryName:v,repositorySpecifier:m}=z(i),g=null==f?void 0:f.id,j=l.useRef(null),[b,y]=l.useState(),[w,N]=l.useState(),[C,S]=l.useState(),[R,A]=l.useState(!1),P=o&&!(null==s?void 0:s.length),[{data:_}]=(0,eb.aM)({query:eN,variables:{kind:x,id:g,pattern:null!=w?w:""},pause:!g||!x||!w});l.useEffect(()=>{var e,t;let n=null!==(t=null==_?void 0:null===(e=_.repositorySearch)||void 0===e?void 0:e.map(e=>({...e,id:e.path})))&&void 0!==t?t:[];S(n),A(!!w)},[null==_?void 0:_.repositorySearch]);let L=(0,K.S)(e=>{e?N(e):(N(""),A(!1),S([]))},500),O=()=>{L.run(""),L.flush()},D=async e=>{let t=e.path;if(!t)return;let n="".concat(m,"/").concat(t);try{h(!0);let e=await Z(n,m?null==u?void 0:u[m]:void 0),r=T(t),l={};for(let t of e){let e="".concat(m,"/").concat(t.basename);l[e]={file:t,name:F(e),fullPath:e,treeExpanded:r.includes(t.basename)}}let i=r.map(e=>[m,e].filter(Boolean).join("/"));l&&c(l),(null==i?void 0:i.length)&&d(e=>{let t=new Set(e);for(let e of i)t.add(e);return t})}catch(e){}finally{a(n),h(!1)}};return l.useEffect(()=>{let e=e=>{var t,n;let r=e.target,l=null==r?void 0:null===(t=r.tagName)||void 0===t?void 0:t.toLowerCase();"input"!==l&&"textarea"!==l&&"select"!==l&&"t"===e.key&&(e.preventDefault(),null===(n=j.current)||void 0===n||n.focus())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,r.jsxs)("div",{className:(0,p.cn)(t),...n,children:[(0,r.jsx)("div",{className:"py-4 font-bold leading-8",children:"Files"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(ey.Ph,{disabled:!o,onValueChange:e=>{a(e)},value:m,children:[(0,r.jsx)(ey.i4,{children:(0,r.jsx)(ey.ki,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(ei,{kind:x,fallback:(0,r.jsx)(I.IconFolderGit,{})})}),(0,r.jsx)("span",{className:(0,p.cn)("truncate",!v&&"text-muted-foreground"),children:v||"Pick a repository"})]})})}),(0,r.jsx)(ey.Bw,{className:"max-h-[50vh] overflow-y-auto",children:P?(0,r.jsx)(ey.Ql,{isPlaceHolder:!0,value:"",disabled:!0,children:"No indexed repository"}):(0,r.jsx)(r.Fragment,{children:null==s?void 0:s.map(e=>{var t;return(0,r.jsx)(ey.Ql,{value:e.fullPath,children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(ei,{kind:null==e?void 0:null===(t=e.repository)||void 0===t?void 0:t.kind,fallback:(0,r.jsx)(I.IconFolderGit,{})}),e.name]})},e.fullPath)})})})]}),(0,r.jsx)(ew.Vc,{stayOpenOnInputClick:!0,options:C,onSelect:D,open:R,onOpenChange:e=>{(b||(null==C?void 0:C.length))&&e?A(!0):A(!1)},children:e=>{let{highlightedIndex:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ew.JH,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(ew.KM,{className:"pr-8",placeholder:"Go to file",spellCheck:!1,value:b,ref:j,disabled:!v,onClick:e=>{w&&!R&&A(!0)},onChange:e=>{let t=e.target.value;y(t),t?L.run(t):O()}}),(0,r.jsx)("div",{className:"absolute right-2 top-0 flex h-full items-center",children:b?(0,r.jsx)(E.z,{variant:"ghost",size:"icon",className:"h-6 w-6 cursor-pointer",onClick:e=>{var t;y(""),O(),null===(t=j.current)||void 0===t||t.focus()},children:(0,r.jsx)(I.IconClose,{})}):(0,r.jsx)("kbd",{className:"rounded-md border bg-secondary/50 px-1.5 text-xs leading-4 text-muted-foreground shadow-[inset_-0.5px_-1.5px_0_hsl(var(--muted))]",onClick:e=>{var t;null===(t=j.current)||void 0===t||t.focus()},children:"t"})})]})}),(0,r.jsx)(ew.fD,{align:"start",side:"bottom",onOpenAutoFocus:e=>e.preventDefault(),style:{width:"50vw",maxWidth:700},className:"max-h-[50vh] overflow-y-auto",children:(0,r.jsx)(r.Fragment,{children:(null==C?void 0:C.length)?null==C?void 0:C.map((e,n)=>(0,r.jsxs)(ew.x5,{item:e,index:n,className:"flex w-full items-center gap-2 overflow-x-hidden",children:[(0,r.jsx)("div",{className:"shrink-0",children:"dir"===e.type?(0,r.jsx)(I.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(I.IconFile,{})}),(0,r.jsx)("div",{className:"flex-1 break-all",children:(0,r.jsx)(eC,{text:e.path,indices:e.indices})}),t===n&&(0,r.jsx)("div",{className:"shrink-0`",children:"dir"===e.type?"Go to folder":"Go to file"})]},null==e?void 0:e.id)):(0,r.jsx)("div",{className:"flex h-24 items-center justify-center",children:"No matches found"})})})]})}})]})]})},eC=e=>{let{text:t,indices:n}=e,i=l.useMemo(()=>new Set(n),[n]);return(0,r.jsx)("p",{className:"text-muted-foreground",children:t.split("").map((e,t)=>i.has(t)?(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e}):e)})},eS=()=>{let{activePath:e,setActivePath:t,expandedKeys:n,updateFileMap:i,toggleExpandedKey:s,initialized:a,fileTreeData:o,fileMap:c}=l.useContext(eL),d=l.useRef(null),u=function(e,t){var n,r;let[i,s]=(0,l.useState)(null!==(r=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==r?r:0);return(0,l.useEffect)(()=>{if(e.current){let n=(0,ej.Z)(()=>{var t,n;s(null!==(n=null===(t=e.current)||void 0===t?void 0:t.scrollTop)&&void 0!==n?n:0)},t,{leading:!0}),r=e.current;return r.addEventListener("scroll",n),()=>{r.removeEventListener("scroll",n)}}},[e,t]),i}(d,200),f=l.useMemo(()=>{var t;let{repositorySpecifier:n}=z(e),r=o.find(e=>e.fullPath===n);return null!==(t=null==r?void 0:r.children)&&void 0!==t?t:[]},[e,o]);return(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,r.jsx)(ek,{className:"shrink-0 px-4 pb-3"}),u>0&&(0,r.jsx)("div",{className:"h-0 border-b shadow-[0px_3px_8px_rgba(0,0,0,0.3)] dark:shadow-[0px_3px_8px_rgba(255,255,255,0.3)]"}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4",ref:d,children:(0,r.jsx)(ep,{onSelectTreeNode:e=>{t(e.fullPath)},activePath:e,fileMap:c,updateFileMap:i,expandedKeys:n,toggleExpandedKey:s,initialized:a,fileTreeData:f})})]})},eR=e=>{let{className:t,blob:n,isImage:i,contentLength:s}=e,{activePath:a}=(0,l.useContext)(eL);return(0,r.jsxs)("div",{className:(0,p.cn)(t),children:[(0,r.jsx)(el,{blob:n,contentLength:s}),(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 p-2 text-center",children:i?(0,r.jsx)("img",{className:"mx-auto",src:n?URL.createObjectURL(n):void 0}):(0,r.jsx)("a",{className:"text-primary hover:underline",download:F(null!=a?a:""),href:n?URL.createObjectURL(n):"",target:"_blank",children:"View raw"})})]})};var eE=n(67579);let eI=l.lazy(()=>Promise.all([n.e(8301),n.e(6401),n.e(3291),n.e(4647),n.e(3690)]).then(n.bind(n,63690))),eA=l.lazy(()=>Promise.all([n.e(352),n.e(4403),n.e(3109)]).then(n.bind(n,23109))),eP=e=>{var t;let{className:n,blob:i,contentLength:s}=e,{searchParams:a,updateSearchParams:o}=(0,f.Z)(),[c,d]=l.useState(""),{activePath:u}=(0,l.useContext)(eL),h=u?(0,x.U$)(u)[0]:void 0,v=null!=h?h:"plain",m=!!c&&"markdown"===v,g=(null===(t=a.get("plain"))||void 0===t?void 0:t.toString())==="1";return l.useEffect(()=>{let e=async e=>{try{let t=await e.text();d(t)}catch(e){d("")}};i&&e(i)},[i]),(0,r.jsxs)("div",{className:(0,p.cn)(n),children:[(0,r.jsx)(el,{blob:i,contentLength:s,canCopy:!0,children:m&&(0,r.jsx)(eE.mQ,{value:g?"1":"0",onValueChange:e=>{"1"===e?o({set:{plain:"1"}}):o({del:"plain"})},children:(0,r.jsxs)(eE.dr,{children:[(0,r.jsx)(eE.SP,{value:"0",children:"Preview"}),(0,r.jsx)(eE.SP,{value:"1",children:"Code"})]})})}),(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 py-2",children:(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)(N.cg,{}),children:m&&!g?(0,r.jsx)(eA,{value:c}):(0,r.jsx)(eI,{value:c,language:v})})})]})},e_=(0,u.BX)("\n  query RepositoryList {\n    repositoryList {\n      id\n      name\n      kind\n    }\n  }\n"),eL=l.createContext({}),eO=e=>{let{children:t}=e,{searchParams:n,updateSearchParams:i}=(0,f.Z)(),a=l.useMemo(()=>{var e,t;return null!==(t=null===(e=n.get("path"))||void 0===e?void 0:e.toString())&&void 0!==t?t:""},[n]),o=(0,h.xG)(),[c,d]=l.useState(!1),[u,x]=l.useState({}),[v,m]=l.useState({}),[p,g]=l.useState(new Set),[j,b]=l.useState(!1),[y,w]=l.useState(),N=l.useMemo(()=>{if(!a)return[];let e=[],t=a.split("/");for(let n=0;n<t.length;n++){let r=t.slice(0,n+1).join("/");e.push(null==u?void 0:u[r])}return(0,s.Z)(e)},[a,u]),k=l.useMemo(()=>(function e(t){if(!t.length)return[];for(let n of(t.sort((e,t)=>{let n="file"===e.file.kind?1:0,r="file"===t.file.kind?1:0;return n-r||e.name.localeCompare(t.name)}),t))(null==n?void 0:n.children)&&e(n.children);return t})(function(e){let t=[];if(!e)return t;let n=Object.keys(e);for(let r of n){let n=e[r],{repositorySpecifier:l="",basename:i=""}=z(r),s=[l,...null==i?void 0:i.split("/")].filter(Boolean),a=t;for(let e=0;e<s.length;e++){let t=s.slice(0,e+1).join("/"),l=null==a?void 0:a.find(e=>e.fullPath===t);if(l)a=l.children||[];else{let e={file:n.file,name:n.name,fullPath:r,children:[],isRepository:n.isRepository,repository:n.repository};a.push(e),a=e.children}}}return t}(u)),[u]),C=l.useMemo(()=>{let{repositoryKind:e,repositoryName:t,repositorySpecifier:n}=z(a);if(e&&t)return n?v[n]:void 0},[a,v]);return(0,r.jsx)(eL.Provider,{value:{initialized:c,setInitialized:d,activePath:a,setActivePath:(e,t)=>{e?i({set:{path:e},del:["plain","line"],replace:t}):i({del:["path","plain","line"],replace:t})},fileMap:u,updateFileMap:e=>{e&&x(t=>({...t,...e}))},expandedKeys:p,setExpandedKeys:g,toggleExpandedKey:e=>{let t=p.has(e),n=new Set(p);t?n.delete(e):n.add(e),g(n)},currentFileRoutes:N,fileTreeData:k,chatSideBarVisible:j,setChatSideBarVisible:b,pendingEvent:y,setPendingEvent:w,isChatEnabled:o,repoMap:v,setRepoMap:m,activeRepo:C},children:t})},eD=e=>{var t,n,i;let{className:s}=e,{activePath:a,setActivePath:u,updateFileMap:h,fileMap:x,initialized:m,setInitialized:g,setExpandedKeys:w,chatSideBarVisible:S,setChatSideBarVisible:R,setPendingEvent:E,setRepoMap:I,activeRepo:P}=l.useContext(eL),{updateSearchParams:_}=(0,f.Z)(),L=l.useRef(!1),{setProgress:O}=(0,k.U)(),D=l.useRef(null),[Z,G]=l.useState(35),V=l.useMemo(()=>{var e;let t=null==P?void 0:P.id,n=null==P?void 0:P.kind;return t&&n?"".concat(null===(e=P.kind)||void 0===e?void 0:e.toLowerCase(),"/").concat(t):""},[P]),K=l.useMemo(()=>{var e;return null===(e=z(a))||void 0===e?void 0:e.basename},[a]),[W,J]=l.useState(),Q=a&&(null==x?void 0:null===(n=x[a])||void 0===n?void 0:null===(t=n.file)||void 0===t?void 0:t.kind)==="file",q=a?null==x?void 0:null===(i=x[a])||void 0===i?void 0:i.file:void 0,Y=l.useMemo(()=>{var e,t,n;if(!m)return!1;let r=a&&(null==x?void 0:null===(t=x[a])||void 0===t?void 0:null===(e=t.file)||void 0===e?void 0:e.kind)==="dir";return r&&!(null==x?void 0:null===(n=x[a])||void 0===n?void 0:n.treeExpanded)},[a,x,m]),{data:$,isLoading:X}=(0,d.Z)(Q?M("/repositories/".concat(V,"/resolve/").concat(K)):null,e=>(0,v.Z)(e,{responseFormatter:async e=>{if(!e.ok)return;let t=(0,o.Z)(e.headers.get("Content-Length")),n=await e.blob();return{contentLength:t,blob:n}}}),{onError(e){c.A.error("Fail to fetch")}}),ee=null==$?void 0:$.blob,et=null==$?void 0:$.contentLength,{data:en,isLoading:er}=(0,d.Z)(Y?M("/repositories/".concat(V,"/resolve/").concat(K)):null,v.Z),el=(null==q?void 0:q.kind)==="dir"||""===a,ei=Q&&"text"===W,ea=Q&&("image"===W||"raw"===W);return l.useEffect(()=>{let e=async()=>{if(L.current)return;L.current=!0;let{patchMap:e,expandedKeys:t,repos:n}=await eF(a);if((null==n?void 0:n.length)&&!a){let e=U(null==n?void 0:n[0]);u(e,!0),L.current=!1;return}n&&I(H(n)),e&&h(e),(null==t?void 0:t.length)&&w(new Set(t)),g(!0)};m||e()},[a]),l.useEffect(()=>{!m||(er||X?O(!0):er||X||O(!1))},[er,X]),l.useEffect(()=>{(()=>{if(Array.isArray(null==en?void 0:en.entries)&&a){var e;let{repositorySpecifier:t}=z(a),n={};if((null==x?void 0:x[a])&&(n[a]={...x[a],treeExpanded:!0}),null==en?void 0:null===(e=en.entries)||void 0===e?void 0:e.length)for(let e of en.entries){let r="".concat(t,"/").concat(e.basename);n[r]={file:e,name:F(r),fullPath:r,treeExpanded:!1}}h(n);let r=T(a,!0);(null==r?void 0:r.length)&&w(e=>{let t=new Set(e);for(let e of r)t.add(e);return t})}})()},[en]),l.useEffect(()=>{let e=async()=>{let e=await eT(null!=a?a:"",ee);J(e)};Q?e():J("")},[a,Q,ee]),l.useEffect(()=>{let e=e=>{R(!0),E(e)};return C.u.on("code_browser_quick_action",e),()=>{C.u.off("code_browser_quick_action",e)}},[]),l.useEffect(()=>{var e,t,n;S?(null===(e=D.current)||void 0===e||e.expand(),null===(t=D.current)||void 0===t||t.resize(Z)):null===(n=D.current)||void 0===n||n.collapse()},[S]),l.useEffect(()=>{let e=e=>{if(e.origin!==window.origin||!e.data)return;let{data:t}=e;"navigateToContext"===t.action&&_({set:{path:t.path,line:t.line}})};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]),(0,r.jsxs)(j,{direction:"horizontal",className:(0,p.cn)(s),onLayout:e=>{(null==e?void 0:e[2])&&G(e[2])},children:[(0,r.jsx)(b,{defaultSize:20,minSize:20,maxSize:40,className:"hidden lg:block",children:(0,r.jsx)(eS,{})}),(0,r.jsx)(y,{className:"hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500 lg:block"}),(0,r.jsx)(b,{defaultSize:80,minSize:30,children:(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto px-4 pb-4",children:[(0,r.jsx)(B,{className:"py-4"}),m?(0,r.jsxs)("div",{children:[el&&(0,r.jsx)(es,{loading:er,initialized:m,className:"rounded-lg border"}),ei&&(0,r.jsx)(eP,{blob:ee,contentLength:et}),ea&&(0,r.jsx)(eR,{blob:ee,isImage:"image"===W,contentLength:et})]}):(0,r.jsx)(N.cg,{className:"rounded-lg border p-4"})]})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:(0,p.cn)("hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500",S&&"block")}),(0,r.jsx)(b,{collapsible:!0,collapsedSize:0,defaultSize:0,minSize:25,ref:D,onCollapse:()=>R(!1),children:(0,r.jsx)(A,{})})]})]})},ez=e=>{let[t]=(0,w.useShowDemoBanner)(),n=t?{height:"calc(100vh - ".concat(w.BANNER_HEIGHT,")")}:{height:"100vh"};return(0,r.jsx)(eO,{children:(0,r.jsx)("div",{className:"transition-all",style:n,children:(0,r.jsx)(eD,{className:"source-code-browser",...e})})})};async function eF(e){try{let{repositoryKind:r,repositoryName:l,basename:i,repositorySpecifier:s}=z(e),a=await t(),o=H(a),c=s?null==o?void 0:o[s]:void 0,d=e&&c?await n(e,o):[],u=e?T(i):[],f={};for(let e of a){let t=U(e);t&&(f[t]={file:{kind:"dir",basename:e.name},name:e.name,fullPath:t,treeExpanded:e.name===l&&e.kind===r,isRepository:!0,repository:e})}for(let e of d){let t="".concat(U({kind:r,name:l}),"/").concat(e.basename);f[t]={file:e,name:F(e.basename),fullPath:t,treeExpanded:u.includes(e.basename)}}let h=u.map(e=>[U(c),e].filter(Boolean).join("/"));return{patchMap:f,expandedKeys:h,repos:a}}catch(e){return console.error(e),{}}async function t(){let e=m.L.createRequestOperation("query",(0,i.h)(e_,{}));return m.L.executeQuery(e).then(e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.repositoryList)||[]})}async function n(e,t){let n=[];try{let{repositorySpecifier:r}=z(e);if(!(0,a.Z)(t)&&r){let l=t[r];if(!l)return n;let i=await Z(e,l);n=null!=i?i:[]}}catch(e){console.error(e)}return n}}async function eT(e,t){var n;if(!t)return"";let r=null==t?void 0:t.type,l=null===(n=(0,x.U$)(e))||void 0===n?void 0:n[0];if(null==r?void 0:r.startsWith("image"))return"image";if(l||(null==r?void 0:r.startsWith("text")))return"text";let i=await new Promise((e,n)=>{let r=t.slice(0,1024),l=new FileReader;l.onloadend=function(t){var n;if((null==t?void 0:null===(n=t.target)||void 0===n?void 0:n.readyState)===FileReader.DONE){let n=t.target.result;"string"!=typeof n?e(!1):/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/.test(n)?e(!1):e(!0)}},l.onerror=function(){e(!1)},l.readAsText(r,"UTF-8")});return i?"text":"raw"}},23977:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(60681);let l=(0,r.Z)()},33555:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var r=n(57437);n(2265);var l=n(77723),i=n(93023),s=n(84168);function a(e){let{className:t,value:n,...a}=e,{isCopied:o,copyToClipboard:c}=(0,l.m)({timeout:2e3});return n?(0,r.jsxs)(i.z,{variant:"ghost",size:"icon",className:t,onClick:()=>{o||c(n)},...a,children:[o?(0,r.jsx)(s.IconCheck,{className:"text-green-600"}):(0,r.jsx)(s.IconCopy,{}),(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]}):null}},57594:function(e,t,n){"use strict";n.r(t),n.d(t,{BANNER_HEIGHT:function(){return d},DemoBanner:function(){return x},ShowDemoBannerProvider:function(){return f},useShowDemoBanner:function(){return h}});var r=n(57437),l=n(2265),i=n(24144),s=n(1589),a=n(19567),o=n(39311),c=n(84168);let d="3.5rem",u=l.createContext({}),f=e=>{let{children:t}=e,n=(0,a.UA)(),[s,o]=l.useState(!1);return l.useEffect(()=>{let e=window.self!==window.top;e||(0,i.Z)(n)||o(n)},[n]),(0,r.jsx)(u.Provider,{value:{isShowDemoBanner:s,setIsShowDemoBanner:o},children:t})};function h(){let{isShowDemoBanner:e,setIsShowDemoBanner:t}=l.useContext(u);return[e,t]}function x(){let[e,t]=h(),{data:n}=(0,s.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:d}:{height:0},children:[(0,r.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC6"}),(0,r.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,r.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,r.jsx)(c.IconGithub,{}),(0,r.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,r.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":n,"h-0 opacity-0":!n}),children:[(0,r.jsx)(c.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.stargazers_count}),(0,r.jsx)(c.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.forks_count})]})]})]}),(0,r.jsx)(c.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>t(!1)})]})]})}},35216:function(e,t,n){"use strict";n.d(t,{JH:function(){return x},KM:function(){return m},Vc:function(){return j},fD:function(){return p},rG:function(){return v},x5:function(){return g}});var r=n(57437),l=n(2265),i=n(92402),s=n(24144),a=n(53587),o=n(39338),c=n(39311),d=n(25831),u=n(51908);let f=l.createContext({}),h=d.xp,x=l.forwardRef((e,t)=>(0,r.jsx)(d.tW,{...e,ref:t}));x.displayName="SearchableSelectAnchor";let v=l.forwardRef((e,t)=>{let{getInputProps:n}=l.useContext(f),{onKeyDown:i,onChange:c,onInput:d,onBlur:u,onClick:h,...x}=e;return(0,r.jsx)(o.Z,{...n((0,a.Z)({onKeyDown:i,onChange:c,onInput:d,onBlur:u,onClick:h,ref:t},s.Z)),...x})});v.displayName="SearchableSelectTextarea";let m=l.forwardRef((e,t)=>{let{getInputProps:n}=l.useContext(f),{onKeyDown:i,onChange:o,onInput:c,onBlur:d,onClick:h,...x}=e;return(0,r.jsx)(u.I,{...n((0,a.Z)({onKeyDown:i,onChange:o,onInput:c,onBlur:d,onClick:h,ref:t},s.Z)),...x})});m.displayName="SearchableSelectInput";let p=l.forwardRef((e,t)=>{let{children:n,style:i,popupMatchAnchorWidth:s,...a}=e,{getMenuProps:o,anchorRef:c}=l.useContext(f),u=l.useRef(void 0);return l.useLayoutEffect(()=>{if(s){let e=c.current;if(e){let t=e.getBoundingClientRect();u.current=t.width}}},[]),(0,r.jsx)(d.i9,{children:(0,r.jsx)(d.yk,{align:"start",onOpenAutoFocus:e=>e.preventDefault(),style:{width:u.current,...i},...o({ref:t},{suppressRefError:!0}),...a,children:n})})});p.displayName="SearchableSelectContent";let g=l.forwardRef((e,t)=>{let{item:n,index:i,className:s,children:a,disabled:o,...d}=e,{highlightedIndex:u,selectedItem:x,getItemProps:v}=l.useContext(f),m=u===i,p=x===n;return(0,r.jsx)(h,{asChild:!0,children:(0,r.jsx)("div",{className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",m&&"bg-accent text-accent-foreground",p&&"font-bold",o&&"pointer-events-none opacity-50",s),...v({item:n,index:i,onMouseLeave:e=>e.preventDefault(),onMouseOut:e=>e.preventDefault()}),...d,children:"function"==typeof a?a({highlighted:m,selected:p}):a})},n.id)});function j(e){let{options:t,onSelect:n,children:a,open:o,onOpenChange:c,stayOpenOnInputClick:u}=e,h=l.useRef(null),x=l.useCallback((e,t)=>{let{type:n,changes:r}=t;switch(n){case i.Kb.stateChangeTypes.MenuMouseLeave:return{...r,highlightedIndex:e.highlightedIndex};case i.Kb.stateChangeTypes.InputClick:let l=!!u||r.isOpen;return{...r,isOpen:l};default:return r}},[u]),v=(0,i.Kb)({items:null!=t?t:[],defaultIsOpen:o,onSelectedItemChange(e){let{selectedItem:t}=e;t&&(null==n||n(t),null==c||c(!1))},onIsOpenChange:e=>{let{isOpen:t}=e;null==c||c(!!t)},stateReducer:x}),{setHighlightedIndex:m,highlightedIndex:p}=v,g=(0,s.Z)(o)?v.isOpen:v.isOpen&&o;l.useEffect(()=>{g&&(null==t?void 0:t.length)&&-1===p&&m(0)},[g,t]);let j=l.useMemo(()=>({...v,open:g,anchorRef:h}),[v,g,h]);return(0,r.jsx)(f.Provider,{value:j,children:(0,r.jsx)(d.J2,{open:g,children:"function"==typeof a?a(j):a})})}g.displayName="SearchableSelectOption"},30522:function(e,t,n){"use strict";n.d(t,{J:function(){return d},U:function(){return u}});var r=n(57437),l=n(2265),i=n(6435),s=n(16450),a=n.n(s),o=n(12897);let c=l.createContext({}),d=e=>{let{children:t}=e,[n,s]=l.useState(!1),[d]=(0,o.n)(n,300,{leading:!0}),{theme:u}=(0,i.F)();return l.useEffect(()=>{a().config({barColors:{0:"dark"===u?"#DC981A":"#B7942B"}})},[]),(0,r.jsxs)(c.Provider,{value:{progress:d,setProgress:s},children:[d&&(0,r.jsx)(a(),{}),t]})},u=()=>l.useContext(c)},51908:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(57437),l=n(2265),i=n(39311);let s=l.forwardRef((e,t)=>{let{className:n,type:l,...s}=e;return(0,r.jsx)("input",{type:l,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...s})});s.displayName="Input"},25831:function(e,t,n){"use strict";n.d(t,{J2:function(){return a},i9:function(){return d},tW:function(){return u},xo:function(){return o},xp:function(){return c},yk:function(){return f}});var r=n(57437),l=n(2265),i=n(65050),s=n(39311);let a=i.fC,o=i.xz,c=i.x8,d=i.h_,u=i.ee,f=l.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...a}=e;return(0,r.jsx)(i.VY,{ref:t,sideOffset:l,className:(0,s.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})});f.displayName=i.VY.displayName},58094:function(e,t,n){"use strict";n.d(t,{Bw:function(){return f},DI:function(){return c},Ph:function(){return o},Ql:function(){return x},U$:function(){return v},i4:function(){return u},ki:function(){return d}});var r=n(57437),l=n(2265),i=n(6155),s=n(39311),a=n(84168);let o=i.fC,c=i.ZA,d=i.B4,u=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsxs)(i.xz,{ref:t,className:(0,s.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...o,children:[l,(0,r.jsx)(i.JO,{asChild:!0,children:(0,r.jsx)(a.IconChevronUpDown,{className:"opacity-50"})})]})});u.displayName=i.xz.displayName;let f=l.forwardRef((e,t)=>{let{className:n,children:l,position:a="popper",...o}=e;return(0,r.jsx)(i.h_,{children:(0,r.jsx)(i.VY,{ref:t,className:(0,s.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===a&&"translate-y-1",n),position:a,...o,children:(0,r.jsx)(i.l_,{className:(0,s.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});f.displayName=i.VY.displayName;let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.__,{ref:t,className:(0,s.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...l})});h.displayName=i.__.displayName;let x=l.forwardRef((e,t)=>{let{className:n,children:l,isPlaceHolder:o,...c}=e;return(0,r.jsxs)(i.ck,{ref:t,className:(0,s.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[!o&&(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(a.IconCheck,{className:"h-4 w-4"})})}),(0,r.jsx)(i.eT,{children:l})]})});x.displayName=i.ck.displayName;let v=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.Z0,{ref:t,className:(0,s.cn)("-mx-1 my-1 h-px bg-muted",n),...l})});v.displayName=i.Z0.displayName},32553:function(e,t,n){"use strict";n.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return s},pj:function(){return f},ss:function(){return u},xD:function(){return a}});var r=n(57437),l=n(2265),i=n(39311);let s=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",n),...l})});s.displayName="Table";let a=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",n),...l})});a.displayName="TableHeader";let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",n),...l})});o.displayName="TableBody";let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...l})});c.displayName="TableFooter";let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...l})});d.displayName="TableRow";let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...l})});u.displayName="TableHead";let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...l})});f.displayName="TableCell";let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",n),...l})});h.displayName="TableCaption"},67579:function(e,t,n){"use strict";n.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return a},nU:function(){return d}});var r=n(57437),l=n(2265),i=n(34522),s=n(39311);let a=i.fC,o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...l})});o.displayName=i.aV.displayName;let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...l})});c.displayName=i.xz.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...l})});d.displayName=i.VY.displayName},95482:function(e,t,n){"use strict";n.d(t,{_v:function(){return d},aJ:function(){return c},pn:function(){return a},u:function(){return o}});var r=n(57437),l=n(2265),i=n(98567),s=n(39311);let a=i.zt,o=i.fC,c=i.xz,d=l.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...a}=e;return(0,r.jsx)(i.VY,{ref:t,sideOffset:l,className:(0,s.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...a})});d.displayName=i.VY.displayName},20946:function(e,t,n){"use strict";n.d(t,{B:function(){return a},D:function(){return o}});var r=n(2265);let l=(e,t)=>{let[n,l]=(0,r.useState)(t),[i,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&l(JSON.parse(t)),s(!1)},[]),[n,t=>{l(t),localStorage.setItem(e,JSON.stringify(t))},i]};class i{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}let s=new class{defineGlobalVar(){return new i(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=l(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!0),a=s.defineGlobalVar(),o=s.defineHook()},77723:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(2265),l=n(2390),i=n.n(l),s=n(71424);function a(e){let{timeout:t=2e3,onError:n}=e,[l,a]=r.useState(!1),o=()=>{a(!0),setTimeout(()=>{a(!1)},t)},c=e=>{if("function"==typeof n){null==n||n(e);return}s.A.error("Failed to copy.")};return{isCopied:l,copyToClipboard:e=>{var t;if(e){if(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)navigator.clipboard.writeText(e).then(o).catch(c);else{let t=i()(e);t?o():c()}}}}}},86274:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(2265);let l=!0;function i(){let[e,t]=r.useState(()=>!l);return r.useEffect(function(){l=!1,t(!0)},[]),e}},52485:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(24033);function l(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)();return{pathname:e,router:t,searchParams:n,updateSearchParams:r=>{let{set:l,del:i,replace:s}=r,a=new URLSearchParams(n);l&&Object.entries(l).forEach(e=>{let[t,n]=e;return a.set(t,n)}),i&&(Array.isArray(i)?i.forEach(e=>a.delete(e)):a.delete(i));let o=a.toString(),c="".concat(e).concat(o.length>0?"?".concat(o):"");s?t.replace(c):t.push(c)},getQueryString:e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""}}}},24043:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(2265),l=n(86274);let i=(e,t)=>{let n=(0,l.U)(),i=e(e=>null==e?void 0:e._hasHydrated),s=e(t),[a,o]=r.useState(n&&i?s:void 0);return r.useEffect(()=>{o(s)},[s]),a}},60838:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(94660),l=n(74810),i=n(39311);let s=["_hasHydrated","setHasHydrated","activeChatId"],a={_hasHydrated:!1,chats:void 0,activeChatId:(0,i.x0)()},o=(0,r.Ue)()((0,l.tJ)(e=>({...a,setHasHydrated:t=>{e({_hasHydrated:t})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!s.includes(t)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},1592:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(18398),l=n(34084),i=n(53771),s=n(58001),a=n(37004);async function o(e,t){var n;let r=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;if(function(e){var t;if(e.startsWith("/oauth/providers"))return!1;let n=null===(t=(0,a.bW)())||void 0===t?void 0:t.accessToken;if(!n)return!0;try{let{exp:e}=(0,i.o)(n);return(0,a.pw)(e)}catch(e){return!0}}(e))return a.gN.refreshToken(c).then(n=>f(e,t));let l=await r(e,d(t));return 401===l.status?a.gN.refreshToken(c).then(n=>f(e,t)):h(l,t)}async function c(){var e,t;let n=null===(e=(0,a.bW)())||void 0===e?void 0:e.refreshToken;if(!n)return;let r=await u(n);return null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.refreshToken}function d(e){var t;let n=new Headers(null==e?void 0:e.headers);return n.append("authorization","Bearer ".concat(null===(t=(0,a.bW)())||void 0===t?void 0:t.accessToken)),{...e||{},headers:n}}async function u(e){let t=new r.KU({url:"/graphql",requestPolicy:"network-only",exchanges:[r.Ek]}),n=t.createRequestOperation("mutation",(0,l.h)(s.Dp,{refreshToken:e}));return t.executeMutation(n)}function f(e,t){var n;let r=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;return r(e,d(t)).then(e=>h(e,t))}function h(e,t){return(null==e?void 0:e.ok)?(null==t?void 0:t.responseFormatter)?t.responseFormatter(e):(null==t?void 0:t.responseFormat)==="blob"?e.blob():e.json():(null==t?void 0:t.errorHandler)?t.errorHandler(e):void 0}},66566:function(e,t){"use strict";t.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[768,9109,584,7166,2699,1424,7070,3714,7463,8579,713,2453,6155,5050,1408,4522,1426,6676,7753,4168,2445,1644,2971,7864,1744],function(){return e(e.s=51848)}),_N_E=e.O()}]);
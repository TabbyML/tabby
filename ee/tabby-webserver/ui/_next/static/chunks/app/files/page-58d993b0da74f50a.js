(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{4755:function(e,t,n){Promise.resolve().then(n.bind(n,84109))},84109:function(e,t,n){"use strict";n.r(t),n.d(t,{SourceCodeBrowser:function(){return e4},SourceCodeBrowserContext:function(){return e$}});var r,l,i=n(36164),a=n(3546),s=n(11978),o=n(57778),d=n(1853),c=n(94909),u=n(91971),f=n(21454),h=n(43240),m=n(44645),v=n(80605),p=n(63484),x=n(3765),g=n(11634),b=n(74248),y=n(6618);let j=e=>{let{className:t,...n}=e;return(0,i.jsx)(y.eh,{className:(0,b.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},N=y.s_,w=e=>{let{withHandle:t,className:n,...r}=e;return(0,i.jsx)(y.OT,{className:(0,b.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...r,children:t&&(0,i.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})};var k=n(30601),S=n(90379),C=n(38736),R=n(27064),E=n(826),T=n(74630),I=n(18452),O=n(16784),_=n(98454),A=n(25647),P=n(17451),D=n(31458),Z=n(81565),F=n(5035),z=n(64220),L=n(49122),M=n(18500);(r=l||(l={})).NOT_FOUND="NOT_FOUND",r.INCORRECT_VIEW_MODE="INCORRECT_VIEW_MODE",r.EMPTY_REPOSITORY="EMPTY_REPOSITORY";let U=Object.keys(M.vW).map(e=>H(e));function H(e){return e.toLowerCase().replaceAll("_","")}function G(e){let t,n,r;let l={};if(!e)return l;let i=e.indexOf("/-/"),a=e.split("/"),s=a[0],o=U.includes(s);if(!o||-1===i)return l;let d=M.vW.Git;switch(s){case"git":d=M.vW.Git;break;case"github":d=M.vW.Github;break;case"gitlab":d=M.vW.Gitlab;break;case"githubselfhosted":d=M.vW.GithubSelfHosted;break;case"gitlabselfhosted":d=M.vW.GitlabSelfHosted}let c=e.indexOf("/-/tree/"),u=e.indexOf("/-/blob/");if(c>-1){n="tree";let l=e.slice(c+8),i=l.split("/");r=i[0],t=(0,L.Z)(i.slice(1).join("/"),"/")}if(u>-1){n="blob";let l=e.slice(u+8),i=l.split("/");r=i[0],t=(0,L.Z)(i.slice(1).join("/"),"/")}let f=e.split("/-/")[0],h=f.split("/").slice(1).join("/");return{repositorySpecifier:e.split("/-/")[0],repositoryName:h,repositoryKind:d,rev:r,viewMode:n,basename:t}}function V(e){if(!e)return"";let t=e.split("/");return t[t.length-1]}function W(e,t){if((0,T.Z)(e))return[];let n=[""],r=e.split("/"),l=t?r.length:r.length-1;for(let e=0;e<l;e++)n.push(r.slice(0,e+1).join("/"));return n}function Y(e){if((null==e?void 0:e.kind)&&(null==e?void 0:e.name))return"".concat(H(e.kind),"/").concat(e.name)}function B(e){let t=(0,z.Z)(e,e=>e);return t.sort((e,t)=>e.name.localeCompare(t.name)),t}function q(e){if(!e)return{ref:""};let t=e.match(/refs\/(\w+)\/(.*)/);if(t){let n="tags"===t[1]?"tag":"branch";return{kind:n,name:encodeURIComponent(t[2]),ref:e}}return{ref:e}}function Q(e){let t,n,r,l;for(let i of e)"refs/heads/main"===i?t=i:"refs/heads/master"===i?n=i:!r&&i.startsWith("refs/heads/")?r=i:!l&&i.startsWith("refs/tags/")&&(l=i);return t||n||r||l}function K(e,t,n,r){let l=Y(e),i=null!=t?t:"main";return"".concat(l,"/-/").concat("dir"===r?"tree":"blob","/").concat(i,"/").concat(n.split("/").map(e=>encodeURIComponent(e)).join("/"))}function J(e,t,n){let r=null==e?void 0:e.id,l=null==e?void 0:e.kind;if(!r||!l||!t)return null;let i="".concat(H(l),"/").concat(r);return"/repositories/".concat(i,"/rev/").concat(t,"/").concat(null!=n?n:"")}let $=e=>{let{className:t,...n}=e,[{data:r}]=(0,_.P)(),{pendingEvent:l,setPendingEvent:s,repoMap:o,activeRepoRef:d,updateActivePath:c}=a.useContext(e$),u=(0,A.o)(P.a,e=>e.activeChatId),f=a.useRef(null),h=(0,O.d)(o),m=(0,O.d)(d),v=async e=>{if((null==e?void 0:e.filepath)&&(null==e?void 0:e.git_url)){var t,n,r;let l=null==e?void 0:null===(t=e.range)||void 0===t?void 0:t.start,i=h.current,a=(0,E.Z)(Object.keys(i),t=>{var n;return(null==i?void 0:null===(n=i[t])||void 0===n?void 0:n.gitUrl)===e.git_url});if(a){let t=i[a];if(t){let i=Q(t.refs),a=(null==m?void 0:null===(n=m.current)||void 0===n?void 0:n.name)||(null===(r=q(null!=i?i:""))||void 0===r?void 0:r.name);c(K(t,a,e.filepath,e.kind),{params:{line:(0,T.Z)(l)?"":String(l)},replace:!0});return}}}},p=(0,I.m)(f,{navigate:v}),x=e=>{let{action:t}=e,n="";switch(t){case"explain":n="Explain the selected code:";break;case"generate_unittest":n="Generate a unit test for the selected code:";break;case"generate_doc":n="Generate documentation for the selected code:"}return n};return(a.useEffect(()=>{(null==f?void 0:f.current)&&r&&(null==p||p.init({fetcherOptions:{authorization:r.me.authToken}}))},[null==f?void 0:f.current,p,r]),a.useEffect(()=>{if(l&&p){let{lineFrom:e,lineTo:t,code:n,path:r,gitUrl:i}=l;p.sendMessage({message:x(l),selectContext:{kind:"file",content:n,range:{start:e,end:null!=t?t:e},filepath:r,git_url:i}})}s(void 0)},[l,p]),null==r?void 0:r.me)?(0,i.jsxs)("div",{className:(0,b.cn)("flex h-full flex-col",t),...n,children:[(0,i.jsx)(X,{}),(0,i.jsx)("iframe",{src:"/chat",className:"w-full flex-1 border-0",ref:f},u)]}):(0,i.jsx)(i.Fragment,{})};function X(){let{setChatSideBarVisible:e}=a.useContext(e$);return(0,i.jsx)("div",{className:"sticky top-0 flex items-center justify-end px-2 py-1",children:(0,i.jsx)(D.z,{size:"icon",variant:"ghost",onClick:t=>e(!1),children:(0,i.jsx)(Z.IconClose,{})})})}let ee=e=>{let{className:t,error:n}=e,r=(null==n?void 0:n.message)===(null==l?void 0:l.EMPTY_REPOSITORY),a="Not found";return r&&(a="Empty repository"),(0,i.jsx)("div",{className:(0,b.cn)("flex min-h-[30vh] items-center justify-center",t),children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)(Z.IconFileSearch,{className:"mb-2 h-10 w-10"}),(0,i.jsx)("div",{className:"text-2xl font-semibold",children:a})]})})};var et=n(70652),en=n.n(et),er=n(48537);let el=e=>{let{className:t}=e,{currentFileRoutes:n,activeRepo:r,activeRepoRef:l,activeEntryInfo:s}=a.useContext(e$),o=null==s?void 0:s.basename,d=a.useMemo(()=>{var e;let t=null==s?void 0:s.basename,n=[{name:null!==(e=null==s?void 0:s.repositoryName)&&void 0!==e?e:"",href:K(r,null==l?void 0:l.name,"","dir")}];if(t){let e=(null==t?void 0:t.split("/"))||[];for(let t=0;t<e.length;t++){let i=e.slice(0,t+1).join("/"),a=V(i);n.push({name:decodeURIComponent(a),href:K(r,null==l?void 0:l.name,i,"dir")})}}return n},[s,r,l]);return(0,i.jsxs)("div",{className:(0,b.cn)("flex flex-nowrap items-center gap-1",t),children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 overflow-x-auto leading-8",children:[(0,i.jsx)(en(),{className:"cursor-pointer font-medium text-primary hover:underline",href:"/files",children:"Repositories"}),(0,i.jsx)("div",{children:"/"}),null==d?void 0:d.map((e,t)=>{let n=0===t&&(null==d?void 0:d.length)>1,r=t===d.length-1,l=(0,b.cn)("whitespace-nowrap",n||r?"font-bold":"font-medium",r?"":"cursor-pointer text-primary hover:underline",n?"hover:underline":void 0);return(0,i.jsxs)(a.Fragment,{children:[r?(0,i.jsx)("div",{className:l,children:e.name}):(0,i.jsx)(en(),{className:l,href:"/files/".concat(e.href),children:e.name}),!r&&(0,i.jsx)("div",{children:"/"})]},e.href)})]}),!!(null==n?void 0:n.length)&&!!o&&(0,i.jsx)(er.q,{className:"shrink-0",value:o})]})};var ei=n(6495),ea=n(24449),es=n(3448),eo=n(99047),ed=n(42891),ec=n.n(ed),eu=n(23342),ef=n(91655),eh=n(2578),em=n(93877),ev=n(28312);let ep=e=>{let[t,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=e.current,r=new IntersectionObserver(e=>{let[t]=e;n(t.intersectionRatio<1)},{threshold:[1]});return t&&r.observe(t),()=>{t&&r.unobserve(t)}},[e.current]),t};var ex=n(11208),eg=n(29);let eb=e=>{let{blob:t,className:n,canCopy:r,hideBlobActions:l,contentLength:s,children:o,...d}=e,{chatSideBarVisible:c,setChatSideBarVisible:u,isChatEnabled:f}=a.useContext(e$),[h]=(0,em.Ds)(),m=a.useRef(null),{activePath:v}=a.useContext(e$),{isCopied:p,copyToClipboard:x}=(0,ev.m)({timeout:2e3}),g=ep(m),y=f&&h.value&&!c,j=s?(0,ef.Z)(s):"",N=async()=>{if(!p&&t)try{let e=await t.text();x(e)}catch(e){eh.A.error("Something went wrong. Please try again.")}};return(0,i.jsxs)("div",{className:(0,b.cn)("sticky -top-1 z-10 border",!g&&"rounded-t-lg",n),ref:m,...d,children:[g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"bg-secondary pl-4",children:(0,i.jsx)(el,{className:"py-2"})}),g&&(0,i.jsx)(ex.Z,{})]}),!l&&(0,i.jsxs)("div",{className:(0,b.cn)("flex items-center justify-between bg-secondary p-2 text-secondary-foreground",!g&&"rounded-t-lg"),children:[(0,i.jsxs)("div",{className:"flex h-8 items-center gap-4 leading-8",children:[o,(0,i.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:j})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsxs)(D.z,{variant:"ghost",size:"icon",onClick:N,children:[p?(0,i.jsx)(Z.IconCheck,{className:"text-green-600"}):(0,i.jsx)(Z.IconCopy,{}),(0,i.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,i.jsx)(eg._v,{children:"Copy raw file"})]}),!!t&&(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsx)("a",{className:(0,D.d)({variant:"ghost",size:"icon"}),download:V(null!=v?v:""),href:URL.createObjectURL(t),children:(0,i.jsx)(Z.IconDownload,{})})}),(0,i.jsx)(eg._v,{children:"Download raw file"})]}),y&&(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsxs)(D.z,{variant:"ghost",className:"flex shrink-0 items-center gap-1 px-2",onClick:e=>u(!c),children:[(0,i.jsx)(ec(),{alt:"Tabby logo",src:eu.Z,width:24}),"Ask Tabby"]})}),(0,i.jsx)(eg._v,{children:"Open chat panel"})]})]})]})]})};function ey(e){let{kind:t,fallback:n}=e;switch(t){case M.vW.Git:return(0,i.jsx)(Z.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}});case M.vW.Github:case M.vW.GithubSelfHosted:return(0,i.jsx)(Z.IconGitHub,{});case M.vW.Gitlab:case M.vW.GitlabSelfHosted:return(0,i.jsx)(Z.IconGitLab,{});default:return null!=n?n:null}}let ej=e=>{var t,n;let{className:r,loading:l,initialized:s}=e,{activePath:o,currentFileRoutes:d,fileTreeData:u,activeRepo:f,activeRepoRef:h,repoMap:m,activeEntryInfo:v}=a.useContext(e$),p=a.useMemo(()=>(0,c.Z)(m)||f?function(e,t){if(!(null==e?void 0:e.length))return[];if(t){let{basename:n=""}=G(t);if(!n)return e;let r=n.split("/"),l=e;for(let e=0;e<r.length;e++){let t=r.slice(0,e+1).join("/"),n=(0,E.Z)(l,e=>e.fullPath===t);if(null==n||!n.children)return[];l=null==n?void 0:n.children}return(null==l?void 0:l.map(e=>(0,ei.Z)(e,"children")))||[]}{let t=e.map(e=>(0,ei.Z)(e,"children"))||[];return t}}(u,o):B(m).map(e=>{var t,n;return{file:{basename:e.name,kind:"dir"},isRepository:!0,repository:e,fullPath:K(e,null===(t=q(null!==(n=Q(e.refs))&&void 0!==n?n:"refs/heads/main"))||void 0===t?void 0:t.name,"","dir"),name:e.name}}),[u,o,f,m]),[x]=(0,ea.n)(l,300),g=!!(null==v?void 0:v.basename),y=d[(null==d?void 0:d.length)-2];return(0,i.jsxs)("div",{className:(0,b.cn)("text-base",r),children:[(0,i.jsx)(eb,{blob:void 0,hideBlobActions:!0,className:"border-0"}),(!x||(null==p?void 0:p.length))&&s?(null==p?void 0:p.length)?(0,i.jsx)(eo.iA,{children:(0,i.jsxs)(eo.RM,{children:[g&&(0,i.jsx)(eo.SC,{className:"cursor-pointer",children:(0,i.jsx)(eo.pj,{className:"p-1 px-4",children:(0,i.jsx)(en(),{href:"/files/".concat(K(f,null==h?void 0:h.name,null==y?void 0:null===(t=y.file)||void 0===t?void 0:t.basename,null==y?void 0:null===(n=y.file)||void 0===n?void 0:n.kind)),children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(Z.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}),(0,i.jsx)("span",{className:"px-1 py-2",children:".."})]})})})}),(0,i.jsx)(i.Fragment,{children:p.map(e=>{var t;let n=e.isRepository,r=null===(t=e.repository)||void 0===t?void 0:t.kind;return(0,i.jsx)(eo.SC,{children:(0,i.jsx)(eo.pj,{className:"p-1 px-4 text-base",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"shrink-0",children:n?(0,i.jsx)(ey,{kind:r,fallback:(0,i.jsx)(Z.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}):"dir"===e.file.kind?(0,i.jsx)(Z.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,i.jsx)(Z.IconFile,{})}),(0,i.jsx)(en(),{href:n?"/files/".concat(e.fullPath):"/files/".concat(K(null!=f?f:e.repository,null==h?void 0:h.name,e.file.basename,e.file.kind)),className:"cursor-pointer px-1 py-2 hover:text-primary hover:underline",children:e.name})]})})},e.fullPath)})})]})}):(0,c.Z)(m)?(0,i.jsx)("div",{className:"flex justify-center py-8",children:"No indexed repository yet"}):null:(0,i.jsx)(eN,{})]})};function eN(){return(0,i.jsxs)("ul",{className:"space-y-3 p-2",children:[(0,i.jsx)(es.O,{}),(0,i.jsx)(es.O,{}),(0,i.jsx)(es.O,{}),(0,i.jsx)(es.O,{})]})}var ew=n(76297),ek=n(36327);let eS=a.createContext({}),eC=e=>{let{onSelectTreeNode:t,children:n,activePath:r,fileMap:l,updateFileMap:a,expandedKeys:s,toggleExpandedKey:o,initialized:d,fileTreeData:c,fetchingTreeEntries:u}=e;return(0,i.jsx)(eS.Provider,{value:{onSelectTreeNode:t,fileTreeData:c,expandedKeys:s,toggleExpandedKey:o,activePath:r,fileMap:l,updateFileMap:a,initialized:d,fetchingTreeEntries:u},children:n})},eR=e=>{let{level:t}=e,n=a.useMemo(()=>Array(t).fill(1),[t]);return(0,i.jsx)("div",{className:"flex h-full shrink-0 items-stretch",children:n.map((e,t)=>(0,i.jsx)("div",{className:"flex h-8 w-2 border-r border-transparent transition-colors duration-300 group-hover/filetree:border-border"},t))})},eE=()=>{let{ref:e,entry:t,inView:n}=(0,ew.YD)({trackVisibility:!0,delay:500});return a.useEffect(()=>{if((null==t?void 0:t.target)&&!n){var e;null==t||null===(e=t.target)||void 0===e||e.scrollIntoView({block:"center"})}},[null==t?void 0:t.target]),(0,i.jsx)("div",{ref:e,className:"absolute -left-2 h-8 w-1 rounded-md bg-primary"})},eT=e=>{let{isActive:t,level:n,children:r,className:l,...a}=e;return(0,i.jsxs)("div",{className:(0,b.cn)("relative flex h-8 cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",t&&"bg-accent",l),...a,children:[t&&(0,i.jsx)(eE,{}),(0,i.jsx)(eR,{level:n}),(0,i.jsxs)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:[(0,i.jsx)("div",{className:"h-4 w-4 shrink-0"}),r]})]})},eI=e=>{let{children:t,level:n,isActive:r,className:l,...a}=e;return(0,i.jsxs)("div",{className:(0,b.cn)("relative flex cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",r?"bg-accent text-accent-foreground":void 0,l),...a,children:[r&&(0,i.jsx)(eE,{}),(0,i.jsx)(eR,{level:n}),(0,i.jsx)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:t})]})},eO=e=>{let{node:t,level:n}=e,{activeEntryInfo:r}=a.useContext(e$),{onSelectTreeNode:l}=a.useContext(eS),s="file"===t.file.kind,o=t.fullPath===(null==r?void 0:r.basename);return(0,i.jsxs)(eT,{level:n,onClick:e=>{s&&(null==l||l(t))},isActive:o,children:[(0,i.jsx)(Z.IconFile,{className:"shrink-0"}),(0,i.jsx)("div",{className:"truncate",children:null==t?void 0:t.name})]})},e_=e=>{var t,n,r;let{node:l,level:s,root:o}=e,{activeRepo:d,activeRepoRef:c,activeEntryInfo:u}=a.useContext(e$),{fileMap:f,updateFileMap:h,expandedKeys:m,toggleExpandedKey:v,onSelectTreeNode:p}=a.useContext(eS),g=a.useRef(!1),b=o?"":l.file.basename,y=m.has(b),j="dir"===l.file.kind&&!(null==f?void 0:null===(t=f[l.fullPath])||void 0===t?void 0:t.treeExpanded)&&y,{data:N,isLoading:w}=(0,ek.Z)(j?J(d,null==c?void 0:c.name,b):null,x.Z,{revalidateIfStale:!1});a.useEffect(()=>{var e;if(!g.current&&(null==N?void 0:null===(e=N.entries)||void 0===e?void 0:e.length)){let e=N.entries.reduce((e,t)=>{let n=t.basename;return{...e,[n]:{file:t,name:V(n),fullPath:n,treeExpanded:!1}}},{});h(e),g.current=!0}},[N]);let[k]=(0,ea.n)(w,100),S=!!(null==l?void 0:null===(n=l.children)||void 0===n?void 0:n.length);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eI,{level:s,onClick:e=>{null==p||p(l)},isActive:(null==u?void 0:u.basename)===l.fullPath,children:[(0,i.jsx)("div",{className:"flex h-8 shrink-0 items-center hover:bg-primary/10 hover:text-popover-foreground",onClick:e=>{k||(v(l.fullPath),e.stopPropagation())},children:k&&!g.current?(0,i.jsx)(Z.IconSpinner,{}):y?(0,i.jsx)(Z.IconChevronDown,{}):(0,i.jsx)(Z.IconChevronRight,{})}),(0,i.jsx)("div",{className:"shrink-0",style:{color:"rgb(84, 174, 255)"},children:y?(0,i.jsx)(Z.IconDirectoryExpandSolid,{}):(0,i.jsx)(Z.IconDirectorySolid,{})}),(0,i.jsx)("div",{className:"truncate",children:null==l?void 0:l.name})]}),(0,i.jsx)(i.Fragment,{children:y&&S?(0,i.jsx)(i.Fragment,{children:null===(r=l.children)||void 0===r?void 0:r.map(e=>{let t=e.file.basename;return"dir"===e.file.kind?(0,i.jsx)(e_,{node:e,level:s+1},t):(0,i.jsx)(eO,{node:e,level:s+1},t)})}):null})]})},eA=()=>{let{repoMap:e,activeEntryInfo:t}=a.useContext(e$),{initialized:n,fileTreeData:r,fetchingTreeEntries:l}=a.useContext(eS),{repositorySpecifier:s}=t,o=!!s,d=o&&!(null==r?void 0:r.length);return n?(0,c.Z)(e)?(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Indexed repository"}):o?d?l?(0,i.jsx)(eD,{}):(0,i.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Data"}):(0,i.jsx)(i.Fragment,{children:null==r?void 0:r.map(e=>{var t;let n=(null==e?void 0:null===(t=e.file)||void 0===t?void 0:t.kind)==="file";return n?(0,i.jsx)(eO,{level:0,node:e},e.fullPath):(0,i.jsx)(e_,{level:0,node:e},e.fullPath)})}):null:(0,i.jsx)(eD,{})},eP=e=>{let{className:t,...n}=e;return(0,i.jsx)("div",{className:(0,b.cn)("group/filetree",t),children:(0,i.jsx)(eC,{...n,children:(0,i.jsx)(eA,{})})})};function eD(){return(0,i.jsxs)("div",{className:"space-y-3 p-2",children:[(0,i.jsx)(es.O,{}),(0,i.jsx)(es.O,{className:"ml-4"}),(0,i.jsx)(es.O,{className:"ml-4"}),(0,i.jsx)(es.O,{}),(0,i.jsx)(es.O,{className:"ml-4"})]})}var eZ=n(62940),eF=n(40055),ez=n(36065),eL=n(84942),eM=n(54594),eU=n(50538),eH=n(95623);let eG=(0,h.BX)("\n  query RepositorySearch(\n    $kind: RepositoryKind!\n    $id: ID!\n    $rev: String\n    $pattern: String!\n  ) {\n    repositorySearch(kind: $kind, id: $id, rev: $rev, pattern: $pattern) {\n      type\n      path\n      indices\n    }\n  }\n"),eV=e=>{var t,n,r,l;let{className:s,...o}=e,{activePath:d,updateActivePath:c,initialized:u,activeRepo:f,activeRepoRef:h,fileMap:m,repoMap:v,activeEntryInfo:p}=(0,a.useContext)(e$),x=a.useMemo(()=>B(v).map(e=>{let t=Y(e);return{repo:e,repoSpecifier:t}}),[v]),[g,y]=a.useState(!1),[j,N]=a.useState(null!==(t=null==h?void 0:h.kind)&&void 0!==t?t:"branch"),{repositoryKind:w,repositoryName:k,repositorySpecifier:S}=p,C=null==f?void 0:f.id,R=null==f?void 0:f.refs,E=a.useMemo(()=>(null==R?void 0:R.length)?R.map(e=>q(e)):[],[R]),I=E.filter(e=>"branch"===e.kind),O=E.filter(e=>"tag"===e.kind),_=a.useRef(null),[A,P]=a.useState(),[F,z]=a.useState(),[L,M]=a.useState(),[U,H]=a.useState(!1),G=u&&!(null==x?void 0:x.length),[{data:V}]=(0,eF.aM)({query:eG,variables:{kind:w,id:C,pattern:null!=F?F:"",rev:(null==h?void 0:h.name)?decodeURIComponent(h.name):void 0},pause:!C||!w||!F}),W=e=>{var t,n,r,l,i;if((0,T.Z)(e))return;let a=null!==(l=null===(t=q(e))||void 0===t?void 0:t.name)&&void 0!==l?l:"main",{basename:s=""}=p,o=null!==(i=null==m?void 0:null===(r=m[s])||void 0===r?void 0:null===(n=r.file)||void 0===n?void 0:n.kind)&&void 0!==i?i:"dir";P(void 0),c(K(f,a,s,o))};a.useEffect(()=>{var e,t;let n=null!==(t=null==V?void 0:null===(e=V.repositorySearch)||void 0===e?void 0:e.map(e=>({...e,id:e.path})))&&void 0!==t?t:[];M(n),H(!!F)},[null==V?void 0:V.repositorySearch]);let J=(0,ea.S)(e=>{e?z(e):(z(""),H(!1),M([]))},500),$=()=>{J.run(""),J.flush()},X=async e=>{if(!e.path)return;let t=K(f,null==h?void 0:h.name,e.path,e.type);c(t)};return a.useEffect(()=>{let e=e=>{var t,n;let r=e.target,l=null==r?void 0:null===(t=r.tagName)||void 0===t?void 0:t.toLowerCase();"input"!==l&&"textarea"!==l&&"select"!==l&&"t"===e.key&&(e.preventDefault(),null===(n=_.current)||void 0===n||n.focus())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,i.jsxs)("div",{className:(0,b.cn)(s),...o,children:[(0,i.jsx)("div",{className:"py-4 font-bold leading-8",children:"Files"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(eM.Ph,{disabled:!u,onValueChange:e=>{var t;let n=null===(t=x.find(t=>t.repoSpecifier===e))||void 0===t?void 0:t.repo;if(n){let t="".concat(e,"/-/tree/").concat(q(Q(n.refs)).name);P(void 0),c(t)}},value:S,children:[(0,i.jsx)(eM.i4,{children:(0,i.jsx)(eM.ki,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(ey,{kind:w,fallback:(0,i.jsx)(Z.IconFolderGit,{})})}),(0,i.jsx)("span",{className:(0,b.cn)("truncate",!k&&"text-muted-foreground"),children:k||"Pick a repository"})]})})}),(0,i.jsx)(eM.Bw,{className:"max-h-[50vh] overflow-y-auto",children:G?(0,i.jsx)(eM.Ql,{isPlaceHolder:!0,value:"",disabled:!0,children:"No indexed repository"}):(0,i.jsx)(i.Fragment,{children:null==x?void 0:x.map(e=>(0,i.jsx)(eM.Ql,{value:e.repoSpecifier,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(ey,{kind:e.repo.kind,fallback:(0,i.jsx)(Z.IconFolderGit,{})}),e.repo.name]})},e.repoSpecifier))})})]}),(0,i.jsxs)(eL.J2,{open:g,onOpenChange:y,children:[(0,i.jsx)(eL.xo,{asChild:!0,children:(0,i.jsx)(D.z,{className:"w-full justify-start gap-2 px-3",variant:"outline",children:!!h&&(0,i.jsxs)(i.Fragment,{children:["branch"===h.kind?(0,i.jsx)(Z.IconGitFork,{}):(0,i.jsx)(Z.IconTag,{}),decodeURIComponent(null!==(n=h.name)&&void 0!==n?n:"")]})})}),(0,i.jsx)(eL.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",side:"bottom",children:(0,i.jsxs)(ez.mY,{className:"transition-all",children:[(0,i.jsx)(ez.sZ,{placeholder:"tag"===j?"Find a tag":"Find a branch"}),(0,i.jsx)(eU.mQ,{className:"my-1 border-b",value:j,onValueChange:e=>N(e),children:(0,i.jsxs)(eU.dr,{className:"bg-popover py-0",children:[(0,i.jsx)(eU.SP,{value:"branch",children:"Branches"}),(0,i.jsx)(eU.SP,{value:"tag",children:"Tags"})]})}),(0,i.jsxs)(ez.e8,{className:"max-h-[30vh]",children:[(0,i.jsx)(ez.rb,{children:"Nothing to show"}),(0,i.jsx)(ez.fu,{children:("tag"===j?O:I).map((e,t)=>(0,i.jsxs)(ez.di,{onSelect:()=>{y(!1),W(e.ref)},children:[(0,i.jsx)(Z.IconCheck,{className:(0,b.cn)("mr-2",(null==e?void 0:e.name)&&e.name===(null==h?void 0:h.name)?"opacity-100":"opacity-0")}),decodeURIComponent(null!==(r=e.name)&&void 0!==r?r:"")]},null!==(l=e.ref)&&void 0!==l?l:t))})]})]})})]}),(0,i.jsx)(eH.Vc,{stayOpenOnInputClick:!0,options:L,onSelect:X,open:U,onOpenChange:e=>{(A||(null==L?void 0:L.length))&&e?H(!0):H(!1)},children:e=>{let{highlightedIndex:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eH.JH,{children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(eH.KM,{className:"pr-8",placeholder:"Go to file",spellCheck:!1,value:A,ref:_,disabled:!k,onClick:e=>{F&&!U&&H(!0)},onChange:e=>{let t=e.target.value;P(t),t?J.run(t):$()}}),(0,i.jsx)("div",{className:"absolute right-2 top-0 flex h-full items-center",children:A?(0,i.jsx)(D.z,{variant:"ghost",size:"icon",className:"h-6 w-6 cursor-pointer",onClick:e=>{var t;P(""),$(),null===(t=_.current)||void 0===t||t.focus()},children:(0,i.jsx)(Z.IconClose,{})}):(0,i.jsx)("kbd",{className:"rounded-md border bg-secondary/50 px-1.5 text-xs leading-4 text-muted-foreground shadow-[inset_-0.5px_-1.5px_0_hsl(var(--muted))]",onClick:e=>{var t;null===(t=_.current)||void 0===t||t.focus()},children:"t"})})]})}),(0,i.jsx)(eH.fD,{align:"start",side:"bottom",onOpenAutoFocus:e=>e.preventDefault(),style:{width:"50vw",maxWidth:700},className:"max-h-[50vh] overflow-y-auto",children:(0,i.jsx)(i.Fragment,{children:(null==L?void 0:L.length)?null==L?void 0:L.map((e,n)=>(0,i.jsxs)(eH.x5,{item:e,index:n,className:"flex w-full items-center gap-2 overflow-x-hidden",children:[(0,i.jsx)("div",{className:"shrink-0",children:"dir"===e.type?(0,i.jsx)(Z.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,i.jsx)(Z.IconFile,{})}),(0,i.jsx)("div",{className:"flex-1 break-all",children:(0,i.jsx)(eW,{text:e.path,indices:e.indices})}),t===n&&(0,i.jsx)("div",{className:"shrink-0`",children:"dir"===e.type?"Go to folder":"Go to file"})]},null==e?void 0:e.id)):(0,i.jsx)("div",{className:"flex h-24 items-center justify-center",children:"No matches found"})})})]})}})]})]})},eW=e=>{let{text:t,indices:n}=e,r=a.useMemo(()=>new Set(n),[n]);return(0,i.jsx)("p",{className:"text-muted-foreground",children:t.split("").map((e,t)=>r.has(t)?(0,i.jsx)("span",{className:"font-semibold text-foreground",children:e},"".concat(e,"_").concat(t)):e)})},eY=e=>{let{fetchingTreeEntries:t}=e,{activePath:n,updateActivePath:r,expandedKeys:l,updateFileMap:s,toggleExpandedKey:o,initialized:d,fileTreeData:c,fileMap:u,activeRepo:f,activeRepoRef:h}=a.useContext(e$),m=a.useRef(null),v=function(e,t){var n,r;let[l,i]=(0,a.useState)(null!==(r=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==r?r:0);return(0,a.useEffect)(()=>{if(e.current){let n=(0,eZ.Z)(()=>{var t,n;i(null!==(n=null===(t=e.current)||void 0===t?void 0:t.scrollTop)&&void 0!==n?n:0)},t,{leading:!0}),r=e.current;return r.addEventListener("scroll",n),()=>{r.removeEventListener("scroll",n)}}},[e,t]),l}(m,200);return(0,i.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,i.jsx)(eV,{className:"shrink-0 px-4 pb-3"}),v>0&&(0,i.jsx)("div",{className:"h-0 border-b shadow-[0px_3px_8px_rgba(0,0,0,0.3)] dark:shadow-[0px_3px_8px_rgba(255,255,255,0.3)]"}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto px-4",ref:m,children:(0,i.jsx)(eP,{onSelectTreeNode:e=>{let t=K(f,null==h?void 0:h.name,e.file.basename,e.file.kind);r(t)},activePath:n,fileMap:u,updateFileMap:s,expandedKeys:l,toggleExpandedKey:o,initialized:d,fileTreeData:c,fetchingTreeEntries:t})})]})},eB=e=>{let{className:t,blob:n,isImage:r,contentLength:l}=e,{activePath:s}=(0,a.useContext)(e$);return(0,i.jsxs)("div",{className:(0,b.cn)(t),children:[(0,i.jsx)(eb,{blob:n,contentLength:l}),(0,i.jsx)("div",{className:"rounded-b-lg border border-t-0 p-2 text-center",children:r?(0,i.jsx)("img",{className:"mx-auto",src:n?URL.createObjectURL(n):void 0}):(0,i.jsx)("a",{className:"text-primary hover:underline",download:V(null!=s?s:""),href:n?URL.createObjectURL(n):"",target:"_blank",children:"View raw"})})]})},eq=a.lazy(()=>Promise.all([n.e(5870),n.e(6056),n.e(9148),n.e(5392),n.e(4627)]).then(n.bind(n,34627))),eQ=a.lazy(()=>Promise.all([n.e(5606),n.e(177),n.e(557)]).then(n.bind(n,30557))),eK=e=>{var t;let{className:n,blob:r,contentLength:l}=e,{searchParams:s,updateSearchParams:o}=(0,m.Z)(),[d,c]=a.useState(""),{activePath:u}=(0,a.useContext)(e$),f=u?(0,p.U$)(u)[0]:void 0,h=null!=f?f:"plain",v=!!d&&"markdown"===h,x=(null===(t=s.get("plain"))||void 0===t?void 0:t.toString())==="1";return a.useEffect(()=>{let e=async e=>{try{let t=await e.text();c(t)}catch(e){c("")}};r&&e(r)},[r]),(0,i.jsxs)("div",{className:(0,b.cn)(n),children:[(0,i.jsx)(eb,{blob:r,contentLength:l,canCopy:!0,children:v&&(0,i.jsx)(eU.mQ,{value:x?"1":"0",onValueChange:e=>{"1"===e?o({set:{plain:"1"}}):o({del:"plain"})},children:(0,i.jsxs)(eU.dr,{children:[(0,i.jsx)(eU.SP,{value:"0",children:"Preview"}),(0,i.jsx)(eU.SP,{value:"1",children:"Code"})]})})}),(0,i.jsx)("div",{className:"rounded-b-lg border border-t-0 py-2",children:(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)(S.cg,{className:"p-2"}),children:v&&!x?(0,i.jsx)(eQ,{value:d}):(0,i.jsx)(eq,{value:d,language:h})})})]})},eJ=(0,h.BX)("\n  query RepositoryList {\n    repositoryList {\n      id\n      name\n      kind\n      gitUrl\n      refs\n    }\n  }\n"),e$=a.createContext({}),eX=e=>{let{children:t}=e,n=(0,s.usePathname)(),{updatePathnameAndSearch:r}=(0,m.Z)(),[l,o]=a.useState(!1),[c,u]=a.useState(),f=a.useMemo(()=>G(c),[c]),h=(0,v.xG)(),[p,x]=a.useState(!1),[g,b]=a.useState({}),[y,j]=a.useState({}),[N,w]=a.useState(new Set),[k,S]=a.useState(!1),[C,R]=a.useState(),E=a.useRef(),T=a.useCallback(async(e,t)=>{let n=null==t?void 0:t.replace;if(e){var l;let i={},a=["plain","line","redirect_filepath","redirect_git_url"];(null==t?void 0:null===(l=t.params)||void 0===l?void 0:l.line)&&(i.line=t.params.line,a=a.filter(e=>"line"!==e)),r("/files/".concat(e),{set:i,del:a,replace:n})}else r("/files",{del:["path","plain","line"],replace:n})},[]),I=a.useMemo(()=>(function e(t){if(!t.length)return[];for(let n of(t.sort((e,t)=>{let n="file"===e.file.kind?1:0,r="file"===t.file.kind?1:0;return n-r||e.name.localeCompare(t.name)}),t))(null==n?void 0:n.children)&&e(n.children);return t})(function(e){let t=[];if(!e)return t;let n=Object.keys(e);for(let r of n){let n=e[r],l=r.split("/"),i=t;for(let e=0;e<l.length;e++){let t=l.slice(0,e+1).join("/"),a=null==i?void 0:i.find(e=>e.fullPath===t);if(a)i=a.children||[];else{let e={file:n.file,name:n.name,fullPath:r,children:[],isRepository:n.isRepository,repository:n.repository};i.push(e),i=e.children}}}return t}(g)),[g]),O=a.useMemo(()=>{let{repositoryKind:e,repositoryName:t,repositorySpecifier:n}=f;if(e&&t)return n?y[n]:void 0},[y,f]),_=a.useMemo(()=>{var e,t;if(!f||!O)return;let n=decodeURIComponent(null!==(t=null==f?void 0:f.rev)&&void 0!==t?t:""),r=null===(e=O.refs)||void 0===e?void 0:e.find(e=>e==="refs/heads/".concat(n)||e==="refs/tags/".concat(n));if(r)return q(r)},[f,O]),A=a.useMemo(()=>{var e;if(!c)return[];let{basename:t=""}=f,n=[{file:{kind:"dir",basename:""},isRepository:!0,repository:O,name:null!==(e=null==O?void 0:O.name)&&void 0!==e?e:"",fullPath:""}],r=(null==t?void 0:t.split("/"))||[];for(let e=0;e<r.length;e++){let t=r.slice(0,e+1).join("/");n.push(null==g?void 0:g[t])}return(0,d.Z)(n)},[c,g,f]);return a.useEffect(()=>{var e;let t=null===(e=n.match(/^\/files\/(.*)/))||void 0===e?void 0:e[1];E.current=c,u(null!=t?t:""),l||o(!0)},[n]),(0,i.jsx)(e$.Provider,{value:{initialized:p,setInitialized:x,activePath:c,updateActivePath:T,fileMap:g,updateFileMap:(e,t)=>{e&&(t?b(e):b(t=>({...t,...e})))},expandedKeys:N,setExpandedKeys:w,toggleExpandedKey:e=>{let t=N.has(e),n=new Set(N);t?n.delete(e):n.add(e),w(n)},currentFileRoutes:A,fileTreeData:I,chatSideBarVisible:k,setChatSideBarVisible:S,pendingEvent:C,setPendingEvent:R,isChatEnabled:h,repoMap:y,setRepoMap:j,activeRepo:O,activeRepoRef:_,isPathInitialized:l,activeEntryInfo:f,prevActivePath:E},children:t})},e0=e=>{let{className:t}=e,{activePath:n,updateActivePath:r,initialized:s,setInitialized:o,chatSideBarVisible:d,setChatSideBarVisible:h,setPendingEvent:v,repoMap:p,setRepoMap:g,activeRepo:y,activeRepoRef:k,isPathInitialized:E,activeEntryInfo:T,prevActivePath:I,updateFileMap:O,setExpandedKeys:_}=a.useContext(e$),{searchParams:A}=(0,m.Z)(),P=a.useRef(!1),{progress:D,setProgress:Z}=(0,C.U)(),z=a.useRef(null),[L,M]=a.useState(35),U=a.useMemo(()=>G(n),[n]),Y=null==U?void 0:U.basename,[B,X]=a.useState(),et=(null==T?void 0:T.viewMode)==="blob",en=!!E&&!(0,c.Z)(p)&&!!n,{data:er,isLoading:ei,error:ea}=(0,f.ZP)(en?n:null,e=>{let{repositorySpecifier:t}=G(e);return e2(e,t?null==p?void 0:p[t]:void 0).then(t=>({entries:t,requestPathname:e}))},{revalidateOnFocus:!1,shouldRetryOnError:!1}),{data:es,isLoading:eo,error:ed}=(0,f.ZP)(et&&y?J(y,null==k?void 0:k.name,Y):null,e=>(0,x.Z)(e,{responseFormatter:async e=>{let t=e.headers.get("Content-Type");if("application/vnd.directory+json"===t)throw Error(l.INCORRECT_VIEW_MODE);let n=(0,u.Z)(e.headers.get("Content-Length")),r=await e.blob();return{contentLength:n,blob:r}},errorHandler(){throw Error(l.NOT_FOUND)}}),{revalidateOnFocus:!1,shouldRetryOnError:!1}),ec=null==es?void 0:es.blob,eu=null==es?void 0:es.contentLength,ef=(null==T?void 0:T.viewMode)==="tree"||!(null==T?void 0:T.viewMode),eh=et&&"text"===B,em=et&&("image"===B||"raw"===B);return a.useEffect(()=>{let e=async()=>{var e;if(P.current)return;P.current=!0;let t=await e1(),n=A.get("redirect_filepath"),l=A.get("redirect_git_url"),i=A.get("line");if((null==t?void 0:t.length)&&n&&l){let a=t.find(e=>e.gitUrl===l);if(a){let t=Q(a.refs),l=(null===(e=q(null!=t?t:""))||void 0===e?void 0:e.name)||"";r(K(a,l,n,"file"),{params:{line:null!=i?i:""},replace:!0}),P.current=!1;return}}t&&g((0,F.Z)(t,e=>"".concat(H(e.kind),"/").concat(e.name))),o(!0)};!s&&E&&e()},[n,s,E]),a.useEffect(()=>{if(!er)return;let{entries:e,requestPathname:t}=er,{repositorySpecifier:n,viewMode:r,basename:l,rev:i}=G(t),{repositorySpecifier:a,rev:s}=G(I.current),o=W(l,"tree"===r),d={};if(e.length)for(let t of e){let e=t.basename;d[e]={file:t,name:V(e),fullPath:e,treeExpanded:o.includes(t.basename)}}let c=o.filter(Boolean),u=n!==a||i!==s;d&&O(d,u),(null==c?void 0:c.length)&&(u?_(new Set(c)):_(e=>{let t=new Set(e);for(let e of c)t.add(e);return t}))},[er]),a.useEffect(()=>{!s||(!D&&(eo||ei)?Z(!0):eo||ei||Z(!1))},[eo,ei]),a.useEffect(()=>{let e=async()=>{let e=await e5(null!=n?n:"",ec);X(e)};et?e():X("")},[n,et,ec]),a.useEffect(()=>{var e,t,n;d?(null===(e=z.current)||void 0===e||e.expand(),null===(t=z.current)||void 0===t||t.resize(L)):null===(n=z.current)||void 0===n||n.collapse()},[d]),a.useEffect(()=>{if(!(eo||ei))return;let{repositorySpecifier:e,rev:t}=T,{repositorySpecifier:n,rev:r}=G(I.current);(e!==n||t!==r)&&(O({},!0),_(new Set))},[T]),a.useEffect(()=>{let e=e=>{h(!0),v(e)};return R.u.on("code_browser_quick_action",e),()=>{R.u.off("code_browser_quick_action",e)}},[]),(0,i.jsxs)(j,{direction:"horizontal",className:(0,b.cn)(t),onLayout:e=>{(null==e?void 0:e[2])&&M(e[2])},children:[(0,i.jsx)(N,{defaultSize:20,minSize:20,maxSize:40,className:"hidden lg:block",children:(0,i.jsx)(eY,{fetchingTreeEntries:ei})}),(0,i.jsx)(w,{className:"hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500 lg:block"}),(0,i.jsx)(N,{defaultSize:80,minSize:30,children:(0,i.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto px-4 pb-4",children:[(0,i.jsx)(el,{className:"py-4"}),s?ed||ea?(0,i.jsx)(ee,{className:"rounded-lg border p-4",error:ea||ed}):(0,i.jsxs)("div",{children:[ef&&(0,i.jsx)(ej,{loading:ei,initialized:s,className:"rounded-lg border"}),eh&&(0,i.jsx)(eK,{blob:ec,contentLength:eu}),em&&(0,i.jsx)(eB,{blob:ec,isImage:"image"===B,contentLength:eu})]}):(0,i.jsx)(S.cg,{className:"rounded-lg border p-4"})]})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{className:(0,b.cn)("hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500",d&&"block")}),(0,i.jsx)(N,{collapsible:!0,collapsedSize:0,defaultSize:0,minSize:25,ref:z,onCollapse:()=>h(!1),children:(0,i.jsx)($,{})})]})]})},e4=e=>{let[t]=(0,k.Hb)(),n=t?{height:"calc(100vh - ".concat(k.wt,")")}:{height:"100vh"};return(0,i.jsx)(eX,{children:(0,i.jsx)("div",{className:"transition-all",style:n,children:(0,i.jsx)(e0,{className:"source-code-browser",...e})})})};async function e1(){let e=g.L.createRequestOperation("query",(0,o.h)(eJ,{}));return g.L.executeQuery(e).then(e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.repositoryList)||[]})}async function e5(e,t){var n;if(!t)return"";let r=null==t?void 0:t.type,l=null===(n=(0,p.U$)(e))||void 0===n?void 0:n[0];if(null==r?void 0:r.startsWith("image"))return"image";if(l||(null==r?void 0:r.startsWith("text")))return"text";let i=await new Promise((e,n)=>{let r=t.slice(0,1024),l=new FileReader;l.onloadend=function(t){var n;if((null==t?void 0:null===(n=t.target)||void 0===n?void 0:n.readyState)===FileReader.DONE){let n=t.target.result;"string"!=typeof n?e(!1):/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/.test(n)?e(!1):e(!0)}},l.onerror=function(){e(!1)},l.readAsText(r,"UTF-8")});return i?"text":"raw"}async function e2(e,t){if(!e)return[];if(!t)throw Error(l.EMPTY_REPOSITORY);let{basename:n,rev:r,viewMode:i}=G(e),a=W(n,"tree"===i),s=a.map(e=>()=>(0,x.Z)(J(t,null!=r?r:"main",e),{responseFormatter(e){let t=e.headers.get("Content-Type");if("application/vnd.directory+json"!==t)throw Error(l.INCORRECT_VIEW_MODE);return e.json()},errorHandler(){throw Error(l.NOT_FOUND)}})),o=await Promise.all(s.map(e=>e())),d=[];for(let e of o){var c;(null==e?void 0:null===(c=e.entries)||void 0===c?void 0:c.length)&&(d=[...d,...e.entries])}return d}},27064:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(18366);let l=(0,r.Z)()},48537:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(36164);n(3546);var l=n(28312),i=n(31458),a=n(81565);function s(e){let{className:t,value:n,onCopyContent:s,text:o,...d}=e,{isCopied:c,copyToClipboard:u}=(0,l.m)({timeout:2e3,onCopyContent:s});return n?(0,r.jsxs)(i.z,{variant:"ghost",size:o?"default":"icon",className:t,onClick:()=>{c||u(n)},...d,children:[c?(0,r.jsx)(a.IconCheck,{className:"text-green-600"}):(0,r.jsx)(a.IconCopy,{}),o&&(0,r.jsx)("span",{children:o}),!o&&(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]}):null}},30601:function(e,t,n){"use strict";n.d(t,{Hb:function(){return h},wt:function(){return c},xc:function(){return m},yo:function(){return f}});var r=n(36164),l=n(3546),i=n(74630),a=n(36327),s=n(80605),o=n(74248),d=n(81565);let c="3.5rem",u=l.createContext({}),f=e=>{let{children:t}=e,n=(0,s.UA)(),[a,o]=l.useState(!1);return l.useEffect(()=>{let e=window.self!==window.top;e||(0,i.Z)(n)||o(n)},[n]),(0,r.jsx)(u.Provider,{value:{isShowDemoBanner:a,setIsShowDemoBanner:o},children:t})};function h(){let{isShowDemoBanner:e,setIsShowDemoBanner:t}=l.useContext(u);return[e,t]}function m(){let[e,t]=h(),{data:n}=(0,a.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:c}:{height:0},children:[(0,r.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC6"}),(0,r.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,r.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,r.jsx)(d.IconGithub,{}),(0,r.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,r.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":n,"h-0 opacity-0":!n}),children:[(0,r.jsx)(d.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.stargazers_count}),(0,r.jsx)(d.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.forks_count})]})]})]}),(0,r.jsx)(d.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>t(!1)})]})]})}},95623:function(e,t,n){"use strict";n.d(t,{JH:function(){return m},KM:function(){return p},Vc:function(){return b},fD:function(){return x},rG:function(){return v},x5:function(){return g}});var r=n(36164),l=n(3546),i=n(24685),a=n(74630),s=n(16234),o=n(23455),d=n(74248),c=n(84942),u=n(82394);let f=l.createContext({}),h=c.xp,m=l.forwardRef((e,t)=>(0,r.jsx)(c.tW,{...e,ref:t}));m.displayName="SearchableSelectAnchor";let v=l.forwardRef((e,t)=>{let{getInputProps:n}=l.useContext(f),{onKeyDown:i,onChange:d,onInput:c,onBlur:u,onClick:h,...m}=e;return(0,r.jsx)(o.Z,{...n((0,s.Z)({onKeyDown:i,onChange:d,onInput:c,onBlur:u,onClick:h,ref:t},a.Z)),...m})});v.displayName="SearchableSelectTextarea";let p=l.forwardRef((e,t)=>{let{getInputProps:n}=l.useContext(f),{onKeyDown:i,onChange:o,onInput:d,onBlur:c,onClick:h,...m}=e;return(0,r.jsx)(u.I,{...n((0,s.Z)({onKeyDown:i,onChange:o,onInput:d,onBlur:c,onClick:h,ref:t},a.Z)),...m})});p.displayName="SearchableSelectInput";let x=l.forwardRef((e,t)=>{let{children:n,style:i,popupMatchAnchorWidth:a,...s}=e,{getMenuProps:o,anchorRef:d}=l.useContext(f),u=l.useRef(void 0);return l.useLayoutEffect(()=>{if(a){let e=d.current;if(e){let t=e.getBoundingClientRect();u.current=t.width}}},[]),(0,r.jsx)(c.i9,{children:(0,r.jsx)(c.yk,{align:"start",onOpenAutoFocus:e=>e.preventDefault(),style:{width:u.current,...i},...o({ref:t},{suppressRefError:!0}),...s,children:n})})});x.displayName="SearchableSelectContent";let g=l.forwardRef((e,t)=>{let{item:n,index:i,className:a,children:s,disabled:o,...c}=e,{highlightedIndex:u,selectedItem:m,getItemProps:v}=l.useContext(f),p=u===i,x=m===n;return(0,r.jsx)(h,{asChild:!0,children:(0,r.jsx)("div",{className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",p&&"bg-accent text-accent-foreground",x&&"font-bold",o&&"pointer-events-none opacity-50",a),...v({item:n,index:i,onMouseLeave:e=>e.preventDefault(),onMouseOut:e=>e.preventDefault()}),...c,children:"function"==typeof s?s({highlighted:p,selected:x}):s})},n.id)});function b(e){let{options:t,onSelect:n,children:s,open:o,onOpenChange:d,stayOpenOnInputClick:u}=e,h=l.useRef(null),m=l.useCallback((e,t)=>{let{type:n,changes:r}=t;switch(n){case i.Kb.stateChangeTypes.MenuMouseLeave:return{...r,highlightedIndex:e.highlightedIndex};case i.Kb.stateChangeTypes.InputClick:let l=!!u||r.isOpen;return{...r,isOpen:l};default:return r}},[u]),v=(0,i.Kb)({items:null!=t?t:[],defaultIsOpen:o,onSelectedItemChange(e){let{selectedItem:t}=e;t&&(null==n||n(t),null==d||d(!1))},onIsOpenChange:e=>{let{isOpen:t}=e;null==d||d(!!t)},stateReducer:m}),{setHighlightedIndex:p,highlightedIndex:x}=v,g=(0,a.Z)(o)?v.isOpen:v.isOpen&&o;l.useEffect(()=>{g&&(null==t?void 0:t.length)&&-1===x&&p(0)},[g,t]);let b=l.useMemo(()=>({...v,open:g,anchorRef:h}),[v,g,h]);return(0,r.jsx)(f.Provider,{value:b,children:(0,r.jsx)(c.J2,{open:g,children:"function"==typeof s?s(b):s})})}g.displayName="SearchableSelectOption"},38736:function(e,t,n){"use strict";n.d(t,{J:function(){return c},U:function(){return u}});var r=n(36164),l=n(3546),i=n(28242),a=n(7062),s=n.n(a),o=n(24449);let d=l.createContext({}),c=e=>{let{children:t}=e,[n,a]=l.useState(!1),[c]=(0,o.n)(n,200,{leading:!0}),{theme:u}=(0,i.F)();return l.useEffect(()=>{s().config({barColors:{0:"dark"===u?"#DC981A":"#B7942B"}})},[]),(0,r.jsxs)(d.Provider,{value:{progress:c,setProgress:a},children:[c&&(0,r.jsx)(s(),{}),t]})},u=()=>l.useContext(d)},36065:function(e,t,n){"use strict";n.d(t,{di:function(){return m},e8:function(){return c},fu:function(){return f},mY:function(){return o},rb:function(){return u},sZ:function(){return d},zz:function(){return h}});var r=n(36164),l=n(3546),i=n(53241),a=n(93170),s=n(74248);n(30220);let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.mY,{ref:t,className:(0,s.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...l})});o.displayName=i.mY.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(a.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(i.mY.Input,{ref:t,className:(0,s.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...l})]})});d.displayName=i.mY.Input.displayName;let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.mY.List,{ref:t,className:(0,s.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...l})});c.displayName=i.mY.List.displayName;let u=l.forwardRef((e,t)=>(0,r.jsx)(i.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=i.mY.Empty.displayName;let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.mY.Group,{ref:t,className:(0,s.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...l})});f.displayName=i.mY.Group.displayName;let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.mY.Separator,{ref:t,className:(0,s.cn)("-mx-1 h-px bg-border",n),...l})});h.displayName=i.mY.Separator.displayName;let m=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.mY.Item,{ref:t,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",n),...l})});m.displayName=i.mY.Item.displayName},30220:function(e,t,n){"use strict";n.d(t,{$N:function(){return v},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return f},fK:function(){return h},hg:function(){return d}});var r=n(36164),l=n(3546),i=n(4318),a=n(1663),s=n(74248);let o=i.fC,d=i.xz,c=i.h_;i.x8;let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...l})});u.displayName=i.aV.displayName;let f=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[l,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(a.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=i.VY.displayName;let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};h.displayName="DialogHeader";let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};m.displayName="DialogFooter";let v=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",n),...l})});v.displayName=i.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...l})});p.displayName=i.dk.displayName},82394:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(36164),l=n(3546),i=n(74248);let a=l.forwardRef((e,t)=>{let{className:n,type:l,...a}=e;return(0,r.jsx)("input",{type:l,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});a.displayName="Input"},54594:function(e,t,n){"use strict";n.d(t,{Bw:function(){return f},DI:function(){return d},Ph:function(){return o},Ql:function(){return m},U$:function(){return v},i4:function(){return u},ki:function(){return c}});var r=n(36164),l=n(3546),i=n(31889),a=n(74248),s=n(81565);let o=i.fC,d=i.ZA,c=i.B4,u=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsxs)(i.xz,{ref:t,className:(0,a.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...o,children:[l,(0,r.jsx)(i.JO,{asChild:!0,children:(0,r.jsx)(s.IconChevronUpDown,{className:"opacity-50"})})]})});u.displayName=i.xz.displayName;let f=l.forwardRef((e,t)=>{let{className:n,children:l,position:s="popper",...o}=e;return(0,r.jsx)(i.h_,{children:(0,r.jsx)(i.VY,{ref:t,className:(0,a.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===s&&"translate-y-1",n),position:s,...o,children:(0,r.jsx)(i.l_,{className:(0,a.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});f.displayName=i.VY.displayName;let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.__,{ref:t,className:(0,a.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...l})});h.displayName=i.__.displayName;let m=l.forwardRef((e,t)=>{let{className:n,children:l,isPlaceHolder:o,...d}=e;return(0,r.jsxs)(i.ck,{ref:t,className:(0,a.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...d,children:[!o&&(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(s.IconCheck,{className:"h-4 w-4"})})}),(0,r.jsx)(i.eT,{children:l})]})});m.displayName=i.ck.displayName;let v=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.Z0,{ref:t,className:(0,a.cn)("-mx-1 my-1 h-px bg-muted",n),...l})});v.displayName=i.Z0.displayName},99047:function(e,t,n){"use strict";n.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return a},pj:function(){return f},ss:function(){return u},xD:function(){return s}});var r=n(36164),l=n(3546),i=n(74248);let a=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",n),...l})});a.displayName="Table";let s=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",n),...l})});s.displayName="TableHeader";let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",n),...l})});o.displayName="TableBody";let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...l})});d.displayName="TableFooter";let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...l})});c.displayName="TableRow";let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...l})});u.displayName="TableHead";let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...l})});f.displayName="TableCell";let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",n),...l})});h.displayName="TableCaption"},50538:function(e,t,n){"use strict";n.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return s},nU:function(){return c}});var r=n(36164),l=n(3546),i=n(6044),a=n(74248);let s=i.fC,o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,a.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...l})});o.displayName=i.aV.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.xz,{ref:t,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...l})});d.displayName=i.xz.displayName;let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(i.VY,{ref:t,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...l})});c.displayName=i.VY.displayName},29:function(e,t,n){"use strict";n.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return s},u:function(){return o}});var r=n(36164),l=n(3546),i=n(44421),a=n(74248);let s=i.zt,o=i.fC,d=i.xz,c=l.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...s}=e;return(0,r.jsx)(i.VY,{ref:t,sideOffset:l,className:(0,a.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...s})});c.displayName=i.VY.displayName},93877:function(e,t,n){"use strict";n.d(t,{BT:function(){return o},Ds:function(){return d},Ot:function(){return u}});var r=n(3546);let l=(e,t)=>{let[n,l]=(0,r.useState)(t),[i,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&l(JSON.parse(t)),a(!1)},[]),[n,t=>{l(t),localStorage.setItem(e,JSON.stringify(t))},i]};class i{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}class a{defineGlobalVar(){return new i(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=l(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}let s=new a("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!0),o=s.defineGlobalVar(),d=s.defineHook(),c=new a("enable_search","Search","Enable the search on the home page to search for anything you want to know using the local chat model.",!1);c.defineGlobalVar();let u=c.defineHook()},28312:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(3546),l=n(61200),i=n.n(l),a=n(2578);function s(e){let{timeout:t=2e3,onError:n,onCopyContent:l}=e,[s,o]=r.useState(!1),d=()=>{o(!0),setTimeout(()=>{o(!1)},t)},c=e=>{if("function"==typeof n){null==n||n(e);return}a.A.error("Failed to copy.")};return{isCopied:s,copyToClipboard:e=>{var t;if(e){if(l){l(e),d();return}if(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)navigator.clipboard.writeText(e).then(d).catch(c);else{let t=i()(e);t?d():c()}}}}}},38785:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(3546);let l=!0;function i(){let[e,t]=r.useState(()=>!l);return r.useEffect(function(){l=!1,t(!0)},[]),e}},98454:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var r=n(40055),l=n(43240);let i=(0,l.BX)("\n  query MeQuery {\n    me {\n      id\n      authToken\n      email\n      isAdmin\n      isPasswordSet\n      name\n    }\n  }\n"),a=()=>(0,r.aM)({query:i})},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(11978);function l(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)();return{pathname:e,router:t,searchParams:n,updateSearchParams:r=>{let l=i(e,n,r);r.replace?t.replace(l):t.push(l)},getQueryString:e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},updatePathnameAndSearch:(e,r)=>{let l=e;r&&(l=i(e,n,r)),(null==r?void 0:r.replace)?t.replace(l):t.push(l)}}}function i(e,t,n){let{set:r,del:l}=n,i=new URLSearchParams(t);r&&Object.entries(r).forEach(e=>{let[t,n]=e;return i.set(t,n)}),l&&(Array.isArray(l)?l.forEach(e=>i.delete(e)):i.delete(l));let a=i.toString(),s="".concat(e).concat(a.length>0?"?".concat(a):"");return s}},25647:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(3546),l=n(38785);let i=(e,t)=>{let n=(0,l.U)(),i=e(e=>null==e?void 0:e._hasHydrated),a=e(t),[s,o]=r.useState(n&&i?a:void 0);return r.useEffect(()=>{o(a)},[a]),s}},17451:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(27257),l=n(85654),i=n(74248);let a=["_hasHydrated","setHasHydrated","activeChatId"],s={_hasHydrated:!1,chats:void 0,activeChatId:(0,i.x0)()},o=(0,r.Ue)()((0,l.tJ)(e=>({...s,setHasHydrated:t=>{e({_hasHydrated:t})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!a.includes(t)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},91302:function(e,t,n){"use strict";n.d(t,{Dp:function(){return p},Ho:function(){return g},QJ:function(){return N},av:function(){return S},kP:function(){return w},zq:function(){return j}});var r,l,i=n(36164),a=n(3546),s=n(11978),o=n(24426),d=n.n(o),c=n(43240),u=n(80605),f=n(11634),h=n(66794);function m(e,t){var n,r;let i=function(e,t){switch(t.type){case l.SignIn:case l.Refresh:return{status:"authenticated",data:t.data};case l.SignOut:return{status:"unauthenticated",data:void 0}}}(0,t);return e.status==i.status&&(n=e.data,r=i.data,(null==n?void 0:n.accessToken)===(null==r?void 0:r.accessToken)&&(null==n?void 0:n.refreshToken)===(null==r?void 0:r.refreshToken))?e:i}(r=l||(l={}))[r.SignIn=0]="SignIn",r[r.SignOut=1]="SignOut",r[r.Refresh=2]="Refresh";let v=a.createContext({}),p=(0,c.BX)("\n  mutation refreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      accessToken\n      refreshToken\n    }\n  }\n"),x=(0,c.BX)("\n  mutation LogoutAllSessions {\n    logoutAllSessions\n  }\n"),g=e=>{let{children:t}=e,[n,r]=a.useState(!1),[s]=d()(h.nd,void 0),[o,c]=a.useReducer(m,{status:"loading",data:void 0});a.useEffect(()=>{(null==s?void 0:s.accessToken)&&(null==s?void 0:s.refreshToken)?c({type:l.SignIn,data:s}):c({type:l.SignOut}),r(!0)},[]),a.useEffect(()=>{!n||((null==s?void 0:s.accessToken)&&(null==s?void 0:s.refreshToken)?c({type:l.Refresh,data:s}):(null==s?void 0:s.accessToken)||(null==s?void 0:s.refreshToken)||c({type:l.SignOut}))},[s]);let u=a.useMemo(()=>{var e;return(null==o?void 0:o.status)=="authenticated"?{data:{accessToken:o.data.accessToken},status:o.status}:{status:null!==(e=null==o?void 0:o.status)&&void 0!==e?e:"loading",data:null}},[o]);return(0,i.jsx)(v.Provider,{value:{authState:o,dispatch:c,session:u},children:t})};class b extends Error{constructor(){super("AuthProvider is missing. Please add the AuthProvider at root level")}}function y(){let e=a.useContext(v);if(!e)throw new b;return e}function j(){let{dispatch:e}=y(),[t,n]=d()(h.nd,void 0);return async t=>(n({accessToken:t.accessToken,refreshToken:t.refreshToken}),e({type:l.SignIn,data:t}),!0)}function N(){let e=(0,f.D)(x),{dispatch:t}=y(),[n,r]=d()(h.nd,void 0);return async()=>{await e(),r(void 0),t({type:l.SignOut})}}function w(){let{session:e}=y();return e}let k=["/auth/signin","/auth/signup","/auth/reset-password"];function S(){let e=(0,u.c7)(),t=(0,s.useRouter)(),n=(0,s.usePathname)(),r=(0,s.useSearchParams)(),{data:l,status:i}=w();return a.useEffect(()=>{if("loading"===i||"authenticated"===i||void 0===e)return;let l="/auth/signup"===n&&"true"===r.get("isAdmin");if(!l&&!e)return t.replace("/auth/signup?isAdmin=true");k.includes(n)||t.replace("/auth/signin")},[e,i]),l}},3765:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(44745),l=n(57778),i=n(79716),a=n(91302),s=n(66794);async function o(e,t){var n;let r=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;if(function(e){var t;if(e.startsWith("/oauth/providers"))return!1;let n=null===(t=(0,s.bW)())||void 0===t?void 0:t.accessToken;if(!n)return!0;try{let{exp:e}=(0,i.o)(n);return(0,s.pw)(e)}catch(e){return!0}}(e))return s.gN.refreshToken(d).then(n=>f(e,t));let l=await r(e,c(t));return 401===l.status?(s.gN.clearAccessToken(),s.gN.refreshToken(d).then(n=>f(e,t))):h(l,t)}async function d(){var e,t;let n=null===(e=(0,s.bW)())||void 0===e?void 0:e.refreshToken;if(!n)return;let r=await u(n);return null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.refreshToken}function c(e){var t;let n=new Headers(null==e?void 0:e.headers);return n.append("authorization","Bearer ".concat(null===(t=(0,s.bW)())||void 0===t?void 0:t.accessToken)),{...e||{},headers:n}}async function u(e){let t=new r.KU({url:"/graphql",requestPolicy:"network-only",exchanges:[r.Ek]}),n=t.createRequestOperation("mutation",(0,l.h)(a.Dp,{refreshToken:e}));return t.executeMutation(n)}function f(e,t){var n;let r=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;return r(e,c(t)).then(e=>h(e,t))}function h(e,t){return(null==e?void 0:e.ok)?(null==t?void 0:t.responseFormatter)?t.responseFormatter(e):(null==t?void 0:t.responseFormat)==="blob"?e.blob():e.json():(null==t?void 0:t.errorHandler)?t.errorHandler(e):void 0}},11634:function(e,t,n){"use strict";n.d(t,{D:function(){return h},L:function(){return m}});var r=n(22365),l=n(28552),i=n(81013),a=n(79716),s=n(74630),o=n(40055),d=n(44745),c=n(91302),u=n(70410),f=n(66794);function h(e,t){var n;let[r,l]=(0,o.Db)(e),i=(null==t?void 0:t.form)?(n=t.form,e=>{let{graphQLErrors:t=[]}=e;for(let e of t)if(e.extensions&&e.extensions["validation-errors"]){let t=e.extensions["validation-errors"];for(let e of t.errors)n.setError(e.path,e)}else(null==e?void 0:e.originalError)&&n.setError("root",e.originalError)}):void 0,a=async e=>{let n;try{if(null==(n=await l(e))?void 0:n.error)i&&i(n.error),(null==t?void 0:t.onError)&&t.onError(n.error);else if(!(0,s.Z)(null==n?void 0:n.data)){var r;null==t||null===(r=t.onCompleted)||void 0===r||r.call(t,n.data)}}catch(e){(null==t?void 0:t.onError)&&t.onError(e);return}return n};return a}let m=new d.KU({url:"/graphql",requestPolicy:"cache-and-network",exchanges:[(0,l.HG)({keys:{CompletionStats:()=>null,ServerInfo:()=>null,RepositorySearch:()=>null,RepositoryList:()=>null},resolvers:{Query:{invitations:(0,i.N)(),repositories:(0,i.N)()}},updates:{Mutation:{deleteInvitation(e,t,n,r){e.deleteInvitation&&n.inspectFields("Query").filter(e=>"invitations"===e.fieldName).forEach(e=>{n.updateQuery({query:u.lE,variables:e.arguments},e=>{var n;return(null==e?void 0:null===(n=e.invitations)||void 0===n?void 0:n.edges)&&(e.invitations.edges=e.invitations.edges.filter(e=>e.node.id!==t.id)),e})})},deleteGitRepository(e,t,n,r){e.deleteGitRepository&&n.inspectFields("Query").filter(e=>"gitRepositories"===e.fieldName).forEach(e=>{n.updateQuery({query:u.S1,variables:e.arguments},e=>{var n;return(null==e?void 0:null===(n=e.gitRepositories)||void 0===n?void 0:n.edges)&&(e.gitRepositories.edges=e.gitRepositories.edges.filter(e=>e.node.id!==t.id)),e})})}}}}),(0,r.M)(async e=>{let t=(0,f.bW)(),n=null==t?void 0:t.accessToken,r=null==t?void 0:t.refreshToken;return{addAuthToOperation(t){let l=(0,f.bW)();return(n=null==l?void 0:l.accessToken,r=null==l?void 0:l.refreshToken,n)?e.appendHeaders(t,{Authorization:"Bearer ".concat(n)}):t},didAuthError(e,t){let n=e.graphQLErrors.some(e=>{var t;return(null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.code)==="UNAUTHORIZED"});return n&&f.gN.clearAccessToken(),n},willAuthError(e){let t=(0,f.bW)();if(n=null==t?void 0:t.accessToken,r=null==t?void 0:t.refreshToken,"query"===e.kind&&e.query.definitions.some(e=>{var t;return"OperationDefinition"===e.kind&&(null===(t=e.name)||void 0===t?void 0:t.value)&&["GetServerInfo"].includes(e.name.value)})||"mutation"===e.kind&&e.query.definitions.some(e=>{var t;return"OperationDefinition"===e.kind&&(null===(t=e.name)||void 0===t?void 0:t.value)&&["tokenAuth","register"].includes(e.name.value)})||r&&"mutation"===e.kind&&e.query.definitions.some(e=>{var t;return"OperationDefinition"===e.kind&&(null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.value)==="refreshToken"}))return!1;if(!n)return f.gN.clearAccessToken(),!0;try{let{exp:e}=(0,a.o)(n);return(0,f.pw)(e)}catch(e){return!0}},refreshAuth:async()=>f.gN.refreshToken(async()=>{var t;let n=null===(t=(0,f.bW)())||void 0===t?void 0:t.refreshToken;if(n)return e.mutate(c.Dp,{refreshToken:n}).then(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.refreshToken})})}}),(0,d.Dk)({onError(e){e.message.startsWith("[GraphQL]")&&(e.message=e.message.replace("[GraphQL]","").trim())}}),d.Ek]})},66794:function(e,t,n){"use strict";n.d(t,{bW:function(){return s},gN:function(){return f},nd:function(){return a},pw:function(){return c}});var r=n(79716),l=n(74630),i=n(74248);let a="_tabby_auth",s=()=>{if((0,i.S_)()){let e=localStorage.getItem(a);if(e)try{return JSON.parse(e)}catch(e){}}},o=e=>{localStorage.setItem(a,JSON.stringify(e))},d=()=>{localStorage.removeItem(a),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:a}))},c=e=>!!(0,l.Z)(e)||Date.now()>1e3*e,u=e=>!(0,l.Z)(e)&&Date.now()-1e3*e<6e4,f=new class{clearAccessToken(){let e=s();e&&o({...e,accessToken:""})}async refreshToken(e){try{var t;if(void 0===(null===(t=navigator)||void 0===t?void 0:t.locks))throw console.error("The Web Locks API is not supported in your browser. Please upgrade to a newer browser version."),Error();await navigator.locks.request("_tabby_auth_lock",async()=>{let t;let n=s(),l=null==n?void 0:n.accessToken,i=null==n?void 0:n.refreshToken;if(l){let{iat:i}=(0,r.o)(l);t=u(i)?n:await e()}else i&&(t=await e());t?o(t):d()})}catch(e){d()}}}},23342:function(e,t){"use strict";t.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},18452:function(e,t,n){"use strict";n.d(t,{m:function(){return a},H:function(){return s}});var r=n(3546),l=n(89704),i=n(95686);function a(e,t){let[n,i]=(0,r.useState)(null),a=!1;return(0,r.useEffect)(()=>{if(e.current&&!a){var n;a=!0,i((n=e.current,(0,l.K)(n,{expose:{navigate:t.navigate}})))}},[e.current]),n}function s(e){let[t,n]=(0,r.useState)(null),l=!1;return(0,r.useEffect)(()=>{let t=window.self!==window.top;t&&!l&&(l=!0,n((0,i.c)({expose:{init:e.init,sendMessage:e.sendMessage}})))},[]),t}}},function(e){e.O(0,[872,55,964,4994,652,6201,3449,2578,9421,9317,2672,3882,9989,1454,830,7680,739,3299,1889,6806,4382,6044,2660,3320,7444,1565,6905,3375,5289,1744],function(){return e(e.s=4755)}),_N_E=e.O()}]);
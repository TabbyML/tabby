(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5608],{97895:function(){},32053:function(e,t,s){Promise.resolve().then(s.bind(s,31557))},31557:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e$}});var a=s(36164),n=s(3546),l=s(42891),r=s.n(l),i=s(11978),o=s(83332),c=s(40055),d=s(27257),u=s(98454),h=s(31159),m=s(4951),x=s(80605),f=s(17451),p=s(37266),v=s(70410),j=s(57288),g=s(57830),y=s(68172),b=s(30601),N=s(61249),w=s(91302),k=s(31458),I=s(30220),M=s(81565);let P="community-dialog-shown";function C(){let{status:e}=(0,w.kP)(),[t,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{"authenticated"!==e||localStorage.getItem(P)||(s(!0),localStorage.setItem(P,"true"))},[e]),(0,a.jsx)(I.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(I.cZ,{children:[(0,a.jsxs)(I.fK,{className:"gap-3",children:[(0,a.jsx)(I.$N,{children:"Join the Tabby community"}),(0,a.jsx)(I.Be,{children:"Connect with other contributors building Tabby. Share knowledge, get help, and contribute to the open-source project."})]}),(0,a.jsx)(I.cN,{className:"sm:justify-start",children:(0,a.jsxs)("a",{target:"_blank",href:"https://links.tabbyml.com/join-slack-webserver",className:(0,k.d)(),children:[(0,a.jsx)(M.IconSlack,{className:"-ml-2 h-8 w-8"}),"Join us on Slack"]})})]})})}var S=s(30087),Y=s(63743),D=s(52569),T=s(7449),E=s(84837);let R={ease:"easeOut",duration:.1};function Z(e){let{viewport:t,children:s,className:n,style:l,delay:r}=e;return(0,a.jsx)(E.E.div,{initial:"initial",whileInView:"onscreen",viewport:t,style:l,className:n,children:(0,a.jsx)(E.E.div,{variants:{initial:{opacity:0,y:30,transition:R},onscreen:{opacity:1,y:0,transition:{...R,delay:.2+(r||0)}}},children:s})})}var O=s(51044),z=s(28445),A=s(43240),G=s(97610);let q=n.createContext(null);function _(){let e=n.useContext(q);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let F=n.forwardRef((e,t)=>{let{orientation:s="horizontal",opts:l,setApi:r,plugins:i,className:o,children:c,...d}=e,[u,h]=(0,G.Z)({...l,axis:"horizontal"===s?"x":"y"},i),[m,x]=n.useState(!1),[f,p]=n.useState(!1),v=n.useCallback(e=>{e&&(x(e.canScrollPrev()),p(e.canScrollNext()))},[]),g=n.useCallback(()=>{null==h||h.scrollPrev()},[h]),y=n.useCallback(()=>{null==h||h.scrollNext()},[h]),b=n.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),y())},[g,y]);return n.useEffect(()=>{h&&r&&r(h)},[h,r]),n.useEffect(()=>{if(h)return v(h),h.on("reInit",v),h.on("select",v),()=>{null==h||h.off("select",v)}},[h,v]),(0,a.jsx)(q.Provider,{value:{carouselRef:u,api:h,opts:l,orientation:s||((null==l?void 0:l.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:y,canScrollPrev:m,canScrollNext:f},children:(0,a.jsx)("div",{ref:t,onKeyDownCapture:b,className:(0,j.cn)("relative",o),role:"region","aria-roledescription":"carousel",...d,children:c})})});F.displayName="Carousel";let L=n.forwardRef((e,t)=>{let{className:s,...n}=e,{carouselRef:l,orientation:r}=_();return(0,a.jsx)("div",{ref:l,className:"overflow-hidden",children:(0,a.jsx)("div",{ref:t,className:(0,j.cn)("flex","horizontal"===r?"-ml-4":"-mt-4 flex-col",s),...n})})});L.displayName="CarouselContent";let U=n.forwardRef((e,t)=>{let{className:s,...n}=e,{orientation:l}=_();return(0,a.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,j.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===l?"pl-4":"pt-4",s),...n})});U.displayName="CarouselItem";let $=n.forwardRef((e,t)=>{let{className:s,variant:n="outline",size:l="icon",...r}=e,{orientation:i,scrollPrev:o,canScrollPrev:c}=_();return(0,a.jsxs)(k.z,{ref:t,variant:n,size:l,className:(0,j.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:o,...r,children:[(0,a.jsx)(M.IconChevronLeft,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});$.displayName="CarouselPrevious";let H=n.forwardRef((e,t)=>{let{className:s,variant:n="outline",size:l="icon",...r}=e,{orientation:i,scrollNext:o,canScrollNext:c}=_();return(0,a.jsxs)(k.z,{ref:t,variant:n,size:l,className:(0,j.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!c,onClick:o,...r,children:[(0,a.jsx)(M.IconChevronRight,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Next slide"})]})});H.displayName="CarouselNext";let Q=(0,A.BX)("\n  query readRepositoryRelatedQuestions($sourceId: String!) {\n    readRepositoryRelatedQuestions(sourceId: $sourceId)\n  }\n");function V(e){var t;let{sourceId:s,onClickQuestion:n}=e,[{data:l,operation:r}]=(0,c.aM)({query:Q,variables:{sourceId:s},pause:!s}),i=null==r?void 0:null===(t=r.variables)||void 0===t?void 0:t.sourceId,o=null==l?void 0:l.readRepositoryRelatedQuestions,d=e=>{n(e,i)},u=!!o&&!!i&&i===s;return(0,a.jsx)(z.M,{children:u?(0,a.jsx)(E.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut",delay:.1},children:(0,a.jsxs)(F,{orientation:"vertical",opts:{align:"start",loop:!0},plugins:[(0,O.Z)({delay:5e3,stopOnInteraction:!0,stopOnMouseEnter:!0})],className:"group mt-3 w-full",children:[(0,a.jsx)(L,{className:"h-14 pt-1.5",children:o.map((e,t)=>(0,a.jsx)(U,{children:(0,a.jsx)("div",{className:"mx-auto flex max-w-[80%] justify-center overflow-hidden p-1 text-sm",children:(0,a.jsx)("span",{className:"cursor-pointer truncate rounded-lg bg-muted px-4 py-1 transition-opacity hover:bg-muted/70",onClick:t=>d(e),children:e})})},"".concat(e,"_").concat(t)))}),(0,a.jsx)($,{className:"absolute left-auto right-10 top-1 z-10 h-6 w-6 opacity-0 group-hover:opacity-100"}),(0,a.jsx)(H,{className:"absolute left-auto right-2 top-1 z-10 h-6 w-6 opacity-0 group-hover:opacity-100"})]})}):null})}var K=s(94755),B=s(36619),J=s(99092),X=s.n(J),W=s(72223),ee=s(42390),et=s.n(ee),es=s(18500),ea=s(9010),en=s(35814),el=s(39018),er=s.n(el),ei=s(60079),eo=s(994),ec=s(37568),ed=s(16294),eu=s(82382),eh=s(85948),em=s(79972);function ex(e){let{active:t,payload:s}=e;if(t&&s&&s.length){let{value:e,views:t,name:n}=s[0].payload;return t?(0,a.jsx)(em.Zb,{children:(0,a.jsxs)(em.aY,{className:"flex flex-col gap-y-0.5 px-4 py-2 text-sm",children:[(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-3 inline-block w-20",children:"Rate:"}),(0,a.jsxs)("b",{children:[e,"%"]})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:n})]})}):null}return null}function ef(e){let{active:t,payload:s,type:n}=e;if(t&&s&&s.length){let{views:e,selects:t,name:l}=s[0].payload;return e?(0,a.jsx)(em.Zb,{children:(0,a.jsxs)(em.aY,{className:"flex flex-col gap-y-0.5 px-4 py-2 text-sm",children:[("view"===n||"all"===n)&&(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-3 inline-block w-20",children:"Completions:"}),(0,a.jsx)("b",{children:e})]}),("accept"===n||"all"===n)&&(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-3 inline-block w-20",children:"Acceptances:"}),(0,a.jsx)("b",{children:t})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:l})]})}):null}return null}function ep(e){let{from:t,to:s,dailyStats:n}=e,{theme:l}=(0,ea.X)(),r=(0,en.Z)(null==n?void 0:n.map(e=>e.views)),i=(0,en.Z)(null==n?void 0:n.map(e=>e.selects)),o=(0,B.Z)({start:t,end:s}),c={},d={};null==n||n.forEach(e=>{let t=X()(e.start).format("YYYY-MM-DD");c[t]=c[t]||0,d[t]=d[t]||0,c[t]+=e.views,d[t]+=e.selects},{});let u=0===r?0:(i/r*100).toFixed(2),h=o.map(e=>{let t=X()(e).format("YYYY-MM-DD"),s=c[t]||0,a=d[t]||0;return{name:X()(e).format("MMMM D"),value:0===s?0:parseFloat((a/s*100).toFixed(2)),selects:a,views:s}}),m=o.map(e=>{let t=X()(e).format("YYYY-MM-DD"),s=c[t]||0,a=d[t]||0,n=s-a;return{name:X()(e).format("MMMM D"),views:s,selects:a,pending:0===s?.5:n,realPending:0===s?0:n,viewPlaceholder:0===s?.5:0,selectPlaceholder:0===a?.5:0}});return(0,a.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-5 md:flex-row md:space-x-4 md:space-y-0 xl:justify-start",children:[(0,a.jsx)(Z,{viewport:{amount:.1},delay:.15,className:"flex-1 self-stretch",children:(0,a.jsxs)(em.Zb,{className:"flex flex-col justify-between self-stretch rounded-2xl bg-transparent pb-4",children:[(0,a.jsx)(em.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,a.jsx)(em.ll,{className:"text-base font-medium tracking-normal",children:"Acceptance Rate"})}),(0,a.jsx)(em.aY,{className:"mb-1 px-4 py-0",children:(0,a.jsxs)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:[u,"%"]})}),(0,a.jsx)(ei.h,{width:"100%",height:68,children:(0,a.jsxs)(eo.w,{data:h,margin:{top:10,right:20,left:15,bottom:5},children:[(0,a.jsx)(ec.x,{type:"monotone",dataKey:"value",stroke:"dark"===l?"#e8e1d3":"#54452c",strokeWidth:1.5}),(0,a.jsx)(ed.u,{cursor:{fill:"transparent"},content:(0,a.jsx)(ex,{})})]})})]})}),(0,a.jsx)(Z,{viewport:{amount:.1},delay:.2,className:"flex-1 self-stretch",children:(0,a.jsxs)(em.Zb,{className:"flex flex-col justify-between self-stretch bg-transparent pb-4",children:[(0,a.jsx)(em.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,a.jsx)(em.ll,{className:"text-base font-medium tracking-normal",children:"Completions"})}),(0,a.jsx)(em.aY,{className:"mb-1 px-4 py-0",children:(0,a.jsx)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:er()(r).format("0,0")})}),(0,a.jsx)(ei.h,{width:"100%",height:68,children:(0,a.jsxs)(eu.v,{data:m,margin:{top:0===r?30:5,right:15,left:15,bottom:0},children:[(0,a.jsx)(eh.$,{dataKey:"views",stackId:"stats",fill:"dark"===l?"#e8e1d3":"#54452c",radius:3}),(0,a.jsx)(eh.$,{dataKey:"viewPlaceholder",stackId:"stats",fill:"dark"===l?"#423929":"#e8e1d3",radius:3}),(0,a.jsx)(ed.u,{cursor:{fill:"transparent"},content:(0,a.jsx)(ef,{type:"view"})})]})})]})}),(0,a.jsx)(Z,{viewport:{amount:.1},delay:.25,className:"flex-1 self-stretch",children:(0,a.jsxs)(em.Zb,{className:"flex flex-col justify-between self-stretch bg-transparent pb-4",children:[(0,a.jsx)(em.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,a.jsx)(em.ll,{className:"text-base font-medium tracking-normal",children:"Acceptances"})}),(0,a.jsx)(em.aY,{className:"mb-1 px-4 py-0",children:(0,a.jsx)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:er()(i).format("0,0")})}),(0,a.jsx)(ei.h,{width:"100%",height:68,children:(0,a.jsxs)(eu.v,{data:m,margin:{top:0===r?30:5,right:15,left:15,bottom:0},children:[(0,a.jsx)(eh.$,{dataKey:"selects",stackId:"stats",fill:"dark"===l?"#e8e1d3":"#54452c",radius:3}),(0,a.jsx)(eh.$,{dataKey:"selectPlaceholder",stackId:"stats",fill:"dark"===l?"#423929":"#e8e1d3",radius:3}),(0,a.jsx)(ed.u,{cursor:{fill:"transparent"},content:(0,a.jsx)(ef,{type:"accept"})})]})})]})})]})}function ev(e){let{data:t}=e,{theme:s}=(0,ea.X)(),n=(0,K.iP)(),l=n.width||0;return(0,a.jsx)("div",{className:"h-[152px]",children:(0,a.jsx)(W.ZP,{data:t,colorScheme:"dark"===s?"dark":"light",theme:{light:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],dark:["rgb(45, 51, 59)","#0e4429","#006d32","#26a641","#39d353"]},blockSize:l>=968?12:11,hideTotalCount:!0,fontSize:12})})}function ej(){var e,t,s;let n,l;let[{data:r}]=(0,u.P)(),o=(0,i.useSearchParams)(),d=(0,x.UA)(),h=d||"true"===o.get("sample"),m=X()().subtract(6,"day").startOf("day").utc().format(),f=X()().endOf("day").utc().format(),[{data:p,fetching:j}]=(0,c.aM)({query:v.Cl,variables:{start:m,end:f,users:null==r?void 0:null===(e=r.me)||void 0===e?void 0:e.id}});if(h){let e=(0,B.Z)({start:X()().subtract(6,"day").toDate(),end:X()().toDate()});n=e.map(e=>{let t=[es.SQ.Typescript,es.SQ.Python,es.SQ.Rust],s=et()(X()(e).format("YYYY-MM-DD")+(null==r?void 0:r.me.id)),a=Math.ceil(20*s()),n=Math.ceil(a/.35);return{start:X()(e).utc().format(),end:X()(e).add(1,"day").utc().format(),completions:n,selects:a,views:n,language:t[a%t.length]}})}else n=null==p?void 0:p.dailyStats.map(e=>({start:e.start,end:e.end,completions:e.completions,selects:e.selects,views:e.views,language:e.language}));let[{data:g,fetching:y}]=(0,c.aM)({query:v.Y6,variables:{users:null==r?void 0:null===(t=r.me)||void 0===t?void 0:t.id}}),b=0;if(h){let e=(0,B.Z)({start:X()().toDate(),end:X()().subtract(365,"days").toDate()});l=e.map(e=>{let t=et()(X()(e).format("YYYY-MM-DD")+(null==r?void 0:r.me.id)),s=Math.ceil(20*t()),a=s+Math.floor(10*t());return{start:X()(e).format("YYYY-MM-DD[T]HH:mm:ss[Z]"),end:X()(e).add(1,"day").format("YYYY-MM-DD[T]HH:mm:ss[Z]"),completions:a,selects:s,views:a}})}else l=null==g?void 0:g.dailyStatsInPastYear.map(e=>({start:e.start,end:e.end,completions:e.completions,selects:e.selects,views:e.views}));let N=(null==l?void 0:l.reduce((e,t)=>{let s=X().utc(t.start).format("YYYY-MM-DD");return b+=t.views+t.selects,{...e,[s]:t.views}},{}))||{},w=Array(365).fill("").map((e,t)=>{let s=X()().subtract(t,"days").format("YYYY-MM-DD"),a=N[s]||0;return{date:s,count:a,level:Math.min(4,Math.ceil(a/5))}}).reverse();return(null==r?void 0:null===(s=r.me)||void 0===s?void 0:s.id)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,{viewport:{amount:.1},style:{width:"100%"},delay:.1,children:(0,a.jsxs)("div",{className:"rounded-2xl border px-[1.125rem] py-4",children:[(0,a.jsxs)("div",{className:"mb-3 text-base",children:[(0,a.jsx)("span",{className:"font-semibold",children:b})," ","activities in the past year"]}),(0,a.jsx)(ev,{data:w})]})}),(0,a.jsx)(ep,{dailyStats:n,from:X()().subtract(6,"day").toDate(),to:X()().toDate()})]}):(0,a.jsx)(a.Fragment,{})}var eg=s(36758);let ey={threadsPageNo:1,myThreadsPageNo:1,threadsTab:"all"},eb=(0,d.Ue)()(()=>({...ey})),eN=eb.setState,ew=()=>eN(()=>({threadsPageNo:ey.threadsPageNo})),ek=e=>eN(()=>({threadsPageNo:e})),eI=e=>eN(()=>({myThreadsPageNo:e})),eM=()=>eN(()=>({myThreadsPageNo:ey.threadsPageNo})),eP=e=>eN(()=>({threadsTab:e}));var eC=s(50538),eS=s(6230),eY=s(79876),eD=s(49506),eT=s(70652),eE=s.n(eT),eR=s(54767),eZ=s(21808),eO=s(3448),ez=s(74787),eA=s(83171);let eG=(0,n.createContext)({});function eq(e){var t,s,l;let{data:r,onNavigateToThread:i}=e,o=r.node.userId,d=r.node.id,{sources:u,allUsers:h,fetchingSources:m}=(0,n.useContext)(eG),[{data:x,fetching:f}]=(0,c.aM)({query:v.r4,variables:{first:1,threadId:r.node.id}}),p=null==x?void 0:null===(t=x.threadMessages)||void 0===t?void 0:t.edges,g=(0,n.useMemo)(()=>(null==p?void 0:p.length)?(0,j.i8)(u||[],p[0].node.content):"",[p,u]),y=(0,n.useMemo)(()=>{let e=g.slice(0,eZ.$I);return(0,eR.Z)(e)},[g]),b=(0,n.useMemo)(()=>null==h?void 0:h.find(e=>e.id===r.node.userId),[h,o]);return(0,a.jsx)(eE(),{href:g?"/search/".concat(y,"-").concat(d):"/search/".concat(d),onClick:i,children:(0,a.jsxs)("div",{className:"transform-bg group flex-1 overflow-hidden rounded-lg px-3 py-2 hover:bg-accent",children:[(0,a.jsxs)("div",{className:"mb-1.5 flex items-center gap-2",children:[(0,a.jsx)(M.IconFiles,{className:"shrink-0"}),(0,a.jsx)(eS.Z,{loading:f||m,fallback:(0,a.jsx)("div",{className:"w-full py-1.5",children:(0,a.jsx)(eO.O,{className:"w-[60%]"})}),children:(0,a.jsx)(eA.fh,{className:"break-anywhere truncate text-lg font-medium",sources:u,message:(0,ez.HV)(null!==(l=null==p?void 0:null===(s=p[0])||void 0===s?void 0:s.node.content)&&void 0!==l?l:"")})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.Yt,{user:b,className:"mr-0.5 h-4 w-4 shrink-0"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-0.5",children:[(0,a.jsx)("div",{className:"text-sm",children:(null==b?void 0:b.name)||(null==b?void 0:b.email)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"\xb7"}),(0,a.jsx)("div",{className:"whitespace-nowrap text-xs text-muted-foreground",children:(0,j.sx)(r.node.createdAt,"Asked")})]})]})]})})}function e_(){var e,t,s;let{fetchingUsers:l,onNavigateToThread:r}=(0,n.useContext)(eG),i=eb(e=>e.threadsPageNo),[o,d]=(0,n.useState)(),[u,h]=(0,n.useState)(i),[{data:m,fetching:x}]=(0,c.aM)({query:v.XL,variables:{last:25,before:o,isEphemeral:!1}}),f=null==m?void 0:m.threads.pageInfo,p=null==m?void 0:null===(t=m.threads)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length,g=Math.ceil((p||0)/25),y=g>1||1===g&&(null==f?void 0:f.hasPreviousPage),b=(0,eY.S)(p||0,u,25),N=(0,n.useMemo)(()=>{var e;let t=null==m?void 0:null===(e=m.threads)||void 0===e?void 0:e.edges;if(!(null==t?void 0:t.length))return[];if(x&&u>=2){let e=t.slice().reverse().slice((u-2)*25,(u-1)*25);return e||[]}return t.slice().reverse().slice((u-1)*25,25*u)},[null==m?void 0:null===(s=m.threads)||void 0===s?void 0:s.edges,u,x]),w=()=>{let e=null==f?void 0:f.startCursor;if(e&&(null==m?void 0:m.threads.edges.length)&&m.threads.edges.findIndex(t=>t.cursor===e)>-1)d(e);else{var t;d(null==m?void 0:null===(t=m.threads.edges[0])||void 0===t?void 0:t.cursor)}},k=!!(null==f?void 0:f.hasPreviousPage),I=x||!N.length||u>=g&&!(null==f?void 0:f.hasPreviousPage),P=()=>{ek(u),r()};return(0,n.useEffect)(()=>{ew()},[]),(0,a.jsx)("div",{className:(0,j.cn)("w-full"),children:(0,a.jsx)(E.E.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{ease:"easeOut",delay:.3},children:(0,a.jsx)(eS.Z,{loading:x||l,fallback:(0,a.jsx)("div",{className:"my-12 flex justify-center",children:(0,a.jsx)(M.IconSpinner,{className:"h-8 w-8"})}),delay:600,children:(0,a.jsxs)("div",{className:"relative flex flex-col gap-3 text-sm",children:[N.map(e=>(0,a.jsx)(eq,{data:e,onNavigateToThread:P},e.node.id)),x&&(0,a.jsx)("div",{className:"absolute inset-0 bottom-10 z-10 flex items-center justify-center backdrop-blur-sm"}),y&&(0,a.jsx)(eD.tl,{className:(0,j.cn)("flex items-center justify-end"),children:(0,a.jsxs)(eD.ng,{children:[(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.dN,{disabled:1===u,onClick:()=>{if(1===u)return;let e=u-1;h(e)}})}),b.map((e,t)=>(0,a.jsx)(eD.nt,{onClick:()=>{"number"==typeof e&&h(e)},children:"number"==typeof e?(0,a.jsx)(eD.kN,{className:"cursor-pointer",isActive:e===u,children:e}):(0,a.jsx)(eD.Dj,{})},"".concat(e,"-").concat(t))),k&&(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.Dj,{})}),(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.$0,{disabled:I,onClick:()=>{if(I)return;let e=u+1;h(e),e>g&&w()}})})]})})]})})})})}function eF(){var e,t,s;let{fetchingUsers:l,onNavigateToThread:r}=(0,n.useContext)(eG),i=eb(e=>e.myThreadsPageNo),[o,d]=(0,n.useState)(),[u,h]=(0,n.useState)(i),[{data:m,fetching:x}]=(0,c.aM)({query:v.rm,variables:{last:25,before:o}}),f=null==m?void 0:m.myThreads.pageInfo,p=null==m?void 0:null===(t=m.myThreads)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length,g=Math.ceil((p||0)/25),y=g>1||1===g&&(null==f?void 0:f.hasPreviousPage),b=(0,eY.S)(p||0,u,25),N=(0,n.useMemo)(()=>{var e;let t=null==m?void 0:null===(e=m.myThreads)||void 0===e?void 0:e.edges;if(!(null==t?void 0:t.length))return[];if(x&&u>=2){let e=t.slice().reverse().slice((u-2)*25,(u-1)*25);return e||[]}return t.slice().reverse().slice((u-1)*25,25*u)},[null==m?void 0:null===(s=m.myThreads)||void 0===s?void 0:s.edges,u,x]),w=()=>{let e=null==f?void 0:f.startCursor;if(e&&(null==m?void 0:m.myThreads.edges.length)&&m.myThreads.edges.findIndex(t=>t.cursor===e)>-1)d(e);else{var t;d(null==m?void 0:null===(t=m.myThreads.edges[0])||void 0===t?void 0:t.cursor)}},k=!!(null==f?void 0:f.hasPreviousPage),I=x||!N.length||u>=g&&!(null==f?void 0:f.hasPreviousPage),P=()=>{eI(u),r()};return(0,n.useEffect)(()=>{eM()},[]),(0,a.jsx)("div",{className:(0,j.cn)("w-full"),children:(0,a.jsx)(E.E.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{ease:"easeOut",delay:.3},children:(0,a.jsx)(eS.Z,{loading:x||l,fallback:(0,a.jsx)("div",{className:"my-12 flex justify-center",children:(0,a.jsx)(M.IconSpinner,{className:"h-8 w-8"})}),delay:600,children:(0,a.jsxs)("div",{className:"relative flex flex-col gap-3 text-sm",children:[N.map(e=>(0,a.jsx)(eq,{data:e,onNavigateToThread:P},e.node.id)),x&&(0,a.jsx)("div",{className:"absolute inset-0 bottom-10 z-10 flex items-center justify-center backdrop-blur-sm"}),y&&(0,a.jsx)(eD.tl,{className:(0,j.cn)("flex items-center justify-end"),children:(0,a.jsxs)(eD.ng,{children:[(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.dN,{disabled:1===u,onClick:()=>{if(1===u)return;let e=u-1;h(e)}})}),b.map((e,t)=>(0,a.jsx)(eD.nt,{onClick:()=>{"number"==typeof e&&h(e)},children:"number"==typeof e?(0,a.jsx)(eD.kN,{className:"cursor-pointer",isActive:e===u,children:e}):(0,a.jsx)(eD.Dj,{})},"".concat(e,"-").concat(t))),k&&(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.Dj,{})}),(0,a.jsx)(eD.nt,{children:(0,a.jsx)(eD.$0,{disabled:I,onClick:()=>{if(I)return;let e=u+1;h(e),e>g&&w()}})})]})})]})})})})}function eL(e){var t,s;let{className:l,onNavigateToThread:r}=e,i=eb(e=>e.threadsTab),[o,d]=(0,eg.d)(),[{data:u,fetching:h}]=(0,c.aM)({query:v.Gx}),[{data:m,fetching:x}]=(0,c.aM)({query:v.XL,variables:{last:25,isEphemeral:!1,before:void 0}}),[{data:f,fetching:p}]=(0,c.aM)({query:v.rm,variables:{last:25,before:void 0}}),g=x||p||h||d,y=!!(null==m?void 0:null===(s=m.threads)||void 0===s?void 0:null===(t=s.edges)||void 0===t?void 0:t.length),b=!!(null==f?void 0:f.myThreads.edges.length);return((0,n.useEffect)(()=>{!g&&(y||b)&&(y||"all"!==i?b||"mine"!==i||eP("all"):eP("mine"))},[g,y,b,i]),y||b)?(0,a.jsx)(eG.Provider,{value:{allUsers:o,fetchingUsers:d,sources:null==u?void 0:u.contextInfo.sources,fetchingSources:h,onNavigateToThread:r},children:(0,a.jsx)("div",{className:(0,j.cn)("w-full",l),children:(0,a.jsx)(E.E.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{ease:"easeOut",delay:.3},children:(0,a.jsx)(eS.Z,{loading:g,fallback:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(M.IconSpinner,{className:"h-8 w-8"})}),delay:600,children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eC.mQ,{value:i,onValueChange:e=>eP(e),children:[(0,a.jsx)("div",{className:"flex items-center justify-between pb-3",children:(0,a.jsxs)(eC.dr,{className:"w-full justify-start border-b bg-transparent p-0",children:[!!y&&(0,a.jsx)(eC.SP,{value:"all",className:"rounded-none border-b-2 border-b-transparent bg-transparent px-3 py-2 text-base font-medium shadow-none data-[state=active]:border-b-primary data-[state=active]:text-foreground data-[state=active]:shadow-none",children:"Recent Activities"}),!!b&&(0,a.jsx)(eC.SP,{value:"mine",className:"rounded-none border-b-2 border-b-transparent bg-transparent px-3 py-2 text-base font-medium shadow-none data-[state=active]:border-b-primary data-[state=active]:text-foreground data-[state=active]:shadow-none",children:"My Activities"})]})}),(0,a.jsx)(eC.nU,{value:"all",children:(0,a.jsx)(e_,{})}),(0,a.jsx)(eC.nU,{value:"mine",children:(0,a.jsx)(eF,{})})]})})})})})}):null}function eU(){let e=(0,n.useRef)(!1),t=(0,n.useRef)(null),[{data:s}]=(0,u.P)(),l=(0,x.vN)(),w=(0,x.xG)(),[k]=(0,b.Hb)(),I=(0,n.useRef)(null),M=(0,i.useRouter)(),[P,C]=(0,n.useState)(!1),[{data:E,fetching:R}]=(0,c.aM)({query:v.Gx}),O=(0,d.oR)(p.CR,e=>e.homePage),{selectedModel:z,isFetchingModels:A,models:G}=(0,h.Vq)(),{selectedRepository:q,isFetchingRepositories:_}=(0,m.Q)(),F=!!(null==s?void 0:s.me)||!l;(0,n.useEffect)(()=>{M.prefetch("/search")},[M]),(0,n.useLayoutEffect)(()=>{e.current||(O&&setTimeout(()=>{var e;null===(e=t.current)||void 0===e||e.scrollTo({top:Number(O)}),(0,p.wh)()}),e.current=!0)},[]);let L=k?{height:"calc(100vh - ".concat(b.wt,")")}:{height:"100vh"};return(0,a.jsxs)(g.ScrollArea,{style:L,ref:t,children:[(0,a.jsx)("header",{className:"transition-top fixed right-0 z-10 flex h-16 items-center justify-end px-4 lg:px-10",style:{top:k?b.wt:0},children:(0,a.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,a.jsx)(y.q,{children:(0,a.jsx)(Y.T,{})}),(0,a.jsx)(N.L,{}),(0,a.jsx)(T.Z,{showHome:!1,showSetting:!0,children:(0,a.jsx)(D.SQ,{className:"h-10 w-10 border"})})]})}),F&&(0,a.jsx)("main",{className:"flex-col items-center justify-center pb-4 pt-16 lg:flex",ref:I,children:(0,a.jsxs)("div",{className:"mx-auto flex w-full flex-col items-center gap-6 px-10 lg:-mt-[2vh] lg:max-w-4xl lg:px-0",children:[(0,a.jsx)(Z,{viewport:{amount:.1},children:(0,a.jsx)(r(),{src:o.Z,alt:"logo",width:192,className:(0,j.cn)("mt-4 invert dark:invert-0",{"mb-4":w,"mb-2":!w})})}),w&&(0,a.jsxs)(Z,{viewport:{amount:.1},style:{width:"100%"},delay:.05,children:[(0,a.jsx)(S.Z,{onSearch:(e,t)=>{C(!0),(0,f.UP)({content:e,context:t}),M.push("/search")},showBetaBadge:!0,autoFocus:!0,loadingWithSpinning:!0,isLoading:P,cleanAfterSearch:!1,contextInfo:null==E?void 0:E.contextInfo,fetchingContextInfo:R,modelName:z,onSelectModel:e=>{(0,f.Eg)(e)},repoSourceId:null==q?void 0:q.sourceId,onSelectRepo:e=>{(0,f.xt)(e)},isInitializingResources:A||_,models:G}),(0,a.jsx)(V,{sourceId:null==q?void 0:q.sourceId,onClickQuestion:(e,t)=>{(0,f.xt)(t),(0,f.UP)({content:e,context:{docSourceIds:[t],codeSourceIds:[t],modelName:z}}),M.push("/search")}})]}),(0,a.jsx)(ej,{}),(0,a.jsx)(eL,{className:"lg:mt-6",onNavigateToThread:()=>{t.current&&(0,p.F0)(t.current.scrollTop)}})]})})]})}function e$(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(eU,{}),(0,a.jsx)(C,{})]})}},74787:function(e,t,s){"use strict";s.d(t,{Gn:function(){return o},HV:function(){return d},U7:function(){return m},_t:function(){return u},jZ:function(){return h},xe:function(){return c}});var a=s(36164),n=s(31745),l=s(74038),r=s(57288),i=s(81565);function o(e){let t=(0,r.eo)(e.filepath).filepath,s={fileItem:e,name:(0,r.UA)(t),filepath:t,category:"file",icon:(0,a.jsx)(i.IconFile,{})};try{return{id:JSON.stringify(e.filepath),...s}}catch(e){return{id:(0,r.x0)(),...s}}}function c(e){let t=(0,r.eo)(e.filepath).filepath;return{category:"symbol",id:e.label,name:e.label,filepath:t,fileItem:e,icon:(0,a.jsx)(n.Z,{className:"h-4 w-4"})}}function d(e){let t,s=e;for(;null!==(t=l.My.exec(e));)try{let e=t[1],a=JSON.parse(e),n="filepath"in a?a.filepath:a.uri,l=(0,r.UA)(n);s=s.replace(t[0],"@".concat(l))}catch(e){continue}for(;null!==(t=l.nk.exec(e));)try{let e=t[1],a=JSON.parse(e),n=a.label||"";s=s.replace(t[0],"@".concat(n))}catch(e){continue}return s}function u(e){let t=[],s=0;return e.replace(l.My,(a,n,l)=>{l>s&&t.push({type:"text",text:e.slice(s,l)});try{t.push({type:"mention",attrs:{category:"file",fileItem:{filepath:JSON.parse(n)}}})}catch(e){}return s=l+a.length,a}),s<e.length&&t.push({type:"text",text:e.slice(s)}),t}let h=(e,t)=>{var s,a,n,l;let r=e.filepath===t.filepath&&e.baseDir===t.baseDir&&e.gitUrl===t.gitUrl;return e.range||t.range?r&&(null===(s=e.range)||void 0===s?void 0:s.start)===(null===(a=t.range)||void 0===a?void 0:a.start)&&(null===(n=e.range)||void 0===n?void 0:n.end)===(null===(l=t.range)||void 0===l?void 0:l.end):r};function m(e){let t=[];return e.state.doc.descendants(e=>{"mention"===e.type.name&&t.push(e.attrs)}),t}},83171:function(e,t,s){"use strict";s.d(t,{fh:function(){return m},pf:function(){return d},t:function(){return u}});var a=s(36164),n=s(3546),l=s(2435),r=s(74038),i=s(18500),o=s(57288),c=s(81565);function d(e){let{kind:t,label:s,className:n}=e;return(0,a.jsxs)(l.T5,{as:"span",className:(0,o.cn)("source-mention rounded-sm px-1",n),children:[(0,a.jsx)(h,{kind:t,className:"self-center"}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:s})]})}function u(e){let{kind:t,label:s,id:n}=e.node.attrs;return(0,a.jsx)(d,{kind:t,label:s,id:n})}function h(e){let{kind:t,...s}=e;switch(t){case i.ri.Doc:return(0,a.jsx)(c.IconEmojiBook,{...s});case i.ri.Web:return(0,a.jsx)(c.IconEmojiGlobe,{...s});case i.ri.Git:return(0,a.jsx)(c.IconCode,{...s});case i.ri.Github:return(0,a.jsx)(c.IconGitHub,{...s});case i.ri.Gitlab:return(0,a.jsx)(c.IconGitLab,{...s});default:return null}}function m(e){let{message:t,sources:s,className:l}=e,i=(0,n.useMemo)(()=>{var e;if(!t)return null;let n=null!==(e=t.split("\n")[0])&&void 0!==e?e:"";return n.split(r.zf).map((e,t)=>{if(t%2==1){let n=null==s?void 0:s.find(t=>t.sourceId===e);return n?(0,a.jsx)(d,{id:n.sourceId,kind:n.sourceKind,label:n.sourceName,className:"rounded-md border border-[#b3ada0] border-opacity-30 bg-[#e8e1d3] py-[1px] text-sm dark:bg-[#333333]"},t):null}return e})},[s,t]);return(0,a.jsx)("div",{className:(0,o.cn)(l),children:i})}},37034:function(e,t,s){"use strict";s.d(t,{k:function(){return r}});var a=s(36164),n=s(18500),l=s(81565);function r(e){let{kind:t,gitIcon:s,...r}=e;switch(t){case n.ri.Doc:return(0,a.jsx)(l.IconEmojiBook,{...r});case n.ri.Web:return(0,a.jsx)(l.IconEmojiGlobe,{...r});case n.ri.Github:return(0,a.jsx)(l.IconGitHub,{...r});case n.ri.Gitlab:return(0,a.jsx)(l.IconGitLab,{...r});case n.ri.Git:return s||(0,a.jsx)(l.IconCode,{...r});default:return null}}},49506:function(e,t,s){"use strict";s.d(t,{$0:function(){return m},Dj:function(){return x},dN:function(){return h},kN:function(){return u},ng:function(){return c},nt:function(){return d},tl:function(){return o}});var a=s(36164),n=s(3546),l=s(57288),r=s(31458),i=s(81565);let o=e=>{let{className:t,...s}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",t),...s})};o.displayName="Pagination";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("ul",{ref:t,className:(0,l.cn)("flex flex-row items-center gap-1",s),...n})});c.displayName="PaginationContent";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("li",{ref:t,className:(0,l.cn)("",s),...n})});d.displayName="PaginationItem";let u=e=>{let{className:t,isActive:s,size:n="icon",...i}=e;return(0,a.jsx)("a",{"aria-current":s?"page":void 0,className:(0,l.cn)("select-none",(0,r.d)({variant:s?"outline":"ghost",size:n}),t),...i})};u.displayName="PaginationLink";let h=e=>{let{className:t,disabled:s,...n}=e;return(0,a.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pl-2.5",s&&"cursor-not-allowed text-muted-foreground",t),...n,children:[(0,a.jsx)(i.IconChevronLeft,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]})};h.displayName="PaginationPrevious";let m=e=>{let{className:t,disabled:s,...n}=e;return(0,a.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pr-2.5",s&&"cursor-not-allowed text-muted-foreground",t),...n,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(i.IconChevronRight,{className:"h-4 w-4"})]})};m.displayName="PaginationNext";let x=e=>{let{className:t,...s}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,l.cn)("flex h-9 w-9 items-center justify-center",t),...s,children:[(0,a.jsx)(i.IconMore,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};x.displayName="PaginationEllipsis"},21808:function(e,t,s){"use strict";s.d(t,{$6:function(){return l},$I:function(){return r},L8:function(){return n},ir:function(){return i},o0:function(){return a},rZ:function(){return o}});let a="name@yourcompany.com",n=20,l={DEMO_AUTO_LOGIN:"_tabby_demo_autologin"},r=48,i="NOT_FOUND",o="\n"},36758:function(e,t,s){"use strict";s.d(t,{d:function(){return r}});var a=s(3546),n=s(40055),l=s(70410);function r(){let[{data:e,fetching:t,error:s}]=(0,n.aM)({query:l.TH}),r=(0,a.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.users.edges.map(e=>e.node))&&void 0!==t?t:[]},[null==e?void 0:e.users]);return[r,t,s]}},79876:function(e,t,s){"use strict";s.d(t,{S:function(){return n}});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:e},(e,s)=>s+t)},n=(e,t,s)=>{let n=Math.ceil(e/s);return n<=5?a(n):t<=3?[1,2,3,4,"...",n]:t<n-2?[1,"...",t-1,t,t+1,"...",n]:[1,"...",...a(4,n-3)]}}},function(e){e.O(0,[7565,8415,4648,6527,7430,55,1652,340,4007,2546,1283,3087,2578,8511,4421,1454,1002,6805,4546,6065,9275,5605,3721,2991,8994,8160,7023,9604,317,7288,1565,4656,1363,9634,8708,3375,5289,1744],function(){return e(e.s=32053)}),_N_E=e.O()}]);
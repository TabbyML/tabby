(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5608],{97895:function(){},52419:function(e,t,n){Promise.resolve().then(n.bind(n,73487))},73487:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eL}});var r=n(36164),a=n(3546),s=n(42891),l=n.n(s),i=n(11978),o=n(83332),c=n(40055),d=n(27257),u=n(98454),m=n(31159),f=n(4951),x=n(80605);let h={threadsPageNo:1},p=(0,d.Ue)()(()=>({...h})),v=p.setState,g=()=>v(()=>({threadsPageNo:h.threadsPageNo})),j=e=>v(()=>({threadsPageNo:e}));var y=n(47241),b=n(37266),N=n(70410),w=n(57288),k=n(57830),I=n(68172),M=n(30601),C=n(61249),S=n(91302),Y=n(31458),R=n(30220),P=n(81565);let E="community-dialog-shown";function D(){let{status:e}=(0,S.kP)(),[t,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{"authenticated"!==e||localStorage.getItem(E)||(n(!0),localStorage.setItem(E,"true"))},[e]),(0,r.jsx)(R.Vq,{open:t,onOpenChange:n,children:(0,r.jsxs)(R.cZ,{children:[(0,r.jsxs)(R.fK,{className:"gap-3",children:[(0,r.jsx)(R.$N,{children:"Join the Tabby community"}),(0,r.jsx)(R.Be,{children:"Connect with other contributors building Tabby. Share knowledge, get help, and contribute to the open-source project."})]}),(0,r.jsx)(R.cN,{className:"sm:justify-start",children:(0,r.jsxs)("a",{target:"_blank",href:"https://links.tabbyml.com/join-slack-webserver",className:(0,Y.d)(),children:[(0,r.jsx)(P.IconSlack,{className:"-ml-2 h-8 w-8"}),"Join us on Slack"]})})]})})}var Z=n(23057),z=n(63743),A=n(52569),O=n(7449),T=n(84837);let _={ease:"easeOut",duration:.1};function $(e){let{viewport:t,children:n,className:a,style:s,delay:l}=e;return(0,r.jsx)(T.E.div,{initial:"initial",whileInView:"onscreen",viewport:t,style:s,className:a,children:(0,r.jsx)(T.E.div,{variants:{initial:{opacity:0,y:30,transition:_},onscreen:{opacity:1,y:0,transition:{..._,delay:.2+(l||0)}}},children:n})})}var F=n(51044),G=n(28445),L=n(43240),H=n(97610);let K=a.createContext(null);function q(){let e=a.useContext(K);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let V=a.forwardRef((e,t)=>{let{orientation:n="horizontal",opts:s,setApi:l,plugins:i,className:o,children:c,...d}=e,[u,m]=(0,H.Z)({...s,axis:"horizontal"===n?"x":"y"},i),[f,x]=a.useState(!1),[h,p]=a.useState(!1),v=a.useCallback(e=>{e&&(x(e.canScrollPrev()),p(e.canScrollNext()))},[]),g=a.useCallback(()=>{null==m||m.scrollPrev()},[m]),j=a.useCallback(()=>{null==m||m.scrollNext()},[m]),y=a.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),j())},[g,j]);return a.useEffect(()=>{m&&l&&l(m)},[m,l]),a.useEffect(()=>{if(m)return v(m),m.on("reInit",v),m.on("select",v),()=>{null==m||m.off("select",v)}},[m,v]),(0,r.jsx)(K.Provider,{value:{carouselRef:u,api:m,opts:s,orientation:n||((null==s?void 0:s.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:j,canScrollPrev:f,canScrollNext:h},children:(0,r.jsx)("div",{ref:t,onKeyDownCapture:y,className:(0,w.cn)("relative",o),role:"region","aria-roledescription":"carousel",...d,children:c})})});V.displayName="Carousel";let B=a.forwardRef((e,t)=>{let{className:n,...a}=e,{carouselRef:s,orientation:l}=q();return(0,r.jsx)("div",{ref:s,className:"overflow-hidden",children:(0,r.jsx)("div",{ref:t,className:(0,w.cn)("flex","horizontal"===l?"-ml-4":"-mt-4 flex-col",n),...a})})});B.displayName="CarouselContent";let U=a.forwardRef((e,t)=>{let{className:n,...a}=e,{orientation:s}=q();return(0,r.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,w.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===s?"pl-4":"pt-4",n),...a})});U.displayName="CarouselItem";let J=a.forwardRef((e,t)=>{let{className:n,variant:a="outline",size:s="icon",...l}=e,{orientation:i,scrollPrev:o,canScrollPrev:c}=q();return(0,r.jsxs)(Y.z,{ref:t,variant:a,size:s,className:(0,w.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!c,onClick:o,...l,children:[(0,r.jsx)(P.IconArrowRight,{className:"h-4 w-4 rotate-180"}),(0,r.jsx)("span",{className:"sr-only",children:"Previous slide"})]})});J.displayName="CarouselPrevious";let W=a.forwardRef((e,t)=>{let{className:n,variant:a="outline",size:s="icon",...l}=e,{orientation:i,scrollNext:o,canScrollNext:c}=q();return(0,r.jsxs)(Y.z,{ref:t,variant:a,size:s,className:(0,w.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",n),disabled:!c,onClick:o,...l,children:[(0,r.jsx)(P.IconArrowRight,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Next slide"})]})});W.displayName="CarouselNext";let Q=(0,L.BX)("\n  query readRepositoryRelatedQuestions($sourceId: String!) {\n    readRepositoryRelatedQuestions(sourceId: $sourceId)\n  }\n");function X(e){var t;let{sourceId:n,onClickQuestion:a}=e,[{data:s,operation:l}]=(0,c.aM)({query:Q,variables:{sourceId:n},pause:!n}),i=null==l?void 0:null===(t=l.variables)||void 0===t?void 0:t.sourceId,o=null==s?void 0:s.readRepositoryRelatedQuestions,d=e=>{a(e,i)},u=!!o&&!!i&&i===n;return(0,r.jsx)(G.M,{children:u?(0,r.jsx)(T.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut",delay:.1},children:(0,r.jsxs)(V,{orientation:"vertical",opts:{align:"start",loop:!0},plugins:[(0,F.Z)({delay:5e3,stopOnInteraction:!0,stopOnMouseEnter:!0})],className:"group mt-3 w-full",children:[(0,r.jsx)(B,{className:"h-14 pt-1.5",children:o.map((e,t)=>(0,r.jsx)(U,{children:(0,r.jsx)("div",{className:"mx-auto flex max-w-[80%] justify-center overflow-hidden p-1 text-sm",children:(0,r.jsx)("span",{className:"cursor-pointer truncate rounded-lg bg-muted px-4 py-1 transition-opacity hover:bg-muted/70",onClick:t=>d(e),children:e})})},"".concat(e,"_").concat(t)))}),(0,r.jsx)(J,{className:"absolute left-auto right-10 top-1 z-10 h-6 w-6 opacity-0 group-hover:opacity-100"}),(0,r.jsx)(W,{className:"absolute left-auto right-2 top-1 z-10 h-6 w-6 opacity-0 group-hover:opacity-100"})]})}):null})}var ee=n(94755),et=n(36619),en=n(99092),er=n.n(en),ea=n(72223),es=n(42390),el=n.n(es),ei=n(18500),eo=n(9010),ec=n(35814),ed=n(39018),eu=n.n(ed),em=n(60079),ef=n(994),ex=n(37568),eh=n(16294),ep=n(82382),ev=n(85948),eg=n(79972);function ej(e){let{active:t,payload:n}=e;if(t&&n&&n.length){let{value:e,views:t,name:a}=n[0].payload;return t?(0,r.jsx)(eg.Zb,{children:(0,r.jsxs)(eg.aY,{className:"flex flex-col gap-y-0.5 px-4 py-2 text-sm",children:[(0,r.jsxs)("p",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 inline-block w-20",children:"Rate:"}),(0,r.jsxs)("b",{children:[e,"%"]})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:a})]})}):null}return null}function ey(e){let{active:t,payload:n,type:a}=e;if(t&&n&&n.length){let{views:e,selects:t,name:s}=n[0].payload;return e?(0,r.jsx)(eg.Zb,{children:(0,r.jsxs)(eg.aY,{className:"flex flex-col gap-y-0.5 px-4 py-2 text-sm",children:[("view"===a||"all"===a)&&(0,r.jsxs)("p",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 inline-block w-20",children:"Completions:"}),(0,r.jsx)("b",{children:e})]}),("accept"===a||"all"===a)&&(0,r.jsxs)("p",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 inline-block w-20",children:"Acceptances:"}),(0,r.jsx)("b",{children:t})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:s})]})}):null}return null}function eb(e){let{from:t,to:n,dailyStats:a}=e,{theme:s}=(0,eo.X)(),l=(0,ec.Z)(null==a?void 0:a.map(e=>e.views)),i=(0,ec.Z)(null==a?void 0:a.map(e=>e.selects)),o=(0,et.Z)({start:t,end:n}),c={},d={};null==a||a.forEach(e=>{let t=er()(e.start).format("YYYY-MM-DD");c[t]=c[t]||0,d[t]=d[t]||0,c[t]+=e.views,d[t]+=e.selects},{});let u=0===l?0:(i/l*100).toFixed(2),m=o.map(e=>{let t=er()(e).format("YYYY-MM-DD"),n=c[t]||0,r=d[t]||0;return{name:er()(e).format("MMMM D"),value:0===n?0:parseFloat((r/n*100).toFixed(2)),selects:r,views:n}}),f=o.map(e=>{let t=er()(e).format("YYYY-MM-DD"),n=c[t]||0,r=d[t]||0,a=n-r;return{name:er()(e).format("MMMM D"),views:n,selects:r,pending:0===n?.5:a,realPending:0===n?0:a,viewPlaceholder:0===n?.5:0,selectPlaceholder:0===r?.5:0}});return(0,r.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-5 md:flex-row md:space-x-4 md:space-y-0 xl:justify-start",children:[(0,r.jsx)($,{viewport:{amount:.1},delay:.15,className:"flex-1 self-stretch",children:(0,r.jsxs)(eg.Zb,{className:"flex flex-col justify-between self-stretch rounded-2xl bg-transparent pb-4",children:[(0,r.jsx)(eg.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,r.jsx)(eg.ll,{className:"text-base font-medium tracking-normal",children:"Acceptance Rate"})}),(0,r.jsx)(eg.aY,{className:"mb-1 px-4 py-0",children:(0,r.jsxs)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:[u,"%"]})}),(0,r.jsx)(em.h,{width:"100%",height:68,children:(0,r.jsxs)(ef.w,{data:m,margin:{top:10,right:20,left:15,bottom:5},children:[(0,r.jsx)(ex.x,{type:"monotone",dataKey:"value",stroke:"dark"===s?"#e8e1d3":"#54452c",strokeWidth:1.5}),(0,r.jsx)(eh.u,{cursor:{fill:"transparent"},content:(0,r.jsx)(ej,{})})]})})]})}),(0,r.jsx)($,{viewport:{amount:.1},delay:.2,className:"flex-1 self-stretch",children:(0,r.jsxs)(eg.Zb,{className:"flex flex-col justify-between self-stretch bg-transparent pb-4",children:[(0,r.jsx)(eg.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,r.jsx)(eg.ll,{className:"text-base font-medium tracking-normal",children:"Completions"})}),(0,r.jsx)(eg.aY,{className:"mb-1 px-4 py-0",children:(0,r.jsx)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:eu()(l).format("0,0")})}),(0,r.jsx)(em.h,{width:"100%",height:68,children:(0,r.jsxs)(ep.v,{data:f,margin:{top:0===l?30:5,right:15,left:15,bottom:0},children:[(0,r.jsx)(ev.$,{dataKey:"views",stackId:"stats",fill:"dark"===s?"#e8e1d3":"#54452c",radius:3}),(0,r.jsx)(ev.$,{dataKey:"viewPlaceholder",stackId:"stats",fill:"dark"===s?"#423929":"#e8e1d3",radius:3}),(0,r.jsx)(eh.u,{cursor:{fill:"transparent"},content:(0,r.jsx)(ey,{type:"view"})})]})})]})}),(0,r.jsx)($,{viewport:{amount:.1},delay:.25,className:"flex-1 self-stretch",children:(0,r.jsxs)(eg.Zb,{className:"flex flex-col justify-between self-stretch bg-transparent pb-4",children:[(0,r.jsx)(eg.Ol,{className:"flex flex-row items-center justify-between space-y-0 px-4 pb-1 pt-4",children:(0,r.jsx)(eg.ll,{className:"text-base font-medium tracking-normal",children:"Acceptances"})}),(0,r.jsx)(eg.aY,{className:"mb-1 px-4 py-0",children:(0,r.jsx)("div",{className:"text-xl font-semibold",style:{fontFamily:"var(--font-montserrat)"},children:eu()(i).format("0,0")})}),(0,r.jsx)(em.h,{width:"100%",height:68,children:(0,r.jsxs)(ep.v,{data:f,margin:{top:0===l?30:5,right:15,left:15,bottom:0},children:[(0,r.jsx)(ev.$,{dataKey:"selects",stackId:"stats",fill:"dark"===s?"#e8e1d3":"#54452c",radius:3}),(0,r.jsx)(ev.$,{dataKey:"selectPlaceholder",stackId:"stats",fill:"dark"===s?"#423929":"#e8e1d3",radius:3}),(0,r.jsx)(eh.u,{cursor:{fill:"transparent"},content:(0,r.jsx)(ey,{type:"accept"})})]})})]})})]})}function eN(e){let{data:t}=e,{theme:n}=(0,eo.X)(),a=(0,ee.iP)(),s=a.width||0;return(0,r.jsx)("div",{className:"h-[152px]",children:(0,r.jsx)(ea.ZP,{data:t,colorScheme:"dark"===n?"dark":"light",theme:{light:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],dark:["rgb(45, 51, 59)","#0e4429","#006d32","#26a641","#39d353"]},blockSize:s>=968?12:11,hideTotalCount:!0,fontSize:12})})}function ew(){var e,t,n;let a,s;let[{data:l}]=(0,u.P)(),o=(0,i.useSearchParams)(),d=(0,x.UA)(),m=d||"true"===o.get("sample"),f=er()().subtract(6,"day").startOf("day").utc().format(),h=er()().endOf("day").utc().format(),[{data:p,fetching:v}]=(0,c.aM)({query:N.Cl,variables:{start:f,end:h,users:null==l?void 0:null===(e=l.me)||void 0===e?void 0:e.id}});if(m){let e=(0,et.Z)({start:er()().subtract(6,"day").toDate(),end:er()().toDate()});a=e.map(e=>{let t=[ei.SQ.Typescript,ei.SQ.Python,ei.SQ.Rust],n=el()(er()(e).format("YYYY-MM-DD")+(null==l?void 0:l.me.id)),r=Math.ceil(20*n()),a=Math.ceil(r/.35);return{start:er()(e).utc().format(),end:er()(e).add(1,"day").utc().format(),completions:a,selects:r,views:a,language:t[r%t.length]}})}else a=null==p?void 0:p.dailyStats.map(e=>({start:e.start,end:e.end,completions:e.completions,selects:e.selects,views:e.views,language:e.language}));let[{data:g,fetching:j}]=(0,c.aM)({query:N.Y6,variables:{users:null==l?void 0:null===(t=l.me)||void 0===t?void 0:t.id}}),y=0;if(m){let e=(0,et.Z)({start:er()().toDate(),end:er()().subtract(365,"days").toDate()});s=e.map(e=>{let t=el()(er()(e).format("YYYY-MM-DD")+(null==l?void 0:l.me.id)),n=Math.ceil(20*t()),r=n+Math.floor(10*t());return{start:er()(e).format("YYYY-MM-DD[T]HH:mm:ss[Z]"),end:er()(e).add(1,"day").format("YYYY-MM-DD[T]HH:mm:ss[Z]"),completions:r,selects:n,views:r}})}else s=null==g?void 0:g.dailyStatsInPastYear.map(e=>({start:e.start,end:e.end,completions:e.completions,selects:e.selects,views:e.views}));let b=(null==s?void 0:s.reduce((e,t)=>{let n=er().utc(t.start).format("YYYY-MM-DD");return y+=t.views+t.selects,{...e,[n]:t.views}},{}))||{},w=Array(365).fill("").map((e,t)=>{let n=er()().subtract(t,"days").format("YYYY-MM-DD"),r=b[n]||0;return{date:n,count:r,level:Math.min(4,Math.ceil(r/5))}}).reverse();return(null==l?void 0:null===(n=l.me)||void 0===n?void 0:n.id)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{viewport:{amount:.1},style:{width:"100%"},delay:.1,children:(0,r.jsxs)("div",{className:"rounded-2xl border px-[1.125rem] py-4",children:[(0,r.jsxs)("div",{className:"mb-3 text-base",children:[(0,r.jsx)("span",{className:"font-semibold",children:y})," ","activities in the past year"]}),(0,r.jsx)(eN,{data:w})]})}),(0,r.jsx)(eb,{dailyStats:a,from:er()().subtract(6,"day").toDate(),to:er()().toDate()})]}):(0,r.jsx)(r.Fragment,{})}var ek=n(70652),eI=n.n(ek),eM=n(54767),eC=n(21808),eS=n(74038),eY=n(36758),eR=n(79876),eP=n(49506),eE=n(11208),eD=n(3448),eZ=n(74787),ez=n(6230),eA=n(83171);let eO=(0,a.createContext)({}),eT=(0,L.BX)("\n  query ListThreads(\n    $ids: [ID!]\n    $isEphemeral: Boolean\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    threads(\n      ids: $ids\n      isEphemeral: $isEphemeral\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          userId\n          createdAt\n          updatedAt\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n");function e_(e){var t,n,s,l,i;let{className:o,onNavigateToThread:d}=e,u=p(e=>e.threadsPageNo),[m,f]=(0,eY.d)(),[x,h]=(0,a.useState)(),[v,j]=(0,a.useState)(u),[{data:y,fetching:b}]=(0,c.aM)({query:eT,variables:{last:25,before:x,isEphemeral:!1}}),[{data:k,fetching:I}]=(0,c.aM)({query:N.Gx}),M=null==y?void 0:y.threads.pageInfo,C=null==y?void 0:null===(n=y.threads)||void 0===n?void 0:null===(t=n.edges)||void 0===t?void 0:t.length,S=Math.ceil((C||0)/25),Y=S>1||1===S&&(null==M?void 0:M.hasPreviousPage),R=(0,eR.S)(C||0,v,25),E=(0,a.useMemo)(()=>{var e;let t=null==y?void 0:null===(e=y.threads)||void 0===e?void 0:e.edges;if(!(null==t?void 0:t.length))return[];if(b&&v>=2){let e=t.slice().reverse().slice((v-2)*25,(v-1)*25);return e||[]}return t.slice().reverse().slice((v-1)*25,25*v)},[null==y?void 0:null===(s=y.threads)||void 0===s?void 0:s.edges,v,b]),D=()=>{let e=null==M?void 0:M.startCursor;if(e&&(null==y?void 0:y.threads.edges.length)&&y.threads.edges.findIndex(t=>t.cursor===e)>-1)h(e);else{var t;h(null==y?void 0:null===(t=y.threads.edges[0])||void 0===t?void 0:t.cursor)}},Z=!!(null==M?void 0:M.hasPreviousPage),z=b||!E.length||v>=S&&!(null==M?void 0:M.hasPreviousPage);(0,a.useEffect)(()=>{g()},[]);let A=!!(null==y?void 0:null===(i=y.threads)||void 0===i?void 0:null===(l=i.edges)||void 0===l?void 0:l.length);return(0,r.jsx)(eO.Provider,{value:{allUsers:m,fetchingUsers:f,sources:null==k?void 0:k.contextInfo.sources,fetchingSources:I,onNavigateToThread:()=>{d({pageNo:v})}},children:(0,r.jsx)("div",{className:(0,w.cn)("w-full",o),children:(0,r.jsx)(T.E.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{ease:"easeOut",delay:.3},children:(0,r.jsx)(ez.Z,{loading:b||f,fallback:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(P.IconSpinner,{className:"h-8 w-8"})}),delay:600,children:A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-2.5 w-full text-lg font-semibold",children:"Recent Activities"}),(0,r.jsx)(eE.Z,{className:"mb-4 w-full"}),(0,r.jsxs)("div",{className:"relative flex flex-col gap-3 text-sm",children:[E.map(e=>(0,r.jsx)(e$,{data:e},e.node.id)),b&&(0,r.jsx)("div",{className:"absolute inset-0 bottom-10 z-10 flex items-center justify-center backdrop-blur-sm"}),Y&&(0,r.jsx)(eP.tl,{className:(0,w.cn)("flex items-center justify-end"),children:(0,r.jsxs)(eP.ng,{children:[(0,r.jsx)(eP.nt,{children:(0,r.jsx)(eP.dN,{disabled:1===v,onClick:()=>{if(1===v)return;let e=v-1;j(e)}})}),R.map((e,t)=>(0,r.jsx)(eP.nt,{onClick:()=>{"number"==typeof e&&j(e)},children:"number"==typeof e?(0,r.jsx)(eP.kN,{className:"cursor-pointer",isActive:e===v,children:e}):(0,r.jsx)(eP.Dj,{})},"".concat(e,"-").concat(t))),Z&&(0,r.jsx)(eP.nt,{children:(0,r.jsx)(eP.Dj,{})}),(0,r.jsx)(eP.nt,{children:(0,r.jsx)(eP.$0,{disabled:z,onClick:()=>{if(z)return;let e=v+1;j(e),e>S&&D()}})})]})})]})]})})})})})}function e$(e){var t,n,s;let{data:l}=e,i=l.node.userId,o=l.node.id,{sources:d,allUsers:u,onNavigateToThread:m,fetchingSources:f}=(0,a.useContext)(eO),[{data:x,fetching:h}]=(0,c.aM)({query:N.r4,variables:{first:1,threadId:l.node.id}}),p=null==x?void 0:null===(t=x.threadMessages)||void 0===t?void 0:t.edges,v=(0,a.useMemo)(()=>(null==p?void 0:p.length)?(0,w.i8)(d||[],p[0].node.content):"",[p,d]),g=(0,a.useMemo)(()=>{let e=v.slice(0,eC.$I);return(0,eM.Z)(e)},[v]),j=(0,a.useMemo)(()=>null==u?void 0:u.find(e=>e.id===l.node.userId),[u,i]);return(0,r.jsx)(eI(),{href:v?"/search/".concat(g,"-").concat(o):"/search/".concat(o),onClick:m,children:(0,r.jsxs)("div",{className:"transform-bg group flex-1 overflow-hidden rounded-lg px-3 py-2 hover:bg-accent",children:[(0,r.jsxs)("div",{className:"mb-1.5 flex items-center gap-2",children:[(0,r.jsx)(P.IconFiles,{className:"shrink-0"}),(0,r.jsx)(ez.Z,{loading:h||f,fallback:(0,r.jsx)("div",{className:"w-full py-1.5",children:(0,r.jsx)(eD.O,{className:"w-[60%]"})}),children:(0,r.jsx)(eF,{className:"break-anywhere truncate text-lg font-medium",sources:d,message:(0,eZ.HV)(null!==(s=null==p?void 0:null===(n=p[0])||void 0===n?void 0:n.node.content)&&void 0!==s?s:"")})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.Yt,{user:j,className:"mr-0.5 h-4 w-4 shrink-0"}),(0,r.jsxs)("div",{className:"flex items-baseline gap-0.5",children:[(0,r.jsx)("div",{className:"text-sm",children:(null==j?void 0:j.name)||(null==j?void 0:j.email)}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"\xb7"}),(0,r.jsx)("div",{className:"whitespace-nowrap text-xs text-muted-foreground",children:function(e,t){let n=er()(e);if(n.isBefore(er()().subtract(1,"year"))){let e=n.format("MMM D, YYYY");return"".concat(t," on ").concat(e)}if(n.isBefore(er()().subtract(1,"month"))){let e=n.format("MMM D");return"".concat(t," on ").concat(e)}return"".concat(t," ").concat(n.fromNow())}(l.node.createdAt,"Asked")})]})]})]})})}function eF(e){let{message:t,sources:n,className:s}=e,l=(0,a.useMemo)(()=>{var e;if(!t)return null;let a=null!==(e=t.split("\n")[0])&&void 0!==e?e:"";return a.split(eS.zf).map((e,t)=>{if(t%2==1){let a=null==n?void 0:n.find(t=>t.sourceId===e);return a?(0,r.jsx)(eA.p,{id:a.sourceId,kind:a.sourceKind,label:a.sourceName,className:"rounded-md border border-[#b3ada0] border-opacity-30 bg-[#e8e1d3] py-[1px] text-sm dark:bg-[#333333]"},t):null}return e})},[n,t]);return(0,r.jsx)("div",{className:(0,w.cn)(s),children:l})}function eG(){let e=(0,a.useRef)(!1),t=(0,a.useRef)(null),[{data:n}]=(0,u.P)(),s=(0,x.vN)(),h=(0,x.xG)(),[p]=(0,M.Hb)(),v=(0,a.useRef)(null),g=(0,i.useRouter)(),[S,Y]=(0,a.useState)(!1),[{data:R,fetching:P}]=(0,c.aM)({query:N.Gx}),E=(0,d.oR)(b.CR,e=>e.homePage),{selectedModel:D,isFetchingModels:T,models:_}=(0,m.Vq)(),{selectedRepository:F,isFetchingRepositories:G}=(0,f.Q)(),L=!!(null==n?void 0:n.me)||!s;(0,a.useEffect)(()=>{g.prefetch("/search")},[g]),(0,a.useLayoutEffect)(()=>{e.current||(E&&setTimeout(()=>{var e;null===(e=t.current)||void 0===e||e.scrollTo({top:Number(E)}),(0,b.wh)()}),e.current=!0)},[]);let H=p?{height:"calc(100vh - ".concat(M.wt,")")}:{height:"100vh"};return(0,r.jsxs)(k.ScrollArea,{style:H,ref:t,children:[(0,r.jsx)("header",{className:"transition-top fixed right-0 z-10 flex h-16 items-center justify-end px-4 lg:px-10",style:{top:p?M.wt:0},children:(0,r.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,r.jsx)(I.q,{children:(0,r.jsx)(z.T,{})}),(0,r.jsx)(C.L,{}),(0,r.jsx)(O.Z,{showHome:!1,showSetting:!0,children:(0,r.jsx)(A.SQ,{className:"h-10 w-10 border"})})]})}),L&&(0,r.jsx)("main",{className:"flex-col items-center justify-center pb-4 pt-16 lg:flex",ref:v,children:(0,r.jsxs)("div",{className:"mx-auto flex w-full flex-col items-center gap-6 px-10 lg:-mt-[2vh] lg:max-w-4xl lg:px-0",children:[(0,r.jsx)($,{viewport:{amount:.1},children:(0,r.jsx)(l(),{src:o.Z,alt:"logo",width:192,className:(0,w.cn)("mt-4 invert dark:invert-0",{"mb-4":h,"mb-2":!h})})}),h&&(0,r.jsxs)($,{viewport:{amount:.1},style:{width:"100%"},delay:.05,children:[(0,r.jsx)(Z.Z,{onSearch:(e,t)=>{Y(!0),(0,y.UP)({content:e,context:t}),g.push("/search")},showBetaBadge:!0,autoFocus:!0,loadingWithSpinning:!0,isLoading:S,cleanAfterSearch:!1,contextInfo:null==R?void 0:R.contextInfo,fetchingContextInfo:P,modelName:D,onSelectModel:e=>{(0,y.Eg)(e)},repoSourceId:null==F?void 0:F.sourceId,onSelectRepo:e=>{(0,y.xt)(e)},isInitializingResources:T||G,models:_}),(0,r.jsx)(X,{sourceId:null==F?void 0:F.sourceId,onClickQuestion:(e,t)=>{(0,y.xt)(t),(0,y.UP)({content:e,context:{docSourceIds:[t],codeSourceIds:[t],modelName:D}}),g.push("/search")}})]}),(0,r.jsx)(ew,{}),(0,r.jsx)(e_,{className:"lg:mt-8",onNavigateToThread:e=>{let{pageNo:n}=e;t.current&&((0,b.F0)(t.current.scrollTop),j(n))}})]})})]})}function eL(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(eG,{}),(0,r.jsx)(D,{})]})}},74787:function(e,t,n){"use strict";n.d(t,{Gn:function(){return o},HV:function(){return d},_t:function(){return u},jZ:function(){return m},xe:function(){return c}});var r=n(36164),a=n(31745),s=n(74038),l=n(57288),i=n(81565);function o(e){let t=(0,l.VJ)(e.filepath).filepath,n={fileItem:e,name:(0,l.UA)(t),filepath:t,category:"file",icon:(0,r.jsx)(i.IconFile,{})};try{return{id:JSON.stringify(e.filepath),...n}}catch(e){return{id:(0,l.x0)(),...n}}}function c(e){let t=(0,l.VJ)(e.filepath).filepath;return{category:"symbol",id:e.label,name:e.label,filepath:t,fileItem:e,icon:(0,r.jsx)(a.Z,{className:"h-4 w-4"})}}function d(e){let t,n=e;for(;null!==(t=s.My.exec(e));)try{let e=t[1],r=JSON.parse(e),a="filepath"in r?r.filepath:r.uri,s=(0,l.UA)(a);n=n.replace(t[0],"@".concat(s))}catch(e){continue}return n}function u(e){let t=[],n=0;return e.replace(s.My,(r,a,s)=>{s>n&&t.push({type:"text",text:e.slice(n,s)});try{t.push({type:"mention",attrs:{category:"file",fileItem:{filepath:JSON.parse(a)}}})}catch(e){}return n=s+r.length,r}),n<e.length&&t.push({type:"text",text:e.slice(n)}),t}let m=(e,t)=>{var n,r,a,s;let l=e.filepath===t.filepath&&e.git_url===t.git_url;return e.range||t.range?l&&(null===(n=e.range)||void 0===n?void 0:n.start)===(null===(r=t.range)||void 0===r?void 0:r.start)&&(null===(a=e.range)||void 0===a?void 0:a.end)===(null===(s=t.range)||void 0===s?void 0:s.end):l}},83171:function(e,t,n){"use strict";n.d(t,{p:function(){return o},t:function(){return c}});var r=n(36164);n(3546);var a=n(44516),s=n(18500),l=n(57288),i=n(81565);function o(e){let{kind:t,label:n,className:s}=e;return(0,r.jsxs)(a.T5,{as:"span",className:(0,l.cn)("source-mention rounded-sm px-1",s),children:[(0,r.jsx)(d,{kind:t,className:"self-center"}),(0,r.jsx)("span",{className:"whitespace-nowrap",children:n})]})}function c(e){let{kind:t,label:n,id:a}=e.node.attrs;return(0,r.jsx)(o,{kind:t,label:n,id:a})}function d(e){let{kind:t,...n}=e;switch(t){case s.ri.Doc:return(0,r.jsx)(i.IconEmojiBook,{...n});case s.ri.Web:return(0,r.jsx)(i.IconEmojiGlobe,{...n});case s.ri.Git:return(0,r.jsx)(i.IconCode,{...n});case s.ri.Github:return(0,r.jsx)(i.IconGitHub,{...n});case s.ri.Gitlab:return(0,r.jsx)(i.IconGitLab,{...n});default:return null}}},37034:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var r=n(36164),a=n(18500),s=n(81565);function l(e){let{kind:t,gitIcon:n,...l}=e;switch(t){case a.ri.Doc:return(0,r.jsx)(s.IconEmojiBook,{...l});case a.ri.Web:return(0,r.jsx)(s.IconEmojiGlobe,{...l});case a.ri.Github:return(0,r.jsx)(s.IconGitHub,{...l});case a.ri.Gitlab:return(0,r.jsx)(s.IconGitLab,{...l});case a.ri.Git:return n||(0,r.jsx)(s.IconCode,{...l});default:return null}}},23057:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var r=n(36164),a=n(3546),s=n(21808),l=n(9010),i=n(57288),o=n(29),c=n(6230);n(15812);var d=n(77246),u=n(94160),m=n(50292),f=n(59105),x=n(10155),h=n(19092),p=n(44516),v=n(16784),g=n(29952),j=n(83171);let y="mention",b=g.ZP.extend({addNodeView:()=>(0,p.fW)(j.t),renderText(e){let{node:t}=e;return"[[source:".concat(t.attrs.id,"]]")},addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},kind:{default:null,parseHTML:e=>e.getAttribute("data-kind"),renderHTML:e=>e.kind?{"data-kind":e.kind}:{}}})});n(44750);var N=n(31022),w=n(45238),k=n(18500),I=n(81565);let M=(0,a.forwardRef)((e,t)=>{let{query:n,command:s,category:l}=e,{list:o,pending:c}=(0,a.useContext)(D),[d,u]=(0,a.useState)(0),m=(0,a.useMemo)(()=>{if(!(null==o?void 0:o.length))return[];let e=o.filter(e=>(0,i._q)(e.sourceKind)).map(e=>({type:"source",category:"doc",id:e.sourceId,label:e.sourceName,data:e})),t=o.filter(e=>(0,i.wO)(e.sourceKind)).map(e=>({type:"source",category:"code",id:e.sourceId,label:e.sourceName,data:e}));return"doc"===l?e:t},[l,o]),f=(0,a.useMemo)(()=>{if(!n)return m;let e=(0,w.go)(n,m,{key:e=>e.label});return e.map(e=>e.obj)},[n,m]),x=()=>{u((d+f.length-1)%f.length)},h=()=>{u((d+1)%f.length)},p=e=>{let t=f[e];t&&s({id:t.data.sourceId,label:t.label,kind:t.data.sourceKind})},v=()=>{p(d)};return(0,a.useEffect)(()=>u(0),[m]),(0,a.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(x(),!0):"ArrowDown"===t.key?(h(),!0):"Enter"===t.key&&(v(),!0)}})),(0,r.jsx)("div",{className:"dropdown-menu max-h-[30vh] min-w-[20rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-2 text-popover-foreground shadow animate-in",children:c?(0,r.jsx)("div",{className:"px-2 py-1.5",children:(0,r.jsx)(I.IconSpinner,{})}):f.length?f.map((e,t)=>(0,r.jsx)(S,{onClick:()=>p(t),onMouseEnter:()=>u(t),title:e.label,data:e,isSelected:t===d},e.id)):(0,r.jsx)("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:(null==m?void 0:m.length)?(0,r.jsx)("span",{children:"No matches results"}):(0,r.jsx)("span",{children:"No results"})})})});function C(e){let{kind:t}=e;switch(t){case k.ri.Doc:return(0,r.jsx)(I.IconEmojiBook,{});case k.ri.Web:return(0,r.jsx)(I.IconEmojiGlobe,{});case k.ri.Git:return(0,r.jsx)(I.IconCode,{});case k.ri.Github:return(0,r.jsx)(I.IconGitHub,{});case k.ri.Gitlab:return(0,r.jsx)(I.IconGitLab,{});default:return null}}function S(e){let{isSelected:t,data:n,...s}=e,l=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{if(t&&l.current){var e;null===(e=l.current)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"})}},[t]),(0,r.jsxs)("div",{className:(0,i.cn)("flex cursor-pointer gap-1 rounded-md px-2 py-1.5 text-sm",{"bg-accent text-accent-foreground":t}),...s,ref:l,children:[(0,r.jsx)("span",{className:"flex h-5 shrink-0 items-center",children:(0,r.jsx)(C,{kind:n.data.sourceKind})}),(0,r.jsx)("span",{className:"flex-1",children:n.label})]})}M.displayName="MetionList";let Y=e=>{let t=e.getJSON(),n=[],r=0,a=e=>{var t,s;"text"===e.type?r+=(null==e?void 0:null===(t=e.text)||void 0===t?void 0:t.length)||0:"mention"===e.type&&(null==e?void 0:null===(s=e.attrs)||void 0===s?void 0:s.id)&&n.push({id:e.attrs.id,label:e.attrs.label,kind:e.attrs.kind}),e.content&&e.content.forEach(a)};return a(t),n};var R=e=>{let{disabled:t,category:n,placement:r,char:a="@",pluginKey:s}=e;return{render:()=>{let e,t;return{onStart:a=>{let s=Y(a.editor);e=new p.M_(M,{props:{...a,mentions:s,category:n},editor:a.editor}),a.clientRect&&(t=(0,N.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:r||"bottom-start",animation:"shift-away",maxWidth:"400px"}))},onUpdate(n){e.updateProps(n),n.clientRect&&t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r,a;return"Escape"===n.event.key?(t[0].hide(),!0):null!==(a=null===(r=e.ref)||void 0===r?void 0:r.onKeyDown(n))&&void 0!==a&&a},onExit(){t[0].destroy(),e.destroy()}}},char:a,pluginKey:s,command:e=>{var t,r,a;let{editor:s,range:l,props:o}=e;if("code"===n){!function(e,t,n){let r;let{doc:a}=e.state,s=e.state.selection.$from;a.descendants((e,t)=>!("mention"===e.type.name&&(0,i.wO)(e.attrs.kind))||(r=t,!1)),e.chain().deleteRange({from:t.from,to:t.to}).run();let l=void 0!==r,o=a.firstChild,c=l?[{type:y,attrs:n}]:[{type:y,attrs:n},{type:"text",text:" "}];if(o&&"paragraph"===o.type.name){let t=o.firstChild;if(t&&"mention"===t.type.name&&(0,i.wO)(t.attrs.kind)){let n=t.nodeSize;e.chain().deleteRange({from:1,to:1+n}).insertContentAt(1,c).focus().run()}else e.chain().insertContentAt(1,c).focus().run()}else e.chain().insertContentAt(0,c).focus().run();e.commands.focus(l?s.pos:s.pos+1)}(s,l,o);return}let c=s.view.state.selection.$to.nodeAfter,d=null==c?void 0:null===(t=c.text)||void 0===t?void 0:t.startsWith(" ");d&&(l.to+=1),s.chain().focus().insertContentAt(l,[{type:y,attrs:o},{type:"text",text:" "}]).run(),null===(a=s.view.dom.ownerDocument.defaultView)||void 0===a||null===(r=a.getSelection())||void 0===r||r.collapseToEnd()},allow:e=>{let{state:n,range:r}=e;if(t)return!1;let a=n.doc.resolve(r.from),s=n.schema.nodes[y],l=!!a.parent.type.contentMatch.matchType(s);return l}}};let P=new x.H$("mention-doc");new x.H$("mention-code");let E=e=>h.hj.create({addKeyboardShortcuts(){return{Enter:t=>{let{editor:n}=t;return e(n),!0},"Shift-Enter":()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})}}}),D=a.createContext({}),Z=(0,a.forwardRef)((e,t)=>{let{editable:n,content:l,contextInfo:o,fetchingContextInfo:c,submitting:x,onSubmit:h,placeholder:g,onBlur:j,onFocus:y,onUpdate:N,autoFocus:w,className:k,editorClassName:I,placement:M}=e,[C,S]=(0,a.useState)(!c),Y=(0,v.d)(e=>{if(x)return;let t=e.getText({blockSeparator:s.rZ}).trim();t&&(null==h||h(e))}),Z=(0,a.useMemo)(()=>null!=o&&!!o.sources&&o.sources.some(e=>(0,i._q)(e.sourceKind)),[null==o?void 0:o.sources]),z=(0,p.jE)({editable:!!C&&n,immediatelyRender:!1,extensions:[d.Z,u.Z,f.Z,m.Z.configure({showOnlyWhenEditable:!1,placeholder:C?g||"Ask anything...":"Loading..."}),E(e=>{Y.current(e)}),b.configure({deleteTriggerWithBackspace:!0,HTMLAttributes:{class:"mention"},suggestion:R({category:"doc",char:"@",pluginKey:P,placement:"bottom"===M?"top-start":"bottom-start",disabled:!Z})})],editorProps:{attributes:{class:(0,i.cn)("max-h-38 prose min-h-[3.5rem] max-w-none font-sans dark:prose-invert focus:outline-none prose-p:my-0",I)}},content:l,onBlur(e){null==j||j(e)},onFocus(e){null==y||y(e)},onUpdate(e){null==N||N(e)}},[C]);return((0,a.useImperativeHandle)(t,()=>({editor:z})),(0,a.useLayoutEffect)(()=>{z&&w&&z.commands.focus()},[z]),(0,a.useEffect)(()=>{c||C||S(!0)},[c]),z)?(0,r.jsx)(D.Provider,{value:{list:null==o?void 0:o.sources,pending:!!c},children:(0,r.jsx)("div",{className:(0,i.cn)("text-area-autosize max-h-36 overflow-y-auto pr-1",k),children:(0,r.jsx)(p.kg,{editor:z})})}):null});Z.displayName="PromptEditor";var z=n(31458),A=n(11208),O=n(3448),T=n(62202);function _(e){let{models:t,value:n,onChange:a,isInitializing:s}=e,l=e=>{a(e)};return(0,r.jsx)(c.Z,{loading:s,fallback:(0,r.jsx)("div",{className:"w-full pl-2",children:(0,r.jsx)(O.O,{className:"h-3 w-[20%]"})}),children:!!(null==t?void 0:t.length)&&(0,r.jsxs)(T.h_,{children:[(0,r.jsx)(T.$F,{asChild:!0,children:(0,r.jsxs)(z.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 text-foreground/90",children:[(0,r.jsx)(I.IconBox,{}),n]})}),(0,r.jsx)(T.AW,{side:"bottom",align:"start",className:"dropdown-menu max-h-[30vh] min-w-[20rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-2 text-popover-foreground shadow animate-in",children:(0,r.jsx)(T._x,{value:n,onValueChange:a,children:t.map(e=>{let t=e===n;return(0,r.jsxs)(T.qB,{onClick:t=>{l(e),t.stopPropagation()},value:e,className:"cursor-pointer py-2 pl-3",children:[(0,r.jsx)(I.IconCheck,{className:(0,i.cn)("mr-2 shrink-0",e===n?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{className:(0,i.cn)({"font-medium":t}),children:e})]},e)})})})]})})}var $=n(36065),F=n(84942),G=n(37034);function L(e){let{repos:t,value:n,onChange:s,isInitializing:l}=e,[o,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),m=e=>{s(e)},f=()=>{requestAnimationFrame(()=>{u.current&&(u.current.scrollTop=0)})},x=n?null==t?void 0:t.find(e=>e.sourceId===n):void 0,h=null==x?void 0:x.sourceName;return l||(null==t?void 0:t.length)?(0,r.jsx)(c.Z,{loading:l,fallback:(0,r.jsx)("div",{className:"w-full pl-2",children:(0,r.jsx)(O.O,{className:"h-3 w-[10rem]"})}),children:(0,r.jsxs)(F.J2,{open:o,onOpenChange:d,children:[(0,r.jsx)(F.xo,{className:"outline-none",asChild:!0,children:(0,r.jsxs)(z.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 font-normal text-foreground/90",title:h||"select codebase",children:[x?(0,r.jsx)(G.k,{kind:x.sourceKind,className:"h-3.5 w-3.5 shrink-0"}):(0,r.jsx)(I.IconFolderGit,{className:"shrink-0"}),(0,r.jsx)("div",{className:"flex flex-1 items-center gap-1.5 truncate break-all",children:(0,r.jsx)("span",{className:(0,i.cn)("truncate",{"text-muted-foreground":!h}),children:h||"Codebase"})})]})}),(0,r.jsx)(F.yk,{side:"bottom",align:"start",className:"max-h-[50vh] min-w-[20vw] max-w-[80vw] overflow-x-hidden rounded-md border bg-popover p-2 pb-0 text-popover-foreground shadow animate-in",children:(0,r.jsxs)($.mY,{children:[(0,r.jsx)($.sZ,{placeholder:"Search codebase...",onValueChange:()=>{f()}}),(0,r.jsxs)($.e8,{className:"max-h-[30vh]",ref:u,children:[(0,r.jsx)($.rb,{children:"No context found"}),(0,r.jsx)($.fu,{children:null==t?void 0:t.map(e=>{let t=e.sourceId===n;return(0,r.jsxs)($.di,{onSelect:()=>{m(e.sourceId),d(!1)},title:e.sourceName,children:[(0,r.jsx)(I.IconCheck,{className:(0,i.cn)("mr-1 shrink-0",e.sourceId===n?"opacity-100":"opacity-0")}),(0,r.jsxs)("div",{className:"flex flex-1 items-center gap-1 overflow-x-hidden",children:[(0,r.jsx)(G.k,{kind:e.sourceKind,className:"shrink-0"}),(0,r.jsx)("div",{className:(0,i.cn)("truncate",{"font-semibold":t}),children:e.sourceName})]})]},e.sourceId)})})]}),(0,r.jsx)($.zz,{}),(0,r.jsx)($.fu,{children:(0,r.jsx)($.di,{disabled:!n,className:"flex justify-center",onSelect:()=>{s(void 0),d(!1)},children:"Clear"})})]})})]})}):null}function H(e){let{onSearch:t,modelName:n,onSelectModel:l,repoSourceId:d,onSelectRepo:u,className:m,placeholder:f,showBetaBadge:x,isLoading:h,autoFocus:p,loadingWithSpinning:v,cleanAfterSearch:g=!0,isFollowup:j,contextInfo:y,fetchingContextInfo:b,isInitializingResources:N,models:w}=e,[k,M]=(0,a.useState)(!1),[C,S]=(0,a.useState)(""),Y=(0,a.useRef)(null),R=()=>{var e,t;null===(t=Y.current)||void 0===t||null===(e=t.editor)||void 0===e||e.commands.focus()},P=e=>{l(e),setTimeout(()=>{R()})},E=e=>{u(e),setTimeout(()=>{R()})},D=e=>{if(!e||h||N)return;let r=e.getText({blockSeparator:s.rZ}).trim();if(!r)return;let a=(0,i.b)(r,null==y?void 0:y.sources),l={...(0,i.G8)(a),modelName:n};if(t(r,l),g){var o,c;null===(c=Y.current)||void 0===c||null===(o=c.editor)||void 0===o||o.chain().clearContent().focus().run(),S("")}},T=e=>{var t;let n=null===(t=Y.current)||void 0===t?void 0:t.editor;n&&n.chain().focus().command(t=>{var n,r,a;let{tr:s,state:l}=t,{$from:i}=l.selection,o=0===i.parentOffset,c=null!==(a=null===(r=i.nodeBefore)||void 0===r?void 0:null===(n=r.text)||void 0===n?void 0:n.endsWith(" "))&&void 0!==a&&a;return o||c?s.insertText(e):s.insertText(" "+e),!0}).run()},{hasDocumentSource:$}=(0,a.useMemo)(()=>(0,i.xV)(null==y?void 0:y.sources),[null==y?void 0:y.sources]),F=(0,a.useMemo)(()=>null==y?void 0:y.sources.filter(e=>(0,i.wO)(e.sourceKind)),[null==y?void 0:y.sources]),G=!!(null==w?void 0:w.length),H=!!(null==F?void 0:F.length),q=G||H;return(0,r.jsxs)("div",{className:(0,i.cn)("relative w-full overflow-hidden rounded-xl border bg-background transition-all hover:border-ring dark:border-muted-foreground/60 dark:hover:border-muted-foreground",{"border-ring dark:border-muted-foreground":k},m),onClick:()=>{R()},children:[x&&(0,r.jsx)(K,{}),(0,r.jsxs)("div",{className:(0,i.cn)("flex items-end pr-4",{"min-h-[5.5rem]":!j,"min-h-[2.5rem]":j}),children:[(0,r.jsxs)("div",{className:"mr-1 flex-1 overflow-x-hidden pl-4",children:[(0,r.jsx)(Z,{editable:!0,contextInfo:y,fetchingContextInfo:b,onSubmit:D,placeholder:f||"Ask anything...",autoFocus:p,onFocus:()=>M(!0),onBlur:()=>M(!1),onUpdate:e=>{let{editor:t}=e;return S(t.getText({blockSeparator:s.rZ}).trim())},ref:Y,placement:j?"bottom":"top",className:(0,i.cn)("text-area-autosize resize-none rounded-lg !border-none bg-transparent !shadow-none !outline-none !ring-0 !ring-offset-0",{"py-3":!x,"py-4":x}),editorClassName:j&&q?"min-h-[1.75rem]":"min-h-[3.5em]"}),j&&q&&(0,r.jsxs)("div",{className:"-ml-2 mb-2 flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[H&&(0,r.jsx)(L,{isInitializing:b,repos:F,value:d,onChange:E}),H&&G&&(0,r.jsx)(A.Z,{orientation:"vertical",className:"h-5"}),G&&(0,r.jsx)(_,{isInitializing:N,models:w,value:n,onChange:P})]})]}),(0,r.jsx)("div",{className:(0,i.cn)("mb-3 flex items-center justify-between gap-2"),children:(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center justify-center rounded-lg p-1 transition-all",{"bg-primary text-primary-foreground cursor-pointer":C.length>0,"!bg-muted !text-primary !cursor-default":h||0===C.length||N,"mr-1.5":!x}),onClick:()=>{var e;return D(null===(e=Y.current)||void 0===e?void 0:e.editor)},children:[v&&h&&(0,r.jsx)(I.IconSpinner,{className:"h-4 w-4"}),(!v||!h)&&(0,r.jsx)(I.IconArrowRight,{className:"h-4 w-4"})]})})]}),!j&&(0,r.jsx)("div",{className:(0,i.cn)("flex items-center gap-2 border-t bg-[#F9F6EF] py-2 pl-2 pr-4 dark:border-muted-foreground/60 dark:bg-[#333333]"),onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(c.Z,{loading:N||b,delay:0,fallback:(0,r.jsx)("div",{className:"flex h-8 w-[40%] items-center",children:(0,r.jsx)(O.O,{className:"h-4 w-full"})}),children:[(0,r.jsxs)(o.u,{children:[(0,r.jsx)(o.aJ,{asChild:!0,children:(0,r.jsxs)(z.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 text-foreground/90",onClick:e=>T("@"),disabled:!$,children:[(0,r.jsx)(I.IconAtSign,{}),"Documents"]})}),(0,r.jsx)(o._v,{className:"max-w-md",children:"Select a document to bring into context"})]}),(0,r.jsx)(A.Z,{orientation:"vertical",className:"h-5"}),(0,r.jsx)(L,{repos:F,value:d,onChange:E,isInitializing:b}),!!(null==w?void 0:w.length)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{orientation:"vertical",className:"h-5"}),(0,r.jsx)(_,{models:w,value:n,onChange:P})]})]})})]})}function K(){let{theme:e}=(0,l.X)();return(0,r.jsxs)(o.u,{delayDuration:0,children:[(0,r.jsx)(o.aJ,{asChild:!0,children:(0,r.jsx)("span",{className:"absolute -right-8 top-1 mr-3 rotate-45 rounded-none border-none py-0.5 pl-6 pr-5 text-xs text-primary",style:{background:"dark"===e?"#333":"#e8e1d3"},children:"Beta"})}),(0,r.jsx)(o._v,{sideOffset:-8,className:"max-w-md",children:(0,r.jsx)("p",{children:"Please note that the answer engine is still in its early stages, and certain functionalities, such as finding the correct code context and the quality of summarizations, still have room for improvement. If you encounter an issue and believe it can be enhanced, consider sharing it in our Slack community!"})})]})}},36065:function(e,t,n){"use strict";n.d(t,{di:function(){return x},e8:function(){return d},fu:function(){return m},mY:function(){return o},rb:function(){return u},sZ:function(){return c},zz:function(){return f}});var r=n(36164),a=n(3546),s=n(53241),l=n(93170),i=n(57288);n(30220);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...a})});o.displayName=s.mY.displayName;let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(s.mY.Input,{ref:t,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...a})]})});c.displayName=s.mY.Input.displayName;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...a})});d.displayName=s.mY.List.displayName;let u=a.forwardRef((e,t)=>(0,r.jsx)(s.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=s.mY.Empty.displayName;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...a})});m.displayName=s.mY.Group.displayName;let f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",n),...a})});f.displayName=s.mY.Separator.displayName;let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",n),...a})});x.displayName=s.mY.Item.displayName},30220:function(e,t,n){"use strict";n.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return x},cZ:function(){return m},fK:function(){return f},hg:function(){return c}});var r=n(36164),a=n(3546),s=n(4318),l=n(1663),i=n(57288);let o=s.fC,c=s.xz,d=s.h_;s.x8;let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});u.displayName=s.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[a,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};f.displayName="DialogHeader";let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};x.displayName="DialogFooter";let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});h.displayName=s.Dx.displayName;let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});p.displayName=s.dk.displayName},49506:function(e,t,n){"use strict";n.d(t,{$0:function(){return f},Dj:function(){return x},dN:function(){return m},kN:function(){return u},ng:function(){return c},nt:function(){return d},tl:function(){return o}});var r=n(36164),a=n(3546),s=n(57288),l=n(31458),i=n(81565);let o=e=>{let{className:t,...n}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,s.cn)("mx-auto flex w-full justify-center",t),...n})};o.displayName="Pagination";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("ul",{ref:t,className:(0,s.cn)("flex flex-row items-center gap-1",n),...a})});c.displayName="PaginationContent";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("li",{ref:t,className:(0,s.cn)("",n),...a})});d.displayName="PaginationItem";let u=e=>{let{className:t,isActive:n,size:a="icon",...i}=e;return(0,r.jsx)("a",{"aria-current":n?"page":void 0,className:(0,s.cn)("select-none",(0,l.d)({variant:n?"outline":"ghost",size:a}),t),...i})};u.displayName="PaginationLink";let m=e=>{let{className:t,disabled:n,...a}=e;return(0,r.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,s.cn)("cursor-pointer select-none gap-1 pl-2.5",n&&"cursor-not-allowed text-muted-foreground",t),...a,children:[(0,r.jsx)(i.IconChevronLeft,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};m.displayName="PaginationPrevious";let f=e=>{let{className:t,disabled:n,...a}=e;return(0,r.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,s.cn)("cursor-pointer select-none gap-1 pr-2.5",n&&"cursor-not-allowed text-muted-foreground",t),...a,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(i.IconChevronRight,{className:"h-4 w-4"})]})};f.displayName="PaginationNext";let x=e=>{let{className:t,...n}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,className:(0,s.cn)("flex h-9 w-9 items-center justify-center",t),...n,children:[(0,r.jsx)(i.IconMore,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};x.displayName="PaginationEllipsis"},84942:function(e,t,n){"use strict";n.d(t,{J2:function(){return i},xo:function(){return o},yk:function(){return c}});var r=n(36164),a=n(3546),s=n(83299),l=n(57288);let i=s.fC,o=s.xz;s.x8,s.h_,s.ee;let c=a.forwardRef((e,t)=>{let{className:n,sideOffset:a=4,...i}=e;return(0,r.jsx)(s.VY,{ref:t,sideOffset:a,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})});c.displayName=s.VY.displayName},21808:function(e,t,n){"use strict";n.d(t,{$6:function(){return s},$I:function(){return l},L8:function(){return a},ir:function(){return i},o0:function(){return r},rZ:function(){return o}});let r="name@yourcompany.com",a=20,s={DEMO_AUTO_LOGIN:"_tabby_demo_autologin"},l=48,i="NOT_FOUND",o="\n"},36758:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(3546),a=n(40055),s=n(70410);function l(){let[{data:e,fetching:t,error:n}]=(0,a.aM)({query:s.TH}),l=(0,r.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.users.edges.map(e=>e.node))&&void 0!==t?t:[]},[null==e?void 0:e.users]);return[l,t,n]}},31159:function(e,t,n){"use strict";n.d(t,{Vq:function(){return c}});var r=n(3546),a=n(21454),s=n(27257),l=n(3765),i=n(47241),o=n(17451);function c(){let{data:e,isLoading:t}=(0,a.ZP)("/v1beta/models",e=>(0,l.Z)(e,{errorHandler:()=>{throw Error("Fetch supported model failed.")}}),{shouldRetryOnError:!1}),n=(0,s.oR)(o.a,e=>e.selectedModel);return(0,r.useEffect)(()=>{if(!t){let t=function(e,t){if(!(null==t?void 0:t.length))return;let n=!!e&&t.includes(e);return n?e:t[0]}(n,null==e?void 0:e.chat);(0,i.Eg)(t)}},[t]),{isFetchingModels:t,selectedModel:n,models:null==e?void 0:e.chat}}},4951:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(3546),a=n(40055),s=n(17451),l=n(70410);function i(){let[{data:e,fetching:t}]=(0,a.aM)({query:l.K5}),n=null==e?void 0:e.repositoryList,i=(0,s.a)(e=>e.selectedRepoSourceId),o=(0,r.useMemo)(()=>{if((null==n?void 0:n.length)&&i)return n.find(e=>e.sourceId===i)},[n,i]);return{repos:n,isFetchingRepositories:t,selectedRepository:o}}},47241:function(e,t,n){"use strict";n.d(t,{Eg:function(){return s},UP:function(){return o},qs:function(){return i},xt:function(){return l}});var r=n(17451);let a=r.a.setState,s=e=>{a(()=>({selectedModel:e}))},l=e=>{a(()=>({selectedRepoSourceId:e}))},i=e=>{a(()=>({enableActiveSelection:e}))},o=e=>{a(()=>({pendingUserMessage:e}))}},17451:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(27257),a=n(85654),s=n(57288);let l=["activeChatId","pendingUserMessage"],i={activeChatId:(0,s.x0)(),selectedModel:void 0,selectedRepoSourceId:void 0,enableActiveSelection:!0,pendingUserMessage:void 0},o=(0,r.Ue)()((0,a.tJ)(()=>({...i}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!l.includes(t)})),version:1}))},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return s},F0:function(){return i},wh:function(){return o}});var r=n(27257);let a={homePage:void 0},s=(0,r.Ue)()(()=>({...a})),l=s.setState,i=e=>l(()=>({homePage:e})),o=()=>l(()=>({homePage:void 0}))},79876:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:e},(e,n)=>n+t)},a=(e,t,n)=>{let a=Math.ceil(e/n);return a<=5?r(a):t<=3?[1,2,3,4,"...",a]:t<a-2?[1,"...",t-1,t,t+1,"...",a]:[1,"...",...r(4,a-3)]}},15812:function(){}},function(e){e.O(0,[8415,7565,4648,6527,7430,55,641,340,4007,2546,1283,3449,2578,8511,4421,1454,1002,4546,4553,6805,9275,9148,4405,2991,8964,6761,3752,4069,2009,7288,1565,4656,9634,3375,5289,1744],function(){return e(e.s=52419)}),_N_E=e.O()}]);
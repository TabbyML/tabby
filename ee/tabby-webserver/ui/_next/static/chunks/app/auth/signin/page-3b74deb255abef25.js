(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8098],{76846:function(e,t,n){Promise.resolve().then(n.bind(n,42641))},42641:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(57437),s=n(2265),a=n(24033),i=n(19567),l=n(61396),o=n.n(l),c=n(93023),d=n(84168),u=n(38110),m=n(61865),f=n(74578),x=n(61985),h=n(46591),p=n(7820),v=n(41315),g=n(51908);let j=(0,h.B)("\n  mutation requestPasswordResetEmail($input: RequestPasswordResetEmailInput!) {\n    requestPasswordResetEmail(input: $input)\n  }\n"),b=f.Ry({email:f.Z_().email("Invalid email address")}),N=e=>{let{onSuccess:t}=e,n=(0,m.cI)({resolver:(0,u.F)(b)}),{isSubmitting:s}=n.formState,a=(0,p.Db)(j,{form:n});return(0,r.jsx)(v.l0,{...n,children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("form",{className:"grid gap-4",onSubmit:n.handleSubmit(e=>a({input:e}).then(n=>{var r;(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.requestPasswordResetEmail)&&(null==t||t(e.email))})),children:[(0,r.jsx)(v.Wi,{control:n.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsx)(v.lX,{children:"Email"}),(0,r.jsx)(v.NI,{children:(0,r.jsx)(g.I,{placeholder:x.o,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,r.jsx)(v.zG,{})]})}}),(0,r.jsxs)(c.z,{type:"submit",className:"mt-2",children:[s&&(0,r.jsx)(d.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Email"]})]}),(0,r.jsx)(v.zG,{className:"text-center"})]})})};function y(){let[e,t]=s.useState(),[n,a]=s.useState(!1);return n?(0,r.jsx)("div",{className:"w-[350px] space-y-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d.IconCheckCircled,{className:"h-12 w-12 text-successful-foreground"})}),(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reset Password"}),(0,r.jsxs)("p",{className:"pb-4 text-sm text-muted-foreground",children:["Request received successfully! If the email"," ",(0,r.jsx)("span",{className:"font-bold",children:null!=e?e:""})," exists, you’ll receive an email with a reset link soon."]}),(0,r.jsx)(o(),{href:"/auth/signin",className:(0,c.d)(),children:"Back to Sign In"})]})}):(0,r.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reset Password"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter your email address. If an account exists, you’ll receive an email with a password reset link soon."})]}),(0,r.jsx)(N,{onSuccess:e=>{t(e),a(!0)}}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(o(),{href:"/auth/signin",replace:!0,className:"text-primary hover:underline",children:"Cancel"})})]})}let w=(0,h.B)("\n  mutation requestInvitationEmail($input: RequestInvitationInput!) {\n    requestInvitationEmail(input: $input) {\n      email\n      code\n    }\n  }\n"),I=f.Ry({email:f.Z_().email("Invalid email address")}),S=e=>{let{onSuccess:t}=e,n=(0,m.cI)({resolver:(0,u.F)(I)}),{isSubmitting:s}=n.formState,a=(0,p.Db)(w,{form:n});return(0,r.jsx)(v.l0,{...n,children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("form",{className:"grid gap-4",onSubmit:n.handleSubmit(e=>a({input:e}).then(e=>{var n,r;(null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(n=r.requestInvitationEmail)||void 0===n?void 0:n.code)&&(null==t||t(e.data.requestInvitationEmail))})),children:[(0,r.jsx)(v.Wi,{control:n.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsx)(v.lX,{children:"Email"}),(0,r.jsx)(v.NI,{children:(0,r.jsx)(g.I,{placeholder:x.o,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,r.jsx)(v.zG,{})]})}}),(0,r.jsxs)(c.z,{type:"submit",className:"mt-2",children:[s&&(0,r.jsx)(d.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Email"]})]}),(0,r.jsx)(v.zG,{className:"text-center"})]})})};function k(){let[e,t]=s.useState(),[n,a]=s.useState(!1);return n?(0,r.jsx)("div",{className:"w-[350px] space-y-6",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d.IconCheckCircled,{className:"h-12 w-12 text-successful-foreground"})}),(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create your Tabby account"}),(0,r.jsx)("p",{className:"pb-4 text-sm text-muted-foreground",children:"Request received successfully! You’ll receive an email with a signup link soon."}),(0,r.jsx)(o(),{href:"/auth/signin",className:(0,c.d)(),children:"Back to Sign In"})]})}):(0,r.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create your Tabby account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"To register your account, please enter your email address."})]}),(0,r.jsx)(S,{onSuccess:e=>{t(e.email),a(!0)}}),(0,r.jsxs)("div",{className:"text-center text-sm",children:["Already have an accout?",(0,r.jsx)(o(),{href:"/auth/signin",className:"ml-1 font-semibold text-primary hover:underline",children:"Sign In"})]})]})}var R=n(1589),E=n(52485),C=n(58001),z=n(1592),F=n(60106),P=n(39311);let _=(0,F.BX)("\n  mutation tokenAuth($email: String!, $password: String!) {\n    tokenAuth(email: $email, password: $password) {\n      accessToken\n      refreshToken\n    }\n  }\n"),q=f.Ry({email:f.Z_().email("Invalid email address"),password:f.Z_()});function T(e){let{className:t,invitationCode:n,...l}=e,f=(0,i.Uw)(),h=(0,m.cI)({resolver:(0,u.F)(q)}),j=(0,a.useRouter)(),{status:b}=(0,C.kP)();s.useEffect(()=>{"authenticated"===b&&j.replace("/")},[b]);let N=(0,C.zq)(),{isSubmitting:y}=h.formState,w=(0,p.Db)(_,{onCompleted(e){N(e.tokenAuth)},form:h});return(0,r.jsx)(v.l0,{...h,children:(0,r.jsxs)("div",{className:(0,P.cn)("grid gap-2",t),...l,children:[(0,r.jsxs)("form",{className:"grid gap-4",onSubmit:h.handleSubmit(w),children:[(0,r.jsx)(v.Wi,{control:h.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsx)(v.lX,{children:"Email"}),(0,r.jsx)(v.NI,{children:(0,r.jsx)(g.I,{placeholder:x.o,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,r.jsx)(v.zG,{})]})}}),(0,r.jsx)(v.Wi,{control:h.control,name:"password",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(v.lX,{children:"Password"}),!!f&&(0,r.jsx)("div",{className:"cursor-pointer text-right text-sm text-primary hover:underline",children:(0,r.jsx)(o(),{href:"/auth/signin?mode=reset",children:"Forgot password?"})})]}),(0,r.jsx)(v.NI,{children:(0,r.jsx)(g.I,{type:"password",...t})}),(0,r.jsx)(v.zG,{})]})}}),(0,r.jsxs)(c.z,{type:"submit",className:"mt-2",disabled:y,children:[y&&(0,r.jsx)(d.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]}),(0,r.jsx)(v.zG,{className:"text-center"})]})})}function Z(){let{router:e,searchParams:t}=(0,E.Z)(),n=(0,i.jJ)(),a=t.get("error_message"),l=t.get("access_token"),c=t.get("refresh_token"),u=!!l&&!!c,m=u&&!a,f=(0,C.zq)(),{data:x}=(0,R.Z)(u?null:"/oauth/providers",z.Z);return((0,s.useEffect)(()=>{!a&&l&&c&&f({accessToken:l,refreshToken:c}).then(()=>e.replace("/"))},[t]),m)?(0,r.jsx)(d.IconSpinner,{className:"h-8 w-8 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Sign In"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter credentials to login to your account"})]}),(0,r.jsx)(T,{}),n&&(0,r.jsxs)("div",{className:"text-center text-sm",children:["Don’t have an accout?",(0,r.jsx)(o(),{href:"/auth/signin?mode=signup",className:"ml-1 font-semibold text-primary hover:underline",children:"Create an account"})]})]}),!!(null==x?void 0:x.length)&&(0,r.jsxs)("div",{className:"relative mt-4 flex w-[350px] items-center py-5",children:[(0,r.jsx)("div",{className:"grow border-t "}),(0,r.jsx)("span",{className:"mx-4 shrink text-sm text-muted-foreground",children:"Or Sign In with"}),(0,r.jsx)("div",{className:"grow border-t "})]}),(0,r.jsxs)("div",{className:"mx-auto flex items-center gap-6",children:[(null==x?void 0:x.includes("github"))&&(0,r.jsx)("a",{href:"/oauth/signin?provider=github",children:(0,r.jsx)(d.IconGithub,{className:"h-8 w-8"})}),(null==x?void 0:x.includes("google"))&&(0,r.jsx)("a",{href:"/oauth/signin?provider=google",children:(0,r.jsx)(d.IconGoogle,{className:"h-8 w-8"})})]}),!!a&&(0,r.jsx)("div",{className:"mt-4 text-destructive",children:a})]})}function G(){var e;let t=(0,a.useRouter)(),n=(0,a.useSearchParams)(),l=null===(e=n.get("mode"))||void 0===e?void 0:e.toString(),o=(0,i.Uw)(),c=(0,i.jJ)();return(s.useEffect(()=>{let e=!1===o&&"reset"===l||!1===c&&"signup"===l;e&&t.replace("/auth/signin")},[l,o,c]),"reset"===l)?(0,r.jsx)(y,{}):"signup"===l?(0,r.jsx)(k,{}):(0,r.jsx)(Z,{})}},93023:function(e,t,n){"use strict";n.d(t,{d:function(){return o},z:function(){return c}});var r=n(57437),s=n(2265),a=n(67256),i=n(7404),l=n(39311);let o=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:n})),ref:t,...d})});c.displayName="Button"},41315:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return c},lX:function(){return h},pf:function(){return v},xJ:function(){return x},zG:function(){return g}});var r=n(57437),s=n(2265),a=n(67256),i=n(61865),l=n(39311),o=n(66672);let c=i.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(i.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(f),{getFieldState:n,formState:r}=(0,i.Gc)(),a=e.name||"root",l=n(a,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:a,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},f=s.createContext({}),x=s.forwardRef((e,t)=>{let{className:n,...a}=e,i=s.useId();return(0,r.jsx)(f.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",n),...a})})});x.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:n,required:s,...a}=e,{error:i,formItemId:c}=m();return(0,r.jsx)(o._,{ref:t,className:(0,l.cn)(i&&"text-destructive",s&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...a})});h.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,r.jsx)(a.g7,{ref:t,id:i,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...n})});p.displayName="FormControl";let v=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:a}=m();return(0,r.jsx)("p",{ref:t,id:a,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});v.displayName="FormDescription";let g=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e,{error:i,formMessageId:o}=m(),c=i?String(null==i?void 0:i.message):s;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",n),...a,children:c}):null});g.displayName="FormMessage"},51908:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(57437),s=n(2265),a=n(39311);let i=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},66672:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(57437),s=n(2265),a=n(36743),i=n(7404),l=n(39311);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.f,{ref:t,className:(0,l.cn)(o(),n),...s})});c.displayName=a.f.displayName},61985:function(e,t,n){"use strict";n.d(t,{L:function(){return s},o:function(){return r}});let r="name@yourcompany.com",s=20},52485:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(24033);function s(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)();return{pathname:e,router:t,searchParams:n,updateSearchParams:r=>{let{set:s,del:a,replace:i,getNewPath:l}=r,o=new URLSearchParams(n);s&&Object.entries(s).forEach(e=>{let[t,n]=e;return o.set(t,n)}),a&&(Array.isArray(a)?a.forEach(e=>o.delete(e)):o.delete(a));let c=o.toString(),d="".concat(e).concat(c.length>0?"?".concat(c):"");if(l)return d;i?t.replace(d):t.push(d)},getQueryString:e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""}}}},1592:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(34084),s=n(58001),a=n(7820);let i=!1,l=[];async function o(e,t){var n,r,a;let o=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch,f=await o(e,c(t));if(401!==f.status)return m(f,t);{if(i)return new Promise(n=>{l.push({url:e,options:t,resolve:n})});let n=null===(r=(0,s.bW)())||void 0===r?void 0:r.refreshToken;if(!n){(0,s.Rn)();return}i=!0;let o=await d(n),c=null==o?void 0:null===(a=o.data)||void 0===a?void 0:a.refreshToken;if(c){for((0,s.pC)({accessToken:c.accessToken,refreshToken:c.refreshToken}),i=!1;l.length;){let e=l.shift();null==e||e.resolve(u(e.url,e.options))}return u(e,t)}i=!1,l.length=0,(0,s.Rn)()}}function c(e){var t;let n=new Headers(null==e?void 0:e.headers);return n.append("authorization","Bearer ".concat(null===(t=(0,s.bW)())||void 0===t?void 0:t.accessToken)),{...e||{},headers:n}}async function d(e){let t=a.Lp.createRequestOperation("mutation",(0,r.h)(s.Dp,{refreshToken:e}));return a.Lp.executeMutation(t)}function u(e,t){var n;let r=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;return r(e,c(t)).then(e=>m(e,t))}function m(e,t){return(null==t?void 0:t.responseFormatter)?t.responseFormatter(e):(null==t?void 0:t.responseFormat)==="blob"?e.blob():e.json()}},9381:function(e,t,n){"use strict";n.d(t,{WV:function(){return l},jH:function(){return o}});var r=n(13428),s=n(2265),a=n(54887),i=n(67256);let l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=(0,s.forwardRef)((e,n)=>{let{asChild:a,...l}=e,o=a?i.g7:t;return(0,s.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,s.createElement)(o,(0,r.Z)({},l,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function o(e,t){e&&(0,a.flushSync)(()=>e.dispatchEvent(t))}},1589:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(30713),s=n(44796);let a=(0,s.xD)(r.ZP,e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r)))}},function(e){e.O(0,[3529,4762,2363,9233,713,7753,4168,2445,2971,7864,1744],function(){return e(e.s=76846)}),_N_E=e.O()}]);
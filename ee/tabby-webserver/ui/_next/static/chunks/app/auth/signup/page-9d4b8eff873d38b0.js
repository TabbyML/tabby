(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5271],{7404:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.flat(1/0).filter(Boolean).join(" ")},s=(e,t)=>n=>{var s;if((null==t?void 0:t.variants)==null)return i(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(e=>{let t=null==n?void 0:n[e],i=null==o?void 0:o[e];if(null===t)return null;let s=r(t)||r(i);return a[e][s]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),d=null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...c}[t]):({...o,...c})[t]===n})?[...e,n,r]:e},[]);return i(e,l,d,null==n?void 0:n.class,null==n?void 0:n.className)}},37704:function(e,t,n){Promise.resolve().then(n.bind(n,89890))},89890:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(57437),i=n(24033);n(2265);var s=n(38110),a=n(61865),o=n(74578),l=n(61985),c=n(58835),d=n(58001),u=n(7820),m=n(39311),f=n(93023),x=n(41315),p=n(84168),v=n(51908);let j=(0,c.BX)("\n  mutation register(\n    $email: String!\n    $password1: String!\n    $password2: String!\n    $invitationCode: String\n  ) {\n    register(\n      email: $email\n      password1: $password1\n      password2: $password2\n      invitationCode: $invitationCode\n    ) {\n      accessToken\n      refreshToken\n    }\n  }\n"),h=o.Ry({email:o.Z_().email("Invalid email address"),password1:o.Z_(),password2:o.Z_(),invitationCode:o.Z_().optional()});function N(e){let{className:t,invitationCode:n,...o}=e,c=(0,a.cI)({resolver:(0,s.F)(h),defaultValues:{invitationCode:n}}),N=(0,i.useRouter)(),w=(0,d.zq)(),{isSubmitting:y}=c.formState,g=(0,u.Db)(j,{async onCompleted(e){await w(null==e?void 0:e.register)&&N.replace("/")},form:c});return(0,r.jsx)("div",{className:(0,m.cn)("grid gap-6",t),...o,children:(0,r.jsxs)(x.l0,{...c,children:[(0,r.jsxs)("form",{className:"grid gap-2",onSubmit:c.handleSubmit(g),children:[(0,r.jsx)(x.Wi,{control:c.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Email"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(v.I,{placeholder:l.o,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:c.control,name:"password1",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Password"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(v.I,{type:"password",...t})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:c.control,name:"password2",render:e=>{let{field:t}=e;return(0,r.jsxs)(x.xJ,{children:[(0,r.jsx)(x.lX,{children:"Confirm Password"}),(0,r.jsx)(x.NI,{children:(0,r.jsx)(v.I,{type:"password",...t})}),(0,r.jsx)(x.zG,{})]})}}),(0,r.jsx)(x.Wi,{control:c.control,name:"invitationCode",render:e=>{let{field:t}=e;return(0,r.jsx)(x.xJ,{className:"hidden",children:(0,r.jsx)(x.NI,{children:(0,r.jsx)(v.I,{type:"hidden",...t})})})}}),(0,r.jsxs)(f.z,{type:"submit",className:"mt-1",disabled:y,children:[y&&(0,r.jsx)(p.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Register"]})]}),(0,r.jsx)(x.zG,{className:"text-center"})]})})}function w(){let e=(0,i.useSearchParams)(),t=e.get("invitationCode")||void 0,n=e.get("isAdmin")||!1;return n||t?(0,r.jsx)(y,{title:n?"Create an admin account":"Create an account",description:n?"Your instance will be secured, only registered users can access it.":"Fill form below to create your account",show:!0}):(0,r.jsx)(y,{title:"No invitation code",description:"Please contact your Tabby admin for an invitation code to register"})}function y(e){let{title:t,description:n,show:s}=e,a=(0,i.useSearchParams)(),o=a.get("invitationCode")||void 0;return(0,r.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:t}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]}),s&&(0,r.jsx)(N,{invitationCode:o})]})}},41315:function(e,t,n){"use strict";n.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return c},lX:function(){return p},pf:function(){return j},xJ:function(){return x},zG:function(){return h}});var r=n(57437),i=n(2265),s=n(67256),a=n(61865),o=n(39311),l=n(66672);let c=a.RV,d=i.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(a.Qr,{...t})})},m=()=>{let e=i.useContext(d),t=i.useContext(f),{getFieldState:n,formState:r}=(0,a.Gc)(),s=e.name||"root",o=n(s,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:l}=t;return{id:l,name:s,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},f=i.createContext({}),x=i.forwardRef((e,t)=>{let{className:n,...s}=e,a=i.useId();return(0,r.jsx)(f.Provider,{value:{id:a},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...s})})});x.displayName="FormItem";let p=i.forwardRef((e,t)=>{let{className:n,required:i,...s}=e,{error:a,formItemId:c}=m();return(0,r.jsx)(l._,{ref:t,className:(0,o.cn)(a&&"text-destructive",i&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...s})});p.displayName="FormLabel";let v=i.forwardRef((e,t)=>{let{...n}=e,{error:i,formItemId:a,formDescriptionId:o,formMessageId:l}=m();return(0,r.jsx)(s.g7,{ref:t,id:a,"aria-describedby":i?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!i,...n})});v.displayName="FormControl";let j=i.forwardRef((e,t)=>{let{className:n,...i}=e,{formDescriptionId:s}=m();return(0,r.jsx)("p",{ref:t,id:s,className:(0,o.cn)("text-sm text-muted-foreground",n),...i})});j.displayName="FormDescription";let h=i.forwardRef((e,t)=>{let{className:n,children:i,...s}=e,{error:a,formMessageId:l}=m(),c=a?String(null==a?void 0:a.message):i;return c?(0,r.jsx)("p",{ref:t,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",n),...s,children:c}):null});h.displayName="FormMessage"},66672:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(57437),i=n(2265),s=n(36743),a=n(7404),o=n(39311);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,o.cn)(l(),n),...i})});c.displayName=s.f.displayName},61985:function(e,t,n){"use strict";n.d(t,{L:function(){return i},o:function(){return r}});let r="name@yourcompany.com",i=20},9381:function(e,t,n){"use strict";n.d(t,{WV:function(){return o},jH:function(){return l}});var r=n(13428),i=n(2265),s=n(54887),a=n(67256);let o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=(0,i.forwardRef)((e,n)=>{let{asChild:s,...o}=e,l=s?a.g7:t;return(0,i.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,i.createElement)(l,(0,r.Z)({},o,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function l(e,t){e&&(0,s.flushSync)(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[1091,584,9233,4402,4168,633,2971,7864,1744],function(){return e(e.s=37704)}),_N_E=e.O()}]);
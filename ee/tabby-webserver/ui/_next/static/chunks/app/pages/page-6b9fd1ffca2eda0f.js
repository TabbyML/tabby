(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2342],{35009:function(e,t,n){"use strict";n.d(t,{F:function(){return d},f:function(){return c}});var a=n(3546);let s=["light","dark"],i="(prefers-color-scheme: dark)",r="undefined"==typeof window,l=(0,a.createContext)(void 0),o={setTheme:e=>{},themes:[]},d=()=>{var e;return null!==(e=(0,a.useContext)(l))&&void 0!==e?e:o},c=e=>(0,a.useContext)(l)?a.createElement(a.Fragment,null,e.children):a.createElement(m,e),u=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:d=u,defaultTheme:c=n?"system":"light",attribute:m="data-theme",value:g,children:v,nonce:j})=>{let[b,N]=(0,a.useState)(()=>h(o,c)),[y,w]=(0,a.useState)(()=>h(o)),S=g?Object.values(g):d,C=(0,a.useCallback)(e=>{let a=e;if(!a)return;"system"===e&&n&&(a=p());let i=g?g[a]:a,l=t?x():null,o=document.documentElement;if("class"===m?(o.classList.remove(...S),i&&o.classList.add(i)):i?o.setAttribute(m,i):o.removeAttribute(m),r){let e=s.includes(c)?c:null,t=s.includes(a)?a:e;o.style.colorScheme=t}null==l||l()},[]),I=(0,a.useCallback)(e=>{N(e);try{localStorage.setItem(o,e)}catch(e){}},[e]),k=(0,a.useCallback)(t=>{let a=p(t);w(a),"system"===b&&n&&!e&&C("system")},[b,e]);(0,a.useEffect)(()=>{let e=window.matchMedia(i);return e.addListener(k),k(e),()=>e.removeListener(k)},[k]),(0,a.useEffect)(()=>{let e=e=>{e.key===o&&I(e.newValue||c)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[I]),(0,a.useEffect)(()=>{C(null!=e?e:b)},[e,b]);let P=(0,a.useMemo)(()=>({theme:b,setTheme:I,forcedTheme:e,resolvedTheme:"system"===b?y:b,themes:n?[...d,"system"]:d,systemTheme:n?y:void 0}),[b,I,e,y,n,d]);return a.createElement(l.Provider,{value:P},a.createElement(f,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:o,themes:d,defaultTheme:c,attribute:m,value:g,children:v,attrs:S,nonce:j}),v)},f=(0,a.memo)(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:l,defaultTheme:o,value:d,attrs:c,nonce:u})=>{let m="system"===o,f="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${c.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=l?s.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(e,t=!1,a=!0)=>{let i=d?d[e]:e,r=t?e+"|| ''":`'${i}'`,o="";return l&&a&&!t&&s.includes(e)&&(o+=`d.style.colorScheme = '${e}';`),"class"===n?o+=t||i?`c.add(${r})`:"null":i&&(o+=`d[s](n,${r})`),o},p=e?`!function(){${f}${x(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${m})){var t='${i}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${d?`var x=${JSON.stringify(d)};`:""}${x(d?"x[e]":"e",!0)}}${m?"":"else{"+x(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${d?`var x=${JSON.stringify(d)};`:""}${x(d?"x[e]":"e",!0)}}else{${x(o,!1,!1)};}${h}}catch(t){}}();`;return a.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:p}})},()=>!0),h=(e,t)=>{let n;if(!r){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},x=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},p=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light")},68109:function(e,t,n){Promise.resolve().then(n.bind(n,27540))},27540:function(e,t,n){"use strict";n.r(t),n.d(t,{Page:function(){return eU}});var a=n(36164),s=n(3546),i=n(70652),r=n.n(i),l=n(54767),o=n(28445),d=n(84837),c=n(1853),u=n(12978),m=n(2578),f=n(40055),h=n(21808),x=n(93877),p=n(18500),g=n(9010),v=n(24449),j=n(16784),b=n(98454),N=n(44645),y=n(96274),w=n(37266),S=n(11634),C=n(70410),I=n(57288),k=n(31458),P=n(81565),A=n(57830),_=n(3448),R=n(72657),F=n(30601),T=n(6230),E=n(69579),L=n(37034),z=n(52569),D=n(43240);let M=(0,D.BX)("\n  subscription createThreadToPageRun($threadId: ID!) {\n    createThreadToPageRun(threadId: $threadId) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          position\n          title\n          attachments {\n            code {\n              __typename\n              gitUrl\n              commit\n              filepath\n              language\n              content\n              startLine\n            }\n            codeFileList {\n              __typename\n              fileList\n              truncated\n            }\n          }\n        }\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          __typename\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),$=(0,D.BX)("\n  subscription createPageSectionRun($input: CreatePageSectionRunInput!) {\n    createPageSectionRun(input: $input) {\n      __typename\n      ... on PageSection {\n        id\n        title\n        position\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n    }\n  }\n"),V=(0,D.BX)("\n  subscription createPageRun($input: CreatePageRunInput!) {\n    createPageRun(input: $input) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          position\n          title\n          attachments {\n            code {\n              __typename\n              gitUrl\n              commit\n              filepath\n              language\n              content\n              startLine\n            }\n            codeFileList {\n              __typename\n              fileList\n              truncated\n            }\n          }\n        }\n      }\n      ... on PageSectionAttachmentCodeFileList {\n        id\n        codeFileList {\n          __typename\n          fileList\n          truncated\n        }\n      }\n      ... on PageSectionAttachmentCode {\n        id\n        codes {\n          code {\n            __typename\n            gitUrl\n            commit\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),O=(0,D.BX)("\n  mutation DeletePageSection($sectionId: ID!) {\n    deletePageSection(sectionId: $sectionId)\n  }\n"),U=(0,D.BX)("\n  mutation movePageSection($id: ID!, $direction: MoveSectionDirection!) {\n    movePageSection(id: $id, direction: $direction)\n  }\n");var Z=n(99092),W=n.n(Z),B=n(11978),K=n(28312),G=n(73460),H=n(63795),Y=n(62202),X=n(68172),J=n(61249),q=n(63743),Q=n(7449);let ee=(0,s.createContext)({}),et=(0,D.BX)("\n  mutation DeletePage($id: ID!) {\n    deletePage(id: $id)\n  }\n");function en(e){let{pageIdFromURL:t,streamingDone:n}=e,i=(0,B.useRouter)(),{isPageOwner:r,mode:l,setMode:o,isLoading:d}=(0,s.useContext)(ee),[c,u]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!1),{copyToClipboard:x}=(0,K.m)({}),p=(0,S.Db)(et,{onCompleted(e){e.deletePage?i.replace("/"):(m.A.error("Failed to delete"),h(!1))},onError(e){m.A.error((null==e?void 0:e.message)||"Failed to delete"),h(!1)}}),g=e=>{e&&(0,w.wh)(),i.push("/")};return(0,a.jsxs)("header",{className:"relative flex h-16 w-full items-center justify-between border-b px-4 lg:px-10",children:[(0,a.jsx)("div",{className:"flex items-center gap-x-6",children:(0,a.jsxs)(k.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>g(),children:[(0,a.jsx)(P.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r&&t?(0,a.jsx)(a.Fragment,{children:"edit"===l?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(k.z,{disabled:!n,onClick:e=>o("view"),children:"Done"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Y.h_,{modal:!1,children:[(0,a.jsx)(Y.$F,{asChild:!0,children:(0,a.jsx)(k.z,{size:"icon",variant:"ghost",children:(0,a.jsx)(P.IconMore,{})})}),(0,a.jsxs)(Y.AW,{align:"end",children:[(0,a.jsxs)(Y.Xi,{className:"cursor-pointer gap-2",onSelect:()=>{x(window.location.href)},children:[(0,a.jsx)(P.IconShare,{}),"Share"]}),n&&t&&r&&(0,a.jsxs)(Y.Xi,{className:"cursor-pointer gap-2 !text-destructive",onSelect:()=>u(!0),children:[(0,a.jsx)(P.IconTrash,{}),"Delete Page"]})]})]}),(0,a.jsxs)(k.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal",onClick:()=>o("edit"),children:[(0,a.jsx)(P.IconEdit,{}),"Edit"]})]})}):null,(0,a.jsx)(X.q,{children:(0,a.jsx)(q.T,{})}),(0,a.jsx)(J.L,{className:"mr-4"}),(0,a.jsx)(Q.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,w.wh)()},children:(0,a.jsx)(z.SQ,{className:"h-10 w-10 border"})})]}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:d?(0,a.jsx)(H.C,{variant:"secondary",children:"Writing..."}):"edit"===l?(0,a.jsx)(H.C,{children:"Editing"}):null}),(0,a.jsx)(G.aR,{open:c,onOpenChange:u,children:(0,a.jsxs)(G._T,{children:[(0,a.jsxs)(G.fY,{children:[(0,a.jsx)(G.f$,{children:"Delete this page"}),(0,a.jsx)(G.yT,{children:"Are you sure you want to delete this page? This operation is not revertible."})]}),(0,a.jsxs)(G.xo,{children:[(0,a.jsx)(G.le,{children:"Cancel"}),(0,a.jsxs)(G.OL,{className:(0,k.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),h(!0),p({id:t}).then(e=>{var t;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deletePage)?i.replace("/"):(m.A.error("Failed to delete"),h(!1))})},children:[f&&(0,a.jsx)(P.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})})]})}let ea=e=>{let{sections:t}=e,{isLoading:n,pendingSectionIds:i}=(0,s.useContext)(ee),[r,l]=(0,s.useState)(),o=(0,s.useRef)(null),d=(0,v.S)(e=>{l(e)},200);return(0,s.useEffect)(()=>{o.current=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(t.length>0){let e=t[0];d.run(e.target.id)}},{root:null,rootMargin:"0px",threshold:.1});let e=document.querySelectorAll(".section-title");return e.forEach(e=>{var t;null===(t=o.current)||void 0===t||t.observe(e)}),()=>{var e;null===(e=o.current)||void 0===e||e.disconnect()}},[n,i]),(0,a.jsx)("nav",{className:"sticky right-0 top-0 p-4 pt-8",children:(0,a.jsx)("ul",{className:"flex flex-col space-y-1 border-l",children:null==t?void 0:t.map(e=>{let t=r===e.id;return(0,a.jsx)("li",{className:"relative -ml-px cursor-pointer",onClick:t=>{let n=document.getElementById(e.id);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},children:(0,a.jsx)("div",{className:(0,I.cn)("truncate whitespace-nowrap pl-2 text-sm",{"text-foreground border-l border-foreground":t,"text-muted-foreground":!t}),children:e.title})},e.id)})})})};var es=n(84381),ei=n(5493),er=n(23782),el=n(98150),eo=n(82394),ed=n(75217);function ec(e){let{onSubmit:t}=e,{fetchingContextInfo:n,contextInfo:i}=(0,s.useContext)(ee),r=(0,s.useRef)(null),l=er.Ry({titlePrompt:er.Z_().trim()}),o=(0,ei.cI)({resolver:(0,es.F)(l)}),d=o.watch("titlePrompt"),[c,u]=(0,s.useState)(),m=(0,s.useMemo)(()=>null==i?void 0:i.sources.filter(e=>(0,I.wO)(e.sourceKind)),[null==i?void 0:i.sources]),f=()=>{var e;null===(e=r.current)||void 0===e||e.focus()},h=async e=>{let n=await t({titlePrompt:e.titlePrompt.trim(),codeSourceId:c});n&&(0,S.zG)(o)(n)};return(0,a.jsx)(el.l0,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(h),children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsx)(el.Wi,{control:o.control,name:"titlePrompt",render:e=>{let{field:{ref:t,...n}}=e;return(0,a.jsxs)(el.xJ,{className:"flex-1",children:[(0,a.jsx)(el.NI,{children:(0,a.jsx)(eo.I,{autoFocus:!0,className:"h-auto w-full border-none text-3xl font-semibold shadow-none outline-none focus-visible:ring-0",placeholder:"What is your page about?",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",ref:e=>{t(e),r.current=e},...n})}),(0,a.jsx)(el.zG,{})]})}}),(0,a.jsx)(k.z,{className:"h-auto w-auto px-2",type:"submit",disabled:!d,children:(0,a.jsx)(P.IconArrowRight,{})})]}),(0,a.jsx)("div",{className:"mt-4 pl-3",onClick:e=>f(),children:(0,a.jsx)(ed.v,{repos:m,isInitializing:n,value:c,onChange:e=>{u(e),setTimeout(()=>{f()},10)},placeholder:"Select repository",showChevron:!0})}),(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)(el.zG,{})})]})})}var eu=n(23455);function em(e){let{onSubmit:t,disabled:n,className:i}=e,r=er.Ry({title:er.Z_().trim()}),l=(0,ei.cI)({resolver:(0,es.F)(r)}),{formRef:o,onKeyDown:d}=function(){let e=(0,s.useRef)(null);return{formRef:e,onKeyDown:t=>{if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){var n;null===(n=e.current)||void 0===n||n.requestSubmit(),t.preventDefault()}}}}(),c=l.watch("title"),{isSubmitting:u}=l.formState,m=n||!c||u,f=async e=>{if(m)return;let n=e.title;t(n).then(e=>{e&&(0,S.zG)(l)(e)}),l.reset({title:""})};return(0,a.jsx)(el.l0,{...l,children:(0,a.jsx)("form",{className:(0,I.cn)(i),onSubmit:l.handleSubmit(f),ref:o,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(el.Wi,{control:l.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsx)(el.xJ,{className:"flex-1",children:(0,a.jsx)(el.NI,{children:(0,a.jsx)(eu.Z,{draggable:!1,minRows:2,maxRows:6,className:"w-full rounded-lg border-2 bg-background p-4 pr-12 text-xl outline-ring",placeholder:"What is the section about?",onKeyDown:d,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",...t})})})}}),(0,a.jsx)(k.z,{size:"icon",className:"absolute right-4 top-1/2 z-10 h-7 w-7 -translate-y-1/2 rounded-full",type:"submit",disabled:m,children:(0,a.jsx)(P.IconPlus,{})})]})})})}var ef=n(54646);function eh(e){let{message:t,onCancel:n,onSubmit:s,inputClassName:i}=e,r=er.Ry({content:er.Z_().trim()}),l=(0,ei.cI)({resolver:(0,es.F)(r),defaultValues:{content:t}}),{isSubmitting:o}=l.formState,d=async e=>{let t=await s(e.content);t&&(0,S.zG)(l)(t)};return(0,a.jsx)(el.l0,{...l,children:(0,a.jsxs)("form",{onSubmit:l.handleSubmit(d),children:[(0,a.jsx)(el.Wi,{control:l.control,name:"content",render:e=>{let{field:t}=e;return(0,a.jsxs)(el.xJ,{children:[(0,a.jsx)(el.NI,{children:(0,a.jsx)(eu.Z,{autoFocus:!0,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",minRows:2,maxRows:20,className:(0,I.cn)("w-full rounded-lg border bg-background p-4 outline-ring",i),...t})}),(0,a.jsx)(el.zG,{})]})}}),(0,a.jsxs)("div",{className:"mb-3 mt-1 flex items-center justify-between gap-2 px-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(el.zG,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.z,{type:"button",variant:"outline",onClick:n,className:"min-w-[2rem]",children:"Cancel"}),(0,a.jsxs)(k.z,{type:"submit",disabled:o,children:[o&&(0,a.jsx)(P.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})]})})}let ex=(0,D.BX)("\n  mutation updatePageContent($input: UpdatePageContentInput!) {\n    updatePageContent(input: $input)\n  }\n");function ep(e){var t,n;let{page:i,onUpdate:r}=e,{mode:l,isLoading:o,isPageOwner:d}=(0,s.useContext)(ee),[c,u]=(0,s.useState)(!1),m=(0,S.Db)(ex),f=async e=>{var t;if(!i)return;let n=await m({input:{id:i.id,content:e}});if(null==n||null===(t=n.data)||void 0===t||!t.updatePageContent)return null==n?void 0:n.error;r(e),u(!1)};return(0,a.jsxs)("div",{children:[c?(0,a.jsx)(eh,{message:null!==(t=null==i?void 0:i.content)&&void 0!==t?t:"",onCancel:()=>u(!1),onSubmit:f}):(0,a.jsx)(ef.J,{message:null!==(n=null==i?void 0:i.content)&&void 0!==n?n:"",supportsOnApplyInEditorV2:!1}),d&&"edit"===l&&!o&&!c&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)(k.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:o,onClick:()=>{u(!0)},children:[(0,a.jsx)(P.IconEdit,{}),"Edit"]})})]})}let eg=(0,D.BX)("\n  mutation updatePageTitle($input: UpdatePageTitleInput!) {\n    updatePageTitle(input: $input)\n  }\n");function ev(e){var t;let{page:n,onUpdate:i,isGeneratingPageTitle:r}=e,{mode:l,isLoading:o,isPageOwner:d}=(0,s.useContext)(ee),[c,u]=(0,s.useState)(!1),m=(0,S.Db)(eg),f=async e=>{var t;if(!n)return;let a=await m({input:{id:n.id,title:e}});if(null==a||null===(t=a.data)||void 0===t||!t.updatePageTitle)return null==a?void 0:a.error;i(e),u(!1)};return(0,a.jsx)("div",{children:c?(0,a.jsx)(eh,{message:null!==(t=null==n?void 0:n.title)&&void 0!==t?t:"",onSubmit:f,onCancel:()=>u(!1),inputClassName:"text-3xl font-semibold"}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("h1",{className:(0,I.cn)("text-4xl font-semibold",{"animate-pulse text-muted-foreground":r}),children:null==n?void 0:n.title}),"edit"===l&&!o&&(0,a.jsx)(k.z,{size:"icon",className:"mt-1 shrink-0 rounded-full shadow-none",onClick:e=>u(!0),variant:"secondary",children:(0,a.jsx)(P.IconEdit,{})})]})})}var ej=n(62226),eb=n.n(ej),eN=n(6797),ey=n.n(eN),ew=n(66686),eS=n(25600),eC=n(29),eI=n(21008),ek=n(89811);function eP(){return(0,a.jsx)("div",{className:"mx-auto mt-8 grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:(0,a.jsxs)("div",{className:"col-span-3 space-y-12",children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(_.O,{className:"mb-6 h-6 w-[50%]"}),(0,a.jsx)(eF,{}),(0,a.jsx)(eR,{})]}),(0,a.jsx)(eA,{})]})})}function eA(){return(0,a.jsx)("div",{className:"w-full space-y-12",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(e_,{}),(0,a.jsx)(eR,{})]},t))})}function e_(){return(0,a.jsx)("div",{className:"mb-6 w-full",children:(0,a.jsx)(_.O,{className:"w-[50%]"})})}function eR(){return(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)(_.O,{className:"w-[80%]"}),(0,a.jsx)(_.O,{className:"w-[30%]"}),(0,a.jsx)(_.O,{className:"w-[80%]"}),(0,a.jsx)(_.O,{className:"w-[30%]"})]})}function eF(){return(0,a.jsxs)("div",{className:"my-4 flex w-full items-center gap-4",children:[(0,a.jsx)(_.O,{className:"h-6 w-6 rounded-full"}),(0,a.jsx)(_.O,{className:"w-20"})]})}let eT=(0,D.BX)("\n  mutation updatePageSectionContent($input: UpdatePageSectionContentInput!) {\n    updatePageSectionContent(input: $input)\n  }\n");function eE(e){var t;let{className:n,section:i,isGenerating:r,enableMoveUp:l,enableMoveDown:o,onUpdate:d,enableDeveloperMode:u}=e,{mode:m,isPageOwner:f,isLoading:h,pendingSectionIds:x,onDeleteSection:g,onMoveSectionPosition:v}=(0,s.useContext)(ee),j=x.has(i.id)&&!i.content,[b,N]=(0,s.useState)(!1),y=(0,S.Db)(eT),w=i.attachments.code,C=i.attachments.codeFileList,A=(0,s.useMemo)(()=>(0,c.Z)([C,...w]),[C,w]),R=null==A?void 0:A.length,F=()=>{v(i.id,p.pV.Up)},E=()=>{v(i.id,p.pV.Down)},L=async e=>{var t;let n=await y({input:{id:i.id,content:e}});if(null==n||null===(t=n.data)||void 0===t||!t.updatePageSectionContent)return null==n?void 0:n.error;d(e),N(!1)};return(0,a.jsx)("div",{className:(0,I.cn)("flex flex-col gap-y-5",n),children:(0,a.jsx)(T.Z,{loading:j,fallback:(0,a.jsx)(eR,{}),children:(0,a.jsxs)("div",{children:[r&&!i.content&&(0,a.jsx)(_.O,{className:"mt-1 h-40 w-full"}),b?(0,a.jsx)(eh,{message:i.content,onCancel:()=>N(!1),onSubmit:L}):(0,a.jsx)(ef.J,{message:i.content,canWrapLongLines:!r,supportsOnApplyInEditorV2:!1,className:"prose-p:my-0.5 prose-ol:my-1 prose-ul:my-1",attachmentCode:w}),!r&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[R>0&&(0,a.jsxs)(eS.yo,{children:[(0,a.jsx)(eS.aM,{asChild:!0,children:(0,a.jsxs)("div",{className:"group relative flex w-28 cursor-pointer items-center overflow-hidden rounded-full border py-1 hover:bg-muted",children:[(0,a.jsxs)("div",{className:"ml-1.5 flex items-center -space-x-2 transition-all duration-300 ease-in-out group-hover:space-x-0",children:[!!(null==C?void 0:null===(t=C.fileList)||void 0===t?void 0:t.length)&&(0,a.jsx)(e$,{className:"bg-background group-hover:bg-transparent",children:(0,a.jsx)(P.IconListTree,{className:"h-4 w-4 rounded-full bg-primary p-0.5 text-primary-foreground"})}),!!(null==w?void 0:w.length)&&(0,a.jsx)(e$,{className:"bg-background group-hover:bg-transparent",children:(0,a.jsx)(P.IconCode,{className:"h-4 w-4 rounded-full bg-primary p-0.5 text-primary-foreground"})})]}),(0,a.jsxs)("span",{className:"mx-1 whitespace-nowrap text-xs text-muted-foreground",children:[R," sources"]}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-2 bg-gradient-to-l from-background to-transparent"})]})}),(0,a.jsxs)(eS.ue,{className:"flex w-[50vw] min-w-[300px] flex-col",children:[(0,a.jsxs)(eS.Tu,{className:"border-b",children:[(0,a.jsxs)(eS.bC,{children:[R," Sources"]}),(0,a.jsx)(eS.sw,{})]}),(0,a.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto",children:A.map((e,t)=>(0,a.jsx)(eL,{enableDeveloperMode:u,source:e},t))})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-x-3",children:f&&"edit"===m&&!h&&!b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:h,onClick:()=>{N(!0)},children:[(0,a.jsx)(P.IconEdit,{}),"Edit"]}),l&&(0,a.jsxs)(k.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",onClick:e=>F(),disabled:h,children:[(0,a.jsx)(P.IconArrowDown,{className:"rotate-180"}),"Move Up"]}),o&&(0,a.jsxs)(k.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",onClick:e=>E(),disabled:h,children:[(0,a.jsx)(P.IconArrowDown,{}),"Move Down"]}),(0,a.jsxs)(k.z,{size:"sm",variant:"hover-destructive",className:"h-auto gap-0.5 px-2 py-1 font-medium text-foreground/60",disabled:h,onClick:()=>{g(i.id)},children:[(0,a.jsx)(P.IconTrash,{}),"Delete"]})]})})]})]})})})}function eL(e){let{source:t,enableDeveloperMode:n}=e,s="AttachmentCodeFileList"===t.__typename,i="MessageAttachmentCode"===t.__typename||"AttachmentCode"===t.__typename,r="MessageAttachmentIssueDoc"===t.__typename||"MessageAttachmentPullDoc"===t.__typename||"MessageAttachmentWebDoc"===t.__typename,l="MessageAttachmentCommitDoc"===t.__typename;if(s)return(0,a.jsxs)("div",{className:"flex gap-2 overflow-hidden rounded-lg border bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(P.IconListTree,{})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"shrink-0 text-xs",children:(0,a.jsx)("span",{className:"font-semibold leading-5",children:"File list"})}),(0,a.jsx)("div",{className:"max-h-[90px] flex-1 overflow-auto",children:(0,a.jsx)("pre",{className:"text-xs",children:t.fileList.join("\n")})}),!!t.truncated&&(0,a.jsx)("div",{className:"mt-2 shrink-0 border-t pt-2 text-xs text-muted-foreground",children:"File list truncated. (Maximum number of items has been reached)"})]})]});if(i){var o,d,c,u;let e=t.filepath.split("/"),s=e.slice(0,e.length-1).join("/"),i=null==t?void 0:null===(o=t.extra)||void 0===o?void 0:o.scores;return(0,a.jsxs)(eC.u,{delayDuration:0,children:[(0,a.jsx)(eC.aJ,{asChild:!0,children:(0,a.jsx)("div",{className:"flex w-full items-start gap-2",onClick:()=>{var e;if(!t.filepath)return;let n=(0,I.XX)(window.location.origin,{kind:"file",...t,commit:null!==(e=t.commit)&&void 0!==e?e:void 0,range:(0,I.OV)(t)});window.open(n,"_blank")},children:(0,a.jsxs)("div",{className:"relative flex flex-1 cursor-pointer gap-2 rounded-lg bg-accent p-3 text-accent-foreground hover:bg-accent/70",children:[(0,a.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(P.IconCode,{})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,a.jsxs)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold leading-5",children:[(0,I.UA)(t.filepath),(0,a.jsx)(eI.o,{range:(0,I.OV)(t)})]}),!!s&&(0,a.jsx)("div",{className:"break-all text-xs text-muted-foreground",children:s})]})]})})}),(0,a.jsx)(eC._v,{hidden:!(n&&i),side:"left",children:!!i&&(0,a.jsxs)("div",{className:"pt-1",children:[(0,a.jsx)("div",{className:"mb-1 font-semibold",children:"Scores"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"rrf:"}),null!==(d=null==i?void 0:i.rrf)&&void 0!==d?d:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"bm25:"}),null!==(c=null==i?void 0:i.bm25)&&void 0!==c?c:"-"]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"w-20",children:"embedding:"}),null!==(u=null==i?void 0:i.embedding)&&void 0!==u?u:"-"]})]})]})})]})}return r?(0,a.jsx)("div",{className:"flex items-start gap-2",children:(0,a.jsx)("div",{className:"relative flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 text-card-foreground hover:bg-card/60",onClick:()=>window.open(t.link),children:(0,a.jsx)(ez,{source:t})})}):l?(0,a.jsx)("div",{className:"flex items-start gap-2",children:(0,a.jsx)("div",{className:"relative flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 text-card-foreground hover:bg-card/60",children:(0,a.jsx)(eD,{source:t})})}):null}function ez(e){let{source:t}=e;if("MessageAttachmentCommitDoc"===t.__typename)return null;let{hostname:n}=new URL(t.link),s="MessageAttachmentIssueDoc"===t.__typename,i="MessageAttachmentPullDoc"===t.__typename,r="MessageAttachmentWebDoc"===t.__typename?void 0:t.author,l=(s||i)&&!!r;return(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:t.title}),l&&(0,a.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(z.Yt,{user:r,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==r?void 0:r.name})]}),!l&&(0,a.jsx)("p",{className:(0,I.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",l?"line-clamp-1":"line-clamp-2"),children:eM((0,I.L5)(t))})]}),(0,a.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex w-full flex-1 items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ek.V,{hostname:n}),(0,a.jsx)("p",{className:"ml-1 truncate",children:n.replace("www.","").split("/")[0]})]}),(0,a.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[s&&(0,a.jsxs)(a.Fragment,{children:[t.closed?(0,a.jsx)(P.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,a.jsx)(P.IconCircleDot,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:t.closed?"Closed":"Open"})]}),i&&(0,a.jsxs)(a.Fragment,{children:[t.merged?(0,a.jsx)(P.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,a.jsx)(P.IconGitPullRequest,{className:"h-3.5 w-3.5"}),t.merged?"Merged":"Open"]})]})]})})]})}function eD(e){let{source:t}=e,n="MessageAttachmentCommitDoc"===t.__typename;if(!n)return null;let s=t.author,i=!!s;return(0,a.jsx)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,a.jsxs)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:[t.sha.slice(0,7),": ",t.message]}),i&&(0,a.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(z.Yt,{user:s,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==s?void 0:s.name})]}),!i&&(0,a.jsx)("p",{className:(0,I.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",i?"line-clamp-1":"line-clamp-2"),children:eM((0,I.L5)(t))})]})})}let eM=e=>{let t=eb().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=ew.TU.parse(t),a=ey().decode(n),s=a.replace(/<\/?[^>]+(>|$)/g,"");return s};function e$(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{className:(0,I.cn)("flex items-center justify-center rounded-full p-0.5 transition-all duration-300 ease-in-out",n),children:t})}let eV=(0,D.BX)("\n  mutation updatePageSectionTitle($input: UpdatePageSectionTitleInput!) {\n    updatePageSectionTitle(input: $input)\n  }\n");function eO(e){let{section:t,className:n,onUpdate:i,...r}=e,{pendingSectionIds:l,mode:o,isLoading:d}=(0,s.useContext)(ee),[c,u]=(0,s.useState)(!1),m="edit"===o,f=l.has(t.id)&&!t.content,h=(0,S.Db)(eV),x=async e=>{var n;let a=await h({input:{id:t.id,title:e}});if(null==a||null===(n=a.data)||void 0===n||!n.updatePageSectionTitle)return null==a?void 0:a.error;i(e),u(!1)};return(0,s.useEffect)(()=>{!m&&c&&u(!0)},[m]),(0,a.jsx)("div",{className:(0,I.cn)("section-title",n),id:t.id,children:c?(0,a.jsx)(eh,{message:t.title,onSubmit:x,onCancel:()=>u(!1),inputClassName:"text-3xl font-semibold"}):(0,a.jsxs)("div",{className:(0,I.cn)("flex items-baseline gap-2 font-semibold"),id:t.id,...r,children:[(0,a.jsx)(ef.J,{message:t.title,contextInfo:void 0,supportsOnApplyInEditorV2:!1,className:(0,I.cn)("text-3xl prose-h2:text-foreground prose-p:mb-1 prose-p:mt-0",{"text-foreground/50":f}),headline:!0}),m&&!d&&(0,a.jsx)(k.z,{size:"icon",className:"shrink-0 rounded-full shadow-none",onClick:e=>u(!0),variant:"secondary",children:(0,a.jsx)(P.IconEdit,{})})]})})}function eU(){var e,t,n,i;let[{data:r}]=(0,b.P)(),[{data:w,fetching:k}]=(0,f.aM)({query:C.Gx}),[P]=(0,x.m3)(),{updateUrlComponents:E,pathname:D,router:Z}=(0,N.Z)(),[B,K]=(0,s.useState)(),[G,H]=(0,s.useState)(!1),Y=(0,y.uz)(e=>e.pendingThreadId),X=(0,y.uz)(e=>e.pendingThreadTitle),[J,q]=(0,s.useState)(Y?"edit":"view"),[Q,et]=(0,s.useState)(new Set),[es,ei]=(0,s.useState)(!!Y),[er,el]=(0,s.useState)(void 0),[eo,ed]=(0,s.useState)(!0),eu=(0,s.useRef)(null),[ef]=(0,F.Hb)(),eh=(0,s.useRef)(!1),{theme:ex}=(0,g.X)(),[eg,ej]=(0,s.useState)(),[eb,eN]=(0,s.useState)(),[ey,ew]=(0,s.useState)(),[eS,eC]=(0,s.useState)(!1),[eI,ek]=(0,s.useState)(),[eF,eT]=(0,s.useState)(!1),[eL,ez]=(0,s.useState)(!1),eD=(0,s.useMemo)(()=>{var e,t;if(!B)return;let n=null===(t=B.match(/^\/pages\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop();return"new"===n?void 0:n},[B]),eM=(0,s.useMemo)(()=>"/pages/new"===B,[B]),e$=(0,s.useRef)(),eV=(0,j.d)(()=>{var e;null===(e=e$.current)||void 0===e||e.call(e$),e$.current=void 0,eC(!1),et(new Set),el(void 0),ed(!0)}),eU=e=>{var t;if(!e)return;let{title:n,id:a}=e,s=null!==(t=(n||"").split("\n")[0])&&void 0!==t?t:"",i=s.slice(0,h.$I),r=(0,l.Z)(i),o=(0,c.Z)([r,a]).join("-"),d=E({pathname:"/pages/".concat(o),replace:!0});return location.origin+d},eW=e=>{switch(e.__typename){case"PageCreated":eN(t=>t?{...t,id:e.id,title:e.title,authorId:e.authorId}:t),ej(e.id),ez(!1),eU(e);break;case"PageContentDelta":eN(t=>t?{...t,content:(t.content||"")+e.delta}:t);break;case"PageContentCompleted":break;case"PageSectionsCreated":{let t=e.sections.map(e=>({...e,pageId:eg,content:"",attachments:{code:[],codeFileList:null}}));et(new Set(e.sections.map(e=>e.id))),ew(t);break}case"PageSectionAttachmentCodeFileList":ew(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,codeFileList:e.codeFileList}}:t):t);break;case"PageSectionAttachmentCode":ew(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{code:e.codes.map(e=>({...e.code,extra:{scores:e.scores}})),codeFileList:t.attachments.codeFileList}}:t):t);break;case"PageSectionContentDelta":el(e.id),ew(t=>t?t.map(t=>t.id===e.id?{...t,content:(t.content||"")+e.delta}:t):t);case"PageSectionContentCompleted":et(t=>{if(!t.has(e.id))return t;let n=new Set(t);return n.delete(e.id),n});break;case"PageCompleted":eV.current()}},eB=e=>{switch(e.__typename){case"PageSection":{let{id:t,title:n,position:a}=e;el(t),et(new Set([t])),ew(e=>{if(!e)return e;let s=e.slice(0,-1);return[...s,{id:t,title:n,position:a,content:"",pageId:eg,attachments:{code:[],codeFileList:null}}]});break}case"PageSectionContentDelta":{let{delta:t,id:n}=e;ew(e=>e?e.map(e=>e.id===n?{...e,content:e.content+t}:e):e);break}case"PageSectionAttachmentCodeFileList":ew(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{...t.attachments,codeFileList:e.codeFileList}}:t):t);break;case"PageSectionAttachmentCode":ew(t=>t&&t.length?t.map(t=>t.id===e.id?{...t,attachments:{code:e.codes.map(e=>({...e.code,extra:{scores:e.scores}})),codeFileList:t.attachments.codeFileList}}:t):t);break;case"PageSectionContentCompleted":eV.current()}},eK=async e=>{if(!eg)return;let t=(0,I.x0)();eC(!0),ek(void 0),ew(n=>{var a;let s=(null==n?void 0:null===(a=n[n.length-1])||void 0===a?void 0:a.position)||0,i={id:t,title:e,pageId:eg,content:"",position:s+1,attachments:{code:[],codeFileList:null}};return n?[...n,i]:[i]}),et(new Set([t])),el(t);let{unsubscribe:n}=S.Lp.subscription($,{input:{pageId:eg,titlePrompt:e}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eC(!1),ek(e.error),n();return}let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.createPageSectionRun;a&&eB(a)});e$.current=n},eG=(e,t)=>{let n=new Date().toISOString(),a=(0,I.x0)();eN({id:a,authorId:"",title:t,content:"",updatedAt:n,createdAt:n}),eC(!0),ej(a),ez(!0),ek(void 0),ed(!1);let{unsubscribe:s}=S.Lp.subscription(M,{threadId:e}).subscribe(e=>{var t;if(null==e?void 0:e.error){eC(!1),ek(e.error),s();return}let n=null===(t=e.data)||void 0===t?void 0:t.createThreadToPageRun;n&&eW(n)});return s},eH=async e=>{let{titlePrompt:t,codeSourceId:n}=e,a=new Date().toISOString(),s=(0,I.x0)();eN({id:s,authorId:"",title:t,content:"",codeSourceId:n,updatedAt:a,createdAt:a}),ej(s),eC(!0),ez(!0),ed(!1);let{unsubscribe:i}=S.Lp.subscription(V,{input:{titlePrompt:t,codeQuery:n?{sourceId:n,content:t}:null}}).subscribe(e=>{var t;if(null==e?void 0:e.error){eC(!1),ek(e.error),i();return}let n=null===(t=e.data)||void 0===t?void 0:t.createPageRun;n&&eW(n)});e$.current=i},eY=(0,S.Db)(O),eX=(0,S.Db)(U);(0,s.useEffect)(()=>{eD&&ej(eD)},[eD]);let[eJ,eq]=(0,s.useState)(),[{data:eQ,error:e0,fetching:e1}]=(0,f.aM)({query:C.u5,variables:{ids:[eD]},pause:!eD});(0,s.useEffect)(()=>{var e,t;let n=null==eQ?void 0:null===(t=eQ.pages.edges)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.node;n&&eN(n)},[eQ]);let[{data:e2,error:e5,fetching:e4,stale:e3}]=(0,f.aM)({query:C.bP,variables:{pageId:eD,first:30,after:eJ},pause:!eD||es});(0,s.useEffect)(()=>{var e,t,n,a;if(!e3){if(null==e2?void 0:null===(t=e2.pageSections)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=e2.pageSections.edges.map(e=>e.node).slice().sort((e,t)=>e.position-t.position);ew(t=>(0,u.Z)([...t||[],...e],"id"))}if(null==e2?void 0:e2.pageSections){let e=null==e2?void 0:null===(a=e2.pageSections)||void 0===a?void 0:null===(n=a.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==e2?void 0:e2.pageSections.pageInfo.endCursor;e&&t?eq(t):ei(!0)}}},[e2]);let[{data:e6,fetching:e8}]=(0,f.aM)({query:C.TH,variables:{ids:(0,c.Z)([null==eb?void 0:eb.authorId])},pause:!(null==eb?void 0:eb.authorId)}),e7=null==e6?void 0:null===(t=e6.users)||void 0===t?void 0:null===(e=t.edges[0])||void 0===e?void 0:e.node,e9=(0,s.useMemo)(()=>{var e;if(!r)return!1;if(!eD)return!0;let t=null==eQ?void 0:null===(e=eQ.pages.edges)||void 0===e?void 0:e[0];return!!t&&r.me.id===t.node.authorId},[r,eQ,eD]),te=(0,s.useMemo)(()=>{var e;if(!(null==eb?void 0:eb.codeSourceId))return;let t=null==w?void 0:null===(e=w.contextInfo)||void 0===e?void 0:e.sources.find(e=>(0,I.wO)(e.sourceKind)&&e.sourceId===eb.codeSourceId);return t},[null==eb?void 0:eb.codeSourceId,w]);(0,s.useEffect)(()=>{(null==eb?void 0:eb.title)&&(document.title=eb.title)},[null==eb?void 0:eb.title]),(0,s.useEffect)(()=>{e5&&!es&&ei(!0)},[e5]),(0,s.useEffect)(()=>{K(D),G||H(!0)},[D]),(0,s.useEffect)(()=>{G&&!eD&&(()=>{if(!eh.current){if(eh.current=!0,Y){e$.current=eG(Y,null!=X?X:""),(0,y.BO)();return}eM&&q("edit"),eg||eM||Z.replace("/")}})()},[G]),(0,s.useEffect)(()=>()=>{var e;null===(e=e$.current)||void 0===e||e.call(e$)},[]);let tt=async e=>{if(eD&&!eS)return eY({sectionId:e}).then(t=>{var n;if(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.deletePageSection){let t=null==ey?void 0:ey.filter(t=>t.id!==e);ew(t)}else m.A.error("Failed to delete")})},tn=(e,t,n)=>{let a=e.findIndex(e=>e.id===t);if(-1===a)return e;let s=n===p.pV.Up?a-1:a+1,i=e.map((e,t)=>t===a?{...e,position:n===p.pV.Up?e.position-1:e.position+1}:t===s?{...e,position:n===p.pV.Up?e.position+1:e.position-1}:e);return i.slice().sort((e,t)=>e.position-t.position)},ta=async(e,t)=>{if(eD&&!eS&&!eF)return eT(!0),eX({id:e,direction:t}).then(n=>{var a;(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.movePageSection)?ew(n=>n?tn(n,e,t):n):m.A.error("Failed to move")}).finally(()=>{eT(!1)})},ts=(e,t)=>{e&&ew(n=>n?n.map(n=>n.id===e?{...n,...t}:n):n)},ti=(0,s.useMemo)(()=>{var e,t;if(es&&!e1&&eD&&(e0||!(null==eQ?void 0:null===(t=eQ.pages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return e0||Error(h.ir)},[eQ,e1,e0,es,eD]),[tr]=(0,v.n)(e4||(null==e2?void 0:null===(i=e2.pageSections)||void 0===i?void 0:null===(n=i.pageInfo)||void 0===n?void 0:n.hasNextPage),200),tl=ef?{height:"calc(100vh - ".concat(F.wt,")")}:{height:"100vh"};return es&&(ti||e5||eI)?(0,a.jsx)(eZ,{error:ti||e5||eI,pageIdFromURL:eD}):!es&&(tr||e3)?(0,a.jsxs)("div",{children:[(0,a.jsx)(en,{}),(0,a.jsx)(eP,{})]}):(0,a.jsx)(ee.Provider,{value:{isLoading:eS,isPathnameInitialized:G,isPageOwner:e9,mode:J,setMode:q,contextInfo:null==w?void 0:w.contextInfo,fetchingContextInfo:k,pendingSectionIds:Q,setPendingSectionIds:et,currentSectionId:er,pageIdFromURL:eD,isNew:eM,onDeleteSection:tt,onMoveSectionPosition:ta},children:(0,a.jsxs)("div",{style:tl,children:[(0,a.jsx)(en,{pageIdFromURL:eD,streamingDone:!eS}),(0,a.jsx)(T.Z,{loading:!eM&&(!es||!eb),fallback:(0,a.jsx)(eP,{}),delay:0,children:(0,a.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,a.jsx)(A.ScrollArea,{className:"h-full w-full",ref:eu,children:(0,a.jsx)("div",{className:"mx-auto grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:eM&&!eb?(0,a.jsx)("div",{className:"col-span-4 mt-8 rounded-xl border pl-1 pr-3 pt-2 ring-2 ring-transparent transition-colors focus-within:ring-ring focus-visible:ring-ring",children:(0,a.jsx)(ec,{onSubmit:eH})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative col-span-3",children:[(0,a.jsxs)("div",{className:"mb-2 mt-8",children:[!!te&&(0,a.jsxs)("div",{className:"mb-4 inline-flex items-center gap-1 rounded-lg bg-accent px-2 py-1 text-xs font-medium text-accent-foreground",children:[(0,a.jsx)(L.k,{kind:te.sourceKind,className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:te.sourceName})]}),(0,a.jsx)(T.Z,{loading:!eb,fallback:(0,a.jsx)(e_,{}),children:(0,a.jsx)(ev,{page:eb,isGeneratingPageTitle:eL,onUpdate:e=>{eN(t=>t?{...t,title:e}:t)}})}),(0,a.jsx)("div",{className:"my-4 flex gap-4 text-sm",children:(0,a.jsx)(T.Z,{loading:e8||!(null==eb?void 0:eb.authorId),fallback:(0,a.jsx)(_.O,{}),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.Yt,{user:e7,className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"pt-0.5",children:[(0,a.jsx)("div",{className:"text-sm leading-none",children:null==e7?void 0:e7.name}),(0,a.jsx)("span",{className:"text-xs leading-none text-muted-foreground",children:function(e){let t=W()(e);if(t.isBefore(W()().subtract(1,"year"))){let e=t.format("MMM D, YYYY, h:mm A");return e}if(t.isBefore(W()().subtract(1,"month"))){let e=t.format("MMM D, hh:mm A");return"".concat(e)}return"".concat(t.fromNow())}(null==eb?void 0:eb.createdAt)})]})]})})})]}),(0,a.jsx)(T.Z,{loading:!eb||eS&&!(null==eb?void 0:eb.content),fallback:(0,a.jsx)(eR,{}),children:(0,a.jsx)(ep,{page:eb,onUpdate:e=>{eN(t=>t?{...t,content:e}:t)}})}),(0,a.jsxs)(T.Z,{loading:!eb||eS&&!(null==ey?void 0:ey.length),fallback:(0,a.jsx)("div",{className:"my-8 w-full",children:(0,a.jsx)(eA,{})}),children:[(0,a.jsx)(o.M,{initial:!1,children:null==ey?void 0:ey.map((e,t)=>{let n=eS&&e.id===er,s=t<ey.length-1;return(0,a.jsxs)(d.E.div,{layout:!eS&&"edit"===J&&"position",exit:{opacity:0},className:"space-y-2",children:[(0,a.jsx)(eO,{className:"pt-12 prose-p:leading-tight",section:e,onUpdate:t=>{ts(e.id,{title:t})}}),(0,a.jsx)(eE,{section:e,isGenerating:n,enableMoveUp:0!==t,enableMoveDown:s,onUpdate:t=>{ts(e.id,{content:t})},enableDeveloperMode:P.value})]},"section_".concat(e.id))})},"".concat(eS,"-").concat(J)),e9&&"edit"===J&&eo&&(0,a.jsx)(em,{onSubmit:eK,disabled:!eg||eS,className:"mt-10"})]})]}),(0,a.jsx)("div",{className:"relative col-span-1",children:(0,a.jsx)(ea,{sections:ey})})]})})}),(0,a.jsx)(R.K,{className:(0,I.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]"),container:eu.current,offset:100,style:"dark"===ex?{"--background":"0 0% 12%"}:{}})]})})]})})}function eZ(e){let{error:t,pageIdFromURL:n}=e;return t.message===h.ir?(0,a.jsx)(E.default,{}):(0,a.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,a.jsx)(en,{pageIdFromURL:n}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.IconFileSearch,{className:"h-6 w-6"}),(0,a.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,a.jsx)("div",{children:"Failed to fetch, please refresh the page"}),(0,a.jsx)(r(),{href:"/",onClick:w.wh,className:(0,I.cn)((0,k.d)(),"mt-4 gap-2"),children:(0,a.jsx)("span",{children:"Home"})})]})})]})}},21008:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var a=n(36164),s=n(57288);function i(e){let{range:t,className:n,prefix:i=":"}=e;if(!t)return null;let r=t.end-t.start>1;return(0,a.jsx)("span",{className:(0,s.cn)("text-muted-foreground",n),children:r?"".concat(i).concat(t.start,"-").concat(t.end):"".concat(i).concat(t.start)})}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(36164),s=n(42891),i=n.n(s),r=n(70652),l=n.n(r),o=n(83332),d=n(76531),c=n(57288),u=n(68172),m=n(30601),f=n(63743),h=n(31458),x=n(52569),p=n(7449);function g(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,a.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,a.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,a.jsx)(l(),{className:(0,c.cn)("mt-6",(0,h.d)()),href:"/",children:"Home"})]})]})}function v(){return(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(l(),{href:"/",children:[(0,a.jsx)(i(),{src:d.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,a.jsx)(i(),{src:o.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)(u.q,{children:(0,a.jsx)(f.T,{})}),(0,a.jsx)(p.Z,{showSetting:!0,children:(0,a.jsx)(x.SQ,{className:"h-10 w-10 border"})})]})]})}},75217:function(e,t,n){"use strict";n.d(t,{v:function(){return f}});var a=n(36164),s=n(3546),i=n(57288),r=n(36065),l=n(81565),o=n(84942),d=n(37034),c=n(6230),u=n(31458),m=n(3448);function f(e){let{repos:t,value:n,onChange:f,isInitializing:h,placeholder:x="Codebase",showChevron:p,disabled:g}=e,[v,j]=(0,s.useState)(!1),b=(0,s.useRef)(null),N=e=>{g||f(e)},y=()=>{requestAnimationFrame(()=>{b.current&&(b.current.scrollTop=0)})},w=n?null==t?void 0:t.find(e=>e.sourceId===n):void 0,S=null==w?void 0:w.sourceName;return h||(null==t?void 0:t.length)?(0,a.jsx)(c.Z,{loading:h,fallback:(0,a.jsx)("div",{className:"w-full pl-2",children:(0,a.jsx)(m.O,{className:"h-3 w-[10rem]"})}),children:(0,a.jsxs)(o.J2,{open:v,onOpenChange:j,children:[(0,a.jsx)(o.xo,{className:"outline-none",asChild:!0,children:(0,a.jsxs)(u.z,{variant:"ghost",className:"gap-2 px-1.5 py-1 font-normal text-foreground/90 disabled:opacity-100",title:S||"select codebase",disabled:g,children:[w?(0,a.jsx)(d.k,{kind:w.sourceKind,className:"h-3.5 w-3.5 shrink-0"}):(0,a.jsx)(l.IconFolderGit,{className:"shrink-0"}),(0,a.jsx)("div",{className:"flex flex-1 items-center gap-1.5 truncate break-all",children:(0,a.jsx)("span",{className:(0,i.cn)("truncate",{"text-muted-foreground":!S}),children:S||x})}),!!p&&(0,a.jsx)(l.IconChevronDown,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground"})]})}),(0,a.jsx)(o.yk,{side:"bottom",align:"start",className:"max-h-[50vh] min-w-[20vw] max-w-[80vw] overflow-x-hidden rounded-md border bg-popover p-2 pb-0 text-popover-foreground shadow animate-in",children:(0,a.jsxs)(r.mY,{children:[(0,a.jsx)(r.sZ,{placeholder:"Select repository...",onValueChange:()=>{y()}}),(0,a.jsxs)(r.e8,{className:"max-h-[30vh]",ref:b,children:[(0,a.jsx)(r.rb,{children:"No repository found"}),(0,a.jsx)(r.fu,{children:null==t?void 0:t.map(e=>{let t=e.sourceId===n;return(0,a.jsxs)(r.di,{onSelect:()=>{N(e.sourceId),j(!1)},title:e.sourceName,children:[(0,a.jsx)(l.IconCheck,{className:(0,i.cn)("mr-1 shrink-0",e.sourceId===n?"opacity-100":"opacity-0")}),(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-1 overflow-x-hidden",children:[(0,a.jsx)(d.k,{kind:e.sourceKind,className:"shrink-0"}),(0,a.jsx)("div",{className:(0,i.cn)("truncate",{"font-semibold":t}),children:e.sourceName})]})]},e.sourceId)})})]}),(0,a.jsx)(r.zz,{}),(0,a.jsx)(r.fu,{children:(0,a.jsx)(r.di,{disabled:!n,className:"flex justify-center",onSelect:()=>{f(void 0),j(!1)},children:"Clear"})})]})})]})}):null}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return g},_T:function(){return m},aR:function(){return o},f$:function(){return x},fY:function(){return f},le:function(){return v},vW:function(){return d},xo:function(){return h},yT:function(){return p}});var a=n(36164),s=n(3546),i=n(91460),r=n(57288),l=n(31458);let o=i.fC,d=i.xz,c=e=>{let{className:t,children:n,...s}=e;return(0,a.jsx)(i.h_,{className:(0,r.cn)(t),...s,children:(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};c.displayName=i.h_.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...l}=e;return(0,a.jsx)(i.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...l,ref:t})});u.displayName=i.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.VY,{ref:t,className:(0,r.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...s})]})});m.displayName=i.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let h=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold",n),...s})});x.displayName=i.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",n),...s})});p.displayName=i.dk.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.aU,{ref:t,className:(0,r.cn)((0,l.d)(),n),...s})});g.displayName=i.aU.displayName;let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.$j,{ref:t,className:(0,r.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...s})});v.displayName=i.$j.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return d},lX:function(){return x},pf:function(){return g},xJ:function(){return h},zG:function(){return v}});var a=n(36164),s=n(3546),i=n(74047),r=n(5493),l=n(57288),o=n(5266);let d=r.RV,c=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(r.Qr,{...t})})},m=()=>{let e=s.useContext(c),t=s.useContext(f),{getFieldState:n,formState:a}=(0,r.Gc)(),i=e.name||"root",l=n(i,a);if(!a)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:i,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},f=s.createContext({}),h=s.forwardRef((e,t)=>{let{className:n,...i}=e,r=s.useId();return(0,a.jsx)(f.Provider,{value:{id:r},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",n),...i})})});h.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:n,required:s,...i}=e,{error:r,formItemId:d}=m();return(0,a.jsx)(o._,{ref:t,className:(0,l.cn)(r&&"text-destructive",s&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:d,...i})});x.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:r,formDescriptionId:l,formMessageId:o}=m();return(0,a.jsx)(i.g7,{ref:t,id:r,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...n})});p.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:i}=m();return(0,a.jsx)("div",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});g.displayName="FormDescription";let v=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e,{error:r,formMessageId:o}=m(),d=r?String(null==r?void 0:r.message):s;return d?(0,a.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",n),...i,children:d}):null});v.displayName="FormMessage"},25600:function(e,t,n){"use strict";n.d(t,{FF:function(){return g},Tu:function(){return p},aM:function(){return c},bC:function(){return v},sw:function(){return u},ue:function(){return x},yo:function(){return d}});var a=n(36164),s=n(3546),i=n(4318),r=n(14375),l=n(1663),o=n(57288);let d=i.fC,c=i.xz,u=i.x8,m=i.h_,f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:t})});f.displayName=i.aV.displayName;let h=(0,r.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=s.forwardRef((e,t)=>{let{side:n="right",className:s,children:r,...d}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,o.cn)(h({side:n}),s),...d,children:[r,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=i.VY.displayName;let p=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};p.displayName="SheetHeader";let g=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};g.displayName="SheetFooter";let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",n),...s})});v.displayName=i.Dx.displayName;let j=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...s})});j.displayName=i.dk.displayName},93877:function(e,t,n){"use strict";n.d(t,{B2:function(){return c},m3:function(){return o}});var a=n(3546);let s=(e,t)=>{let[n,s]=(0,a.useState)(t),[i,r]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let t=localStorage.getItem(e);t&&s(JSON.parse(t)),r(!1)},[]),[n,t=>{s(t),localStorage.setItem(e,JSON.stringify(t))},i]};class i{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,a){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=a}}class r{defineGlobalVar(){return new i(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=s(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,a){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=a&&a}}let l=new r("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);l.defineGlobalVar();let o=l.defineHook(),d=new r("enable_page","Page","Enable Page. This feature allows you to convert threads to page.",!1);d.defineGlobalVar();let c=d.defineHook()},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(3546),s=n(11978);function i(){let e=(0,s.usePathname)(),t=(0,s.useRouter)(),n=(0,s.useSearchParams)(),i=(0,a.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,a]=e;return t.set(n,a)});let a=t.toString();return a.length>0?"?".concat(a):""},[n]),r=(0,a.useCallback)(a=>{let s=function(e,t,n){var a,s;let i=null===(a=n.searchParams)||void 0===a?void 0:a.set,r=null===(s=n.searchParams)||void 0===s?void 0:s.del,l=new URLSearchParams(t);i&&Object.entries(i).forEach(e=>{let[t,n]=e;return l.set(t,n)}),r&&(Array.isArray(r)?r.forEach(e=>l.delete(e)):l.delete(r));let o=l.toString(),d=e;return o.length>0&&(d+="?".concat(o)),n.hash&&(d+="#".concat(n.hash.replace(/^#/,""))),d}((null==a?void 0:a.pathname)||e,n,a);return a.replace?t.replace(s):t.push(s),s},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:i,updateUrlComponents:r}}},96274:function(e,t,n){"use strict";n.d(t,{BO:function(){return o},RU:function(){return l},uz:function(){return i}});var a=n(27257);let s={pendingThreadId:void 0,pendingThreadTitle:void 0},i=(0,a.Ue)()(()=>({...s})),r=i.setState,l=e=>{let{threadId:t,title:n}=e;r(()=>({pendingThreadId:t,pendingThreadTitle:n}))},o=()=>{r(()=>({pendingThreadId:void 0,pendingThreadTitle:void 0}))}},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},F0:function(){return l},wh:function(){return o}});var a=n(27257);let s={homePage:void 0},i=(0,a.Ue)()(()=>({...s})),r=i.setState,l=e=>r(()=>({homePage:e})),o=()=>r(()=>({homePage:void 0}))},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},23455:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(65122),s=n(73037),i=n(3546),r=i.useLayoutEffect,l=function(e){var t=i.useRef(e);return r(function(){t.current=e}),t},o=function(e,t){if("function"==typeof e){e(t);return}e.current=t},d=function(e,t){var n=(0,i.useRef)();return(0,i.useCallback)(function(a){e.current=a,n.current&&o(n.current,null),n.current=t,t&&o(t,a)},[t])},c={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=function(e){Object.keys(c).forEach(function(t){e.style.setProperty(t,c[t],"important")})},m=null,f=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},h=function(){},x=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],p=!!document.documentElement.currentStyle,g=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=x.reduce(function(e,n){return e[n]=t[n],e},{}),a=n.boxSizing;if(""===a)return null;p&&"border-box"===a&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var s=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:s,borderSize:i}};function v(e,t,n){var a=l(n);i.useLayoutEffect(function(){var n=function(e){return a.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var j=function(e){v(window,"resize",e)},b=function(e){v(document.fonts,"loadingdone",e)},N=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],y=i.forwardRef(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,l=e.minRows,o=e.onChange,c=void 0===o?h:o,x=e.onHeightChange,p=void 0===x?h:x,v=(0,s.Z)(e,N),y=void 0!==v.value,w=i.useRef(null),S=d(w,t),C=i.useRef(0),I=i.useRef(),k=function(){var e,t,a,s,i,o,d,c,h,x,v,j=w.current,b=n&&I.current?I.current:g(j);if(b){I.current=b;var N=(e=j.value||j.placeholder||"x",void 0===(t=l)&&(t=1),void 0===(a=r)&&(a=1/0),m||((m=document.createElement("textarea")).setAttribute("tabindex","-1"),m.setAttribute("aria-hidden","true"),u(m)),null===m.parentNode&&document.body.appendChild(m),s=b.paddingSize,i=b.borderSize,d=(o=b.sizingStyle).boxSizing,Object.keys(o).forEach(function(e){m.style[e]=o[e]}),u(m),m.value=e,c=f(m,b),m.value=e,c=f(m,b),m.value="x",x=(h=m.scrollHeight-s)*t,"border-box"===d&&(x=x+s+i),c=Math.max(x,c),v=h*a,"border-box"===d&&(v=v+s+i),[c=Math.min(v,c),h]),y=N[0],S=N[1];C.current!==y&&(C.current=y,j.style.setProperty("height",y+"px","important"),p(y,{rowHeight:S}))}};return i.useLayoutEffect(k),j(k),b(k),i.createElement("textarea",(0,a.Z)({},v,{onChange:function(e){y||k(),c(e)},ref:S}))})},6044:function(e,t,n){"use strict";n.d(t,{VY:function(){return P},aV:function(){return I},fC:function(){return C},nU:function(){return y},xz:function(){return k}});var a=n(65122),s=n(3546),i=n(65727),r=n(47091),l=n(89386),o=n(96497),d=n(72205),c=n(57541),u=n(27250),m=n(29434);let f="Tabs",[h,x]=(0,r.b)(f,[l.Pc]),p=(0,l.Pc)(),[g,v]=h(f),j=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:n,value:i,onValueChange:r,defaultValue:l,orientation:o="horizontal",dir:f,activationMode:h="automatic",...x}=e,p=(0,c.gm)(f),[v,j]=(0,u.T)({prop:i,onChange:r,defaultProp:l});return(0,s.createElement)(g,{scope:n,baseId:(0,m.M)(),value:v,onValueChange:j,orientation:o,dir:p,activationMode:h},(0,s.createElement)(d.WV.div,(0,a.Z)({dir:p,"data-orientation":o},x,{ref:t})))}),b=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:i=!0,...r}=e,o=v("TabsList",n),c=p(n);return(0,s.createElement)(l.fC,(0,a.Z)({asChild:!0},c,{orientation:o.orientation,dir:o.dir,loop:i}),(0,s.createElement)(d.WV.div,(0,a.Z)({role:"tablist","aria-orientation":o.orientation},r,{ref:t})))}),N=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:n,value:r,disabled:o=!1,...c}=e,u=v("TabsTrigger",n),m=p(n),f=w(u.baseId,r),h=S(u.baseId,r),x=r===u.value;return(0,s.createElement)(l.ck,(0,a.Z)({asChild:!0},m,{focusable:!o,active:x}),(0,s.createElement)(d.WV.button,(0,a.Z)({type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:f},c,{ref:t,onMouseDown:(0,i.M)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(r)}),onKeyDown:(0,i.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(r)}),onFocus:(0,i.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;x||o||!e||u.onValueChange(r)})})))}),y=(0,s.forwardRef)((e,t)=>{let{__scopeTabs:n,value:i,forceMount:r,children:l,...c}=e,u=v("TabsContent",n),m=w(u.baseId,i),f=S(u.baseId,i),h=i===u.value,x=(0,s.useRef)(h);return(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.createElement)(o.z,{present:r||h},({present:n})=>(0,s.createElement)(d.WV.div,(0,a.Z)({"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!n,id:f,tabIndex:0},c,{ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0}}),n&&l))});function w(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}let C=j,I=b,k=N,P=y}},function(e){e.O(0,[7565,8415,4648,6527,7430,55,1652,340,4007,2546,1283,3087,2578,8511,240,4421,3179,7070,1454,1002,1460,6805,4546,6065,9275,5605,3721,2991,8994,5738,1012,8160,7288,1565,4656,1363,9634,640,3375,5289,1744],function(){return e(e.s=68109)}),_N_E=e.O()}]);
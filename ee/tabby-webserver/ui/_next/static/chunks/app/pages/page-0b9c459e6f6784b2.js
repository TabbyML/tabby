(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2342,6044],{28242:function(e,t,n){"use strict";n.d(t,{F:function(){return c},f:function(){return d}});var r=n(3546);let a=["light","dark"],s="(prefers-color-scheme: dark)",l="undefined"==typeof window,o=(0,r.createContext)(void 0),i={setTheme:e=>{},themes:[]},c=()=>{var e;return null!==(e=(0,r.useContext)(o))&&void 0!==e?e:i},d=e=>(0,r.useContext)(o)?r.createElement(r.Fragment,null,e.children):r.createElement(m,e),u=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:l=!0,storageKey:i="theme",themes:c=u,defaultTheme:d=n?"system":"light",attribute:m="data-theme",value:v,children:g,nonce:b})=>{let[j,y]=(0,r.useState)(()=>h(i,d)),[w,N]=(0,r.useState)(()=>h(i)),C=v?Object.values(v):c,S=(0,r.useCallback)(e=>{let r=e;if(!r)return;"system"===e&&n&&(r=x());let s=v?v[r]:r,o=t?p():null,i=document.documentElement;if("class"===m?(i.classList.remove(...C),s&&i.classList.add(s)):s?i.setAttribute(m,s):i.removeAttribute(m),l){let e=a.includes(d)?d:null,t=a.includes(r)?r:e;i.style.colorScheme=t}null==o||o()},[]),k=(0,r.useCallback)(e=>{y(e);try{localStorage.setItem(i,e)}catch(e){}},[e]),E=(0,r.useCallback)(t=>{let r=x(t);N(r),"system"===j&&n&&!e&&S("system")},[j,e]);(0,r.useEffect)(()=>{let e=window.matchMedia(s);return e.addListener(E),E(e),()=>e.removeListener(E)},[E]),(0,r.useEffect)(()=>{let e=e=>{e.key===i&&k(e.newValue||d)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[k]),(0,r.useEffect)(()=>{S(null!=e?e:j)},[e,j]);let I=(0,r.useMemo)(()=>({theme:j,setTheme:k,forcedTheme:e,resolvedTheme:"system"===j?w:j,themes:n?[...c,"system"]:c,systemTheme:n?w:void 0}),[j,k,e,w,n,c]);return r.createElement(o.Provider,{value:I},r.createElement(f,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:l,storageKey:i,themes:c,defaultTheme:d,attribute:m,value:v,children:g,attrs:C,nonce:b}),g)},f=(0,r.memo)(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:l,enableColorScheme:o,defaultTheme:i,value:c,attrs:d,nonce:u})=>{let m="system"===i,f="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${d.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=o?a.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(e,t=!1,r=!0)=>{let s=c?c[e]:e,l=t?e+"|| ''":`'${s}'`,i="";return o&&r&&!t&&a.includes(e)&&(i+=`d.style.colorScheme = '${e}';`),"class"===n?i+=t||s?`c.add(${l})`:"null":s&&(i+=`d[s](n,${l})`),i},x=e?`!function(){${f}${p(e)}}()`:l?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${m})){var t='${s}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${p(c?"x[e]":"e",!0)}}${m?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${p(c?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return r.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:x}})},()=>!0),h=(e,t)=>{let n;if(!l){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},p=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},x=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},72282:function(e,t,n){Promise.resolve().then(n.bind(n,49282))},49282:function(e,t,n){"use strict";n.r(t),n.d(t,{Page:function(){return ep}});var r=n(36164),a=n(3546),s=n(70652),l=n.n(s),o=n(54767),i=n(28445),c=n(84837),d=n(1853),u=n(12978),m=n(99092),f=n.n(m),h=n(2578),p=n(40055),x=n(21808),v=n(43240),g=n(18500),b=n(9010),j=n(24449),y=n(16784),w=n(98454),N=n(44645),C=n(96274),S=n(37266),k=n(11634),E=n(70410),I=n(57288),A=n(31458),R=n(81565),T=n(57830),D=n(72657),P=n(30601),M=n(6230),$=n(54646),F=n(69579),_=n(52569),V=n(11978),L=n(28312),O=n(73460),Z=n(63795),z=n(62202),U=n(68172),W=n(61249),Y=n(63743),H=n(7449);let K=(0,a.createContext)({}),q=(0,v.BX)("\n  mutation DeletePage($id: ID!) {\n    deletePage(id: $id)\n  }\n");function B(e){let{pageIdFromURL:t,streamingDone:n}=e,s=(0,V.useRouter)(),{isPageOwner:l,mode:o,setMode:i,isLoading:c}=(0,a.useContext)(K),[d,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),{copyToClipboard:p}=(0,L.m)({}),x=(0,k.Db)(q,{onCompleted(e){e.deletePage?s.replace("/"):(h.A.error("Failed to delete"),f(!1))},onError(e){h.A.error((null==e?void 0:e.message)||"Failed to delete"),f(!1)}}),v=e=>{e&&(0,S.wh)(),s.push("/")};return(0,r.jsxs)("header",{className:"relative flex h-16 w-full items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-6",children:(0,r.jsxs)(A.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>v(),children:[(0,r.jsx)(R.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[l?(0,r.jsx)(r.Fragment,{children:"edit"===o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(A.z,{disabled:!n,onClick:e=>i("view"),children:"Done"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(z.h_,{modal:!1,children:[(0,r.jsx)(z.$F,{asChild:!0,children:(0,r.jsx)(A.z,{size:"icon",variant:"ghost",children:(0,r.jsx)(R.IconMore,{})})}),(0,r.jsxs)(z.AW,{align:"end",children:[(0,r.jsxs)(z.Xi,{className:"cursor-pointer gap-2",onSelect:()=>{p(window.location.href)},children:[(0,r.jsx)(R.IconShare,{}),"Share"]}),n&&t&&l&&(0,r.jsxs)(z.Xi,{className:"cursor-pointer gap-2 !text-destructive",onSelect:()=>u(!0),children:[(0,r.jsx)(R.IconTrash,{}),"Delete Page"]})]})]}),(0,r.jsxs)(A.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal",onClick:()=>i("edit"),children:[(0,r.jsx)(R.IconEdit,{}),"Edit"]})]})}):null,(0,r.jsx)(U.q,{children:(0,r.jsx)(Y.T,{})}),(0,r.jsx)(W.L,{className:"mr-4"}),(0,r.jsx)(H.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,S.wh)()},children:(0,r.jsx)(_.SQ,{className:"h-10 w-10 border"})})]}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c?(0,r.jsx)(Z.C,{variant:"secondary",children:"Writing..."}):"edit"===o?(0,r.jsx)(Z.C,{children:"Editing"}):null}),(0,r.jsx)(O.aR,{open:d,onOpenChange:u,children:(0,r.jsxs)(O._T,{children:[(0,r.jsxs)(O.fY,{children:[(0,r.jsx)(O.f$,{children:"Delete this page"}),(0,r.jsx)(O.yT,{children:"Are you sure you want to delete this page? This operation is not revertible."})]}),(0,r.jsxs)(O.xo,{children:[(0,r.jsx)(O.le,{children:"Cancel"}),(0,r.jsxs)(O.OL,{className:(0,A.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),f(!0),x({id:t}).then(e=>{var t;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.deletePage)?s.replace("/"):(h.A.error("Failed to delete"),f(!1))})},children:[m&&(0,r.jsx)(R.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})})]})}let G=e=>{let{sections:t}=e,{isLoading:n,pendingSectionIds:s}=(0,a.useContext)(K),[l,o]=(0,a.useState)(),i=(0,a.useRef)(null),c=(0,j.S)(e=>{o(e)},200);return(0,a.useEffect)(()=>{i.current=new IntersectionObserver(e=>{let t=e.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(t.length>0){let e=t[0];c.run(e.target.id)}},{root:null,rootMargin:"0px",threshold:.1});let e=document.querySelectorAll(".section-title");return e.forEach(e=>{var t;null===(t=i.current)||void 0===t||t.observe(e)}),()=>{var e;null===(e=i.current)||void 0===e||e.disconnect()}},[n,s]),(0,r.jsx)("nav",{className:"sticky right-0 top-0 p-4 pt-8",children:(0,r.jsx)("ul",{className:"flex flex-col space-y-1 border-l",children:null==t?void 0:t.map(e=>{let t=l===e.id;return(0,r.jsx)("li",{className:"relative -ml-px cursor-pointer",onClick:t=>{let n=document.getElementById(e.id);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},children:(0,r.jsx)("div",{className:(0,I.cn)("truncate whitespace-nowrap pl-2 text-sm",{"text-foreground border-l border-foreground":t,"text-muted-foreground":!t}),children:e.title})},e.id)})})})};var X=n(62226),J=n.n(X),Q=n(6797),ee=n.n(Q),et=n(66686),en=(n(95052),n(25600),n(3448)),er=n(89811);function ea(){return(0,r.jsx)("div",{className:"mx-auto mt-8 grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:(0,r.jsxs)("div",{className:"col-span-3 space-y-12",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(en.O,{className:"mb-6 h-6 w-[50%]"}),(0,r.jsx)(ei,{}),(0,r.jsx)(eo,{})]}),(0,r.jsx)(es,{})]})})}function es(){return(0,r.jsx)("div",{className:"w-full space-y-12",children:Array.from({length:3}).map((e,t)=>(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(el,{}),(0,r.jsx)(eo,{})]},t))})}function el(){return(0,r.jsx)("div",{className:"mb-6 w-full",children:(0,r.jsx)(en.O,{className:"w-[50%]"})})}function eo(){return(0,r.jsxs)("div",{className:"w-full space-y-3",children:[(0,r.jsx)(en.O,{className:"w-[80%]"}),(0,r.jsx)(en.O,{className:"w-[30%]"}),(0,r.jsx)(en.O,{className:"w-[80%]"}),(0,r.jsx)(en.O,{className:"w-[30%]"})]})}function ei(){return(0,r.jsxs)("div",{className:"my-4 flex w-full items-center gap-4",children:[(0,r.jsx)(en.O,{className:"h-6 w-6 rounded-full"}),(0,r.jsx)(en.O,{className:"w-20"})]})}function ec(e){let{className:t,section:n,isGenerating:s,enableMoveUp:l,enableMoveDown:o}=e,{mode:i,isPageOwner:c,isLoading:d,pendingSectionIds:u,onDeleteSection:m,onMoveSectionPosition:f}=(0,a.useContext)(K),h=u.has(n.id)&&!n.content,p=()=>{f(n.id,g.pV.Up)},x=()=>{f(n.id,g.pV.Down)};return(0,r.jsx)("div",{className:(0,I.cn)("flex flex-col gap-y-5",t),children:(0,r.jsx)(M.Z,{loading:h,fallback:(0,r.jsx)(eo,{}),children:(0,r.jsxs)("div",{children:[s&&!n.content&&(0,r.jsx)(en.O,{className:"mt-1 h-40 w-full"}),(0,r.jsx)($.J,{message:n.content,canWrapLongLines:!s,supportsOnApplyInEditorV2:!1,className:"prose-p:my-0.5 prose-ol:my-1 prose-ul:my-1"}),!s&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[!1,(0,r.jsx)("div",{className:"flex items-center gap-x-3",children:c&&"edit"===i&&!d&&(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-normal",onClick:e=>p(),disabled:d,children:[(0,r.jsx)(R.IconArrowDown,{className:"rotate-180"}),"Move Up"]}),o&&(0,r.jsxs)(A.z,{size:"sm",variant:"ghost",className:"h-auto gap-0.5 px-2 py-1 font-normal",onClick:e=>x(),disabled:d,children:[(0,r.jsx)(R.IconArrowDown,{}),"Move Down"]}),(0,r.jsxs)(A.z,{size:"sm",variant:"hover-destructive",className:"h-auto gap-0.5 px-2 py-1 font-normal",disabled:d,onClick:()=>{m(n.id)},children:[(0,r.jsx)(R.IconTrash,{}),"Delete Section"]})]})})]})]})})})}let ed=e=>{let t=J().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=et.TU.parse(t),r=ee().decode(n),a=r.replace(/<\/?[^>]+(>|$)/g,"");return a};function eu(e){let{section:t,className:n,...s}=e,{pendingSectionIds:l}=(0,a.useContext)(K),o=l.has(t.id)&&!t.content;return(0,r.jsx)("div",{className:"section-title",id:t.id,children:(0,r.jsx)("div",{className:(0,I.cn)("flex items-center gap-2 font-semibold",n),id:t.id,...s,children:(0,r.jsx)($.J,{message:t.title,contextInfo:void 0,supportsOnApplyInEditorV2:!1,className:(0,I.cn)("text-3xl prose-h2:text-foreground prose-p:mb-1 prose-p:mt-0",{"text-foreground/50":o}),headline:!0})})})}let em=(0,v.BX)("\n  subscription createThreadToPageRun($threadId: ID!) {\n    createThreadToPageRun(threadId: $threadId) {\n      __typename\n      ... on PageCreated {\n        id\n        authorId\n        title\n      }\n      ... on PageContentDelta {\n        delta\n      }\n      ... on PageContentCompleted {\n        id\n      }\n      ... on PageSectionsCreated {\n        sections {\n          id\n          title\n          position\n        }\n      }\n      ... on PageSectionContentDelta {\n        id\n        delta\n      }\n      ... on PageSectionContentCompleted {\n        id\n      }\n      ... on PageCompleted {\n        id\n      }\n    }\n  }\n"),ef=(0,v.BX)("\n  mutation DeletePageSection($sectionId: ID!) {\n    deletePageSection(sectionId: $sectionId)\n  }\n"),eh=(0,v.BX)("\n  mutation movePageSection($id: ID!, $direction: MoveSectionDirection!) {\n    movePageSection(id: $id, direction: $direction)\n  }\n");function ep(){var e,t,n,s,l;let[{data:m}]=(0,w.P)(),{updateUrlComponents:v,pathname:S,router:A}=(0,N.Z)(),[F,V]=(0,a.useState)(),[L,O]=(0,a.useState)(!1),Z=(0,C.u)(e=>e.pendingThreadId),[z,U]=(0,a.useState)(Z?"edit":"view"),[W,Y]=(0,a.useState)(new Set),[H,q]=(0,a.useState)(!!Z),[X,J]=(0,a.useState)(void 0),Q=(0,a.useRef)(null),[ee]=(0,P.Hb)(),et=(0,a.useRef)(!1),{theme:en}=(0,b.X)(),[er,ei]=(0,a.useState)(),[ed,ep]=(0,a.useState)(),[ev,eg]=(0,a.useState)(),[eb,ej]=(0,a.useState)(!1),[ey,ew]=(0,a.useState)(),[eN,eC]=(0,a.useState)(!1),eS=(0,a.useMemo)(()=>{var e,t;if(F)return null===(t=F.match(/^\/pages\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop()},[F]),ek=(0,a.useRef)(),eE=e=>{switch(e.__typename){case"PageCreated":let t=new Date().toISOString(),n={id:e.id,authorId:e.authorId,title:e.title,content:"",updatedAt:t,createdAt:t};ep(n),ei(e.id),eY(n);break;case"PageContentDelta":ep(t=>t?{...t,content:(t.content||"")+e.delta}:t);break;case"PageContentCompleted":break;case"PageSectionsCreated":{let t=e.sections.map(e=>({...e,pageId:er,content:""}));Y(new Set(e.sections.map(e=>e.id))),eg(t);break}case"PageSectionContentDelta":J(e.id),eg(t=>{let n=null==t?void 0:t.find(t=>t.id===e.id);return n&&t?t.map(t=>t.id===e.id?{...t,content:(t.content||"")+e.delta}:t):t});case"PageSectionContentCompleted":Y(t=>{if(!t.has(e.id))return t;let n=new Set(t);return n.delete(e.id),n});break;case"PageCompleted":eA.current()}},eI=e=>{let{unsubscribe:t}=k.Lp.subscription(em,{threadId:e}).subscribe(e=>{var n;if(null==e?void 0:e.error){ej(!1),ew(e.error),t();return}let r=null===(n=e.data)||void 0===n?void 0:n.createThreadToPageRun;r&&eE(r)});return t},eA=(0,y.d)(()=>{var e;null===(e=ek.current)||void 0===e||e.call(ek),ek.current=void 0,ej(!1),Y(new Set),J(void 0)}),eR=(0,k.Db)(ef),eT=(0,k.Db)(eh);(0,a.useEffect)(()=>{eS&&ei(eS)},[eS]);let[eD,eP]=(0,a.useState)(),[{data:eM,error:e$,fetching:eF}]=(0,p.aM)({query:E.u5,variables:{ids:[eS]},pause:!eS});(0,a.useEffect)(()=>{var e,t;let n=null==eM?void 0:null===(t=eM.pages.edges)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.node;n&&ep(n)},[eM]);let[{data:e_,error:eV,fetching:eL,stale:eO}]=(0,p.aM)({query:E.bP,variables:{pageId:eS,first:30,after:eD},pause:!eS||H});(0,a.useEffect)(()=>{var e,t,n,r;if(!eO){if(null==e_?void 0:null===(t=e_.pageSections)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=e_.pageSections.edges.map(e=>e.node).slice().sort((e,t)=>e.position-t.position);eg(t=>(0,u.Z)([...t||[],...e],"id"))}if(null==e_?void 0:e_.pageSections){let e=null==e_?void 0:null===(r=e_.pageSections)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==e_?void 0:e_.pageSections.pageInfo.endCursor;e&&t?eP(t):q(!0)}}},[e_]);let[{data:eZ,fetching:ez}]=(0,p.aM)({query:E.TH,variables:{ids:(0,d.Z)([null==ed?void 0:ed.authorId])},pause:!(null==ed?void 0:ed.authorId)}),eU=null==eZ?void 0:null===(t=eZ.users)||void 0===t?void 0:null===(e=t.edges[0])||void 0===e?void 0:e.node,eW=(0,a.useMemo)(()=>{var e;if(!m)return!1;if(!eS)return!0;let t=null==eM?void 0:null===(e=eM.pages.edges)||void 0===e?void 0:e[0];return!!t&&m.me.id===t.node.authorId},[m,eM,eS]);(0,a.useEffect)(()=>{(null==ed?void 0:ed.title)&&(document.title=ed.title)},[null==ed?void 0:ed.title]),(0,a.useEffect)(()=>{eV&&!H&&q(!0)},[eV]);let eY=e=>{var t;if(!e)return;let{title:n,id:r}=e,a=null!==(t=(n||"").split("\n")[0])&&void 0!==t?t:"",s=a.slice(0,x.$I),l=(0,o.Z)(s),i=(0,d.Z)([l,r]).join("-"),c=v({pathname:"/pages/".concat(i),replace:!0});return location.origin+c};(0,a.useEffect)(()=>{V(S),L||O(!0)},[S]),(0,a.useEffect)(()=>{L&&!eS&&(()=>{if(!et.current){if(et.current=!0,Z){ej(!0),ew(void 0),ek.current=eI(Z),(0,C.W)(void 0);return}er||A.replace("/")}})()},[L]);let eH=async e=>{if(eS&&!eb)return eR({sectionId:e}).then(t=>{var n;if(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.deletePageSection){let t=null==ev?void 0:ev.filter(t=>t.id!==e);eg(t)}else h.A.error("Failed to delete")})},eK=(e,t,n)=>{let r=e.findIndex(e=>e.id===t);if(-1===r)return e;let a=n===g.pV.Up?r-1:r+1,s=e.map((e,t)=>t===r?{...e,position:n===g.pV.Up?e.position-1:e.position+1}:t===a?{...e,position:n===g.pV.Up?e.position+1:e.position-1}:e);return s.slice().sort((e,t)=>e.position-t.position)},eq=async(e,t)=>{if(eS&&!eb&&!eN)return eC(!0),eT({id:e,direction:t}).then(n=>{var r;(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.movePageSection)?eg(n=>n?eK(n,e,t):n):h.A.error("Failed to move")}).finally(()=>{eC(!1)})},eB=(0,a.useMemo)(()=>{var e,t;if(H&&!eF&&eS&&(e$||!(null==eM?void 0:null===(t=eM.pages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return e$||Error(x.ir)},[eM,eF,e$,H,eS]),[eG]=(0,j.n)(eL||(null==e_?void 0:null===(s=e_.pageSections)||void 0===s?void 0:null===(n=s.pageInfo)||void 0===n?void 0:n.hasNextPage),200),eX=ee?{height:"calc(100vh - ".concat(P.wt,")")}:{height:"100vh"};return H&&(eB||eV)?(0,r.jsx)(ex,{error:eB||eV,pageIdFromURL:eS}):!H&&(eG||eO)?(0,r.jsxs)("div",{children:[(0,r.jsx)(B,{}),(0,r.jsx)(ea,{})]}):(0,r.jsx)(K.Provider,{value:{isLoading:eb,isPathnameInitialized:L,isPageOwner:eW,mode:z,setMode:U,pendingSectionIds:W,setPendingSectionIds:Y,currentSectionId:X,onDeleteSection:eH,onMoveSectionPosition:eq},children:(0,r.jsxs)("div",{style:eX,children:[(0,r.jsx)(B,{pageIdFromURL:eS,streamingDone:!eb}),(0,r.jsx)(M.Z,{loading:!H||!ed,fallback:(0,r.jsx)(ea,{}),children:(0,r.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,r.jsx)(T.ScrollArea,{className:"h-full w-full",ref:Q,children:(0,r.jsxs)("div",{className:"mx-auto grid grid-cols-4 gap-2 px-4 pb-32 lg:max-w-5xl lg:px-0",children:[(0,r.jsxs)("div",{className:"relative col-span-3",children:[(0,r.jsxs)("div",{className:"mb-2 mt-8",children:[(0,r.jsx)(M.Z,{loading:!ed,fallback:(0,r.jsx)(el,{}),children:(0,r.jsx)("h1",{className:"text-4xl font-semibold",children:null==ed?void 0:ed.title})}),(0,r.jsx)("div",{className:"my-4 flex gap-4 text-sm text-muted-foreground",children:(0,r.jsx)(M.Z,{loading:ez||!(null==ed?void 0:ed.authorId),children:!!ed&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(_.Yt,{user:eU,className:"h-6 w-6"}),(0,r.jsx)("div",{children:null==eU?void 0:eU.name})]}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,r.jsx)(R.IconClock,{}),(0,r.jsx)("span",{children:function(e){let t=f()(e);if(t.isBefore(f()().subtract(1,"year"))){let e=t.format("MMM D, YYYY, h:mm A");return e}if(t.isBefore(f()().subtract(1,"month"))){let e=t.format("MMM D, hh:mm A");return"".concat(e)}return"".concat(t.fromNow())}(ed.createdAt)})]})})]})})})]}),(0,r.jsx)(M.Z,{loading:!ed||eb&&!(null==ed?void 0:ed.content),fallback:(0,r.jsx)(eo,{}),children:(0,r.jsx)($.J,{message:null!==(l=null==ed?void 0:ed.content)&&void 0!==l?l:"",supportsOnApplyInEditorV2:!1})}),(0,r.jsx)(M.Z,{loading:!ed||eb&&!(null==ev?void 0:ev.length),fallback:(0,r.jsx)("div",{className:"my-8 w-full",children:(0,r.jsx)(es,{})}),children:(0,r.jsx)(i.M,{initial:!1,children:null==ev?void 0:ev.map((e,t)=>{let n=eb&&e.id===X,a=t<ev.length-1;return(0,r.jsxs)(c.E.div,{layout:!eb&&"edit"===z,exit:{opacity:0},children:[(0,r.jsx)(eu,{className:"section-title pt-8",section:e}),(0,r.jsx)(ec,{section:e,isGenerating:n,enableMoveUp:0!==t,enableMoveDown:a})]},"section_".concat(e.id))})},"".concat(eb,"-").concat(z))})]}),(0,r.jsx)("div",{className:"relative col-span-1",children:(0,r.jsx)(G,{sections:ev})})]})}),(0,r.jsx)(D.K,{className:(0,I.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]"),container:Q.current,offset:100,style:"dark"===en?{"--background":"0 0% 12%"}:{}})]})})]})})}function ex(e){let{error:t,pageIdFromURL:n}=e;return t.message===x.ir?(0,r.jsx)(F.default,{}):(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)(B,{pageIdFromURL:n}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(R.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,r.jsx)("div",{children:"Failed to fetch, please refresh the page"}),(0,r.jsx)(l(),{href:"/",onClick:S.wh,className:(0,I.cn)((0,A.d)(),"mt-4 gap-2"),children:(0,r.jsx)("span",{children:"Home"})})]})})]})}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(36164),a=n(42891),s=n.n(a),l=n(70652),o=n.n(l),i=n(83332),c=n(76531),d=n(57288),u=n(68172),m=n(30601),f=n(63743),h=n(31458),p=n(52569),x=n(7449);function v(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,r.jsx)(o(),{className:(0,d.cn)("mt-6",(0,h.d)()),href:"/",children:"Home"})]})]})}function g(){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(o(),{href:"/",children:[(0,r.jsx)(s(),{src:c.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,r.jsx)(s(),{src:i.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(u.q,{children:(0,r.jsx)(f.T,{})}),(0,r.jsx)(x.Z,{showSetting:!0,children:(0,r.jsx)(p.SQ,{className:"h-10 w-10 border"})})]})]})}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return v},_T:function(){return m},aR:function(){return i},f$:function(){return p},fY:function(){return f},le:function(){return g},vW:function(){return c},xo:function(){return h},yT:function(){return x}});var r=n(36164),a=n(3546),s=n(28961),l=n(57288),o=n(31458);let i=s.fC,c=s.xz,d=e=>{let{className:t,children:n,...a}=e;return(0,r.jsx)(s.h_,{className:(0,l.cn)(t),...a,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};d.displayName=s.h_.displayName;let u=a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsx)(s.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...o,ref:t})});u.displayName=s.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(s.VY,{ref:t,className:(0,l.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...a})]})});m.displayName=s.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",n),...a})});p.displayName=s.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...a})});x.displayName=s.dk.displayName;let v=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aU,{ref:t,className:(0,l.cn)((0,o.d)(),n),...a})});v.displayName=s.aU.displayName;let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.$j,{ref:t,className:(0,l.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...a})});g.displayName=s.$j.displayName},95052:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(36164),a=n(3546),s=n(30317),l=n(57288),o=n(81565);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...a,children:(0,r.jsx)(s.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(o.IconCheck,{className:"h-4 w-4"})})})});i.displayName=s.fC.displayName},25600:function(e,t,n){"use strict";n.d(t,{FF:function(){return v},Tu:function(){return x},aM:function(){return d},bC:function(){return g},sw:function(){return u},ue:function(){return p},yo:function(){return c}});var r=n(36164),a=n(3546),s=n(4318),l=n(14375),o=n(1663),i=n(57288);let c=s.fC,d=s.xz,u=s.x8,m=s.h_,f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a,ref:t})});f.displayName=s.aV.displayName;let h=(0,l.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=a.forwardRef((e,t)=>{let{side:n="right",className:a,children:l,...c}=e;return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)(h({side:n}),a),...c,children:[l,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=s.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};x.displayName="SheetHeader";let v=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};v.displayName="SheetFooter";let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",n),...a})});g.displayName=s.Dx.displayName;let b=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});b.displayName=s.dk.displayName},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3546),a=n(11978);function s(){let e=(0,a.usePathname)(),t=(0,a.useRouter)(),n=(0,a.useSearchParams)(),s=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),l=(0,r.useCallback)(r=>{let a=function(e,t,n){var r,a;let s=null===(r=n.searchParams)||void 0===r?void 0:r.set,l=null===(a=n.searchParams)||void 0===a?void 0:a.del,o=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[t,n]=e;return o.set(t,n)}),l&&(Array.isArray(l)?l.forEach(e=>o.delete(e)):o.delete(l));let i=o.toString(),c=e;return i.length>0&&(c+="?".concat(i)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==r?void 0:r.pathname)||e,n,r);return r.replace?t.replace(a):t.push(a),a},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:s,updateUrlComponents:l}}},96274:function(e,t,n){"use strict";n.d(t,{W:function(){return c},u:function(){return o}});var r=n(27257),a=n(85654);let s=[],l={pendingThreadId:void 0},o=(0,r.Ue)()((0,a.tJ)(()=>({...l}),{name:"tabby-page-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!s.includes(t)}))})),i=o.setState,c=e=>{i(()=>({pendingThreadId:e}))}},37266:function(e,t,n){"use strict";n.d(t,{CR:function(){return s},F0:function(){return o},wh:function(){return i}});var r=n(27257);let a={homePage:void 0},s=(0,r.Ue)()(()=>({...a})),l=s.setState,o=e=>l(()=>({homePage:e})),i=()=>l(()=>({homePage:void 0}))},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},30317:function(e,t,n){"use strict";n.d(t,{fC:function(){return N},z$:function(){return C}});var r=n(65122),a=n(3546),s=n(79869),l=n(47091),o=n(65727),i=n(27250),c=n(81544),d=n(96593),u=n(96497),m=n(72205);let f="Checkbox",[h,p]=(0,l.b)(f),[x,v]=h(f),g=(0,a.forwardRef)((e,t)=>{let{__scopeCheckbox:n,name:l,checked:c,defaultChecked:d,required:u,disabled:f,value:h="on",onCheckedChange:p,...v}=e,[g,b]=(0,a.useState)(null),N=(0,s.e)(t,e=>b(e)),C=(0,a.useRef)(!1),S=!g||!!g.closest("form"),[k=!1,E]=(0,i.T)({prop:c,defaultProp:d,onChange:p}),I=(0,a.useRef)(k);return(0,a.useEffect)(()=>{let e=null==g?void 0:g.form;if(e){let t=()=>E(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,E]),(0,a.createElement)(x,{scope:n,state:k,disabled:f},(0,a.createElement)(m.WV.button,(0,r.Z)({type:"button",role:"checkbox","aria-checked":y(k)?"mixed":k,"aria-required":u,"data-state":w(k),"data-disabled":f?"":void 0,disabled:f,value:h},v,{ref:N,onKeyDown:(0,o.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.M)(e.onClick,e=>{E(e=>!!y(e)||!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})})),S&&(0,a.createElement)(j,{control:g,bubbles:!C.current,name:l,value:h,checked:k,required:u,disabled:f,style:{transform:"translateX(-100%)"}}))}),b=(0,a.forwardRef)((e,t)=>{let{__scopeCheckbox:n,forceMount:s,...l}=e,o=v("CheckboxIndicator",n);return(0,a.createElement)(u.z,{present:s||y(o.state)||!0===o.state},(0,a.createElement)(m.WV.span,(0,r.Z)({"data-state":w(o.state),"data-disabled":o.disabled?"":void 0},l,{ref:t,style:{pointerEvents:"none",...e.style}})))}),j=e=>{let{control:t,checked:n,bubbles:s=!0,...l}=e,o=(0,a.useRef)(null),i=(0,c.D)(n),u=(0,d.t)(t);return(0,a.useEffect)(()=>{let e=o.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked"),a=r.set;if(i!==n&&a){let t=new Event("click",{bubbles:s});e.indeterminate=y(n),a.call(e,!y(n)&&n),e.dispatchEvent(t)}},[i,n,s]),(0,a.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!y(n)&&n},l,{tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return"indeterminate"===e}function w(e){return y(e)?"indeterminate":e?"checked":"unchecked"}let N=g,C=b},90893:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(65122),a=n(3546),s=n(72205);let l=(0,a.forwardRef)((e,t)=>(0,a.createElement)(s.WV.label,(0,r.Z)({},e,{ref:t,onMouseDown:t=>{var n;null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}}))),o=l},1333:function(e,t,n){"use strict";n.d(t,{Pc:function(){return y},ck:function(){return R},fC:function(){return A}});var r=n(65122),a=n(3546),s=n(65727),l=n(85656),o=n(79869),i=n(47091),c=n(29434),d=n(72205),u=n(17957),m=n(27250),f=n(57541);let h="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},x="RovingFocusGroup",[v,g,b]=(0,l.B)(x),[j,y]=(0,i.b)(x,[b]),[w,N]=j(x),C=(0,a.forwardRef)((e,t)=>(0,a.createElement)(v.Provider,{scope:e.__scopeRovingFocusGroup},(0,a.createElement)(v.Slot,{scope:e.__scopeRovingFocusGroup},(0,a.createElement)(S,(0,r.Z)({},e,{ref:t}))))),S=(0,a.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:l,loop:i=!1,dir:c,currentTabStopId:x,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:b,onEntryFocus:j,...y}=e,N=(0,a.useRef)(null),C=(0,o.e)(t,N),S=(0,f.gm)(c),[k=null,E]=(0,m.T)({prop:x,defaultProp:v,onChange:b}),[A,R]=(0,a.useState)(!1),T=(0,u.W)(j),D=g(n),P=(0,a.useRef)(!1),[M,$]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=N.current;if(e)return e.addEventListener(h,T),()=>e.removeEventListener(h,T)},[T]),(0,a.createElement)(w,{scope:n,orientation:l,dir:S,loop:i,currentTabStopId:k,onItemFocus:(0,a.useCallback)(e=>E(e),[E]),onItemShiftTab:(0,a.useCallback)(()=>R(!0),[]),onFocusableItemAdd:(0,a.useCallback)(()=>$(e=>e+1),[]),onFocusableItemRemove:(0,a.useCallback)(()=>$(e=>e-1),[])},(0,a.createElement)(d.WV.div,(0,r.Z)({tabIndex:A||0===M?-1:0,"data-orientation":l},y,{ref:C,style:{outline:"none",...e.style},onMouseDown:(0,s.M)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,s.M)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(h,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=D().filter(e=>e.focusable),t=e.find(e=>e.active),n=e.find(e=>e.id===k),r=[t,n,...e].filter(Boolean),a=r.map(e=>e.ref.current);I(a)}}P.current=!1}),onBlur:(0,s.M)(e.onBlur,()=>R(!1))})))}),k=(0,a.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:l=!0,active:o=!1,tabStopId:i,...u}=e,m=(0,c.M)(),f=i||m,h=N("RovingFocusGroupItem",n),p=h.currentTabStopId===f,x=g(n),{onFocusableItemAdd:b,onFocusableItemRemove:j}=h;return(0,a.useEffect)(()=>{if(l)return b(),()=>j()},[l,b,j]),(0,a.createElement)(v.ItemSlot,{scope:n,id:f,focusable:l,active:o},(0,a.createElement)(d.WV.span,(0,r.Z)({tabIndex:p?0:-1,"data-orientation":h.orientation},u,{ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{l?h.onItemFocus(f):e.preventDefault()}),onFocus:(0,s.M)(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:(0,s.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){h.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let a=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return E[a]}(e,h.orientation,h.dir);if(void 0!==t){e.preventDefault();let a=x().filter(e=>e.focusable),s=a.map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&s.reverse();let a=s.indexOf(e.currentTarget);s=h.loop?(n=s,r=a+1,n.map((e,t)=>n[(r+t)%n.length])):s.slice(a+1)}setTimeout(()=>I(s))}})})))}),E={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}let A=C,R=k},6044:function(e,t,n){"use strict";n.d(t,{VY:function(){return I},aV:function(){return k},fC:function(){return S},nU:function(){return w},xz:function(){return E}});var r=n(65122),a=n(3546),s=n(65727),l=n(47091),o=n(1333),i=n(96497),c=n(72205),d=n(57541),u=n(27250),m=n(29434);let f="Tabs",[h,p]=(0,l.b)(f,[o.Pc]),x=(0,o.Pc)(),[v,g]=h(f),b=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,onValueChange:l,defaultValue:o,orientation:i="horizontal",dir:f,activationMode:h="automatic",...p}=e,x=(0,d.gm)(f),[g,b]=(0,u.T)({prop:s,onChange:l,defaultProp:o});return(0,a.createElement)(v,{scope:n,baseId:(0,m.M)(),value:g,onValueChange:b,orientation:i,dir:x,activationMode:h},(0,a.createElement)(c.WV.div,(0,r.Z)({dir:x,"data-orientation":i},p,{ref:t})))}),j=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:s=!0,...l}=e,i=g("TabsList",n),d=x(n);return(0,a.createElement)(o.fC,(0,r.Z)({asChild:!0},d,{orientation:i.orientation,dir:i.dir,loop:s}),(0,a.createElement)(c.WV.div,(0,r.Z)({role:"tablist","aria-orientation":i.orientation},l,{ref:t})))}),y=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:l,disabled:i=!1,...d}=e,u=g("TabsTrigger",n),m=x(n),f=N(u.baseId,l),h=C(u.baseId,l),p=l===u.value;return(0,a.createElement)(o.ck,(0,r.Z)({asChild:!0},m,{focusable:!i,active:p}),(0,a.createElement)(c.WV.button,(0,r.Z)({type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:f},d,{ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(l)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(l)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;p||i||!e||u.onValueChange(l)})})))}),w=(0,a.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,forceMount:l,children:o,...d}=e,u=g("TabsContent",n),m=N(u.baseId,s),f=C(u.baseId,s),h=s===u.value,p=(0,a.useRef)(h);return(0,a.useEffect)(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.createElement)(i.z,{present:l||h},({present:n})=>(0,a.createElement)(c.WV.div,(0,r.Z)({"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!n,id:f,tabIndex:0},d,{ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0}}),n&&o))});function N(e,t){return`${e}-trigger-${t}`}function C(e,t){return`${e}-content-${t}`}let S=b,k=j,E=y,I=w},81544:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(3546);function a(e){let t=(0,r.useRef)({value:e,previous:e});return(0,r.useMemo)(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[8415,7565,4648,6527,7430,55,641,340,4007,2546,1283,3449,2578,8511,4421,2287,7070,1454,1002,8961,4546,4553,9275,9148,4405,2991,8964,5738,2812,7288,1565,4656,9634,4129,3375,5289,1744],function(){return e(e.s=72282)}),_N_E=e.O()}]);
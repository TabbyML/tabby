✓ Initialized. View app at https://modal.com/apps/ap-csPtFg6AAByT1DL4IfDH7A
Building image im-qOafnW4YI3pBMqm1UVcXu3

=> Step 0: running function 'download_model'
Writing to new file.
[2m2023-11-14T23:33:24.826824Z[0m [32m INFO[0m [2mtabby::download[0m[2m:[0m [2mcrates/tabby/src/download.rs[0m[2m:[0m[2m18:[0m model 'TabbyML/StarCoder-3B' is ready
Creating image snapshot...
Finished snapshot; took 3.68s
Finished image build for im-qOafnW4YI3pBMqm1UVcXu3
Building image im-jlb2xpWIQvUP08vKn8BYCh

=> Step 0: FROM base

=> Step 1: RUN python -m pip install 'git+https://github.com/TabbyML/tabby.git#egg=tabby-python-client&subdirectory=experimental/eval/tabby-python-client' pandas
Looking in indexes: http://pypi-mirror.modal.local:5555/simple
Collecting tabby-python-client
  Cloning https://github.com/TabbyML/tabby.git to /tmp/pip-install-zozvyk07/tabby-python-client_31572d88da854c04b7a01aa3e8c8dca5
  Running command git clone --filter=blob:none --quiet https://github.com/TabbyML/tabby.git /tmp/pip-install-zozvyk07/tabby-python-client_31572d88da854c04b7a01aa3e8c8dca5
  Resolved https://github.com/TabbyML/tabby.git to commit bd072d8fb95de0aea546124f488d01f747113e09
  Running command git submodule update --init --recursive -q
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Getting requirements to build wheel: started
  Getting requirements to build wheel: finished with status 'done'
  Preparing metadata (pyproject.toml): started
  Preparing metadata (pyproject.toml): finished with status 'done'
Collecting pandas
  Downloading http://pypi-mirror.modal.local:5555/simple/pandas/pandas-2.1.3-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.2 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.2/12.2 MB 254.7 MB/s eta 0:00:00
Collecting httpx<0.25.0,>=0.15.0 (from tabby-python-client)
  Downloading http://pypi-mirror.modal.local:5555/simple/httpx/httpx-0.24.1-py3-none-any.whl (75 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75.4/75.4 kB 301.3 MB/s eta 0:00:00
Requirement already satisfied: attrs>=21.3.0 in /usr/local/lib/python3.11/site-packages (from tabby-python-client) (23.1.0)
Collecting python-dateutil<3,>=2.8.0 (from tabby-python-client)
  Downloading http://pypi-mirror.modal.local:5555/simple/python-dateutil/python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 247.7/247.7 kB 315.7 MB/s eta 0:00:00
Requirement already satisfied: numpy<2,>=1.23.2 in /usr/local/lib/python3.11/site-packages (from pandas) (1.26.1)
Collecting pytz>=2020.1 (from pandas)
  Downloading http://pypi-mirror.modal.local:5555/simple/pytz/pytz-2023.3.post1-py2.py3-none-any.whl (502 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 502.5/502.5 kB 239.4 MB/s eta 0:00:00
Collecting tzdata>=2022.1 (from pandas)
  Downloading http://pypi-mirror.modal.local:5555/simple/tzdata/tzdata-2023.3-py2.py3-none-any.whl (341 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 341.8/341.8 kB 248.2 MB/s eta 0:00:00
Requirement already satisfied: certifi in /usr/local/lib/python3.11/site-packages (from httpx<0.25.0,>=0.15.0->tabby-python-client) (2023.7.22)
Collecting httpcore<0.18.0,>=0.15.0 (from httpx<0.25.0,>=0.15.0->tabby-python-client)
  Downloading http://pypi-mirror.modal.local:5555/simple/httpcore/httpcore-0.17.3-py3-none-any.whl (74 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 74.5/74.5 kB 280.8 MB/s eta 0:00:00
Requirement already satisfied: idna in /usr/local/lib/python3.11/site-packages (from httpx<0.25.0,>=0.15.0->tabby-python-client) (3.4)
Requirement already satisfied: sniffio in /usr/local/lib/python3.11/site-packages (from httpx<0.25.0,>=0.15.0->tabby-python-client) (1.3.0)
Requirement already satisfied: six>=1.5 in /usr/local/lib/python3.11/site-packages (from python-dateutil<3,>=2.8.0->tabby-python-client) (1.16.0)
Collecting h11<0.15,>=0.13 (from httpcore<0.18.0,>=0.15.0->httpx<0.25.0,>=0.15.0->tabby-python-client)
  Downloading http://pypi-mirror.modal.local:5555/simple/h11/h11-0.14.0-py3-none-any.whl (58 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.3/58.3 kB 233.7 MB/s eta 0:00:00
Requirement already satisfied: anyio<5.0,>=3.0 in /usr/local/lib/python3.11/site-packages (from httpcore<0.18.0,>=0.15.0->httpx<0.25.0,>=0.15.0->tabby-python-client) (4.0.0)
Building wheels for collected packages: tabby-python-client
  Building wheel for tabby-python-client (pyproject.toml): started
  Building wheel for tabby-python-client (pyproject.toml): finished with status 'done'
  Created wheel for tabby-python-client: filename=tabby_python_client-0.4.0.dev0-py3-none-any.whl size=25302 sha256=61283843fc1e99bc44a5479a42a953383ab46f6f204bb3c58ff83d9e62040f44
  Stored in directory: /tmp/pip-ephem-wheel-cache-f8pdh9om/wheels/18/a4/a4/b23ad3633924ecfc99396fcbdb73918f03dfc3a94b056d3b68
Successfully built tabby-python-client
Installing collected packages: pytz, tzdata, python-dateutil, h11, pandas, httpcore, httpx, tabby-python-client
Successfully installed h11-0.14.0 httpcore-0.17.3 httpx-0.24.1 pandas-2.1.3 python-dateutil-2.8.2 pytz-2023.3.post1 tabby-python-client-0.4.0.dev0 tzdata-2023.3
Creating image snapshot...
Finished snapshot; took 2.81s

Built image im-jlb2xpWIQvUP08vKn8BYCh in 88.90s
✓ Created objects.
├── 🔨 Created download_model.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
├── 🔨 Created Model.health.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
└── 🔨 Created Model.complete.
TabbyML/StarCoder-3B
[2m2023-11-14T23:35:03.859680Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m146:[0m Starting server, this might takes a few minutes...
ggml_init_cublas: GGML_CUDA_FORCE_MMQ:   no
ggml_init_cublas: CUDA_USE_TENSOR_CORES: yes
ggml_init_cublas: found 1 CUDA devices:
  Device 0: NVIDIA A10, compute capability 8.6
[2m2023-11-14T23:35:10.534112Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m165:[0m Listening at 0.0.0.0:8000

  [34;1mTELEMETRY[0m

  As an open source project, we collect usage statistics to inform development priorities. For more
  information, read https://tabby.tabbyml.com/docs/configuration#usage-collection

  We will not see or any code in your development process.

  To opt-out, add the TABBY_DISABLE_USAGE_COLLECTION=1 to your tabby server's environment variables.

  [1mWelcome to Tabby![0m

  If you have any questions or would like to engage with the Tabby team, please join us on Slack
  (https://tinyurl.com/35sv9kz2).


Tabby server ready!
{'model': 'TabbyML/StarCoder-3B', 'device': 'cuda', 'arch': 'x86_64', 'cpu_info': 'unknown', 'cpu_count': 5, 'cuda_devices': ['NVIDIA A10'], 'version': {'build_date': '2023-11-07', 'build_timestamp': '2023-11-07T21:20:05.755274109Z', 'git_sha': '732f022708e0d6c1d3a112a7b2f1bb75c1eaf748', 'git_describe': 'v0.5.4'}}
✓ Initialized. View app at https://modal.com/apps/ap-zkTgCfQippLfLmNaMCv8Zs
✓ Created objects.
├── 🔨 Created download_model.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
├── 🔨 Created Model.health.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
└── 🔨 Created Model.complete.
TabbyML/StarCoder-3B
[2m2023-11-14T23:35:21.471948Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m146:[0m Starting server, this might takes a few minutes...
ggml_init_cublas: GGML_CUDA_FORCE_MMQ:   no
ggml_init_cublas: CUDA_USE_TENSOR_CORES: yes
ggml_init_cublas: found 1 CUDA devices:
  Device 0: NVIDIA A10, compute capability 8.6
[2m2023-11-14T23:35:25.710880Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m165:[0m Listening at 0.0.0.0:8000

  [34;1mTELEMETRY[0m

  As an open source project, we collect usage statistics to inform development priorities. For more
  information, read https://tabby.tabbyml.com/docs/configuration#usage-collection

  We will not see or any code in your development process.

  To opt-out, add the TABBY_DISABLE_USAGE_COLLECTION=1 to your tabby server's environment variables.

  [1mWelcome to Tabby![0m

  If you have any questions or would like to engage with the Tabby team, please join us on Slack
  (https://tinyurl.com/35sv9kz2).


Tabby server ready!
{'model': 'TabbyML/StarCoder-3B', 'device': 'cuda', 'arch': 'x86_64', 'cpu_info': 'unknown', 'cpu_count': 5, 'cuda_devices': ['NVIDIA A10'], 'version': {'build_date': '2023-11-07', 'build_timestamp': '2023-11-07T21:20:05.755274109Z', 'git_sha': '732f022708e0d6c1d3a112a7b2f1bb75c1eaf748', 'git_describe': 'v0.5.4'}}
✓ Initialized. View app at https://modal.com/apps/ap-UUjtSXn5kOi0ZeDjpRQtVu
✓ Created objects.
├── 🔨 Created download_model.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
├── 🔨 Created Model.health.
├── 🔨 Created mount /Users/zhangyan/myenv/tabby-data-pipeline/predict.py
└── 🔨 Created Model.complete.
TabbyML/StarCoder-3B
[2m2023-11-14T23:35:36.979653Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m146:[0m Starting server, this might takes a few minutes...
ggml_init_cublas: GGML_CUDA_FORCE_MMQ:   no
ggml_init_cublas: CUDA_USE_TENSOR_CORES: yes
ggml_init_cublas: found 1 CUDA devices:
  Device 0: NVIDIA A10, compute capability 8.6
[2m2023-11-14T23:35:40.897324Z[0m [32m INFO[0m [2mtabby::serve[0m[2m:[0m [2mcrates/tabby/src/serve/mod.rs[0m[2m:[0m[2m165:[0m Listening at 0.0.0.0:8000

  [34;1mTELEMETRY[0m

  As an open source project, we collect usage statistics to inform development priorities. For more
  information, read https://tabby.tabbyml.com/docs/configuration#usage-collection

  We will not see or any code in your development process.

  To opt-out, add the TABBY_DISABLE_USAGE_COLLECTION=1 to your tabby server's environment variables.

  [1mWelcome to Tabby![0m

  If you have any questions or would like to engage with the Tabby team, please join us on Slack
  (https://tinyurl.com/35sv9kz2).


Tabby server ready!
{'model': 'TabbyML/StarCoder-3B', 'device': 'cuda', 'arch': 'x86_64', 'cpu_info': 'unknown', 'cpu_count': 5, 'cuda_devices': ['NVIDIA A10'], 'version': {'build_date': '2023-11-07', 'build_timestamp': '2023-11-07T21:20:05.755274109Z', 'git_sha': '732f022708e0d6c1d3a112a7b2f1bb75c1eaf748', 'git_describe': 'v0.5.4'}}
